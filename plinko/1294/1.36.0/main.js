!function(x){"use strict";function l(){return er.__string_rec(this,"")}var c,e={},d={};function t(t,e){var n,s=Object.create(t);for(n in e)s[n]=e[n];return e.toString!==Object.prototype.toString&&(s.toString=e.toString),s}function ct(t,e){this.r=new RegExp(t,e.split("u").join(""))}function i(t,e){this.min=t,this.max=e}function wt(){}function Z(){}function Ja(){}function w(){this.b=""}function ut(){}function b(){}function _t(t){this.nodeType=t,this.children=[],this.attributeMap=new N}function M(t){(this.i=t).set_bigEndian(!1)}function S(){}function k(t){(this.i=t).set_bigEndian(!0),this.checkCRC=!0}function Vt(){}function B(t){(this.i=t).set_bigEndian(!1)}function h(t,e){this._itemIndex=0,this._totalItems=0,this._commonFolder="common",this._defaultLocale="en",this._localizedFolder="localized",this._configFolder="config",this._fontFolder="font",this._gradientFolder="gradient",this._modelFolder="model",this._spineFolder="spine",this._atlasFolder="atlas",this._soundFolder="sound",this._imageFolder="image";var n=this;null==e&&(e={}),this._platform=e.platform,this._locale=e.locale,this._formats=e.formats,this._imageFolder=null!=e.imageFolder?e.imageFolder:this._imageFolder,this._soundFolder=null!=e.soundFolder?e.soundFolder:this._soundFolder,this._fontFolder=null!=e.fontFolder?e.fontFolder:this._fontFolder,this._atlasFolder=null!=e.atlasFolder?e.atlasFolder:this._atlasFolder,this._spineFolder=null!=e.spineFolder?e.spineFolder:this._spineFolder,this._modelFolder=null!=e.modelFolder?e.modelFolder:this._modelFolder,this._gradientFolder=null!=e.gradientFolder?e.gradientFolder:this._gradientFolder,this._configFolder=null!=e.configFolder?e.configFolder:this._configFolder,this._defaultLocale=null!=e.defaultLocale?e.defaultLocale:this._defaultLocale,this._commonFolder=null!=e.commonFolder?e.commonFolder:this._commonFolder,this._localizedFolder=null!=e.localizedFolder?e.localizedFolder:this._localizedFolder,this._extensionHandlers=new fl,this._loadingQueue=[],this._loadedBytes=new N,(t=new u_(t)).onData=function(t){t=JSON.parse(t);n._content=t.children.find(function(t){return"default"==t.name}),"default"!=e.pack&&(n._brandingContent=t.children.find(function(t){return t.name==e.pack})),n._commonContent=wt.find(n._content.children,function(t){return t.name==n._commonFolder}),n._platformContent=wt.find(n._content.children,function(t){return t.name==e.platform}),null!=n._brandingContent&&(n._brandingCommon=wt.find(n._brandingContent.children,function(t){return t.name==n._commonFolder}),n._brandingPlatform=wt.find(n._brandingContent.children,function(t){return t.name==e.platform})),n.onReady()},t.onError=function(t){},t.request()}function p(){this._predicates=[],this._scheduled=[],this.inited=!1,this.next=null,this.owner=null}function a(){}function r(){}function o(t){this._lastTime=null,this.getDelta=null,t.push(new ll),t.push(new rl),t.sort(function(t,e){var n=0,t=(n|=1<<t.type._hx_index,0);return(t|=1<<e.type._hx_index)<n?1:n<t?-1:0}),this._systems=t,this.baseEntity=new Zr("base")}function u(){}function _(){this.componentFlags=0}function I(){}function T(){this.enableShaderDevices=new N,this.disableShaderDevices=new N,this.pixelRatio=1,this.customRenderCallback=null,this.frozen=!0,this.stageSize={x:0,y:0},p.call(this),this.componentType=el.Model,this.resizeSignal=new hl,this.freezeSignal=new hl}function E(){this.sceneMap=new N,this.dirty=!1,this.scenes=[],p.call(this),this.componentType=el.SceneModel}function P(t,e,n,s,i,a){this.instance=null,this.entity=null,this.interactive=!1,this.layerIndex=null,this.is3D=!1,this.name=t,null!=e&&(this.is3D=e),null!=n&&(this.layerIndex=n),null!=s&&(this.interactive=s),null!=i&&(this.entity=i),null!=a&&(this.instance=a)}function z(){}function L(t,e){this._next=null,this._signal=t,this._listener=e,this.stayInList=!0}function U(t){this._head=null!=t?new L(this,t):null,this._deferredTasks=null}function G(){}function X(){var t=this,e=ao.CURRENT;null!=e?((this.engine=e).onReady=W(this,this.setup),qu.delay(W(this,this.setup),0)):tc.start(function(){e=new ao,(t.engine=e).onReady=W(t,t.setup),e.init()})}function Y(t,e,n,s){this._fileSystem=new Cl,this.sdScale=1,this.premultipliedAlphaAtlases=!1,m.MAX_PRECISION="highp",this._core=t,this._renderer=e,this._sound=n,this._engine=s,X.call(this),this.appModel=new T,this.initFrozenDetection(),this._assetConfig={}}function j(t){this._alpha=1,p.call(this),t=(t=new Vl(null!=t?t:new _o),Ql.init(t,null),t),this.object=t,this.componentType=el.Graphics3D}function H(t){this._hasBounds=!1,p.call(this),this._config=t,this.componentType=el.Actor}function K(t,e,n,s,i,a,r,l,o,h,u){this.orthConfig=null,this.rightHanded=!0,this.fovRatio=1.3333333333333333,this.fov=null,this.zFar=100,this.zNear=1,this.cameraTarget=new R(-1e-5),this.cameraPos=new R(2,3,4),this.bounds2d=null,this.boundsMult=new R(1,1),(this.boundsObject=null)!=t&&(this.boundsObject=t),null!=e&&(this.boundsMult=e),null!=n&&(this.bounds2d=n),null!=s&&(this.cameraPos=s),null!=i&&(this.cameraTarget=i),null!=a&&(this.zNear=a),null!=r&&(this.zFar=r),null!=l&&(this.fov=l),null!=o&&(this.fovRatio=o),null!=h&&(this.rightHanded=h),null!=u&&(this.orthConfig=u)}function J(){}function $(t){this._onFitCallback=null,this._enabled=!0,this._shouldFit=!1,this._forceFit=!1,this._time=0,this.duration=1,p.call(this),this._config=t,this.componentType=el.Actor}function tt(t,e,n,s){this.right=0,this.left=0,this.bottom=0,this.top=0,null!=t&&(this.top=t),null!=e&&(this.bottom=e),null!=n&&(this.left=n),null!=s&&(this.right=s)}function et(t,e,n,s,i){this.crop=!1,this.bounds=null,this.fitCurve=function(t){return t},this.duration=1,this.margins=new tt(null,null,null,null),null!=t&&(this.margins=t),null!=e&&(this.duration=e),null!=n&&(this.fitCurve=n),null!=s&&(this.bounds=s),null!=i&&(this.crop=i)}function nt(t,e){this._targetScale=new R,this._scheduledTweens=null,this._tweening=!1,this.enable=!0,j.call(this,e),this._config=t,this.set_crop(this._config.crop),this.set_bounds(this._config.bounds),this.set_margins(this._config.margins)}function st(t,e,n,s){this.right=0,this.left=0,this.bottom=0,this.top=0,null!=t&&(this.top=t),null!=e&&(this.bottom=e),null!=n&&(this.left=n),null!=s&&(this.right=s)}function it(t,e,n,s,i,a,r,l){this.getBounds=null,this.speed=1,this.maxScale=null,this.scaleZ=!1,this.keepRatio=!0,this.crop=!1,this.bounds=null,this.margins=new st(0,0,0,0),null!=t&&(this.margins=t),null!=e&&(this.bounds=e),null!=n&&(this.crop=n),null!=s&&(this.keepRatio=s),null!=i&&(this.scaleZ=i),null!=a&&(this.maxScale=a),null!=r&&(this.speed=r),null!=l&&(this.getBounds=l)}function at(t){p.call(this),this._sceneId=at.sceneCounter++,this.scene=t}function rt(){this.chainId=null,p.call(this),this.componentType=el.Actor}function ot(){}function ht(){}function f(){this.priority=0,this.initialize()}function n(){this.flipY__=0,f.call(this)}function dt(){}function pt(t){this.data=t}function ft(){}function gt(t,e){this.realMaxWidth=-1,this.constraintWidth=-1,this.lineBreak=!0,this.lineSpacing=0,this.letterSpacing=0,zl.call(this,e),this.set_font(t),this.set_textAlign(Kl.Left),this.set_text(""),this.currentText="",this.set_textColor(16777215)}function mt(t,e){this.yMarg=10,this.xMarg=0,this._origSize=this._size=t.size,gt.call(this,t.clone(),e)}function At(t,e,n,s,i,a,r,l,o,h,u,_){this.onRepeat=null,this.onUpdate=null,this.repeat=!1,this.curveDuration=null,this.relative=!1,this.curve=function(t){return t},this.time=0,this.duration=1,this.delay=0,this.onDone=null,this.from=null,(this.to=null)!=t&&(this.to=t),null!=e&&(this.from=e),null!=n&&(this.onDone=n),null!=s&&(this.delay=s),null!=i&&(this.duration=i),null!=a&&(this.time=a),null!=r&&(this.curve=r),null!=l&&(this.relative=l),null!=o&&(this.curveDuration=o),null!=h&&(this.repeat=h),null!=u&&(this.onUpdate=u),null!=_&&(this.onRepeat=_)}function xt(t,e){zl.call(this,e),this.set_tile(t)}function bt(t){this.followRotation=!1,this.posChanged=!0,this.x=0,this.posChanged=!0,this.y=0,this.posChanged=!0,this.scaleX=1,this.posChanged=!0,this.scaleY=1,this.posChanged=!0,this.rotation=0,this.posChanged=!0,this.anchorX=0,this.posChanged=!0,this.anchorY=0,this.viewX=0,this.viewY=0,this.viewW=1,this.viewH=1,this.visible=!0,null!=t&&t.addCamera(this)}function yt(t,e){this.prevChar=t,this.offset=e}function vt(t,e){this.t=t,this.width=e}function Ct(t,e,n){this.offsetY=0,this.offsetX=0,this.name=t,this.size=e,this.initSize=e,this.glyphs=new fl,this.defaultChar=this.nullChar=new vt(new Jl(null,0,0,0,0),0),this.charset=Q_.getDefault(),null!=t&&(this.tilePath=m_.withExtension(t,"png")),this.type=null==n?Yl.BitmapFont:n}function Mt(){}function St(){this.refCount=0}function kt(){St.call(this),this.buffers=[],this.state=new eo}function Bt(t){this.bevel=.25,this.my=0,this.mx=0,this.md=1,this.mc=0,this.mb=0,this.ma=1,zl.call(this,t),this.content=new kt,this.tile=Jl.fromColor(16777215),this.clear()}function It(){}function Tt(t){Pl.call(this,t),this.layersIndexes=[],this.layerCount=0}function Ft(){this.engine=ao.CURRENT,this.frame=0,this.time=0,this.elapsedTime=1/tc.getDefaultFrameRate(),this.textures=new mo(this)}function Dt(t){this.renderZoneIndex=0,this.renderZoneStack=[],this.tmpBounds=new to,this.defaultSmooth=!1,this.globalAlpha=1,Ft.call(this),this.scene=t,this.bufPos=0,this.manager=new Ro,this.pass=new To("",null),this.pass.depth(!0,xo.Always),this.pass.set_culling(Ao.None),this.baseShader=new qo,this.baseShader.setPriority(100),this.baseShader.zValue__=0,this.baseShaderList=new Jc(this.baseShader),this.targetsStack=[],this.targetsStackIndex=0,this.cameraStack=[],this.cameraStackIndex=0,this.filterStack=[],this.filterStackIndex=0}function Et(){this.useAllocatorLimit=1024,St.call(this),this.state=new eo,this.clear()}function Pt(){}function zt(){this.xMin=2147483647,this.yMin=2147483647,this.xMax=-2147483648,this.yMax=-2147483648}function Qt(){this.a=1,this.b=0,this.c=0,this.d=1,this.x=0,this.y=0}function Ot(){this.useScreenResolution=Ot.defaultUseScreenResolution,this.resolutionScale=1,this.enable=!0,this.smooth=!1,this.boundsExtend=0,this.autoBounds=!0}function Lt(){Ot.call(this),this.boundsExtend=1}function Ut(t){this.bindCount=0,Ot.call(this),this.hide=new Lt,this.set_mask(t),this.maskMatrix=new Qt,this.tmpMatrix=new Qt}function Nt(t,e,n,s){null==s&&(s=0),null==n&&(n=1),null==e&&(e=1),null==t&&(t=1),Ot.call(this),this.smooth=!0,this.pass=new Eo(t,e,s,n)}function Gt(t){Ot.call(this),this.filters=null==t?[]:t}function Xt(){this.maskMatB__=new R,this.maskMatA__=new R,n.call(this)}function Yt(t,e,n){null==n&&(n=!1),null==e&&(e=!1),Ut.call(this,t),this.pass=new Do(new Xt),this.set_maskVisible(e),this.set_smoothAlpha(n)}function Wt(t,e,n,s){null==s&&(s=!0),null==n&&(n=.3),null==e&&(e=0),null==t&&(t=4),Ot.call(this),this.smooth=!0,this.pass=new zo(t,e,n,s)}function jt(t,e){null==e&&(e="texture"),Ot.call(this);for(var n=!1,s=0,i=t.shader.data.vars;s<i.length;)if(i[s++].name==e){n=!0;break}if(!n)throw tr.thrown("Shader does not have '"+e+"' variable");this.textureParam=e,this.pass=new Do(t)}function Ht(t,e){this.buffer=t,this.offset=e}function Zt(t,e,n,s,i,a){null==a&&(a=!1),null==i&&(i=4e3),null==s&&(s=.02),null==n&&(n=1.333333),null==e&&(e=1),null==t&&(t=25),this.viewY=0,this.viewX=0,this.fovY=t,this.zoom=e,this.screenRatio=n,this.zNear=s,this.zFar=i,this.rightHanded=a,this.pos=new R(2,3,4),this.up=new R(0,0,1),this.target=new R(0,0,0),this.m=new ro,this.mcam=new ro,this.mproj=new ro,this.frustum=new ho,this.update()}function qt(t,e,n,s){this.t=t,this.next=e,this.layer=n,this.mipLevel=s}function Kt(t,e){null==e&&(e=!1),this.mem=ao.CURRENT.mem,this.count=t,this.is32=e,this.mem.allocIndexes(this)}function Jt(){}function $t(t,e,n){this.name=t,this.frameCount=e,this.sampling=n,this.objects=[],this.lastEvent=-1,this.frame=0,this.speed=1,this.loop=!0,this.pause=!1}function te(){this.bindIndex=-1,this.splitIndex=-1,this.subs=[]}function ee(){}function ne(t,e,n){this.name=t,this.vertexCount=e,this.bonesPerVertex=n,0<e&&(this.vertexJoints=new Array(e*n),this.vertexWeights=new Array(e*n),this.envelop=[])}function se(){}function ie(){}function ae(t,e,n){null==n&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.z=n}function re(t,e,n,s){var i=t=null==t?0:t,a=e=null==e?0:e,r=n=null==n?0:n,s=null==(s=null==s?0:s)?0:s;null==n&&(r=0),null==e&&(a=0),this.x=i=null==t?0:i,this.y=a,this.z=r,this.r=s}function le(t){this.id=le.UID++,this.names=t}function oe(){}function he(t,e,n){this.s=t,this.vertex=e,this.shader=n}function ue(){}function _e(){}function ce(){this.triCount=0}function de(t,e,n){this.pos=t,this.count=e,this.next=n}function pe(t,e,n){if(this.flags=0,null!=n)for(var s=0;s<n.length;)this.flags|=1<<n[s++]._hx_index;this.size=e,this.stride=t,this.freeList=new de(0,e,null),this.mem=ao.CURRENT.mem,this.mem.allocManaged(this)}function fe(){}function ge(){}function me(t){null!=t&&this.addPass(new To("default",null)).addShader(t)}function Ae(t){this.mshader=new Ko,this.set_blendMode(y.None),me.call(this,this.mshader),this.set_texture(t)}function xe(){this.db=new N}function be(t,e,n,s,i){this.layers=n,(s=null==s?[]:s).push(Mo.IsArray),A.call(this,t,e,s,i)}function ye(t){this.name=t}function we(){this.color__=new R,n.call(this)}function ve(t,e,n){null==n&&(n=1),Do.call(this,new we);var s,i,a=U_._new(0);a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=0/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-0/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=t/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-0/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=0/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-n/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=t/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-n/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=0/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-0/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=n/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-0/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=0/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-e/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=n/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-e/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=0/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-(e-n)/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=t/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-(e-n)/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=0/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-e/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=t/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-e/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=(t-n)/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-0/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=t/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-0/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=(t-n)/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-e/e*2,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=t/t*2-1,a.pos==a.array.length&&((s=a.array.length<<1)<128&&(s=128),(i=new Float32Array(s)).set(a.array),a.array=i),a.array[a.pos++]=1-e/e*2,this.primitive=new No({vbuf:a,stride:2,quads:!0},!0),(n=this.shader.color__).x=1,n.y=1,n.z=1,n.w=1}function Ce(){this.layer__=0,n.call(this)}function Me(){n.call(this)}function Se(){this.mat__=new ro,n.call(this)}function ke(t){this.defaultSort=W(c=new Oo,c.sort),ye.call(this,t),this.manager=new Ro(this.getOutputs()),this.initGlobals()}function Be(t){this.pcfScale=1,this.pcfQuality=1,this.bias=.01,this.power=30,this.samplingKind=Qo.None,this.size=1024,this.mode=Vo.None,this.enabled=!0,null==this.format&&(this.format=v.R16F),ao.CURRENT.driver.isSupportedFormat(this.format)||(this.format=A.nativeFormat),ke.call(this,"shadow"),this.light=t,this.blur=new Eo(5),this.blur.set_quality(.5),(t=this.blur.shader).constModified=!0,t.isDepth__=this.format==A.nativeFormat}function Ie(t){this.minDist=-1,this.maxDist=-1,this.autoZPlanes=!1,this.autoShrink=!0,this.mergePass=new Do(new nh),Be.call(this,t),this.lightCamera=new Zt,this.lightCamera.orthoBounds=new oo,this.shader=this.dshader=new th,this.border=new ve(this.size,this.size),this.customDepth=ao.CURRENT.driver.hasFeature(co.AllocDepthBuffer),this.customDepth||(this.depth=Bo.getDefault())}function Te(t,e){null==t&&(t=1024),null!=e&&(this.format=e),Ie.call(this,null),this.set_size(t),this.color=new R,this.set_mode(Vo.Dynamic),this.shadowMapId=Nc.allocID("shadow.map"),this.shadowProjId=Nc.allocID("shadow.proj"),this.shadowColorId=Nc.allocID("shadow.color"),this.shadowPowerId=Nc.allocID("shadow.power"),this.shadowBiasId=Nc.allocID("shadow.bias")}function Fe(){this.viewport__=new R,this.colorID__=new R,f.call(this)}function De(){this.pickedIndex=-1,this.fixedColor=new Fe,ke.call(this,"hwpick"),this.material=new To("");var t=this.material,e=$a.One,n=$a.Zero;t.set_blendSrc(e),t.set_blendAlphaSrc(e),t.set_blendDst(n),t.set_blendAlphaDst(n),this.texOut=new A(3,3,[Mo.Target]),this.texOut.depthBuffer=new Bo(3,3)}function Ee(t){this.current=t,this.discarded=this.lastDisc=null}function Pe(){this.texture=0}function ze(t,e,n){if(null==e&&(e=!1),this.isStatic=!0,this.startIndex=0,this.idxPos=0,this.bufPos=0,St.call(this),this.isRaw=e,this.buffers=[],this.allIndexes=[],this.bounds=new oo,this.allocator=n,(this.stride=t)<3)throw tr.thrown("Minimum stride = 3")}function Re(){St.call(this)}function Ve(t,e){this.translatedZ=0,this.translatedY=0,this.translatedX=0,Re.call(this),this.points=t,this.idx=e}function Qe(t,e,n){this.bufferAliases=new N,Re.call(this),this.data=t,this.dataPosition=e,this.lib=n}function Oe(t){this.lineSize=0,this.curR=0,this.curZ=0,this.curY=0,this.curX=0,this.bprim=new ze(12),this.bprim.isStatic=!1,Xo.call(this,this.bprim,null,t),this.tmpPoints=[],this.lineShader=new eh,this.lineShader.setPriority(-100),(t=this.material).set_castShadows(!1),t.set_receiveShadows(!1),this.material.passes.set_enableLights(!1),this.material.passes.addShader(this.lineShader),(t=new _h).setPriority(-100),this.material.passes.addShader(t),this.material.passes.set_culling(Ao.None)}function Le(t,e){this.hitPoint=new R,this.lastClickFrame=-1,this.mouseDownButton=-1,this.allowMultiClick=!1,this.enableRightButton=!1,this.propagateEvents=!1,this.cancelEvents=!1,_o.call(this,e),this.shape=t,this.set_cursor(O_.Button)}function Ue(t,e){_o.call(this,e),this.shader=t}function Ne(){}function Ge(t,e,n){Xo.call(this,t,null==e?null:e[0],n),this.materials=null==e?[this.material]:e}function Xe(t,e){this.gid=t,this.value=e}function Ye(){Ft.call(this),this.cachedShaderList=[],this.cachedPassObjects=[]}function We(){this.passes=new Ee}function je(){this.effects=[],this.hasSetTarget=!1,this.emptyPasses=new Ee,this.allPasses=[],this.passObjects=new N,this.set_props(this.getDefaultProps());var e=this,n=(this.frontToBack=function(t){e.depthSort(!0,t)},this);this.backToFront=function(t){n.depthSort(!1,t)}}function He(t,e){_o.call(this,null),this.name=e.name,this.skin=t,this.parent=t,this.index=e.index}function Ze(t,e,n){this.enableRetargeting=!0,Ge.call(this,null,e,n),null!=t&&this.setSkinData(t)}function qe(t,e){this.priority=0,this.cullingDistance=-1,Ue.call(this,t,e)}function Ke(){this.enableSky=!1,ke.call(this,"depth"),this.depthMapId=Nc.allocID("depthMap")}function Je(){ke.call(this,"normal"),this.normalMapId=Nc.allocID("normalMap")}function $e(t){this.globals=new Float32Array(t.globalsSize<<2),this.params=new Float32Array(t.paramsSize<<2),this.tex=new Array(t.texturesCount),this.buffers=0<t.bufferCount?new Array(t.bufferCount):null}function tn(t){null==t&&(t=0),this.color__=new R,f.call(this);var e=this.color__;e.x=(t>>16&255)/255,e.y=(t>>8&255)/255,e.z=(255&t)/255,e.w=(t>>>24)/255}function en(t){null==t&&(t=0),this.colorKey__=new R,f.call(this);var e=this.colorKey__;e.x=(t>>16&255)/255,e.y=(t>>8&255)/255,e.z=(255&t)/255,e.w=(t>>>24)/255}function nn(t){this.matrix__=new ro,f.call(this),null!=t?this.matrix__.loadValues(t):this.matrix__.identity()}function sn(){this.color__=new R,this.mode__=0,n.call(this)}function an(){this.mat__=new ro,n.call(this)}function rn(){this.bonesMatrixes__=[],this.fourBonesByVertex__=!1,this.MaxBones__=0,f.call(this),this.constModified=!0,this.MaxBones__=34}function ln(t,e,n,s){null==s&&(s=1),null==n&&(n=1),null==e&&(e=0),null==t&&(t=0),this.uvScale__=new R,this.uvDelta__=new R,f.call(this);var i=this.uvDelta__,a=t,e=null==e?0:e;i.x=a=null==t?0:a,i.y=e,i.z=0,i.w=1,a=n,e=null==s?0:s,(i=this.uvScale__).x=a=null==n?0:a,i.y=e,i.z=0,i.w=1}function on(){f.call(this)}function hn(t,e){this.isCentered__=!0,this.tangent__=new R,this.normal__=new R,this.scale__=new R,f.call(this);var n=this.normal__;n.x=0,n.y=0,n.z=1,n.w=1,(n=this.tangent__).x=1,n.y=0,n.z=0,t=(n.w=1)/t,null==(e=1/e)&&(e=0),(n=this.scale__).x=t=null==t?0:t,n.y=e,n.z=0,n.w=1}function un(t,e,n){this.jurisdiction=null,this.serverGameInfo=t,this.overrides=e,null!=n&&(this.jurisdiction=n)}function _n(){}function cn(){}function dn(t,e,n){this.label=null,this.sizes=t,this.selectedIndex=e,null!=n&&(this.label=n)}function pn(t,e,n){this.label=null,this.difficulties=t,this.selectedIndex=e,null!=n&&(this.label=n)}function fn(t,e,n){this.superTurbo=null,this.turbo=null,this.normal=150,null!=t&&(this.normal=t),null!=e&&(this.turbo=e),null!=n&&(this.superTurbo=n)}function gn(t,e,n,s,i,a,r,l,o){this.isFeatureSpin=null,this.betCostMultiplierBaseGameEffect=!1,this.volatility=null,this.description=null,this.image=null,this.expectedRtp=null,this.betCostMultiplier=null,this.bonusGameId=t,this.name=e,null!=n&&(this.betCostMultiplier=n),null!=s&&(this.expectedRtp=s),null!=i&&(this.image=i),null!=a&&(this.description=a),null!=r&&(this.volatility=r),null!=l&&(this.betCostMultiplierBaseGameEffect=l),null!=o&&(this.isFeatureSpin=o)}function mn(){}function An(t,e,n,s,i){this.customOffset=null,this.layoutType=t,this.position=e,this.overlay=n,this.scale=s,null!=i&&(this.customOffset=i)}function xn(t,e){this.start=t,this.end=e}function bn(){}function yn(){}function wn(){b.typeof(wn.splash),b.typeof(wn.misc)}function vn(){}function Cn(){}function Mn(){}function Sn(){}function kn(){b.typeof(kn.win_under_bet),b.typeof(kn.win_over_medium),b.typeof(kn.win_over_low),b.typeof(kn.win_over_high),b.typeof(kn.level0),b.typeof(kn.bounce),b.typeof(kn.betlevel),b.typeof(kn.bet)}function Bn(){}function In(){}function Tn(t){this.preloaderBackplateTile=null;for(var e=window.document.createElement("script"),n=(e.type="text/javascript",e.src="vendor/needles.umd.js",window.document.body.appendChild(e),Wd.divisionExtraScale=6,this._casinoModel=new mh,this._soundTriggers=new gh(W(this,this.addSoundEventHandler)),null==t.mobileAssetDir&&(t.mobileAssetDir="sd"),null==t.desktopAssetDir&&(t.desktopAssetDir="hd"),this._config=t,this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this._uiChannel=hacksawCasino.PubSub.getChannel("ui"),Q_.DEFAULT_CHARS=null!=t.charset?t.charset:Q_.DEFAULT_CHARS,In.init(),this._assetContainers={},0),s=b.getClassFields(this._config.assets);n<s.length;){var i=s[n];++n,this._assetContainers[i]=Z.field(this._config.assets,i)}this._assetContainers.fonts=new N,this._assetContainers.bitmapFonts=new N,this._assetContainers.brandingConfigs={gameconfig:null,sounds:null,groups:null,events:null,pools:null};try{Y.call(this)}catch(n){e=Ja.string(tr.caught(n).unwrap());this._casinoChannel.publish("gameError",{errorCode:1002,logData:{message:e}})}e=t.preloader.backgroundColor,this.setBackgroundColor(null==e?t.backgroundColor:e),this.sdScale=this._config.sdScale}function Fn(t,e,n){this.enabledDevices=null,this.disabledDevices=null,this.name=t,null!=e&&(this.disabledDevices=e),null!=n&&(this.enabledDevices=n)}function Dn(){this._enabled=!0,this._elapsed=0,this._mode="base",this._winChecked=0,this._wins=[],this.floor=0,this.stick=!1,this.excitement=0,p.call(this),this.componentType=el.ActiveModel}function En(t){function n(t){hacksawCasino.PubSub.getChannel("casino").unsubscribe(s),hacksawCasino.PubSub.getChannel("game").unsubscribe(i),t(null)}this._onSplashFocused=null,this._timeLeft=0,this._activeSplashIndex=0,this._displayables=[],this._splashes=[],this.onContinue=null,j.call(this),this._config=t;var s=null,i=null;(t=$d.irreversible(function(e){s=hacksawCasino.PubSub.getChannel("casino").subscribe("clickScreen",function(t){n(e)}),i=hacksawCasino.PubSub.getChannel("game").subscribe("closeSplash",function(t){n(e)})})).eager(),this.onContinue=t}function Pn(t,e,n,s){this.yOffset=0,this.background=null,this.body=null,(this.header=null)!=t&&(this.header=t),null!=e&&(this.body=e),null!=n&&(this.background=n),null!=s&&(this.yOffset=s)}function zn(t,e,n,s,i,a,r){this.splashTimeout=2,this.xSpacing=1,this.clickToContinue=null,this.topHeader=null,this.volatility=null,this.logo=t,null!=e&&(this.volatility=e),null!=n&&(this.topHeader=n),null!=s&&(this.clickToContinue=s),null!=i&&(this.xSpacing=i),null!=a&&(this.splashTimeout=a),this.splashes=r}function Rn(t,e){this._anchor=tl.NONE,this._showTextArgs=null,j.call(this,e),this._config=t,this._anchor=t.anchor}function Vn(t){this._config=t,j.call(this)}function Qn(t,e){this.start=null,this.displayable=t,null!=e&&(this.start=e)}function On(t){j.call(this);var e=Jl.fromColor(0,1,1,0);this.setTile(t=null==t?e:t)}function Ln(t){this._config=t,On.call(this,this._config.tile)}function Un(t,e,n,s,i,a,r){this.shadows=!1,this.fixedHeight=null,this.fixedWidth=null,this.depthTest=xo.LessEqual,this.blendMode=y.Alpha,this.scale=1,(this.tile=null)!=t&&(this.tile=t),null!=e&&(this.scale=e),null!=n&&(this.blendMode=n),null!=s&&(this.depthTest=s),null!=i&&(this.fixedWidth=i),null!=a&&(this.fixedHeight=a),null!=r&&(this.shadows=r)}function Nn(){this.backgroundColor="0x000000",this.progress={offset:{x:2,y:245},backgroundColor:"0xFF000000",color:"0xFFFFFFFF",height:50,width:720}}function Gn(){this.clickToContinue={text:"click_to_continue_uc",pos:{x:0,y:-.8,z:0}},this.topHeader={text:"features_uc",pos:{x:0,y:.7,z:0}},this.splashes=[{header:"configure_uc",background:"a",bodyPos:{x:0,y:-.44,z:0},backgroundPos:{x:0,y:-.1,z:-.02},headerPos:{x:0,y:-.21,z:0},body:"splash_about_configure"},{header:"bet_uc",background:"b",bodyPos:{x:0,y:-.44,z:0},backgroundPos:{x:0,y:-.1,z:-.02},headerPos:{x:0,y:-.21,z:0},body:"splash_about_bet"},{header:"win_uc",background:"c",bodyPos:{x:0,y:-.44,z:0},backgroundPos:{x:0,y:-.1,z:-.02},headerPos:{x:0,y:-.21,z:0},body:"splash_about_win"}],this.xSpacing=1.2,this.bodyMaxHeight=175,this.bodyMaxWidth=386,this.headerMaxWidth=400,this.topHeaderMaxWidth=1024,this.volatilityScale=1,this.volatilityPos=new Ll(0,.65,0,null),this.logoScale=1,this.logoPos={x:0,y:1,z:0}}function Xn(t,e,n,s,i,a,r,l,o,h,u){this.addStencil=!1,this.ignoreBounds=!1,this.anchor=tl.NONE,this.rotation=new R(0,0,0),this.shadows=!1,this.blendMode=null,this.depthTest=xo.LessEqual,this.space=null,this.scale=1,this.strings=null,this.resource=t,null!=e&&(this.strings=e),null!=n&&(this.scale=n),null!=s&&(this.space=s),null!=i&&(this.depthTest=i),null!=a&&(this.blendMode=a),null!=r&&(this.shadows=r),null!=l&&(this.rotation=l),null!=o&&(this.anchor=o),null!=h&&(this.ignoreBounds=h),null!=u&&(this.addStencil=u)}function Yn(t,e,n,s){this.extraAnimations=null,this.animation=null,this.element=null,this.name=t,null!=e&&(this.element=e),null!=n&&(this.animation=n),null!=s&&(this.extraAnimations=s)}function Wn(t,e,n,s,i,a){this.isSymbol=!1,this.animation=null,this.element=null,this.tile=null,this.animator=null,this.name=t,null!=e&&(this.animator=e),null!=n&&(this.tile=n),null!=s&&(this.element=s),null!=i&&(this.animation=i),null!=a&&(this.isSymbol=a)}function jn(){}function Hn(t,e,n){this.frames=null,this.keys=t,this.animation=e,null!=n&&(this.frames=n)}function Zn(t,e,n,s,i,a,r,l,o,h){this.anchor=tl.NONE,this.shadows=!1,this.depthTest=xo.LessEqual,this.blendMode=y.Alpha,this.rotation=null,this.scale=1,this.landscapePos=null,this.pos=null,this.landscapeType=null,this.type=t,null!=e&&(this.landscapeType=e),null!=n&&(this.pos=n),null!=s&&(this.landscapePos=s),null!=i&&(this.scale=i),null!=a&&(this.rotation=a),null!=r&&(this.blendMode=r),null!=l&&(this.depthTest=l),null!=o&&(this.shadows=o),null!=h&&(this.anchor=h)}function qn(t,e){this.id=null,(this.text=null)!=t&&(this.text=t),null!=e&&(this.id=e)}function Kn(t){this.id=t}function ts(t,e,n,s){this.stopPos=Ch.None,this.startPos=Ch.Start,this.loop=!1,this.name=t,null!=e&&(this.loop=e),null!=n&&(this.startPos=n),null!=s&&(this.stopPos=s)}function es(){this.color__=new R,n.call(this)}function ns(t,e,n,s){this.specular=null,this.normal=null,this.diffuse=t,null!=e&&(this.normal=e),null!=n&&(this.specular=n),this.path=s}function ss(t,e,n){null==n&&(n=!1),null==e&&(e=1),null==t&&(t=1),this.uvT=1,this.uvS=1,this._centered=!1,this._centered=n;var s=[new ae(0,0,0),new ae(t,0,0),new ae(0,e,0),new ae(t,e,0)],i=new Array(0);i.push(0),i.push(1),i.push(2),i.push(2),i.push(1),i.push(3),Ve.call(this,s,i),n&&this.translate(.5*-t,.5*-e,0)}function nr(t){this.uploadedIndices=0,this.uploadedVertices=0,this.indexBuffer=new Array(0),this.vertexBuffer=U_._new(0),this.indexCount=0,this.verticesCount=0,Re.call(this),this.useDarkColor=t,this.vertexStride=t?13:9,this.bufferNames=t?["position","uv","color","color2"]:["position","uv","color"],this.bufferPositions=t?[0,3,5,9]:[0,3,5]}function is(t){this.maskMatB__=new R,this.maskMatA__=new R,n.call(this),this.mask__=t}function as(){f.call(this)}function rs(){f.call(this)}function ls(){}function os(t,e,n,s,i,a,r,l,o,h,u,_,c,d,p){this.attachmentOverrides=null,this.keepStencil=!1,this.keepOverlayVisible=!1,this.remainAfterReplace=!1,this.replace=!1,this.rotation=new R,this.offset=null,this.scale=1,this.overlay=!1,this.timeScale=1,this.trackIndex=0,this.mixDuration=0,this.stopAction=Yh.Default,this.loop=!1,this.animationName=t,null!=e&&(this.loop=e),null!=n&&(this.stopAction=n),null!=s&&(this.mixDuration=s),null!=i&&(this.trackIndex=i),null!=a&&(this.timeScale=a),null!=r&&(this.overlay=r),null!=l&&(this.scale=l),null!=o&&(this.offset=o),null!=h&&(this.rotation=h),null!=u&&(this.replace=u),null!=_&&(this.remainAfterReplace=_),null!=c&&(this.keepOverlayVisible=c),null!=d&&(this.keepStencil=d),null!=p&&(this.attachmentOverrides=p)}function hs(t,e){this.slotName=t,this.attachmentName=e}function us(t,e,n,s,i,a,r,l,o,h,u,_,c){this.pointAttachmentTransformSetting=Hh.All,this.usePremultipliedAlpha=!1,this.useDarkTint=!1,this.exposedClippingAttachments=null,this.parent=null,this.enableLights=!0,this.shadows=!1,this.culling=Ao.None,this.depthTest=xo.Always,this.blendMode=y.Alpha,this.scale=1,this.offset=null,this.spine=t,null!=e&&(this.offset=e),null!=n&&(this.scale=n),null!=s&&(this.blendMode=s),null!=i&&(this.depthTest=i),null!=a&&(this.culling=a),null!=r&&(this.shadows=r),null!=l&&(this.enableLights=l),null!=o&&(this.parent=o),null!=h&&(this.exposedClippingAttachments=h),null!=u&&(this.useDarkTint=u),null!=_&&(this.usePremultipliedAlpha=_),null!=c&&(this.pointAttachmentTransformSetting=c)}function _s(){this.scratch=[],this.clippedTriangles=[],this.clippedVertices=[],this.clipOutput=[],this.clippingPolygon=[],this.triangulator=new Zh}function cs(){}function ds(){}function ps(){}function fs(){}function gs(){}function ms(){this._delays=[],this._listeners=[],ds.call(this)}function As(t){this._onCompleteCallbacks=[],this._clearFunctionsOnStop=!0,this._runUntilResolved=!1,this._timeUntilNextEvent=0,this._loop=!1,this._running=!1,this._index=0,this._funcs=[],this._autoupdate=null==t||t}function xs(){}function bs(t){var g=this,e=(this._gameModel=new Au,this._gameModel.splashData=new Gn,new An("aside_panel","dock_left",!1,!0,null)),n=new An("aside_panel","dock_left",!1,!1,null),s=new An("aside_panel","dock_bottom",!1,!1,null);Tn.call(this,{gameType:"instantwin",assets:In,charset:t.charset,soundConfigs:t.soundConfigs,onLoaded:function(){var d={update:lp.trigger(),change:lp.trigger()},p={update:lp.trigger(),change:lp.trigger()},f=lp.trigger(),t={gameRoundDelays:3e3,parallelRoundsSupport:!0,autoplayRoundDelay:200,uiCustomSettings:[ch.Difficulty("Difficulty",new pn(["n/a"],0,null),d,!1),ch.GridSize("GridSize",new dn(["n/a"],0,null),p,!1),ch.WinFieldStyle(dh.TICKER),ch.Autoplay(!0,new fn(500,150,null)),ch.CollectableWins(!1),ch.SuperTurbo(!1),ch.UiLayouts([ph.Desktop(e),ph.Mobile(n,s)]),ch.Audio(!0,!0)],gameRestoreTrigger:f,gameInfoDataCallback:function(t){var e=t.serverGameInfo;t.overrides.h.maximumWinMultiplier=null==e.maxWinMultiplierDecimal?"null":""+e.maxWinMultiplierDecimal,t.overrides.h.oddsOfMaxWin=Ja.string(e.oddsOfMaxWin)}};return g._casinoChannel.publish("gameLoaded",t),g._casinoChannel.subscribe("gameStarted",function(t){if(null==g._gameModel.ballTriangle||0==((n=null!=(e=g._gameModel.ballTriangle)._compMap?e._compMap.h[gu.BASE_NAME]:null)instanceof gu?n:null).inited)throw new tr("Game cannot be started before balltriangle is inited");for(var e,n,s=(n=null!=(e=g._gameModel.ballTriangle)._compMap?e._compMap.h[gu.BASE_NAME]:null)instanceof gu?n:null,i=[],a=Object.keys(g._gameModel.gameInfo.paytables.h),r=a.length,l=0;l<r;){var o=a[l++];i.push(null==o?"null":""+o)}for(var h=0,u=g._gameModel.gameInfo.paytables.h[s.risk],_=[],o=u.keys();o.hasNext();){var c=o.next();_.push(Ja.string(c-1)),u.h[c].length==s.numPayouts&&(h=c-1)}d.change.listen(function(t){g._casinoChannel.publish("updateSettings",{risk:t})}),p.change.listen(function(t){g._casinoChannel.publish("updateSettings",{nbRows:t})}),qu.delay(function(){p.update.handlers.invoke(new dn(_,h,"number_rows_uc")),d.update.handlers.invoke(new pn(i,0<i.indexOf(s.risk)?i.indexOf(s.risk):0,"risk_uc"))},0),f.listen(function(t){qu.delay(function(){p.update.handlers.invoke(new dn(_,0<_.indexOf(Ja.string(t.nbPayouts-1))?_.indexOf(Ja.string(t.nbPayouts-1)):0,"number_rows_uc")),d.update.handlers.invoke(new pn(i,0<i.indexOf(t.risk)?i.indexOf(t.risk):0,"risk_uc"))},100)})})},preloader:(new Nn).progress,backgroundColor:-15658735})}function ys(t,e,n,s,i){this.baseBetLevel=t,this.rtp=e,this.paytables=n,this.oddsOfMaxWin=s,this.maxWinMultiplierDecimal=i}function ws(t,e){this.odds=t,this.multiplier=e}function vs(){}function Cs(t,e,n,s){this.resource=t,this.sizeRange=e,this.scale=n,this.offset=s}function Ms(t,e,n,s,i,a,r,l,o,h,u,_){this.startWidth=2,null!=t&&(this.startWidth=t),this.defaultNumPayouts=e,this.defaultRisk=n,this.dotTile=s,this.ballTile=i,this.payoutTile=a,this.payoutBackplateSize=r,this.ballSize=l,this.dotSize=o,this.distance=h,this.payoutTextConfigs=u,this.payouts=_}function Ss(){}function ks(t,e,n,s){null==s&&(s=!0),this._sequencePlayCancel=new N,this._sequenceState=new N,this._scheduled=[],this._scheduledEvents=new N,this._triggers=new N,this._sequences=new N,this._pools=new N;var i=this;this._poolConfigs=null!=e?e:[],this._renderer=t,this._eventHandler=null!=n?n:function(t){},this._renderer.update.listen(function(t){i._eventHandler(Xu.FrameUpdate(t.group,t.levels))}),this._autoUpdate=s,this.triggerInterval()}function Bs(t,e,n,s,i,a,r,l,o){this.start=null,this.signature="4/4",this.bpm=null,this.maxrate=0,this.loop=!1,this.returnQuantize=null,this.quantize=1,this.id=t,this.patterns=e,null!=n&&(this.quantize=n),null!=s&&(this.returnQuantize=s),null!=i&&(this.loop=i),null!=a&&(this.maxrate=a),null!=r&&(this.bpm=r),null!=l&&(this.signature=l),null!=o&&(this.start=o)}function Is(t,e,n,s,i,a){this.start=null,this.duration=null,this.bpm=null,this.id=t,this.actions=e,this.progress=n,null!=s&&(this.bpm=s),null!=i&&(this.duration=i),null!=a&&(this.start=a)}function Ts(t,e,n,s,i,a){this.knee=40,this.threshold=-50,this.ratio=7,this.release=.25,this.attack=.003,this.target=t,null!=e&&(this.attack=e),null!=n&&(this.release=n),null!=s&&(this.ratio=s),null!=i&&(this.threshold=i),null!=a&&(this.knee=a)}function Fs(){}function Ds(){}function Es(){}function Ps(t,e){this.isBlocking=!0,this.f=t,this.priority=e,this.nextRun=-1/0}function zs(){}function Rs(){}function Vs(){this.a1=1,this.a2=0}function Qs(){}function Os(){}function Ls(){}function Us(t,e,n){tr.call(this,t,e),this.posInfos=null==n?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:n}function Ns(t,e,n){Us.call(this,t=null==t?"Not implemented":t,e,n)}function Gs(t){this.url=t,this.headers=[],this.params=[],this.emptyOnData=W(this,this.onData)}function Xs(){}function Ys(){}function Ws(t,e,n){this.xml=e,this.message=t,this.position=n,this.lineNumber=1;for(var s=this.positionAtLine=0;s<n;){var i=e.charCodeAt(s++);10==i?(this.lineNumber++,this.positionAtLine=0):13!=i&&this.positionAtLine++}}function js(){}function Hs(t){this.buffer=new Rt(new ArrayBuffer(65536)),this.pos=0,t&&(this.crc=new Vs)}function Zs(t,e,n){null==n&&(n=!0),null==e&&(e=!0),this.isFinal=!1,this.htools=new js,this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.len=0,this.dist=0,this.state=e?M_.Head:M_.Block,this.input=t,this.bits=0,this.nbits=0,this.needed=0,this.output=null,this.outpos=0,this.lengths=[],this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.window=new Hs(n)}function qs(){}function Ks(){this._k=[],this._v=[]}function Js(){}function $s(){}function ti(){}function ei(){}function ni(t,e,n){this.code=t=null==t?500:t,this.message=e,this.pos=n,this.exceptionStack=[],this.callStack=[]}function si(){}function ii(t,e,n,s){this.frames=t,this.speed=e,this.offsetX=n,this.offsetY=s,this.frameDelay=1/e,this.frameTime=0,this.frameIndex=0}function ai(t,e,n){null==n&&(n=0),null==e&&(e=0),this.button=0,this.kind=t,this.relX=e,this.relY=n}function ri(){}function li(){}function oi(){this.colorStops=[],this.transparencyStops=[],this.gradientStops=[]}function hi(){}function ui(){}function _i(){}function ci(){N.call(this)}function di(t){(this.i=t).set_bigEndian(!0)}function pi(){}function fi(){}function gi(){}function mi(){}function xi(){}function bi(){}function yi(){}function wi(){}function vi(){}function Ci(){}function Mi(){}function Si(){}function ki(t,e,n,s){this.size=t,this.offset=e,this.def=n,this.next=s}function Bi(){}function Ii(t,e){this.resource=t,this.header=e,this.cachedPrimitives=[],this.cachedAnimations=new N,this.cachedSkin=new N}function Ti(t){this.i=t}function Fi(){}function Di(){}function Ei(t,e,n,s){this.fs=t,this.name=e,this.relPath=n,this.data=s}function Pi(){}function zi(t){this.url=t}function Ri(t,e){Di.call(this),this.path=t,this.bytes=e}function Vi(t){this.entry=t}function Qi(){this.layerCount=1,this.mipOffset=0,this.mipLevels=1,this.height=0,this.width=0,this.flags=0}function Oi(){}function Li(){}function Ui(t,e){this.msg=t,this.pos=e}function lt(){}function Ni(){}function Gi(){this.Batch_Count__=0,f.call(this)}function Xi(){this.minId=0,this.nexts=[]}function Yi(){this.varMap=new fl}function Wi(t){this.v=t,this.used=!1,this.deps=new fl}function ji(){this.varMap=new r_,this.funMap=new r_,this.constants=new fl}function Hi(t,e,n,s){this.g=t,this.t=e,this.pos=n,this.size=s}function Zi(){}function qi(t,e){this.name=t,this.uid=qi.UID++,this.vertex=e,this.processed=new fl,this.usedFunctions=[],this.read=new fl,this.write=new fl}function Ki(){}function Ji(t){this.id=++Ji.UID,this.shader=t,this.params=new fl}function $i(t,e){this.v=t,this.globalId=e}function ta(t,e,n){this.v=t,this.pos=e,this.bits=n}function ea(t){this.v=t,this.read=0,this.write=0}function na(){}function sa(){}function ia(t,e,n){if(this.duration=0,this.hashCode=99999999*Math.random()|0,null==t)throw tr.thrown(new $n("name cannot be null."));this.name=t,this.duration=n,this.timelineIds=[],this.setTimelines(e)}function aa(t,e){if(null==e)throw tr.thrown(new $n("propertyIds cannot be null."));this._propertyIds=e;var n=0|(e=null==(e=t*this.getFrameEntries())?0:e),s=[];if(0<e){var i=s.length;if(n<i)s.splice(n,n-i);else if(i<n)for(;i<n;)s.push(0),++i}this.frames=s}function ra(){}function la(){}function oa(t,e,n){aa.call(this,t,n);var s=0|(n=null==(n=t+18*e)?0:n),i=[];if(0<n){var a=i.length;if(s<a)i.splice(s,s-a);else if(a<s)for(;a<s;)i.push(0),++a}this.curves=i,this.curves[t-1]=1}function ha(t,e,n){oa.call(this,t,e,[n])}function ua(t,e,n,s){oa.call(this,t,e,[n,s])}function _a(t,e,n){this.boneIndex=0,ha.call(this,t,e,"0|"+n),this.boneIndex=n}function ca(t,e,n){this.boneIndex=0,ua.call(this,t,e,"1|"+n,"2|"+n),this.boneIndex=n}function da(t,e,n){this.boneIndex=0,ha.call(this,t,e,"1|"+n),this.boneIndex=n}function pa(t,e,n){this.boneIndex=0,ha.call(this,t,e,"2|"+n),this.boneIndex=n}function fa(t,e,n){this.boneIndex=0,ua.call(this,t,e,"3|"+n,"4|"+n),this.boneIndex=n}function ga(t,e,n){this.boneIndex=0,ha.call(this,t,e,"3|"+n),this.boneIndex=n}function ma(t,e,n){this.boneIndex=0,ha.call(this,t,e,"4|"+n),this.boneIndex=n}function Aa(t,e,n){this.boneIndex=0,ua.call(this,t,e,"5|"+n,"6|"+n),this.boneIndex=n}function xa(t,e,n){this.boneIndex=0,ha.call(this,t,e,"5|"+n),this.boneIndex=n}function ba(t,e,n){this.boneIndex=0,ha.call(this,t,e,"6|"+n),this.boneIndex=n}function ya(t,e,n){this.slotIndex=0,oa.call(this,t,e,["7|"+n,"8|"+n]),this.slotIndex=n}function wa(t,e,n){this.slotIndex=0,oa.call(this,t,e,["7|"+n]),this.slotIndex=n}function va(t,e,n){this.slotIndex=0,ha.call(this,t,e,"8|"+n),this.slotIndex=n}function Ca(t,e,n){this.slotIndex=0,oa.call(this,t,e,["7|"+n,"8|"+n,"9|"+n]),this.slotIndex=n}function Ma(t,e,n){this.slotIndex=0,oa.call(this,t,e,["7|"+n,"9|"+n]),this.slotIndex=n}function Sa(t,e){this.slotIndex=0,aa.call(this,t,["10|"+e]),this.slotIndex=e;var e=t,t=0|(e=null==t?0:t),n=[];0!=e&&(t<(e=n.length)?n.splice(t,t-e):e<t&&(n[t-1]=null)),this.attachmentNames=n}function ka(t,e,n,s){this.slotIndex=0,oa.call(this,t,e,["11|"+n+"|"+s.id]),this.slotIndex=n,this.attachment=s,n=0|(e=null==(e=t)?0:t),s=[],0<e&&(n<(t=s.length)?s.splice(n,n-t):t<n&&(s[n-1]=null)),this.vertices=s}function Ba(t){aa.call(this,t,Ba.propertyIds);var e=t,t=0|(e=null==t?0:t),n=[];0!=e&&(t<(e=n.length)?n.splice(t,t-e):e<t&&(n[t-1]=null)),this.events=n}function Ia(t){aa.call(this,t,Ia.propertyIds);var e=t,t=0|(e=null==t?0:t),n=[];0<e&&(t<(e=n.length)?n.splice(t,t-e):e<t&&(n[t-1]=null)),this.drawOrders=n}function Ta(t,e,n){this.ikConstraintIndex=0,oa.call(this,t,e,["14|"+n]),this.ikConstraintIndex=n}function Fa(t,e,n){this.transformConstraintIndex=0,oa.call(this,t,e,["15|"+n]),this.transformConstraintIndex=n}function Da(t,e,n){this.pathConstraintIndex=0,ha.call(this,t,e,"16|"+n),this.pathConstraintIndex=n}function Ea(t,e,n){this.pathConstraintIndex=0,ha.call(this,t,e,"17|"+n),this.pathConstraintIndex=n}function Pa(t,e,n){this.pathConstraintIndex=0,oa.call(this,t,e,["18|"+n]),this.pathConstraintIndex=n}function za(t,e){null==e&&(e=0),this.message=t=null==t?"":t,this.errorID=e,this.name="Error"}function Ra(){}function Va(){this.timelinesRotation=[],this.timelineHoldMix=[],this.timelineMode=[],this.mixBlend=2,this.totalAlpha=0,this.interruptAlpha=0,this.mixDuration=0,this.mixTime=0,this.alpha=0,this.timeScale=0,this.trackEnd=0,this.nextTrackLast=0,this.trackLast=0,this.trackTime=0,this.delay=0,this.nextAnimationLast=0,this.animationLast=0,this.animationEnd=0,this.animationStart=0,this.drawOrderThreshold=0,this.attachmentThreshold=0,this.eventThreshold=0,this.reverse=!1,this.holdPrevious=!1,this.loop=!1,this.trackIndex=0,this.mixingTo=null,this.mixingFrom=null,this.next=null}function Qa(t,e){null==e&&(e=999999999),null==t&&(t=64),this.peak=0,this.max=0,this.freeObjects=[],this.max=e}function Oa(){}function La(t,e,n){if(this.active=!1,this.sorted=!1,this.worldY=0,this.d=0,this.c=0,this.worldX=0,this.b=0,this.a=0,this.ashearY=0,this.ashearX=0,this.ascaleY=0,this.ascaleX=0,this.arotation=0,this.ay=0,this.ax=0,this.shearY=0,this.shearX=0,this.scaleY=0,this.scaleX=0,this.rotation=0,this.y=0,this.x=0,this.children=[],null==t)throw tr.thrown(new $n("data cannot be null."));if(null==e)throw tr.thrown(new $n("skeleton cannot be null."));this.data=t,this.skeleton=e,this.parent=n,t=this.data,this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}function Ua(t,e,n){if(this.color=new kd(.61,.61,.61,1),this.skinRequired=!1,this.transformMode=0,this.shearY=0,this.shearX=0,this.scaleY=1,this.scaleX=1,this.rotation=0,this.y=0,this.x=0,this.length=0,t<(this.index=0))throw tr.thrown(new $n("index must be >= 0."));if(null==e)throw tr.thrown(new $n("name cannot be null."));this.index=t,this.name=e,this.parent=n}function Na(t){if(this.skinRequired=!1,this.order=0,null==t)throw tr.thrown(new $n("name cannot be null."));this.name=t}function Ga(t,e){if(this.time=0,this.balance=0,this.volume=0,this.floatValue=0,this.intValue=0,null==e)throw tr.thrown(new $n("data cannot be null."));this.time=t,this.data=e}function Xa(t){if(this.balance=0,this.volume=0,this.audioPath=null,this.floatValue=0,this.intValue=0,null==t)throw tr.thrown(new $n("name cannot be null."));this.name=t}function Ya(t,e){if(this.active=!1,this.softness=0,this.mix=1,this.stretch=!1,this.compress=!1,this.bendDirection=0,null==t)throw tr.thrown(new $n("data cannot be null."));if(null==e)throw tr.thrown(new $n("skeleton cannot be null."));this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=[];for(var n=0,s=t.bones;n<s.length;)this.bones.push(e.findBone(s[n++].name));this.target=e.findBone(t.target.name)}function Wa(t){this.softness=0,this.mix=1,this.uniform=!1,this.stretch=!1,this.compress=!1,this.bendDirection=1,this.bones=[],Na.call(this,t)}function ja(t,e){var n=[],s=n.length;if(10<s)n.splice(10,10-s);else if(s<10)for(;s<10;)n.push(0),++s;if(this.segments=n,this.lengths=[],this.curves=[],this.world=[],this.positions=[],this.spaces=[],this.active=!1,this.mixY=0,this.mixX=0,this.mixRotate=0,this.spacing=0,this.position=0,null==t)throw tr.thrown(new $n("data cannot be null."));if(null==e)throw tr.thrown(new $n("skeleton cannot be null."));this.data=t,this.bones=[];for(var i=0,a=t.bones;i<a.length;)this.bones.push(e.findBone(a[i++].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}function Ha(t){this.mixY=0,this.mixX=0,this.mixRotate=0,this.spacing=0,this.position=0,this.offsetRotation=0,this.bones=[],Na.call(this,t)}function Za(){this.audioPath=null,this.fps=30,this.hash=null,this.height=0,this.width=0,this.y=0,this.x=0,this.pathConstraints=[],this.transformConstraints=[],this.ikConstraints=[],this.animations=[],this.events=[],this.skins=[],this.slots=[],this.bones=[]}function qa(t){if(this.linkedMeshes=[],this.scale=1,null==t)throw tr.thrown(new $n("attachmentLoader cannot be null."));this.attachmentLoader=t}function Ka(){}function sr(t){if(null==t)throw tr.thrown(new $n("name cannot be null."));this.name=t}function ir(){this.v2=0,this.u2=0,this.v=0,this.u=0}function ar(t,e){this.key=t,this.value=e}function rr(){}function lr(){}function or(t,e){this.dissolved=!1,this.a=t,this.b=e}function hr(t,e){if(null==t)throw tr.thrown("callback expected but null received");this.cb=t,this.list=e}function ur(){}function _r(){}function cr(t){this.disposeHandlers=[],this.f=t}function dr(t){null==t&&(t=!1),this.onfill=function(){},this.ondrain=function(){},this.busy=!1,this.queue=[],this.used=0;var e=this;cr.call(this,function(){e.busy||e.destroy()}),this.destructive=t,this.cells=[]}function pr(){}function fr(){}function gr(){}function mr(){}function Ar(t,e){this.command=t,this.definedPosInfos=e}function xr(){}function br(){}function yr(){}function wr(){}function vr(){}function Cr(t,e,n){this.r=t,this.g=e,this.b=n}function Mr(){}function Sr(t,e,n,s){this.a=t,Cr.call(this,e,n,s)}function kr(){}function Br(t,e,n){this.h=t,this.s=e,this.v=n}function Ir(t,e,n,s){this.a=t,Br.call(this,e,n,s)}function Tr(){}function Fr(){}function Dr(){}function Er(t,e,n){this.value=t,this.scale=e,this.ease=null==n?hp.warpOut:n}function Pr(){}function zr(){}function Rr(t,e,n,s){this.data=t,this.index=e,this.rangeLeft=n,this.rangeRight=s}(e.EReg=ct).__name__="EReg",ct.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},matched:function(t){if(null!=this.r.m&&0<=t&&t<this.r.m.length)return this.r.m[t];throw tr.thrown("EReg::matched")},matchedPos:function(){if(null==this.r.m)throw tr.thrown("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(t,e,n){var s;return null==n&&(n=-1),this.r.global?(this.r.lastIndex=e,this.r.m=this.r.exec(n<0?t:Jn.substr(t,0,e+n)),(s=null!=this.r.m)&&(this.r.s=t)):(s=this.match(n<0?Jn.substr(t,e,null):Jn.substr(t,e,n)))&&(this.r.s=t,this.r.m.index+=e),s},__class__:ct};var Jn=function(){},Vr=((e.HxOverrides=Jn).__name__="HxOverrides",Jn.strDate=function(t){switch(t.length){case 8:var e=t.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(e[0]),n.setUTCMinutes(e[1]),n.setUTCSeconds(e[2]),n;case 10:e=t.split("-");return new Date(e[0],e[1]-1,e[2],0,0,0);case 19:n=(e=t.split(" "))[0].split("-"),e=e[1].split(":");return new Date(n[0],n[1]-1,n[2],e[0],e[1],e[2]);default:throw tr.thrown("Invalid date format : "+t)}},Jn.cca=function(t,e){t=t.charCodeAt(e);if(t==t)return t},Jn.substr=function(t,e,n){if(null==n)n=t.length;else if(n<0){if(0!=e)return"";n=t.length+n}return t.substr(e,n)},Jn.remove=function(t,e){e=t.indexOf(e);return-1!=e&&(t.splice(e,1),!0)},Jn.now=function(){return Date.now()},(e.IntIterator=i).__name__="IntIterator",i.prototype={hasNext:function(){return this.min<this.max},next:function(){return this.min++},__class__:i},(e.Lambda=wt).__name__="Lambda",wt.array=function(t){for(var e=[],n=mp(t);n.hasNext();)e.push(n.next());return e},wt.has=function(t,e){for(var n=mp(t);n.hasNext();)if(n.next()==e)return!0;return!1},wt.exists=function(t,e){for(var n=mp(t);n.hasNext();)if(e(n.next()))return!0;return!1},wt.fold=function(t,e,n){for(var s=mp(t);s.hasNext();)n=e(s.next(),n);return n},wt.count=function(t,e){var n=0;if(null==e)for(var s=mp(t);s.hasNext();)s.next(),++n;else for(var i=mp(t);i.hasNext();)e(i.next())&&++n;return n},wt.find=function(t,e){for(var n=mp(t);n.hasNext();){var s=n.next();if(e(s))return s}return null},Math.__name__="Math",(e.Reflect=Z).__name__="Reflect",Z.field=function(t,e){try{return t[e]}catch(t){return null}},Z.getProperty=function(t,e){var n;return null==t?null:!!t.__properties__&&(n=t.__properties__["get_"+e])?t[n]():t[e]},Z.setProperty=function(t,e,n){var s,i=!!t.__properties__&&(s=t.__properties__["set_"+e]);i?t[s](n):t[e]=n},Z.fields=function(t){var e=[];if(null!=t){var n,s=Object.prototype.hasOwnProperty;for(n in t)"__id__"!=n&&"hx__closures__"!=n&&s.call(t,n)&&e.push(n)}return e},Z.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},Z.compare=function(t,e){return t==e?0:e<t?1:-1},Z.isEnumValue=function(t){return null!=t&&null!=t.__enum__},Z.deleteField=function(t,e){return!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0)},(e.Std=Ja).__name__="Std",Ja.string=function(t){return er.__string_rec(t,"")},Ja.parseInt=function(t){t=parseInt(t);return isNaN(t)?null:t},Ja.random=function(t){return t<=0?0:Math.floor(Math.random()*t)},(e.StringBuf=w).__name__="StringBuf",w.prototype={__class__:w},(e.StringTools=ut).__name__="StringTools",ut.htmlEscape=function(t,e){for(var n="",s=0,i=t;s<i.length;){var a=s++,r=(t=i).charCodeAt(a),l=(r=55296<=r&&r<=56319?r-55232<<10|1023&t.charCodeAt(1+a):r,65536<=r&&++s,r);switch(l){case 34:n+=e?"&quot;":String.fromCodePoint(l);break;case 38:n+="&amp;";break;case 39:n+=e?"&#039;":String.fromCodePoint(l);break;case 60:n+="&lt;";break;case 62:n+="&gt;";break;default:n+=String.fromCodePoint(l)}}return n},ut.startsWith=function(t,e){return t.length>=e.length&&0==t.lastIndexOf(e,0)},ut.isSpace=function(t,e){t=Jn.cca(t,e);return 8<t&&t<14||32==t},ut.ltrim=function(t){for(var e=t.length,n=0;n<e&&ut.isSpace(t,n);)++n;return 0<n?Jn.substr(t,n,e-n):t},ut.rtrim=function(t){for(var e=t.length,n=0;n<e&&ut.isSpace(t,e-n-1);)++n;return 0<n?Jn.substr(t,0,e-n):t},ut.trim=function(t){return ut.ltrim(ut.rtrim(t))},ut.replace=function(t,e,n){return t.split(e).join(n)},ut.hex=function(t,e){for(var n="";n="0123456789ABCDEF".charAt(15&t)+n,0<(t>>>=4););if(null!=e)for(;n.length<e;)n="0"+n;return n},d.ValueType={__ename__:!0,__constructs__:null,TNull:{_hx_name:"TNull",_hx_index:0,__enum__:"ValueType",toString:l},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"ValueType",toString:l},TFloat:{_hx_name:"TFloat",_hx_index:2,__enum__:"ValueType",toString:l},TBool:{_hx_name:"TBool",_hx_index:3,__enum__:"ValueType",toString:l},TObject:{_hx_name:"TObject",_hx_index:4,__enum__:"ValueType",toString:l},TFunction:{_hx_name:"TFunction",_hx_index:5,__enum__:"ValueType",toString:l},TClass:((c=function(t){return{_hx_index:6,c:t,__enum__:"ValueType",toString:l}})._hx_name="TClass",c.__params__=["c"],c),TEnum:((c=function(t){return{_hx_index:7,e:t,__enum__:"ValueType",toString:l}})._hx_name="TEnum",c.__params__=["e"],c),TUnknown:{_hx_name:"TUnknown",_hx_index:8,__enum__:"ValueType",toString:l}}),Qr=(Vr.__constructs__=[Vr.TNull,Vr.TInt,Vr.TFloat,Vr.TBool,Vr.TObject,Vr.TFunction,Vr.TClass,Vr.TEnum,Vr.TUnknown],Vr.__empty_constructs__=[Vr.TNull,Vr.TInt,Vr.TFloat,Vr.TBool,Vr.TObject,Vr.TFunction,Vr.TUnknown],(e.Type=b).__name__="Type",b.createInstance=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))},b.createEnum=function(t,e,n){var s=Z.field(t,e);if(null==s)throw tr.thrown("No such constructor "+e);if(Z.isFunction(s)){if(null==n)throw tr.thrown("Constructor "+e+" need parameters");return s.apply(t,n)}if(null!=n&&0!=n.length)throw tr.thrown("Constructor "+e+" does not need parameters");return s},b.createEnumIndex=function(t,e,n){var s=t.__constructs__[e];if(null==(s=null==s?null:s._hx_name))throw tr.thrown(e+" is not a valid enum constructor index");return b.createEnum(t,s,n)},b.getClassFields=function(t){t=Z.fields(t);return Jn.remove(t,"__name__"),Jn.remove(t,"__interfaces__"),Jn.remove(t,"__properties__"),Jn.remove(t,"__super__"),Jn.remove(t,"__meta__"),Jn.remove(t,"prototype"),t},b.typeof=function(t){switch(typeof t){case"boolean":return Vr.TBool;case"function":return t.__name__||t.__ename__?Vr.TObject:Vr.TFunction;case"number":return Math.ceil(t)==t%2147483648?Vr.TInt:Vr.TFloat;case"object":var e;return null==t?Vr.TNull:null!=(e=t.__enum__)?Vr.TEnum(d[e]):null!=(e=er.getClass(t))?Vr.TClass(e):Vr.TObject;case"string":return Vr.TClass(String);case"undefined":return Vr.TNull;default:return Vr.TUnknown}},b.enumEq=function(t,e){if(t!=e)try{var n=t.__enum__;if(null==n||n!=e.__enum__)return!1;if(t._hx_index!=e._hx_index)return!1;for(var s=d[n].__constructs__[t._hx_index].__params__,i=0;i<s.length;){var a=s[i];if(++i,!b.enumEq(t[a],e[a]))return!1}}catch(i){return!1}return!0},b.enumParameters=function(t){var e=d[t.__enum__].__constructs__[t._hx_index].__params__;if(null==e)return[];for(var n=[],s=0;s<e.length;){var i=e[s];++s,n.push(t[i])}return n},{}),Or=(Qr.toString=function(t){switch(t){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}},(e.Xml=_t).__name__="Xml",_t.parse=function(t){return w_.parse(t)},_t.createElement=function(t){var e=new _t(_t.Element);if(e.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":Qr.toString(e.nodeType)));return e.nodeName=t,e},_t.createPCData=function(t){var e=new _t(_t.PCData);if(e.nodeType==_t.Document||e.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":Qr.toString(e.nodeType)));return e.nodeValue=t,e},_t.createCData=function(t){var e=new _t(_t.CData);if(e.nodeType==_t.Document||e.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":Qr.toString(e.nodeType)));return e.nodeValue=t,e},_t.createComment=function(t){var e=new _t(_t.Comment);if(e.nodeType==_t.Document||e.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":Qr.toString(e.nodeType)));return e.nodeValue=t,e},_t.createDocType=function(t){var e=new _t(_t.DocType);if(e.nodeType==_t.Document||e.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":Qr.toString(e.nodeType)));return e.nodeValue=t,e},_t.createProcessingInstruction=function(t){var e=new _t(_t.ProcessingInstruction);if(e.nodeType==_t.Document||e.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":Qr.toString(e.nodeType)));return e.nodeValue=t,e},_t.createDocument=function(){return new _t(_t.Document)},_t.prototype={get:function(t){if(this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));return this.attributeMap.h[t]},set:function(t,e){if(this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));this.attributeMap.h[t]=e},exists:function(t){if(this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,t)},attributes:function(){if(this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));return new o_(this.attributeMap.h)},elements:function(){if(this.nodeType!=_t.Document&&this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));for(var t=[],e=0,n=this.children;e<n.length;){var s=n[e];++e,s.nodeType==_t.Element&&t.push(s)}return new A_(t)},elementsNamed:function(t){if(this.nodeType!=_t.Document&&this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));for(var e=[],n=0,s=this.children;n<s.length;){var i,a=s[n];if(++n,a.nodeType==_t.Element){if(a.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":Qr.toString(a.nodeType)));i=a.nodeName==t}else i=!1;i&&e.push(a)}return new A_(e)},firstElement:function(){if(this.nodeType!=_t.Document&&this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));for(var t=0,e=this.children;t<e.length;){var n=e[t];if(++t,n.nodeType==_t.Element)return n}return null},addChild:function(t){if(this.nodeType!=_t.Document&&this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));null!=t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this},removeChild:function(t){if(this.nodeType!=_t.Document&&this.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":Qr.toString(this.nodeType)));return!!Jn.remove(this.children,t)&&!(t.parent=null)},toString:function(){return v_.print(this)},__class__:_t},d["format.gif.Block"]={__ename__:!0,__constructs__:null,BFrame:((c=function(t){return{_hx_index:0,frame:t,__enum__:"format.gif.Block",toString:l}})._hx_name="BFrame",c.__params__=["frame"],c),BExtension:((c=function(t){return{_hx_index:1,extension:t,__enum__:"format.gif.Block",toString:l}})._hx_name="BExtension",c.__params__=["extension"],c),BEOF:{_hx_name:"BEOF",_hx_index:2,__enum__:"format.gif.Block",toString:l}}),Lr=(Or.__constructs__=[Or.BFrame,Or.BExtension,Or.BEOF],Or.__empty_constructs__=[Or.BEOF],d["format.gif.Extension"]={__ename__:!0,__constructs__:null,EGraphicControl:((c=function(t){return{_hx_index:0,gce:t,__enum__:"format.gif.Extension",toString:l}})._hx_name="EGraphicControl",c.__params__=["gce"],c),EComment:((c=function(t){return{_hx_index:1,text:t,__enum__:"format.gif.Extension",toString:l}})._hx_name="EComment",c.__params__=["text"],c),EText:((c=function(t){return{_hx_index:2,pte:t,__enum__:"format.gif.Extension",toString:l}})._hx_name="EText",c.__params__=["pte"],c),EApplicationExtension:((c=function(t){return{_hx_index:3,ext:t,__enum__:"format.gif.Extension",toString:l}})._hx_name="EApplicationExtension",c.__params__=["ext"],c),EUnknown:((c=function(t,e){return{_hx_index:4,id:t,data:e,__enum__:"format.gif.Extension",toString:l}})._hx_name="EUnknown",c.__params__=["id","data"],c)}),Ur=(Lr.__constructs__=[Lr.EGraphicControl,Lr.EComment,Lr.EText,Lr.EApplicationExtension,Lr.EUnknown],Lr.__empty_constructs__=[],d["format.gif.ApplicationExtension"]={__ename__:!0,__constructs__:null,AENetscapeLooping:((c=function(t){return{_hx_index:0,loops:t,__enum__:"format.gif.ApplicationExtension",toString:l}})._hx_name="AENetscapeLooping",c.__params__=["loops"],c),AEUnknown:((c=function(t,e,n){return{_hx_index:1,name:t,version:e,data:n,__enum__:"format.gif.ApplicationExtension",toString:l}})._hx_name="AEUnknown",c.__params__=["name","version","data"],c)}),Nr=(Ur.__constructs__=[Ur.AENetscapeLooping,Ur.AEUnknown],Ur.__empty_constructs__=[],d["format.gif.Version"]={__ename__:!0,__constructs__:null,GIF87a:{_hx_name:"GIF87a",_hx_index:0,__enum__:"format.gif.Version",toString:l},GIF89a:{_hx_name:"GIF89a",_hx_index:1,__enum__:"format.gif.Version",toString:l},Unknown:((c=function(t){return{_hx_index:2,version:t,__enum__:"format.gif.Version",toString:l}})._hx_name="Unknown",c.__params__=["version"],c)}),Gr=(Nr.__constructs__=[Nr.GIF87a,Nr.GIF89a,Nr.Unknown],Nr.__empty_constructs__=[Nr.GIF87a,Nr.GIF89a],d["format.gif.DisposalMethod"]={__ename__:!0,__constructs__:null,UNSPECIFIED:{_hx_name:"UNSPECIFIED",_hx_index:0,__enum__:"format.gif.DisposalMethod",toString:l},NO_ACTION:{_hx_name:"NO_ACTION",_hx_index:1,__enum__:"format.gif.DisposalMethod",toString:l},FILL_BACKGROUND:{_hx_name:"FILL_BACKGROUND",_hx_index:2,__enum__:"format.gif.DisposalMethod",toString:l},RENDER_PREVIOUS:{_hx_name:"RENDER_PREVIOUS",_hx_index:3,__enum__:"format.gif.DisposalMethod",toString:l},UNDEFINED:((c=function(t){return{_hx_index:4,index:t,__enum__:"format.gif.DisposalMethod",toString:l}})._hx_name="UNDEFINED",c.__params__=["index"],c)}),Xr=(Gr.__constructs__=[Gr.UNSPECIFIED,Gr.NO_ACTION,Gr.FILL_BACKGROUND,Gr.RENDER_PREVIOUS,Gr.UNDEFINED],Gr.__empty_constructs__=[Gr.UNSPECIFIED,Gr.NO_ACTION,Gr.FILL_BACKGROUND,Gr.RENDER_PREVIOUS],(e["format.gif.Reader"]=M).__name__="format.gif.Reader",M.prototype={read:function(){if(71!=this.i.readByte())throw tr.thrown("Invalid header");if(73!=this.i.readByte())throw tr.thrown("Invalid header");if(70!=this.i.readByte())throw tr.thrown("Invalid header");var t=this.i.readString(3),e=Nr.GIF89a;switch(t){case"87a":e=Nr.GIF87a;break;case"89a":e=Nr.GIF89a;break;default:e=Nr.Unknown(t)}for(var n=this.i.readUInt16(),s=this.i.readUInt16(),i=this.i.readByte(),a=this.i.readByte(),r=this.i.readByte(),n={width:n,height:s,hasGlobalColorTable:128==(128&i),colorResolution:(112&i)>>>4,sorted:8==(8&i),globalColorTableSize:2<<(7&i),backgroundColorIndex:a,pixelAspectRatio:r=0!=r?(r+15)/64:1},s=null,l=(n.hasGlobalColorTable&&(s=this.readColorTable(n.globalColorTableSize)),new i_);;){var o=this.readBlock();if(l.add(o),o==Or.BEOF)break}return{version:e,logicalScreenDescriptor:n,globalColorTable:s,blocks:l}},readBlock:function(){switch(this.i.readByte()){case 33:return this.readExtension();case 44:return this.readImage();case 59:return Or.BEOF}return Or.BEOF},readImage:function(){var t=this.i.readUInt16(),e=this.i.readUInt16(),n=this.i.readUInt16(),s=this.i.readUInt16(),i=this.i.readByte(),a=128==(128&i),r=64==(64&i),l=2<<(7&i),o=null;return a&&(o=this.readColorTable(l)),Or.BFrame({x:t,y:e,width:n,height:s,localColorTable:a,interlaced:r,sorted:32==(32&i),localColorTableSize:l,pixels:this.readPixels(n,s,r),colorTable:o})},readPixels:function(t,e,n){for(var s=this.i,i=t*e,a=new Rt(new ArrayBuffer(i)),r=s.readByte(),l=s.readByte()-1,o=s.readByte(),h=8,u=1<<r,_=1+u,c=r+1,d=1<<c,p=d-1,f=[],g=0;g<u;)f[y=g++]=[y];for(var m,A,x=[],b=2+u,y=0,w=0;y<i;){for(m=w;h<c&&0!=l;)o|=s.readByte()<<h,h+=8,0==--l&&(l=s.readByte());if(w=o&p,o>>=c,h-=c,w==u)x=f.slice(),b=2+u,p=(d=1<<(c=r+1))-1;else{if(w==_)break;if(w<b)m!=u&&((v=x[m].slice()).push(x[w][0]),x[b++]=v);else{if(w!=b)throw tr.thrown("Invalid LZW code. Excepted: "+b+", got: "+w);(v=x[m].slice()).push(v[0]),x[b++]=v}for(var v=x[w],g=0;g<v.length;)a.b[y++]=v[g++];b==d&&c<12&&(p=(d=1<<++c)-1)}}for(;0<l;)s.readByte(),0==--l&&(l=s.readByte());for(;y<i;)a.b[y++]=0;return n&&(n=new Rt(new ArrayBuffer(i)),A=this.deinterlace(a,n,8,0,0,t,e),A=this.deinterlace(a,n,8,4,A,t,e),A=this.deinterlace(a,n,4,2,A,t,e),this.deinterlace(a,n,2,1,A,t,e),a=n),a},deinterlace:function(t,e,n,s,i,a,r){for(;s<r;)e.blit(s*a,t,i,a),i+=a,s+=n;return i},readExtension:function(){var t=this.i.readByte();switch(t){case 1:if(12!=this.i.readByte())throw tr.thrown("Incorrect size of Plain Text Extension introducer block.");for(var e=this.i.readUInt16(),n=this.i.readUInt16(),s=this.i.readUInt16(),i=this.i.readUInt16(),a=this.i.readByte(),r=this.i.readByte(),l=this.i.readByte(),o=this.i.readByte(),h=new d_,u=new Rt(new ArrayBuffer(255)),_=this.i.readByte();0!=_;)this.i.readBytes(u,0,_),h.writeBytes(u,0,_),_=this.i.readByte();return h.flush(),u=h.getBytes(),h.close(),Or.BExtension(Lr.EText({textGridX:e,textGridY:n,textGridWidth:s,textGridHeight:i,charCellWidth:a,charCellHeight:r,textForegroundColorIndex:l,textBackgroundColorIndex:o,text:u.toString()}));case 249:if(4!=this.i.readByte())throw tr.thrown("Incorrect Graphic Control Extension block size!");var c,d=this.i.readByte();switch((28&d)>>2){case 0:c=Gr.UNSPECIFIED;break;case 1:c=Gr.NO_ACTION;break;case 2:c=Gr.FILL_BACKGROUND;break;case 3:c=Gr.RENDER_PREVIOUS;break;default:c=Gr.UNDEFINED((28&d)>>2)}e=Or.BExtension(Lr.EGraphicControl({disposalMethod:c,userInput:2==(2&d),hasTransparentColor:1==(1&d),delay:this.i.readUInt16(),transparentIndex:this.i.readByte()}));return this.i.readByte(),e;case 254:for(h=new d_,u=new Rt(new ArrayBuffer(255)),_=this.i.readByte();0!=_;)this.i.readBytes(u,0,_),h.writeBytes(u,0,_),_=this.i.readByte();return h.flush(),u=h.getBytes(),h.close(),Or.BExtension(Lr.EComment(u.toString()));case 255:return this.readApplicationExtension();default:for(h=new d_,u=new Rt(new ArrayBuffer(255)),_=this.i.readByte();0!=_;)this.i.readBytes(u,0,_),h.writeBytes(u,0,_),_=this.i.readByte();return h.flush(),u=h.getBytes(),h.close(),Or.BExtension(Lr.EUnknown(t,u))}},readApplicationExtension:function(){if(11!=this.i.readByte())throw tr.thrown("Incorrect size of Application Extension introducer block.");for(var t=this.i.readString(8),e=this.i.readString(3),n=new d_,s=new Rt(new ArrayBuffer(255)),i=this.i.readByte();0!=i;)this.i.readBytes(s,0,i),n.writeBytes(s,0,i),i=this.i.readByte();n.flush(),s=n.getBytes(),n.close();var a=s;return"NETSCAPE"==t&&"2.0"==e&&1==a.b[0]?Or.BExtension(Lr.EApplicationExtension(Ur.AENetscapeLooping(a.b[1]|a.b[2]<<8))):Or.BExtension(Lr.EApplicationExtension(Ur.AEUnknown(t,e,a)))},readColorTable:function(t){t*=3;for(var e=new Rt(new ArrayBuffer(t)),n=0;n<t;){var s=this.i.readByte(),s=(e.b[n]=s,this.i.readByte()),s=(e.b[n+1]=s,this.i.readByte());e.b[n+2]=s,n+=3}return e},__class__:M},(e["format.gif.Tools"]=S).__name__="format.gif.Tools",S.extractFullBGRA=function(t,e){for(var n=null,s=0,i=new Rt(new ArrayBuffer(t.logicalScreenDescriptor.width*t.logicalScreenDescriptor.height*4)),a=t.blocks.h;null!=a;){var r=a.item,a=a.next;switch(r._hx_index){case 0:var l=r.frame,o=l.localColorTable?l.colorTable:t.globalColorTable;if(null==o)throw tr.thrown("Frame does not have a color table!");var h=null!=n&&n.hasTransparentColor?3*n.transparentIndex:-1,u=l.pixels,_=0,c=4*(l.y*t.logicalScreenDescriptor.width+l.x),d=4*(t.logicalScreenDescriptor.width-l.width)+4;switch((s!=e&&null!=n?n.disposalMethod:Gr.NO_ACTION)._hx_index){case 2:for(var p=0,f=u.length;p<f;)++p,i.b[c]=0,i.b[c+1]=0,i.b[c+2]=0,i.b[c+3]=0,++_==l.width?(_=0,c+=d):c+=4;break;case 3:break;default:for(var g=0,m=u.length;g<m;){var A=3*u.b[g++];h!=A&&(i.b[c]=o.b[2+A],i.b[c+1]=o.b[1+A],i.b[c+2]=o.b[A],i.b[c+3]=255),++_==l.width?(_=0,c+=d):c+=4}}if(s==e)return i;++s,n=null;break;case 1:var x=r.extension;0==x._hx_index&&(n=x.gce)}}return i},S.extractFullRGBA=function(t,e){for(var n=null,s=0,i=new Rt(new ArrayBuffer(t.logicalScreenDescriptor.width*t.logicalScreenDescriptor.height*4)),a=t.blocks.h;null!=a;){var r=a.item,a=a.next;switch(r._hx_index){case 0:var l=r.frame,o=l.localColorTable?l.colorTable:t.globalColorTable;if(null==o)throw tr.thrown("Frame does not have a color table!");var h=null!=n&&n.hasTransparentColor?3*n.transparentIndex:-1,u=l.pixels,_=0,c=4*(l.y*t.logicalScreenDescriptor.width+l.x),d=4*(t.logicalScreenDescriptor.width-l.width)+4;switch((s!=e&&null!=n?n.disposalMethod:Gr.NO_ACTION)._hx_index){case 2:for(var p=0,f=u.length;p<f;)++p,i.b[c]=0,i.b[c+1]=0,i.b[c+2]=0,i.b[c+3]=0,++_==l.width?(_=0,c+=d):c+=4;break;case 3:break;default:for(var g=0,m=u.length;g<m;){var A=3*u.b[g++];h!=A&&(i.b[c]=o.b[A],i.b[c+1]=o.b[1+A],i.b[c+2]=o.b[2+A],i.b[c+3]=255),++_==l.width?(_=0,c+=d):c+=4}}if(s==e)return i;++s,n=null;break;case 1:var x=r.extension;0==x._hx_index&&(n=x.gce)}}return i},d["format.png.Color"]={__ename__:!0,__constructs__:null,ColGrey:((c=function(t){return{_hx_index:0,alpha:t,__enum__:"format.png.Color",toString:l}})._hx_name="ColGrey",c.__params__=["alpha"],c),ColTrue:((c=function(t){return{_hx_index:1,alpha:t,__enum__:"format.png.Color",toString:l}})._hx_name="ColTrue",c.__params__=["alpha"],c),ColIndexed:{_hx_name:"ColIndexed",_hx_index:2,__enum__:"format.png.Color",toString:l}}),Yr=(Xr.__constructs__=[Xr.ColGrey,Xr.ColTrue,Xr.ColIndexed],Xr.__empty_constructs__=[Xr.ColIndexed],d["format.png.Chunk"]={__ename__:!0,__constructs__:null,CEnd:{_hx_name:"CEnd",_hx_index:0,__enum__:"format.png.Chunk",toString:l},CHeader:((c=function(t){return{_hx_index:1,h:t,__enum__:"format.png.Chunk",toString:l}})._hx_name="CHeader",c.__params__=["h"],c),CData:((c=function(t){return{_hx_index:2,b:t,__enum__:"format.png.Chunk",toString:l}})._hx_name="CData",c.__params__=["b"],c),CPalette:((c=function(t){return{_hx_index:3,b:t,__enum__:"format.png.Chunk",toString:l}})._hx_name="CPalette",c.__params__=["b"],c),CUnknown:((c=function(t,e){return{_hx_index:4,id:t,data:e,__enum__:"format.png.Chunk",toString:l}})._hx_name="CUnknown",c.__params__=["id","data"],c)}),Wr=(Yr.__constructs__=[Yr.CEnd,Yr.CHeader,Yr.CData,Yr.CPalette,Yr.CUnknown],Yr.__empty_constructs__=[Yr.CEnd],(e["format.png.Reader"]=k).__name__="format.png.Reader",k.prototype={read:function(){if(137!=this.i.readByte())throw tr.thrown("Invalid header");if(80!=this.i.readByte())throw tr.thrown("Invalid header");if(78!=this.i.readByte())throw tr.thrown("Invalid header");if(71!=this.i.readByte())throw tr.thrown("Invalid header");if(13!=this.i.readByte())throw tr.thrown("Invalid header");if(10!=this.i.readByte())throw tr.thrown("Invalid header");if(26!=this.i.readByte())throw tr.thrown("Invalid header");if(10!=this.i.readByte())throw tr.thrown("Invalid header");for(var t=new i_;;){var e=this.readChunk();if(t.add(e),e==Yr.CEnd)break}return t},readHeader:function(t){t.set_bigEndian(!0);var e,n=t.readInt32(),s=t.readInt32(),i=t.readByte(),a=t.readByte();switch(a){case 0:e=Xr.ColGrey(!1);break;case 2:e=Xr.ColTrue(!1);break;case 3:e=Xr.ColIndexed;break;case 4:e=Xr.ColGrey(!0);break;case 6:e=Xr.ColTrue(!0);break;default:throw tr.thrown("Unknown color model "+a+":"+i)}var r=t.readByte(),l=t.readByte();if(0!=r||0!=l)throw tr.thrown("Invalid header");r=t.readByte();if(0!=r&&1!=r)throw tr.thrown("Invalid header");return{width:n,height:s,colbits:i,color:e,interlaced:1==r}},readChunk:function(){var t=this.i.readInt32(),e=this.i.readString(4),n=this.i.read(t),t=this.i.readInt32();if(this.checkCRC){for(var s=-1,i=255&((s=16777215^((i=(i=(i=(i=(i=(i=(i=(i=255&(-1^Jn.cca(e,0)))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i)))^Jn.cca(e,1)),i=255&((s=s>>>8^((i=(i=(i=(i=(i=(i=(i=i>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i)))^Jn.cca(e,2)),i=255&((s=s>>>8^((i=(i=(i=(i=(i=(i=(i=i>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i)))^Jn.cca(e,3)),a=(s=s>>>8^((i=(i=(i=(i=(i=(i=(i=i>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i)),n.length),r=n.b.bufferValue,l=0;l<a;)s=s>>>8^((i=(i=(i=(i=(i=(i=(i=(i=255&(s^r.bytes[l++]))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i))>>>1^-306674912&-(1&i));if((-1^s)!=t)throw tr.thrown("CRC check failure")}switch(e){case"IDAT":return Yr.CData(n);case"IEND":return Yr.CEnd;case"IHDR":return Yr.CHeader(this.readHeader(new c_(n)));case"PLTE":return Yr.CPalette(n);default:return Yr.CUnknown(e,n)}},__class__:k},(e["format.png.Tools"]=Vt).__name__="format.png.Tools",Vt.getHeader=function(t){for(var e=t.h;null!=e;){var n=e.item,e=e.next;if(1==n._hx_index)return n.h}throw tr.thrown("Header not found")},Vt.getPalette=function(t){for(var e=t.h;null!=e;){var n=e.item,e=e.next;if(3==n._hx_index)return n.b}return null},Vt.extract32=function(R,V,Q){for(var t=Vt.getHeader(R),e=null==V?new Rt(new ArrayBuffer(t.width*t.height*4)):V,n=null,O=null,s=R.h;null!=s;){var i=s.item;s=s.next,2==i._hx_index&&(A=i.b,null!=O?O.add(A):n=null==n?A:((O=new __).add(n),O.add(A),null))}if(null==(n=null!=O?O.getBytes():n))throw tr.thrown("Data not found");var n=Hr.run(n),a=0,r=0,L=0,U=(Q&&(L=8*-t.width,r=(t.height-1)*(4*t.width)),Q?-1:1);switch((A=t.color)._hx_index){case 0:var l=A.alpha;if(8!=t.colbits)throw tr.thrown("Unsupported color mode");var o=t.width;if(n.length<t.height*((l?2:1)*o+1))throw tr.thrown("Not enough data");var N=-1;if(!l)for(s=R.h;null!=s;){i=s.item;if(s=s.next,4==i._hx_index){var h=i.data;if("tRNS"==i.id){2<=h.length&&(N=h.b[1]);break}}}for(var h=0,u=t.height;h<u;){var _=h++;switch(kt=n.b[a++]){case 0:if(l)for(var G=0;G<o;){++G;var X=n.b[a++];e.b[r++]=X,e.b[r++]=X,e.b[r++]=X,e.b[r++]=n.b[a++]}else for(var Y=0;Y<o;){++Y;var W=n.b[a++];e.b[r++]=W,e.b[r++]=W,e.b[r++]=W,e.b[r++]=W==N?0:255}break;case 1:var j=0,c=0;if(l)for(var H=0;H<o;)++H,j+=n.b[a++],e.b[r++]=j,e.b[r++]=j,e.b[r++]=j,c+=n.b[a++],e.b[r++]=c;else for(var Z=0;Z<o;)++Z,j+=n.b[a++],e.b[r++]=j,e.b[r++]=j,e.b[r++]=j,e.b[r++]=j==N?0:255;break;case 2:var d=0==_?0:4*o*U;if(l)for(var q=0;q<o;){++q;var K=n.b[a++]+e.b[r-d];e.b[r++]=K,e.b[r++]=K,e.b[r++]=K,e.b[r++]=n.b[a++]+e.b[r-d]}else for(var J=0;J<o;){++J;var $=n.b[a++]+e.b[r-d];e.b[r++]=$,e.b[r++]=$,e.b[r++]=$,e.b[r++]=$==N?0:255}break;case 3:var p=0,tt=0,f=0==_?0:4*o*U;if(l)for(var et=0;et<o;)++et,p=n.b[a++]+(p+e.b[r-f]>>1)&255,e.b[r++]=p,e.b[r++]=p,e.b[r++]=p,tt=n.b[a++]+(tt+e.b[r-f]>>1)&255,e.b[r++]=tt;else for(var nt=0;nt<o;)++nt,p=n.b[a++]+(p+e.b[r-f]>>1)&255,e.b[r++]=p,e.b[r++]=p,e.b[r++]=p,e.b[r++]=p==N?0:255;break;case 4:var g=4*o*U,m=0,st=0;if(l)for(var it=0;it<o;){var at=it++,rt=((z=(Ft=m+(It=0==_?0:e.b[r-g])-(F=0==at||0==_?0:e.b[r-g-4]))-F)<0&&(z=-z),a++),m=((E=(E=Ft-m)<0?-E:E)<=(P=(P=Ft-It)<0?-P:P)&&E<=z?m:P<=z?It:F)+n.b[rt]&255;e.b[r++]=m,e.b[r++]=m,e.b[r++]=m;(C=(pt=st+(dt=0==_?0:e.b[r-g])-(Bt=0==at||0==_?0:e.b[r-g-4]))-Bt)<0&&(C=-C);rt=a++,st=((w=(w=pt-st)<0?-w:w)<=(v=(v=pt-dt)<0?-v:v)&&w<=C?st:v<=C?dt:Bt)+n.b[rt]&255;e.b[r++]=st}else for(var lt=0;lt<o;){var ot=lt++,ht=((xt=(gt=m+(ft=0==_?0:e.b[r-g])-(D=0==ot||0==_?0:e.b[r-g-4]))-D)<0&&(xt=-xt),a++);m=((mt=(mt=gt-m)<0?-mt:mt)<=(At=(At=gt-ft)<0?-At:At)&&mt<=xt?m:At<=xt?ft:D)+n.b[ht]&255,e.b[r++]=m,e.b[r++]=m,e.b[r++]=m,e.b[r++]=m==N?0:255}break;default:throw tr.thrown("Invalid filter "+kt)}r+=L}break;case 1:l=A.alpha;if(8!=t.colbits)throw tr.thrown("Unsupported color mode");o=t.width;if(n.length<t.height*((l?4:3)*o+1))throw tr.thrown("Not enough data");var ut=-1,_t=-1,ct=-1;if(!l)for(s=R.h;null!=s;){i=s.item;if(s=s.next,4==i._hx_index){var A=i.data;if("tRNS"==i.id){6<=A.length&&(ut=A.b[1],_t=A.b[3],ct=A.b[5]);break}}}for(var x=0,b=0,y=0,c=0,A=0,h=t.height;A<h;){_=A++;switch(kt=n.b[a++]){case 0:if(l)for(u=0;u<o;)++u,e.b[r++]=n.b[a+2],e.b[r++]=n.b[a+1],e.b[r++]=n.b[a],e.b[r++]=n.b[a+3],a+=4;else for(G=0;G<o;)++G,y=n.b[a+2],e.b[r++]=y,b=n.b[a+1],e.b[r++]=b,x=n.b[a],e.b[r++]=x,e.b[r++]=x==ut&&b==_t&&y==ct?0:255,a+=3;break;case 1:if(x=b=y=c=0,l)for(Y=0;Y<o;)++Y,y+=n.b[a+2],e.b[r++]=y,b+=n.b[a+1],e.b[r++]=b,x+=n.b[a],e.b[r++]=x,c+=n.b[a+3],e.b[r++]=c,a+=4;else for(H=0;H<o;)++H,y+=n.b[a+2],e.b[r++]=y,b+=n.b[a+1],e.b[r++]=b,x+=n.b[a],e.b[r++]=x,e.b[r++]=x==ut&&b==_t&&y==ct?0:255,a+=3;break;case 2:d=0==_?0:4*o*U;if(l)for(Z=0;Z<o;)++Z,e.b[r]=n.b[a+2]+e.b[r-d],++r,e.b[r]=n.b[a+1]+e.b[r-d],++r,e.b[r]=n.b[a]+e.b[r-d],++r,e.b[r]=n.b[a+3]+e.b[r-d],++r,a+=4;else for(q=0;q<o;)++q,y=n.b[a+2]+e.b[r-d],e.b[r]=y,++r,b=n.b[a+1]+e.b[r-d],e.b[r]=b,++r,x=n.b[a]+e.b[r-d],e.b[r]=x,++r,e.b[r++]=x==ut&&b==_t&&y==ct?0:255,a+=3;break;case 3:y=c=0,b=0,x=0,f=0==_?0:4*o*U;if(l)for(J=0;J<o;)++J,y=n.b[a+2]+(y+e.b[r-f]>>1)&255,e.b[r++]=y,b=n.b[a+1]+(b+e.b[r-f]>>1)&255,e.b[r++]=b,x=n.b[a]+(x+e.b[r-f]>>1)&255,e.b[r++]=x,c=n.b[a+3]+(c+e.b[r-f]>>1)&255,e.b[r++]=c,a+=4;else for(et=0;et<o;)++et,y=n.b[a+2]+(y+e.b[r-f]>>1)&255,e.b[r++]=y,b=n.b[a+1]+(b+e.b[r-f]>>1)&255,e.b[r++]=b,x=n.b[a]+(x+e.b[r-f]>>1)&255,e.b[r++]=x,e.b[r++]=x==ut&&b==_t&&y==ct?0:255,a+=3;break;case 4:g=4*o*U;if(x=b=y=c=0,l)for(nt=0;nt<o;){var dt,pt,w,v,C,at=nt++;(z=(Ft=y+(It=0==_?0:e.b[r-g])-(F=0==at||0==_?0:e.b[r-g-4]))-F)<0&&(z=-z),y=((E=(E=Ft-y)<0?-E:E)<=(P=(P=Ft-It)<0?-P:P)&&E<=z?y:P<=z?It:F)+n.b[a+2]&255,e.b[r++]=y,(C=(pt=b+(dt=0==_?0:e.b[r-g])-(Bt=0==at||0==_?0:e.b[r-g-4]))-Bt)<0&&(C=-C),b=((w=(w=pt-b)<0?-w:w)<=(v=(v=pt-dt)<0?-v:v)&&w<=C?b:v<=C?dt:Bt)+n.b[a+1]&255,e.b[r++]=b;(xt=(gt=x+(ft=0==_?0:e.b[r-g])-(D=0==at||0==_?0:e.b[r-g-4]))-D)<0&&(xt=-xt),x=((mt=(mt=gt-x)<0?-mt:mt)<=(At=(At=gt-ft)<0?-At:At)&&mt<=xt?x:At<=xt?ft:D)+n.b[a]&255,e.b[r++]=x;var ft,gt,mt,At,xt,bt=0==_?0:e.b[r-g],yt=c+bt-(Tt=0==at||0==_?0:e.b[r-g-4]),wt=yt-c,vt=yt-bt,yt=yt-Tt;yt<0&&(yt=-yt),c=((wt=wt<0?-wt:wt)<=(vt=vt<0?-vt:vt)&&wt<=yt?c:vt<=yt?bt:Tt)+n.b[a+3]&255,e.b[r++]=c,a+=4}else for(it=0;it<o;){var ot=it++,M=0==_?0:e.b[r-g],S=0==ot||0==_?0:e.b[r-g-4],k=y+M-S,B=k-y,I=k-M,k=k-S,B=(k<0&&(k=-k),y=((B=B<0?-B:B)<=(I=I<0?-I:I)&&B<=k?y:I<=k?M:S)+n.b[a+2]&255,e.b[r++]=y,0==_?0:e.b[r-g]),I=0==ot||0==_?0:e.b[r-g-4],k=b+B-I,M=k-b,S=k-B,k=k-I,M=(k<0&&(k=-k),b=((M=M<0?-M:M)<=(S=S<0?-S:S)&&M<=k?b:S<=k?B:I)+n.b[a+1]&255,e.b[r++]=b,0==_?0:e.b[r-g]),S=0==ot||0==_?0:e.b[r-g-4],k=x+M-S,B=k-x,I=k-M,k=k-S;k<0&&(k=-k),x=((B=B<0?-B:B)<=(I=I<0?-I:I)&&B<=k?x:I<=k?M:S)+n.b[a]&255,e.b[r++]=x,e.b[r++]=x==ut&&b==_t&&y==ct?0:255,a+=3}break;default:throw tr.thrown("Invalid filter "+kt)}r+=L}break;case 2:var Ct=Vt.getPalette(R);if(null==Ct)throw tr.thrown("PNG Palette is missing");for(var Mt,T=null,s=R.h;null!=s;){i=s.item;if(s=s.next,4==i._hx_index&&"tRNS"==i.id){T=i.data;break}}null!=T&&T.length<1<<t.colbits&&((Mt=new Rt(new ArrayBuffer(1<<t.colbits))).blit(0,T,0,T.length),Mt.fill(T.length,Mt.length-T.length,255),T=Mt);o=t.width;if(n.length<t.height*(Math.ceil(o*t.colbits/8)+1))throw tr.thrown("Not enough data");for(var St=t.width*t.colbits>>3,A=0,l=t.height;A<l;){var kt,_=A++;if(0==(kt=n.b[a++]))a+=St;else switch(kt){case 1:for(var F=0,h=0;h<o;)++h,F+=n.b[a],n.b[a++]=255&F;break;case 2:for(d=0==_?0:1+St,u=0;u<o;)++u,n.b[a]+=n.b[a-d],++a;break;case 3:for(var Bt=0,f=0==_?0:1+St,G=0;G<o;)++G,Bt=n.b[a]+(Bt+n.b[a-f]>>1)&255,n.b[a++]=Bt;break;case 4:for(var g=1+St,D=0,Y=0;Y<o;){var It,Tt,Ft,E,P,z,at=Y++;(z=(Ft=D+(It=0==_?0:n.b[a-g])-(Tt=0==at||0==_?0:n.b[a-g-1]))-Tt)<0&&(z=-z),D=((E=(E=Ft-D)<0?-E:E)<=(P=(P=Ft-It)<0?-P:P)&&E<=z?D:P<=z?It:Tt)+n.b[a]&255,n.b[a++]=D}break;default:throw tr.thrown("Invalid filter "+kt)}}a=0;if(8==t.colbits)for(A=0,l=t.height;A<l;){++A,++a;for(h=0,u=t.width;h<u;){++h;F=n.b[a++];e.b[r++]=Ct.b[3*F+2],e.b[r++]=Ct.b[3*F+1],e.b[r++]=Ct.b[3*F],e.b[r++]=null!=T?T.b[F]:255}r+=L}else{if(!(t.colbits<8))throw tr.thrown(t.colbits+" indexed bits per pixel not supported");for(var Dt=t.colbits,Et=(1<<Dt)-1,A=0,l=t.height;A<l;){++A,++a;for(var Pt=0,zt=0,h=0,u=t.width;h<u;){++h,zt<Dt&&(Pt=Pt<<8|n.b[a++],zt+=8);F=Pt>>>zt-Dt&Et;zt-=Dt,e.b[r++]=Ct.b[3*F+2],e.b[r++]=Ct.b[3*F+1],e.b[r++]=Ct.b[3*F],e.b[r++]=null!=T?T.b[F]:255}r+=L}}}return e},d["format.tga.ImageOrigin"]={__ename__:!0,__constructs__:null,BottomLeft:{_hx_name:"BottomLeft",_hx_index:0,__enum__:"format.tga.ImageOrigin",toString:l},BottomRight:{_hx_name:"BottomRight",_hx_index:1,__enum__:"format.tga.ImageOrigin",toString:l},TopLeft:{_hx_name:"TopLeft",_hx_index:2,__enum__:"format.tga.ImageOrigin",toString:l},TopRight:{_hx_name:"TopRight",_hx_index:3,__enum__:"format.tga.ImageOrigin",toString:l}}),jr=(Wr.__constructs__=[Wr.BottomLeft,Wr.BottomRight,Wr.TopLeft,Wr.TopRight],Wr.__empty_constructs__=[Wr.BottomLeft,Wr.BottomRight,Wr.TopLeft,Wr.TopRight],d["format.tga.ImageType"]={__ename__:!0,__constructs__:null,NoImage:{_hx_name:"NoImage",_hx_index:0,__enum__:"format.tga.ImageType",toString:l},UncompressedColorMapped:{_hx_name:"UncompressedColorMapped",_hx_index:1,__enum__:"format.tga.ImageType",toString:l},UncompressedTrueColor:{_hx_name:"UncompressedTrueColor",_hx_index:2,__enum__:"format.tga.ImageType",toString:l},UncompressedBlackAndWhite:{_hx_name:"UncompressedBlackAndWhite",_hx_index:3,__enum__:"format.tga.ImageType",toString:l},RunLengthColorMapped:{_hx_name:"RunLengthColorMapped",_hx_index:4,__enum__:"format.tga.ImageType",toString:l},RunLengthTrueColor:{_hx_name:"RunLengthTrueColor",_hx_index:5,__enum__:"format.tga.ImageType",toString:l},RunLengthBlackAndWhite:{_hx_name:"RunLengthBlackAndWhite",_hx_index:6,__enum__:"format.tga.ImageType",toString:l},Unknown:((c=function(t){return{_hx_index:7,type:t,__enum__:"format.tga.ImageType",toString:l}})._hx_name="Unknown",c.__params__=["type"],c)}),Hr=(jr.__constructs__=[jr.NoImage,jr.UncompressedColorMapped,jr.UncompressedTrueColor,jr.UncompressedBlackAndWhite,jr.RunLengthColorMapped,jr.RunLengthTrueColor,jr.RunLengthBlackAndWhite,jr.Unknown],jr.__empty_constructs__=[jr.NoImage,jr.UncompressedColorMapped,jr.UncompressedTrueColor,jr.UncompressedBlackAndWhite,jr.RunLengthColorMapped,jr.RunLengthTrueColor,jr.RunLengthBlackAndWhite],(e["format.tga.Reader"]=B).__name__="format.tga.Reader",B.prototype={read:function(){var t=this.i.readByte(),e=this.readHeader(),t=0==t?"":this.i.readString(t),n=this.readColorMapData(e);return{header:e,imageId:t,colorMapData:n,imageData:this.readImageData(e,n),developerData:null}},readHeader:function(){var t,e=this.i.readByte(),n=this.i.readByte();switch(n){case 0:t=jr.NoImage;break;case 1:t=jr.UncompressedColorMapped;break;case 2:t=jr.UncompressedTrueColor;break;case 3:t=jr.UncompressedBlackAndWhite;break;case 9:t=jr.RunLengthColorMapped;break;case 10:t=jr.RunLengthTrueColor;break;case 11:t=jr.RunLengthBlackAndWhite;break;default:t=jr.Unknown(n)}var s,i=this.i.readInt16(),a=this.i.readInt16(),r=this.i.readByte(),l=this.i.readInt16(),o=this.i.readInt16(),h=this.i.readInt16(),u=this.i.readInt16(),_=this.i.readByte(),c=this.i.readByte();switch(48&c){case 16:s=Wr.BottomRight;break;case 32:s=Wr.TopLeft;break;case 48:s=Wr.TopRight;break;default:s=Wr.BottomLeft}return{colorMapType:e,imageType:t,colorMapFirstIndex:i,colorMapLength:a,colorMapEntrySize:r,xOrigin:l,yOrigin:o,width:h,height:u,bitsPerPixel:_,alphaChannelBits:15&c,imageOrigin:s}},readColorMapData:function(t){return 0==t.colorMapType?null:this.readPixels(t.colorMapEntrySize,t.colorMapLength,t.alphaChannelBits,!1)},readImageData:function(t,e){switch(t.imageType._hx_index){case 0:return null;case 1:return this.readIndexes(t.bitsPerPixel,t.width*t.height,e,t.colorMapFirstIndex,!1);case 2:return this.readPixels(t.bitsPerPixel,t.width*t.height,t.alphaChannelBits,!1);case 3:return this.readMono(t.bitsPerPixel,t.width*t.height,t.alphaChannelBits,!1);case 4:return this.readIndexes(t.bitsPerPixel,t.width*t.height,e,t.colorMapFirstIndex,!0);case 5:return this.readPixels(t.bitsPerPixel,t.width*t.height,t.alphaChannelBits,!0);case 6:return this.readMono(t.bitsPerPixel,t.width*t.height,t.alphaChannelBits,!0);default:throw tr.thrown("Unsupported image data type!")}},readPixels:function(t,e,n,s){var i,a,r=new Array(e),l=0!=n;switch(t){case 8:a=W(c=this.i,c.readByte),i=W(this,this.parsePixel1);break;case 16:a=W(c=this.i,c.readUInt16),i=W(this,this.parsePixel2);break;case 24:a=W(c=this.i,c.readUInt24),i=W(this,this.parsePixel3);break;case 32:a=W(c=this.i,c.readInt32),i=W(this,this.parsePixel4);break;default:throw tr.thrown("Unsupported bits per pixels amount!")}if(s)for(var o,h=0;h<e;)if(0!=(128&(o=this.i.readByte()))){o&=127;for(var u=i(a(),l);0<=o;)r[h++]=u,--o}else for(o&=127;0<=o;)r[h++]=i(a(),l),--o;else for(var _=0;_<e;)r[_++]=i(a(),l);return r},readMono:function(t,e,n,s){var i,a,r=new Array(e),l=0!=n;switch(t){case 8:a=W(c=this.i,c.readByte),i=W(this,this.parsePixel1);break;case 16:a=W(c=this.i,c.readUInt16),i=W(this,this.parsePixelGreyAlpha);break;default:throw tr.thrown("Unsupported bits per pixels amount!")}if(s)for(var o,h=0;h<e;)if(0!=(128&(o=this.i.readByte()))){o&=127;for(var u=i(a(),l);0<=o;)r[h++]=u,--o}else for(o&=127;0<=o;)r[h++]=i(a(),l),--o;else for(var _=0;_<e;)r[_++]=i(a(),l);return r},readIndexes:function(t,e,n,s,i){var a,r=new Array(e);switch(t){case 8:a=W(c=this.i,c.readByte);break;case 16:a=W(c=this.i,c.readUInt16);break;case 24:a=W(c=this.i,c.readUInt24);break;case 32:a=W(c=this.i,c.readInt32);break;default:throw tr.thrown("Unsupported bits per pixels amount!")}if(i)for(var l,o=0;o<e;)if(0!=(128&(l=this.i.readByte()))){l&=127;for(var h=n[s+a()];0<=l;)r[o++]=h,--l}else for(l&=127;0<=l;)r[o++]=n[s+a()],--l;else for(var u=0;u<e;)r[u++]=n[s+a()];return r},parsePixel1:function(t,e){return t<<16|t<<8|t},parsePixelGreyAlpha:function(t,e){return(e?(65280&t)<<16:0)|this.parsePixel1(255&t,!1)},parsePixel2:function(t,e){return(e&&1==(32768&t)?-16777216:0)|(((31744&t)>>10)/31*255|0)<<16|(((992&t)>>5)/31*255|0)<<8|(31&t)/31*255|0},parsePixel3:function(t,e){return t},parsePixel4:function(t,e){return t},__class__:B},function(){}),g=((e["format.tools.Inflate"]=Hr).__name__="format.tools.Inflate",Hr.run=function(t){return S_.run(t)},(e["gasm.assets.Loader"]=h).__name__="gasm.assets.Loader",h.prototype={load:function(){this._loadedItems=0,this._totalBytes=wt.fold(this._loadingQueue,function(t,e){var n=t.size;if(null!=t.extras)for(var s=0,i=t.extras;s<i.length;)n+=i[s++].size;return n+e},0),this.loadNext()},addHandler:function(t,e){this._extensionHandlers.h[t._hx_index]=e},queueItem:function(t,e){var n,t=this.getEntry(t,e);if(null==t)return!1;switch(e._hx_index){case 3:n=[g.BitmapFontImage];break;case 6:n=[g.AtlasImage];break;case 10:n=[g.SpineImage,g.SpineConfig];break;default:n=[]}this._totalItems++;var s={type:e,name:t.name,path:t.path,size:t.size,extension:t.extension,extras:null};if(null!=t.extras){s.extras=[];for(var i=0,a=t.extras;i<a.length;){var r=a[i];++i,s.extras.push({type:n[s.extras.length],name:r.name,path:r.path,size:r.size,extension:r.extension}),this._totalItems++}}return this._loadingQueue.push(s),!0},onReady:function(){},onComplete:function(){},onProgress:function(t){},onError:function(t){},loadNext:function(){var t=this;if(this._itemIndex<this._loadingQueue.length){var e=this._loadingQueue[this._itemIndex];if(this.loadItem(e,this._extensionHandlers.h[e.type._hx_index]),null!=e.extras)for(var n=0,s=e.extras;n<s.length;){var i=s[n];++n,this.loadItem(i,this._extensionHandlers.h[i.type._hx_index])}qu.delay(function(){t._itemIndex++,t.loadNext()},0)}},loadItem:function(i,a){var r=this,l=new XMLHttpRequest;l.open("GET",i.path,!0),l.responseType="arraybuffer",l.onload=function(t){var e,n,s;200!=l.status?r.onError(l.statusText):(r._loadedItems++,e=Rt.ofData(l.response),2==i.type._hx_index&&(n="R_font_"+i.name,(s=window.document.createElement("style")).type="text/css",s.innerHTML="@font-face{ font-family: "+n+"; src: url('data:font/ttf;base64,"+t_.encode(e)+"') format('truetype'); }",window.document.getElementsByTagName("head")[0].appendChild(s),(s=window.document.createElement("div")).style.fontFamily=n,s.style.opacity=0,s.style.width="1px",s.style.height="1px",s.style.position="fixed",s.style.bottom="0px",s.style.right="0px",s.innerHTML=".",s.className="hx__loadFont",window.document.body.appendChild(s)),null!=a&&a({id:i.name,data:e,path:i.path}),r._loadedItems==r._totalItems&&r.onComplete())},l.onprogress=function(t){var e=t.loaded,t=t.total;r.handleProgress(0|e,i.path,0|t)},l.send(null)},getEntry:function(_,t){var e,c=this;switch(t._hx_index){case 0:e=this._imageFolder;break;case 1:e=this._soundFolder;break;case 2:case 3:e=this._fontFolder;break;case 5:e=this._configFolder;break;case 6:e=this._atlasFolder;break;case 8:e=this._gradientFolder;break;case 9:e=this._modelFolder;break;case 10:e=this._spineFolder;break;default:e=null}function n(t,e){if(null==t)return null;var n=null,s=wt.find(t.children,function(t){return t.name==c._localizedFolder});if(null!=s){var i=wt.find(s.children,function(t){return t.name==e&&"directory"==t.type});if(null!=(i=null==i?wt.find(s.children,function(t){return t.name==c._defaultLocale&&"directory"==t.type}):i)){for(var a=_,r=i.children,l=[],o=0;o<r.length;){var h=r[o],u=(++o,h.name);Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null)==a&&"file"==h.type&&l.push(h)}n=l}}if(null==n||n.length<1){for(a=_,r=t.children,l=[],o=0;o<r.length;){h=r[o],u=(++o,h.name);Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null)==a&&"file"==h.type&&l.push(h)}n=l}return n}var s=null,i=(null!=this._platformContent&&(s=wt.find(this._platformContent.children,function(t){return t.name==e})),null),a=(null!=this._brandingPlatform&&(i=wt.find(this._brandingPlatform.children,function(t){return t.name==e})),null),r=(null!=this._brandingCommon&&(a=wt.find(this._brandingCommon.children,function(t){return t.name==e})),wt.find(this._commonContent.children,function(t){return t.name==e})),l=n(i,this._locale),o=null;if(null!=(l=null!=l&&0!=l.length||null!=(l=n(a,this._locale))&&0!=l.length||null!=(l=n(s,this._locale))&&0!=l.length?l:n(r,this._locale)))if(1<l.length)switch(t._hx_index){case 3:var o=wt.find(l,function(t){return".xml"==t.extension||".fnt"==t.extension}),h=wt.find(l,function(t){return".png"==t.extension}),u=(o.extras=[],h.type="file",h.path=ut.replace(h.path,"\\","/"),h.name);h.name=Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null),h.size=null!=h.size?0|h.size:0,o.extras.push(h);break;case 6:o=wt.find(l,function(t){return".atlas"==t.extension});var d=this.getPreferredExtension(g.AtlasImage),u=(null==(h=wt.find(l,function(t){return t.extension==d}))&&(h=wt.find(l,function(t){return".basis"==t.extension||".png"==t.extension||".jpg"==t.extension})),o.extras=[],h.type="file",h.path=ut.replace(h.path,"\\","/"),h.name);h.name=Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null),h.size=null!=h.size?0|h.size:0,o.extras.push(h);break;case 10:o=wt.find(l,function(t){return".atlas"==t.extension});var p=this.getPreferredExtension(g.SpineImage),u=(null==(h=wt.find(l,function(t){return t.extension==p}))&&(h=wt.find(l,function(t){return".png"==t.extension||".jpg"==t.extension||".basis"==t.extension})),o.extras=[],h.type="file",h.path=ut.replace(h.path,"\\","/"),h.name),h=(h.name=Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null),h.size=null!=h.size?0|h.size:0,o.extras.push(h),wt.find(l,function(t){return".json"==t.extension})),u=(h.type="file",h.path=ut.replace(h.path,"\\","/"),h.name);h.name=Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null),h.size=null!=h.size?0|h.size:0,o.extras.push(h);break;default:var f=this.getPreferredExtension(t);o=wt.find(l,function(t){return t.extension==f})}else o=l[0];if(null==o)return null;o.path=ut.replace(o.path,"\\","/");u=o.name;return o.name=Jn.substr(u,0,-1!=u.lastIndexOf(".")?u.lastIndexOf("."):null),o.size=null!=o.size?0|o.size:0,o},handleProgress:function(t,e,n){this._loadedBytes.h[e]=t;e=wt.fold(this._loadedBytes,function(t,e){return t+e},0);this.onProgress(e/this._totalBytes*100|0)},getPreferredExtension:function(e){var t=wt.find(this._formats,function(t){return t.type==e});return null!=t?t.extension:null},__class__:h},d["gasm.assets.AssetType"]={__ename__:!0,__constructs__:null,Image:{_hx_name:"Image",_hx_index:0,__enum__:"gasm.assets.AssetType",toString:l},Sound:{_hx_name:"Sound",_hx_index:1,__enum__:"gasm.assets.AssetType",toString:l},Font:{_hx_name:"Font",_hx_index:2,__enum__:"gasm.assets.AssetType",toString:l},BitmapFont:{_hx_name:"BitmapFont",_hx_index:3,__enum__:"gasm.assets.AssetType",toString:l},BitmapFontImage:{_hx_name:"BitmapFontImage",_hx_index:4,__enum__:"gasm.assets.AssetType",toString:l},Config:{_hx_name:"Config",_hx_index:5,__enum__:"gasm.assets.AssetType",toString:l},Atlas:{_hx_name:"Atlas",_hx_index:6,__enum__:"gasm.assets.AssetType",toString:l},AtlasImage:{_hx_name:"AtlasImage",_hx_index:7,__enum__:"gasm.assets.AssetType",toString:l},Gradient:{_hx_name:"Gradient",_hx_index:8,__enum__:"gasm.assets.AssetType",toString:l},Model:{_hx_name:"Model",_hx_index:9,__enum__:"gasm.assets.AssetType",toString:l},SpineAtlas:{_hx_name:"SpineAtlas",_hx_index:10,__enum__:"gasm.assets.AssetType",toString:l},SpineImage:{_hx_name:"SpineImage",_hx_index:11,__enum__:"gasm.assets.AssetType",toString:l},SpineConfig:{_hx_name:"SpineConfig",_hx_index:12,__enum__:"gasm.assets.AssetType",toString:l}}),Zr=(g.__constructs__=[g.Image,g.Sound,g.Font,g.BitmapFont,g.BitmapFontImage,g.Config,g.Atlas,g.AtlasImage,g.Gradient,g.Model,g.SpineAtlas,g.SpineImage,g.SpineConfig],g.__empty_constructs__=[g.Image,g.Sound,g.Font,g.BitmapFont,g.BitmapFontImage,g.Config,g.Atlas,g.AtlasImage,g.Gradient,g.Model,g.SpineAtlas,g.SpineImage,g.SpineConfig],(e["gasm.core.Component"]=p).__name__="gasm.core.Component",p.prototype={setup:function(){},init:function(){},onAdded:function(){},dispose:function(){this._scheduled=[]},update:function(t){for(var e=0,n=this._scheduled;e<n.length;){var s=n[e];++e,s.when=ol.sub(s.when,t),ol.leq(s.when,0)&&(s.trigger.trigger(null),Jn.remove(this._scheduled,s))}for(e=0,n=this._predicates;e<n.length;){s=n[e];++e,s.predicate()&&(s.trigger.trigger(null),Jn.remove(this._predicates,s))}},after:function(t){null==t&&(t=0);var e=new ep;return null==t?e.trigger(null):this._scheduled.push({when:t,trigger:e}),e},when:function(e,t){null==t&&(t=0);var n=this,s=new ep,i=t,a=Jn.now()/1e3,r=null,r={predicate:ol.gt(t,0)?function(){var t=Jn.now()/1e3;return i=ol.sub(i,t-a),a=t,e()||ol.leq(i,0)?Jn.remove(n._predicates,r):e()}:e,trigger:s};return this._predicates.push(r),s},get_baseName:function(){return null},__class__:p,__properties__:{get_baseName:"get_baseName"}},(e["gasm.core.Context"]=a).__name__="gasm.core.Context",a.__isInterface__=!0,(e["gasm.core.IEngine"]=r).__name__="gasm.core.IEngine",r.__isInterface__=!0,r.prototype={__class__:r},(e["gasm.core.Engine"]=o).__name__="gasm.core.Engine",o.__interfaces__=[r],o.prototype={tick:function(){var t,e;this._paused||(t=Jn.now()/1e3,e=null!=this.getDelta?this.getDelta():null!=(e=t-this._lastTime)?e:t,this.updateEntity(this.baseEntity,e),this._lastTime=t)},pause:function(){this._paused=!0},resume:function(){this._lastTime=Jn.now()/1e3,this._paused=!1},updateEntity:function(t,e){for(var n=0,s=this._systems.length;n<s;)for(var i=this._systems[n++],a=t.firstComponent;null!=a;){var r=a.next;0!=(i.componentFlags&1<<a.componentType._hx_index)&&i.update(a,e),a=r}for(var l=t.firstChild;null!=l;){r=l.next;this.updateEntity(l,e),l=r}},__class__:o},function(t){null==t&&(t=""),this.firstComponent=null,this.next=null,this.firstChild=null,this.parent=null,this.id=t,this._compMap=new N}),qr=((e["gasm.core.Entity"]=Zr).__name__="gasm.core.Entity",Zr.prototype={add:function(t){for(var e=t.get_baseName(),n=(null!=t.owner&&t.owner.remove(t),this._compMap.h[e]),s=(null!=n&&this.remove(n),this._compMap.h[e]=t,null),i=this.firstComponent;null!=i;)i=(s=i).next;switch(null!=s?s.next=t:this.firstComponent=t,t.owner=this,t.next=null,t.componentType._hx_index){case 8:this.add(new Kr);break;case 9:this.add(new $r);break;case 10:this.add(new Jr);break;case 11:this.add(new qr)}return t.setup(),this},remove:function(t){for(var e=null,n=this.firstComponent;null!=n;){var s,i,a=n.next;if(n==t)return null==e?this.firstComponent=a:(e.owner=this,e.next=a),null!=this._compMap&&(i=this._compMap,s=n.get_baseName(),i=i,Object.prototype.hasOwnProperty.call(i.h,s))&&delete i.h[s],!n.inited&&0!=n.componentType._hx_index||n.dispose(),n.owner=null,!(n.next=null);e=n,n=a}return this._compMap=null,!1},getFromParentsByName:function(t,e){for(var n=this;null!=n;){var s=null!=n._compMap?n._compMap.h[t]:null;if(null!=s)return s;n=n.parent}return null},getFromRootByName:function(t,e){for(var n,s=null,i=this;null!=i;)null!=(n=null!=i._compMap?i._compMap.h[t]:null)&&(s=n),i=i.parent;return s},addChild:function(t,e){if(null==e&&(e=!0),null!=t.parent&&t.parent.removeChild(t),t.parent=this,e){for(var n=null,s=this.firstChild;null!=s;)s=(n=s).next;null!=n?n.next=t:this.firstChild=t}else t.next=this.firstChild,this.firstChild=t;return this},removeChild:function(t){for(var e=null,n=this.firstChild;null!=n;){var s=n.next;if(n==t)return null==e?this.firstChild=s:e.next=s,n.parent=null,n.next=null,void n.dispose();e=n,n=s}},disposeChildren:function(){for(;null!=this.firstChild;){var t=this.firstChild.next;this.firstChild.dispose(),this.firstChild=t}},dispose:function(){if(null!=this.parent&&(this.parent.removeChild(this),this.parent=null),null!=this.firstComponent)for(var t=this.firstComponent;null!=t;)this.remove(t),t=t.next;this.disposeChildren()},__class__:Zr},(e["gasm.core.ISystem"]=u).__name__="gasm.core.ISystem",u.__isInterface__=!0,u.prototype={__class__:u},(e["gasm.core.System"]=_).__name__="gasm.core.System",_.prototype={__class__:_},(e["gasm.core.api.IDisposable"]=I).__name__="gasm.core.api.IDisposable",I.__isInterface__=!0,(e["gasm.core.components.AppModelComponent"]=T).__name__="gasm.core.components.AppModelComponent",T.__super__=p,T.prototype=t(p.prototype,{get_baseName:function(){return"gasm.core.components.AppModelComponent"},__class__:T}),(e["gasm.core.components.SceneModelComponent"]=E).__name__="gasm.core.components.SceneModelComponent",E.__super__=p,E.prototype=t(p.prototype,{addScene:function(t){return this.removeScene(t.name),t.entity=new Zr(t.name),null==t.layerIndex&&(t.layerIndex=this.scenes.length),this.scenes.push(t),this.sortScenes(),this.addEntity(t,this.owner),this.dirty=!0,t.entity},hideScene:function(t){},showScene:function(t){},removeScene:function(e){var t,n=wt.find(this.scenes,function(t){return t.name==e});null!=n&&(null!=(t=n.instance)&&(t.removeChildren(),null!=t&&null!=t.parent&&t.parent.removeChild(t),t.dispose()),null!=(t=n.instance)&&(t.removeChildren(),null!=t&&null!=t.parent&&t.parent.removeChild(t),t.dispose()),null!=n.entity.parent&&n.entity.parent.removeChild(n.entity),n.entity.dispose(),this.dirty=!0,Jn.remove(this.scenes,n),t=this.sceneMap,n=n.name,Object.prototype.hasOwnProperty.call(t.h,n))&&delete t.h[n]},addEntity:function(t,e){return null},sortScenes:function(){this.scenes.sort(function(t,e){return t.layerIndex>e.layerIndex?1:-1});for(var t=0,e=this.scenes,n=new Array(e.length),s=0,i=e.length;s<i;){var a=s++,r=e[a];r.layerIndex=t++,n[a]=r}},get_baseName:function(){return"gasm.core.components.SceneModelComponent"},__class__:E}),(e["gasm.core.components.SceneLayer"]=P).__name__="gasm.core.components.SceneLayer",P.prototype={__class__:P},function(){p.call(this),this.componentType=el.SoundModel}),Kr=((e["gasm.core.components.SoundModelComponent"]=qr).__name__="gasm.core.components.SoundModelComponent",qr.__super__=p,qr.prototype=t(p.prototype,{get_baseName:function(){return"gasm.core.components.SoundModelComponent"},__class__:qr}),function(){this._yScale=1,this._xScale=1,this._height=-1,this._width=-1,this.dirty=!0,this.offsetY=0,this.offsetX=0,this.stageMouseY=0,this.stageMouseX=0,this.mouseY=0,this.mouseX=0,this.origHeight=-1,this.origWidth=-1,this.visible=!0,this.alpha=1,this.y=0,this.x=0,p.call(this),this.componentType=el.GraphicsModel,this._pressHandlers=[],this._overHandlers=[],this._outHandlers=[],this._moveHandlers=[],this._dragHandlers=[],this._downHandlers=[],this._upHandlers=[],this._resizeHandlers=[]}),Jr=((e["gasm.core.components.SpriteModelComponent"]=Kr).__name__="gasm.core.components.SpriteModelComponent",Kr.__super__=p,Kr.prototype=t(p.prototype,{dispose:function(){for(var t=0,e=nl.__empty_constructs__.slice();t<e.length;)this.removeHandlers(e[t++]);this._pressHandlers=null,this._overHandlers=null,this._outHandlers=null,this._moveHandlers=null,this._dragHandlers=null,this._downHandlers=null,this._upHandlers=null,this._resizeHandlers=null},addHandler:function(t,e){var n;switch(t._hx_index){case 0:n=this._pressHandlers;break;case 1:n=this._dragHandlers;break;case 2:n=this._moveHandlers;break;case 3:n=this._overHandlers;break;case 4:n=this._outHandlers;break;case 5:n=this._downHandlers;break;case 6:n=this._upHandlers;break;case 7:n=this._resizeHandlers}n.push(e)},removeHandler:function(t,e){var n;switch(t._hx_index){case 0:n=this._pressHandlers;break;case 1:n=this._dragHandlers;break;case 2:n=this._moveHandlers;break;case 3:n=this._overHandlers;break;case 4:n=this._outHandlers;break;case 5:n=this._downHandlers;break;case 6:n=this._upHandlers;break;case 7:n=this._resizeHandlers}if(null!=n)for(var s=0;s<n.length;){var i=n[s];++s,i==e&&Jn.remove(n,i)}},removeHandlers:function(t){},triggerEvent:function(t,e,n){var s,i=new il(e,n);switch(t._hx_index){case 0:s=this._pressHandlers;break;case 1:s=this._dragHandlers;break;case 2:s=this._moveHandlers;break;case 3:s=this._overHandlers;break;case 4:s=this._outHandlers;break;case 5:s=this._downHandlers;break;case 6:s=this._upHandlers;break;case 7:s=this._resizeHandlers}for(var a=0;a<s.length;)s[a++](i)},set_x:function(t){return this.x=t,this.dirty=!0,t},set_y:function(t){return this.y=t,this.dirty=!0,t},set_width:function(t){return this._width=t,0<this._width&&0<this.origHeight&&(this._xScale=t/this.origWidth),this.dirty=!0,t},set_height:function(t){return this._height=t,0<this._height&&0<this.origHeight&&(this._yScale=t/this.origHeight),this.dirty=!0,t},get_xScale:function(){return this._xScale},set_xScale:function(t){return this._xScale=t,0<this.origWidth&&(this._width=this._xScale*this.origWidth),this.dirty=!0,t},get_yScale:function(){return this._yScale},set_yScale:function(t){return this._yScale=t,0<this.origHeight&&(this._height=this._yScale*this.origHeight),this.dirty=!0,t},get_visible:function(){return this.visible},set_visible:function(t){return this.visible=t,this.dirty=!0,t},get_baseName:function(){return"gasm.core.components.SpriteModelComponent"},__class__:Kr,__properties__:t(p.prototype.__properties__,{set_height:"set_height",set_width:"set_width",set_yScale:"set_yScale",get_yScale:"get_yScale",set_xScale:"set_xScale",get_xScale:"get_xScale",set_visible:"set_visible",get_visible:"get_visible",set_y:"set_y",set_x:"set_x"})}),function(t,e,n){null==n&&(n=16777215),null==e&&(e=14),null==t&&(t=""),this.text="",Kr.call(this),this.text=t,this.size=e,this.color=n}),$r=((e["gasm.core.components.TextModelComponent"]=Jr).__name__="gasm.core.components.TextModelComponent",Jr.__super__=Kr,Jr.prototype=t(Kr.prototype,{get_baseName:function(){return"gasm.core.components.SpriteModelComponent"},__class__:Jr}),function(){this.dirty=!1,this.visible=!0,this.alpha=1,this.dimensions=new al(0,0,0),this.scale=new al(1,1,1),this.offset=new al(0,0,0),this.pos=new al(0,0,0),p.call(this),this.componentType=el.Graphics3DModel,this._pressHandlers=[],this._overHandlers=[],this._outHandlers=[],this._moveHandlers=[],this._dragHandlers=[],this._downHandlers=[],this._upHandlers=[],this._resizeHandlers=[]}),tl=((e["gasm.core.components.ThreeDModelComponent"]=$r).__name__="gasm.core.components.ThreeDModelComponent",$r.__super__=p,$r.prototype=t(p.prototype,{dispose:function(){for(var t=0,e=nl.__empty_constructs__.slice();t<e.length;)this.removeHandlers(e[t++]);this._pressHandlers=null,this._overHandlers=null,this._outHandlers=null,this._moveHandlers=null,this._dragHandlers=null,this._downHandlers=null,this._upHandlers=null,this._resizeHandlers=null},removeHandlers:function(t){},get_pos:function(){return this.dirty=!0,this.pos},set_pos:function(t){return this.pos=t,this.dirty=!0,t},set_dimensions:function(t){return this.dimensions=t,this.dirty=!0,t},set_scale:function(t){return this.scale=t,this.dirty=!0,t},get_baseName:function(){return"gasm.core.components.ThreeDModelComponent"},__class__:$r,__properties__:t(p.prototype.__properties__,{set_dimensions:"set_dimensions",set_scale:"set_scale",set_pos:"set_pos",get_pos:"get_pos"})}),d["gasm.core.enums.Anchor"]={__ename__:!0,__constructs__:null,TOP:{_hx_name:"TOP",_hx_index:0,__enum__:"gasm.core.enums.Anchor",toString:l},BOTTOM:{_hx_name:"BOTTOM",_hx_index:1,__enum__:"gasm.core.enums.Anchor",toString:l},LEFT:{_hx_name:"LEFT",_hx_index:2,__enum__:"gasm.core.enums.Anchor",toString:l},RIGHT:{_hx_name:"RIGHT",_hx_index:3,__enum__:"gasm.core.enums.Anchor",toString:l},NONE:{_hx_name:"NONE",_hx_index:4,__enum__:"gasm.core.enums.Anchor",toString:l}}),el=(tl.__constructs__=[tl.TOP,tl.BOTTOM,tl.LEFT,tl.RIGHT,tl.NONE],tl.__empty_constructs__=[tl.TOP,tl.BOTTOM,tl.LEFT,tl.RIGHT,tl.NONE],d["gasm.core.enums.ComponentType"]={__ename__:!0,__constructs__:null,Model:{_hx_name:"Model",_hx_index:0,__enum__:"gasm.core.enums.ComponentType",toString:l},ActiveModel:{_hx_name:"ActiveModel",_hx_index:1,__enum__:"gasm.core.enums.ComponentType",toString:l},SceneModel:{_hx_name:"SceneModel",_hx_index:2,__enum__:"gasm.core.enums.ComponentType",toString:l},GraphicsModel:{_hx_name:"GraphicsModel",_hx_index:3,__enum__:"gasm.core.enums.ComponentType",toString:l},Graphics3DModel:{_hx_name:"Graphics3DModel",_hx_index:4,__enum__:"gasm.core.enums.ComponentType",toString:l},TextModel:{_hx_name:"TextModel",_hx_index:5,__enum__:"gasm.core.enums.ComponentType",toString:l},SoundModel:{_hx_name:"SoundModel",_hx_index:6,__enum__:"gasm.core.enums.ComponentType",toString:l},Actor:{_hx_name:"Actor",_hx_index:7,__enum__:"gasm.core.enums.ComponentType",toString:l},Graphics:{_hx_name:"Graphics",_hx_index:8,__enum__:"gasm.core.enums.ComponentType",toString:l},Graphics3D:{_hx_name:"Graphics3D",_hx_index:9,__enum__:"gasm.core.enums.ComponentType",toString:l},Text:{_hx_name:"Text",_hx_index:10,__enum__:"gasm.core.enums.ComponentType",toString:l},Sound:{_hx_name:"Sound",_hx_index:11,__enum__:"gasm.core.enums.ComponentType",toString:l}}),nl=(el.__constructs__=[el.Model,el.ActiveModel,el.SceneModel,el.GraphicsModel,el.Graphics3DModel,el.TextModel,el.SoundModel,el.Actor,el.Graphics,el.Graphics3D,el.Text,el.Sound],el.__empty_constructs__=[el.Model,el.ActiveModel,el.SceneModel,el.GraphicsModel,el.Graphics3DModel,el.TextModel,el.SoundModel,el.Actor,el.Graphics,el.Graphics3D,el.Text,el.Sound],d["gasm.core.enums.EventType"]={__ename__:!0,__constructs__:null,PRESS:{_hx_name:"PRESS",_hx_index:0,__enum__:"gasm.core.enums.EventType",toString:l},DRAG:{_hx_name:"DRAG",_hx_index:1,__enum__:"gasm.core.enums.EventType",toString:l},MOVE:{_hx_name:"MOVE",_hx_index:2,__enum__:"gasm.core.enums.EventType",toString:l},OVER:{_hx_name:"OVER",_hx_index:3,__enum__:"gasm.core.enums.EventType",toString:l},OUT:{_hx_name:"OUT",_hx_index:4,__enum__:"gasm.core.enums.EventType",toString:l},DOWN:{_hx_name:"DOWN",_hx_index:5,__enum__:"gasm.core.enums.EventType",toString:l},UP:{_hx_name:"UP",_hx_index:6,__enum__:"gasm.core.enums.EventType",toString:l},RESIZE:{_hx_name:"RESIZE",_hx_index:7,__enum__:"gasm.core.enums.EventType",toString:l}}),sl=(nl.__constructs__=[nl.PRESS,nl.DRAG,nl.MOVE,nl.OVER,nl.OUT,nl.DOWN,nl.UP,nl.RESIZE],nl.__empty_constructs__=[nl.PRESS,nl.DRAG,nl.MOVE,nl.OVER,nl.OUT,nl.DOWN,nl.UP,nl.RESIZE],d["gasm.core.enums.SystemType"]={__ename__:!0,__constructs__:null,CORE:{_hx_name:"CORE",_hx_index:0,__enum__:"gasm.core.enums.SystemType",toString:l},ACTOR:{_hx_name:"ACTOR",_hx_index:1,__enum__:"gasm.core.enums.SystemType",toString:l},RENDERING:{_hx_name:"RENDERING",_hx_index:2,__enum__:"gasm.core.enums.SystemType",toString:l},RENDERING3D:{_hx_name:"RENDERING3D",_hx_index:3,__enum__:"gasm.core.enums.SystemType",toString:l},SOUND:{_hx_name:"SOUND",_hx_index:4,__enum__:"gasm.core.enums.SystemType",toString:l}}),il=(sl.__constructs__=[sl.CORE,sl.ACTOR,sl.RENDERING,sl.RENDERING3D,sl.SOUND],sl.__empty_constructs__=[sl.CORE,sl.ACTOR,sl.RENDERING,sl.RENDERING3D,sl.SOUND],(e["gasm.core.events.api.IEvent"]=z).__name__="gasm.core.events.api.IEvent",z.__isInterface__=!0,function(t,e){this.pos=t,this.entity=e}),al=((e["gasm.core.events.InteractionEvent"]=il).__name__="gasm.core.events.InteractionEvent",il.__interfaces__=[z],il.prototype={__class__:il},function(t,e,n){null==n&&(n=0),null==e&&(e=0),null==t&&(t=0),this.z=0,this.y=0,this.x=0,this.set(t,e,n)}),rl=((e["gasm.core.math.geom.Vector"]=al).__name__="gasm.core.math.geom.Vector",al.prototype={set:function(t,e,n){null==n&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.z=n},__class__:al},function(){_.call(this),this.type=sl.ACTOR,this.componentFlags|=128}),ll=((e["gasm.core.systems.ActorSystem"]=rl).__name__="gasm.core.systems.ActorSystem",rl.__interfaces__=[u],rl.__super__=_,rl.prototype=t(_.prototype,{update:function(t,e){var n=t.inited;n||(t.init(),t.inited=!0),t.update(e),n||t.onAdded()},__class__:rl}),function(){_.call(this),this.type=sl.CORE,this.componentFlags=16|(this.componentFlags|=8),this.componentFlags=2|(this.componentFlags|=32),this.componentFlags|=64}),ol=((e["gasm.core.systems.CoreSystem"]=ll).__name__="gasm.core.systems.CoreSystem",ll.__interfaces__=[u],ll.__super__=_,ll.prototype=t(_.prototype,{update:function(t,e){var n=t.inited;n||(t.init(),t.inited=!0),t.update(e),n||t.onAdded()},__class__:ll}),{}),hl=(ol.sub=function(t,e){return t-e},ol.mult=function(t,e){return t*e},ol.leq=function(t,e){return t<=e},ol.gt=function(t,e){return e<t},(e["gasm.core.utils.SignalConnection"]=L).__name__="gasm.core.utils.SignalConnection",L.__interfaces__=[I],L.prototype={once:function(){return this.stayInList=!1,this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:L},(e["gasm.core.utils.SignalBase"]=U).__name__="gasm.core.utils.SignalBase",U.prototype={connectImpl:function(t,e){var n=this,s=new L(this,t);return this._head==U.DISPATCHING_SENTINEL?this.defer(function(){n.listAdd(s,e)}):this.listAdd(s,e),s},disconnect:function(t){var e=this;this._head==U.DISPATCHING_SENTINEL?this.defer(function(){e.listRemove(t)}):this.listRemove(t)},defer:function(t){for(var e=null,n=this._deferredTasks;null!=n;)n=(e=n).next;t=new ul(t);null!=e?e.next=t:this._deferredTasks=t},willEmit:function(){var t=this._head;return this._head=U.DISPATCHING_SENTINEL,t},didEmit:function(t){this._head=t;var e=this._deferredTasks;for(this._deferredTasks=null;null!=e;)e.fn(),e=e.next},listAdd:function(t,e){if(e)t._next=this._head,this._head=t;else{for(var n=null,s=this._head;null!=s;)s=(n=s)._next;null!=n?n._next=t:this._head=t}},listRemove:function(t){for(var e,n=null,s=this._head;null!=s;){if(s==t)return e=s._next,void(null==n?this._head=e:n._next=e);s=(n=s)._next}},__class__:U},function(t){U.call(this,t)}),ul=((e["gasm.core.utils.Signal1"]=hl).__name__="gasm.core.utils.Signal1",hl.__super__=U,hl.prototype=t(U.prototype,{connect:function(t,e){return this.connectImpl(t,e=null==e?!1:e)},emit:function(t){var e=this;this._head==U.DISPATCHING_SENTINEL?this.defer(function(){e.emitImpl(t)}):this.emitImpl(t)},emitImpl:function(t){for(var e=this.willEmit(),n=e;null!=n;)n._listener(t),n.stayInList||n.dispose(),n=n._next;this.didEmit(e)},__class__:hl}),function(t){this.next=null,this.fn=t}),_l=((e["gasm.core.utils._SignalBase.Task"]=ul).__name__="gasm.core.utils._SignalBase.Task",ul.prototype={__class__:ul},(e["h3d.IDrawable"]=G).__name__="h3d.IDrawable",G.__isInterface__=!0,(e["hxd.App"]=X).__name__="hxd.App",X.__interfaces__=[G],X.staticHandler=function(){},X.prototype={onResize:function(){},onContextLost:function(){null!=this.s3d&&this.s3d.onContextLost()},render:function(t){this.s3d.render(t),this.s2d.render(t)},setup:function(){var t=this,e=!1;this.engine.onReady=X.staticHandler,this.engine.onContextLost=W(this,this.onContextLost),this.engine.onResized=function(){null!=t.s2d&&(t.s2d.checkResize(),e)&&t.onResize()},this.s3d=new Wo,this.s2d=new ql,this.sevents=new H_,this.sevents.addScene(this.s2d),this.sevents.addScene(this.s3d),this.loadAssets(function(){e=!0,t.init(),K_.skip(),t.mainLoop(),tc.setLoop(W(t,t.mainLoop)),N_.initialize()})},loadAssets:function(t){t()},init:function(){},mainLoop:function(){var t;K_.update(),this.sevents.checkEvents(),this.isDisposed||(this.update(K_.dt),this.isDisposed)||(t=K_.dt,null!=this.s2d&&this.s2d.setElapsedTime(t),null!=this.s3d&&this.s3d.setElapsedTime(t),this.engine.render(this))},update:function(t){},__class__:X},(e["gasm.heaps.HeapsContext"]=Y).__name__="gasm.heaps.HeapsContext",Y.__interfaces__=[a],Y.__super__=X,Y.prototype=t(X.prototype,{preload:function(e,n){var a=this;if(this._soundSupport=null!=Z.field(window,"AudioContext")||null!=Z.field(window,"webkitAudioContext"),this._assetConfig.formats=[],this._soundSupport){var t=window.document.createElement("audio");if(null!=t.canPlayType){var s,i=t.canPlayType("video/mp4");switch(this.isMacOS()?"":t.canPlayType('audio/webm; codecs="vorbis"')){case"":switch(i){case"maybe":case"probably":s=".mp4";break;default:s=null}break;case"maybe":switch(i){case"":case"maybe":s=".webm";break;case"probably":s=".mp4";break;default:s=null}break;case"probably":s=".webm";break;default:s=null}null==s?this._soundSupport=!1:(this._soundSupport=!0,this._assetConfig.formats.push({type:g.Sound,extension:s}))}}var r,t=ao.CURRENT.driver;if(this.webAssemblySupport()){t=t.textureSupport;if(null==t)r=!1;else switch(t._hx_index){case 21:case 23:r=!1;break;default:r=!0}}else r=!1;this._basisSupport=r,this._basisSupport?(this._assetConfig.formats.push({type:g.Image,extension:".basis"}),this._assetConfig.formats.push({type:g.AtlasImage,extension:".basis"}),this._assetConfig.formats.push({type:g.SpineImage,extension:".basis"})):(this._assetConfig.formats.push({type:g.Image,extension:".png"}),this._assetConfig.formats.push({type:g.AtlasImage,extension:".png"}),this._assetConfig.formats.push({type:g.SpineImage,extension:".png"})),this._assetConfig.formats.push({type:g.SpineConfig,extension:".json"}),this.appModel.pixelRatio=window.devicePixelRatio,this.engine.render(this);var l=new h("assets/desc.json",this._assetConfig),o=[];l.onReady=function(){Cc.currentInstance=new Cc(a._fileSystem);for(var t=0,e=b.getClassFields(a._assetContainers.images);t<e.length;){var n=e[t];++t,l.queueItem(n,g.Image)&&o.push("image:"+n)}if(a._soundSupport)for(t=0,e=b.getClassFields(a._assetContainers.sounds);t<e.length;)l.queueItem(e[t++],g.Sound);for(t=0,e=b.getClassFields(Fh);t<e.length;)l.queueItem(e[t++],g.Font);for(t=0,e=b.getClassFields(bh);t<e.length;)l.queueItem(e[t++],g.BitmapFont);for(t=0,e=b.getClassFields(a._assetContainers.atlases);t<e.length;){var s=e[t];++t,l.queueItem(s,g.Atlas)&&o.push("atlas:"+s)}for(t=0,e=b.getClassFields(a._assetContainers.spines);t<e.length;){var i=e[t];++t,l.queueItem(i,g.SpineAtlas)&&o.push("spine:"+i)}for(t=0,e=b.getClassFields(a._assetContainers.gradients);t<e.length;)l.queueItem(e[t++],g.Gradient);for(t=0,e=Z.fields(a._assetContainers.brandingConfigs);t<e.length;)l.queueItem(e[t++],g.Config);for(t=0,e=Z.fields(a._assetContainers.models);t<e.length;)l.queueItem(e[t++],g.Model);for(t=0,e=Z.fields(a._assetContainers.configs);t<e.length;)l.queueItem(e[t++],g.Config);l.load()},l.onComplete=function(){var t=qu.delay(function(){throw tr.thrown("Unable to load assets: "+Ja.string(o))},25e3),e=new qu(100);e.run=function(){0==o.length&&(e.stop(),t.stop(),n())}},l.onProgress=function(t){e(t),a.engine.render(a)},l.onError=function(t){throw tr.thrown(t)},l.addHandler(g.Image,function(e){var t="image/"+e.id,n=m_.extension(e.path),s=t+"."+n;a._fileSystem.add(s,e.data),a.getImageTexture(s,n,t).handle(function(t){Jn.remove(o,"image:"+e.id),a._assetContainers.images[e.id]=Jl.fromTexture(t)})}),l.addHandler(g.Sound,function(t){a._assetContainers.sounds[t.id]=t.data}),l.addHandler(g.Font,function(t){var e=gc.fromBytes("font/"+t.id,t.data).to(bc);if(null==e)throw tr.thrown("Unable to parse font "+t.id);a._assetContainers.fonts.h[t.id]=e}),l.addHandler(g.BitmapFont,function(t){var e=t.id.split(".")[0];a._fileSystem.add("fonts/"+e+".fnt",t.data),a.tryLoadBitmapFont(e).handle(function(t){t&&Jn.remove(o,"fonts:"+e)})}),l.addHandler(g.BitmapFontImage,function(t){var e=t.id.split(".")[0];a._fileSystem.add("fonts/"+e+"."+m_.extension(t.path),t.data),a.tryLoadBitmapFont(e).handle(function(t){t&&Jn.remove(o,"fonts:"+e)})}),l.addHandler(g.Atlas,function(e){a._fileSystem.add("atlas/"+e.id+".atlas",e.data),a.tryLoadAtlas(e.id).handle(function(t){t&&Jn.remove(o,"atlas:"+e.id)})}),l.addHandler(g.AtlasImage,function(e){a._fileSystem.add("atlas/"+e.id+"."+m_.extension(e.path),e.data),a.tryLoadAtlas(e.id).handle(function(t){t&&Jn.remove(o,"atlas:"+e.id)})}),l.addHandler(g.SpineAtlas,function(e){a._fileSystem.add("spine/"+e.id+".atlas",e.data),a.tryLoadSpine(e.id).handle(function(t){t&&Jn.remove(o,"spine:"+e.id)})}),l.addHandler(g.SpineImage,function(e){a._fileSystem.add("spine/"+e.id+"."+m_.extension(e.path),e.data),a.tryLoadSpine(e.id).handle(function(t){t&&Jn.remove(o,"spine:"+e.id)})}),l.addHandler(g.SpineConfig,function(e){a._fileSystem.add("spine/"+e.id+".json",e.data),a.tryLoadSpine(e.id).handle(function(t){t&&Jn.remove(o,"spine:"+e.id)})}),l.addHandler(g.Gradient,function(t){var e=gc.fromBytes(""+t.path,t.data).to(yc);a._assetContainers.gradients[t.id]=e}),l.addHandler(g.Config,function(t){var e=JSON.parse(t.data.toString());"gameconfig"==t.id?a._assetContainers.brandingConfigs[t.id]=e:a._assetContainers.configs[t.id]=e}),l.addHandler(g.Model,function(t){var e=gc.fromBytes(""+t.path,t.data).to(Mc);a._assetContainers.models[t.id]=e})},tryLoadBitmapFont:function(s){var i=this;return new np(function(t){var e=i.getLoadedImagePath(s,"fonts"),n="fonts/"+s+".fnt";return i.areFilesLoaded([n])&&null!=e?(e=new xc(i._fileSystem.get(n)),i._assetContainers.bitmapFonts.h[s]=e,t(!0)):t(!1),null})},tryLoadSpine:function(a){var r=this;return new np(function(e){var n=r.getLoadedImagePath(a,"spine"),s="spine/"+a+".atlas",i="spine/"+a+".json";return r.areFilesLoaded([s,i])&&null!=n?r.getImageTexture(n,m_.extension(n),"spine/"+a).handle(function(t){t=Jl.fromTexture(t),t=r.parseSpine(n,r._fileSystem.get(s).getBytes(),t,r._fileSystem.get(i).getBytes());r._assetContainers.spines[a]=t,r._fileSystem.remove(n),r._fileSystem.remove(i),r._fileSystem.remove(s),e(!0)}):e(!1),null})},tryLoadAtlas:function(i){var a=this;return new np(function(e){var n=a.getLoadedImagePath(i,"atlas"),s="atlas/"+i+".atlas";return a.areFilesLoaded([s])&&null!=n?a.getImageTexture(n,m_.extension(n),"atlas/"+i).handle(function(t){t=Jl.fromTexture(t),t=a.parseAtlas(s,a._fileSystem.get(s).getBytes(),t,1);a._assetContainers.atlases[i]=t,a._fileSystem.remove(n),a._fileSystem.remove(s),e(!0)}):e(!1),null})},areFilesLoaded:function(t){for(var e=0;e<t.length;)if(!this._fileSystem.exists(t[e++]))return!1;return!0},getLoadedImagePath:function(e,n){var s=this,t=wt.find([".basis",".png",".jpg",".jpeg"],function(t){return s._fileSystem.exists(n+"/"+e+t)});return null==t?null:n+"/"+e+t},initFrozenDetection:function(){var e=this,n=null,t=null;null!=window.document.hidden?(n="hidden",t="visibilitychange"):null!=Z.field(window.document,"msHidden")?(n="msHidden",t="msvisibilitychange"):null!=Z.field(window.document,"webkitHidden")&&(n="webkitHidden",t="webkitvisibilitychange");window.document.addEventListener(t,function(){var t=Z.field(window.document,n);null!=e._engine&&t!=e.appModel.frozen&&(t?e._engine.pause():e._engine.resume()),e.appModel.frozen=t,e.appModel.freezeSignal.emit(e.appModel.frozen)},!1),this.appModel.frozen=Z.field(window.document,n),document.getElementById("webgl").addEventListener("webglcontextlost",function(t){t=null!=t.statusMessage?t.statusMessage:"no statusMessage";throw new Error("WebGL context lost, please reload game, "+t)}),this.appModel.frozen=!1},init:function(){tc.fpsLimit=64,this._core=null!=this._core?this._core:new Tl(this.s2d),this._renderer=null!=this._renderer?this._renderer:new Fl(this.s2d),this._sound=null!=this._sound?this._sound:new Dl,this.systems=[this._core,this._renderer,this._sound],this._engine=null!=this._engine?this._engine:new o(this.systems),this._engine.getDelta=function(){return K_.dt},this.mapInjections(),this.get_baseEntity().add(this.sceneModel),this.get_baseEntity().add(this.appModel),this.onResize()},onResize:function(){for(var t=J_.getInstance(),t=(this.appModel.stageSize.x=t.get_width(),this.appModel.stageSize.y=t.get_height(),t.get_height()>t.get_width()?"portrait":"landscape"),e=(this.appModel.orientation=t,0),n=this.sceneModel.scenes;e<n.length;){var s=n[e];++e,s.is3D||s.instance.checkResize()}this.appModel.resizeSignal.emit({width:this.appModel.stageSize.x,height:this.appModel.stageSize.y})},update:function(t){this._engine.tick()},render:function(t){var e;null!=this._engine&&null!=(e=(e=null!=(e=this.get_baseEntity())._compMap?e._compMap.h[gl.BASE_NAME]:null)instanceof gl?e:null)?e.render(W(this,this.renderScenes)):this.renderScenes(t)},renderScenes:function(t){if(null!=this.appModel.customRenderCallback)this.appModel.customRenderCallback(t);else{var e=0;if(null!=this.sceneModel)for(var n=0,s=this.sceneModel.scenes;n<s.length;){var i=s[n];++n,(i.is3D?i.entity.getFromParentsByName(cl.BASE_NAME,cl):((i=i.entity.getFromParentsByName(_l.BASE_NAME,_l)).scene2d.ctx.defaultSmooth=!0,i)).render(t),++e}0==e&&X.prototype.render.call(this,t)}},getImageTexture:function(s,i,t){var a=this;return $d.irreversible(function(e){var n=a._fileSystem.get(s).getBytes();if("basis"==i)mc.getTexture(n.b.bufferValue).then(function(t){e(t)});else try{var t=gc.fromBytes(s,n).toTexture();t.realloc=null,e(t)}catch(t){n=tr.caught(t).unwrap();throw tr.thrown("Unable to decode image "+s+". "+Ja.string(n))}})},mapInjections:function(){this._injector=new B_,this.sceneModel=new dl(this._injector);var t=this._injector.map(H_);t.provider=new P_(this.sevents,t._injector),(t=this._injector.map(E)).provider=new P_(this.sceneModel,t._injector),(t=this._injector.map(Zr)).provider=new P_(this.get_baseEntity(),t._injector),(t=this._injector.map(T)).provider=new P_(this.appModel,t._injector),(t=this._injector.map(E)).provider=new P_(this.sceneModel,t._injector)},parseAtlas:function(R,t,e,V){var n=new N,s=t.toString().split("\n");for(this.premultipliedAlphaAtlases&&(e=uu.applyShader(e,new Sl));0<s.length;)if(""!=ut.trim(s.shift()))for(;0<s.length;){var i=ut.trim(s.shift());if(""==i)break;if(!(1<i.split(": ").length)){for(var a=0,r=0,l=0,o=0,h=0,u=0,_=0,c=0,d=0,Q=null;0<s.length;){var p=ut.trim(s.shift()),f=p.split(": ");if(1==f.length){s.unshift(p);break}var g=f[1];switch(f[0]){case"index":(d=Ja.parseInt(g))<0&&(d=0);break;case"offset":var m=g.split(", "),h=Ja.parseInt(m[0]),u=Ja.parseInt(m[1]);break;case"orig":m=g.split(", "),_=Ja.parseInt(m[0]),c=Ja.parseInt(m[1]);break;case"pad":break;case"rotate":if("true"==g)throw tr.thrown("Rotation not supported in atlas");break;case"size":var A=g.split(", "),l=Ja.parseInt(A[0]),o=Ja.parseInt(A[1]);break;case"split":for(var x=g.split(", "),b=new Array(x.length),y=0,O=x.length;y<O;){var w=y++;b[w]=Ja.parseInt(x[w])}var A=b[0],v=b[1],C=l-(A+v),M=b[2],S=b[3],k=o-(M+S),Q={tl:e.sub(a,r,A,M,h,u),tm:e.sub(a+A,r,C,M,h,u),tr:e.sub(a+A+C,r,v,M,h,u),ml:e.sub(a,r+M,A,k,h,u),mm:e.sub(a+A,r+M,C,k,h,u),mr:e.sub(a+A+C,r+M,v,k,h,u),bl:e.sub(a,r+M+k,A,S,h,u),bm:e.sub(a+A,r+M+k,C,S,h,u),br:e.sub(a+A+C,r+M+k,v,S,h,u)};break;case"xy":C=g.split(", "),a=Ja.parseInt(C[0]),r=Ja.parseInt(C[1])}}var L=e.sub(a,r,l,o,h,u=c-(o+u)),B=n.h[i];null==B&&(n.h[i]=B=[]),B[d]={t:L,width:_,height:c,scale9:Q}}}for(var I=0,T=0,F=[],D=Object.keys(n.h),U=D.length,E=0;E<U;)for(var P=n.h[D[E++]],y=0;y<P.length;){var z=P[y];++y,null!=z?(I=0|Math.max(I,z.width),T=0|Math.max(T,z.height),F.push(z.t)):F.push(null)}return new wl(e,n,{width:I,height:T,frames:F},V)},parseSpine:function(t,e,n,s){e=e.toString(),s=s.toString();return new vl(new hd(new md(new Bd(e,new Il(n)))).readSkeletonData(new Bl(s)))},get_baseEntity:function(){return this._engine.baseEntity},isMacOS:function(t){return null==t&&(t=x.navigator.userAgent),new ct("(Mac OS)","i").match(t)},webAssemblySupport:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1},__class__:Y,__properties__:{get_baseEntity:"get_baseEntity"}}),(e["gasm.heaps.components.Heaps3DComponent"]=j).__name__="gasm.heaps.components.Heaps3DComponent",j.__super__=p,j.prototype=t(p.prototype,{setup:function(){this.object.set_name(this.owner.id)},init:function(){var t=this.owner,t=null!=t._compMap?t._compMap.h[$r.BASE_NAME]:null,t=(this._model=t instanceof $r?t:null,this.object.getBounds()),e=t.xMax-t.xMin;0<e&&this._model.set_dimensions(new al(e,t.yMax-t.yMin,t.zMax-t.zMin)),this._model.set_scale(new al(this.object.get_scaleX(),this.object.get_scaleY(),this.object.get_scaleZ())),this._model.set_pos(new al(0,0,0)),this._model.dirty=!1,p.prototype.init.call(this)},update:function(t){if(p.prototype.update.call(this,t),Ql.update(this.object,t),null!=this._model){if(this._model.dirty){if(this.object.set_x(this._model.get_pos().x+this._model.offset.x),this.object.set_y(this._model.get_pos().y+this._model.offset.y),this.object.set_z(this._model.get_pos().z+this._model.offset.z),this._model.alpha!=this._alpha){this._alpha=this._model.alpha;for(var e=this.object.getMaterials(),n=0;n<e.length;){var s=e[n],i=(++n,s.passes.getShader(Ml));s.blendMode==y.AlphaAdd?(null==i&&(i=new Ml(this._model.alpha),s.passes.addShader(i)),i.alpha__=this._model.alpha):(s.mshader.color__.w=this._model.alpha,null!=i&&s.passes.removeShader(i))}}this.object.set_scaleX(this._model.scale.x),this.object.set_scaleY(this._model.scale.y),this.object.set_scaleZ(this._model.scale.z),this.object.set_visible(this._model.visible)}else this._model.get_pos().x=this.object.get_x(),this._model.get_pos().y=this.object.get_y(),this._model.get_pos().z=this.object.get_z(),this._model.scale.x=this.object.get_scaleX(),this._model.scale.y=this.object.get_scaleY(),this._model.scale.z=this.object.get_scaleZ();this._model.dirty=!1}},dispose:function(){null!=this._model&&(null!=this.owner&&this.owner.remove(this),this._model=null),this.object.remove()},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:j}),(e["gasm.heaps.components.Heaps3DViewportComponent"]=H).__name__="gasm.heaps.components.Heaps3DViewportComponent",H.__super__=p,H.prototype=t(p.prototype,{init:function(){this._appModel=this.owner.getFromParentsByName(T.BASE_NAME,T),this._s3d=this.owner.getFromParentsByName(cl.BASE_NAME,cl).scene3d;var t=this._s3d.camera;t.pos=this._config.cameraPos,this._config.rightHanded&&(t.rightHanded=!0,t.up=new R(0,1,0)),t.target=this._config.cameraTarget,t.zNear=this._config.zNear,t.zFar=this._config.zFar,null!=this._config.fov&&(this.set_fov(this._config.fov),this.set_fovRatio(this._config.fovRatio)),null!=this._config.boundsObject&&(this._s3d.flags&=-3),null!=this._config.orthConfig&&this.setupOrth()},setupOrth:function(){function t(t){var e=Math.min(t.height,t.width)/2,n=-t.width/e/2,s=-t.height/e/2,i=new oo;i.xMin=n,i.yMin=s,i.zMin=-10,i.xMax=n+t.width/e,i.yMax=s+t.height/e,i.zMax=10,a._s3d.camera.orthoBounds=i,(t=a._s3d.camera.target).x=0,t.y=0,t.z=0,t.w=1,t=a._s3d.camera.pos,e=a._s3d.camera.target,n=e.x+0,s=e.y+0,i=e.z+1,null==(e=e.w+1)&&(e=1),null==i&&(i=0),null==s&&(s=0),t.x=n=null==n?0:n,t.y=s,t.z=i,t.w=e}var a=this;this._appModel.resizeSignal.connect(t),t({width:this._appModel.stageSize.x,height:this._appModel.stageSize.y})},set_fov:function(t){return this.fov=t,this._s3d.camera.setFovX(this.fov,this.fovRatio),t},set_fovRatio:function(t){return this.fovRatio=t,this.set_fov(this.fov),t},update:function(t){var e,n,s,i;this._hasBounds||null==this._config.boundsObject||1e20!=(e=this._config.boundsObject.getBounds()).xMin&&(this._s3d.flags|=2,s=((i=this._config.bounds2d).xMax-i.xMin)/this._appModel.pixelRatio,n=((i=this._config.bounds2d).yMax-i.yMin)/this._appModel.pixelRatio,s=Math.min(s*((e.yMax-e.yMin)/s)*this._config.boundsMult.x,n*((e.xMax-e.xMin)/n)*this._config.boundsMult.y),this._scale!=s&&((i=this._s3d).scaleX=s,i.flags|=1,i.scaleY=s,i.flags|=1,i.scaleZ=s,i.flags|=1,i.flags|=1,this._s3d.camera.update(),this._scale=s,null!=this.fov)&&this.set_fovRatio(s),this._hasBounds=!0)},get_baseName:function(){return"gasm.heaps.components.Heaps3DViewportComponent"},__class__:H,__properties__:t(p.prototype.__properties__,{set_fovRatio:"set_fovRatio",set_fov:"set_fov"})}),(e["gasm.heaps.components.Heaps3DViewportConfig"]=K).__name__="gasm.heaps.components.Heaps3DViewportConfig",K.prototype={__class__:K},(e["gasm.heaps.components.OrthConfig"]=J).__name__="gasm.heaps.components.OrthConfig",(e["gasm.heaps.components.HeapsCameraFitComponent"]=$).__name__="gasm.heaps.components.HeapsCameraFitComponent",$.__super__=p,$.prototype=t(p.prototype,{init:function(){var e=this,t=this.owner,t=null!=t._compMap?t._compMap.h[j.BASE_NAME]:null;this._targetComponent=t instanceof j?t:null,this._appModel=this.owner.getFromParentsByName(T.BASE_NAME,T),this._s3d=this.owner.getFromParentsByName(cl.BASE_NAME,cl).scene3d,this._startPos=this._s3d.camera.pos,this.duration=this._config.duration,this._appModel.resizeSignal.connect(function(t){e._forceFit=!0}),p.prototype.init.call(this)},update:function(t){var e,n,s,i;p.prototype.update.call(this,t),this.get_enabled()&&null!=this._targetComponent?1e20<=(e=this._targetComponent.object.getBounds()).xMin||(s={x:ao.CURRENT.width,y:ao.CURRENT.height},n=this._oldObjBounds,i=null==this._oldStageSize||s.x!=this._oldStageSize.x||s.y!=this._oldStageSize.y,this._oldStageSize=s,this._oldObjBounds=e,i||null==n||e.xMax!=n.xMax||e.xMin!=n.xMin||e.yMax!=n.yMax||e.yMin!=n.yMin||e.yMax!=n.yMax||this._forceFit?(this._shouldFit=!0,this._forceFit=!1):(this._shouldFit&&(this._shouldFit=!1,this._s3d.syncOnly(0),this._time=0,this._startPos=this._s3d.camera.pos,this._targetPos=this.calculateObjectFit(e)),this._time+=t,s=0<this.duration?Math.min(1,this._time/this.duration):1,this._s3d.camera.pos.x=this._startPos.x*(1-s)+this._targetPos.x*s,this._s3d.camera.pos.y=this._startPos.y*(1-s)+this._targetPos.y*s,this._s3d.camera.pos.z=this._startPos.z*(1-s)+this._targetPos.z*s,1<=s&&(null!=this._onFitCallback&&(i=this._onFitCallback,this._onFitCallback(),this._onFitCallback==i)&&(this._onFitCallback=null),this._startPos=this._s3d.camera.pos))):this._time=0},calculateTargetZ:function(t,e,n,s){return n+(e-t)/Math.tan(Math.atan(t/Math.abs(n)))*(0<n-s?1:-1)},calculateObjectFit:function(t){for(var e=this._targetComponent.object,n=ao.CURRENT,s=n.width,n=n.height,i=(o=this._s3d.camera.pos).x,a=o.y,r=o.z,l=o.w,i=i=null==i?0:i,a=a=null==a?0:a,r=r=null==r?0:r,l=l=null==l?1:l,o=(this._s3d.camera.pos.x=0,this._s3d.camera.pos.y=0,this._s3d.camera.target),h=this._s3d.camera.pos,h=(o.x=h.x,o.y=h.y,o.z=h.z,o.w=h.w,this._s3d.camera.target.z=-this._s3d.camera.zFar,this._s3d.camera.update(),null!=this._config.bounds?this._config.bounds:t),t=this._s3d.camera.project(e.get_x(),e.get_y(),e.get_z(),s,n).z,s=this._s3d.camera.unproject(1,1,t),n=this._s3d.camera.unproject(-1,-1,t),u=[],t=this._config.margins,_=(u.push(this.calculateTargetZ(s.x,h.xMax+t.right,this._s3d.camera.pos.z,e.get_z())),u.push(this.calculateTargetZ(Math.abs(n.x),Math.abs(h.xMin)+t.left,this._s3d.camera.pos.z,e.get_z())),u.push(this.calculateTargetZ(s.y,h.yMax+t.top,this._s3d.camera.pos.z,e.get_z())),u.push(this.calculateTargetZ(Math.abs(n.y),Math.abs(h.yMin)+t.bottom,this._s3d.camera.pos.z,e.get_z())),null),c=null,d=0;d<u.length;){var p=u[d];++d,(null==_||_<p)&&(_=p),(null==c||p<c)&&(c=p)}var o=this._s3d.camera.pos,s=new R(o.x,o.y,o.z,o.w);return s.z=this._config.crop?c:_,s.x=t.right-t.left,s.y=t.top-t.bottom,(o=this._s3d.camera.pos).x=i,o.y=a,o.z=r,o.w=l,this._s3d.camera.update(),s},get_enabled:function(){return this._enabled},set_enabled:function(t){return 1==t&&(this._forceFit=!0),this._enabled=t},get_baseName:function(){return"gasm.heaps.components.HeapsCameraFitComponent"},__class__:$}),(e["gasm.heaps.components.CameraFitMargins"]=tt).__name__="gasm.heaps.components.CameraFitMargins",tt.prototype={__class__:tt},(e["gasm.heaps.components.CameraFitConfig"]=et).__name__="gasm.heaps.components.CameraFitConfig",et.prototype={__class__:et},(e["gasm.heaps.components.HeapsObjectFitComponent"]=nt).__name__="gasm.heaps.components.HeapsObjectFitComponent",nt.__super__=j,nt.prototype=t(j.prototype,{init:function(){var t=this.owner.getFromParentsByName(cl.BASE_NAME,cl);this._object=this.object.object,this._camera=t.scene3d.camera,this._lastObjectScale=new R(this._object.scaleX,this._object.scaleY,this._object.scaleZ),j.prototype.init.call(this)},update:function(t){var e,n,s,i,a,r,l,o;j.prototype.update.call(this,t),!this.enable||null==this._object||this._tweening||(t=ao.CURRENT,(r=this._object).scaleX=1,r.flags|=1,r.scaleY=1,r.flags|=1,r.scaleZ=1,r.flags|=1,r.flags|=1,l=null!=this._initBounds?this._initBounds:null!=this._config.getBounds||null!=this._config.bounds?(r=null!=this._config.getBounds?this._config.getBounds():this._config.bounds,(o=new oo).xMin=r.xMin,o.xMax=r.xMax,o.yMin=r.yMin,o.yMax=r.yMax,o.zMin=r.zMin,o.zMax=r.zMax,(a=o).transform(this._object.getAbsPos()),a):(r=this._object.getBounds(),(o=new oo).xMin=r.xMin,o.xMax=r.xMax,o.yMin=r.yMin,o.yMax=r.yMax,o.zMin=r.zMin,o.zMax=r.zMax,o),Math.abs(l.zMax)>=this._camera.zFar)||(l=this._camera.project(0,0,l.zMax,t.width,t.height,!1).z,t=this._camera.unproject(1,1,l),l=this._camera.unproject(-1,-1,l),e=Math.abs(t.x-l.x),s=Math.abs(l.y-t.y),n=t.y-this.get_margins().top*s,s=l.y+this.get_margins().bottom*s,t=t.x-this.get_margins().right*e,l=l.x+this.get_margins().left*e,(r=this._object).x=l+.5*(t-l),r.flags|=1,(r=this._object).y=s+.5*(n-s),r.flags|=1,e=null!=this._config.getBounds||null!=this._config.bounds?(r=null!=this._config.getBounds?this._config.getBounds():this._config.bounds,(o=new oo).xMin=r.xMin,o.xMax=r.xMax,o.yMin=r.yMin,o.yMax=r.yMax,o.zMin=r.zMin,o.zMax=r.zMax,(a=o).transform(this._object.getAbsPos()),a):(r=this._object.getBounds(),(o=new oo).xMin=r.xMin,o.xMax=r.xMax,o.yMin=r.yMin,o.yMax=r.yMax,o.zMin=r.zMin,o.zMax=r.zMax,o),a=Math.abs((t-this._object.x)/(e.xMax-this._object.x)),t=Math.abs((this._object.x-l)/(this._object.x-e.xMin)),l=this.get_crop()?Math.max(a,t):Math.min(a,t),a=Math.abs((n-this._object.y)/(e.yMax-this._object.y)),t=Math.abs((this._object.y-s)/(this._object.y-e.yMin)),n=this.get_crop()?Math.max(a,t):Math.min(a,t),s=this.get_crop()?Math.max(l,n):Math.min(l,n),null!=this._config.maxScale&&(s=Math.min(s,this._config.maxScale),l=Math.min(l,this._config.maxScale),n=Math.min(n,this._config.maxScale)),a=this._config.keepRatio?(r=this._targetScale,i=s):(r=this._targetScale,i=l,n),null==(t=this._object.scaleZ)&&(t=0),null==a&&(a=0),r.x=i=null==i?0:i,r.y=a,r.z=t,r.w=1,this._targetScale.z=this._config.scaleZ?s:this._object.scaleZ,r=this._object,l=this._config.speed,r.scaleX=this._lastObjectScale.x*(1-l)+this._targetScale.x*l,r.flags|=1,r=this._object,l=this._config.speed,r.scaleY=this._lastObjectScale.y*(1-l)+this._targetScale.y*l,r.flags|=1,r=this._object,l=this._config.speed,r.scaleZ=this._lastObjectScale.z*(1-l)+this._targetScale.z*l,r.flags|=1,this._lastObjectScale=new R(this._object.scaleX,this._object.scaleY,this._object.scaleZ),null==this._initBounds&&((o=new oo).xMin=e.xMin,o.xMax=e.xMax,o.yMin=e.yMin,o.yMax=e.yMax,o.zMin=e.zMin,o.zMax=e.zMax,this._initBounds=o),null!=this._scheduledTweens&&this.inited&&(this.tween(this._scheduledTweens),this._scheduledTweens=null))},tween:function(t){var e=this;if(this.inited){this._tweenDone=new ep,this._tweening=!0;for(var n=0;n<t.length;){var s,i,a,r=t[n];++n,2==r._hx_index&&(r=r.v,a=null!=this.get_margins()?this.get_margins().left:0,s=null!=this.get_margins()?this.get_margins().top:0,(i=r.from).x=Xl.mult(i.x,this.get_scale().x),(i=r.from).y=Xl.mult(i.y,this.get_scale().y),(i=r.from).z=Xl.mult(i.z,this.get_scale().x),(i=r.to).x=Xl.mult(i.x,this.get_scale().x+a),(i=r.to).y=Xl.mult(i.y,this.get_scale().y+s),(a=r.to).z=Xl.mult(a.z,this.get_scale().z))}Ql.tween(this.object,t).handle(function(){e._tweening=!1,e._tweenDone.trigger(null)})}else this._scheduledTweens=t,this._tweenDone=new ep;return this._tweenDone},get_margins:function(){return this.margins},set_margins:function(t){return this.margins=t},get_crop:function(){return this.crop},set_crop:function(t){return this.crop=t},get_scale:function(){return null==this._object?new R:new R(this._object.scaleX,this._object.scaleY,this._object.scaleZ)},set_bounds:function(t){return this.bounds=t},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:nt,__properties__:t(j.prototype.__properties__,{set_crop:"set_crop",get_crop:"get_crop",get_scale:"get_scale",set_bounds:"set_bounds",set_margins:"set_margins",get_margins:"get_margins"})}),(e["gasm.heaps.components.ObjectFitMargins"]=st).__name__="gasm.heaps.components.ObjectFitMargins",st.prototype={__class__:st},(e["gasm.heaps.components.ObjectFitConfig"]=it).__name__="gasm.heaps.components.ObjectFitConfig",it.prototype={__class__:it},(e["gasm.heaps.components.HeapsSceneBase"]=at).__name__="gasm.heaps.components.HeapsSceneBase",at.__super__=p,at.prototype=t(p.prototype,{get_baseName:function(){return"gasm.heaps.components.HeapsSceneBase"},__class__:at}),function(t){this.componentType=el.Model,this.scene2d=t,this._engine=ao.CURRENT,at.call(this,t)}),cl=((e["gasm.heaps.components.HeapsScene2DComponent"]=_l).__name__="gasm.heaps.components.HeapsScene2DComponent",_l.__super__=at,_l.prototype=t(at.prototype,{render:function(t){var e,n=this;null!=this._texturePass?(null==this._size||this._engine.width!=this._size.x||this._engine.height!=this._size.y?(this._postProcessingTexture=new A(this._engine.width,this._engine.height),this._size={x:this._engine.width,y:this._engine.height}):this._postProcessingTexture.clear(0,0),this._engine.pushTarget(this._postProcessingTexture),this.scene2d.render(this._engine),this._engine.popTarget(),this._texturePass.pass.getShader(Ph).texture__=this._postProcessingTexture,this._texturePass.render()):null!=(e=(e=null!=(e=this.owner)._compMap?e._compMap.h[gl.BASE_NAME]:null)instanceof gl?e:null)?e.render(function(t){n.scene2d.render(t)}):this.scene2d.render(t)},get_baseName:function(){return"gasm.heaps.components.HeapsSceneBase"},__class__:_l}),function(t){this.componentType=el.Model,this.scene3d=t,this._engine=ao.CURRENT,at.call(this,t)}),dl=((e["gasm.heaps.components.HeapsScene3DComponent"]=cl).__name__="gasm.heaps.components.HeapsScene3DComponent",cl.__super__=at,cl.prototype=t(at.prototype,{render:function(t){var e,n=this;null!=this._texturePass?(null==this._postProcessingTexture?this._postProcessingTexture=new A(this._engine.width,this._engine.height):this._postProcessingTexture.width==this._engine.width&&this._postProcessingTexture.height==this._engine.height||this._postProcessingTexture.resize(this._engine.width,this._engine.height),this._postProcessingTexture.clear(0,0),this._engine.pushTarget(this._postProcessingTexture),this.scene3d.render(this._engine),this._engine.popTarget(),this._texturePass.pass.getShader(Ph).texture__=this._postProcessingTexture,this._texturePass.render()):null!=(e=(e=null!=(e=this.owner)._compMap?e._compMap.h[gl.BASE_NAME]:null)instanceof gl?e:null)?e.render(function(t){n.scene3d.render(t)}):this.scene3d.render(t)},get_baseName:function(){return"gasm.heaps.components.HeapsSceneBase"},__class__:cl}),function(t){this._injector=t,E.call(this)}),pl=((e["gasm.heaps.components.HeapsSceneModelComponent"]=dl).__name__="gasm.heaps.components.HeapsSceneModelComponent",dl.__super__=E,dl.prototype=t(E.prototype,{init:function(){this._sceneEvents=this._injector.getInstance(H_)},hideScene:function(e){var t=wt.find(this.scenes,function(t){return t.name==e});t.is3D?t.instance.flags&=-3:t.instance.set_visible(!1)},showScene:function(e){var t=wt.find(this.scenes,function(t){return t.name==e});t.is3D?t.instance.flags|=2:t.instance.set_visible(!0)},addEntity:function(t,e){var n,s=t.entity,i=(t.is3D?(i=n=new Wo,s.add(new cl(i)),s.add(new j(i))):((i=n=new ql).ctx.defaultSmooth=!0,s.add(new _l(i)),s.add(new pl(i))),t.instance=n,t.interactive&&this._sceneEvents.addScene(er.__cast(n,Zl),t.layerIndex),this._injector.map(Zr,t.name));return i.provider=new P_(s,i._injector),this.sceneMap.h[t.name]=n,e.addChild(s),s.add(new gl(new yl(null))),s},removeScene:function(t){this._injector.unmap(Zr,t),E.prototype.removeScene.call(this,t)},get_baseName:function(){return"gasm.core.components.SceneModelComponent"},__class__:dl}),function(t,e,n){null==n&&(n=!0),null==e&&(e=!1),p.call(this),null==t&&(t=new Pl),e&&(this._interactive=new Wl(0,0,t),this._interactive.propagateEvents=!0),this.sprite=t,this._resizeInteractive=n,this.componentType=el.Graphics}),fl=((e["gasm.heaps.components.HeapsSpriteComponent"]=pl).__name__="gasm.heaps.components.HeapsSpriteComponent",pl.__super__=p,pl.prototype=t(p.prototype,{setup:function(){this.sprite.name=this.owner.id},init:function(){var t=this.owner,e=null!=t._compMap?t._compMap.h[Kr.BASE_NAME]:null;this._model=e instanceof Kr?e:null,this._appModel=this.owner.getFromParentsByName(T.BASE_NAME,T);var n=(t=this.sprite.getSize()).xMax-t.xMin,s=(t=this.sprite.getSize()).yMax-t.yMin;0<n&&(this._model.set_width(n),this._model.set_height(s)),this._stage=J_.getInstance(),null!=this._interactive&&null!=this._interactive&&(this._interactive.onClick=W(this,this.onClick),this._interactive.onPush=W(this,this.onDown),this._interactive.onRelease=W(this,this.onUp),this._interactive.onOver=W(this,this.onOver),this._interactive.onOut=W(this,this.onOut),this._interactive.onMove=W(this,this.onMove),this.owner.getFromRootByName(Kr.BASE_NAME,Kr).addHandler(nl.UP,W(this,this.onStageUp)),((e=null!=(t=this.owner)._compMap?t._compMap.h[Kr.BASE_NAME]:null)instanceof Kr?e:null).addHandler(nl.UP,W(this,this.onStageUp))),this._model.set_x(this.sprite.x),this._model.set_y(this.sprite.y),this._model.set_xScale(this.sprite.scaleX),this._model.set_yScale(this.sprite.scaleY),this._model.set_visible(this.sprite.visible)},update:function(t){var e,n;null!=this._model&&(this._model.dirty?((n=this.sprite).posChanged=!0,n.x=this._model.x+this._model.offsetX,(n=this.sprite).posChanged=!0,n.y=this._model.y+this._model.offsetY,this.sprite.alpha=this._model.alpha,n=this.sprite,e=this._model.get_xScale(),n.posChanged=!0,n.scaleX=e,n=this.sprite,e=this._model.get_yScale(),n.posChanged=!0,n.scaleY=e,this.sprite.set_visible(this._model.get_visible()),null!=this._interactive&&this._resizeInteractive&&(n=this.sprite.getBounds(),this._interactive.width=n.xMax-n.xMin,this._interactive.height=n.yMax-n.yMin)):(this._model.set_x(this.sprite.x-this._model.offsetX),this._model.set_y(this.sprite.y-this._model.offsetY),this._model.set_xScale(this.sprite.scaleX),this._model.set_yScale(this.sprite.scaleY),this._model.set_visible(this.sprite.visible)),this._model.stageMouseX=this._stage.get_mouseX(),this._model.stageMouseY=this._stage.get_mouseY(),this._model.dirty=!1),p.prototype.update.call(this,t)},dispose:function(){null!=this._interactive&&(this._interactive.onClick=null,this._interactive.onPush=null,this._interactive.onRelease=null,this._interactive.onOver=null,this._interactive.onOut=null,this._interactive.onMove=null,this.owner.getFromRootByName(Kr.BASE_NAME,Kr).removeHandler(nl.UP,W(this,this.onStageUp)),null!=this._model)&&this._model.removeHandler(nl.MOVE,W(this,this.onDrag)),null!=this._model&&(null!=this.owner&&this.owner.remove(this),this._model=null),null!=this.sprite.parent&&this.sprite.parent.removeChild(this.sprite),this.stopDrag(),this.sprite.removeChildren()},onClick:function(t){this._model.triggerEvent(nl.PRESS,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onDown:function(t){this._model.triggerEvent(nl.DOWN,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner),this.startDrag()},onUp:function(t){this._model.triggerEvent(nl.UP,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner),this.stopDrag()},onStageUp:function(t){this.stopDrag()},onOver:function(t){this._model.triggerEvent(nl.OVER,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onOut:function(t){this._model.triggerEvent(nl.OUT,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onMove:function(t){var e=this.sprite.globalToLocal(new El(this._stage.get_mouseX(),this._stage.get_mouseY()));this._model.mouseX=e.x,this._model.mouseY=e.y,this._model.stageMouseX=this._stage.get_mouseX(),this._model.stageMouseY=this._stage.get_mouseY(),this._model.triggerEvent(nl.MOVE,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onDrag:function(t){this._model.triggerEvent(nl.DRAG,{x:this._appModel.stageMouseX,y:this._appModel.stageMouseY},this.owner)},stopDrag:function(){null!=this._model&&this._model.removeHandler(nl.MOVE,W(this,this.onDrag))},startDrag:function(){this._model.addHandler(nl.MOVE,W(this,this.onDrag))},get_baseName:function(){return"gasm.heaps.components.HeapsSpriteComponent"},__class__:pl}),(e["gasm.heaps.components.actor.render.PostProcessingChainComponent"]=rt).__name__="gasm.heaps.components.actor.render.PostProcessingChainComponent",rt.__super__=p,rt.prototype=t(p.prototype,{init:function(){var t=this.owner,t=null!=t._compMap?t._compMap.h[gl.BASE_NAME]:null;this._processor=t instanceof gl?t:null,this.chainId=this.setupChain()},onEnabled:function(){},onDisabled:function(){},dispose:function(){null!=this._processor&&this._processor.destroyChain(this.chainId)},setupChain:function(){throw tr.thrown("PostProcessingChainComponent.setupChain() override in subclass")},get_baseName:function(){return"gasm.heaps.components.actor.render.PostProcessingChainComponent"},__class__:rt}),(e["haxe.IMap"]=ot).__name__="haxe.IMap",ot.__isInterface__=!0,ot.prototype={__class__:ot},function(){this.h={}}),gl=((e["haxe.ds.IntMap"]=fl).__name__="haxe.ds.IntMap",fl.__interfaces__=[ot],fl.prototype={set:function(t,e){this.h[t]=e},get:function(t){return this.h[t]},remove:function(t){return!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},keys:function(){var t,e=[];for(t in this.h)this.h.hasOwnProperty(t)&&e.push(+t);return new A_(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var t=this.it.next();return this.ref[t]}}},__class__:fl},function(t){if(this._dt=0,this._defaultChain=null,this._baseTexture=null,this._lastUpdatedChainComponent=null,this._activeChainComponent=null,p.call(this),this._config=t,this.componentType=el.Actor,null!=this._config.defaultChain){for(var e=[],n=0,s=this._config.defaultChain;n<s.length;)e.push(this.createPass(s[n++]));this._defaultChain=this.createChain(e)}else this._defaultChain=this.createDefaultChain()}),ml=((e["gasm.heaps.components.actor.render.PostProcessingComponent"]=gl).__name__="gasm.heaps.components.actor.render.PostProcessingComponent",gl.__super__=p,gl.prototype=t(p.prototype,{update:function(t){if(this._dt=t,null!=this._baseTexture){t=this.owner,t=null!=t._compMap?t._compMap.h[cl.BASE_NAME]:null,t=t instanceof cl?t:null;if(null!=t)for(var e=t.scene3d.getMaterials(),n=0;n<e.length;){var s=e[n];++n,1==s.blendMode._hx_index&&(s.passes.set_blendSrc($a.SrcAlpha),s.passes.set_blendDst($a.OneMinusSrcAlpha),s.passes.set_blendAlphaSrc($a.OneMinusDstAlpha),s.passes.set_blendAlphaDst($a.One))}}},createPass:function(t){t=new xl(t);return gl._passes.h[gl._id]=t,gl._id++},createChain:function(t){return gl._chains.h[gl._id]=t,gl._id++},destroyChain:function(t){var e=gl._chains.h[t];if(null!=e){gl._chains.remove(t);for(var n=0;n<e.length;){var s=e[n];++n,gl._passes.h[s].dispose(),gl._passes.remove(s)}}},render:function(t){for(var e=ao.CURRENT,n=e.width,s=e.height,i=(null==this._baseTexture?(this._baseTexture=new A(n,s,[Mo.Target]),this._baseTexture.depthBuffer=new Bo(n,s,ko.Depth24Stencil8)):this._baseTexture.width==n&&this._baseTexture.height==s||(this._baseTexture.depthBuffer.dispose(),this._baseTexture.dispose(),this._baseTexture=new A(n,s,[Mo.Target]),this._baseTexture.depthBuffer=new Bo(n,s,ko.Depth24Stencil8)),this.updateAndGetChain(e,this._dt)),a=(e.pushTarget(this._baseTexture),e.clear(0,1,0),t(e),e.popTarget(),0),r=i.length;a<r;){var l=a++,o=gl._passes.h[i[l]],l=l==i.length-1;0==l&&(1<o.targets.length?e.pushTargets(o.targets):e.pushTarget(o.targets[0]),e.clear(0)),o.pass.render(),0==l&&e.popTarget()}},resetChain:function(t){for(var e=gl._chains.h[t],n=0;n<e.length;)gl._passes.h[e[n++]].reset()},updateAndGetChain:function(e,n){var l=this,t=this.owner,t=null!=t._compMap?t._compMap.h[rt.BASE_NAME]:null,s=t instanceof rt?t:null;(s=null==s||s.inited?s:this._activeChainComponent)!=this._activeChainComponent&&(null!=s&&(this.resetChain(s.chainId),s.onEnabled()),null!=this._activeChainComponent)&&this._activeChainComponent.onDisabled(),this._activeChainComponent=s;for(var s=null!=(t=this._activeChainComponent)&&l._lastUpdatedChainComponent==t&&gl._chains.h.hasOwnProperty(t.chainId)?this._activeChainComponent.chainId:this._defaultChain,o=gl._chains.h[s],i=(this._lastUpdatedChainComponent=this._activeChainComponent,new Array(o.length)),a=0,r=o.length;a<r;)i[u=a++]=gl._passes.h[o[u]];Xd.each(i,function(t){t.update(e,n)});for(var h=new Array(i.length),a=0,r=i.length;a<r;){var u,_=i[u=a++];h[u]={textureInput:_.config.textureInput,shader:_.shader}}return Xd.eachi(h,function(t,e){for(var n=t.textureInput,s=n.keys();s.hasNext();){var i,a=s.next(),r=n.get(a);switch(r._hx_index){case 0:i=l._baseTexture;break;case 1:i=0==e?l._baseTexture:gl._passes.h[o[e-1]].targets[r.renderTarget];break;case 2:i=gl._passes.h[r.passId].targets[r.renderTarget];break;case 3:i=l.getNoiseTexture(r.size);break;case 4:i=r.t}switch(a._hx_index){case 0:t.shader.colorMap__=i;break;case 1:t.shader.colorMap2__=i;break;case 2:t.shader.normalMap__=i;break;case 3:t.shader.depthMap__=i;break;case 4:t.shader.noiseMap__=i}}}),o},createDefaultChain:function(){var t=new kl,e=new s_;return e.set(Al.COLOR,ml.Base),this.createChain([this.createPass(new bl(t,e,null,null,null,null,null))])},getNoiseTexture:function(t){var e;return gl._noiseTextures.h.hasOwnProperty(t)?gl._noiseTextures.h[t]:((e=A.genNoise(t)).set_wrap(vo.Repeat),gl._noiseTextures.h[t]=e)},get_baseName:function(){return"gasm.heaps.components.actor.render.PostProcessingComponent"},__class__:gl}),d["gasm.heaps.components.actor.render.TextureSource"]={__ename__:!0,__constructs__:null,Base:{_hx_name:"Base",_hx_index:0,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:l},LastPass:((c=function(t){return{_hx_index:1,renderTarget:t,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:l}})._hx_name="LastPass",c.__params__=["renderTarget"],c),FromPass:((c=function(t,e){return{_hx_index:2,passId:t,renderTarget:e,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:l}})._hx_name="FromPass",c.__params__=["passId","renderTarget"],c),Noise:((c=function(t){return{_hx_index:3,size:t,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:l}})._hx_name="Noise",c.__params__=["size"],c),External:((c=function(t){return{_hx_index:4,t:t,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:l}})._hx_name="External",c.__params__=["t"],c)}),Al=(ml.__constructs__=[ml.Base,ml.LastPass,ml.FromPass,ml.Noise,ml.External],ml.__empty_constructs__=[ml.Base],d["gasm.heaps.components.actor.render.TextureInput"]={__ename__:!0,__constructs__:null,COLOR:{_hx_name:"COLOR",_hx_index:0,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:l},COLOR2:{_hx_name:"COLOR2",_hx_index:1,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:l},NORMAL:{_hx_name:"NORMAL",_hx_index:2,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:l},DEPTH:{_hx_name:"DEPTH",_hx_index:3,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:l},NOISE:{_hx_name:"NOISE",_hx_index:4,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:l}}),xl=(Al.__constructs__=[Al.COLOR,Al.COLOR2,Al.NORMAL,Al.DEPTH,Al.NOISE],Al.__empty_constructs__=[Al.COLOR,Al.COLOR2,Al.NORMAL,Al.DEPTH,Al.NOISE],function(t){this.targets=[],this.config=t,this.pass=new Do(t.shader),this.pass.pass.setBlendMode(t.blendMode),this.shader=t.shader;for(var e=0,n=t.targets;e<n;)++e,this.targets.push(null);this.reset()}),bl=((e["gasm.heaps.components.actor.render.PostProcessingPass"]=xl).__name__="gasm.heaps.components.actor.render.PostProcessingPass",xl.prototype={reset:function(){this.shader.time__=0},dispose:function(){null!=this.pass&&this.pass.dispose()},update:function(t,e){for(var n=t.width*this.config.scaleX|0,s=t.width*this.config.scaleY|0,i=(this.shader.time__+=e*this.config.speed,this.shader.resolution__.x=t.width,this.shader.resolution__.y=t.height,0),a=this.config.targets;i<a;){var r=i++;null==this.targets[r]?this.targets[r]=new A(n,s,[Mo.Target]):this.targets[r].width==n&&this.targets[r].height==s||this.targets[r].resize(n,s)}},__class__:xl},function(t,e,n,s,i,a,r){this.speed=1,this.scaleY=1,this.scaleX=1,this.targets=1,this.blendMode=y.AlphaAdd,this.shader=t,this.textureInput=e,null!=n&&(this.blendMode=n),null!=s&&(this.targets=s),null!=i&&(this.scaleX=i),null!=a&&(this.scaleY=a),null!=r&&(this.speed=r)}),yl=((e["gasm.heaps.components.actor.render.PostProcessingPassConfig"]=bl).__name__="gasm.heaps.components.actor.render.PostProcessingPassConfig",bl.prototype={__class__:bl},function(t){(this.defaultChain=null)!=t&&(this.defaultChain=t)}),wl=((e["gasm.heaps.components.actor.render.PostProcessingComponentConfig"]=yl).__name__="gasm.heaps.components.actor.render.PostProcessingComponentConfig",yl.prototype={__class__:yl},function(t,e,n,s){this.scale=1,this.tile=t,this.contents=e,this.animation=n,null!=s&&(this.scale=s)}),vl=((e["gasm.heaps.data.Atlas"]=wl).__name__="gasm.heaps.data.Atlas",wl.prototype={__class__:wl},function(t){this.skeletonData=t}),Cl=((e["gasm.heaps.data.Spine"]=vl).__name__="gasm.heaps.data.Spine",vl.prototype={__class__:vl},(e["hxd.fs.FileSystem"]=ht).__name__="hxd.fs.FileSystem",ht.__isInterface__=!0,ht.prototype={__class__:ht},function(){this.paths=new N}),Ml=((e["gasm.heaps.fs.VirtualFileSystem"]=Cl).__name__="gasm.heaps.fs.VirtualFileSystem",Cl.__interfaces__=[ht],Cl.prototype={add:function(t,e){var n=this.paths,e=new hc(t,e);n.h[t]=e},remove:function(t){var e;Object.prototype.hasOwnProperty.call(this.paths.h,t)&&(e=this.paths,Object.prototype.hasOwnProperty.call(e.h,t))&&delete e.h[t]},exists:function(t){return Object.prototype.hasOwnProperty.call(this.paths.h,t)},get:function(t){var e=this.paths.h[t];if(null==e)throw tr.thrown(new dc(t));return e},__class__:Cl},(e["hxsl.Shader"]=f).__name__="hxsl.Shader",f.prototype={initialize:function(){if(this.constModified=!0,null==this.shader){var t=er.getClass(this);if(this.shader=t._SHADER,null==this.shader){for(var e=t;null!=e&&null==e.SRC;)e=e.__super__;if(null==e)throw tr.thrown(t.__name__+" has no shader source");this.shader=e._SHADER,null==this.shader&&(this.shader=new $c(e.SRC),e._SHADER=this.shader)}}},setPriority:function(t){this.priority=t},getParamValue:function(t){throw tr.thrown("assert")},getParamFloatValue:function(t){throw tr.thrown("assert")},updateConstants:function(t){throw tr.thrown("assert")},updateConstantsFinal:function(t){for(var e=this.shader.consts;null!=e;){if(0==e.globalId);else{var n=t.map.h[e.globalId],s=e.v.type;switch(s._hx_index){case 1:var i=n;if(i>>>e.bits!=0)throw tr.thrown("Constant "+e.v.name+" is outside range ("+i+" > "+((1<<e.bits)-1)+")");this.constBits|=i<<e.pos;break;case 2:n&&(this.constBits|=1<<e.pos);break;case 17:if(null==n){e=e.next;continue}var a=n,r=a.channel;if(null==a.texture)r=Qc.Unknown;else if(null==r||r==Qc.Unknown)switch(s.size){case 1:if(a.texture.format!=A.nativeFormat)throw tr.thrown("Constant "+e.v.name+" does not define channel select value");r=Qc.PackedFloat;break;case 3:if(a.texture.format!=A.nativeFormat)throw tr.thrown("Constant "+e.v.name+" does not define channel select value");r=Qc.PackedNormal;break;default:throw tr.thrown("Constant "+e.v.name+" does not define channel select value")}this.constBits|=(t.allocChannelID(a.texture)<<3|r._hx_index)<<e.pos;break;default:throw tr.thrown("assert")}}e=e.next}var l=this.shader,o=this.constBits,h=l.instanceCache.h[o];this.instance=null==h?l.makeInstance(o):h},toString:function(){return er.getClass(this).__name__},__class__:f},function(t){this.alpha__=0,f.call(this),this.alpha__=t}),Sl=((e["gasm.heaps.shaders.Alpha"]=Ml).__name__="gasm.heaps.shaders.Alpha",Ml._SHADER=null,Ml.__super__=f,Ml.prototype=t(f.prototype,{get_alpha:function(){return this.alpha__},set_alpha:function(t){return this.alpha__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.alpha__:null},getParamFloatValue:function(t){return 0==t?this.alpha__:0},__class__:Ml,__properties__:{set_alpha:"set_alpha",get_alpha:"get_alpha"}}),(e["h3d.shader.ScreenShader"]=n).__name__="h3d.shader.ScreenShader",n._SHADER=null,n.__super__=f,n.prototype=t(f.prototype,{get_flipY:function(){return this.flipY__},set_flipY:function(t){return this.flipY__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.flipY__:null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:n,__properties__:{set_flipY:"set_flipY",get_flipY:"get_flipY"}}),function(){n.call(this)}),kl=((e["gasm.heaps.shaders.PostMultiplyAlphaScreen"]=Sl).__name__="gasm.heaps.shaders.PostMultiplyAlphaScreen",Sl._SHADER=null,Sl.__super__=n,Sl.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Sl,__properties__:t(n.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(){this.time__=0,this.resolution__=new R,n.call(this)}),Bl=((e["gasm.heaps.shaders.PostProcessingShaderBase"]=kl).__name__="gasm.heaps.shaders.PostProcessingShaderBase",kl._SHADER=null,kl.__super__=n,kl.prototype=t(n.prototype,{get_colorMap:function(){return this.colorMap__},set_colorMap:function(t){return this.colorMap__=t},get_colorMap2:function(){return this.colorMap2__},set_colorMap2:function(t){return this.colorMap2__=t},get_normalMap:function(){return this.normalMap__},set_normalMap:function(t){return this.normalMap__=t},get_depthMap:function(){return this.depthMap__},set_depthMap:function(t){return this.depthMap__=t},get_noiseMap:function(){return this.noiseMap__},set_noiseMap:function(t){return this.noiseMap__=t},get_resolution:function(){return this.resolution__},set_resolution:function(t){return this.resolution__=t},get_time:function(){return this.time__},set_time:function(t){return this.time__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.colorMap__;case 2:return this.colorMap2__;case 3:return this.normalMap__;case 4:return this.depthMap__;case 5:return this.noiseMap__;case 6:return this.resolution__;case 7:return this.time__}return null},getParamFloatValue:function(t){switch(t){case 0:return this.flipY__;case 7:return this.time__}return 0},__class__:kl,__properties__:t(n.prototype.__properties__,{set_time:"set_time",get_time:"get_time",set_resolution:"set_resolution",get_resolution:"get_resolution",set_noiseMap:"set_noiseMap",get_noiseMap:"get_noiseMap",set_depthMap:"set_depthMap",get_depthMap:"get_depthMap",set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",set_colorMap2:"set_colorMap2",get_colorMap2:"get_colorMap2",set_colorMap:"set_colorMap",get_colorMap:"get_colorMap"})}),(e["spine.support.utils.JsonValue"]=dt).__name__="spine.support.utils.JsonValue",dt.__isInterface__=!0,dt.prototype={__class__:dt,__properties__:{get_child:"get_child",get_next:"get_next",get_size:"get_size",get_name:"get_name"}},(e["spine.support.utils.JsonDynamic"]=pt).__name__="spine.support.utils.JsonDynamic",pt.__interfaces__=[dt],pt.prototype={has:function(t){return null!=this.get(t)},require:function(t){return this.get(t)},get:function(t){return!(this.data instanceof Array)&&Object.prototype.hasOwnProperty.call(this.data,t)?new pt(Z.field(this.data,t)):null},getAtIndex:function(t){return this.data instanceof Array?new Qd(this.data,t):null},getChild:function(t){t=Z.field(this.data,t);return null==t?null:new pt(t).get_child()},getString:function(t,e){return Object.prototype.hasOwnProperty.call(this.data,t)?Z.field(this.data,t):e},getFloat:function(t,e){return null==e&&(e=0),"number"==typeof t&&(0|t)===t?this.data instanceof Array?this.data[t]:e:Object.prototype.hasOwnProperty.call(this.data,t)?Z.field(this.data,t):e},getInt:function(t,e){return null==e&&(e=0),Object.prototype.hasOwnProperty.call(this.data,t)?Z.field(this.data,t):e},getBoolean:function(t,e){return null==e&&(e=!1),Object.prototype.hasOwnProperty.call(this.data,t)?Z.field(this.data,t):e},asString:function(){return this.data},asFloatArray:function(){return this.data},asShortArray:function(){return this.data},asFloat:function(){return this.data},asInt:function(){return this.data},isString:function(){return"string"==typeof this.data},get_next:function(){return null},get_name:function(){return null},get_size:function(){return(this.data instanceof Array?this.data:Z.fields(this.data)).length},get_child:function(){var t=this.data;if(null==t)return null;if(t instanceof Array)return new Qd(t,0);for(var e=[],n=[],s=0,i=Z.fields(t);s<i.length;){var a=i[s];++s,e.push(a),n.push(Z.field(t,a))}return 0==e.length?null:new Qd(n,0,e)},__class__:pt,__properties__:{get_child:"get_child",get_size:"get_size",get_name:"get_name",get_next:"get_next"}},function(t){pt.call(this,JSON.parse(t))}),Il=((e["gasm.heaps.spine.SpineConfigHandle"]=Bl).__name__="gasm.heaps.spine.SpineConfigHandle",Bl.__super__=pt,Bl.prototype=t(pt.prototype,{__class__:Bl}),(e["spine.support.graphics.TextureLoader"]=ft).__name__="spine.support.graphics.TextureLoader",ft.__isInterface__=!0,ft.prototype={__class__:ft},function(t){this.tile=t}),Tl=((e["gasm.heaps.spine.SpineTextureLoader"]=Il).__name__="gasm.heaps.spine.SpineTextureLoader",Il.__interfaces__=[ft],Il.prototype={loadPage:function(t,e){t.rendererObject=this.tile,t.width=0|this.tile.width,t.height=0|this.tile.height},loadRegion:function(t){},__class__:Il},function(t){_.call(this),this.root=t,this.type=sl.CORE,this.componentFlags|=4}),Fl=((e["gasm.heaps.systems.HeapsCoreSystem"]=Tl).__name__="gasm.heaps.systems.HeapsCoreSystem",Tl.__interfaces__=[u],Tl.__super__=_,Tl.prototype=t(_.prototype,{update:function(t,e){t.inited||(t.init(),t.inited=!0),t.update(e)},__class__:Tl}),function(t){_.call(this),this.root=t,this.type=sl.RENDERING,this.componentFlags=512|(this.componentFlags|=256),this.componentFlags|=1024}),Dl=((e["gasm.heaps.systems.HeapsRenderingSystem"]=Fl).__name__="gasm.heaps.systems.HeapsRenderingSystem",Fl.__interfaces__=[u],Fl.__super__=_,Fl.prototype=t(_.prototype,{update:function(t,e){if(t.inited)t.update(e);else{switch(t.componentType._hx_index){case 9:t.owner.getFromParentsByName(at.BASE_NAME,at);var n=t;null!=t.owner.parent&&(null==(s=t.owner.parent.getFromParentsByName(j.BASE_NAME,j))?n.root=!0:s.object.addChild(n.object.object));break;case 8:case 10:t.owner.getFromParentsByName(at.BASE_NAME,at);var s=t;null!=t.owner.parent&&(null==(n=t.owner.parent.getFromParentsByName(pl.BASE_NAME,pl))?s.root=!0:n.sprite.addChild(s.sprite))}switch(t.inited=!0,t.init(),t.componentType._hx_index){case 8:case 10:var i=t.owner,i=null!=i._compMap?i._compMap.h[Kr.BASE_NAME]:null,i=i instanceof Kr?i:null,a=er.__cast(t,pl).sprite.getSize();i.origWidth=a.xMax-a.xMin,i.origHeight=a.yMax-a.yMin}t.update(e),t.onAdded()}},__class__:Fl}),function(){_.call(this),this.type=sl.SOUND,this.componentFlags|=2048}),El=((e["gasm.heaps.systems.HeapsSoundSystem"]=Dl).__name__="gasm.heaps.systems.HeapsSoundSystem",Dl.__interfaces__=[u],Dl.__super__=_,Dl.prototype=t(_.prototype,{update:function(t,e){t.inited||(t.init(),t.inited=!0),t.update(e)},__class__:Dl}),function(t,e){null==e&&(e=0),this.x=t=null==t?0:t,this.y=e}),Pl=((e["h2d.col.Point"]=El).__name__="h2d.col.Point",El.prototype={__class__:El},function(t){this.blendMode=y.Alpha,this.alpha=1,this.visible=!0,this.rotation=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,this.matA=1,this.matB=0,this.matC=0,this.matD=1,this.absX=0,this.absY=0,this.posChanged=null!=t,this.children=[],null!=t&&t.addChild(this)}),zl=((e["h2d.Object"]=Pl).__name__="h2d.Object",Pl.nullDrawable=null,Pl.prototype={getBounds:function(t,e){return null==e?e=new to:(e.xMin=1e20,e.yMin=1e20,e.xMax=-1e20,e.yMax=-1e20),null!=t&&t.syncPos(),t!=this&&this.syncPos(),this.getBoundsRec(t,e,!1),(e.xMax<=e.xMin||e.yMax<=e.yMin)&&(this.addBounds(t,e,-1,-1,2,2),e.xMax=e.xMin=.5*(e.xMax+e.xMin),e.yMax=e.yMin=.5*(e.yMax+e.yMin)),e},getSize:function(t){null==t?t=new to:(t.xMin=1e20,t.yMin=1e20,t.xMax=-1e20,t.yMax=-1e20),this.syncPos(),this.getBoundsRec(this.parent,t,!0),(t.xMax<=t.xMin||t.yMax<=t.yMin)&&(this.addBounds(this.parent,t,-1,-1,2,2),t.xMax=t.xMin=.5*(t.xMax+t.xMin),t.yMax=t.yMin=.5*(t.yMax+t.yMin));var e=-this.x,n=-this.y;return t.xMin+=e,t.xMax+=e,t.yMin+=n,t.yMax+=n,t},set_filter:function(t){return null!=this.filter&&this.allocated&&this.filter.unbind(this),null!=(this.filter=t)&&this.allocated&&t.bind(this),t},getBoundsRec:function(t,e,n){if(this.posChanged){this.calcAbsPos();for(var s=0,i=this.children;s<i.length;)i[s++].posChanged=!0;this.posChanged=!1}var a=this.children.length;if(0==a)e.xMin=1e20,e.yMin=1e20,e.xMax=-1e20,e.yMax=-1e20;else if(1==a)(u=this.children[0]).visible?u.getBoundsRec(t,e,n):(e.xMin=1e20,e.yMin=1e20,e.xMax=-1e20,e.yMax=-1e20);else{for(var r=1/0,l=1/0,o=-1/0,h=-1/0,s=0,i=this.children;s<i.length;){var u=i[s];++s,u.visible&&(u.getBoundsRec(t,e,n),e.xMin<r&&(r=e.xMin),e.yMin<l&&(l=e.yMin),e.xMax>o&&(o=e.xMax),e.yMax>h)&&(h=e.yMax)}e.xMin=r,e.yMin=l,e.xMax=o,e.yMax=h}},addBounds:function(t,e,n,s,i,a){var r,l,o,h,u,_,c,d,p;i<=0||a<=0||(null==t?(_=n*this.matA+s*this.matC+this.absX,c=n*this.matB+s*this.matD+this.absY,_<e.xMin&&(e.xMin=_),_>e.xMax&&(e.xMax=_),c<e.yMin&&(e.yMin=c),c>e.yMax&&(e.yMax=c),_=(n+i)*this.matA+s*this.matC+this.absX,c=(n+i)*this.matB+s*this.matD+this.absY,_<e.xMin&&(e.xMin=_),_>e.xMax&&(e.xMax=_),c<e.yMin&&(e.yMin=c),c>e.yMax&&(e.yMax=c),_=n*this.matA+(s+a)*this.matC+this.absX,c=n*this.matB+(s+a)*this.matD+this.absY,_<e.xMin&&(e.xMin=_),_>e.xMax&&(e.xMax=_),c<e.yMin&&(e.yMin=c),c>e.yMax&&(e.yMax=c),_=(n+i)*this.matA+(s+a)*this.matC+this.absX,c=(n+i)*this.matB+(s+a)*this.matD+this.absY,_<e.xMin&&(e.xMin=_),_>e.xMax&&(e.xMax=_),c<e.yMin&&(e.yMin=c),c>e.yMax&&(e.yMax=c)):t==this?(e.xMin>n&&(e.xMin=n),e.yMin>s&&(e.yMin=s),e.xMax<n+i&&(e.xMax=n+i),e.yMax<s+a&&(e.yMax=s+a)):0!=(h=t.matA*t.matD-t.matB*t.matC)&&(r=t.matD*(h=1/h),l=-t.matB*h,o=-t.matC*h,h=t.matA*h,u=this.absX-t.absX,t=this.absY-t.absY,p=(_=n*this.matA+s*this.matC+u)*l+(c=n*this.matB+s*this.matD+t)*h,(d=_*r+c*o)<e.xMin&&(e.xMin=d),d>e.xMax&&(e.xMax=d),p<e.yMin&&(e.yMin=p),p>e.yMax&&(e.yMax=p),d=(_=(n+i)*this.matA+s*this.matC+u)*r+(c=(n+i)*this.matB+s*this.matD+t)*o,p=_*l+c*h,d<e.xMin&&(e.xMin=d),d>e.xMax&&(e.xMax=d),p<e.yMin&&(e.yMin=p),p>e.yMax&&(e.yMax=p),d=(_=n*this.matA+(s+a)*this.matC+u)*r+(c=n*this.matB+(s+a)*this.matD+t)*o,p=_*l+c*h,d<e.xMin&&(e.xMin=d),d>e.xMax&&(e.xMax=d),p<e.yMin&&(e.yMin=p),p>e.yMax&&(e.yMax=p),d=(_=(n+i)*this.matA+(s+a)*this.matC+u)*r+(c=(n+i)*this.matB+(s+a)*this.matD+t)*o,p=_*l+c*h,d<e.xMin&&(e.xMin=d),d>e.xMax&&(e.xMax=d),p<e.yMin&&(e.yMin=p),p>e.yMax)&&(e.yMax=p))},localToGlobal:function(t){this.syncPos();var e=(t=null==t?new El:t).x*this.matB+t.y*this.matD+this.absY;return t.x=t.x*this.matA+t.y*this.matC+this.absX,t.y=e,t},globalToLocal:function(t){this.syncPos(),t.x-=this.absX,t.y-=this.absY;var e=1/(this.matA*this.matD-this.matB*this.matC),n=(-t.x*this.matB+t.y*this.matA)*e;return t.x=(t.x*this.matD-t.y*this.matC)*e,t.y=n,t},getScene:function(){for(var t=this;null!=t.parent;)t=t.parent;return t instanceof ql?t:null},set_visible:function(t){return this.visible!=t&&(this.visible=t,null!=this.parentContainer)&&this.parentContainer.contentChanged(this),t},addChild:function(t){this.addChildAt(t,this.children.length)},addChildAt:function(t,e){(e=e<0?0:e)>this.children.length&&(e=this.children.length);for(var n,s=this;null!=s;){if(s==t)throw tr.thrown("Recursive addChild");s=s.parent}null!=t.parent&&(n=t.allocated,t.allocated=!1,t.parent.removeChild(t),t.allocated=n),this.children.splice(e,0,t),!this.allocated&&t.allocated&&t.onRemove(),t.parent=this,t.parentContainer=this.parentContainer,t.posChanged=!0,this.allocated&&(t.allocated?t.onHierarchyMoved(!0):t.onAdd()),null!=this.parentContainer&&this.parentContainer.contentChanged(this)},onHierarchyMoved:function(t){for(var e=0,n=this.children;e<n.length;)n[e++].onHierarchyMoved(t)},onAdd:function(){this.allocated=!0,null!=this.filter&&this.filter.bind(this);for(var t=0,e=this.children;t<e.length;)e[t++].onAdd()},onRemove:function(){this.allocated=!1,null!=this.filter&&this.filter.unbind(this);for(var t=this.children.length-1;0<=t;){var e=this.children[t--];null!=e&&e.onRemove()}},getMatrix:function(t){t.a=this.matA,t.b=this.matB,t.c=this.matC,t.d=this.matD,t.x=this.absX,t.y=this.absY},removeChild:function(t){Jn.remove(this.children,t)&&(t.allocated&&t.onRemove(),(t.parent=null)!=t.parentContainer&&t.setParentContainer(null),t.posChanged=!0,null!=this.parentContainer)&&this.parentContainer.contentChanged(this)},setParentContainer:function(t){this.parentContainer=t;for(var e=0,n=this.children;e<n.length;)n[e++].setParentContainer(t)},removeChildren:function(){for(;0<this.children.length;)this.removeChild(this.getChildAt(0))},drawTo:function(t){var e=this.getScene(),n=null==e;(e=null==e?new ql:e).drawImplTo(this,[t]),n&&(e.dispose(),this.onRemove())},draw:function(t){},sync:function(t){for(var e=this.posChanged,n=(e&&(this.calcAbsPos(),this.posChanged=!1),this.lastFrame=t.frame,0),s=this.children.length;n<s;){var i=this.children[n];if(null==i)break;i.lastFrame!=t.frame&&(e&&(i.posChanged=!0),i.sync(t)),this.children[n]!=i?(n=0,s=this.children.length):++n}},syncPos:function(){if(null!=this.parent&&this.parent.syncPos(),this.posChanged){this.calcAbsPos();for(var t=0,e=this.children;t<e.length;)e[t++].posChanged=!0;this.posChanged=!1}},calcAbsPos:function(){var t,e,n,s;null==this.parent?(0==this.rotation?(this.matA=this.scaleX,this.matB=0,this.matC=0,this.matD=this.scaleY):(s=Math.cos(this.rotation),n=Math.sin(this.rotation),this.matA=this.scaleX*s,this.matB=this.scaleX*n,this.matC=this.scaleY*-n,this.matD=this.scaleY*s),this.absX=this.x,this.absY=this.y):(0==this.rotation?(this.matA=this.scaleX*this.parent.matA,this.matB=this.scaleX*this.parent.matB,this.matC=this.scaleY*this.parent.matC,this.matD=this.scaleY*this.parent.matD):(s=Math.cos(this.rotation),n=Math.sin(this.rotation),t=this.scaleX*s,e=this.scaleX*n,n=this.scaleY*-n,s=this.scaleY*s,this.matA=t*this.parent.matA+e*this.parent.matC,this.matB=t*this.parent.matB+e*this.parent.matD,this.matC=n*this.parent.matA+s*this.parent.matC,this.matD=n*this.parent.matB+s*this.parent.matD),this.absX=this.x*this.parent.matA+this.y*this.parent.matC+this.parent.absX,this.absY=this.x*this.parent.matB+this.y*this.parent.matD+this.parent.absY)},emitTile:function(t,e){null==Pl.nullDrawable&&(Pl.nullDrawable=new zl(null)),Pl.nullDrawable.absX=this.absX,Pl.nullDrawable.absY=this.absY,Pl.nullDrawable.matA=this.matA,Pl.nullDrawable.matB=this.matB,Pl.nullDrawable.matC=this.matC,Pl.nullDrawable.matD=this.matD,t.drawTile(Pl.nullDrawable,e)},clipBounds:function(t,e,n,s){null==s&&(s=1),null==n&&(n=1);var i,a,r,l,o,h,u=t.tmpBounds;h=null!=t.inFilter?(h=t.baseShader.filterMatrixA__,g=t.baseShader.filterMatrixB__,a=this.matA*h.x+this.matB*h.y,r=this.matA*g.x+this.matB*g.y,l=this.matC*h.x+this.matD*h.y,o=this.matC*g.x+this.matD*g.y,h=this.absX*h.x+this.absY*h.y+h.z,g=this.absX*g.x+this.absY*g.y+g.z,i=(a*t.viewA+r*t.viewC)/n,a=(a*t.viewB+r*t.viewD)/s,r=(l*t.viewA+o*t.viewC)/n,l=(l*t.viewB+o*t.viewD)/s,o=h*t.viewA+g*t.viewC+t.viewX,h*t.viewB+g*t.viewD+t.viewY):(i=(this.matA*t.viewA+this.matB*t.viewC)/n,a=(this.matA*t.viewB+this.matB*t.viewD)/s,r=(this.matC*t.viewA+this.matD*t.viewC)/n,l=(this.matC*t.viewB+this.matD*t.viewD)/s,o=this.absX*t.viewA+this.absY*t.viewC+t.viewX,this.absX*t.viewB+this.absY*t.viewD+t.viewY),u.xMin=1e20,u.yMin=1e20,u.xMax=-1e20,u.yMax=-1e20;s=(g=e.xMin)*a+(n=e.yMin)*l+h;(t=g*i+n*r+o)<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s);s=(g=e.xMax)*a+(n=e.yMin)*l+h;(t=g*i+n*r+o)<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s);s=(g=e.xMin)*a+(n=e.yMax)*l+h;(t=g*i+n*r+o)<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s);var s=(g=e.xMax)*a+(n=e.yMax)*l+h,_=((t=g*i+n*r+o)<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s),u.xMin<-1&&(u.xMin=-1),u.yMin<-1&&(u.yMin=-1),1<u.xMax&&(u.xMax=1),1<u.yMax&&(u.yMax=1),1/(i*l-a*r)),c=u.xMin,d=u.yMin,p=u.xMax,f=u.yMax,g=(u.xMin=1e20,u.yMin=1e20,u.xMax=-1e20,u.yMax=-1e20,c),t=((g=c-o)*l-(n=d-h)*r)*_,s=(-g*a+n*i)*_,g=(t<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s),p),t=((g=p-o)*l-(n=d-h)*r)*_,s=(-g*a+n*i)*_,g=(t<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s),c),t=((g=c-o)*l-(n=f-h)*r)*_,s=(-g*a+n*i)*_,g=(t<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s),p),t=((g=p-o)*l-(n=f-h)*r)*_,s=(-g*a+n*i)*_,d=(t<u.xMin&&(u.xMin=t),t>u.xMax&&(u.xMax=t),s<u.yMin&&(u.yMin=s),s>u.yMax&&(u.yMax=s),e.xMin),c=u.xMin,d=(e.xMin=d<c?c:d,e.yMin),c=u.yMin,d=(e.yMin=d<c?c:d,e.xMax),c=u.xMax,d=(e.xMax=c<d?c:d,e.yMax),c=u.yMax;e.yMax=c<d?c:d},drawFilters:function(t){var e,n,s,i,a,r,l,o,h,u,_,c,d,p,f,g,m,A,x,b,y,w;t.pushFilter(this)&&(s=t.tmpBounds,a=new to,this.filter.sync(t,this),n=this.filter.useScreenResolution?(e=(n=t.scene).viewportScaleX*this.filter.resolutionScale,n.viewportScaleY*this.filter.resolutionScale):(e=this.filter.resolutionScale,this.filter.resolutionScale),this.filter.autoBounds?0<=(i=this.filter.boundsExtend)&&(this.getBounds(this,s),s.xMin=s.xMin*e-i,s.yMin=s.yMin*n-i,s.xMax=s.xMax*e+i,s.yMax=s.yMax*n+i,s.xMin<a.xMin&&(a.xMin=s.xMin),s.xMax>a.xMax&&(a.xMax=s.xMax),s.yMin<a.yMin&&(a.yMin=s.yMin),s.yMax>a.yMax)&&(a.yMax=s.yMax):(o=e,null==(h=n)&&(h=0),(i=Pl.tmpPoint).x=o=null==o?0:o,i.y=h,this.filter.getBounds(this,s,i),s.xMin<a.xMin&&(a.xMin=s.xMin),s.xMax>a.xMax&&(a.xMax=s.xMax),s.yMin<a.yMin&&(a.yMin=s.yMin),s.yMax>a.yMax&&(a.yMax=s.yMax),e=i.x,n=i.y),t.setFilterScale(e,n),this.clipBounds(t,a,e,n),s=Math.floor(a.xMin+1e-10),i=Math.floor(a.yMin+1e-10),r=Math.ceil(a.xMax-s-1e-10),l=Math.ceil(a.yMax-i-1e-10),r<=0||l<=0||a.xMax<a.xMin?t.popFilter():(a=t.textures.allocTarget("filterTemp",r,l,!1),t.pushTarget(a,s,i,r,l),t.engine.clear(0),r=t.globalAlpha,o=(w=(l=t.baseShader).filterMatrixA__).x,h=w.y,u=w.z,null==(_=w.w)&&(_=1),null==u&&(u=0),null==h&&(h=0),null==o&&(o=0),c=(w=l.filterMatrixB__).x,d=w.y,p=w.z,null==(f=w.w)&&(f=1),null==p&&(p=0),null==d&&(d=0),null==c&&(c=0),m=1/(this.matA*this.matD-this.matB*this.matC),y=this.matD*m*e,g=-this.matB*m*n,A=-this.matC*m*e,m=this.matA*m*n,x=-(this.absX*y+this.absY*A),b=-(this.absX*g+this.absY*m),x=null==x?0:x,null==(A=A)&&(A=0),(w=l.filterMatrixA__).x=null==y?0:y,w.y=A,w.z=x,w.w=1,x=null==b?0:b,null==(A=m)&&(A=0),(w=l.filterMatrixB__).x=null==g?0:g,w.y=A,w.z=x,w.w=1,t.globalAlpha=1,this.drawContent(t),(y=Jl.fromTexture(a)).dx=s/e,y.dy=i/n,b=y,null!=(y=this.filter.draw(t,y))&&(y!=b&&(y.dx=(y.dx+s)/e,y.dy=(y.dy+i)/n),y.width/=e,y.height/=n),(w=l.filterMatrixA__).x=o,w.y=h,w.z=u,w.w=_,(w=l.filterMatrixB__).x=c,w.y=d,w.z=p,w.w=f,t.popTarget(),t.popFilter(),t.globalAlpha=r,null!=y&&this.drawFiltered(t,y)))},drawFiltered:function(t,e){var n=t.globalAlpha;t.currentBlend=null,t.inFilterBlend=this.blendMode,t.globalAlpha*=this.alpha,this.emitTile(t,e),t.globalAlpha=n,t.inFilterBlend=null,t.currentBlend=null},drawRec:function(t){if(this.visible){if(this.posChanged){this.calcAbsPos();for(var e=0,n=this.children;e<n.length;)n[e++].posChanged=!0;this.posChanged=!1}var s;null!=this.filter&&this.filter.get_enable()?this.drawFilters(t):(s=t.globalAlpha,t.globalAlpha*=this.alpha,this.drawContent(t),t.globalAlpha=s)}},drawContent:function(t){if(t.front2back){for(var e=this.children.length;0<e--;)this.children[e].drawRec(t);this.draw(t)}else{this.draw(t);for(var n=0,s=this.children;n<s.length;)s[n++].drawRec(t)}},getChildAt:function(t){return this.children[t]},toString:function(){var t=er.getClass(this).__name__;return null==this.name?t:this.name+"("+t+")"},contentChanged:function(t){},__class__:Pl,__properties__:{set_filter:"set_filter",set_visible:"set_visible"}},function(t){Pl.call(this,t),this.color=new R(1,1,1,1)}),Rl=((e["h2d.Drawable"]=zl).__name__="h2d.Drawable",zl.__super__=Pl,zl.prototype=t(Pl.prototype,{drawFiltered:function(t,e){var n=this.shaders;this.shaders=null,Pl.prototype.drawFiltered.call(this,t,e),this.shaders=n},addShader:function(t){if(null==t)throw tr.thrown("Can't add null shader");return this.shaders=Jc.addSort(t,this.shaders),t},removeShader:function(t){for(var e=null,n=this.shaders;null!=n;){if(n.s==t)return null==e?this.shaders=n.next:e.next=n.next,!0;n=(e=n).next}return!1},emitTile:function(t,e){null==e&&(e=new Jl(null,0,0,5,5)),t.drawTile(this,e)},__class__:zl}),(e["h2d.Text"]=gt).__name__="h2d.Text",gt.__super__=zl,gt.prototype=t(zl.prototype,{set_font:function(t){if(this.font!=t){if(null!=(this.font=t)){var e=t.type;switch(e._hx_index){case 0:null!=this.sdfShader&&(this.removeShader(this.sdfShader),this.sdfShader=null);break;case 1:var n=e.smoothing;null==this.sdfShader&&(this.sdfShader=new rh,this.addShader(this.sdfShader)),null==this.smooth&&(this.smooth=!0),this.sdfShader.alphaCutoff__=e.alphaCutoff,this.sdfShader.smoothing__=n,(s=this.sdfShader).constModified=!0,s.channel__=e.channel,(s=this.sdfShader).constModified=!0,s.autoSmoothing__=-1==n}}var s;null!=this.glyphs&&null!=(s=this.glyphs)&&null!=s.parent&&s.parent.removeChild(s),this.glyphs=new $l(null==t?null:t.tile,this),this.glyphs.set_visible(!1),this.rebuild()}return t},set_textAlign:function(t){return this.textAlign!=t&&(this.textAlign=t,this.rebuild()),t},set_letterSpacing:function(t){return this.letterSpacing!=t&&(this.letterSpacing=t,this.rebuild()),t},set_lineSpacing:function(t){return this.lineSpacing!=t&&(this.lineSpacing=t,this.rebuild()),t},onAdd:function(){zl.prototype.onAdd.call(this),this.rebuild()},sync:function(t){zl.prototype.sync.call(this,t),this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.needsRebuild&&this.initGlyphs(this.currentText)},draw:function(t){var e,n,s,i,a,r,l,o;null==this.glyphs?this.emitTile(t,Jl.fromColor(16711935,16,16)):(this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.needsRebuild&&this.initGlyphs(this.currentText),null!=this.dropShadow&&(l=this.absX,r=this.absY,this.absX+=this.dropShadow.dx*this.matA+this.dropShadow.dy*this.matC,this.absY+=this.dropShadow.dx*this.matB+this.dropShadow.dy*this.matD,e=this.color.x,n=this.color.y,s=this.color.z,i=this.color.w,a=this.color,o=this.dropShadow.color,a.x=(o>>16&255)/255,a.y=(o>>8&255)/255,a.z=(255&o)/255,a.w=(o>>>24)/255,this.color.w=this.dropShadow.alpha*i,this.glyphs.drawWith(t,this),this.absX=l,this.absY=r,o=null==i?1:i,null==(l=s)&&(l=0),null==(r=n)&&(r=0),(a=this.color).x=null==e?0:e,a.y=r,a.z=l,a.w=o),this.glyphs.drawWith(t,this))},set_text:function(t){t=null==t?"null":t;return t!=this.text&&(this.text=t,this.textChanged=!0,this.validateText(),null!=this.parentContainer)&&this.parentContainer.contentChanged(this),t},validateText:function(){},rebuild:function(){this.calcDone=!1,this.needsRebuild=!0,null!=this.parentContainer&&this.parentContainer.contentChanged(this)},calcTextWidth:function(t){var e,n,s,i,a,r;return this.calcDone?(e=this.calcWidth,n=this.calcHeight,s=this.calcSizeHeight,i=this.calcXMin,a=this.calcYMin,this.initGlyphs(t,!1),r=this.calcWidth,this.calcWidth=e,this.calcHeight=n,this.calcSizeHeight=s,this.calcXMin=i,this.calcYMin=a,r):(this.initGlyphs(t,!1),this.calcDone=!1,this.calcWidth)},splitRawText:function(t,e,n,s,i,a){null==a&&(a=-1),null==n&&(n=0);var r=this.realMaxWidth;if(r<0){if(null==i)return t;r=1/0}null==s&&(s=this.font);for(var l=[],o=0,h=e=null==e?0:e,u=0,_=t.length;u<_;){var c=u++,d=Jn.cca(t,c),p=s.glyphs.h[d],p=p=null==p&&null==(p=s.charset.resolveChar(d,s.glyphs))?13==d||10==d?s.nullChar:s.defaultChar:p,f=10==d,g=p.width+p.getKerningOffset(a),m=Jn.cca(t,1+c);if(s.charset.isBreakChar(d)&&(null==m||!s.charset.isComplementChar(m))){0==l.length&&0<e&&r<h&&(l.push(""),null!=i&&i.push(e),h-=e);for(var A=h+g+this.letterSpacing,x=1+c,b=t.length,y=a,w=!1;A<=r&&x<b;){var v=Jn.cca(t,x++);if(this.lineBreak&&(s.charset.isSpace(v)||10==v)){w=!0;break}var C=s.glyphs.h[v],C=C=null==C&&null==(C=s.charset.resolveChar(v,s.glyphs))?13==v||10==v?s.nullChar:s.defaultChar:C,C=(A+=C.width+this.letterSpacing+C.getKerningOffset(y),y=v,Jn.cca(t,x+1));if(s.charset.isBreakChar(v)&&(null==C||!s.charset.isComplementChar(C)))break}this.lineBreak&&(r<A||!w&&r<A+n)&&(f=!0,s.charset.isSpace(d)?(l.push(Jn.substr(t,o,c-o)),p=null):l.push(Jn.substr(t,o,1+c-o)),o=1+c)}null!=p&&10!=d&&(h+=g+this.letterSpacing),a=f?(null!=i&&i.push(h),h=0,-1):d}return o<t.length&&(0==l.length&&0<e&&h+n-this.letterSpacing>r&&(l.push(""),null!=i&&i.push(e),h-=e),l.push(Jn.substr(t,o,t.length-o)),null!=i)&&i.push(h),l.join("\n")},initGlyphs:function(t,e){(e=null==e?!0:e)&&this.glyphs.clear();for(var n=0,s=0,i=0,a=0,r=0,l=-1,o=0,h=this.textAlign,u=[],_=this.font.lineHeight+this.lineSpacing,c=this.splitRawText(t,0,0,null,u),d=0;d<u.length;){var p=u[d];++d,n<p&&(n=p)}switch(this.calcWidth=n,h._hx_index){case 0:n=0;break;case 1:case 2:case 3:case 4:for(var f=h==Kl.MultilineCenter||h==Kl.MultilineRight?Math.ceil(this.calcWidth):this.realMaxWidth<0?0:Math.ceil(this.realMaxWidth),g=h==Kl.Center||h==Kl.MultilineCenter?.5:1,d=0,m=u.length;d<m;){var A=d++;u[A]=Math.floor((f-u[A])*g)}a=n=u[0]}for(d=0,m=c.length;d<m;){var x,b=Jn.cca(c,d++),y=this.font,w=y.glyphs.h[b],y=w=null==w&&null==(w=y.charset.resolveChar(b,y.glyphs))?13==b||10==b?y.nullChar:y.defaultChar:w,w=y.getKerningOffset(l),v=y.width+w;if(10==b){switch(i<n&&(i=n),h._hx_index){case 0:n=0;break;case 1:case 2:case 3:case 4:(n=u[++o])<a&&(a=n)}s+=_,l=-1}else null!=y&&(e&&(x=this.glyphs).content.add(n+w,s,x.curColor.x,x.curColor.y,x.curColor.z,x.curColor.w,y.t),0==s&&y.t.dy<r&&(r=y.t.dy),n+=v+this.letterSpacing),l=b}i<n&&(i=n),this.calcXMin=a,this.calcYMin=r,this.calcWidth=i-a,this.calcHeight=s+this.font.lineHeight,this.calcSizeHeight=s+(0<this.font.baseLine?this.font.baseLine:this.font.lineHeight),this.calcDone=!0,e&&(this.needsRebuild=!1)},get_textHeight:function(){return this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.calcDone||this.initGlyphs(this.text,this.needsRebuild),this.calcHeight},get_textWidth:function(){return this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.calcDone||this.initGlyphs(this.text,this.needsRebuild),this.calcWidth},set_maxWidth:function(t){return this.maxWidth!=t&&(this.maxWidth=t,this.updateConstraint()),t},updateConstraint:function(){var t,e,n=this.realMaxWidth;null==this.maxWidth?this.realMaxWidth=this.constraintWidth:this.constraintWidth<0?this.realMaxWidth=this.maxWidth:(t=this.maxWidth,e=this.constraintWidth,this.realMaxWidth=e<t?e:t),this.realMaxWidth!=n&&this.rebuild()},set_textColor:function(t){var e,n;return this.textColor!=t&&(this.textColor=t,e=this.color.w,(n=this.color).x=(t>>16&255)/255,n.y=(t>>8&255)/255,n.z=(255&t)/255,n.w=(t>>>24)/255,this.color.w=e),t},getBoundsRec:function(t,e,n){var s,i,a;zl.prototype.getBoundsRec.call(this,t,e,n),this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.calcDone||this.initGlyphs(this.text,this.needsRebuild),n=n?(s=this.calcXMin,i=0,a=this.calcWidth,this.calcSizeHeight):(s=this.calcXMin,i=this.calcYMin,a=this.calcWidth,this.calcHeight-this.calcYMin),this.addBounds(t,e,s,i,a,n)},__class__:gt,__properties__:t(zl.prototype.__properties__,{set_lineSpacing:"set_lineSpacing",set_letterSpacing:"set_letterSpacing",set_textAlign:"set_textAlign",get_textHeight:"get_textHeight",get_textWidth:"get_textWidth",set_maxWidth:"set_maxWidth",set_textColor:"set_textColor",set_text:"set_text",set_font:"set_font"})}),(e["gasm.heaps.text.ScalingTextField"]=mt).__name__="gasm.heaps.text.ScalingTextField",mt.__super__=gt,mt.prototype=t(gt.prototype,{dispose:function(){var t=this.glyphs;null!=t&&t.clear(),null!=(t=this.sdfShader)&&this.removeShader(t),this.glyphs=null,this.sdfShader=null},initGlyphs:function(t,e){gt.prototype.initGlyphs.call(this,t,e=null==e?!0:e),this.calcHeight+=this.yMarg,this.calcWidth+=this.xMarg},set_text:function(t){return null!=t&&(t=ut.replace(t," "," ")),gt.prototype.set_text.call(this,t)},set_xMarg:function(t){return this.calcWidth=this.get_textWidth()+2*this.xMarg,this.xMarg=t},set_yMarg:function(t){return this.calcHeight=this.get_textHeight()+2*this.yMarg,this.yMarg=t},__class__:mt,__properties__:t(gt.prototype.__properties__,{set_yMarg:"set_yMarg",set_xMarg:"set_xMarg"})}),d["gasm.heaps.transform.ObjectTween"]={__ename__:!0,__constructs__:null,Position:((c=function(t){return{_hx_index:0,v:t,__enum__:"gasm.heaps.transform.ObjectTween",toString:l}})._hx_name="Position",c.__params__=["v"],c),Rotate:((c=function(t){return{_hx_index:1,v:t,__enum__:"gasm.heaps.transform.ObjectTween",toString:l}})._hx_name="Rotate",c.__params__=["v"],c),Scale:((c=function(t){return{_hx_index:2,v:t,__enum__:"gasm.heaps.transform.ObjectTween",toString:l}})._hx_name="Scale",c.__params__=["v"],c),Color:((c=function(t){return{_hx_index:3,v:t,__enum__:"gasm.heaps.transform.ObjectTween",toString:l}})._hx_name="Color",c.__params__=["v"],c)}),Vl=(Rl.__constructs__=[Rl.Position,Rl.Rotate,Rl.Scale,Rl.Color],Rl.__empty_constructs__=[],function(t){this.updateComplete=lp.trigger(),this.deltaTime=1,this.speedCalculatedThisFrame=!1;var e=(this.object=t).getRotationQuat().toEuler();this.position=new Gl(t.x,t.y,t.z,1),this.rotation=new Gl(e.x,e.y,e.z,1),this.scaling=new Gl(t.scaleX,t.scaleY,t.scaleZ,1),this.color=new Gl(1,1,1,1),this.home=new Ol(new Ll(this.position.x,this.position.y,this.position.z,null),new Ll(t.scaleX,t.scaleY,t.scaleZ,null),new Ll(e.x,e.y,e.z,null),new Ll(1,1,1,1))}),Ql=((e["gasm.heaps.transform.TweenObjectBacking"]=Vl).__name__="gasm.heaps.transform.TweenObjectBacking",Vl.prototype={cancel:function(t){Nl.cancel(this.position,t=null==t?!1:t),Nl.cancel(this.rotation,t),Nl.cancel(this.scaling,t),Nl.cancel(this.color,t)},getMaterials:function(){return this.object.getMaterials()},getMeshes:function(){return this.object.getMeshes()},getRotationQuat:function(){return this.object.getRotationQuat()},setRotation:function(t,e,n){this.object.setRotation(t,e,n)},setScale:function(t){var e=this.object;e.scaleX=t,e.flags|=1,e.scaleY=t,e.flags|=1,e.scaleZ=t,e.flags|=1,e.flags|=1},addChild:function(t){this.object.addChild(t)},removeChild:function(t){this.object.removeChild(t)},getBounds:function(){return this.object.getBounds()},setPosition:function(t,e,n){var s=this.position,s=(s.x=null==t?s.x:t,s.y=null==e?s.y:e,s.z=null==n?s.z:n,s.w=s.w,this.object);s.x=t,s.flags|=1,s.y=e,s.flags|=1,s.z=n,s.flags|=1,s.flags|=1},remove:function(){this.cancel(),this.home=null;var t=this.object;null!=t&&null!=t.parent&&t.parent.removeChild(t)},get_parent:function(){return this.object.parent},get_name:function(){return this.object.name},set_name:function(t){return this.object.name=t},set_visible:function(t){var e=this.object;return t?e.flags|=2:e.flags&=-3,t},get_x:function(){return this.object.x},get_y:function(){return this.object.y},get_z:function(){return this.object.z},set_x:function(t){this.position.x=t;var e=this.object;return e.x=t,e.flags|=1,t},set_y:function(t){this.position.y=t;var e=this.object;return e.y=t,e.flags|=1,t},set_z:function(t){this.position.z=t;var e=this.object;return e.z=t,e.flags|=1,t},get_scaleX:function(){return this.object.scaleX},get_scaleY:function(){return this.object.scaleY},get_scaleZ:function(){return this.object.scaleZ},set_scaleX:function(t){var e=this.object;return e.scaleX=t,e.flags|=1,t},set_scaleY:function(t){var e=this.object;return e.scaleY=t,e.flags|=1,t},set_scaleZ:function(t){var e=this.object;return e.scaleZ=t,e.flags|=1,t},__class__:Vl,__properties__:{set_visible:"set_visible",set_scaleZ:"set_scaleZ",get_scaleZ:"get_scaleZ",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_z:"set_z",get_z:"get_z",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_name:"set_name",get_name:"get_name",get_parent:"get_parent"}},{}),Ol=(Ql.init=function(t,e){null==e&&(s=new R(t.get_x(),t.get_y(),t.get_z()),n=t.getRotationQuat().toEuler(),i=new R(t.get_scaleX(),t.get_scaleY(),t.get_scaleZ()),e=new Ol(Ul.fromVector(s),Ul.fromVector(i),Ul.fromVector(n),Ul.fromVector(new R(1,1,1,1))));var n,s=t.position,i=Ul.toVector(e.pos),s=(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,t.rotation),i=Ul.toVector(e.rotation),s=(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,t.scaling),i=Ul.toVector(e.scale),s=(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,t.color),i=Ul.toVector(e.color);s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,t.home=e},Ql.translateTo=function(e,t){var n=new ep;return Nl.tween(e.position,t).handle(function(t){lp.nextTime(e.updateComplete).handle(function(){n.trigger(t)})}),n},Ql.scaleTo=function(e,t){var n=new ep;return Nl.tween(e.scaling,t).handle(function(t){lp.nextTime(e.updateComplete).handle(function(){n.trigger(t)})}),n},Ql.colorTo=function(e,t){var n=new ep;return Nl.tween(e.color,t).handle(function(t){lp.nextTime(e.updateComplete).handle(function(){n.trigger(t)})}),n},Ql.tween=function(a,r){var t;return null==r?new Jd(new Kd(!1)):((t=$d.irreversible(function(e){for(var t=[],n=0;n<r.length;){var s,i=r[n];switch(++n,i._hx_index){case 0:s=Nl.tween(a.position,i.v);break;case 1:s=Nl.tween(a.rotation,i.v);break;case 2:s=Nl.tween(a.scaling,i.v);break;case 3:s=Nl.tween(a.color,i.v)}t.push(s)}Ql.update(a,0),$d.inParallel(t).handle(function(t){lp.nextTime(a.updateComplete).handle(function(){e(-1==t.indexOf(!1))})})})).eager(),t)},Ql.update=function(t,e){var n,s,i,a;if(Nl.update(t.position,e)?(t.set_x(t.position.x),t.set_y(t.position.y),t.set_z(t.position.z)):(n=t.position,s=t.get_x(),i=t.get_y(),a=t.get_z(),n.x=null==s?n.x:s,n.y=null==i?n.y:i,n.z=null==a?n.z:a,n.w=n.w),Nl.update(t.rotation,e)?t.setRotation(t.rotation.x,t.rotation.y,t.rotation.z):(h=t.object.getRotationQuat().toEuler(),(u=t.rotation).x=h.x,u.y=h.y,u.z=h.z,u.w=h.w),Nl.update(t.scaling,e)?(t.set_scaleX(t.scaling.x),t.set_scaleY(t.scaling.y),t.set_scaleZ(t.scaling.z)):(n=t.scaling,s=t.get_scaleX(),i=t.get_scaleY(),a=t.get_scaleZ(),n.x=null==s?n.x:s,n.y=null==i?n.y:i,n.z=null==a?n.z:a,n.w=n.w),Nl.update(t.color,e))for(var r=0,l=t.getMaterials();r<l.length;){var o=l[r];++r,o.mshader.color__.x=t.color.x,o.mshader.color__.y=t.color.y,o.mshader.color__.z=t.color.z,o.mshader.color__.w=t.color.w}else{var h,u=t.getMaterials();null!=(o=null==u?null:u[0])&&(t.color.x=(h=o).mshader.color__.x,t.color.y=h.mshader.color__.y,t.color.z=h.mshader.color__.z,t.color.w=h.mshader.color__.w)}t.deltaTime=0<e?e:1,t.speedCalculatedThisFrame=!1,t.updateComplete.handlers.invoke(null)},function(t,e,n,s){this.color=null,this.rotation=null,this.scale=null,(this.pos=null)!=t&&(this.pos=t),null!=e&&(this.scale=e),null!=n&&(this.rotation=n),null!=s&&(this.color=s)}),Ll=((e["gasm.heaps.transform.Transform"]=Ol).__name__="gasm.heaps.transform.Transform",Ol.prototype={__class__:Ol},(e["gasm.heaps.transform.VectorTween"]=At).__name__="gasm.heaps.transform.VectorTween",At.prototype={clone:function(){return new At(null!=this.to?Ul.clone(this.to):null,null!=this.from?Ul.clone(this.from):null,this.onDone,this.delay,this.duration,this.time,this.curve,this.relative,this.curveDuration,this.repeat,this.onUpdate,this.onRepeat)},__class__:At},function(t,e,n,s){this.w=null,this.z=null,this.y=null,this.x=null,this.x=t,this.y=e,this.z=n,this.w=s}),Ul=((e["gasm.heaps.transform.TweenPos"]=Ll).__name__="gasm.heaps.transform.TweenPos",Ll.prototype={__class__:Ll},{}),Nl=(Ul.clone=function(t){return new Ll(t.x,t.y,t.z,t.w)},Ul.set=function(t,e,n){null==n&&(n=!1),t.x=null!=t.x||n?e.x:null,t.y=null!=t.y||n?e.y:null,t.z=null!=t.z||n?e.z:null,t.w=null!=t.w||n?e.w:null},Ul.add=function(t,e){t.x=null!=t.x?Xl.add(t.x,e.x):null,t.y=null!=t.y?Xl.add(t.y,e.y):null,t.z=null!=t.z?Xl.add(t.z,e.z):null,t.w=null!=t.w?Xl.add(t.w,e.w):null},Ul.fromVector=function(t){return new Ll(t.x,t.y,t.z,t.w)},Ul.toVector=function(t){var e,n,s;return null==t?null:(e=t.x,n=t.y,s=t.z,t=t.w,new R(null==e?0:e,null==n?0:n,null==s?0:s,null==t?1:t))},{}),R=(Nl.tween=function(n,s){var t=$d.irreversible(function(e){(0<(s=s.clone()).delay?n._scheduled:(s=Nl.setupTween(n,s),n._active)).push(s),s.onDone=function(t){0<s.delay?Jn.remove(n._scheduled,s):Jn.remove(n._active,s),e(t)}});return t.eager(),t},Nl.cancelUsedAxis=function(t,e){for(var n=[],s=0,i=t._active;s<i.length;){var a=i[s];++s,a.to.x=null==e.to.x?a.to.x:null,a.to.y=null==e.to.y?a.to.y:null,a.to.z=null==e.to.z?a.to.z:null,a.to.w=null==e.to.w?a.to.w:null,null==a.to.x&&null==a.to.y&&null==a.to.z&&null==a.to.w&&n.push(a)}for(s=0;s<n.length;){a=n[s];++s,a.onDone(!1),Jn.remove(t._active,a)}},Nl.cancel=function(t,e){null==e&&(e=!1);for(var n=0,s=t._active.concat(t._scheduled);n<s.length;)Nl.cancelTween(t,s[n++],e)},Nl.setupTween=function(t,e){var n=null!=e.from,s=null!=e.to;return s||(e.to=Ul.clone(e.from),Ul.set(e.to,Ul.fromVector(t))),n||(e.from=Ul.clone(e.to),Ul.set(e.from,Ul.fromVector(t))),e.relative&&(s&&Ul.add(e.to,Ul.fromVector(t)),n)&&Ul.add(e.from,Ul.fromVector(t)),Nl.cancelUsedAxis(t,e),e.time=0,e},Nl.cancelTween=function(t,e,n){(n=null==n?!1:n)?e.time=e.duration+e.delay+1:(e.to=new Ll(null,null,null,null),e.onDone(!1))},Nl.update=function(t,e){if(t._active.concat(t._scheduled).length<=0)return!1;for(var n=0,s=t._scheduled;n<s.length;){var i=s[n];++n,i.delay-=e,i.delay<=0&&(i.delay=0,Jn.remove(t._scheduled,i),t._active.push(Nl.setupTween(t,i)))}for(n=0,s=t._active;n<s.length;){var a,r,l,o,h,i=s[n],u=(++n,i.time+=e,!1),_=0<i.time?i.time/i.duration:0,c=(1<=(_=isNaN(_)||i.duration<=0?1:_)&&(u=!i.repeat,i.time=i.repeat?0:i.time,_=1,null!=i.onRepeat)&&i.onRepeat(),(i.duration-Math.min(i.curveDuration,i.duration))/i.duration);null!=i.to.x&&(null!=i.curveDuration?(a=Xl.sub(i.to.x,Xl.sub(i.to.x,i.from.x)*c),_<1-c?t.x=i.from.x*(1-_)+a*_:(r=i.curve(_),t.x=a*(1-r)+i.to.x*r)):(a=i.curve(_),t.x=i.from.x*(1-a)+i.to.x*a)),null!=i.to.y&&(null!=i.curveDuration?(r=Xl.sub(i.to.y,Xl.sub(i.to.y,i.from.y)*c),_<1-c?t.y=i.from.y*(1-_)+r*_:(l=i.curve(_),t.y=r*(1-l)+i.to.y*l)):(l=i.curve(_),t.y=i.from.y*(1-l)+i.to.y*l)),null!=i.to.z&&(null!=i.curveDuration?(o=Xl.sub(i.to.z,Xl.sub(i.to.z,i.from.z)*c),_<1-c?t.z=i.from.z*(1-_)+o*_:(h=i.curve(_),t.z=o*(1-h)+i.to.z*h)):(o=i.curve(_),t.z=i.from.z*(1-o)+i.to.z*o)),null!=i.to.w&&(null!=i.curveDuration?(h=Xl.sub(i.to.w,Xl.sub(i.to.w,i.from.w)*c),_<1-c?t.w=i.from.w*(1-_)+h*_:(c=i.curve(_),t.w=h*(1-c)+i.to.w*c)):(c=i.curve(_),t.w=i.from.w*(1-c)+i.to.w*c)),null!=i.onUpdate&&i.onUpdate(t.x,t.y,t.z,t.w),u&&i.onDone(!0)}return!0},function(t,e,n,s){null==s&&(s=1),null==n&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.z=n,this.w=s}),Gl=((e["h3d.Vector"]=R).__name__="h3d.Vector",R.prototype={__class__:R},function(t,e,n,s){null==s&&(s=1),null==n&&(n=0),null==e&&(e=0),null==t&&(t=0),this._scheduled=[],this._active=[],R.call(this,t,e,n,s)}),Xl=((e["gasm.heaps.transform.TweenVectorBacking"]=Gl).__name__="gasm.heaps.transform.TweenVectorBacking",Gl.__super__=R,Gl.prototype=t(R.prototype,{__class__:Gl}),{}),y=(Xl.add=function(t,e){return t+e},Xl.sub=function(t,e){return t-e},Xl.mult=function(t,e){return t*e},(e["h2d.Bitmap"]=xt).__name__="h2d.Bitmap",xt.__super__=zl,xt.prototype=t(zl.prototype,{getBoundsRec:function(t,e,n){zl.prototype.getBoundsRec.call(this,t,e,n),null!=this.tile&&(null==this.width&&null==this.height?this.addBounds(t,e,this.tile.dx,this.tile.dy,this.tile.width,this.tile.height):this.addBounds(t,e,this.tile.dx,this.tile.dy,null!=this.width?this.width:this.tile.width*this.height/this.tile.height,null!=this.height?this.height:this.tile.height*this.width/this.tile.width))},set_tile:function(t){return this.tile!=t&&(this.tile=t,null!=this.parentContainer)&&this.parentContainer.contentChanged(this),t},draw:function(t){var e,n;null==this.width&&null==this.height?this.emitTile(t,this.tile):(null==this.tile&&this.set_tile(Jl.fromColor(16711935)),e=this.tile.width,n=this.tile.height,this.tile.width=null!=this.width?this.width:e*this.height/n,this.tile.height=null!=this.height?this.height:n*this.width/e,this.emitTile(t,this.tile),this.tile.width=e,this.tile.height=n)},__class__:xt,__properties__:t(zl.prototype.__properties__,{set_tile:"set_tile"})}),d["h2d.BlendMode"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h2d.BlendMode",toString:l},Alpha:{_hx_name:"Alpha",_hx_index:1,__enum__:"h2d.BlendMode",toString:l},Add:{_hx_name:"Add",_hx_index:2,__enum__:"h2d.BlendMode",toString:l},AlphaAdd:{_hx_name:"AlphaAdd",_hx_index:3,__enum__:"h2d.BlendMode",toString:l},SoftAdd:{_hx_name:"SoftAdd",_hx_index:4,__enum__:"h2d.BlendMode",toString:l},Multiply:{_hx_name:"Multiply",_hx_index:5,__enum__:"h2d.BlendMode",toString:l},AlphaMultiply:{_hx_name:"AlphaMultiply",_hx_index:6,__enum__:"h2d.BlendMode",toString:l},Erase:{_hx_name:"Erase",_hx_index:7,__enum__:"h2d.BlendMode",toString:l},Screen:{_hx_name:"Screen",_hx_index:8,__enum__:"h2d.BlendMode",toString:l},Sub:{_hx_name:"Sub",_hx_index:9,__enum__:"h2d.BlendMode",toString:l},Max:{_hx_name:"Max",_hx_index:10,__enum__:"h2d.BlendMode",toString:l},Min:{_hx_name:"Min",_hx_index:11,__enum__:"h2d.BlendMode",toString:l}}),Yl=(y.__constructs__=[y.None,y.Alpha,y.Add,y.AlphaAdd,y.SoftAdd,y.Multiply,y.AlphaMultiply,y.Erase,y.Screen,y.Sub,y.Max,y.Min],y.__empty_constructs__=[y.None,y.Alpha,y.Add,y.AlphaAdd,y.SoftAdd,y.Multiply,y.AlphaMultiply,y.Erase,y.Screen,y.Sub,y.Max,y.Min],(e["h2d.Camera"]=bt).__name__="h2d.Camera",bt.prototype={layerVisible:function(t){return!0},enter:function(t){var e;t.pushCamera(this),this.clipViewport&&(e=t.inFilter,t.inFilter=null,t.pushRenderZone(this.viewX*this.scene.width,this.viewY*this.scene.height,this.viewW*this.scene.width,this.viewH*this.scene.height),t.inFilter=e)},exit:function(t){var e;this.clipViewport&&(e=t.inFilter,t.inFilter=null,t.popRenderZone(),t.inFilter=e),t.popCamera()},sync:function(t,e){var n;null==e&&(e=!1),null!=this.scene&&(null!=this.follow&&(this.posChanged=!0,this.x=this.follow.absX,this.posChanged=!0,this.y=this.follow.absY,this.followRotation)&&(this.posChanged=!0,this.rotation=-this.follow.rotation),this.posChanged||e)&&(0==this.rotation?(this.matA=this.scaleX,this.matB=0,this.matC=0,this.matD=this.scaleY):(e=Math.cos(this.rotation),n=Math.sin(this.rotation),this.matA=this.scaleX*e,this.matB=this.scaleX*n,this.matC=this.scaleY*-n,this.matD=this.scaleY*e),this.absX=Math.round(-(this.x*this.matA+this.y*this.matC)+this.scene.width*this.anchorX*this.viewW+this.scene.width*this.viewX),this.absY=Math.round(-(this.x*this.matB+this.y*this.matD)+this.scene.height*this.anchorY*this.viewH+this.scene.height*this.viewY),this.invDet=1/(this.matA*this.matD-this.matB*this.matC),this.posChanged=!1)},eventToCamera:function(t){var e=(t.relX-this.scene.offsetX)/this.scene.viewportScaleX-this.absX,n=(t.relY-this.scene.offsetY)/this.scene.viewportScaleY-this.absY;t.relX=(e*this.matD-n*this.matC)*this.invDet,t.relY=(-e*this.matB+n*this.matA)*this.invDet},__class__:bt},(e["h2d.Kerning"]=yt).__name__="h2d.Kerning",yt.prototype={__class__:yt},(e["h2d.FontChar"]=vt).__name__="h2d.FontChar",vt.prototype={addKerning:function(t,e){t=new yt(t,e);t.next=this.kerning,this.kerning=t},getKerningOffset:function(t){for(var e=this.kerning;null!=e;){if(e.prevChar==t)return e.offset;e=e.next}return 0},clone:function(){var t=new vt(this.t.clone(),this.width),e=this.kerning;if(null!=e){var n=new yt(e.prevChar,e.offset);for(t.kerning=n,e=e.next;null!=e;)n=n.next=new yt(e.prevChar,e.offset),e=e.next}return t},__class__:vt},d["h2d.FontType"]={__ename__:!0,__constructs__:null,BitmapFont:{_hx_name:"BitmapFont",_hx_index:0,__enum__:"h2d.FontType",toString:l},SignedDistanceField:((c=function(t,e,n){return{_hx_index:1,channel:t,alphaCutoff:e,smoothing:n,__enum__:"h2d.FontType",toString:l}})._hx_name="SignedDistanceField",c.__params__=["channel","alphaCutoff","smoothing"],c)}),Wl=(Yl.__constructs__=[Yl.BitmapFont,Yl.SignedDistanceField],Yl.__empty_constructs__=[Yl.BitmapFont],(e["h2d.Font"]=Ct).__name__="h2d.Font",Ct.prototype={clone:function(){for(var t=new Ct(this.name,this.size),e=(t.baseLine=this.baseLine,t.lineHeight=this.lineHeight,t.tile=this.tile.clone(),t.charset=this.charset,t.defaultChar=this.defaultChar.clone(),t.type=this.type,t.offsetX=this.offsetX,t.offsetY=this.offsetY,this.glyphs.keys());e.hasNext();){var n=e.next(),s=this.glyphs.h[n],i=s.clone();s==this.defaultChar&&(t.defaultChar=i),t.glyphs.h[n]=i}return t},resizeTo:function(t){for(var e=t/this.initSize,n=this.glyphs.iterator();n.hasNext();)for(var s=n.next(),i=(s.width*=e,s.t.scaleToSize(s.t.width*e,s.t.height*e),s.t.dx*=e,s.t.dy*=e,s.kerning);null!=i;)i.offset*=e,i=i.next;this.lineHeight=Math.ceil(this.lineHeight*e),this.baseLine=Math.ceil(this.baseLine*e),this.size=t},calcBaseLine:function(){var t=0,e=this.glyphs.h[32],e=(null!=e&&(t=.5*e.t.height),this.glyphs.h[65]);return null==(e=null==(e=null==e?this.glyphs.h[97]:e)?this.glyphs.h[48]:e)?this.lineHeight-2-t:e.t.dy+e.t.height-t},__class__:Ct},(e["h2d.GPoint"]=Mt).__name__="h2d.GPoint",Mt.prototype={load:function(t,e,n,s,i,a){this.x=t,this.y=e,this.r=n,this.g=s,this.b=i,this.a=a},__class__:Mt},(e["h3d.prim.Primitive"]=St).__name__="h3d.prim.Primitive",St.prototype={triCount:function(){return null!=this.indexes?this.indexes.count/3|0:null==this.buffer?0:this.buffer.totalVertices()/3|0},getBounds:function(){throw tr.thrown("not implemented for "+Ja.string(this))},incref:function(){this.refCount++},decref:function(){this.refCount--,this.refCount<=0&&(this.refCount=0,this.dispose())},alloc:function(t){throw tr.thrown("not implemented")},selectMaterial:function(t){},render:function(t){var e;null!=this.buffer&&null!=(e=this.buffer).buffer&&null!=e.buffer.vbuf||this.alloc(t),null==this.indexes?0!=(4&this.buffer.flags)?t.renderBuffer(this.buffer,t.mem.quadIndexes,2,0,-1):t.renderBuffer(this.buffer,t.mem.triIndexes,3,0,-1):t.renderIndexed(this.buffer,this.indexes)},dispose:function(){null!=this.buffer&&(this.buffer.dispose(),this.buffer=null),null!=this.indexes&&(this.indexes.dispose(),this.indexes=null)},toString:function(){return er.getClass(this).__name__.split(".").pop()},__class__:St},(e["h2d._Graphics.GraphicsContent"]=kt).__name__="h2d._Graphics.GraphicsContent",kt.__super__=St,kt.prototype=t(St.prototype,{setTile:function(t){null!=t&&this.state.setTexture(t.innerTex)},next:function(){if(this.tmp.pos>>3<32768)return!1;this.buffers.push({buf:this.tmp,idx:this.index,vbuf:null,ibuf:null,state:this.state}),this.tmp=U_._new(0),this.index=new Array(0);var t=this.state.tail.texture;return this.state=new eo,this.state.setTexture(t),St.prototype.dispose.call(this),!0},alloc:function(t){if(!(this.index.length<=0)){for(var e=pc.get(),n=(this.buffer=e.ofFloats(this.tmp,8,2),this.indexes=e.ofIndexes(this.index),0),s=this.buffers;n<s.length;){var i,a=s[n];++n,(null==a.vbuf||null==(i=a.vbuf).buffer||null==i.buffer.vbuf)&&(a.vbuf=e.ofFloats(a.buf,8,2)),null!=a.ibuf&&!a.ibuf.isDisposed()||(a.ibuf=e.ofIndexes(a.idx))}this.bufferDirty=!1,this.indexDirty=!1}},doRender:function(t){if(0!=this.index.length){this.flush();for(var e=0,n=this.buffers;e<n.length;){var s=n[e];++e,s.state.drawIndexed(t,s.vbuf,s.ibuf)}this.state.drawIndexed(t,this.buffer,this.indexes)}},flush:function(){var t;null==this.buffer||null==(t=this.buffer).buffer||null==t.buffer.vbuf?this.alloc(ao.CURRENT):(t=pc.get(),this.bufferDirty&&(t.disposeBuffer(this.buffer),this.buffer=t.ofFloats(this.tmp,8,2),this.bufferDirty=!1),this.indexDirty&&(t.disposeIndexBuffer(this.indexes),this.indexes=t.ofIndexes(this.index),this.indexDirty=!1))},dispose:function(){for(var t=0,e=this.buffers;t<e.length;){var n=e[t];++t,null!=n.vbuf&&pc.get().disposeBuffer(n.vbuf),null!=n.ibuf&&pc.get().disposeIndexBuffer(n.ibuf),n.vbuf=null,n.ibuf=null,n.state.clear()}null!=this.buffer&&(pc.get().disposeBuffer(this.buffer),this.buffer=null),null!=this.indexes&&(pc.get().disposeIndexBuffer(this.indexes),this.indexes=null),this.state.clear(),St.prototype.dispose.call(this)},clear:function(){this.dispose(),this.tmp=U_._new(0),this.index=new Array(0),this.buffers=[]},__class__:kt}),(e["h2d.Graphics"]=Bt).__name__="h2d.Graphics",Bt.__super__=zl,Bt.prototype=t(zl.prototype,{onRemove:function(){zl.prototype.onRemove.call(this),this.clear()},clear:function(){this.content.clear(),this.tmpPoints=[],this.pindex=0,this.lineSize=0,this.xMin=1/0,this.yMin=1/0,this.yMax=-1/0,this.xMax=-1/0,this.xMinSize=1/0,this.yMinSize=1/0,this.yMaxSize=-1/0,this.xMaxSize=-1/0},getBoundsRec:function(t,e,n){zl.prototype.getBoundsRec.call(this,t,e,n),null!=this.tile&&(n?this.addBounds(t,e,this.xMinSize,this.yMinSize,this.xMaxSize-this.xMinSize,this.yMaxSize-this.yMinSize):this.addBounds(t,e,this.xMin,this.yMin,this.xMax-this.xMin,this.yMax-this.yMin))},isConvex:function(t){for(var e=!0,n=!1,s=0,i=t.length;s<i;){var a=s++,r=t[a],l=t[(1+a)%t.length],a=t[(2+a)%t.length],l=0<(l.x-r.x)*(a.y-r.y)-(l.y-r.y)*(a.x-r.x);if(e)e=!1,n=l;else if(n!=l)return!1}return!0},flushLine:function(t){for(var e,n,s=this.tmpPoints,i=s.length-1,a=s[i],r=s[0],R=(this.content.setTile(Jl.fromColor(16777215)),r.x==a.x&&r.y==a.y),l=s.length,V=(R?r!=a&&(--l,a=s[--i]):(null==(e=s[i-1])&&(e=r),(n=new Mt).load(2*a.x-e.x,2*a.y-e.y,0,0,0,0),s.push(n),null==(e=s[1])&&(e=r),(n=new Mt).load(2*r.x-e.x,2*r.y-e.y,0,0,0,0),a=n),0),Q=l;V<Q;){var o,h,u,_,c,d,p,f,g,m,A,x,b,y,w,v,C,M,S,k=V++,B=s[(1+k)%s.length],I=a.y-r.y,T=r.x-a.x,F=1/Math.sqrt(I*I+T*T),D=r.y-B.y,E=B.x-r.x,P=1/Math.sqrt(D*D+E*E),D=I*F+D*P,E=T*F+E*P,P=1/Math.sqrt(D*D+E*E),P=(D*=P)*I*F+(E*=P)*T*F,z=(P<.1&&(P=.1),.5*this.lineSize/P);D*=z,E*=z,P>this.bevel?(z=this.content,P=r.x+D,_=r.y+E,c=r.r,d=r.g,p=r.b,f=r.a,(u=z.tmp).pos==u.array.length&&((o=u.array.length<<1)<128&&(o=128),(o=new Float32Array(o)).set(u.array),u.array=o),u.array[u.pos++]=P,(o=z.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(P=new Float32Array(u)).set(o.array),o.array=P),o.array[o.pos++]=_,(u=z.tmp).pos==u.array.length&&((P=u.array.length<<1)<128&&(P=128),(_=new Float32Array(P)).set(u.array),u.array=_),u.array[u.pos++]=0,(P=z.tmp).pos==P.array.length&&((_=P.array.length<<1)<128&&(_=128),(u=new Float32Array(_)).set(P.array),P.array=u),P.array[P.pos++]=0,(_=z.tmp).pos==_.array.length&&((u=_.array.length<<1)<128&&(u=128),(P=new Float32Array(u)).set(_.array),_.array=P),_.array[_.pos++]=c,(u=z.tmp).pos==u.array.length&&((P=u.array.length<<1)<128&&(P=128),(_=new Float32Array(P)).set(u.array),u.array=_),u.array[u.pos++]=d,(c=z.tmp).pos==c.array.length&&((P=c.array.length<<1)<128&&(P=128),(_=new Float32Array(P)).set(c.array),c.array=_),c.array[c.pos++]=p,(u=z.tmp).pos==u.array.length&&((d=u.array.length<<1)<128&&(d=128),(P=new Float32Array(d)).set(u.array),u.array=P),u.array[u.pos++]=f,z.bufferDirty=!0,_=this.content,c=r.x-D,p=r.y-E,d=r.r,P=r.g,u=r.b,f=r.a,(z=_.tmp).pos==z.array.length&&((h=z.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(z.array),z.array=h),z.array[z.pos++]=c,(h=_.tmp).pos==h.array.length&&((z=h.array.length<<1)<128&&(z=128),(c=new Float32Array(z)).set(h.array),h.array=c),h.array[h.pos++]=p,(z=_.tmp).pos==z.array.length&&((c=z.array.length<<1)<128&&(c=128),(p=new Float32Array(c)).set(z.array),z.array=p),z.array[z.pos++]=0,(c=_.tmp).pos==c.array.length&&((p=c.array.length<<1)<128&&(p=128),(z=new Float32Array(p)).set(c.array),c.array=z),c.array[c.pos++]=0,(p=_.tmp).pos==p.array.length&&((z=p.array.length<<1)<128&&(z=128),(c=new Float32Array(z)).set(p.array),p.array=c),p.array[p.pos++]=d,(z=_.tmp).pos==z.array.length&&((c=z.array.length<<1)<128&&(c=128),(p=new Float32Array(c)).set(z.array),z.array=p),z.array[z.pos++]=P,(d=_.tmp).pos==d.array.length&&((c=d.array.length<<1)<128&&(c=128),(p=new Float32Array(c)).set(d.array),d.array=p),d.array[d.pos++]=u,(z=_.tmp).pos==z.array.length&&((P=z.array.length<<1)<128&&(P=128),(c=new Float32Array(P)).set(z.array),z.array=c),z.array[z.pos++]=f,_.bufferDirty=!0,p=k==i?t:this.pindex+2,(k<l-1||R)&&((d=this.content).index.push(this.pindex),(u=d.state).tail.count+=1,u.totalCount+=1,d.indexDirty=!0,(P=this.content).index.push(this.pindex+1),(c=P.state).tail.count+=1,c.totalCount+=1,P.indexDirty=!0,(z=this.content).index.push(p),(f=z.state).tail.count+=1,f.totalCount+=1,z.indexDirty=!0,(_=this.content).index.push(this.pindex+1),(u=_.state).tail.count+=1,u.totalCount+=1,_.indexDirty=!0,(d=this.content).index.push(p),(c=d.state).tail.count+=1,c.totalCount+=1,d.indexDirty=!0,(P=this.content).index.push(p+1),(f=P.state).tail.count+=1,f.totalCount+=1,P.indexDirty=!0),this.pindex+=2):(z=-E,z*=_=.5*this.lineSize/(z*I*F+(u=D)*T*F),u*=_,c=k==i?t:this.pindex+3,0<(B.x-r.x)*D+(B.y-r.y)*E?(d=this.content,p=r.x+D,f=r.y+E,P=r.r,I=r.g,T=r.b,F=r.a,(k=d.tmp).pos==k.array.length&&((g=k.array.length<<1)<128&&(g=128),(g=new Float32Array(g)).set(k.array),k.array=g),k.array[k.pos++]=p,(g=d.tmp).pos==g.array.length&&((k=g.array.length<<1)<128&&(k=128),(k=new Float32Array(k)).set(g.array),g.array=k),g.array[g.pos++]=f,(k=d.tmp).pos==k.array.length&&((m=k.array.length<<1)<128&&(m=128),(m=new Float32Array(m)).set(k.array),k.array=m),k.array[k.pos++]=0,(m=d.tmp).pos==m.array.length&&((k=m.array.length<<1)<128&&(k=128),(k=new Float32Array(k)).set(m.array),m.array=k),m.array[m.pos++]=0,(k=d.tmp).pos==k.array.length&&((A=k.array.length<<1)<128&&(A=128),(A=new Float32Array(A)).set(k.array),k.array=A),k.array[k.pos++]=P,(A=d.tmp).pos==A.array.length&&((k=A.array.length<<1)<128&&(k=128),(P=new Float32Array(k)).set(A.array),A.array=P),A.array[A.pos++]=I,(k=d.tmp).pos==k.array.length&&((P=k.array.length<<1)<128&&(P=128),(I=new Float32Array(P)).set(k.array),k.array=I),k.array[k.pos++]=T,(P=d.tmp).pos==P.array.length&&((I=P.array.length<<1)<128&&(I=128),(k=new Float32Array(I)).set(P.array),P.array=k),P.array[P.pos++]=F,d.bufferDirty=!0,T=this.content,I=r.x-z,k=r.y-u,P=r.r,F=r.g,w=r.b,y=r.a,(v=T.tmp).pos==v.array.length&&((x=v.array.length<<1)<128&&(x=128),(x=new Float32Array(x)).set(v.array),v.array=x),v.array[v.pos++]=I,(x=T.tmp).pos==x.array.length&&((v=x.array.length<<1)<128&&(v=128),(I=new Float32Array(v)).set(x.array),x.array=I),x.array[x.pos++]=k,(v=T.tmp).pos==v.array.length&&((I=v.array.length<<1)<128&&(I=128),(k=new Float32Array(I)).set(v.array),v.array=k),v.array[v.pos++]=0,(I=T.tmp).pos==I.array.length&&((k=I.array.length<<1)<128&&(k=128),(v=new Float32Array(k)).set(I.array),I.array=v),I.array[I.pos++]=0,(k=T.tmp).pos==k.array.length&&((v=k.array.length<<1)<128&&(v=128),(I=new Float32Array(v)).set(k.array),k.array=I),k.array[k.pos++]=P,(v=T.tmp).pos==v.array.length&&((I=v.array.length<<1)<128&&(I=128),(k=new Float32Array(I)).set(v.array),v.array=k),v.array[v.pos++]=F,(P=T.tmp).pos==P.array.length&&((I=P.array.length<<1)<128&&(I=128),(k=new Float32Array(I)).set(P.array),P.array=k),P.array[P.pos++]=w,(v=T.tmp).pos==v.array.length&&((F=v.array.length<<1)<128&&(F=128),(I=new Float32Array(F)).set(v.array),v.array=I),v.array[v.pos++]=y,T.bufferDirty=!0,k=this.content,P=r.x+z,w=r.y+u,F=r.r,I=r.g,v=r.b,y=r.a,(T=k.tmp).pos==T.array.length&&((b=T.array.length<<1)<128&&(b=128),(b=new Float32Array(b)).set(T.array),T.array=b),T.array[T.pos++]=P,(b=k.tmp).pos==b.array.length&&((T=b.array.length<<1)<128&&(T=128),(P=new Float32Array(T)).set(b.array),b.array=P),b.array[b.pos++]=w,(T=k.tmp).pos==T.array.length&&((P=T.array.length<<1)<128&&(P=128),(w=new Float32Array(P)).set(T.array),T.array=w),T.array[T.pos++]=0,(P=k.tmp).pos==P.array.length&&((w=P.array.length<<1)<128&&(w=128),(T=new Float32Array(w)).set(P.array),P.array=T),P.array[P.pos++]=0,(w=k.tmp).pos==w.array.length&&((T=w.array.length<<1)<128&&(T=128),(P=new Float32Array(T)).set(w.array),w.array=P),w.array[w.pos++]=F,(T=k.tmp).pos==T.array.length&&((P=T.array.length<<1)<128&&(P=128),(w=new Float32Array(P)).set(T.array),T.array=w),T.array[T.pos++]=I,(F=k.tmp).pos==F.array.length&&((P=F.array.length<<1)<128&&(P=128),(w=new Float32Array(P)).set(F.array),F.array=w),F.array[F.pos++]=v,(T=k.tmp).pos==T.array.length&&((I=T.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(T.array),T.array=P),T.array[T.pos++]=y,k.bufferDirty=!0,(w=this.content).index.push(this.pindex),(F=w.state).tail.count+=1,F.totalCount+=1,w.indexDirty=!0,(v=this.content).index.push(c),(I=v.state).tail.count+=1,I.totalCount+=1,v.indexDirty=!0,(P=this.content).index.push(this.pindex+2),(T=P.state).tail.count+=1,T.totalCount+=1,P.indexDirty=!0,(y=this.content).index.push(this.pindex+2),(k=y.state).tail.count+=1,k.totalCount+=1,y.indexDirty=!0,(F=this.content).index.push(c),(w=F.state).tail.count+=1,w.totalCount+=1,F.indexDirty=!0,(I=this.content).index.push(c+1),(v=I.state).tail.count+=1,v.totalCount+=1,I.indexDirty=!0):(T=this.content,P=r.x+z,k=r.y+u,y=r.r,w=r.g,F=r.b,v=r.a,(I=T.tmp).pos==I.array.length&&((C=I.array.length<<1)<128&&(C=128),(C=new Float32Array(C)).set(I.array),I.array=C),I.array[I.pos++]=P,(C=T.tmp).pos==C.array.length&&((I=C.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(C.array),C.array=P),C.array[C.pos++]=k,(I=T.tmp).pos==I.array.length&&((P=I.array.length<<1)<128&&(P=128),(k=new Float32Array(P)).set(I.array),I.array=k),I.array[I.pos++]=0,(P=T.tmp).pos==P.array.length&&((k=P.array.length<<1)<128&&(k=128),(I=new Float32Array(k)).set(P.array),P.array=I),P.array[P.pos++]=0,(k=T.tmp).pos==k.array.length&&((I=k.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(k.array),k.array=P),k.array[k.pos++]=y,(I=T.tmp).pos==I.array.length&&((P=I.array.length<<1)<128&&(P=128),(k=new Float32Array(P)).set(I.array),I.array=k),I.array[I.pos++]=w,(P=T.tmp).pos==P.array.length&&((k=P.array.length<<1)<128&&(k=128),(I=new Float32Array(k)).set(P.array),P.array=I),P.array[P.pos++]=F,(k=T.tmp).pos==k.array.length&&((I=k.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(k.array),k.array=P),k.array[k.pos++]=v,T.bufferDirty=!0,F=this.content,I=r.x-D,P=r.y-E,k=r.r,T=r.g,D=r.b,E=r.a,(S=F.tmp).pos==S.array.length&&((M=S.array.length<<1)<128&&(M=128),(M=new Float32Array(M)).set(S.array),S.array=M),S.array[S.pos++]=I,(M=F.tmp).pos==M.array.length&&((S=M.array.length<<1)<128&&(S=128),(I=new Float32Array(S)).set(M.array),M.array=I),M.array[M.pos++]=P,(S=F.tmp).pos==S.array.length&&((I=S.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(S.array),S.array=P),S.array[S.pos++]=0,(I=F.tmp).pos==I.array.length&&((P=I.array.length<<1)<128&&(P=128),(S=new Float32Array(P)).set(I.array),I.array=S),I.array[I.pos++]=0,(P=F.tmp).pos==P.array.length&&((S=P.array.length<<1)<128&&(S=128),(I=new Float32Array(S)).set(P.array),P.array=I),P.array[P.pos++]=k,(S=F.tmp).pos==S.array.length&&((I=S.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(S.array),S.array=P),S.array[S.pos++]=T,(k=F.tmp).pos==k.array.length&&((I=k.array.length<<1)<128&&(I=128),(P=new Float32Array(I)).set(k.array),k.array=P),k.array[k.pos++]=D,(S=F.tmp).pos==S.array.length&&((T=S.array.length<<1)<128&&(T=128),(I=new Float32Array(T)).set(S.array),S.array=I),S.array[S.pos++]=E,F.bufferDirty=!0,P=this.content,k=r.x-z,D=r.y-u,T=r.r,I=r.g,S=r.b,E=r.a,(F=P.tmp).pos==F.array.length&&((z=F.array.length<<1)<128&&(z=128),(z=new Float32Array(z)).set(F.array),F.array=z),F.array[F.pos++]=k,(z=P.tmp).pos==z.array.length&&((F=z.array.length<<1)<128&&(F=128),(k=new Float32Array(F)).set(z.array),z.array=k),z.array[z.pos++]=D,(F=P.tmp).pos==F.array.length&&((k=F.array.length<<1)<128&&(k=128),(z=new Float32Array(k)).set(F.array),F.array=z),F.array[F.pos++]=0,(D=P.tmp).pos==D.array.length&&((k=D.array.length<<1)<128&&(k=128),(z=new Float32Array(k)).set(D.array),D.array=z),D.array[D.pos++]=0,(F=P.tmp).pos==F.array.length&&((k=F.array.length<<1)<128&&(k=128),(z=new Float32Array(k)).set(F.array),F.array=z),F.array[F.pos++]=T,(D=P.tmp).pos==D.array.length&&((k=D.array.length<<1)<128&&(k=128),(z=new Float32Array(k)).set(D.array),D.array=z),D.array[D.pos++]=I,(F=P.tmp).pos==F.array.length&&((T=F.array.length<<1)<128&&(T=128),(k=new Float32Array(T)).set(F.array),F.array=k),F.array[F.pos++]=S,(z=P.tmp).pos==z.array.length&&((D=z.array.length<<1)<128&&(D=128),(I=new Float32Array(D)).set(z.array),z.array=I),z.array[z.pos++]=E,P.bufferDirty=!0,(T=this.content).index.push(this.pindex+1),(k=T.state).tail.count+=1,k.totalCount+=1,T.indexDirty=!0,(F=this.content).index.push(c),(S=F.state).tail.count+=1,S.totalCount+=1,F.indexDirty=!0,(D=this.content).index.push(this.pindex+2),(I=D.state).tail.count+=1,I.totalCount+=1,D.indexDirty=!0,(z=this.content).index.push(this.pindex+1),(E=z.state).tail.count+=1,E.totalCount+=1,z.indexDirty=!0,(P=this.content).index.push(c),(k=P.state).tail.count+=1,k.totalCount+=1,P.indexDirty=!0,(T=this.content).index.push(c+1),(S=T.state).tail.count+=1,S.totalCount+=1,T.indexDirty=!0),(F=this.content).index.push(this.pindex),(I=F.state).tail.count+=1,I.totalCount+=1,F.indexDirty=!0,(D=this.content).index.push(this.pindex+1),(E=D.state).tail.count+=1,E.totalCount+=1,D.indexDirty=!0,(z=this.content).index.push(this.pindex+2),(k=z.state).tail.count+=1,k.totalCount+=1,z.indexDirty=!0,this.pindex+=3),a=r,r=B}this.content.setTile(this.tile)},flushFill:function(t){if(!(this.tmpPoints.length<3)){var e=this.tmpPoints,n=e[0],s=e[e.length-1],i=null,a=n.x-s.x;if((a<0?-a:a)<1e-9&&((a=n.y-s.y)<0?-a:a)<1e-9&&(i=e.pop()),this.isConvex(e))for(var r=1,l=e.length-1;r<l;){var o=r++;(_=this.content).index.push(t);(c=_.state).tail.count+=1,c.totalCount+=1,_.indexDirty=!0;var h=this.content,u=(h.index.push(t+o),h.state),u=(u.tail.count+=1,u.totalCount+=1,h.indexDirty=!0,this.content),h=(u.index.push(t+o+1),u.state);h.tail.count+=1,h.totalCount+=1,u.indexDirty=!0}else for(var _,c,n=Bt.EARCUT,r=(null==n&&(n=new nc,Bt.EARCUT=n),0),l=n.triangulate_h2d_GPoint(e);r<l.length;)(_=this.content).index.push(l[r++]+t),(c=_.state).tail.count+=1,c.totalCount+=1,_.indexDirty=!0;null!=i&&e.push(i)}},flush:function(){0!=this.tmpPoints.length&&(this.doFill&&(this.flushFill(this.pindex),this.pindex+=this.tmpPoints.length,this.content.next())&&(this.pindex=0),0<this.lineSize&&(this.flushLine(this.pindex),this.content.next())&&(this.pindex=0),this.tmpPoints=[])},beginFill:function(t,e){null==e&&(e=1),null==t&&(t=0),this.flush(),this.tile=Jl.fromColor(16777215),this.content.setTile(this.tile);e=null==e?1:e;this.curA=e,this.curR=(t>>16&255)/255,this.curG=(t>>8&255)/255,this.curB=(255&t)/255,this.doFill=!0},endFill:function(){this.flush(),this.doFill=!1},drawRect:function(t,e,n,s){this.flush(),this.addVertex(t,e,this.curR,this.curG,this.curB,this.curA,t*this.ma+e*this.mc+this.mx,t*this.mb+e*this.md+this.my);this.addVertex(i=t+n,e,this.curR,this.curG,this.curB,this.curA,i*this.ma+e*this.mc+this.mx,i*this.mb+e*this.md+this.my);var i=t+n,n=(this.addVertex(i,n=e+s,this.curR,this.curG,this.curB,this.curA,i*this.ma+n*this.mc+this.mx,i*this.mb+n*this.md+this.my),e+s);this.addVertex(t,n,this.curR,this.curG,this.curB,this.curA,t*this.ma+n*this.mc+this.mx,t*this.mb+n*this.md+this.my),this.addVertex(t,e,this.curR,this.curG,this.curB,this.curA,t*this.ma+e*this.mc+this.mx,t*this.mb+e*this.md+this.my),this.tmpPoints[0].x+=.01,this.tmpPoints[0].y+=.01,this.tmpPoints[1].y+=.01,this.tmpPoints[3].x+=.01,this.tmpPoints[4].x+=.01,this.tmpPoints[4].y+=.01,this.flush()},addVertex:function(t,e,n,s,i,a,r,l){null==l&&(l=0),null==r&&(r=0);var o,h,u,_=this.lineSize/2,r=(t-_<this.xMin&&(this.xMin=t-_),e-_<this.yMin&&(this.yMin=e-_),t+_>this.xMax&&(this.xMax=t+_),e+_>this.yMax&&(this.yMax=e+_),t<this.xMinSize&&(this.xMinSize=t),e<this.yMinSize&&(this.yMinSize=e),t>this.xMaxSize&&(this.xMaxSize=t),e>this.yMaxSize&&(this.yMaxSize=e),this.doFill&&((o=(_=this.content).tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=t,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=e,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=r,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=l,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=n,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=s,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=i,(o=_.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(o.array),o.array=u),o.array[o.pos++]=a,_.bufferDirty=!0),new Mt);r.load(t,e,this.lineR,this.lineG,this.lineB,this.lineA),this.tmpPoints.push(r)},draw:function(t){t.beginDrawBatchState(this)&&this.content.doRender(t)},sync:function(t){zl.prototype.sync.call(this,t),this.flush(),this.content.flush()},__class__:Bt}),(e["hxd.Interactive"]=It).__name__="hxd.Interactive",It.__isInterface__=!0,It.prototype={__class__:It},function(t,e,n,s){this.shapeY=0,this.shapeX=0,this.lastClickFrame=-1,this.mouseDownButton=-1,this.allowMultiClick=!1,this.enableRightButton=!1,this.propagateEvents=!1,this.cancelEvents=!1,this.cursor=O_.Button,Pl.call(this,n),this.width=t,this.height=e,this.shape=s}),jl=((e["h2d.Interactive"]=Wl).__name__="h2d.Interactive",Wl.__interfaces__=[It],Wl.__super__=Pl,Wl.prototype=t(Pl.prototype,{onAdd:function(){this.scene=this.getScene(),null!=this.scene&&this.scene.addEventTarget(this),Pl.prototype.onAdd.call(this)},draw:function(t){this.maskedBounds=t.getCurrentRenderZone(),null!=this.backgroundColor&&this.emitTile(t,Jl.fromColor(this.backgroundColor,0|this.width,0|this.height,(this.backgroundColor>>>24)/255))},getBoundsRec:function(t,e,n){Pl.prototype.getBoundsRec.call(this,t,e,n),null==this.backgroundColor&&!n||this.addBounds(t,e,0,0,0|this.width,0|this.height)},onHierarchyMoved:function(t){Pl.prototype.onHierarchyMoved.call(this,t),null!=this.scene&&(this.scene.removeEventTarget(this),this.scene=this.getScene(),null!=this.scene)&&this.scene.addEventTarget(this)},onRemove:function(){null!=this.scene&&(this.scene.removeEventTarget(this,!0),this.scene=null),Pl.prototype.onRemove.call(this)},checkBounds:function(t){switch(t.kind._hx_index){case 4:case 6:case 7:case 10:return!1;default:return!0}},getInteractiveScene:function(){return this.scene},handleEvent:function(t){if(null!=this.maskedBounds&&this.checkBounds(t)){var e=new El(t.relX,t.relY);if(this.localToGlobal(e),e.x<this.maskedBounds.xMin||e.y<this.maskedBounds.yMin||e.x>this.maskedBounds.xMax||e.y>this.maskedBounds.yMax)return void(t.cancel=!0)}if(null==this.shape&&this.isEllipse&&this.checkBounds(t)){var e=.5*this.width,n=.5*this.height,e=(t.relX-e)/e,n=(t.relY-n)/n;if(1<e*e+n*n)return void(t.cancel=!0)}switch(this.propagateEvents&&(t.propagate=!0),this.cancelEvents&&(t.cancel=!0),t.kind._hx_index){case 0:(this.enableRightButton||0==t.button)&&(this.mouseDownButton=t.button,this.onPush(t),t.cancel)&&(this.mouseDownButton=-1);break;case 1:var s;!this.enableRightButton&&0!=t.button||(this.onRelease(t),s=K_.frameCount,this.mouseDownButton!=t.button)||this.lastClickFrame==s&&!this.allowMultiClick||(this.onClick(t),this.lastClickFrame=s),this.mouseDownButton=-1;break;case 2:this.onMove(t);break;case 3:this.onOver(t);break;case 4:this.onOut(t);break;case 5:t.propagate=!0,this.onWheel(t);break;case 6:this.onFocus(t);break;case 7:this.onFocusLost(t);break;case 8:this.onKeyDown(t);break;case 9:this.onKeyUp(t);break;case 10:!this.enableRightButton&&0!=t.button||(this.onRelease(t),this.mouseDownButton!=t.button)||this.onReleaseOutside(t),this.mouseDownButton=-1;break;case 11:this.onTextInput(t);break;case 12:this.onCheck(t)}},calcAbsPos:function(){Pl.prototype.calcAbsPos.call(this),this.invDet=1/(this.matA*this.matD-this.matB*this.matC)},onOver:function(t){},onOut:function(t){},onPush:function(t){},onRelease:function(t){},onReleaseOutside:function(t){},onClick:function(t){},onMove:function(t){},onWheel:function(t){},onFocus:function(t){},onFocusLost:function(t){},onKeyUp:function(t){},onKeyDown:function(t){},onCheck:function(t){},onTextInput:function(t){},__class__:Wl}),(e["h2d.Layers"]=Tt).__name__="h2d.Layers",Tt.__super__=Pl,Tt.prototype=t(Pl.prototype,{addChild:function(t){this.add(t,-1)},add:function(t,e,n){var s,i;for(null==n&&(n=-1),null==e&&(e=-1),t.parent==this&&(s=t.allocated,t.allocated=!1,this.removeChild(t),t.allocated=s),-1==e&&(e=0==this.layerCount?0:this.layerCount-1);e>=this.layerCount;)this.layersIndexes[this.layerCount++]=this.children.length;-1!=n?0==e?(s=(i=this.layersIndexes[e])<n?i:n,Pl.prototype.addChildAt.call(this,t,0<s?s:0)):n<0?Pl.prototype.addChildAt.call(this,t,this.layersIndexes[e-1]):(s=this.layersIndexes[e-1]+n,i=this.layersIndexes[e],Pl.prototype.addChildAt.call(this,t,i<s?i:s)):Pl.prototype.addChildAt.call(this,t,this.layersIndexes[e]);for(var a=e,r=this.layerCount;a<r;)this.layersIndexes[a++]++},addChildAt:function(t,e){this.add(t,-1,e)},removeChild:function(t){for(var e=0,n=this.children.length;e<n;){var s=e++;if(this.children[s]==t){this.children.splice(s,1),t.allocated&&t.onRemove(),t.parent=null,t.posChanged=!0,null!=t.parentContainer&&t.setParentContainer(null);for(var i=this.layerCount-1;0<=i&&this.layersIndexes[i]>s;)this.layersIndexes[i]--,--i;null!=this.parentContainer&&this.parentContainer.contentChanged(this);break}}},__class__:Tt}),(e["h3d.impl.RenderContext"]=Ft).__name__="h3d.impl.RenderContext",Ft.prototype={dispose:function(){this.textures.dispose()},__class__:Ft},(e["h2d.RenderContext"]=Dt).__name__="h2d.RenderContext",Dt.__super__=Ft,Dt.prototype=t(Ft.prototype,{dispose:function(){Ft.prototype.dispose.call(this),null!=this.fixedBuffer&&this.fixedBuffer.dispose()},begin:function(){this.texture=null,this.currentObj=null,this.bufPos=0,this.stride=0,this.viewA=this.scene.viewportA,this.viewB=0,this.viewC=0,this.viewD=this.scene.viewportD,this.viewX=this.scene.viewportX,this.viewY=this.scene.viewportY,this.targetFlipY=this.engine.driver.hasFeature(co.BottomLeftCoords)?-1:1,this.baseFlipY=null!=this.engine.getCurrentTarget()?this.targetFlipY:1,this.inFilter=null,this.manager.globals.set("time",this.time),this.manager.globals.set("global.time",this.time);(t=this.baseShader).constModified=!0,t.pixelAlign__=!1;var t=this.baseShader.halfPixelInverse__,e=.5/this.engine.width,t=(null==(s=.5/this.engine.height)&&(s=0),t.x=e=null==e?0:e,t.y=s,t.z=0,t.w=1,this.baseShader.viewportA__),e=this.scene.viewportA,n=this.scene.viewportX,t=(null==n&&(n=0),t.x=e=null==e?0:e,t.y=0,t.z=n,t.w=1,this.baseShader.viewportB__),s=this.scene.viewportD*-this.baseFlipY;null==(n=this.scene.viewportY*-this.baseFlipY)&&(n=0),null==s&&(s=0),t.x=0,t.y=s,t.z=n,t.w=1,(t=this.baseShader.filterMatrixA__).x=1,t.y=0,t.z=0,t.w=1,(t=this.baseShader.filterMatrixB__).x=0,t.y=1,t.z=0,t.w=1,this.baseShaderList.next=null,this.initShaders(this.baseShaderList),this.engine.selectMaterial(this.pass),this.textures.begin()},initShaders:function(t){var e;this.currentShaders=t,this.compiledShader=this.manager.compileShaders(t),null==this.buffers?this.buffers=new $o(this.compiledShader):(t=this.buffers,e=this.compiledShader,t.vertex.grow(e.vertex),t.fragment.grow(e.fragment)),this.manager.fillGlobals(this.buffers,this.compiledShader),this.engine.selectShader(this.compiledShader),this.engine.uploadShaderBuffers(this.buffers,0)},end:function(){if(this.texture=null,this.currentObj=null,this.baseShaderList.next=null,0!=this.targetsStackIndex)throw tr.thrown("Missing popTarget()");if(0!=this.cameraStackIndex)throw tr.thrown("Missing popCamera()")},pushCamera:function(t){var e=this.cameraStack[this.cameraStackIndex++],n=(null==e&&this.cameraStack.push(e={va:0,vb:0,vc:0,vd:0,vx:0,vy:0}),this.viewA),s=this.viewB,i=this.viewC,a=this.viewD,e=(e.va=n,e.vb=s,e.vc=i,e.vd=a,e.vx=this.viewX,e.vy=this.viewY,this.viewA=t.matA*n+t.matB*i,this.viewB=t.matA*s+t.matB*a,this.viewC=t.matC*n+t.matD*i,this.viewD=t.matC*s+t.matD*a,this.viewX=t.absX*n+t.absY*i+this.viewX,this.viewY=t.absX*s+t.absY*a+this.viewY,null!=this.curTarget?-this.targetFlipY:-this.baseFlipY),n=this.baseShader.viewportA__,i=this.viewA,s=this.viewC,t=this.viewX,n=(null==t&&(t=0),null==s&&(s=0),n.x=i=null==i?0:i,n.y=s,n.z=t,n.w=1,this.baseShader.viewportB__),i=this.viewB*e,s=this.viewD*e;null==(t=this.viewY*e)&&(t=0),null==s&&(s=0),n.x=i=null==i?0:i,n.y=s,n.z=t,n.w=1},popCamera:function(){if(0==this.cameraStackIndex)throw tr.thrown("Too many popCamera()");var t=this.cameraStack[--this.cameraStackIndex],t=(this.viewA=t.va,this.viewB=t.vb,this.viewC=t.vc,this.viewD=t.vd,this.viewX=t.vx,this.viewY=t.vy,null!=this.curTarget?-this.targetFlipY:-this.baseFlipY),e=this.baseShader.viewportA__,n=this.viewA,s=this.viewC,i=this.viewX,e=(null==i&&(i=0),null==s&&(s=0),e.x=n=null==n?0:n,e.y=s,e.z=i,e.w=1,this.baseShader.viewportB__),n=this.viewB*t,s=this.viewD*t;null==(i=this.viewY*t)&&(i=0),null==s&&(s=0),e.x=n=null==n?0:n,e.y=s,e.z=i,e.w=1},pushFilter:function(t){return!(0==this.filterStack.length&&null!=this.onEnterFilter&&!this.onEnterFilter(t)||(this.inFilter=this.filterStack[this.filterStackIndex++],null==this.inFilter&&(this.inFilter={spr:null,scaleX:1,scaleY:1},this.filterStack.push(this.inFilter)),this.inFilter.spr=t,this.inFilter.scaleX=1,this.inFilter.scaleY=1,0))},setFilterScale:function(t,e){null!=this.inFilter&&(this.inFilter.scaleX=t,this.inFilter.scaleY=e)},getFilterScale:function(t){var e,n;return null==t&&(t=new El),null!=this.inFilter?(e=this.inFilter.scaleX,null==(n=this.inFilter.scaleY)&&(n=0),t.x=e=null==e?0:e,t.y=n):(t.x=1,t.y=1),t},popFilter:function(){this.inFilter.spr=null,this.filterStackIndex--,0<this.filterStackIndex?this.inFilter=this.filterStack[this.filterStackIndex-1]:(this.inFilter=null)!=this.onLeaveFilter&&this.onLeaveFilter(this.filterStack[this.filterStackIndex].spr)},pushTarget:function(t,e,n,s,i){null==i&&(i=-1),null==s&&(s=-1),null==n&&(n=0),null==e&&(e=0),this.engine.pushTarget(t),this.initShaders(this.baseShaderList);var a=this.targetsStack[this.targetsStackIndex++],a=(null==a&&this.targetsStack.push(a={t:null,va:0,vb:0,vc:0,vd:0,vx:0,vy:0,hasRZ:!1,rzX:0,rzY:0,rzW:0,rzH:0}),a.t=this.curTarget,a.va=this.viewA,a.vb=this.viewB,a.vc=this.viewC,a.vd=this.viewD,a.vx=this.viewX,a.vy=this.viewY,a.hasRZ=this.hasRenderZone,a.rzX=this.renderX,a.rzY=this.renderY,a.rzW=this.renderW,a.rzH=this.renderH,s<0&&(s=(null==t?this.scene:t).width),i<0&&(i=(null==t?this.scene:t).height),this.viewA=2/s,this.viewB=0,this.viewC=0,this.viewD=2/i,this.viewX=-1-e*this.viewA,this.viewY=-1-n*this.viewD,this.baseShader.halfPixelInverse__),s=.5/(null==t?this.engine:t).width,a=(null==(i=.5/(null==t?this.engine:t).height)&&(i=0),a.x=s=null==s?0:s,a.y=i,a.z=0,a.w=1,this.baseShader.viewportA__),s=this.viewA,i=this.viewC,e=this.viewX,a=(null==e&&(e=0),null==i&&(i=0),a.x=s=null==s?0:s,a.y=i,a.z=e,a.w=1,this.baseShader.viewportB__),s=this.viewB*-this.targetFlipY,i=this.viewD*-this.targetFlipY;null==(e=this.viewY*-this.targetFlipY)&&(e=0),null==i&&(i=0),a.x=s=null==s?0:s,a.y=i,a.z=e,a.w=1,this.curTarget=t,this.currentBlend=null,this.hasRenderZone&&(this.hasRenderZone=!1,this.engine.setRenderZone())},pushTargets:function(t){this.pushTarget(t[0]),1<t.length&&(this.engine.popTarget(),this.engine.pushTargets(t))},popTarget:function(){if(this.targetsStackIndex<=0)throw tr.thrown("Too many popTarget()");this.engine.popTarget();var t=this.targetsStack[--this.targetsStackIndex],e=this.curTarget=t.t,n=(this.viewA=t.va,this.viewB=t.vb,this.viewC=t.vc,this.viewD=t.vd,this.viewX=t.vx,this.viewY=t.vy,null==e?-this.baseFlipY:-this.targetFlipY),s=(this.initShaders(this.baseShaderList),this.baseShader.halfPixelInverse__),i=.5/(null==e?this.engine:e).width,s=(null==(e=.5/(null==e?this.engine:e).height)&&(e=0),s.x=i=null==i?0:i,s.y=e,s.z=0,s.w=1,this.baseShader.viewportA__),i=this.viewA,e=this.viewC,a=this.viewX,s=(null==a&&(a=0),null==e&&(e=0),s.x=i=null==i?0:i,s.y=e,s.z=a,s.w=1,this.baseShader.viewportB__),i=this.viewB*n,e=this.viewD*n;null==(a=this.viewY*n)&&(a=0),null==e&&(e=0),s.x=i=null==i?0:i,s.y=e,s.z=a,s.w=1,t.hasRZ&&this.setRZ(t.rzX,t.rzY,t.rzW,t.rzH)},pushRenderZone:function(t,e,n,s){var i=this.renderZoneStack[this.renderZoneIndex++];null==i?(i={hasRZ:this.hasRenderZone,x:this.renderX,y:this.renderY,w:this.renderW,h:this.renderH},this.renderZoneStack[this.renderZoneIndex-1]=i):this.hasRenderZone?(i.hasRZ=!0,i.x=this.renderX,i.y=this.renderY,i.w=this.renderW,i.h=this.renderH):i.hasRZ=!1,this.setRZ(t,e,n,s)},popRenderZone:function(){if(0==this.renderZoneIndex)throw tr.thrown("Too many popRenderZone()");var t=this.renderZoneStack[--this.renderZoneIndex];t.hasRZ?this.setRZ(t.x,t.y,t.w,t.h):(this.hasRenderZone=!1,this.engine.setRenderZone())},getCurrentRenderZone:function(){var t,e,n;return this.hasRenderZone?(t=this.renderX,e=this.renderY,(n=new to).xMin=t,n.yMin=e,n.xMax=t+this.renderW,n.yMax=e+this.renderH,n):null},setRZ:function(t,e,n,s){this.hasRenderZone=!0,this.renderX=t,this.renderY=e,this.renderW=n,this.renderH=s;var i,a,r,l,o,h,u=this.scene.viewportA*this.engine.width/2,_=this.scene.viewportD*this.engine.height/2;null!=this.inFilter&&(i=this.baseShader.filterMatrixA__,a=this.baseShader.filterMatrixB__,o=t*i.x+e*i.y+i.z,h=t*a.x+e*a.y+a.z,n=(r=t+n)*i.x+(l=e+s)*i.y+i.z-(t=o),s=r*a.x+l*a.y+a.z-(e=h)),this.engine.setRenderZone(t*u+(this.scene.viewportX+1)*(this.engine.width/2)+1e-10|0,e*_+(this.scene.viewportY+1)*(this.engine.height/2)+1e-10|0,n*u+1e-10|0,s*_+1e-10|0)},drawScene:function(){this.scene.drawRec(this)},beforeDraw:function(){null==this.texture&&(this.texture=A.fromColor(16711935)),this.baseShader.texture__=this.texture,this.texture.set_filter((null==this.currentObj.smooth?this.defaultSmooth:this.currentObj.smooth)?wo.Linear:wo.Nearest),this.texture.set_wrap(!this.currentObj.tileWrap||null!=this.currentObj.filter&&null==this.inFilter?vo.Clamp:vo.Repeat);var t=this.currentObj.blendMode;null!=this.inFilter&&this.inFilter.spr==this.currentObj&&t==y.Erase&&(t=y.Add),(t=null!=this.inFilterBlend?this.inFilterBlend:t)!=this.currentBlend&&(this.currentBlend=t,this.pass.setBlendMode(t),t!=y.Alpha&&t!=y.Add||(this.pass.set_blendAlphaSrc($a.One),null!=this.inFilterBlend&&this.pass.set_blendSrc($a.One))),this.manager.fillParams(this.buffers,this.compiledShader,this.currentShaders),this.engine.selectMaterial(this.pass),this.engine.uploadShaderBuffers(this.buffers,1),this.engine.uploadShaderBuffers(this.buffers,2),this.engine.uploadShaderBuffers(this.buffers,3)},beginDrawBatchState:function(t){var e,n,s,i,a;return!!this.beginDraw(t,null,!0)&&(null!=this.inFilter&&this.inFilter.spr==t?(n=this.baseShader.color__,s=t.color.x,i=t.color.y,a=t.color.z,null==(e=t.color.w)&&(e=1)):null!=this.inFilterBlend?(n=this.baseShader.color__,s=this.globalAlpha,i=this.globalAlpha,a=this.globalAlpha,null==(e=this.globalAlpha)&&(e=1)):(n=this.baseShader.color__,s=t.color.x,i=t.color.y,a=t.color.z,null==(e=t.color.w*this.globalAlpha)&&(e=1)),null==a&&(a=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=a,n.w=e,n=this.baseShader.absoluteMatrixA__,s=t.matA,i=t.matC,null==(a=t.absX)&&(a=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=a,n.w=1,n=this.baseShader.absoluteMatrixB__,s=t.matB,i=t.matD,null==(a=t.absY)&&(a=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=a,n.w=1,!0)},drawTile:function(t,e){var n,s,i,a,r;if(r=null!=this.inFilter?(r=this.baseShader.filterMatrixA__,l=this.baseShader.filterMatrixB__,n=t.matA*r.x+t.matB*r.y,s=t.matA*l.x+t.matB*l.y,i=t.matC*r.x+t.matD*r.y,a=t.matC*l.x+t.matD*l.y,r=t.absX*r.x+t.absY*r.y+r.z,l=t.absX*l.x+t.absY*l.y+l.z,g=n*this.viewA+s*this.viewC,n=n*this.viewB+s*this.viewD,s=i*this.viewA+a*this.viewC,i=i*this.viewB+a*this.viewD,a=r*this.viewA+l*this.viewC+this.viewX,r*this.viewB+l*this.viewD+this.viewY):(g=t.matA*this.viewA+t.matB*this.viewC,n=t.matA*this.viewB+t.matB*this.viewD,s=t.matC*this.viewA+t.matD*this.viewC,i=t.matC*this.viewB+t.matD*this.viewD,a=t.absX*this.viewA+t.absY*this.viewC+this.viewX,t.absX*this.viewB+t.absY*this.viewD+this.viewY),0==n&&0==s){var l=g<0?-g:g,o=i<0?-i:i,o=1.5*(e.width>e.height?e.width:e.height)*(l<o?o:l),l=a+(e.dx+.5*e.width)*g,h=r+(e.dy+.5*e.height)*i;if(l+o<-1||1<l-o||h+o<-1||1<h-o)return!1}else{var l=1e20,h=1e20,o=-1e20,u=-1e20,_=e.dx*g+e.dy*s,c=e.dx*n+e.dy*i;_<1e20&&(l=_),-1e20<_&&(o=_),c<1e20&&(h=c),-1e20<c&&(u=c);(_=((p=e.width)+e.dx)*g+e.dy*s)<l&&(l=_),o<_&&(o=_),(c=(p+e.dx)*n+e.dy*i)<h&&(h=c),u<c&&(u=c);var d=e.height,p=((_=e.dx*g+(d+e.dy)*s)<l&&(l=_),o<_&&(o=_),(c=e.dx*n+(d+e.dy)*i)<h&&(h=c),u<c&&(u=c),e.width),d=e.height;if((_=(p+e.dx)*g+(d+e.dy)*s)<l&&(l=_),(c=(p+e.dx)*n+(d+e.dy)*i)<h&&(h=c),u<c&&(u=c),a+(o=o<_?_:o)<-1||r+u<-1||1<a+l||1<r+h)return!1}if(!this.beginDraw(t,e.innerTex,!0,!0))return!1;null!=this.inFilter&&this.inFilter.spr==t?(x=this.baseShader.color__,p=t.color.x,d=t.color.y,b=t.color.z,null==(f=t.color.w)&&(f=1)):null!=this.inFilterBlend?(x=this.baseShader.color__,p=this.globalAlpha,d=this.globalAlpha,b=this.globalAlpha,null==(f=this.globalAlpha)&&(f=1)):(x=this.baseShader.color__,p=t.color.x,d=t.color.y,b=t.color.z,null==(f=t.color.w*this.globalAlpha)&&(f=1)),null==b&&(b=0),null==d&&(d=0),x.x=p=null==p?0:p,x.y=d,x.z=b,x.w=f;var f,g,m,A,x=this.baseShader.absoluteMatrixA__,p=e.width*t.matA,d=e.height*t.matC,x=(null==(b=t.absX+e.dx*t.matA+e.dy*t.matC)&&(b=0),null==d&&(d=0),x.x=p=null==p?0:p,x.y=d,x.z=b,x.w=1,this.baseShader.absoluteMatrixB__),p=e.width*t.matB,d=e.height*t.matD,x=(null==(b=t.absY+e.dx*t.matB+e.dy*t.matD)&&(b=0),null==d&&(d=0),x.x=p=null==p?0:p,x.y=d,x.z=b,x.w=1,this.baseShader.uvPos__),p=e.u,d=e.v,b=e.u2-e.u;return null==(f=e.v2-e.v)&&(f=1),null==b&&(b=0),null==d&&(d=0),x.x=p=null==p?0:p,x.y=d,x.z=b,x.w=f,this.beforeDraw(),(null==this.fixedBuffer||null==(x=this.fixedBuffer).buffer||null==x.buffer.vbuf)&&(this.fixedBuffer=new io(4,8,[so.Quads,so.RawFormat]),(g=U_._new(0)).pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=0,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,g.pos==g.array.length&&((m=g.array.length<<1)<128&&(m=128),(A=new Float32Array(m)).set(g.array),g.array=A),g.array[g.pos++]=1,this.fixedBuffer.uploadVector(g,0,4)),(x=this.engine).renderBuffer(this.fixedBuffer,x.mem.quadIndexes,2,0,-1),!0},beginDraw:function(t,e,n,s){if(null==s&&(s=!1),null!=this.onBeginDraw&&!this.onBeginDraw(t))return!1;for(var i=!1,a=!1,r=t.shaders,l=this.currentShaders.next;null!=r&&null!=l;){var o=r.s,h=l.s,r=r.next,l=l.next,u=h.instance;o!=h&&(a=!0),o.updateConstants(this.manager.globals),o.instance!=u&&(i=!0)}if(i=null==r&&null==l&&this.baseShader.isRelative__==n&&this.baseShader.hasUVPos__==s&&this.baseShader.killAlpha__==this.killAlpha?i:!0){var _=this.baseShader;_.constModified=!0,_.hasUVPos__=s,(_=this.baseShader).constModified=!0,_.isRelative__=n,(_=this.baseShader).constModified=!0,_.killAlpha__=this.killAlpha,this.baseShader.updateConstants(this.manager.globals),this.baseShaderList.next=t.shaders,this.initShaders(this.baseShaderList)}else if(a){if(this.currentShaders!=this.baseShaderList)throw tr.thrown("!");this.currentShaders.next=t.shaders}return this.texture=e,this.stride=8,this.currentObj=t,!0},__class__:Dt}),d["h2d.ScaleModeAlign"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"h2d.ScaleModeAlign",toString:l},Right:{_hx_name:"Right",_hx_index:1,__enum__:"h2d.ScaleModeAlign",toString:l},Center:{_hx_name:"Center",_hx_index:2,__enum__:"h2d.ScaleModeAlign",toString:l},Top:{_hx_name:"Top",_hx_index:3,__enum__:"h2d.ScaleModeAlign",toString:l},Bottom:{_hx_name:"Bottom",_hx_index:4,__enum__:"h2d.ScaleModeAlign",toString:l}}),Hl=(jl.__constructs__=[jl.Left,jl.Right,jl.Center,jl.Top,jl.Bottom],jl.__empty_constructs__=[jl.Left,jl.Right,jl.Center,jl.Top,jl.Bottom],d["h2d.ScaleMode"]={__ename__:!0,__constructs__:null,Resize:{_hx_name:"Resize",_hx_index:0,__enum__:"h2d.ScaleMode",toString:l},Stretch:((c=function(t,e){return{_hx_index:1,width:t,height:e,__enum__:"h2d.ScaleMode",toString:l}})._hx_name="Stretch",c.__params__=["width","height"],c),LetterBox:((c=function(t,e,n,s,i){return{_hx_index:2,width:t,height:e,integerScale:n,horizontalAlign:s,verticalAlign:i,__enum__:"h2d.ScaleMode",toString:l}})._hx_name="LetterBox",c.__params__=["width","height","integerScale","horizontalAlign","verticalAlign"],c),Fixed:((c=function(t,e,n,s,i){return{_hx_index:3,width:t,height:e,zoom:n,horizontalAlign:s,verticalAlign:i,__enum__:"h2d.ScaleMode",toString:l}})._hx_name="Fixed",c.__params__=["width","height","zoom","horizontalAlign","verticalAlign"],c),Zoom:((c=function(t){return{_hx_index:4,level:t,__enum__:"h2d.ScaleMode",toString:l}})._hx_name="Zoom",c.__params__=["level"],c),AutoZoom:((c=function(t,e,n){return{_hx_index:5,minWidth:t,minHeight:e,integerScaling:n,__enum__:"h2d.ScaleMode",toString:l}})._hx_name="AutoZoom",c.__params__=["minWidth","minHeight","integerScaling"],c)}),Zl=(Hl.__constructs__=[Hl.Resize,Hl.Stretch,Hl.LetterBox,Hl.Fixed,Hl.Zoom,Hl.AutoZoom],Hl.__empty_constructs__=[Hl.Resize],function(){}),ql=((e["hxd.InteractiveScene"]=Zl).__name__="hxd.InteractiveScene",Zl.__isInterface__=!0,Zl.prototype={__class__:Zl},function(){this.scaleMode=Hl.Resize,Tt.call(this,null);var t=ao.CURRENT;this.ctx=new Dt(this),this._cameras=[],new bt(this),this.set_interactiveCamera(this._cameras[0]),this.width=t.width,this.height=t.height,this.viewportA=2/t.width,this.viewportD=2/t.height,this.viewportX=-1,this.viewportY=-1,this.viewportScaleX=1,this.viewportScaleY=1,this.offsetX=0,this.offsetY=0,this.interactive=[],this.eventListeners=[],this.shapePoint=new El,this.window=J_.getInstance(),this.posChanged=!0}),Kl=((e["h2d.Scene"]=ql).__name__="h2d.Scene",ql.__interfaces__=[Zl,G],ql.__super__=Tt,ql.prototype=t(Tt.prototype,{setEvents:function(t){this.events=t},set_interactiveCamera:function(t){if(null==t)throw tr.thrown("Interactive cammera cannot be null!");return t.scene!=this&&this.addCamera(t),this.interactiveCamera=t},addCamera:function(t,e){null!=t.scene&&t.scene.removeCamera(t),t.scene=this,t.posChanged=!0,null!=e?this._cameras.splice(e,0,t):this._cameras.push(t)},removeCamera:function(t){if(t==this.interactiveCamera)throw tr.thrown("Current interactive Camera cannot be removed from camera list!");t.scene=null,Jn.remove(this._cameras,t)},checkResize:function(){var t=ao.CURRENT;if(null!=t){var e=this.scaleMode;switch(e._hx_index){case 0:var n=t.width,s=t.height;n==this.width&&s==this.height||(this.width=n,this.height=s,this.posChanged=!0),this.viewportScaleX=1,this.viewportScaleY=1,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1;break;case 1:var i=e.width,a=e.height;i==this.width&&a==this.height||(this.width=i,this.height=a,this.posChanged=!0),this.viewportScaleX=t.width/i,this.viewportScaleY=t.height/a,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1;break;case 2:var i=e.width,a=e.height,r=e.horizontalAlign,l=e.verticalAlign,o=(i==this.width&&a==this.height||(this.width=i,this.height=a,this.posChanged=!0),t.width/i),h=(d=t.height/a)<o?d:o,u=(e.integerScale&&0==(h|=0)&&(h=1),r),_=l;switch(this.viewportA=2*h/t.width,this.viewportD=2*h/t.height,this.viewportScaleX=h,this.viewportScaleY=h,(u=null==r?jl.Center:u)._hx_index){case 0:this.viewportX=-1,this.offsetX=0;break;case 1:this.viewportX=1-this.width*this.viewportA,this.offsetX=t.width-this.width*h;break;default:this.viewportX=Math.floor((t.width-this.width*h)/(2*h))*this.viewportA-1,this.offsetX=Math.floor((t.width-this.width*h)/2)}switch((_=null==l?jl.Center:_)._hx_index){case 3:this.viewportY=-1,this.offsetY=0;break;case 4:this.viewportY=1-this.height*this.viewportD,this.offsetY=t.height-this.height*h;break;default:this.viewportY=Math.floor((t.height-this.height*h)/(2*h))*this.viewportD-1,this.offsetY=Math.floor((t.height-this.height*h)/2)}break;case 3:var i=e.width,a=e.height,r=e.zoom,l=e.horizontalAlign,c=e.verticalAlign,u=(i==this.width&&a==this.height||(this.width=i,this.height=a,this.posChanged=!0),l),_=c;switch(this.viewportA=2*r/t.width,this.viewportD=2*r/t.height,this.viewportScaleX=r,this.viewportScaleY=r,(u=null==l?jl.Center:u)._hx_index){case 0:this.viewportX=-1,this.offsetX=0;break;case 1:this.viewportX=1-this.width*this.viewportA,this.offsetX=t.width-this.width*r;break;default:this.viewportX=Math.floor((t.width-this.width*r)/(2*r))*this.viewportA-1,this.offsetX=Math.floor((t.width-this.width*r)/2)}switch((_=null==c?jl.Center:_)._hx_index){case 3:this.viewportY=-1,this.offsetY=0;break;case 4:this.viewportY=1-this.height*this.viewportD,this.offsetY=t.height-this.height*r;break;default:this.viewportY=Math.floor((t.height-this.height*r)/(2*r))*this.viewportD-1,this.offsetY=Math.floor((t.height-this.height*r)/2)}break;case 4:i=e.level,n=Math.ceil(t.width/i),s=Math.ceil(t.height/i);n==this.width&&s==this.height||(this.width=n,this.height=s,this.posChanged=!0),this.viewportScaleX=i,this.viewportScaleY=i,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1;break;case 5:var d,o=t.width/e.minWidth,h=(d=t.height/e.minHeight)<o?d:o,n=(e.integerScaling&&0==(h|=0)&&(h=1),Math.ceil(t.width/h)),s=Math.ceil(t.height/h);n==this.width&&s==this.height||(this.width=n,this.height=s,this.posChanged=!0),this.viewportScaleX=h,this.viewportScaleY=h,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1}}},dispatchListeners:function(t){this.screenToViewport(t);for(var e=0,n=this.eventListeners;e<n.length&&(n[e++](t),t.propagate););},isInteractiveVisible:function(t){for(var e=t;e!=this;){if(null==e||!e.visible)return!1;e=e.parent}return!0},screenToViewport:function(t){this.interactiveCamera.eventToCamera(t)},dispatchEvent:function(t,e){this.screenToViewport(t);var n=t.relX-e.absX,s=t.relY-e.absY;t.relX=(n*e.matD-s*e.matC)*e.invDet,t.relY=(s*e.matA-n*e.matB)*e.invDet,e.handleEvent(t)},handleEvent:function(t,e){this.screenToViewport(t);for(var n=t.relX,s=t.relY,i=this.shapePoint,a=null==e?0:this.interactive.indexOf(e)+1,r=this.interactive.length;a<r;){var l=this.interactive[a++];if(null==l)break;if(0!=l.invDet){var o=n-l.absX,h=s-l.absY,u=(o*l.matD-h*l.matC)*l.invDet,h=(h*l.matA-o*l.matB)*l.invDet;if(null!=l.shape){var o=u+l.shapeX,_=h+l.shapeY;if(null==_&&(_=0),null==o&&(o=0),i.x=o,i.y=_,!l.shape.contains(i))continue}else if(h<0||u<0||u>=l.width||h>=l.height)continue;for(var c=!0,d=l;null!=d;){if(!d.visible){c=!1;break}d=d.parent}if(c){if(t.relX=u,t.relY=h,l.handleEvent(t),!t.cancel)return l;t.cancel=!1,t.propagate=!1}}}return null},addEventListener:function(t){this.eventListeners.push(t)},addEventTarget:function(t){for(var e=t,n=0;null!=e;)e=e.parent,++n;for(var s=n,i=0,a=this.interactive.length;i<a;){for(var r=i++,e=t,l=this.interactive[r],o=s,h=l,n=0;null!=h;)h=h.parent,++n;for(var u=n,_=e,c=l;u<o;)_=(e=_).parent,--o;for(;o<u;)c=(l=c).parent,--u;for(;_!=c;)_=(e=_).parent,c=(l=c).parent;for(var d=-1,p=0,f=_.children.length;p<f;){var g=p++;if(_.children[g]==e){d=g;break}}for(var m=d,A=-1,x=0,b=c.children.length;x<b;){var y=x++;if(c.children[y]==l){A=y;break}}if(A<m)return void this.interactive.splice(r,0,t)}this.interactive.push(t)},removeEventTarget:function(t,e){null==e&&(e=!1),Jn.remove(this.interactive,t),e&&null!=this.events&&this.events.onRemove(t)},dispose:function(){this.allocated&&this.onRemove(),this.ctx.dispose()},setElapsedTime:function(t){this.ctx.elapsedTime=t},drawImplTo:function(t,e,n){for(var s=0;s<e.length;)if(0==(1&e[s++].flags))throw tr.thrown("Can only draw to texture created with Target flag");this.ctx.engine=ao.CURRENT;var i=this.ctx.engine.backgroundColor,a=this.ctx.engine.inRender;this.ctx.engine.backgroundColor=null,this.ctx.globalAlpha=this.alpha,a?0==this.ctx.targetFlipY&&this.ctx.begin():(this.ctx.engine.begin(),this.ctx.begin()),this.ctx.pushTargets(e),null!=n&&this.ctx.manager.setOutput(n),t.drawRec(this.ctx),null!=n&&this.ctx.manager.setOutput(),this.ctx.popTarget(),this.ctx.engine.backgroundColor=i,a||(this.ctx.end(),this.ctx.engine.end())},syncOnly:function(t){var e=ao.CURRENT;this.setElapsedTime(t),this.ctx.engine=e,this.ctx.frame++,this.ctx.time+=this.ctx.elapsedTime,this.ctx.globalAlpha=this.alpha,this.sync(this.ctx)},render:function(t){this.ctx.engine=t,this.ctx.frame++,this.ctx.time+=this.ctx.elapsedTime,this.ctx.globalAlpha=this.alpha,this.sync(this.ctx),0!=this.children.length&&(this.ctx.begin(),this.ctx.drawScene(),this.ctx.end())},sync:function(t){for(var e=this.posChanged,n=(this.allocated||this.onAdd(),Tt.prototype.sync.call(this,t),0),s=this._cameras;n<s.length;)s[n++].sync(t,e)},clipBounds:function(t,e,n,s){null==s&&(s=1),null==n&&(n=1),h=null!=t.inFilter?(h=t.baseShader.filterMatrixA__,u=t.baseShader.filterMatrixB__,a=this.matA*h.x+this.matB*h.y,r=this.matA*u.x+this.matB*u.y,l=this.matC*h.x+this.matD*h.y,o=this.matC*u.x+this.matD*u.y,h=this.absX*h.x+this.absY*h.y+h.z,u=this.absX*u.x+this.absY*u.y+u.z,i=(a*t.viewA+r*t.viewC)/n,a=(a*t.viewB+r*t.viewD)/s,r=(l*t.viewA+o*t.viewC)/n,l=(l*t.viewB+o*t.viewD)/s,o=h*t.viewA+u*t.viewC+t.viewX,h*t.viewB+u*t.viewD+t.viewY):(i=(this.matA*t.viewA+this.matB*t.viewC)/n,a=(this.matA*t.viewB+this.matB*t.viewD)/s,r=(this.matC*t.viewA+this.matD*t.viewC)/n,l=(this.matC*t.viewB+this.matD*t.viewD)/s,o=this.absX*t.viewA+this.absY*t.viewC+t.viewX,this.absX*t.viewB+this.absY*t.viewD+t.viewY);var i,a,r,l,o,h,u=1/(i*l-a*r);e.xMin=((-1-o)*l+(h+1)*r)*u,e.yMin=((o+1)*a+(-1-h)*i)*u,e.xMax=((1-o)*l+(h-1)*r)*u,e.yMax=((o-1)*a+(1-h)*i)*u},drawContent:function(t){if(t.front2back){for(var e=0,n=this._cameras;e<n.length;){var s=n[e];if(++e,s.visible){var i=this.children.length,a=this.layerCount;for(s.enter(t);0<a--;){var r=0==a?0:this.layersIndexes[a-1];if(s.layerVisible(a))for(;r<=i;)this.children[i--].drawRec(t);else i=r-1}s.exit(t)}}this.draw(t)}else{this.draw(t);for(e=0,n=this._cameras;e<n.length;){s=n[e];if(++e,s.visible){i=0,a=0;for(s.enter(t);a<this.layerCount;){r=this.layersIndexes[a++];if(s.layerVisible(a-1))for(;i<r;)this.children[i++].drawRec(t);else i=r}s.exit(t)}}}},onAdd:function(){this.checkResize(),Tt.prototype.onAdd.call(this),this.window.addResizeEvent(W(this,this.checkResize))},onRemove:function(){Tt.prototype.onRemove.call(this),this.window.removeResizeEvent(W(this,this.checkResize))},__class__:ql,__properties__:t(Tt.prototype.__properties__,{set_interactiveCamera:"set_interactiveCamera"})}),d["h2d.Align"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"h2d.Align",toString:l},Right:{_hx_name:"Right",_hx_index:1,__enum__:"h2d.Align",toString:l},Center:{_hx_name:"Center",_hx_index:2,__enum__:"h2d.Align",toString:l},MultilineRight:{_hx_name:"MultilineRight",_hx_index:3,__enum__:"h2d.Align",toString:l},MultilineCenter:{_hx_name:"MultilineCenter",_hx_index:4,__enum__:"h2d.Align",toString:l}}),Jl=(Kl.__constructs__=[Kl.Left,Kl.Right,Kl.Center,Kl.MultilineRight,Kl.MultilineCenter],Kl.__empty_constructs__=[Kl.Left,Kl.Right,Kl.Center,Kl.MultilineRight,Kl.MultilineCenter],function(t,e,n,s,i,a,r){null==r&&(r=0),null==a&&(a=0),this.innerTex=t,this.x=e,this.y=n,this.width=s,this.height=i,this.dx=a,this.dy=r,null!=t&&this.setTexture(t)}),$l=((e["h2d.Tile"]=Jl).__name__="h2d.Tile",Jl.fromColor=function(t,e,n,s){null==n&&(n=1),null==e&&(e=1);t=new Jl(A.fromColor(t,s=null==s?1:s),0,0,1,1);return t.width=e,t.height=n,t},Jl.fromTexture=function(t){return new Jl(t,0,0,t.width,t.height)},Jl.prototype={setTexture:function(t){null!=(this.innerTex=t)&&(this.u=this.x/t.width,this.v=this.y/t.height,this.u2=(this.x+this.width)/t.width,this.v2=(this.y+this.height)/t.height)},sub:function(t,e,n,s,i,a){return new Jl(this.innerTex,this.x+t,this.y+e,n,s,i=null==i?0:i,a=null==a?0:a)},scaleToSize:function(t,e){this.width=t,this.height=e},dispose:function(){null!=this.innerTex&&this.innerTex.dispose(),this.innerTex=null},clone:function(){var t=new Jl(null,this.x,this.y,this.width,this.height,this.dx,this.dy);return t.innerTex=this.innerTex,t.u=this.u,t.u2=this.u2,t.v=this.v,t.v2=this.v2,t},__class__:Jl},(e["h2d.TileLayerContent"]=Et).__name__="h2d.TileLayerContent",Et.__super__=St,Et.prototype=t(St.prototype,{clear:function(){this.tmp=U_._new(0),null!=this.buffer&&(8*this.buffer.vertices<this.useAllocatorLimit?pc.get().disposeBuffer(this.buffer):this.buffer.dispose()),this.buffer=null,this.xMin=1/0,this.yMin=1/0,this.xMax=-1/0,this.yMax=-1/0,this.state.clear()},triCount:function(){return null==this.buffer?this.tmp.pos>>4:this.buffer.totalVertices()>>1},add:function(t,e,n,s,i,a,r){{var l=t+r.dx,o=e+r.dy,h;(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=l;var h,h=((h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=o,this.tmp),u=r.u,h=(h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,this.tmp),u=r.v,h,h,h;h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=n,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=s,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=i;var h,h=((h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=a,this.tmp),u=l+r.width;h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u;var h,h=((h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=o,this.tmp),u=r.u2,h=(h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,this.tmp),u=r.v,h,h;h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=n,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=s}(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=i,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=a;(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=l,h=this.tmp,u=o+r.height,h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,h=this.tmp,u=r.u,h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,h=this.tmp,u=r.v2;h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=n,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=s,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=i;(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=a,h=this.tmp,u=l+r.width,h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,h=this.tmp,u=o+r.height,h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,h=this.tmp,u=r.u2,h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,h=this.tmp,u=r.v2;h.pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=u,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=n,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=s,(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=i;(h=this.tmp).pos==h.array.length&&((_=h.array.length<<1)<128&&(_=128),(c=new Float32Array(_)).set(h.array),h.array=c),h.array[h.pos++]=a;var _,c,l=t+r.dx,o=e+r.dy,u=(l<this.xMin&&(this.xMin=l),o<this.yMin&&(this.yMin=o),l+=r.width,o+=r.height,l>this.xMax&&(this.xMax=l),o>this.yMax&&(this.yMax=o),null!=r&&this.state.setTexture(r.innerTex),this.state);u.tail.count+=4,u.totalCount+=4},alloc:function(t){null==this.tmp&&this.clear(),0<this.tmp.pos&&(this.buffer=this.tmp.pos<this.useAllocatorLimit?pc.get().ofFloats(this.tmp,8,3):io.ofFloats(this.tmp,8,[so.Quads,so.RawFormat]))},dispose:function(){null!=this.buffer&&(8*this.buffer.vertices<this.useAllocatorLimit?pc.get().disposeBuffer(this.buffer):this.buffer.dispose(),this.buffer=null),St.prototype.dispose.call(this)},__class__:Et}),function(t,e){zl.call(this,e),this.tile=t,this.rangeMin=this.rangeMax=-1,this.curColor=new R(1,1,1,1),this.content=new Et}),to=((e["h2d.TileGroup"]=$l).__name__="h2d.TileGroup",$l.__super__=zl,$l.prototype=t(zl.prototype,{getBoundsRec:function(t,e,n){zl.prototype.getBoundsRec.call(this,t,e,n),this.addBounds(t,e,this.content.xMin,this.content.yMin,this.content.xMax-this.content.xMin,this.content.yMax-this.content.yMin)},clear:function(){this.content.clear()},onRemove:function(){this.content.dispose(),zl.prototype.onRemove.call(this)},draw:function(t){this.drawWith(t,this)},sync:function(t){var e;zl.prototype.sync.call(this,t),!this.visible||null!=(t=this.content).buffer&&null!=(e=t.buffer).buffer&&null!=e.buffer.vbuf||t.alloc(ao.CURRENT)},drawWith:function(t,e){var n,s,i=this.content.triCount();0!=i&&t.beginDrawBatchState(e)&&(e=this.rangeMin<0?0:2*this.rangeMin,0<this.rangeMax&&this.rangeMax<2*i&&(i=2*this.rangeMax),null!=(n=this.content).buffer&&null!=(s=n.buffer).buffer&&null!=s.buffer.vbuf||n.alloc(ao.CURRENT),n.state.drawQuads(t,n.buffer,e,i-e))},__class__:$l}),(e["h2d.col.Collider"]=Pt).__name__="h2d.col.Collider",Pt.__isInterface__=!0,Pt.prototype={__class__:Pt},function(){this.xMin=1e20,this.yMin=1e20,this.xMax=-1e20,this.yMax=-1e20}),eo=((e["h2d.col.Bounds"]=to).__name__="h2d.col.Bounds",to.__interfaces__=[Pt],to.prototype={contains:function(t){return t.x>=this.xMin&&t.x<this.xMax&&t.y>=this.yMin&&t.y<this.yMax},__class__:to},(e["h2d.col.IBounds"]=zt).__name__="h2d.col.IBounds",zt.prototype={__class__:zt},(e["h2d.col.Matrix"]=Qt).__name__="h2d.col.Matrix",Qt.prototype={invert:function(){this.inverse(this)},inverse:function(t){var e=t.a,n=t.b,s=t.c,i=t.d,a=t.x,t=t.y,r=1/(this.a*this.d-this.b*this.c);this.a=i*r,this.b=-n*r,this.c=-s*r,this.d=e*r,this.x=(-a*i+s*t)*r,this.y=(a*n-e*t)*r},multiply:function(t,e){var n=t.a,s=t.b,i=t.c,a=t.d,r=t.x,t=t.y,l=e.a,o=e.b,h=e.c,u=e.d;this.a=n*l+s*h,this.b=n*o+s*u,this.c=i*l+a*h,this.d=i*o+a*u,this.x=r*l+t*h+e.x,this.y=r*o+t*u+e.y},__class__:Qt},(e["h2d.filter.Filter"]=Ot).__name__="h2d.filter.Filter",Ot.prototype={get_enable:function(){return this.enable},sync:function(t,e){},bind:function(t){},unbind:function(t){},getBounds:function(t,e,n){t.getBounds(t,e),e.xMin=e.xMin*n.x-this.boundsExtend,e.xMax=e.xMax*n.x+this.boundsExtend,e.yMin=e.yMin*n.y-this.boundsExtend,e.yMax=e.yMax*n.y+this.boundsExtend},draw:function(t,e){return e},__class__:Ot,__properties__:{get_enable:"get_enable"}},(e["h2d.filter.Hide"]=Lt).__name__="h2d.filter.Hide",Lt.__super__=Ot,Lt.prototype=t(Ot.prototype,{draw:function(t,e){return this.frame=t.frame,this.input=e,this.inputWidth=Math.ceil(e.width+e.x)-Math.floor(e.x),this.inputHeight=Math.ceil(e.height+e.y)-Math.floor(e.y),this.maskVisible?e:null},__class__:Lt}),(e["h2d.filter.AbstractMask"]=Ut).__name__="h2d.filter.AbstractMask",Ut.__super__=Ot,Ut.prototype=t(Ot.prototype,{set_maskVisible:function(t){return this.hide.maskVisible=t,this.maskVisible=t},bind:function(t){this.bindCount++,1==this.bindCount&&this.set_mask(this.mask)},unbind:function(t){this.bindCount--,0==this.bindCount&&this.set_mask(this.mask)},set_mask:function(t){if(null!=this.mask&&this.mask.filter==this.hide&&this.mask.set_filter(null),null!=(this.mask=t)&&0<this.bindCount){if(null!=t.filter){if(t.filter instanceof Lt)throw tr.thrown("Same mask can't be part of several filters");throw tr.thrown("Can't set mask with filter "+Ja.string(t.filter))}t.set_filter(this.hide)}return this.hide.input=null,t},getMaskTexture:function(t,e){var n=null==this.hide.input?null:this.hide.input.innerTex;if(null==n)return null;this.mask.getMatrix(this.maskMatrix);var s=this.maskMatrix,i=this.hide.input.dx,a=this.hide.input.dy,s=(s.x+=s.a*i+s.c*a,s.y+=s.b*i+s.d*a,this.maskMatrix.invert(),this.obj.getMatrix(this.tmpMatrix),this.tmpMatrix),i=e.dx,a=e.dy,i=(s.x+=s.a*i+s.c*a,s.y+=s.b*i+s.d*a,this.maskMatrix.multiply(this.tmpMatrix,this.maskMatrix),t.getFilterScale(Pl.tmpPoint)),s=(this.maskMatrix.x/=e.width/i.x,this.maskMatrix.y/=e.height/i.y,this.maskMatrix),a=e.width/this.hide.inputWidth,t=e.height/this.hide.inputHeight;return s.a*=a,s.c*=a,s.x*=a,s.b*=t,s.d*=t,s.y*=t,n.set_filter(this.smooth?wo.Linear:wo.Nearest),n},sync:function(t,e){if(this.obj=e,null==this.mask||this.hide.frame!=t.frame){for(var n=e;null!=n;){if(n==this.mask)throw tr.thrown("You can't mask with one of the object parents");n=n.parent}this.hide.input=null}},__class__:Ut,__properties__:t(Ot.prototype.__properties__,{set_maskVisible:"set_maskVisible",set_mask:"set_mask"})}),(e["h2d.filter.Blur"]=Nt).__name__="h2d.filter.Blur",Nt.__super__=Ot,Nt.prototype=t(Ot.prototype,{sync:function(t,e){this.boundsExtend=2*this.pass.radius},draw:function(t,e){var n=e.innerTex,s=n.filter;return n.set_filter(wo.Linear),this.pass.apply(t,n),n.set_filter(s),e},__class__:Nt}),(e["h2d.filter.Group"]=Gt).__name__="h2d.filter.Group",Gt.__super__=Ot,Gt.prototype=t(Ot.prototype,{get_enable:function(){if(this.enable)for(var t=0,e=this.filters;t<e.length;)if(++t,this.enable)return!0;return!1},bind:function(t){for(var e=0,n=this.filters;e<n.length;){var s=n[e];++e,s.get_enable()&&s.bind(t)}},unbind:function(t){for(var e=0,n=this.filters;e<n.length;){var s=n[e];++e,s.get_enable()&&s.unbind(t)}},sync:function(t,e){this.autoBounds=!0;for(var n=this.boundsExtend=0,s=this.filters;n<s.length;){var i=s[n];++n,i.get_enable()&&(i.sync(t,e),0<i.boundsExtend&&(this.boundsExtend+=i.boundsExtend),i.autoBounds||(this.autoBounds=!1))}},getBounds:function(t,e,n){for(var s=0,i=this.filters;s<i.length;){var a=i[s];++s,a.get_enable()&&!a.autoBounds&&a.getBounds(t,e,n)}},draw:function(t,e){for(var n=e.dx,s=e.dy,i=e,a=0,r=this.filters;a<r.length;){var l=r[a];if(++a,l.get_enable()){var o=e;if(null==(e=l.draw(t,e)))return null;e!=o&&(e.dx+=n,e.dy+=s)}}return i!=e&&(e.dx-=n,e.dy-=s),e},__class__:Gt}),(e["h2d.filter._Mask.MaskShader"]=Xt).__name__="h2d.filter._Mask.MaskShader",Xt._SHADER=null,Xt.__super__=n,Xt.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_mask:function(){return this.mask__},set_mask:function(t){return this.mask__=t},get_maskMatA:function(){return this.maskMatA__},set_maskMatA:function(t){return this.maskMatA__=t},get_maskMatB:function(){return this.maskMatB__},set_maskMatB:function(t){return this.maskMatB__=t},get_smoothAlpha:function(){return this.smoothAlpha__},set_smoothAlpha:function(t){return this.constModified=!0,this.smoothAlpha__=t},updateConstants:function(t){this.constBits=0,this.smoothAlpha__&&(this.constBits|=1),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.mask__;case 3:return this.maskMatA__;case 4:return this.maskMatB__;case 5:return this.smoothAlpha__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Xt,__properties__:t(n.prototype.__properties__,{set_smoothAlpha:"set_smoothAlpha",get_smoothAlpha:"get_smoothAlpha",set_maskMatB:"set_maskMatB",get_maskMatB:"get_maskMatB",set_maskMatA:"set_maskMatA",get_maskMatA:"get_maskMatA",set_mask:"set_mask",get_mask:"get_mask",set_texture:"set_texture",get_texture:"get_texture"})}),(e["h2d.filter.Mask"]=Yt).__name__="h2d.filter.Mask",Yt.__super__=Ut,Yt.prototype=t(Ut.prototype,{set_smoothAlpha:function(t){var e=this.pass.shader;return e.constModified=!0,e.smoothAlpha__=t},draw:function(t,e){if(null==this.getMaskTexture(t,e)){if(null==this.mask)throw tr.thrown("Mask filter has no mask object");return null}var n=t.textures.allocTileTarget("maskTmp",e),e=(t.engine.pushTarget(n),this.pass.shader.texture__=e.innerTex,this.pass.shader.mask__=this.getMaskTexture(t,e),this.pass.shader.maskMatA__),s=this.maskMatrix.a,i=this.maskMatrix.c,a=this.maskMatrix.x,e=(null==a&&(a=0),null==i&&(i=0),e.x=s=null==s?0:s,e.y=i,e.z=a,e.w=1,this.pass.shader.maskMatB__),s=this.maskMatrix.b,i=this.maskMatrix.d;return null==(a=this.maskMatrix.y)&&(a=0),null==i&&(i=0),e.x=s=null==s?0:s,e.y=i,e.z=a,e.w=1,this.pass.render(),t.engine.popTarget(),Jl.fromTexture(n)},__class__:Yt,__properties__:t(Ut.prototype.__properties__,{set_smoothAlpha:"set_smoothAlpha"})}),(e["h2d.filter.Outline"]=Wt).__name__="h2d.filter.Outline",Wt.__super__=Ot,Wt.prototype=t(Ot.prototype,{sync:function(t,e){this.boundsExtend=2*this.pass.size},draw:function(t,e){var n=e.innerTex,s=n.filter;return n.set_filter(wo.Linear),this.pass.apply(t,n),n.set_filter(s),e},__class__:Wt}),(e["h2d.filter.Shader"]=jt).__name__="h2d.filter.Shader",jt.__super__=Ot,jt.prototype=t(Ot.prototype,{get_shader:function(){return this.pass.shader},draw:function(t,e){var n=t.textures.allocTileTarget("shaderTmp",e);return t.engine.pushTarget(n),this.get_shader()[this.textureParam+"__"]=e.innerTex,this.nearest&&e.innerTex.set_filter(wo.Nearest),this.pass.render(),t.engine.popTarget(),Jl.fromTexture(n)},__class__:jt,__properties__:t(Ot.prototype.__properties__,{get_shader:"get_shader"})}),function(){this.head=this.tail=new no(null),this.totalCount=0}),no=((e["h2d.impl.BatchDrawState"]=eo).__name__="h2d.impl.BatchDrawState",eo.prototype={setTexture:function(t){var e;null!=t&&(null==this.tail.texture?this.tail.texture=t:this.tail.texture!=t&&(0==(e=this.tail).count?e.set(t):null==e.next?e.next=this.tail=new no(t):this.tail=e.next.set(t)))},clear:function(){for(var t=this.head;(t.texture=null)!=(t=t.next););this.tail=this.head,this.tail.count=0,this.totalCount=0},drawQuads:function(t,e,n,s){null==s&&(s=-1);var i,a=this.head,r=this.tail.next,l=t.engine;if(0==(n=null==n?0:n)&&-1==s)do{}while(t.texture=a.texture,t.beforeDraw(),null==(u=i=a.count>>1)&&(u=-1),null==(h=n)&&(h=0),l.renderBuffer(e,l.mem.quadIndexes,2,h,u),n+=i,(a=a.next)!=r);else{-1==s&&(s=(this.totalCount>>1)-n);var o=0;do{if(n<=o+(i=a.count>>1)){var h,u,_=i<s?i:s;if(t.texture=a.texture,t.beforeDraw(),null==(u=_)&&(u=-1),null==(h=o<=n?n:o)&&(h=0),l.renderBuffer(e,l.mem.quadIndexes,2,h,u),0==(s-=_))break}}while(o+=i,(a=a.next)!=r)}},drawIndexed:function(t,e,n,s,i){null==i&&(i=-1);var a,r=this.head,l=this.tail.next,o=t.engine;if(0==(s=null==s?0:s)&&-1==i)for(;t.texture=r.texture,t.beforeDraw(),a=r.count/3|0,o.renderIndexed(e,n,s,a),s+=a,(r=r.next)!=l;);else{-1==i&&(i=this.totalCount/3|0);var h=0;do{if(s<=h+(a=r.count/3|0)){var u=a<i?a:i;if(t.texture=r.texture,t.beforeDraw(),o.renderIndexed(e,n,h<=s?s:h,u),0==(i-=u))break}}while(h+=a,(r=r.next)!=l)}},__class__:eo},function(t){this.texture=t,this.count=0}),so=((e["h2d.impl._BatchDrawState.StateEntry"]=no).__name__="h2d.impl._BatchDrawState.StateEntry",no.prototype={set:function(t){return this.texture=t,this.count=0,this},__class__:no},d["h3d.BufferFlag"]={__ename__:!0,__constructs__:null,Dynamic:{_hx_name:"Dynamic",_hx_index:0,__enum__:"h3d.BufferFlag",toString:l},Triangles:{_hx_name:"Triangles",_hx_index:1,__enum__:"h3d.BufferFlag",toString:l},Quads:{_hx_name:"Quads",_hx_index:2,__enum__:"h3d.BufferFlag",toString:l},Managed:{_hx_name:"Managed",_hx_index:3,__enum__:"h3d.BufferFlag",toString:l},RawFormat:{_hx_name:"RawFormat",_hx_index:4,__enum__:"h3d.BufferFlag",toString:l},NoAlloc:{_hx_name:"NoAlloc",_hx_index:5,__enum__:"h3d.BufferFlag",toString:l},UniformBuffer:{_hx_name:"UniformBuffer",_hx_index:6,__enum__:"h3d.BufferFlag",toString:l},LargeBuffer:{_hx_name:"LargeBuffer",_hx_index:7,__enum__:"h3d.BufferFlag",toString:l}}),io=(so.__constructs__=[so.Dynamic,so.Triangles,so.Quads,so.Managed,so.RawFormat,so.NoAlloc,so.UniformBuffer,so.LargeBuffer],so.__empty_constructs__=[so.Dynamic,so.Triangles,so.Quads,so.Managed,so.RawFormat,so.NoAlloc,so.UniformBuffer,so.LargeBuffer],function(t,e,n){if(this.id=io.GUID++,this.vertices=t,this.flags=0,null!=n)for(var s=0;s<n.length;)this.flags|=1<<n[s++]._hx_index;0==(32&this.flags)&&ao.CURRENT.mem.allocBuffer(this,e)}),ao=((e["h3d.Buffer"]=io).__name__="h3d.Buffer",io.ofFloats=function(t,e,n){var s=t.pos/e|0,e=new io(s,e,n);return e.uploadVector(t,0,s),e},io.ofSubFloats=function(t,e,n,s){e=new io(n,e,s);return e.uploadVector(t,0,n),e},io.prototype={dispose:function(){null!=this.buffer&&(this.buffer.freeBuffer(this),(this.buffer=null)!=this.next)&&this.next.dispose()},totalVertices:function(){for(var t=0,e=this;null!=e;)t+=e.vertices,e=e.next;return t},uploadVector:function(t,e,n,s){null==s&&(s=0);for(var i=this;null!=i&&s>=i.vertices;)s-=i.vertices,i=i.next;for(;0<n;){if(null==i)throw tr.thrown("Too many vertices");var a=n+s>i.vertices?i.vertices-s:n;i.buffer.uploadVertexBuffer(i.position+s,a,t,e),s=0,e+=a*this.buffer.stride,n-=a,i=i.next}},uploadBytes:function(t,e,n){for(var s=this;0<n;){if(null==s)throw tr.thrown("Too many vertices");var i=n>s.vertices?s.vertices:n;s.buffer.uploadVertexBytes(s.position,i,t,e),e+=i*this.buffer.stride*4,n-=i,s=s.next}},__class__:io},(e["h3d.BufferOffset"]=Ht).__name__="h3d.BufferOffset",Ht.prototype={dispose:function(){null!=this.buffer&&(this.buffer.dispose(),this.buffer=null),this.next=null},__class__:Ht},(e["h3d.Camera"]=Zt).__name__="h3d.Camera",Zt.prototype={setFovX:function(t,e){var n=Math.PI/180;this.fovY=2*Math.atan(Math.tan(.5*t*n)/e)/n},clone:function(){var t=new Zt(this.fovY,this.zoom,this.screenRatio,this.zNear,this.zFar,this.rightHanded),e=this.pos,e=(t.pos=new R(e.x,e.y,e.z,e.w),this.up),e=(t.up=new R(e.x,e.y,e.z,e.w),this.target);return t.target=new R(e.x,e.y,e.z,e.w),t.update(),t},getInverseViewProj:function(){return null==this.minv&&(this.minv=new ro),this.needInv&&(this.minv.initInverse(this.m),this.needInv=!1),this.minv},getInverseView:function(){return null==this.mcamInv&&(this.mcamInv=new ro,this.mcamInv._44=0),0==this.mcamInv._44&&this.mcamInv.initInverse(this.mcam),this.mcamInv},unproject:function(t,e,n){var t=new R(t,e,n),e=this.getInverseViewProj(),n=t.x*e._12+t.y*e._22+t.z*e._32+t.w*e._42,s=t.x*e._13+t.y*e._23+t.z*e._33+t.w*e._43,i=1/(t.x*e._14+t.y*e._24+t.z*e._34+t.w*e._44);return t.x=(t.x*e._11+t.y*e._21+t.z*e._31+t.w*e._41)*i,t.y=n*i,t.z=s*i,t.w=1,t},update:function(){if(null!=this.follow){var t=this.follow.pos.localToGlobal(),e=this.follow.target.localToGlobal(),n=this.pos,s=t.x,i=t.y,t=t.z,n=(null==t&&(t=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=t,n.w=1,this.target),s=e.x,i=e.y;if(null==(t=e.z)&&(t=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=t,n.w=1,null!=this.follow.pos.name)for(var a=this.follow.pos;null!=a;){if(null!=a.currentAnimation){var r=a.currentAnimation.getPropValue(this.follow.pos.name,"FOVY");if(null!=r){this.fovY=r;break}}a=a.parent}}this.makeCameraMatrix(this.mcam),this.makeFrustumMatrix(this.mproj),this.m.multiply(this.mcam,this.mproj),this.needInv=!0,null!=this.mcamInv&&(this.mcamInv._44=0),null!=this.mprojInv&&(this.mprojInv._44=0),this.frustum.loadMatrix(this.m)},makeCameraMatrix:function(t){var e=this.target,n=this.pos,s=e.x-n.x,i=e.y-n.y,a=e.z-n.z,r=s=null==s?0:s,l=i=null==i?0:i,o=a=null==a?0:a,h=(this.rightHanded&&(r*=-1,l*=-1,o*=-1),r*r+l*l+o*o);h=h<1e-10?0:1/Math.sqrt(h);var u=s=null==(s=(e=this.up).y*(o*=h)-e.z*(l*=h))?0:s,_=i=null==(i=e.z*(r*=h)-e.x*o)?0:i,e=a=null==(a=e.x*l-e.y*r)?0:a;u*=h=(h=u*u+_*_+e*e)<1e-10?0:1/Math.sqrt(h),_*=h,e*=h,0==Math.sqrt(u*u+_*_+e*e)&&(u=l,_=o,e=r);h=s=null==(s=l*e-o*_)?0:s,s=i=null==(i=o*u-r*e)?0:i,i=a=null==(a=r*_-l*u)?0:a,t._11=u,t._12=h,t._13=r,t._14=0,t._21=_,t._22=s,t._23=l,t._24=0,t._31=e,t._32=i,t._33=o,t._34=0,n=this.pos,t._41=-(u*n.x+_*n.y+e*n.z),n=this.pos,t._42=-(h*n.x+s*n.y+i*n.z),n=this.pos;t._43=-(r*n.x+l*n.y+o*n.z),t._44=1},makeFrustumMatrix:function(t){t.zero();var e,n,s,i=this.orthoBounds;null!=i?(n=1/(i.xMax-i.xMin),s=1/(i.yMax-i.yMin),e=1/(i.zMax-i.zMin),t._11=2*n,t._22=2*s,t._33=e,t._41=-(i.xMin+i.xMax)*n,t._42=-(i.yMin+i.yMax)*s,t._43=-i.zMin*e,t._44=1):(n=Math.PI/180,s=this.zoom/Math.tan(Math.atan(Math.tan(.5*this.fovY*n)*this.screenRatio)),t._11=s,t._22=s*this.screenRatio,t._33=this.zFar/(this.zFar-this.zNear),t._34=1,t._43=-(this.zNear*this.zFar)/(this.zFar-this.zNear)),t._11+=this.viewX*t._14,t._21+=this.viewX*t._24,t._31+=this.viewX*t._34,t._41+=this.viewX*t._44,t._12+=this.viewY*t._14,t._22+=this.viewY*t._24,t._32+=this.viewY*t._34,t._42+=this.viewY*t._44,this.rightHanded&&(t._33*=-1,t._34*=-1)},project:function(t,e,n,s,i,a,r){null==a&&(a=!0);var l=t,o=e,n=null==n?0:n,e=(null==e&&(o=0),(r=null==r?new R:r).x=l=null==t?0:l,r.y=o,r.z=n,r.w=1,this.m),t=r.x*e._12+r.y*e._22+r.z*e._32+r.w*e._42,l=r.x*e._13+r.y*e._23+r.z*e._33+r.w*e._43,o=1/(r.x*e._14+r.y*e._24+r.z*e._34+r.w*e._44);return r.x=(r.x*e._11+r.y*e._21+r.z*e._31+r.w*e._41)*o,r.y=t*o,r.z=l*o,r.w=1,r.x=.5*(r.x+1)*s,r.y=.5*(1-r.y)*i,a&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),r},distanceToDepth:function(t){var e=this.zNear,n=this.zFar;return null==n&&(n=1),((this.zFar+this.zNear-2*this.zNear*this.zFar/(t<(e=null==e?0:e)?e:n<t?n:t))/(this.zFar-this.zNear)+1)/2},__class__:Zt},(e["h3d._Engine.TargetTmp"]=qt).__name__="h3d._Engine.TargetTmp",qt.prototype={__class__:qt},function(){this.resCache=new r_,this.ready=!1,this.inRender=!1,this.textureColorCache=new fl,this.tmpVector=new R,this.backgroundColor=-16777216,this.hardware=!ao.SOFTWARE_DRIVER,this.antiAlias=ao.ANTIALIASING,this.autoResize=!0,this.set_fullScreen(!tc.getValue(q_.IsWindowed)),this.window=J_.getInstance(),this.realFps=tc.getDefaultFrameRate(),this.lastTime=Jn.now()/1e3,this.window.addResizeEvent(W(this,this.onWindowResize)),this.driver=$_.get_supported()?new m(this.antiAlias):new go,ao.CURRENT=this}),ro=((e["h3d.Engine"]=ao).__name__="h3d.Engine",ao.prototype={init:function(){this.driver.init(W(this,this.onCreate),!this.hardware)},selectShader:function(t){this.needFlushTarget&&this.doFlushTarget(),this.driver.selectShader(t)&&this.shaderSwitches++},selectMaterial:function(t){this.driver.selectMaterial(t)},uploadShaderBuffers:function(t,e){this.driver.uploadShaderBuffers(t,e)},selectBuffer:function(t){return null!=t.buffer&&null!=t.buffer.vbuf&&(this.needFlushTarget&&this.doFlushTarget(),this.driver.selectBuffer(t),!0)},renderBuffer:function(t,e,n,s,i){if(null==i&&(i=-1),null==s&&(s=0),!e.isDisposed())for(;;){var a=t.vertices/n|0,r=t.position/n|0;if(0<s){if(a<=s){if(s-=a,null==(t=t.next))break;continue}r+=s,a-=s,s=0}if(0<=i){if(0==i)return;(i-=a)<0&&(a+=i,i=0)}if(0<a&&this.selectBuffer(t)&&(this.driver.draw(e.ibuf,3*r,a),this.drawTriangles+=a,this.drawCalls++),null==(t=t.next))break}},renderIndexed:function(t,e,n,s){if(null==s&&(s=-1),null==n&&(n=0),null!=t.next)throw tr.thrown("Buffer is split");e.isDisposed()||0<(s=s<0?(e.count/3|0)-n:s)&&this.selectBuffer(t)&&(this.driver.draw(e.ibuf,3*n,s),this.drawTriangles+=s,this.drawCalls++)},renderMultiBuffers:function(t,e,n,s){null==s&&(s=-1),null==n&&(n=0);var i=e.count/3|0;i<=0||(this.needFlushTarget&&this.doFlushTarget(),this.driver.selectMultiBuffers(t),e.isDisposed())||0<(s=s<0?i-n:s)&&(this.driver.draw(e.ibuf,3*n,s),this.drawTriangles+=s,this.drawCalls++)},renderInstanced:function(t,e,n){this.needFlushTarget&&this.doFlushTarget(),this.driver.selectMultiBuffers(t),e.isDisposed()||0<n.commandCount&&(this.driver.drawInstanced(e.ibuf,n),this.drawTriangles+=n.triCount,this.drawCalls++)},set_debug:function(t){return this.debug=t,this.driver.setDebug(this.debug),t},onCreate:function(t){(ao.CURRENT=this).autoResize&&(this.width=this.window.get_width(),this.height=this.window.get_height()),t?(pc.get().onContextLost(),this.mem.onContextLost()):(this.mem=new fo(this.driver),this.mem.init(),this.nullTexture=new A(0,0,[Mo.NoAlloc])),this.hardware=this.driver.hasFeature(co.HardwareAccelerated),this.set_debug(this.debug),this.set_fullScreen(this.fullScreen),this.resize(this.width,this.height),t?this.onContextLost():this.onReady(),this.ready=!0},onContextLost:function(){},onReady:function(){},onWindowResize:function(){var t,e;this.autoResize&&!this.driver.isDisposed()&&(t=this.window.get_width(),e=this.window.get_height(),t==this.width&&e==this.height||this.resize(t,e),this.onResized())},set_fullScreen:function(t){return this.fullScreen=t,null!=this.mem&&tc.getValue(q_.IsWindowed)&&this.window.set_displayMode(t?ec.Borderless:ec.Windowed),t},onResized:function(){},resize:function(t,e){e<32&&(e=32),this.width=t=t<32?32:t,this.height=e,this.driver.isDisposed()||this.driver.resize(t,e)},begin:function(t){return null==t&&(t=!1),!this.driver.isDisposed()&&(this.inRender=!0,this.drawTriangles=0,this.shaderSwitches=0,this.drawCalls=0,this.targetStack=null,this.needFlushTarget=null!=this.currentTargetTex,this.driver.begin(K_.frameCount),null==this.backgroundColor||t||this.clear(this.backgroundColor,1,0),!0)},end:function(){this.inRender=!1,this.driver.end()},getCurrentTarget:function(){return null==this.targetStack?null:this.targetStack.t==this.nullTexture?this.targetStack.textures[0]:this.targetStack.t},pushTarget:function(t,e,n){null==n&&(n=0),null==e&&(e=0);var s=this.targetTmp;null==s?s=new qt(t,this.targetStack,e,n):(this.targetTmp=s.next,s.t=t,s.next=this.targetStack,s.mipLevel=n,s.layer=e),this.targetStack=s,this.updateNeedFlush()},updateNeedFlush:function(){var t=this.targetStack;this.needFlushTarget=null==t?null!=this.currentTargetTex:this.currentTargetTex!=t.t||this.currentTargetLayer!=t.layer||this.currentTargetMip!=t.mipLevel||null!=t.textures},pushTargets:function(t){this.pushTarget(this.nullTexture),this.targetStack.textures=t,this.needFlushTarget=!0},popTarget:function(){var t=this.targetStack;if(null==t)throw tr.thrown("popTarget() with no matching pushTarget()");this.targetStack=t.next,this.updateNeedFlush(),t.t=null,t.textures=null,t.next=this.targetTmp,this.targetTmp=t},doFlushTarget:function(){var t=this.targetStack;null==t?(this.driver.setRenderTarget(null),this.currentTargetTex=null):(null!=t.textures?this.driver.setRenderTargets(t.textures):this.driver.setRenderTarget(t.t,t.layer,t.mipLevel),this.currentTargetTex=t.t,this.currentTargetLayer=t.layer,this.currentTargetMip=t.mipLevel),this.needFlushTarget=!1},clear:function(t,e,n){var s;null!=t&&((s=this.tmpVector).x=(t>>16&255)/255,s.y=(t>>8&255)/255,s.z=(255&t)/255,s.w=(t>>>24)/255),this.needFlushTarget&&this.doFlushTarget(),this.driver.clear(null==t?null:this.tmpVector,e,n)},setRenderZone:function(t,e,n,s){null==s&&(s=-1),null==n&&(n=-1),null==e&&(e=0),null==t&&(t=0),this.needFlushTarget&&this.doFlushTarget(),this.driver.setRenderZone(t,e,n,s)},render:function(t){if(!this.begin())return!1;t.render(this),this.end();var e,t=Jn.now()/1e3-this.lastTime;return this.lastTime+=t,0<t&&((e=1/t)>2*this.realFps?e=2*this.realFps:e<.5*this.realFps&&(e=.5*this.realFps),this.realFps=this.realFps*(1-(t=.3<(t=t/.5)?.3:t))+e*t),!0},__class__:ao,__properties__:{set_fullScreen:"set_fullScreen",set_debug:"set_debug"}},(e["h3d.Indexes"]=Kt).__name__="h3d.Indexes",Kt.alloc=function(t,e,n){null==e&&(e=0),(n=null==n?-1:n)<0&&(n=t.length);e=new Kt(n);return e.upload(t,0,n),e},Kt.prototype={isDisposed:function(){return null==this.ibuf},upload:function(t,e,n,s){this.mem.driver.uploadIndexBuffer(this.ibuf,e,n,t,s=null==s?0:s)},uploadBytes:function(t,e,n){this.mem.driver.uploadIndexBytes(this.ibuf,0,n,t,e)},dispose:function(){null!=this.ibuf&&this.mem.deleteIndexes(this)},__class__:Kt},function(){}),lo=((e["h3d.Matrix"]=ro).__name__="h3d.Matrix",ro.I=function(){var t=new ro;return t.identity(),t},ro.L=function(t){var e=new ro;return e.loadValues(t),e},ro.prototype={zero:function(){this._11=0,this._12=0,this._13=0,this._14=0,this._21=0,this._22=0,this._23=0,this._24=0,this._31=0,this._32=0,this._33=0,this._34=0,this._41=0,this._42=0,this._43=0,this._44=0},identity:function(){this._11=1,this._12=0,this._13=0,this._14=0,this._21=0,this._22=1,this._23=0,this._24=0,this._31=0,this._32=0,this._33=1,this._34=0,this._41=0,this._42=0,this._43=0,this._44=1},initScale:function(t,e,n){null==n&&(n=1),null==e&&(e=1),this._11=t=null==t?1:t,this._12=0,this._13=0,this._14=0,this._21=0,this._22=e,this._23=0,this._24=0,this._31=0,this._32=0,this._33=n,this._34=0,this._41=0,this._42=0,this._43=0,this._44=1},initRotation:function(t,e,n){var s=Math.cos(t),t=Math.sin(t),i=Math.cos(e),e=Math.sin(e),a=Math.cos(n),n=Math.sin(n),r=s*e,l=t*e;this._11=i*a,this._12=i*n,this._13=-e,this._14=0,this._21=l*a-s*n,this._22=l*n+s*a,this._23=t*i,this._24=0,this._31=r*a+t*n,this._32=r*n-t*a,this._33=s*i,this._34=0,this._41=0,this._42=0,this._43=0,this._44=1},translate:function(t,e,n){null==n&&(n=0),null==e&&(e=0),this._11+=(t=null==t?0:t)*this._14,this._12+=e*this._14,this._13+=n*this._14,this._21+=t*this._24,this._22+=e*this._24,this._23+=n*this._24,this._31+=t*this._34,this._32+=e*this._34,this._33+=n*this._34,this._41+=t*this._44,this._42+=e*this._44,this._43+=n*this._44},scale:function(t,e,n){null==n&&(n=1),null==e&&(e=1),this._11*=t=null==t?1:t,this._21*=t,this._31*=t,this._41*=t,this._12*=e,this._22*=e,this._32*=e,this._42*=e,this._13*=n,this._23*=n,this._33*=n,this._43*=n},prependScale:function(t,e,n){var s=ro.tmp;s.initScale(t=null==t?1:t,e=null==e?1:e,n=null==n?1:n),this.multiply(s,this)},multiply3x4:function(t,e){var n=t._11,s=t._12,i=t._13,a=t._21,r=t._22,l=t._23,o=t._31,h=t._32,u=t._33,_=t._41,c=t._42,t=t._43,d=e._11,p=e._12,f=e._13,g=e._21,m=e._22,A=e._23,x=e._31,b=e._32,y=e._33;this._11=n*d+s*g+i*x,this._12=n*p+s*m+i*b,this._13=n*f+s*A+i*y,this._14=0,this._21=a*d+r*g+l*x,this._22=a*p+r*m+l*b,this._23=a*f+r*A+l*y,this._24=0,this._31=o*d+h*g+u*x,this._32=o*p+h*m+u*b,this._33=o*f+h*A+u*y,this._34=0,this._41=_*d+c*g+t*x+e._41,this._42=_*p+c*m+t*b+e._42,this._43=_*f+c*A+t*y+e._43,this._44=1},multiply:function(t,e){var n=t._11,s=t._12,i=t._13,a=t._14,r=t._21,l=t._22,o=t._23,h=t._24,u=t._31,_=t._32,c=t._33,d=t._34,p=t._41,f=t._42,g=t._43,t=t._44,m=e._11,A=e._12,x=e._13,b=e._14,y=e._21,w=e._22,v=e._23,C=e._24,M=e._31,S=e._32,k=e._33,B=e._34,I=e._41,T=e._42,F=e._43,e=e._44;this._11=n*m+s*y+i*M+a*I,this._12=n*A+s*w+i*S+a*T,this._13=n*x+s*v+i*k+a*F,this._14=n*b+s*C+i*B+a*e,this._21=r*m+l*y+o*M+h*I,this._22=r*A+l*w+o*S+h*T,this._23=r*x+l*v+o*k+h*F,this._24=r*b+l*C+o*B+h*e,this._31=u*m+_*y+c*M+d*I,this._32=u*A+_*w+c*S+d*T,this._33=u*x+_*v+c*k+d*F,this._34=u*b+_*C+c*B+d*e,this._41=p*m+f*y+g*M+t*I,this._42=p*A+f*w+g*S+t*T,this._43=p*x+f*v+g*k+t*F,this._44=p*b+f*C+g*B+t*e},inverse3x4:function(t){var e=t._11,n=t._12,s=t._13,i=t._21,a=t._22,r=t._23,l=t._31,o=t._32,h=t._33,u=t._41,_=t._42,t=t._43,t=(this._11=a*h-r*o,this._12=s*o-n*h,this._13=n*r-s*a,this._14=0,this._21=r*l-i*h,this._22=e*h-s*l,this._23=s*i-e*r,this._24=0,this._31=i*o-a*l,this._32=n*l-e*o,this._33=e*a-n*i,this._34=0,this._41=-i*o*t+i*h*_+l*a*t-l*r*_-u*a*h+u*r*o,this._42=e*o*t-e*h*_-l*n*t+l*s*_+u*n*h-u*s*o,this._43=-e*a*t+e*r*_+i*n*t-i*s*_-u*n*r+u*s*a,this._44=e*a*h-e*r*o-i*n*h+i*s*o+l*n*r-l*s*a,this._44=1,e*this._11+n*this._21+s*this._31);(t<0?-t:t)<1e-10?this.zero():(this._11*=_=1/t,this._12*=_,this._13*=_,this._21*=_,this._22*=_,this._23*=_,this._31*=_,this._32*=_,this._33*=_,this._41*=_,this._42*=_,this._43*=_)},initInverse:function(t){var e=t._11,n=t._12,s=t._13,i=t._14,a=t._21,r=t._22,l=t._23,o=t._24,h=t._31,u=t._32,_=t._33,c=t._34,d=t._41,p=t._42,f=t._43,t=t._44,t=(this._11=r*_*t-r*c*f-u*l*t+u*o*f+p*l*c-p*o*_,this._12=-n*_*t+n*c*f+u*s*t-u*i*f-p*s*c+p*i*_,this._13=n*l*t-n*o*f-r*s*t+r*i*f+p*s*o-p*i*l,this._14=-n*l*c+n*o*_+r*s*c-r*i*_-u*s*o+u*i*l,this._21=-a*_*t+a*c*f+h*l*t-h*o*f-d*l*c+d*o*_,this._22=e*_*t-e*c*f-h*s*t+h*i*f+d*s*c-d*i*_,this._23=-e*l*t+e*o*f+a*s*t-a*i*f-d*s*o+d*i*l,this._24=e*l*c-e*o*_-a*s*c+a*i*_+h*s*o-h*i*l,this._31=a*u*t-a*c*p-h*r*t+h*o*p+d*r*c-d*o*u,this._32=-e*u*t+e*c*p+h*n*t-h*i*p-d*n*c+d*i*u,this._33=e*r*t-e*o*p-a*n*t+a*i*p+d*n*o-d*i*r,this._34=-e*r*c+e*o*u+a*n*c-a*i*u-h*n*o+h*i*r,this._41=-a*u*f+a*_*p+h*r*f-h*l*p-d*r*_+d*l*u,this._42=e*u*f-e*_*p-h*n*f+h*s*p+d*n*_-d*s*u,this._43=-e*r*f+e*l*p+a*n*f-a*s*p-d*n*l+d*s*r,this._44=e*r*_-e*l*u-a*n*_+a*s*u+h*n*l-h*s*r,e*this._11+n*this._21+s*this._31+i*this._41);(t<0?-t:t)<1e-10?this.zero():(this._11*=t=1/t,this._12*=t,this._13*=t,this._14*=t,this._21*=t,this._22*=t,this._23*=t,this._24*=t,this._31*=t,this._32*=t,this._33*=t,this._34*=t,this._41*=t,this._42*=t,this._43*=t,this._44*=t)},clone:function(){var t=new ro;return t._11=this._11,t._12=this._12,t._13=this._13,t._14=this._14,t._21=this._21,t._22=this._22,t._23=this._23,t._24=this._24,t._31=this._31,t._32=this._32,t._33=this._33,t._34=this._34,t._41=this._41,t._42=this._42,t._43=this._43,t._44=this._44,t},load:function(t){this._11=t._11,this._12=t._12,this._13=t._13,this._14=t._14,this._21=t._21,this._22=t._22,this._23=t._23,this._24=t._24,this._31=t._31,this._32=t._32,this._33=t._33,this._34=t._34,this._41=t._41,this._42=t._42,this._43=t._43,this._44=t._44},loadValues:function(t){this._11=t[0],this._12=t[1],this._13=t[2],this._14=t[3],this._21=t[4],this._22=t[5],this._23=t[6],this._24=t[7],this._31=t[8],this._32=t[9],this._33=t[10],this._34=t[11],this._41=t[12],this._42=t[13],this._43=t[14],this._44=t[15]},getDirection:function(){var t=new lo;return t.initRotateMatrix(this),t.normalize(),new R(1-2*(t.y*t.y+t.z*t.z),2*(t.x*t.y+t.z*t.w),2*(t.x*t.z-t.y*t.w))},getEulerAngles:function(){var t=this.clone(),e=0,n=0,s=0,e=Math.sqrt(this._11*this._11+this._12*this._12+this._13*this._13),n=Math.sqrt(this._21*this._21+this._22*this._22+this._23*this._23),s=Math.sqrt(this._31*this._31+this._32*this._32+this._33*this._33),e=(this._11*(this._22*this._33-this._23*this._32)+this._12*(this._23*this._31-this._21*this._33)+this._13*(this._21*this._32-this._22*this._31)<0&&(e*=-1,n*=-1,s*=-1),t.prependScale(1/e,1/n,1/s),Math.sqrt(t._11*t._11+t._12*t._12));return.01<e?(n=new R(Math.atan2(t._23,t._33),Math.atan2(-t._13,e),Math.atan2(t._12,t._11)),s=new R(Math.atan2(-t._23,-t._33),Math.atan2(-t._13,-e),Math.atan2(-t._12,-t._11)),n.x*n.x+n.y*n.y+n.z*n.z<s.x*s.x+s.y*s.y+s.z*s.z?n:s):new R(Math.atan2(-t._32,t._22),Math.atan2(-t._13,e),0)},__class__:ro},function(t,e,n,s){null==s&&(s=1),null==n&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.z=n,this.w=s}),oo=((e["h3d.Quat"]=lo).__name__="h3d.Quat",lo.prototype={initRotateMatrix:function(t){var e,n,s=t._11+t._22+t._33;0<s?(n=1/(e=2*Math.sqrt(s+1)),this.x=(t._23-t._32)*n,this.y=(t._31-t._13)*n,this.z=(t._12-t._21)*n,this.w=.25*e):t._11>t._22&&t._11>t._33?(n=1/(e=2*Math.sqrt(1+t._11-t._22-t._33)),this.x=.25*e,this.y=(t._21+t._12)*n,this.z=(t._31+t._13)*n,this.w=(t._23-t._32)*n):t._22>t._33?(n=1/(e=2*Math.sqrt(1+t._22-t._11-t._33)),this.x=(t._21+t._12)*n,this.y=.25*e,this.z=(t._32+t._23)*n,this.w=(t._31-t._13)*n):(n=1/(e=2*Math.sqrt(1+t._33-t._11-t._22)),this.x=(t._31+t._13)*n,this.y=(t._32+t._23)*n,this.z=.25*e,this.w=(t._12-t._21)*n)},normalize:function(){var t=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;t<1e-10?(this.x=this.y=this.z=0,this.w=1):(t=1/Math.sqrt(t),this.x*=t,this.y*=t,this.z*=t,this.w*=t)},initRotation:function(t,e,n){var s=Math.sin(.5*t),t=Math.cos(.5*t),i=Math.sin(.5*e),e=Math.cos(.5*e),a=Math.sin(.5*n),n=Math.cos(.5*n),r=e*n,l=i*a;this.x=s*r-t*l,this.y=t*i*n+s*e*a,this.z=t*e*a-s*i*n,this.w=t*r+s*l},toEuler:function(){return this.toMatrix().getEulerAngles()},toMatrix:function(t){null==t&&(t=new ro);var e=this.x*this.x,n=this.x*this.y,s=this.x*this.z,i=this.x*this.w,a=this.y*this.y,r=this.y*this.z,l=this.y*this.w,o=this.z*this.z,h=this.z*this.w;return t._11=1-2*(a+o),t._12=2*(n+h),t._13=2*(s-l),t._14=0,t._21=2*(n-h),t._22=1-2*(e+o),t._23=2*(r+i),t._24=0,t._31=2*(s+l),t._32=2*(r-i),t._33=1-2*(e+a),t._34=0,t._41=0,t._42=0,t._43=0,t._44=1,t},__class__:lo},(e["h3d.anim.AnimatedObject"]=Jt).__name__="h3d.anim.AnimatedObject",(e["h3d.anim.Animation"]=$t).__name__="h3d.anim.Animation",$t.prototype={getPropValue:function(t,e){return null},sync:function(t){throw null==t&&(t=!1),tr.thrown("assert")},isPlaying:function(){return!this.pause&&1e-6<(this.speed<0?-this.speed:this.speed)},endFrame:function(){return this.frameCount},update:function(t){if(!this.isInstance)throw tr.thrown("You must instantiate this animation first");if(this.isPlaying()){if(null!=this.events&&null!=this.onEvent)for(var e=this.frame+t*this.speed*this.sampling|0,n=(e>=this.frameCount&&(e=this.frameCount-1),0|this.frame),s=e+1;n<s;){var i=n++;if(i!=this.lastEvent&&(this.lastEvent=i,null!=this.events[i])){for(var a=this.frame,r=t,l=(t-=(i-this.frame)/(this.speed*this.sampling),this.frame=i,0),o=this.events[i];l<o.length;)this.onEvent(o[l++]);if(this.frame!=i||i!=this.frameCount-1)return t;this.frame=a,t=r;break}}if(null!=this.onAnimEnd){var e=this.endFrame(),h=0==this.speed?0:(e-this.frame)/(this.speed*this.sampling);if(h<=t&&0<h)return this.frame=e,t-=h,this.onAnimEnd(),this.frame==e&&this.isPlaying()&&(this.loop?this.frame=0:t=0),t}this.frame+=t*this.speed*this.sampling,this.frame>=this.frameCount&&(this.loop?this.frame%=this.frameCount:this.frame=this.frameCount)}return 0},__class__:$t},(e["h3d.anim.Joint"]=te).__name__="h3d.anim.Joint",te.prototype={__class__:te},(e["h3d.anim._Skin.Influence"]=ee).__name__="h3d.anim._Skin.Influence",(e["h3d.anim.Skin"]=ne).__name__="h3d.anim.Skin",ne.prototype={__class__:ne},(e["h3d.col.Collider"]=se).__name__="h3d.col.Collider",se.__isInterface__=!0,se.prototype={__class__:se},function(){this.xMin=1e20,this.xMax=-1e20,this.yMin=1e20,this.yMax=-1e20,this.zMin=1e20,this.zMax=-1e20}),ho=((e["h3d.col.Bounds"]=oo).__name__="h3d.col.Bounds",oo.__interfaces__=[se],oo.prototype={inFrustum:function(t,e){if(null!=e)throw tr.thrown("Not implemented");return t.hasBounds(this)},rayIntersection:function(t,e){var n=(this.xMin-t.px)/t.lx,s=(this.yMin-t.py)/t.ly,i=(this.zMin-t.pz)/t.lz,a=(this.xMax-t.px)/t.lx,r=(this.yMax-t.py)/t.ly,t=(this.zMax-t.pz)/t.lz,l=a<n?a:n,o=r<s?r:s,h=t<i?t:i,a=n<a?a:n,n=s<r?r:s,r=i<t?t:i,s=n<a?n:a,t=l<o?o:l,i=t<h?h:t;return(r<s?r:s)<i?-1:i},transform:function(t){var e,n,s,i,a,r,l,o=this.xMin,h=this.yMin,u=this.zMin,_=this.xMax,c=this.yMax,d=this.zMax;this.xMin=1e20,this.xMax=-1e20,this.yMin=1e20,this.yMax=-1e20,this.zMin=1e20,this.zMax=-1e20,_<o&&c<h&&d<u||(s=n=e=0,n=a=null==(a=h)?0:a,s=null==u?0:u,r=(e=i=null==(i=o)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=h)?0:a,s=null==d?0:d,r=(e=i=null==(i=o)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=c)?0:a,s=null==u?0:u,r=(e=i=null==(i=o)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=c)?0:a,s=null==d?0:d,r=(e=i=null==(i=o)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=h)?0:a,s=null==u?0:u,r=(e=i=null==(i=_)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=h)?0:a,s=null==d?0:d,r=(e=i=null==(i=_)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=c)?0:a,s=null==u?0:u,r=(e=i=null==(i=_)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s),n=a=null==(a=c)?0:a,s=null==d?0:d,r=(e=i=null==(i=_)?0:i)*t._12+n*t._22+s*t._32+t._42,l=e*t._13+n*t._23+s*t._33+t._43,e=e*t._11+n*t._21+s*t._31+t._41,n=r,s=l,e<this.xMin&&(this.xMin=e),e>this.xMax&&(this.xMax=e),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),s<this.zMin&&(this.zMin=s),s>this.zMax&&(this.zMax=s))},intersection:function(t,e){var n=t.xMin,s=e.xMin,i=t.yMin,a=e.yMin,r=t.zMin,l=e.zMin,o=t.xMax,h=e.xMax,u=t.yMax,_=e.yMax,t=t.zMax,e=e.zMax;this.xMin=n<s?s:n,this.xMax=h<o?h:o,this.yMin=i<a?a:i,this.yMax=_<u?_:u,this.zMin=r<l?l:r,this.zMax=e<t?e:t},load:function(t){this.xMin=t.xMin,this.xMax=t.xMax,this.yMin=t.yMin,this.yMax=t.yMax,this.zMin=t.zMin,this.zMax=t.zMax},scaleCenter:function(t){var e=.5*(this.xMax-this.xMin)*t,n=.5*(this.yMax-this.yMin)*t,t=.5*(this.zMax-this.zMin)*t,s=.5*(this.xMax+this.xMin),i=.5*(this.yMax+this.yMin),a=.5*(this.zMax+this.zMin);this.xMin=s-e,this.yMin=i-n,this.zMin=a-t,this.xMax=s+e,this.yMax=i+n,this.zMax=a+t},__class__:oo},function(t){this.checkNearFar=!0,this.pleft=new uo(1,0,0,0),this.pright=new uo(1,0,0,0),this.ptop=new uo(1,0,0,0),this.pbottom=new uo(1,0,0,0),this.pnear=new uo(1,0,0,0),this.pfar=new uo(1,0,0,0),null!=t&&this.loadMatrix(t)}),uo=((e["h3d.col.Frustum"]=ho).__name__="h3d.col.Frustum",ho.prototype={loadMatrix:function(t){(e=this.pleft).nx=t._14+t._11,e.ny=t._24+t._21,e.nz=t._34+t._31,e.d=-(t._44+t._41),(e=this.pright).nx=t._14-t._11,e.ny=t._24-t._21,e.nz=t._34-t._31,e.d=t._41-t._44,(e=this.ptop).nx=t._14-t._12,e.ny=t._24-t._22,e.nz=t._34-t._32,e.d=t._42-t._44,(e=this.pbottom).nx=t._14+t._12,e.ny=t._24+t._22,e.nz=t._34+t._32,e.d=-(t._44+t._42),(e=this.pnear).nx=t._13,e.ny=t._23,e.nz=t._33,e.d=-t._43;(e=this.pfar).nx=t._14-t._13,e.ny=t._24-t._23,e.nz=t._34-t._33,e.d=t._43-t._44;var e=this.pleft,t=1/Math.sqrt(e.nx*e.nx+e.ny*e.ny+e.nz*e.nz),e=(e.nx*=t,e.ny*=t,e.nz*=t,e.d*=t,this.pright),t=1/Math.sqrt(e.nx*e.nx+e.ny*e.ny+e.nz*e.nz),e=(e.nx*=t,e.ny*=t,e.nz*=t,e.d*=t,this.ptop),t=1/Math.sqrt(e.nx*e.nx+e.ny*e.ny+e.nz*e.nz),e=(e.nx*=t,e.ny*=t,e.nz*=t,e.d*=t,this.pbottom),t=1/Math.sqrt(e.nx*e.nx+e.ny*e.ny+e.nz*e.nz),e=(e.nx*=t,e.ny*=t,e.nz*=t,e.d*=t,this.pnear),t=1/Math.sqrt(e.nx*e.nx+e.ny*e.ny+e.nz*e.nz),e=(e.nx*=t,e.ny*=t,e.nz*=t,e.d*=t,this.pfar),t=1/Math.sqrt(e.nx*e.nx+e.ny*e.ny+e.nz*e.nz);e.nx*=t,e.ny*=t,e.nz*=t,e.d*=t},hasSphere:function(t){var e=t.x,n=t.y,s=t.z,e=e=null==e?0:e,n=n=null==n?0:n,s=s=null==s?0:s,i=this.pleft;if(i.nx*e+i.ny*n+i.nz*s-i.d<-t.r)return!1;if((i=this.pright).nx*e+i.ny*n+i.nz*s-i.d<-t.r)return!1;if((i=this.ptop).nx*e+i.ny*n+i.nz*s-i.d<-t.r)return!1;if((i=this.pbottom).nx*e+i.ny*n+i.nz*s-i.d<-t.r)return!1;if(this.checkNearFar){if((i=this.pnear).nx*e+i.ny*n+i.nz*s-i.d<-t.r)return!1;if((i=this.pfar).nx*e+i.ny*n+i.nz*s-i.d<-t.r)return!1}return!0},hasBounds:function(t){var e=this.pleft,n=e.nx,s=e.ny,i=e.nz;return!(n*(t.xMax+t.xMin)+s*(t.yMax+t.yMin)+i*(t.zMax+t.zMin)+((n=n<0?-n:n)*(t.xMax-t.xMin)+(s=s<0?-s:s)*(t.yMax-t.yMin)+(i=i<0?-i:i)*(t.zMax-t.zMin))-2*e.d<0||(n=(e=this.pright).nx,s=e.ny,i=e.nz,n*(t.xMax+t.xMin)+s*(t.yMax+t.yMin)+i*(t.zMax+t.zMin)+((n=n<0?-n:n)*(t.xMax-t.xMin)+(s=s<0?-s:s)*(t.yMax-t.yMin)+(i=i<0?-i:i)*(t.zMax-t.zMin))-2*e.d<0)||(n=(e=this.ptop).nx,s=e.ny,i=e.nz,n*(t.xMax+t.xMin)+s*(t.yMax+t.yMin)+i*(t.zMax+t.zMin)+((n=n<0?-n:n)*(t.xMax-t.xMin)+(s=s<0?-s:s)*(t.yMax-t.yMin)+(i=i<0?-i:i)*(t.zMax-t.zMin))-2*e.d<0)||(n=(e=this.pbottom).nx,s=e.ny,i=e.nz,n*(t.xMax+t.xMin)+s*(t.yMax+t.yMin)+i*(t.zMax+t.zMin)+((n=n<0?-n:n)*(t.xMax-t.xMin)+(s=s<0?-s:s)*(t.yMax-t.yMin)+(i=i<0?-i:i)*(t.zMax-t.zMin))-2*e.d<0)||(n=(e=this.pnear).nx,s=e.ny,i=e.nz,n*(t.xMax+t.xMin)+s*(t.yMax+t.yMin)+i*(t.zMax+t.zMin)+((n=n<0?-n:n)*(t.xMax-t.xMin)+(s=s<0?-s:s)*(t.yMax-t.yMin)+(i=i<0?-i:i)*(t.zMax-t.zMin))-2*e.d<0)||(n=(e=this.pfar).nx,s=e.ny,i=e.nz,n*(t.xMax+t.xMin)+s*(t.yMax+t.yMin)+i*(t.zMax+t.zMin)+((n=n<0?-n:n)*(t.xMax-t.xMin)+(s=s<0?-s:s)*(t.yMax-t.yMin)+(i=i<0?-i:i)*(t.zMax-t.zMin))-2*e.d<0))},__class__:ho},(e["h3d.col.Ray"]=ie).__name__="h3d.col.Ray",ie.prototype={normalize:function(){var t=this.lx*this.lx+this.ly*this.ly+this.lz*this.lz;1!=t&&(t=t<1e-10?0:1/Math.sqrt(t),this.lx*=t,this.ly*=t,this.lz*=t)},__class__:ie},function(t,e,n,s){this.nx=t,this.ny=e,this.nz=n,this.d=s}),_o=((e["h3d.col.Plane"]=uo).__name__="h3d.col.Plane",uo.prototype={__class__:uo},(e["h3d.col.Point"]=ae).__name__="h3d.col.Point",ae.prototype={__class__:ae},function(t){this.flags=32768,this.absPos=new ro,this.absPos.identity(),this.x=0,this.flags|=1,this.y=0,this.flags|=1,this.z=0,this.flags|=1,this.scaleX=1,this.flags|=1,this.scaleY=1,this.flags|=1,this.scaleZ=1,this.flags|=1,this.qRot=new lo,null!=this.follow?this.flags|=1:this.flags&=-2,this.flags|=2,this.children=[],null!=t&&t.addChild(this)}),co=((e["h3d.scene.Object"]=_o).__name__="h3d.scene.Object",_o.prototype={set_cullingCollider:function(t){return this.cullingCollider=t,this.flags&=-4097,t},getMaterials:function(t,e){if(null==t&&(t=[]),e=null==e?!0:e)for(var n=0,s=this.children;n<s.length;)s[n++].getMaterials(t);return t},localToGlobal:function(t){this.syncPos(),null==t&&(t=new ae);var e=this.absPos,n=t.x*e._12+t.y*e._22+t.z*e._32+e._42,s=t.x*e._13+t.y*e._23+t.z*e._33+e._43;return t.x=t.x*e._11+t.y*e._21+t.z*e._31+e._41,t.y=n,t.z=s,t},getInvPos:function(){return this.syncPos(),null==this.invPos&&(this.invPos=new ro,this.invPos._44=0),0==this.invPos._44&&this.invPos.inverse3x4(this.absPos),this.invPos},getBounds:function(t){return null==t&&(t=new oo),null!=this.parent&&this.parent.syncPos(),this.getBoundsRec(t)},getBoundsRec:function(t){if(0!=(1&this.flags)){for(var e=0,n=this.children;e<n.length;)n[e++].flags|=1;null!=this.follow?this.flags|=1:this.flags&=-2,this.calcAbsPos()}for(e=0,n=this.children;e<n.length;)n[e++].getBoundsRec(t);return t},getMeshes:function(t){null==t&&(t=[]);for(var e=this instanceof Xo?this:null,n=(null!=e&&t.push(e),0),s=this.children;n<s.length;)s[n++].getMeshes(t);return t},getObjectByName:function(t){if(this.name==t)return this;for(var e=0,n=this.children;e<n.length;){var s=n[e++].getObjectByName(t);if(null!=s)return s}return null},clone:function(t){(t=null==t?new _o:t).x=this.x,t.flags|=1,t.y=this.y,t.flags|=1,t.z=this.z,t.flags|=1,t.scaleX=this.scaleX,t.flags|=1,t.scaleY=this.scaleY,t.flags|=1,t.scaleZ=this.scaleZ,t.flags|=1;for(var e=t.qRot,n=this.qRot,s=(e.x=n.x,e.y=n.y,e.z=n.z,e.w=n.w,t.name=this.name,t.set_follow(this.follow),0!=(8&this.flags)?t.flags|=8:t.flags&=-9,0!=(2&this.flags)?t.flags|=2:t.flags&=-3,null!=this.defaultTransform&&(t.defaultTransform=this.defaultTransform.clone(),t.flags|=1),0),i=this.children;s<i.length;){var a=i[s++].clone();(a.parent=t).children.push(a)}return t},addChild:function(t){this.addChildAt(t,this.children.length)},addChildAt:function(t,e){(e=e<0?0:e)>this.children.length&&(e=this.children.length);for(var n,s=this;null!=s;){if(s==t)throw tr.thrown("Recursive addChild");s=s.parent}null!=t.parent&&(n=0!=(32&t.flags),t.flags&=-33,t.parent.removeChild(t),n?t.flags|=32:t.flags&=-33),this.children.splice(e,0,t),0==(32&this.flags)&&0!=(32&t.flags)&&t.onRemove(),t.parent=this,t.flags|=1,0!=(32&this.flags)&&(0==(32&t.flags)?t.onAdd():t.onParentChanged())},iterVisibleMeshes:function(t){if(0!=(2&this.flags)&&(0==(4&this.flags)||0==(128&this.flags))){0==(4&this.flags)&&null!=(e=this instanceof Xo?this:null)&&t(e);for(var e,n=0,s=this.children;n<s.length;)s[n++].iterVisibleMeshes(t)}},onParentChanged:function(){for(var t=0,e=this.children;t<e.length;)e[t++].onParentChanged()},onAdd:function(){this.flags|=32;for(var t=0,e=this.children;t<e.length;)e[t++].onAdd()},onRemove:function(){this.flags&=-33;for(var t=this.children.length-1;0<=t;)this.children[t--].onRemove()},removeChild:function(t){Jn.remove(this.children,t)&&(0!=(32&t.flags)&&t.onRemove(),t.parent=null,t.flags|=1)},removeChildren:function(){for(;0<this.children.length;)this.removeChild(this.children[0])},getScene:function(){for(var t=this;null!=t.parent;)t=t.parent;return t instanceof Wo?t:null},getAbsPos:function(){return this.syncPos(),this.absPos},toMesh:function(){var t=this instanceof Xo?this:null;if(null!=t)return t;throw tr.thrown(Ja.string(this)+" is not a Mesh")},draw:function(t){},set_follow:function(t){return this.flags|=1,this.follow=t},calcAbsPos:function(){var t,e,n,s,i,a,r,l,o,h,u,_,c,d,p,f,g,m,A,x,b,y,w,v;this.qRot.toMatrix(this.absPos),this.absPos._11*=this.scaleX,this.absPos._12*=this.scaleX,this.absPos._13*=this.scaleX,this.absPos._21*=this.scaleY,this.absPos._22*=this.scaleY,this.absPos._23*=this.scaleY,this.absPos._31*=this.scaleZ,this.absPos._32*=this.scaleZ,this.absPos._33*=this.scaleZ,this.absPos._41=this.x,this.absPos._42=this.y,this.absPos._43=this.z,null!=this.follow?(this.follow.syncPos(),0!=(8&this.flags)?(t=this.absPos,e=this.absPos,n=this.parent.absPos,s=e._11,i=e._12,a=e._13,r=e._21,l=e._22,o=e._23,h=e._31,u=e._32,_=e._33,c=e._41,d=e._42,p=e._43,f=n._11,g=n._12,m=n._13,A=n._21,x=n._22,b=n._23,y=n._31,w=n._32,v=n._33,t._11=s*f+i*A+a*y,t._12=s*g+i*x+a*w,t._13=s*m+i*b+a*v,t._14=0,t._21=r*f+l*A+o*y,t._22=r*g+l*x+o*w,t._23=r*m+l*b+o*v,t._24=0,t._31=h*f+u*A+_*y,t._32=h*g+u*x+_*w,t._33=h*m+u*b+_*v,t._34=0,t._41=c*f+d*A+p*y+n._41,t._42=c*g+d*x+p*w+n._42,t._43=c*m+d*b+p*v+n._43,t._44=1,this.absPos._41=this.x+this.follow.absPos._41,this.absPos._42=this.y+this.follow.absPos._42,this.absPos._43=this.z+this.follow.absPos._43):this.absPos.multiply3x4(this.absPos,this.follow.absPos)):null!=this.parent&&0==(2048&this.flags)&&(t=this.absPos,e=this.absPos,n=this.parent.absPos,s=e._11,i=e._12,a=e._13,r=e._21,l=e._22,o=e._23,h=e._31,u=e._32,_=e._33,c=e._41,d=e._42,p=e._43,f=n._11,g=n._12,m=n._13,A=n._21,x=n._22,b=n._23,y=n._31,w=n._32,v=n._33,t._11=s*f+i*A+a*y,t._12=s*g+i*x+a*w,t._13=s*m+i*b+a*v,t._14=0,t._21=r*f+l*A+o*y,t._22=r*g+l*x+o*w,t._23=r*m+l*b+o*v,t._24=0,t._31=h*f+u*A+_*y,t._32=h*g+u*x+_*w,t._33=h*m+u*b+_*v,t._34=0,t._41=c*f+d*A+p*y+n._41,t._42=c*g+d*x+p*w+n._42,t._43=c*m+d*b+p*v+n._43,t._44=1),null!=this.defaultTransform&&(t=this.absPos,e=this.defaultTransform,n=this.absPos,s=e._11,i=e._12,a=e._13,r=e._21,l=e._22,o=e._23,h=e._31,u=e._32,_=e._33,c=e._41,d=e._42,p=e._43,f=n._11,g=n._12,m=n._13,A=n._21,x=n._22,b=n._23,y=n._31,w=n._32,v=n._33,t._11=s*f+i*A+a*y,t._12=s*g+i*x+a*w,t._13=s*m+i*b+a*v,t._14=0,t._21=r*f+l*A+o*y,t._22=r*g+l*x+o*w,t._23=r*m+l*b+o*v,t._24=0,t._31=h*f+u*A+_*y,t._32=h*g+u*x+_*w,t._33=h*m+u*b+_*v,t._34=0,t._41=c*f+d*A+p*y+n._41,t._42=c*g+d*x+p*w+n._42,t._43=c*m+d*b+p*v+n._43,t._44=1),null!=this.invPos&&(this.invPos._44=0)},sync:function(t){},syncRec:function(t){if(null!=this.currentAnimation){for(var e=this.parent,n=t.elapsedTime;0<n&&null!=this.currentAnimation;)n=this.currentAnimation.update(n);if(null!=this.currentAnimation&&(t.visibleFlag&&0!=(2&this.flags)&&0==(4&this.flags)||0!=(64&this.flags))&&this.currentAnimation.sync(),null==this.parent&&null!=e)return}if(0!=(32768&this.flags)||0==(4&this.flags)&&0!=(2&this.flags)&&t.visibleFlag){var e=t.visibleFlag,s=((0==(2&this.flags)||0!=(4&this.flags)&&0!=(128&this.flags))&&(t.visibleFlag=!1),null==t.cullingCollider||null!=this.cullingCollider&&0==(4096&this.flags)?0!=(4096&this.flags)&&this.set_cullingCollider(null):(this.set_cullingCollider(t.cullingCollider),this.flags|=4096),t.cullingCollider),i=(0!=(128&this.flags)&&(t.cullingCollider=this.cullingCollider),0!=(1&this.flags));if(i&&this.calcAbsPos(),0!=(8192&this.flags)){if(0!=(16384&this.flags)&&!i&&!t.wasContextLost)return t.visibleFlag=e,void(t.cullingCollider=s);this.flags|=16384}this.sync(t),null!=this.follow?this.flags|=1:this.flags&=-2,this.lastFrame=t.frame;for(var a=0,r=this.children.length;a<r;){var l=this.children[a];if(null==l)break;l.lastFrame!=t.frame&&(i&&(l.flags|=1),l.syncRec(t)),this.children[a]!=l?(a=0,r=this.children.length):++a}t.visibleFlag=e,t.cullingCollider=s}},syncPos:function(){if(null!=this.parent&&this.parent.syncPos(),0!=(1&this.flags)){null!=this.follow?this.flags|=1:this.flags&=-2,this.calcAbsPos();for(var t=0,e=this.children;t<e.length;)e[t++].flags|=1}},emit:function(t){},emitRec:function(t){if(0!=(2&this.flags)&&(0==(4&this.flags)||0==(128&this.flags)||t.computingStatic)){if(0!=(1&this.flags)){null!=this.currentAnimation&&this.currentAnimation.sync(),null!=this.follow?this.flags|=1:this.flags&=-2,this.calcAbsPos();for(var e=0,n=this.children;e<n.length;)n[e++].flags|=1}0!=(4&this.flags)&&!t.computingStatic||this.emit(t);for(e=0,n=this.children;e<n.length;)n[e++].emitRec(t)}},setRotation:function(t,e,n){this.qRot.initRotation(t,e,n),this.flags|=1},getRotationQuat:function(){return this.qRot},toString:function(){return er.getClass(this).__name__.split(".").pop()+(null==this.name?"":"("+this.name+")")},__class__:_o,__properties__:{set_cullingCollider:"set_cullingCollider",set_follow:"set_follow"}},(e["h3d.col.Sphere"]=re).__name__="h3d.col.Sphere",re.__interfaces__=[se],re.prototype={rayIntersection:function(t,e){var n=t.px+t.lx,s=t.py+t.ly,i=t.pz+t.lz,a=t.lx*t.lx+t.ly*t.ly+t.lz*t.lz,t=2*t.lx*(this.x-n)+2*t.ly*(this.y-s)+2*t.lz*(this.z-i),n=t*t-4*a*(this.x*this.x+this.y*this.y+this.z*this.z+(n*n+s*s+i*i)-2*(this.x*n+this.y*s+this.z*i)-this.r*this.r);return n<0?-1:1-(-t+Math.sqrt(n))/(2*a)},inFrustum:function(t,e){return null!=e?this.inFrustumMatrix(t,e):t.hasSphere(this)},inFrustumMatrix:function(t,e){var n=this.x,s=this.y,i=this.z,a=this.r,r=this.x,l=this.y,o=this.z,l=l=null==l?0:l,o=o=null==o?0:o,h=(r=r=null==r?0:r)*e._12+l*e._22+o*e._32+e._42,u=r*e._13+l*e._23+o*e._33+e._43,r=r*e._11+l*e._21+o*e._31+e._41,l=h,o=u,h=(this.x=r,this.y=l,this.z=o,0),u=0,r=0,h=Math.sqrt(e._11*e._11+e._12*e._12+e._13*e._13),u=Math.sqrt(e._21*e._21+e._22*e._22+e._23*e._23),r=Math.sqrt(e._31*e._31+e._32*e._32+e._33*e._33),l=(e._11*(e._22*e._33-e._23*e._32)+e._12*(e._23*e._31-e._21*e._33)+e._13*(e._21*e._32-e._22*e._31)<0&&(h*=-1,u*=-1,r*=-1),this.r*=Math.max(Math.max(h,u),r),t.hasSphere(this));return this.x=n,this.y=s,this.z=i,this.r=a,l},__class__:re},d["h3d.impl.Feature"]={__ename__:!0,__constructs__:null,StandardDerivatives:{_hx_name:"StandardDerivatives",_hx_index:0,__enum__:"h3d.impl.Feature",toString:l},FloatTextures:{_hx_name:"FloatTextures",_hx_index:1,__enum__:"h3d.impl.Feature",toString:l},AllocDepthBuffer:{_hx_name:"AllocDepthBuffer",_hx_index:2,__enum__:"h3d.impl.Feature",toString:l},HardwareAccelerated:{_hx_name:"HardwareAccelerated",_hx_index:3,__enum__:"h3d.impl.Feature",toString:l},MultipleRenderTargets:{_hx_name:"MultipleRenderTargets",_hx_index:4,__enum__:"h3d.impl.Feature",toString:l},Queries:{_hx_name:"Queries",_hx_index:5,__enum__:"h3d.impl.Feature",toString:l},SRGBTextures:{_hx_name:"SRGBTextures",_hx_index:6,__enum__:"h3d.impl.Feature",toString:l},ShaderModel3:{_hx_name:"ShaderModel3",_hx_index:7,__enum__:"h3d.impl.Feature",toString:l},BottomLeftCoords:{_hx_name:"BottomLeftCoords",_hx_index:8,__enum__:"h3d.impl.Feature",toString:l},Wireframe:{_hx_name:"Wireframe",_hx_index:9,__enum__:"h3d.impl.Feature",toString:l},InstancedRendering:{_hx_name:"InstancedRendering",_hx_index:10,__enum__:"h3d.impl.Feature",toString:l}}),po=(co.__constructs__=[co.StandardDerivatives,co.FloatTextures,co.AllocDepthBuffer,co.HardwareAccelerated,co.MultipleRenderTargets,co.Queries,co.SRGBTextures,co.ShaderModel3,co.BottomLeftCoords,co.Wireframe,co.InstancedRendering],co.__empty_constructs__=[co.StandardDerivatives,co.FloatTextures,co.AllocDepthBuffer,co.HardwareAccelerated,co.MultipleRenderTargets,co.Queries,co.SRGBTextures,co.ShaderModel3,co.BottomLeftCoords,co.Wireframe,co.InstancedRendering],d["h3d.impl.RenderFlag"]={__ename__:!0,__constructs__:null,CameraHandness:{_hx_name:"CameraHandness",_hx_index:0,__enum__:"h3d.impl.RenderFlag",toString:l}}),m=(po.__constructs__=[po.CameraHandness],po.__empty_constructs__=[po.CameraHandness],(e["h3d.impl.InputNames"]=le).__name__="h3d.impl.InputNames",le.get=function(t){var e=t.join("|"),n=le.CACHE.h[e];return null==n&&(n=new le(t.slice()),le.CACHE.h[e]=n),n},le.prototype={__class__:le},(e["h3d.impl.Driver"]=oe).__name__="h3d.impl.Driver",oe.prototype={hasFeature:function(t){return!1},setRenderFlag:function(t,e){},isSupportedFormat:function(t){return!1},isDisposed:function(){return!0},begin:function(t){},generateMipMaps:function(t){throw tr.thrown("Mipmaps auto generation is not supported on this platform")},clear:function(t,e,n){},capturePixels:function(t,e,n,s){throw tr.thrown("Can't capture pixels on this platform")},init:function(t,e){},resize:function(t,e){},selectShader:function(t){return!1},selectMaterial:function(t){},uploadShaderBuffers:function(t,e){},getShaderInputNames:function(){return null},selectBuffer:function(t){},selectMultiBuffers:function(t){},draw:function(t,e,n){},drawInstanced:function(t,e){},setRenderZone:function(t,e,n,s){},setRenderTarget:function(t,e,n){null==n&&(n=0)},setRenderTargets:function(t){},allocDepthBuffer:function(t){return null},disposeDepthBuffer:function(t){},getDefaultDepthBuffer:function(){return null},end:function(){},setDebug:function(t){},allocTexture:function(t){return null},allocIndexes:function(t,e){return null},allocVertexes:function(t){return null},disposeTexture:function(t){},disposeIndexes:function(t){},disposeVertexes:function(t){},uploadIndexBuffer:function(t,e,n,s,i){},uploadIndexBytes:function(t,e,n,s,i){},uploadVertexBuffer:function(t,e,n,s,i){},uploadVertexBytes:function(t,e,n,s,i){},uploadTextureBitmap:function(t,e,n,s){},uploadTexturePixels:function(t,e,n,s){},copyTexture:function(t,e){return!1},__class__:oe},(e["h3d.impl._GlDriver.CompiledShader"]=he).__name__="h3d.impl._GlDriver.CompiledShader",he.prototype={__class__:he},(e["h3d.impl._GlDriver.CompiledAttribute"]=ue).__name__="h3d.impl._GlDriver.CompiledAttribute",ue.prototype={__class__:ue},(e["h3d.impl._GlDriver.CompiledProgram"]=_e).__name__="h3d.impl._GlDriver.CompiledProgram",_e.prototype={__class__:_e},function(t){null==t&&(t=0),this.features=new s_,this.maxCompressedTexturesSupport=0,this.rightHanded=!1,this.firstShader=!0,this.boundTextures=[],this.curTargets=[];var e=[],e=(e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),e.push(0),this.currentDivisor=e,this.curColorMask=-1,this.lastActiveIndex=0,this.curStEnabled=!1,this.curStMaskBits=-1,this.curStOpBits=-1,this.curMatBits=-1,this.maxIdxCurAttribs=0,this.curAttribs=[],this.canvas=J_.getInstance().canvas,{alpha:!1,stencil:!0,antialias:0<t});if(m.ALLOW_WEBGL2&&(this.gl=this.canvas.getContext("webgl2",e)),null==this.gl&&(this.gl=ed.getContextWebGL(this.canvas,e)),null==this.gl)throw tr.thrown("Could not acquire GL context");"undefined"!=typeof WebGLDebugUtils&&(this.gl=WebGLDebugUtils.makeDebugContext(this.gl),this.glDebug=!0),this.commonFB=this.gl.createFramebuffer(),this.programs=new fl,this.defStencil=new Fo,this.frame=K_.frameCount;var t=this.gl.getParameter(7938),e=((e=new ct("ES ([0-9]+\\.[0-9]+)","")).match(t)&&(this.glES=parseFloat(e.matched(1))),new ct("[0-9]+\\.[0-9]+","")),t=this.gl.getParameter(35724);e.match(t)&&(this.glES=parseFloat(e.matched(0)),this.shaderVersion=Math.round(100*parseFloat(e.matched(0)))),this.drawMode=4,this.makeFeatures(),this.hasFeature(co.InstancedRendering)&&this.glES<3&&(t=this.gl.getExtension("ANGLE_instanced_arrays"),this.gl.vertexAttribDivisor=W(t,t.vertexAttribDivisorANGLE),this.gl.drawElementsInstanced=W(t,t.drawElementsInstancedANGLE)),$c.UNROLL_LOOPS=!this.hasFeature(co.ShaderModel3),this.gl.pixelStorei(3333,1),this.gl.pixelStorei(3317,1)}),fo=((e["h3d.impl.GlDriver"]=m).__name__="h3d.impl.GlDriver",m.__super__=oe,m.prototype=t(oe.prototype,{setRenderFlag:function(t,e){this.rightHanded=0<e},setDebug:function(t){this.debug=t},begin:function(t){this.frame=t,this.resetStream(),this.gl.useProgram(null),this.curShader=null,this.curBuffer=null},getShaderInputNames:function(){return this.curShader.inputs},makeCompiler:function(){var t=new Gc;return t.glES=this.glES,t.version=this.shaderVersion,t.intelDriverFix=this.isIntelGpu,t},getDriverName:function(t){var e=this.gl.getParameter(7937);return t?e+=" GLv"+Ja.string(this.gl.getParameter(7938)):e=e.split("/").shift(),"OpenGL "+(e=e.split("WebGL ").join(""))},compileShader:function(t,e){var n=this.gl.createShader(e.vertex?35633:35632);if(null==e.code&&(e.code=t.run(e.data),e.data.funs=null),this.gl.shaderSource(n,e.code),this.gl.compileShader(n),this.gl.getShaderInfoLog(n),1==this.gl.getShaderParameter(n,35713))return new he(n,e.vertex,e);for(var t=this.gl.getShaderInfoLog(n),n=Ja.parseInt(Jn.substr(t,9,null)),n=null==(n=null==n?null:e.code.split("\n")[n-1])?"":"("+ut.trim(n)+")",s=e.code.split("\n"),i=0,a=s.length;i<a;){var r=i++;s[r]=1+r+"\t"+s[r]}throw tr.thrown("An error occurred compiling the shaders: "+t+n+"\n\n"+s.join("\n"))},initShader:function(t,e,n,s){for(var i=e.vertex?"vertex":"fragment",a=(e.globals=this.gl.getUniformLocation(t.p,i+"Globals"),e.params=this.gl.getUniformLocation(t.p,i+"Params"),e.textures=[],0),r=null,l=0,o="",h=n.textures;null!=h;){var u=h.type,_=1;switch(u._hx_index){case 15:0==(f=u.size)._hx_index&&(u=u.t,_=f.v);break;case 17:u=V.TSampler2D}if(u!=r){switch((r=u)._hx_index){case 10:l=3553,o="Textures";break;case 11:l=35866,o="TexturesArray";break;case 12:l=34067,o="TexturesCube";break;default:throw tr.thrown("Unsupported texture type "+Ja.string(u))}a=0}for(var c=0,d=_;c<d;){++c;var p=this.gl.getUniformLocation(t.p,i+o+"["+a+"]");if(null==p)throw tr.thrown("Texture "+s.spec.instances[h.instance].shader.data.name+"."+h.name+" is missing from generated shader");e.textures.push({u:p,t:r,mode:l}),++a}h=h.next}if(0<n.bufferCount){for(var f=[],c=0,d=n.bufferCount;c<d;){var g=c++;f.push(this.gl.getUniformBlockIndex(t.p,(n.vertex?"vertex_":"")+"uniform_buffer"+g))}e.buffers=f;for(var m=0,f=(e.vertex||(m=s.vertex.bufferCount),0),c=n.bufferCount;f<c;){g=f++;this.gl.uniformBlockBinding(t.p,e.buffers[g],g+m)}}},selectShader:function(t){if(null==(e=this.programs.h[t.id])){var e=new _e,n=this.makeCompiler(),s=(e.vertex=this.compileShader(n,t.vertex),e.fragment=this.compileShader(n,t.fragment),e.p=this.gl.createProgram(),this.gl.attachShader(e.p,e.vertex.s),this.gl.attachShader(e.p,e.fragment.s),null);try{this.gl.linkProgram(e.p),1!=this.gl.getProgramParameter(e.p,35714)&&(s=this.gl.getProgramInfoLog(e.p))}catch(a){throw tr.thrown("Shader linkage error: "+Ja.string(tr.caught(a).unwrap())+" ("+this.getDriverName(!1)+")")}if(this.gl.deleteShader(e.vertex.s),this.gl.deleteShader(e.fragment.s),null!=s)throw this.gl.deleteProgram(e.p),tr.thrown("Program linkage failure: "+s+"\nVertex=\n"+t.vertex.code+"\n\nFragment=\n"+t.fragment.code);this.firstShader=!1,this.initShader(e,e.vertex,t.vertex,t),this.initShader(e,e.fragment,t.fragment,t);for(var i=[],a=(e.attribs=[],e.hasAttribIndex=[],e.stride=0),r=t.vertex.data.vars;a<r.length;){var l=r[a];if(++a,1==l.kind._hx_index){var o,h=5126,u=l.type;switch(u._hx_index){case 3:o=1;break;case 5:o=u.size;break;case 9:h=5120,o=u.size;break;default:throw tr.thrown("assert "+Ja.string(l.type))}var _=this.gl.getAttribLocation(e.p,n.varNames.h.hasOwnProperty(l.id)?n.varNames.h[l.id]:l.name);if(_<0);else{var c=new ue;if(c.type=h,c.size=o,c.index=_,c.offset=e.stride,c.divisor=0,null!=l.qualifiers)for(var d=0,p=l.qualifiers;d<p.length;){var f=p[d];++d,9==f._hx_index&&(c.divisor=f.v)}e.attribs.push(c),e.hasAttribIndex[c.index]=!0,i.push(l.name)}e.stride+=o}}e.inputs=le.get(i),this.programs.h[t.id]=e}return this.curShader!=e&&(this.setProgram(e),!0)},setProgram:function(t){this.gl.useProgram(t.p);for(var e=0,n=t.attribs;e<n.length;){var s=n[e];++e,this.curAttribs[s.index]||(this.gl.enableVertexAttribArray(s.index),this.curAttribs[s.index]=!0,this.maxIdxCurAttribs<s.index&&(this.maxIdxCurAttribs=s.index))}for(var i=0,e=0,n=this.maxIdxCurAttribs+1;e<n;){var a=e++;this.curAttribs[a]&&!t.hasAttribIndex[a]?(this.gl.disableVertexAttribArray(a),this.curAttribs[a]=!1):this.curAttribs[a]&&(i=a)}this.maxIdxCurAttribs=i,this.curShader=t,this.curBuffer=null;for(e=0,n=this.boundTextures.length;e<n;)this.boundTextures[e++]=null},uploadShaderBuffers:function(t,e){this.uploadBuffer(t,this.curShader.vertex,t.vertex,e),this.uploadBuffer(t,this.curShader.fragment,t.fragment,e)},uploadBuffer:function(t,e,n,s){switch(s){case 0:null!=e.globals&&this.gl.uniform4fv(e.globals,n.globals.subarray(0,4*e.shader.globalsSize));break;case 1:null!=e.params&&this.gl.uniform4fv(e.params,n.params.subarray(0,4*e.shader.paramsSize));break;case 2:for(var i=0,a=e.textures.length;i<a;){var r=i++,l=n.tex[r],o=e.textures[r];if(null==l||null==l.t&&null==l.realloc)switch(o.t._hx_index){case 10:var h=So.loadingTextureColor,l=A.fromColor(h,(h>>>24)/255);break;case 12:l=A.defaultCubeTexture();break;default:throw tr.thrown("Missing texture")}if(null!=l&&null==l.t&&null!=l.realloc){var u=this.curShader;if(l.alloc(),l.realloc(),this.curShader!=u)return this.setProgram(u),this.uploadShaderBuffers(t,0),this.uploadShaderBuffers(t,1),void this.uploadShaderBuffers(t,2)}if(l.set_lastFrame(this.frame),null!=o.u){u=e.vertex?r:this.curShader.vertex.textures.length+r;if(this.boundTextures[u]!=l.t){this.boundTextures[u]=l.t;var _=this.getBindType(l);if(_!=o.mode)throw tr.thrown("Texture format mismatch: "+Ja.string(l)+" should be "+Ja.string(o.t));this.gl.activeTexture(33984+u),this.gl.uniform1i(o.u,u),this.gl.bindTexture(_,l.t.t),this.lastActiveIndex=u}var _=l.mipMap._hx_index,c=l.filter._hx_index,d=l.wrap._hx_index,p=_|c<<3|d<<6;p!=l.t.bits&&(l.t.bits=p,p=m.TFILTERS[_][c],c=o.mode,this.gl.texParameteri(c,10240,p[0]),this.gl.texParameteri(c,10241,p[1]),o=m.TWRAP[d],this.gl.texParameteri(c,10242,o),this.gl.texParameteri(c,10243,o))}}break;case 3:if(null!=e.buffers)for(var f=0,i=(e.vertex||null==this.curShader.vertex.buffers||(f=this.curShader.vertex.buffers.length),0),a=e.buffers.length;i<a;){r=i++;this.gl.bindBufferBase(35345,r+f,n.buffers[r].buffer.vbuf.b)}}},selectMaterial:function(t){var e=t.bits;if(null==this.curTarget==this.rightHanded)switch(t.culling._hx_index){case 1:e=-4&e|2;break;case 2:e=-4&e|1}this.selectMaterialBits(e),this.curColorMask!=t.colorMask&&(n=t.colorMask,this.gl.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n)),this.curColorMask=n);var n=this.defStencil;null==t.stencil?this.curStEnabled&&(this.gl.disable(2960),this.curStEnabled=!1):(n=t.stencil,this.curStEnabled||(this.gl.enable(2960),this.curStEnabled=!0)),this.selectStencilBits(n.opBits,n.maskBits)},selectMaterialBits:function(t){var e,n,s,i,a=t^this.curMatBits;0!=(a=this.curMatBits<0?-1:a)&&(this.drawMode=0!=(268435456&t)?3:4,0!=(3&a)&&(0==(s=3&t)?this.gl.disable(2884):((this.curMatBits<0||0==(3&this.curMatBits))&&this.gl.enable(2884),this.gl.cullFace(m.FACES[s]))),0!=(4194240&a)&&(s=t>>10&15,e=t>>18&15,(n=t>>6&15)==(i=t>>14&15)&&s==e?0==n&&1==s?this.gl.disable(3042):((this.curMatBits<0||0==(this.curMatBits>>6&15)&&1==(this.curMatBits>>10&15))&&this.gl.enable(3042),this.gl.blendFunc(m.BLEND[n],m.BLEND[s])):((this.curMatBits<0||0==(this.curMatBits>>6&15)&&1==(this.curMatBits>>10&15))&&this.gl.enable(3042),this.gl.blendFuncSeparate(m.BLEND[n],m.BLEND[s],m.BLEND[i],m.BLEND[e]))),0!=(264241152&a)&&((n=t>>22&7)==(s=t>>25&7)?this.gl.blendEquation(m.OP[n]):this.gl.blendEquationSeparate(m.OP[n],m.OP[s])),0!=(4&a)&&this.gl.depthMask(0!=(t>>2&1)),0!=(56&a)&&(0==(i=t>>3&7)?this.gl.disable(2929):((this.curMatBits<0||0==(this.curMatBits>>3&7))&&this.gl.enable(2929),this.gl.depthFunc(m.COMPARE[i]))),this.curMatBits=t)},selectStencilBits:function(t,e){var n=t^this.curStOpBits,s=e^this.curStMaskBits;0!=(n|s)&&(0!=(4088&n)&&this.gl.stencilOpSeparate(m.FACES[2],m.STENCIL_OP[t>>6&7],m.STENCIL_OP[t>>9&7],m.STENCIL_OP[t>>3&7]),0!=(16744448&n)&&this.gl.stencilOpSeparate(m.FACES[1],m.STENCIL_OP[t>>18&7],m.STENCIL_OP[t>>21&7],m.STENCIL_OP[t>>15&7]),0!=(7&n|16711935&s)&&this.gl.stencilFuncSeparate(m.FACES[2],m.COMPARE[7&t],e>>16&255,255&e),0!=(28672&n|16711935&s)&&this.gl.stencilFuncSeparate(m.FACES[1],m.COMPARE[t>>12&7],e>>16&255,255&e),0!=(65280&s)&&(this.gl.stencilMaskSeparate(m.FACES[2],n=e>>8&255),this.gl.stencilMaskSeparate(m.FACES[1],n)),this.curStOpBits=t,this.curStMaskBits=e)},clear:function(t,e,n){var s=0;null!=t&&(this.gl.colorMask(!0,!0,!0,!0),this.curColorMask=15,this.gl.clearColor(t.x,t.y,t.z,t.w),s=16384),null!=e&&(this.gl.depthMask(!0),0<=this.curMatBits&&(this.curMatBits|=4),this.gl.clearDepth(e),s|=256),null!=n&&(this.selectStencilBits(this.defStencil.opBits,this.defStencil.maskBits),this.gl.clearStencil(n),s|=1024),0!=s&&this.gl.clear(s),null!=this.curTarget&&(this.curTarget.flags|=256)},resize:function(t,e){var n;""==this.canvas.style.width&&(n=t/window.devicePixelRatio|0,this.canvas.style.width=n+"px",n=e/window.devicePixelRatio|0,this.canvas.style.height=n+"px"),this.canvas.width=t,this.canvas.height=e,this.bufferWidth=t,this.bufferHeight=e,this.gl.viewport(0,0,t,e),null!=this.defaultDepth&&(this.disposeDepthBuffer(this.defaultDepth),this.defaultDepth.width=this.bufferWidth,this.defaultDepth.height=this.bufferHeight,this.defaultDepth.b=this.allocDepthBuffer(this.defaultDepth))},getChannels:function(t){switch(t.internalFmt){case 6407:return 6407;case 6408:case 32857:return 6408;case 6403:case 33321:case 33325:case 33326:return 6403;case 33319:case 33323:case 33327:case 33328:return 33319;case 34837:case 34843:return 6407;case 34836:case 34842:return 6408;case 33777:case 33778:case 33779:case 35842:case 37808:return 6408;case 35898:return 6407;case 35904:case 35905:return 6407;case 35840:case 36196:return 6407;default:throw tr.thrown("Invalid format "+t.internalFmt)}},isSupportedFormat:function(t){switch(t._hx_index){case 2:return!0;case 3:case 4:return this.hasFeature(co.FloatTextures);case 14:case 15:return this.hasFeature(co.SRGBTextures);case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 16:case 17:return 3<=this.glES;case 21:case 22:case 23:return!0;case 24:return t.v<=this.maxCompressedTexturesSupport;default:return!1}},getBindType:function(t){return 0!=(2&t.flags)?34067:0!=(2048&t.flags)?35866:3553},allocTexture:function(t){m.outOfMemoryCheck&&this.gl.getError();var e=this.gl.createTexture(),n=this.getBindType(t),s={t:e,width:t.width,height:t.height,internalFmt:6408,pixelFmt:5121,bits:-1,bind:n,bias:0};switch((r=t.format)._hx_index){case 1:s.internalFmt=32856;break;case 2:break;case 3:if(!this.hasFeature(co.FloatTextures))throw tr.thrown("Unsupported texture format "+Ja.string(t.format));s.pixelFmt=5131,s.internalFmt=34842;break;case 4:if(!this.hasFeature(co.FloatTextures))throw tr.thrown("Unsupported texture format "+Ja.string(t.format));s.internalFmt=34836,s.pixelFmt=5126;break;case 5:s.internalFmt=33321;break;case 6:s.internalFmt=33325,s.pixelFmt=5131;break;case 7:s.internalFmt=33326,s.pixelFmt=5126;break;case 8:s.internalFmt=33323;break;case 9:s.internalFmt=33327,s.pixelFmt=5131;break;case 10:s.internalFmt=33328,s.pixelFmt=5126;break;case 11:s.internalFmt=6407;break;case 12:s.internalFmt=34843,s.pixelFmt=5131;break;case 13:s.internalFmt=34837,s.pixelFmt=5126;break;case 14:s.internalFmt=35905;break;case 16:s.internalFmt=32857,s.pixelFmt=33640;break;case 17:s.internalFmt=35898,s.pixelFmt=35899;break;case 21:var i=r.v;if(0!=(3&t.width)||0!=(3&t.height))throw tr.thrown("Compressed texture "+Ja.string(t)+" has size "+t.width+"x"+t.height+" - must be a multiple of 4");if(null==i)throw tr.thrown("Unsupported texture format "+Ja.string(t.format));switch(i){case 8:s.internalFmt=35840;break;case 9:s.internalFmt=35842;break;default:throw tr.thrown("Unsupported texture format "+Ja.string(t.format))}break;case 22:var i=r.v;if(0!=(3&t.width)||0!=(3&t.height))throw tr.thrown("Compressed texture "+Ja.string(t)+" has size "+t.width+"x"+t.height+" - must be a multiple of 4");if(null==i)throw tr.thrown("Unsupported texture format "+Ja.string(t.format));if(10!=i)throw tr.thrown("Unsupported texture format "+Ja.string(t.format));s.internalFmt=37808;break;case 23:i=r.v;if(0!=(3&t.width)||0!=(3&t.height))throw tr.thrown("Compressed texture "+Ja.string(t)+" has size "+t.width+"x"+t.height+" - must be a multiple of 4");if(null==i)throw tr.thrown("Unsupported texture format "+Ja.string(t.format));if(0!=i)throw tr.thrown("Unsupported texture format "+Ja.string(t.format));s.internalFmt=36196;break;case 24:if(!((i=r.v)<=this.maxCompressedTexturesSupport))throw tr.thrown("Unsupported texture format "+Ja.string(t.format));if(0!=(3&t.width)||0!=(3&t.height))throw tr.thrown("Compressed texture "+Ja.string(t)+" has size "+t.width+"x"+t.height+" - must be a multiple of 4");if(null==i)throw tr.thrown("Unsupported texture format "+Ja.string(t.format));switch(i){case 1:s.internalFmt=33777;break;case 2:s.internalFmt=33778;break;case 3:s.internalFmt=33779;break;default:throw tr.thrown("Unsupported texture format "+Ja.string(t.format))}break;default:throw tr.thrown("Unsupported texture format "+Ja.string(t.format))}t.set_lastFrame(this.frame),t.flags&=-257,this.gl.bindTexture(n,s.t);for(var a=!1,r=(this.gl.texParameteri(n,33084,0),this.gl.texParameteri(n,33085,t.get_mipLevels()-1),0),i=t.get_mipLevels();r<i;){var l=r++,o=s.width>>l,h=1<o?o:1,o=s.height>>l,u=1<o?o:1;if(0!=(2&t.flags))for(var _,c=0;c<6;){if(this.gl.texImage2D(m.CUBE_FACES[c++],l,s.internalFmt,h,u,0,this.getChannels(s),s.pixelFmt,null),m.outOfMemoryCheck){var d=this.gl.getError();if(1285==d)_=a=!0;else{if(0!=d)throw tr.thrown("Failed to alloc texture "+Ja.string(t.format)+"(error "+d+")");_=!1}}else _=!1;if(_)break}else if(0!=(2048&t.flags)){if(this.gl.texImage3D(n,l,s.internalFmt,h,u,t.get_layerCount(),0,this.getChannels(s),s.pixelFmt,null),m.outOfMemoryCheck){o=this.gl.getError();if(1285==o)a=!0;else if(0!=o)throw tr.thrown("Failed to alloc texture "+Ja.string(t.format)+"(error "+o+")")}}else if(24!=t.format._hx_index&&23!=t.format._hx_index&&22!=t.format._hx_index&&21!=t.format._hx_index&&this.gl.texImage2D(n,l,s.internalFmt,h,u,0,this.getChannels(s),s.pixelFmt,null),m.outOfMemoryCheck){o=this.gl.getError();if(1285==o)a=!0;else if(0!=o)throw tr.thrown("Failed to alloc texture "+Ja.string(t.format)+"(error "+o+")")}}return this.restoreBind(),a?(this.gl.deleteTexture(s.t),null):s},restoreBind:function(){var t=this.boundTextures[this.lastActiveIndex];null==t?this.gl.bindTexture(3553,null):this.gl.bindTexture(t.bind,t.t)},allocDepthBuffer:function(t){var e,n=this.gl.createRenderbuffer();switch(null==t.format&&(t.format=3<=this.glES?ko.Depth24Stencil8:ko.Depth16),t.format._hx_index){case 0:e=33189;break;case 1:if(!(3<=this.glES))throw tr.thrown("Unsupported depth format "+Ja.string(t.format));e=33190;break;case 2:e=34041;break;default:throw tr.thrown("Unsupported depth format "+Ja.string(t.format))}return this.gl.bindRenderbuffer(36161,n),this.gl.renderbufferStorage(36161,e,t.width,t.height),this.gl.bindRenderbuffer(36161,null),{r:n}},disposeDepthBuffer:function(t){null!=t.b&&null!=t.b.r&&(this.gl.deleteRenderbuffer(t.b.r),t.b=null)},getDefaultDepthBuffer:function(){return null==this.defaultDepth&&(this.defaultDepth=new Bo(0,0),this.defaultDepth.width=this.bufferWidth,this.defaultDepth.height=this.bufferHeight,this.defaultDepth.b=this.allocDepthBuffer(this.defaultDepth)),this.defaultDepth},allocVertexes:function(t){m.outOfMemoryCheck&&this.gl.getError();var e=this.gl.createBuffer();if(this.gl.bindBuffer(34962,e),t.size*t.stride==0)throw tr.thrown("assert");this.gl.bufferData(34962,t.size*t.stride*4,0!=(1&t.flags)?35048:35044);var n=m.outOfMemoryCheck&&1285==this.gl.getError();return this.gl.bindBuffer(34962,null),n?(this.gl.deleteBuffer(e),null):{b:e,stride:t.stride}},allocIndexes:function(t,e){m.outOfMemoryCheck&&this.gl.getError();var n=this.gl.createBuffer(),t=(this.gl.bindBuffer(34963,n),this.gl.bufferData(34963,t*(e?4:2),35044),m.outOfMemoryCheck&&1285==this.gl.getError());return this.gl.bindBuffer(34963,null),this.curIndexBuffer=null,t?(this.gl.deleteBuffer(n),null):{b:n,is32:e}},disposeTexture:function(t){var e=t.t;if(null!=e){t.t=null;for(var n=0,s=this.boundTextures.length;n<s;){var i=n++;this.boundTextures[i]==e&&(this.boundTextures[i]=null)}this.gl.deleteTexture(e.t)}},disposeIndexes:function(t){this.gl.deleteBuffer(t.b)},disposeVertexes:function(t){this.gl.deleteBuffer(t.b)},generateMipMaps:function(t){var e=this.getBindType(t);this.gl.bindTexture(e,t.t.t),this.gl.generateMipmap(e),this.restoreBind()},uploadTextureBitmap:function(t,e,n,s){var i;t.format!=v.RGBA||1!=t.get_layerCount()?(i=e.getPixels(),this.uploadTexturePixels(t,i,n,s),i.dispose()):(s=e.ctx,this.gl.bindTexture(3553,t.t.t),this.gl.texImage2D(3553,n,t.t.internalFmt,this.getChannels(t.t),t.t.pixelFmt,s.getImageData(0,0,e.ctx.canvas.width,e.ctx.canvas.height)),this.restoreBind())},resetStream:function(){},uploadTexturePixels:function(t,e,n,s){var i,a=0!=(2&t.flags)?m.CUBE_FACES[s]:0!=(2048&t.flags)?35866:3553,r=this.getBindType(t),l=(this.gl.bindTexture(r,t.t.t),e.convert(t.format),e.setFlip(!1),e.dataSize);switch(t.format._hx_index){case 3:case 6:case 9:case 12:i=new Uint16Array(e.bytes.b.buffer,e.offset,l>>1);break;case 4:case 7:case 10:case 13:i=new Float32Array(e.bytes.b.buffer,e.offset,l>>2);break;case 16:case 17:i=new Uint32Array(e.bytes.b.buffer,e.offset,l>>2);break;default:i=new Uint8Array(e.bytes.b.buffer,e.offset,l)}switch(t.format._hx_index){case 21:case 22:case 23:case 24:0!=(2048&t.flags)?this.gl.compressedTexSubImage3D(a,n,0,0,s,e.width,e.height,1,t.t.internalFmt,i):this.gl.compressedTexImage2D(a,n,t.t.internalFmt,e.width,e.height,0,i);break;default:0!=(2048&t.flags)?this.gl.texSubImage3D(a,n,0,0,s,e.width,e.height,1,this.getChannels(t.t),t.t.pixelFmt,i):this.gl.texImage2D(a,n,t.t.internalFmt,e.width,e.height,0,this.getChannels(t.t),t.t.pixelFmt,i)}t.flags|=256,this.restoreBind()},uploadVertexBuffer:function(t,e,n,s,i){var a=t.stride,t=(this.gl.bindBuffer(34962,t.b),new Float32Array(s.array.buffer,4*i,n*a));this.gl.bufferSubData(34962,e*a*4,t),this.gl.bindBuffer(34962,null)},uploadVertexBytes:function(t,e,n,s,i){var a=t.stride;this.gl.bindBuffer(34962,t.b),this.gl.bufferSubData(34962,e*a*4,new Uint8Array(s.b.bufferValue,4*i,n*a*4)),this.gl.bindBuffer(34962,null)},uploadIndexBuffer:function(t,e,n,s,i){var a=t.is32?2:1,t=(this.gl.bindBuffer(34963,t.b),new Uint16Array(new Uint16Array(s).buffer,i<<a,n));this.gl.bufferSubData(34963,e<<a,t),this.gl.bindBuffer(34963,null),this.curIndexBuffer=null},uploadIndexBytes:function(t,e,n,s,i){var a=t.is32?2:1;this.gl.bindBuffer(34963,t.b),this.gl.bufferSubData(34963,e<<a,new Uint8Array(s.b.bufferValue,i<<a,n<<a)),this.gl.bindBuffer(34963,null),this.curIndexBuffer=null},selectBuffer:function(t){if(t!=this.curBuffer)if(null!=this.curBuffer&&t.buffer==this.curBuffer.buffer&&0!=(16&t.buffer.flags)==(0!=(16&this.curBuffer.flags)))this.curBuffer=t;else{if(null==this.curShader)throw tr.thrown("No shader selected");var e=(this.curBuffer=t).buffer.vbuf;if(e.stride<this.curShader.stride)throw tr.thrown("Buffer stride ("+e.stride+") and shader stride ("+this.curShader.stride+") mismatch");if(this.gl.bindBuffer(34962,e.b),0!=(16&t.flags))for(var n=0,s=this.curShader.attribs;n<s.length;){var i=s[n];++n,this.gl.vertexAttribPointer(i.index,i.size,i.type,!1,4*e.stride,4*i.offset),this.currentDivisor[i.index]!=i.divisor&&(this.currentDivisor[i.index]=i.divisor,this.gl.vertexAttribDivisor(i.index,i.divisor))}else for(var a=8,n=0,s=this.curShader.attribs.length;n<s;){var r,l=n++,i=this.curShader.attribs[l],o=this.curShader.inputs.names[l];switch(o){case"normal":if(e.stride<6)throw tr.thrown("Buffer is missing NORMAL data, set it to RAW format ?");r=3;break;case"position":r=0;break;case"uv":if(e.stride<8)throw tr.thrown("Buffer is missing UV data, set it to RAW format ?");r=6;break;default:if(r=a,(a+=i.size)>e.stride)throw tr.thrown("Buffer is missing '"+o+"' data, set it to RAW format ?")}this.gl.vertexAttribPointer(i.index,i.size,i.type,!1,4*e.stride,4*r),this.currentDivisor[i.index]!=i.divisor&&(this.currentDivisor[i.index]=i.divisor,this.gl.vertexAttribDivisor(i.index,i.divisor))}}},selectMultiBuffers:function(t){for(var e=0,n=this.curShader.attribs;e<n.length;){var s=n[e];++e,this.gl.bindBuffer(34962,t.buffer.buffer.vbuf.b),this.gl.vertexAttribPointer(s.index,s.size,s.type,!1,4*t.buffer.buffer.stride,4*t.offset),this.currentDivisor[s.index]!=s.divisor&&(this.currentDivisor[s.index]=s.divisor,this.gl.vertexAttribDivisor(s.index,s.divisor)),t=t.next}this.curBuffer=null},draw:function(t,e,n){t!=this.curIndexBuffer&&(this.curIndexBuffer=t,this.gl.bindBuffer(34963,t.b)),t.is32?this.gl.drawElements(this.drawMode,3*n,5125,4*e):this.gl.drawElements(this.drawMode,3*n,5123,2*e)},drawInstanced:function(t,e){t!=this.curIndexBuffer&&(this.curIndexBuffer=t,this.gl.bindBuffer(34963,t.b)),s=t.is32?(n=5125,4):(n=5123,2);var n,s,i=e.data;if(null!=i)for(var a=0,r=0,l=i.length/3|0;r<l;)++r,this.gl.drawElementsInstanced(this.drawMode,i[a++],n,i[a++]*s,i[a++]);else this.gl.drawElementsInstanced(this.drawMode,e.indexCount,n,e.startIndex*s,e.commandCount)},end:function(){},isDisposed:function(){return this.gl.isContextLost()},setRenderZone:function(t,e,n,s){0==t&&0==e&&n<0&&s<0?this.gl.disable(3089):(this.gl.enable(3089),null==this.curTarget&&(e=this.bufferHeight-(e+s)),this.gl.scissor(t,e,n,s))},setDrawBuffers:function(t){3<=this.glES?this.gl.drawBuffers(m.CBUFFERS[t]):null!=this.mrtExt&&this.mrtExt.drawBuffersWEBGL(m.CBUFFERS[t])},unbindTargets:function(){if(null!=this.curTarget&&1<this.numTargets){for(;1<this.numTargets;)this.gl.framebufferTexture2D(36160,36064+--this.numTargets,3553,null,0),this.curTargets[this.numTargets]=null;this.setDrawBuffers(1)}},capturePixels:function(t,e,n,s){var i,s=null!=s?(s.xMax>t.width&&(s.xMax=t.width),s.yMax>t.height&&(s.yMax=t.height),s.xMin<0&&(s.xMin=0),s.yMin<0&&(s.yMin=0),a=s.xMax-s.xMin,r=s.yMax-s.yMin,i=s.xMin,s.yMin):(a=t.width,r=t.height,i=0),a=Y_.alloc(a=0==(a>>=n)?1:a,r=0==(r>>=n)?1:r,t.format),r=this.curTarget,l=this.numTargets,o=this.curTargetLayer,h=this.curTargetMip;if(1<l)for(var u=this.numTargets=1;u<l;){var _=u++;this.curTargets[_]==t&&this.gl.framebufferTexture2D(36160,36064+_,3553,null,0)}if(this.setRenderTarget(t,e,n),this.captureSubRenderBuffer(a,i,s),this.setRenderTarget(r,o,h),1<l){for(u=1;u<l;){_=u++;this.curTargets[_]==t&&this.gl.framebufferTexture2D(36160,36064+_,3553,t.t.t,0)}this.setDrawBuffers(l),this.numTargets=l}return a},setRenderTarget:function(t,e,n){if(null==n&&(n=0),null==e&&(e=0),this.unbindTargets(),null==(this.curTarget=t))this.gl.bindFramebuffer(36160,null),this.gl.viewport(0,0,this.bufferWidth,this.bufferHeight);else{if(null!=t.depthBuffer&&(t.depthBuffer.width!=t.width||t.depthBuffer.height!=t.height))throw tr.thrown("Invalid depth buffer size : does not match render target size");if(0<n&&1==this.glES)throw tr.thrown("Cannot render to mipLevel in WebGL1, use upload() instead");null==t.t&&t.alloc(),0!=(4&t.flags)&&0==(256&t.flags)&&(s=this.getBindType(t),this.gl.bindTexture(s,t.t.t),this.gl.generateMipmap(s),this.restoreBind()),t.set_lastFrame(this.frame),this.curTargetLayer=e,this.curTargetMip=n,this.gl.bindFramebuffer(36160,this.commonFB),0!=(2048&t.flags)?this.gl.framebufferTextureLayer(36160,36064,t.t.t,n,e):this.gl.framebufferTexture2D(36160,36064,0!=(2&t.flags)?m.CUBE_FACES[e]:3553,t.t.t,n),null!=t.depthBuffer?t.depthBuffer.hasStencil()&&t.depthBuffer.format==ko.Depth24Stencil8?this.gl.framebufferRenderbuffer(36160,33306,36161,t.depthBuffer.b.r):(this.gl.framebufferRenderbuffer(36160,33306,36161,null),this.gl.framebufferRenderbuffer(36160,36096,36161,t.depthBuffer.b.r),this.gl.framebufferRenderbuffer(36160,36128,36161,t.depthBuffer.hasStencil()?t.depthBuffer.b.r:null)):(this.gl.framebufferRenderbuffer(36160,33306,36161,null),this.gl.framebufferRenderbuffer(36160,36096,36161,null),this.gl.framebufferRenderbuffer(36160,36128,36161,null));for(var s=t.width>>n,e=t.height>>n,i=(this.gl.viewport(0,0,s=0==s?1:s,e=0==e?1:e),0),a=this.boundTextures.length;i<a;)this.boundTextures[i++]=null;if(0==(256&t.flags)&&(t.flags|=256,this.clear(m.BLACK)),this.glDebug){n=this.gl.checkFramebufferStatus(36160);if(36053!=n)throw tr.thrown("Invalid frame buffer: "+n)}}},setRenderTargets:function(t){if(this.unbindTargets(),this.setRenderTarget(t[0]),!(t.length<2)){this.numTargets=t.length;for(var e=!1,n=1,s=t.length;n<s;){var i=n++,a=t[i];null==a.t&&a.alloc(),this.gl.framebufferTexture2D(36160,36064+i,3553,a.t.t,0),(this.curTargets[i]=a).set_lastFrame(this.frame),0==(256&a.flags)&&(a.flags|=256,e=!0)}this.setDrawBuffers(t.length),e&&this.clear(m.BLACK)}},init:function(t,e){var n,s;null==e&&(e=!1),"complete"==window.document.readyState?(n=t,qu.delay(function(){n(!1)},1)):(s=function(){window.removeEventListener("load",s),t(!1)},window.addEventListener("load",s))},hasFeature:function(t){return this.features.get(t)},checkTextureSupport:function(){var t=null!=this.gl.getExtension("WEBGL_compressed_texture_astc"),e=null!=this.gl.getExtension("WEBGL_compressed_texture_s3tc"),n=null!=this.gl.getExtension("WEBGL_compressed_texture_pvrtc")||null!=this.gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),s=null!=this.gl.getExtension("WEBGL_compressed_texture_etc1");return t?v.ASTC():e?v.S3TC():n?v.PVRTC():s?v.ETC():null},makeFeatures:function(){for(var t,e=0,n=co.__empty_constructs__.slice();e<n.length;){var s=n[e];++e,this.features.set(s,this.checkFeature(s))}switch(this.textureSupport=this.checkTextureSupport(),this.textureSupport._hx_index){case 21:case 22:case 23:case 24:t=3;break;default:t=0}this.maxCompressedTexturesSupport=t},checkFeature:function(t){switch(t._hx_index){case 0:return 3<=this.glES||null!=this.gl.getExtension("OES_standard_derivatives");case 1:return 3<=this.glES?null!=this.gl.getExtension("EXT_color_buffer_float")&&null!=this.gl.getExtension("OES_texture_float_linear"):null!=this.gl.getExtension("OES_texture_float")&&null!=this.gl.getExtension("OES_texture_float_linear")&&null!=this.gl.getExtension("OES_texture_half_float")&&null!=this.gl.getExtension("OES_texture_half_float_linear");case 4:return 3<=this.glES||null!=this.mrtExt||null!=(this.mrtExt=this.gl.getExtension("WEBGL_draw_buffers"));case 6:return 3<=this.glES||null!=this.gl.getExtension("EXT_sRGB");case 7:return 3<=this.glES;case 2:case 3:case 8:case 9:return!0;case 10:return 3<=this.glES||null!=this.gl.getExtension("ANGLE_instanced_arrays");default:return!1}},captureSubRenderBuffer:function(t,e,n){if(null==this.curTarget)throw tr.thrown("Can't capture main render buffer in GL");this.gl.getError();var s=t.bytes.b;switch(this.curTarget.format._hx_index){case 3:case 6:case 9:case 12:s=new Uint16Array(s.buffer);break;case 4:case 7:case 10:case 13:s=new Float32Array(s.buffer);break;case 16:case 17:s=new Uint32Array(s.buffer)}this.gl.readPixels(e,n,t.width,t.height,this.getChannels(this.curTarget.t),this.curTarget.t.pixelFmt,s);e=this.gl.getError();if(0!=e)throw tr.thrown("Failed to capture pixels (error "+e+")");t.set_innerFormat(this.curTarget.format)},__class__:m}),(e["h3d.impl.InstanceBuffer"]=ce).__name__="h3d.impl.InstanceBuffer",ce.prototype={__class__:ce},(e["h3d.impl._ManagedBuffer.FreeCell"]=de).__name__="h3d.impl._ManagedBuffer.FreeCell",de.prototype={__class__:de},(e["h3d.impl.ManagedBuffer"]=pe).__name__="h3d.impl.ManagedBuffer",pe.prototype={uploadVertexBuffer:function(t,e,n,s){this.mem.driver.uploadVertexBuffer(this.vbuf,t,e,n,s=null==s?0:s)},uploadVertexBytes:function(t,e,n,s){this.mem.driver.uploadVertexBytes(this.vbuf,t,e,n,s=null==s?0:s)},allocPosition:function(t,e){for(var n,s=this.freeList;null!=s;){if(s.count>=t){var i=(e-s.pos%e)%e;if(0==i)break;if(s.count>=t+i){s.next=new de(s.pos+i,s.count-i,s.next),s.count=i,s=s.next;break}}s=s.next}return null==s?-1:(n=s.pos,s.pos+=t,s.count-=t,n)},allocBuffer:function(t){var e=this.allocPosition(t.vertices,0!=(4&t.flags)?4:0!=(2&t.flags)?3:1);return!(e<0||(t.position=e,t.buffer=this,0))},freeBuffer:function(t){for(var e,n=null,s=this.freeList,i=t.vertices,a=t.position+i;null!=s;){if(s.pos==a){s.pos-=i,s.count+=i,null!=n&&n.pos+n.count==s.pos&&(n.count+=s.count,n.next=s.next),i=0;break}if(s.pos>a){null!=n&&n.pos+n.count==t.position?n.count+=i:(e=new de(t.position,i,s),null==n?this.freeList=e:n.next=e),i=0;break}s=(n=s).next}if(0!=i)throw tr.thrown("assert");this.freeList.count==this.size&&0==(8&this.flags)&&this.dispose()},dispose:function(){this.mem.freeManaged(this)},__class__:pe},function(t){this.bufferCount=0,this.texMemory=0,this.usedMemory=0,this.driver=t}),go=((e["h3d.impl.MemoryManager"]=fo).__name__="h3d.impl.MemoryManager",fo.prototype={init:function(){this.indexes=[],this.textures=[],this.buffers=[],this.depths=[],this.initIndexes()},initIndexes:function(){for(var t=new Array(0),e=0;e<65533;)t.push(e++);this.triIndexes=Kt.alloc(t);for(t=new Array(0),e=0;e<16383;){var n=e++<<2;t.push(n),t.push(1+n),t.push(2+n),t.push(2+n),t.push(1+n),t.push(3+n)}t.push(65533),this.quadIndexes=Kt.alloc(t)},garbage:function(){},cleanManagedBuffers:function(){for(var t=1,e=this.buffers.length;t<e;)for(var n=t++,s=this.buffers[n],i=null;null!=s;)s.freeList.count==s.size?(s.dispose(),null==i?this.buffers[n]=s.next:i.next=s.next):i=s,s=s.next},allocManaged:function(t){if(null==t.vbuf){var e=t.size*t.stride*4;if(0!=e){for(;4294967296<this.usedMemory+e||65536<=this.bufferCount||null==(t.vbuf=this.driver.allocVertexes(t));){if(this.driver.isDisposed())return;var n=this.usedMemory-this.freeMemorySize();if(this.garbage(),this.cleanManagedBuffers(),this.usedMemory-this.freeMemorySize()==n){if(65536<=this.bufferCount)throw tr.thrown("Too many buffers");throw tr.thrown("Memory full ("+Math.ceil(n/1024)+" KB,"+this.bufferCount+" buffers)")}}this.usedMemory+=e,this.bufferCount++}}},freeManaged:function(t){if(null!=t.vbuf&&(this.driver.disposeVertexes(t.vbuf),t.vbuf=null,this.usedMemory-=t.size*t.stride*4,this.bufferCount--,0==(8&t.flags)))for(var e=this.buffers[0],n=null;null!=e;){if(e==t){null==n?this.buffers[0]=t.next:n.next=t.next;break}e=(n=e).next}},allocBuffer:function(t,e){var n=0!=(4&t.flags)?65532:0!=(2&t.flags)?65533:65534;if(t.vertices>n&&0==(64&t.flags)&&0==(128&t.flags)){if(65534==n)throw tr.thrown("Cannot split buffer with "+t.vertices+" vertices if it's not Quads/Triangles");for(var s=t.vertices-n,i=(t.vertices=n,this.allocBuffer(t,e),t);null!=i.next;)i=i.next;for(var a=[],r=0,l=fo.ALL_FLAGS;r<l.length;){var o=l[r];++r,0!=(t.flags&1<<o._hx_index)&&a.push(o)}i.next=new io(s,e,a)}else{if(0==(8&t.flags)){a=null;if(0!=(1&t.flags)&&(a=[]).push(so.Dynamic),0!=(64&t.flags)&&(a=null==a?[]:a).push(so.UniformBuffer),(h=new pe(e,t.vertices,a)).next=this.buffers[0],(this.buffers[0]=h).allocBuffer(t))return;throw tr.thrown("assert")}for(var h=this.buffers[e],u=null;null!=h;){if(h.allocBuffer(t))return;h=(u=h).next}var _=0!=(2&t.flags)?3:0!=(4&t.flags)?4:0;if(null==h&&0<_){for(var c=t.vertices,d=c;2048<d;)for(h=this.buffers[e],d=(d>>=1)-d%_,t.vertices=d;null!=h;){if(h.allocBuffer(t)){for(a=[],r=0,l=fo.ALL_FLAGS;r<l.length;){o=l[r];++r,0!=(t.flags&1<<o._hx_index)&&a.push(o)}return void(t.next=new io(c-d,e,a))}h=h.next}t.vertices=c}if(h=new pe(e,65533,[so.Managed]),null==u?this.buffers[e]=h:u.next=h,!h.allocBuffer(t))throw tr.thrown("assert")}},deleteIndexes:function(t){Jn.remove(this.indexes,t),this.driver.disposeIndexes(t.ibuf),t.ibuf=null,this.usedMemory-=t.count*(t.is32?4:2)},allocIndexes:function(t){t.ibuf=this.driver.allocIndexes(t.count,t.is32),this.indexes.push(t),this.usedMemory+=t.count*(t.is32?4:2)},memSize:function(t){if(0!=(4096&t.flags)&&0!=(512&t.flags))return 4;var e=Y_.calcDataSize(t.width,t.height,t.format);if(0<t.get_mipLevels())for(var n=1,s=t.get_mipLevels();n<s;){var i=n++,a=t.width>>i,i=(0==a&&(a=1),t.height>>i);0==i&&(i=1),e+=Y_.calcDataSize(a,i,t.format)}return e*t.get_layerCount()},cleanTextures:function(t){null==t&&(t=!0),this.textures.sort(W(this,this.sortByLRU));for(var e=0,n=this.textures;e<n.length;){var s=n[e];if(++e,null!=s.realloc&&(null!=s.t||null!=s.realloc)&&((t||s.get_lastFrame()<K_.frameCount-3600)&&s.get_lastFrame()!=A.PREVENT_AUTO_DISPOSE))return s.dispose(),!0}return!1},sortByLRU:function(t,e){return t.get_lastFrame()-e.get_lastFrame()},deleteTexture:function(t){Jn.remove(this.textures,t)&&(this.driver.disposeTexture(t),this.texMemory-=this.memSize(t))},allocTexture:function(t){for(;;){var e=this.cleanTextures(!1);if(t.t=this.driver.allocTexture(t),null!=t.t)break;if(this.driver.isDisposed())return;for(;this.cleanTextures(!1););if(!e&&!this.cleanTextures(!0))throw tr.thrown("Maximum texture memory reached")}this.textures.push(t),this.texMemory+=this.memSize(t)},allocDepth:function(t){for(;;){var e=this.cleanTextures(!1);if(t.b=this.driver.allocDepthBuffer(t),null!=t.b)break;if(this.driver.isDisposed())return;for(;this.cleanTextures(!1););if(!e&&!this.cleanTextures(!0))throw tr.thrown("Maximum texture memory reached")}this.depths.push(t),this.texMemory+=t.width*t.height*4},deleteDepth:function(t){Jn.remove(this.depths,t)&&(this.driver.disposeDepthBuffer(t),this.texMemory-=t.width*t.height*4)},onContextLost:function(){this.dispose(),this.initIndexes()},dispose:function(){null!=this.triIndexes&&this.triIndexes.dispose(),null!=this.quadIndexes&&this.quadIndexes.dispose(),this.triIndexes=null,this.quadIndexes=null;for(var t=0,e=this.textures.slice();t<e.length;)e[t++].dispose();for(t=0,e=this.depths.slice();t<e.length;)e[t++].dispose();for(t=0,e=this.buffers.slice();t<e.length;)for(var n=e[t++];null!=n;)n.dispose(),n=n.next;for(t=0,e=this.indexes.slice();t<e.length;)e[t++].dispose();this.buffers=[],this.indexes=[],this.textures=[],this.bufferCount=0,this.usedMemory=0,this.texMemory=0},freeMemorySize:function(){for(var t=0,e=0,n=this.buffers;e<n.length;)for(var s=n[e++];null!=s;){for(var i=s.freeList;null!=i;)t+=i.count*s.stride*4,i=i.next;s=s.next}return t},__class__:fo},function(){}),mo=((e["h3d.impl.NullDriver"]=go).__name__="h3d.impl.NullDriver",go.__super__=oe,go.prototype=t(oe.prototype,{hasFeature:function(t){return!0},isSupportedFormat:function(t){return!0},isDisposed:function(){return!1},init:function(t,e){null==e&&(e=!1),t(!1)},selectShader:function(t){return this.cur!=t&&(this.cur=t,!0)},getShaderInputNames:function(){for(var t=[],e=0,n=this.cur.vertex.data.vars;e<n.length;){var s=n[e];++e,s.kind==Q.Input&&t.push(s.name)}return le.get(t)},allocTexture:function(t){return{}},allocIndexes:function(t,e){return{}},allocVertexes:function(t){return{}},__class__:go}),(e["h3d.impl.RendererFX"]=fe).__name__="h3d.impl.RendererFX",fe.__isInterface__=!0,fe.prototype={__class__:fe},function(t){this.position=0,this.ctx=t,this.cache=[],this.defaultFormat=A.nativeFormat,this.defaultDepthBuffer=Bo.getDefault()}),Ao=((e["h3d.impl.TextureCache"]=mo).__name__="h3d.impl.TextureCache",mo.prototype={begin:function(){for(;this.cache.length>this.position;){var t=this.cache.pop();null!=t&&t.dispose()}this.position=0},lookupTarget:function(t,e,n,s,i){for(var a=this.cache[this.position],r=this.position+1,l=this.cache.length;r<l;){var o=r++,h=this.cache[o];if(null!=h&&(null!=h.t||null!=h.realloc)&&h.width==e&&h.height==n&&h.format==s&&i==(0!=(2&h.flags)))return this.cache[this.position]=h,this.cache[o]=a,h}null!=a&&a.name==t&&(a.dispose(),a=null);t=[Mo.Target],i&&t.push(Mo.Cube),t=new A(e,n,t,s);return t.realloc=function(){},null!=a?this.cache.splice(this.position,0,t):this.cache[this.position]=t,t},allocTarget:function(t,e,n,s,i,a){null==a&&(a=!1),null==s&&(s=!0);var r=this.cache[this.position];return null==i&&(i=this.defaultFormat),(r=null==r||null==r.t&&null==r.realloc||r.width!=e||r.height!=n||r.format!=i||a!=(0!=(2&r.flags))?this.lookupTarget(t,e,n,i,a):r).depthBuffer=s?this.defaultDepthBuffer:null,r.setName(t),this.position++,r},allocTileTarget:function(t,e,n,s){return null==n&&(n=!1),this.allocTarget(t,Math.ceil(e.width+e.x)-Math.floor(e.x),Math.ceil(e.height+e.y)-Math.floor(e.y),n,s)},dispose:function(){for(var t=0,e=this.cache;t<e.length;)e[t++].dispose();this.cache=[]},__class__:mo},(e["hxd.impl.AnyProps"]=ge).__name__="hxd.impl.AnyProps",ge.prototype={set_props:function(t){return this.props=t,this.refreshProps(),t},getDefaultProps:function(t){return{}},refreshProps:function(){},__class__:ge,__properties__:{set_props:"set_props"}},(e["h3d.mat.BaseMaterial"]=me).__name__="h3d.mat.BaseMaterial",me.__super__=ge,me.prototype=t(ge.prototype,{addPass:function(t){for(var e=null,n=this.passes;null!=n;)n=(e=n).nextPass;return null==e?this.passes=t:e.nextPass=t,t.nextPass=null,t},removePass:function(t){for(var e=null,n=this.passes;null!=n;){if(n==t)return null==e?this.passes=t.nextPass:e.nextPass=t.nextPass,!(t.nextPass=null);n=(e=n).nextPass}return!1},getPass:function(t){for(var e=this.passes;null!=e;){if(e.name==t)return e;e=e.nextPass}return null},clone:function(t){return(t=null==t?new me:t).passes.load(this.passes),t.name=this.name,t.set_props(this.props),t},__class__:me}),d["h3d.mat.Face"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.mat.Face",toString:l},Back:{_hx_name:"Back",_hx_index:1,__enum__:"h3d.mat.Face",toString:l},Front:{_hx_name:"Front",_hx_index:2,__enum__:"h3d.mat.Face",toString:l},Both:{_hx_name:"Both",_hx_index:3,__enum__:"h3d.mat.Face",toString:l}}),$a=(Ao.__constructs__=[Ao.None,Ao.Back,Ao.Front,Ao.Both],Ao.__empty_constructs__=[Ao.None,Ao.Back,Ao.Front,Ao.Both],d["h3d.mat.Blend"]={__ename__:!0,__constructs__:null,One:{_hx_name:"One",_hx_index:0,__enum__:"h3d.mat.Blend",toString:l},Zero:{_hx_name:"Zero",_hx_index:1,__enum__:"h3d.mat.Blend",toString:l},SrcAlpha:{_hx_name:"SrcAlpha",_hx_index:2,__enum__:"h3d.mat.Blend",toString:l},SrcColor:{_hx_name:"SrcColor",_hx_index:3,__enum__:"h3d.mat.Blend",toString:l},DstAlpha:{_hx_name:"DstAlpha",_hx_index:4,__enum__:"h3d.mat.Blend",toString:l},DstColor:{_hx_name:"DstColor",_hx_index:5,__enum__:"h3d.mat.Blend",toString:l},OneMinusSrcAlpha:{_hx_name:"OneMinusSrcAlpha",_hx_index:6,__enum__:"h3d.mat.Blend",toString:l},OneMinusSrcColor:{_hx_name:"OneMinusSrcColor",_hx_index:7,__enum__:"h3d.mat.Blend",toString:l},OneMinusDstAlpha:{_hx_name:"OneMinusDstAlpha",_hx_index:8,__enum__:"h3d.mat.Blend",toString:l},OneMinusDstColor:{_hx_name:"OneMinusDstColor",_hx_index:9,__enum__:"h3d.mat.Blend",toString:l},ConstantColor:{_hx_name:"ConstantColor",_hx_index:10,__enum__:"h3d.mat.Blend",toString:l},ConstantAlpha:{_hx_name:"ConstantAlpha",_hx_index:11,__enum__:"h3d.mat.Blend",toString:l},OneMinusConstantColor:{_hx_name:"OneMinusConstantColor",_hx_index:12,__enum__:"h3d.mat.Blend",toString:l},OneMinusConstantAlpha:{_hx_name:"OneMinusConstantAlpha",_hx_index:13,__enum__:"h3d.mat.Blend",toString:l},SrcAlphaSaturate:{_hx_name:"SrcAlphaSaturate",_hx_index:14,__enum__:"h3d.mat.Blend",toString:l}}),xo=($a.__constructs__=[$a.One,$a.Zero,$a.SrcAlpha,$a.SrcColor,$a.DstAlpha,$a.DstColor,$a.OneMinusSrcAlpha,$a.OneMinusSrcColor,$a.OneMinusDstAlpha,$a.OneMinusDstColor,$a.ConstantColor,$a.ConstantAlpha,$a.OneMinusConstantColor,$a.OneMinusConstantAlpha,$a.SrcAlphaSaturate],$a.__empty_constructs__=[$a.One,$a.Zero,$a.SrcAlpha,$a.SrcColor,$a.DstAlpha,$a.DstColor,$a.OneMinusSrcAlpha,$a.OneMinusSrcColor,$a.OneMinusDstAlpha,$a.OneMinusDstColor,$a.ConstantColor,$a.ConstantAlpha,$a.OneMinusConstantColor,$a.OneMinusConstantAlpha,$a.SrcAlphaSaturate],d["h3d.mat.Compare"]={__ename__:!0,__constructs__:null,Always:{_hx_name:"Always",_hx_index:0,__enum__:"h3d.mat.Compare",toString:l},Never:{_hx_name:"Never",_hx_index:1,__enum__:"h3d.mat.Compare",toString:l},Equal:{_hx_name:"Equal",_hx_index:2,__enum__:"h3d.mat.Compare",toString:l},NotEqual:{_hx_name:"NotEqual",_hx_index:3,__enum__:"h3d.mat.Compare",toString:l},Greater:{_hx_name:"Greater",_hx_index:4,__enum__:"h3d.mat.Compare",toString:l},GreaterEqual:{_hx_name:"GreaterEqual",_hx_index:5,__enum__:"h3d.mat.Compare",toString:l},Less:{_hx_name:"Less",_hx_index:6,__enum__:"h3d.mat.Compare",toString:l},LessEqual:{_hx_name:"LessEqual",_hx_index:7,__enum__:"h3d.mat.Compare",toString:l}}),bo=(xo.__constructs__=[xo.Always,xo.Never,xo.Equal,xo.NotEqual,xo.Greater,xo.GreaterEqual,xo.Less,xo.LessEqual],xo.__empty_constructs__=[xo.Always,xo.Never,xo.Equal,xo.NotEqual,xo.Greater,xo.GreaterEqual,xo.Less,xo.LessEqual],d["h3d.mat.StencilOp"]={__ename__:!0,__constructs__:null,Keep:{_hx_name:"Keep",_hx_index:0,__enum__:"h3d.mat.StencilOp",toString:l},Zero:{_hx_name:"Zero",_hx_index:1,__enum__:"h3d.mat.StencilOp",toString:l},Replace:{_hx_name:"Replace",_hx_index:2,__enum__:"h3d.mat.StencilOp",toString:l},Increment:{_hx_name:"Increment",_hx_index:3,__enum__:"h3d.mat.StencilOp",toString:l},IncrementWrap:{_hx_name:"IncrementWrap",_hx_index:4,__enum__:"h3d.mat.StencilOp",toString:l},Decrement:{_hx_name:"Decrement",_hx_index:5,__enum__:"h3d.mat.StencilOp",toString:l},DecrementWrap:{_hx_name:"DecrementWrap",_hx_index:6,__enum__:"h3d.mat.StencilOp",toString:l},Invert:{_hx_name:"Invert",_hx_index:7,__enum__:"h3d.mat.StencilOp",toString:l}}),yo=(bo.__constructs__=[bo.Keep,bo.Zero,bo.Replace,bo.Increment,bo.IncrementWrap,bo.Decrement,bo.DecrementWrap,bo.Invert],bo.__empty_constructs__=[bo.Keep,bo.Zero,bo.Replace,bo.Increment,bo.IncrementWrap,bo.Decrement,bo.DecrementWrap,bo.Invert],d["h3d.mat.MipMap"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.mat.MipMap",toString:l},Nearest:{_hx_name:"Nearest",_hx_index:1,__enum__:"h3d.mat.MipMap",toString:l},Linear:{_hx_name:"Linear",_hx_index:2,__enum__:"h3d.mat.MipMap",toString:l}}),wo=(yo.__constructs__=[yo.None,yo.Nearest,yo.Linear],yo.__empty_constructs__=[yo.None,yo.Nearest,yo.Linear],d["h3d.mat.Filter"]={__ename__:!0,__constructs__:null,Nearest:{_hx_name:"Nearest",_hx_index:0,__enum__:"h3d.mat.Filter",toString:l},Linear:{_hx_name:"Linear",_hx_index:1,__enum__:"h3d.mat.Filter",toString:l}}),vo=(wo.__constructs__=[wo.Nearest,wo.Linear],wo.__empty_constructs__=[wo.Nearest,wo.Linear],d["h3d.mat.Wrap"]={__ename__:!0,__constructs__:null,Clamp:{_hx_name:"Clamp",_hx_index:0,__enum__:"h3d.mat.Wrap",toString:l},Repeat:{_hx_name:"Repeat",_hx_index:1,__enum__:"h3d.mat.Wrap",toString:l}}),Co=(vo.__constructs__=[vo.Clamp,vo.Repeat],vo.__empty_constructs__=[vo.Clamp,vo.Repeat],d["h3d.mat.Operation"]={__ename__:!0,__constructs__:null,Add:{_hx_name:"Add",_hx_index:0,__enum__:"h3d.mat.Operation",toString:l},Sub:{_hx_name:"Sub",_hx_index:1,__enum__:"h3d.mat.Operation",toString:l},ReverseSub:{_hx_name:"ReverseSub",_hx_index:2,__enum__:"h3d.mat.Operation",toString:l},Min:{_hx_name:"Min",_hx_index:3,__enum__:"h3d.mat.Operation",toString:l},Max:{_hx_name:"Max",_hx_index:4,__enum__:"h3d.mat.Operation",toString:l}}),Mo=(Co.__constructs__=[Co.Add,Co.Sub,Co.ReverseSub,Co.Min,Co.Max],Co.__empty_constructs__=[Co.Add,Co.Sub,Co.ReverseSub,Co.Min,Co.Max],d["h3d.mat.TextureFlags"]={__ename__:!0,__constructs__:null,Target:{_hx_name:"Target",_hx_index:0,__enum__:"h3d.mat.TextureFlags",toString:l},Cube:{_hx_name:"Cube",_hx_index:1,__enum__:"h3d.mat.TextureFlags",toString:l},MipMapped:{_hx_name:"MipMapped",_hx_index:2,__enum__:"h3d.mat.TextureFlags",toString:l},ManualMipMapGen:{_hx_name:"ManualMipMapGen",_hx_index:3,__enum__:"h3d.mat.TextureFlags",toString:l},IsNPOT:{_hx_name:"IsNPOT",_hx_index:4,__enum__:"h3d.mat.TextureFlags",toString:l},NoAlloc:{_hx_name:"NoAlloc",_hx_index:5,__enum__:"h3d.mat.TextureFlags",toString:l},Dynamic:{_hx_name:"Dynamic",_hx_index:6,__enum__:"h3d.mat.TextureFlags",toString:l},AlphaPremultiplied:{_hx_name:"AlphaPremultiplied",_hx_index:7,__enum__:"h3d.mat.TextureFlags",toString:l},WasCleared:{_hx_name:"WasCleared",_hx_index:8,__enum__:"h3d.mat.TextureFlags",toString:l},Loading:{_hx_name:"Loading",_hx_index:9,__enum__:"h3d.mat.TextureFlags",toString:l},Serialize:{_hx_name:"Serialize",_hx_index:10,__enum__:"h3d.mat.TextureFlags",toString:l},IsArray:{_hx_name:"IsArray",_hx_index:11,__enum__:"h3d.mat.TextureFlags",toString:l},AsyncLoading:{_hx_name:"AsyncLoading",_hx_index:12,__enum__:"h3d.mat.TextureFlags",toString:l}}),So=(Mo.__constructs__=[Mo.Target,Mo.Cube,Mo.MipMapped,Mo.ManualMipMapGen,Mo.IsNPOT,Mo.NoAlloc,Mo.Dynamic,Mo.AlphaPremultiplied,Mo.WasCleared,Mo.Loading,Mo.Serialize,Mo.IsArray,Mo.AsyncLoading],Mo.__empty_constructs__=[Mo.Target,Mo.Cube,Mo.MipMapped,Mo.ManualMipMapGen,Mo.IsNPOT,Mo.NoAlloc,Mo.Dynamic,Mo.AlphaPremultiplied,Mo.WasCleared,Mo.Loading,Mo.Serialize,Mo.IsArray,Mo.AsyncLoading],function(){}),ko=((e["h3d.mat.Defaults"]=So).__name__="h3d.mat.Defaults",So.__properties__={set_shadowShader:"set_shadowShader",get_shadowShader:"get_shadowShader"},So.shadowShader=null,So.get_shadowShader=function(){var t=So.shadowShader;return null==t&&(t=new ah,So.set_shadowShader(t),So.shadowShader.setPriority(-1)),t},So.set_shadowShader=function(t){return So.shadowShader=t},d["h3d.mat.DepthFormat"]={__ename__:!0,__constructs__:null,Depth16:{_hx_name:"Depth16",_hx_index:0,__enum__:"h3d.mat.DepthFormat",toString:l},Depth24:{_hx_name:"Depth24",_hx_index:1,__enum__:"h3d.mat.DepthFormat",toString:l},Depth24Stencil8:{_hx_name:"Depth24Stencil8",_hx_index:2,__enum__:"h3d.mat.DepthFormat",toString:l}}),Bo=(ko.__constructs__=[ko.Depth16,ko.Depth24,ko.Depth24Stencil8],ko.__empty_constructs__=[ko.Depth16,ko.Depth24,ko.Depth24Stencil8],function(t,e,n){this.width=t,this.height=e,this.format=n,0<t&&this.alloc()}),Io=((e["h3d.mat.DepthBuffer"]=Bo).__name__="h3d.mat.DepthBuffer",Bo.getDefault=function(){return ao.CURRENT.driver.getDefaultDepthBuffer()},Bo.prototype={hasStencil:function(){switch(this.format._hx_index){case 0:case 1:return!1;case 2:return!0}},alloc:function(){ao.CURRENT.mem.allocDepth(this)},dispose:function(){null!=this.b&&(ao.CURRENT.mem.deleteDepth(this),this.b=null)},isDisposed:function(){return null==this.b},__class__:Bo},(e["h3d.mat.Material"]=Ae).__name__="h3d.mat.Material",Ae.create=function(t){var e=Io.current.createMaterial();return e.set_texture(t),e.set_props(e.getDefaultProps()),e},Ae.__super__=me,Ae.prototype=t(me.prototype,{set_castShadows:function(t){return this.castShadows==t?t:(null!=this.passes&&(t?this.addPass(new To("shadow",null,this.passes)).set_isStatic(this.staticShadows):this.removePass(this.getPass("shadow"))),this.castShadows=t)},set_receiveShadows:function(t){var e;return t==this.receiveShadows?t:(null!=this.passes&&(e=So.get_shadowShader(),t?this.passes.addShader(e):this.passes.removeShader(e)),this.receiveShadows=t)},clone:function(t){var e,t=null==t?new Ae:t;return me.prototype.clone.call(this,t),t.set_castShadows(this.castShadows),t.set_receiveShadows(this.receiveShadows),t.set_texture(this.get_texture()),t.set_specularTexture(this.get_specularTexture()),t.set_normalMap(this.get_normalMap()),null!=this.textureShader&&((e=t.textureShader).constModified=!0,e.additive__=this.textureShader.additive__,(e=t.textureShader).constModified=!0,e.killAlpha__=this.textureShader.killAlpha__,t.textureShader.killAlphaThreshold__=this.textureShader.killAlphaThreshold__),t.mshader.color__=this.mshader.color__,t.set_blendMode(this.blendMode),t},set_blendMode:function(t){if(null!=this.passes)switch(this.passes.setBlendMode(t),t._hx_index){case 0:this.passes.set_depthWrite(!0),this.passes.setPassName("default");break;case 1:this.passes.set_depthWrite(!0),this.passes.setPassName("alpha");break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:this.passes.set_depthWrite(!1),this.passes.setPassName("additive")}return this.blendMode=t},get_specularTexture:function(){return null==this.specularShader?null:this.specularShader.texture__},get_texture:function(){return null==this.textureShader?null:this.textureShader.texture__},set_texture:function(t){return null==t?null!=this.textureShader&&(this.passes.removeShader(this.textureShader),this.textureShader=null):(null==this.textureShader&&(this.textureShader=new uh,this.passes.addShader(this.textureShader)),this.textureShader.texture__=t),t},get_normalMap:function(){return null==this.normalShader?null:this.normalShader.texture__},set_normalMap:function(t){return null==t?null!=this.normalShader&&(this.passes.removeShader(this.normalShader),this.normalShader=null):(null==this.normalShader&&(this.normalShader=new sh,null!=this.textureShader?this.passes.addShaderAtIndex(this.normalShader,this.passes.getShaderIndex(this.textureShader)+1):this.passes.addShader(this.normalShader)),this.normalShader.texture__=t),t},set_specularTexture:function(t){return null==t?null!=this.specularShader&&(this.passes.removeShader(this.specularShader),this.specularShader=null):(null==this.specularShader&&(this.specularShader=new hh,this.passes.addShader(this.specularShader)),this.specularShader.texture__=t),t},getDefaultModelProps:function(){var t=this.getDefaultProps();switch(this.blendMode._hx_index){case 0:break;case 1:t.kind="Alpha";break;case 2:t.kind="Add",t.culling=!1,t.shadows=!1,t.light=!1;break;default:throw tr.thrown("Unsupported HMD material "+Ja.string(this.blendMode))}return t},getDefaultProps:function(t){var e;if(null==t)e={kind:"Opaque",shadows:!0,culling:!0,light:!0};else switch(t){case"particles3D":case"trail3D":e={kind:"Alpha",shadows:!1,culling:!1,light:!0};break;case"ui":e={kind:"Alpha",shadows:!1,culling:!1,light:!1};break;default:e={kind:"Opaque",shadows:!0,culling:!0,light:!0}}return e},refreshProps:function(){if(null!=this.props&&null!=this.passes){var t=this.props;switch(t.kind){case"Add":this.set_blendMode(y.Add);break;case"Alpha":this.set_blendMode(y.Alpha);break;case"AlphaKill":case"Hidden":case"Opaque":this.set_blendMode(y.None);break;case"SoftAdd":this.set_blendMode(y.SoftAdd)}var e=this.textureShader,e=(null!=e&&(e.constModified=!0,e.killAlpha__="AlphaKill"==t.kind,e.killAlphaThreshold__=.5),this.passes.set_culling("Hidden"==t.kind?Ao.Both:t.culling?Ao.Back:Ao.None),this.passes.set_enableLights(t.light),t.shadows);this.set_castShadows(e),this.set_receiveShadows(e),this.castShadows&&this.receiveShadows&&this.getPass("shadow").set_culling(this.passes.culling)}},__class__:Ae,__properties__:t(me.prototype.__properties__,{set_blendMode:"set_blendMode",set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",set_specularTexture:"set_specularTexture",get_specularTexture:"get_specularTexture",set_texture:"set_texture",get_texture:"get_texture",set_receiveShadows:"set_receiveShadows",set_castShadows:"set_castShadows"})}),(e["h3d.mat.MaterialDatabase"]=xe).__name__="h3d.mat.MaterialDatabase",xe.prototype={getFilePath:function(t){return t.entry.get_directory()+"/materials.props"},getModelData:function(t){if(null==t)return null;var e=this.db,n=t.entry.get_directory(),s=e.h[n];if(null!=s)return s.v;var i,s=this.getFilePath(t);try{i=JSON.parse(Cc.currentInstance.load(s).toText())}catch(t){if(!(tr.caught(t).unwrap()instanceof dc))throw t;i={}}e=this.db,n=t.entry.get_directory();return e.h[n]={v:i},i},loadMatProps:function(t,e){var n=this.getModelData(t.model);return null==n||null==(n=n.materials)||null==(n=Z.field(n,e.name))?n:Z.field(n,t.name)},__class__:xe},function(t){null==this.database&&(this.database=new xe),this.name=t}),To=((e["h3d.mat.MaterialSetup"]=Io).__name__="h3d.mat.MaterialSetup",Io.prototype={createRenderer:function(){return new Ho},createLightSystem:function(){return new jo},createMaterial:function(){return new Ae},loadMaterialProps:function(t){return this.database.loadMatProps(t,this)},__class__:Io},function(t,e,n){this.layer=0,this.bits=0,this.parentPass=n,this.shaders=e,this.setPassName(t),this.set_culling(Ao.Back);n=$a.One,e=$a.Zero;this.set_blendSrc(n),this.set_blendAlphaSrc(n),this.set_blendDst(e),this.set_blendAlphaDst(e),this.depth(!0,xo.Less),this.set_blendOp(this.set_blendAlphaOp(Co.Add)),this.colorMask=15}),Fo=((e["h3d.mat.Pass"]=To).__name__="h3d.mat.Pass",To.prototype={load:function(t){this.name=t.name,this.passId=t.passId,this.bits=t.bits,this.set_enableLights(t.enableLights),this.set_dynamicParameters(t.dynamicParameters),this.set_culling(t.culling),this.set_depthWrite(t.depthWrite),this.set_depthTest(t.depthTest),this.set_blendSrc(t.blendSrc),this.set_blendDst(t.blendDst),this.set_blendOp(t.blendOp),this.set_blendAlphaSrc(t.blendAlphaSrc),this.set_blendAlphaDst(t.blendAlphaDst),this.set_blendAlphaOp(t.blendAlphaOp),this.colorMask=t.colorMask,null!=t.stencil&&(null==this.stencil&&(this.stencil=new Fo),this.stencil.load(t.stencil))},setPassName:function(t){this.name=t,this.passId=Nc.allocID(t)},setBlendMode:function(t){switch(this.set_blendOp(Co.Add),this.set_blendAlphaOp(Co.Add),t._hx_index){case 0:var e=$a.One,n=$a.Zero;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 1:e=$a.SrcAlpha,n=$a.OneMinusSrcAlpha;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc($a.One);break;case 2:e=$a.SrcAlpha,n=$a.One;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc($a.One);break;case 3:e=$a.One,n=$a.OneMinusSrcAlpha;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 4:e=$a.OneMinusDstColor,n=$a.One;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc($a.One);break;case 5:e=$a.DstColor,n=$a.Zero;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc($a.One);break;case 6:e=$a.DstColor,n=$a.OneMinusSrcAlpha;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 7:e=$a.Zero,n=$a.OneMinusSrcColor;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 8:e=$a.One,n=$a.OneMinusSrcColor;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 9:e=$a.SrcAlpha,n=$a.One;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendOp(Co.ReverseSub),this.set_blendAlphaOp(Co.ReverseSub);break;case 10:e=$a.One,n=$a.One;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaOp(Co.Max),this.set_blendOp(Co.Max);break;case 11:e=$a.One,n=$a.One;this.set_blendSrc(e),this.set_blendAlphaSrc(e),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaOp(Co.Min),this.set_blendOp(Co.Min)}},depth:function(t,e){this.set_depthWrite(t),this.set_depthTest(e)},addShader:function(t){return null==t?null:(this.shaders=Jc.addSort(t,this.shaders),t)},addShaderAtIndex:function(t,e){for(var n=null,s=this.shaders;0<e&&s!=this.parentShaders;)s=(n=s).next,--e;return null==n?this.shaders=new Jc(t,s):n.next=new Jc(t,s),t},getShaderIndex:function(t){for(var e=0,n=this.shaders;n!=this.parentShaders;){if(n.s==t)return e;n=n.next,++e}return-1},removeShader:function(t){for(var e=this.shaders,n=null;null!=e;){if(e.s==t)return null==n?this.shaders=e.next:n.next=e.next,!0;e=(n=e).next}return!1},getShader:function(t){for(var e=this.shaders;e!=this.parentShaders;){var n=e.s,n=er.__downcastCheck(n,t)?n:null;if(null!=n)return n;e=e.next}return null},getShadersRec:function(){if(null!=this.parentPass&&this.parentShaders!=this.parentPass.shaders){for(var t=this.shaders,e=null;null!=t&&t!=this.parentShaders;)t=(e=t).next;this.parentShaders=this.parentPass.shaders,null==e?this.shaders=this.parentShaders:e.next=this.parentShaders}return this.shaders},set_enableLights:function(t){return this.flags=-2&this.flags|(t?1:0),this.enableLights=t},set_dynamicParameters:function(t){return this.flags=-3&this.flags|(t?1:0)<<1,this.dynamicParameters=t},set_isStatic:function(t){return this.flags=-5&this.flags|(t?1:0)<<2,this.isStatic=t},set_culling:function(t){return this.bits=-4&this.bits|t._hx_index,this.culling=t},set_depthWrite:function(t){return this.bits=-5&this.bits|(t?1:0)<<2,this.depthWrite=t},set_depthTest:function(t){return this.bits=-57&this.bits|t._hx_index<<3,this.depthTest=t},set_blendSrc:function(t){return this.bits=-961&this.bits|t._hx_index<<6,this.blendSrc=t},set_blendDst:function(t){return this.bits=-15361&this.bits|t._hx_index<<10,this.blendDst=t},set_blendAlphaSrc:function(t){return this.bits=-245761&this.bits|t._hx_index<<14,this.blendAlphaSrc=t},set_blendAlphaDst:function(t){return this.bits=-3932161&this.bits|t._hx_index<<18,this.blendAlphaDst=t},set_blendOp:function(t){return this.bits=-29360129&this.bits|t._hx_index<<22,this.blendOp=t},set_blendAlphaOp:function(t){return this.bits=-234881025&this.bits|t._hx_index<<25,this.blendAlphaOp=t},__class__:To,__properties__:{set_blendAlphaOp:"set_blendAlphaOp",set_blendOp:"set_blendOp",set_blendAlphaDst:"set_blendAlphaDst",set_blendAlphaSrc:"set_blendAlphaSrc",set_blendDst:"set_blendDst",set_blendSrc:"set_blendSrc",set_depthTest:"set_depthTest",set_depthWrite:"set_depthWrite",set_culling:"set_culling",set_isStatic:"set_isStatic",set_dynamicParameters:"set_dynamicParameters",set_enableLights:"set_enableLights"}},function(){this.opBits=0,this.maskBits=0,this.setOp(bo.Keep,bo.Keep,bo.Keep),this.setFunc(xo.Always)}),v=((e["h3d.mat.Stencil"]=Fo).__name__="h3d.mat.Stencil",Fo.prototype={setFront:function(t,e,n){this.set_frontSTfail(t),this.set_frontDPfail(e),this.set_frontPass(n)},setBack:function(t,e,n){this.set_backSTfail(t),this.set_backDPfail(e),this.set_backPass(n)},setOp:function(t,e,n){this.setFront(t,e,n),this.setBack(t,e,n)},setFunc:function(t,e,n,s){null==s&&(s=255),null==n&&(n=255),null==e&&(e=0),this.set_frontTest(this.set_backTest(t)),this.set_reference(e),this.set_readMask(n),this.set_writeMask(s)},load:function(t){this.opBits=t.opBits,this.maskBits=t.maskBits},set_readMask:function(t){return this.maskBits=-256&this.maskBits|255&t,this.readMask=t},set_writeMask:function(t){return this.maskBits=-65281&this.maskBits|(255&t)<<8,this.writeMask=t},set_reference:function(t){return this.maskBits=-16711681&this.maskBits|(255&t)<<16,this.reference=t},set_frontTest:function(t){return this.opBits=-8&this.opBits|t._hx_index,this.frontTest=t},set_frontPass:function(t){return this.opBits=-57&this.opBits|t._hx_index<<3,this.frontPass=t},set_frontSTfail:function(t){return this.opBits=-449&this.opBits|t._hx_index<<6,this.frontSTfail=t},set_frontDPfail:function(t){return this.opBits=-3585&this.opBits|t._hx_index<<9,this.frontDPfail=t},set_backTest:function(t){return this.opBits=-28673&this.opBits|t._hx_index<<12,this.backTest=t},set_backPass:function(t){return this.opBits=-229377&this.opBits|t._hx_index<<15,this.backPass=t},set_backSTfail:function(t){return this.opBits=-1835009&this.opBits|t._hx_index<<18,this.backSTfail=t},set_backDPfail:function(t){return this.opBits=-14680065&this.opBits|t._hx_index<<21,this.backDPfail=t},__class__:Fo,__properties__:{set_backDPfail:"set_backDPfail",set_backSTfail:"set_backSTfail",set_backPass:"set_backPass",set_backTest:"set_backTest",set_frontDPfail:"set_frontDPfail",set_frontSTfail:"set_frontSTfail",set_frontPass:"set_frontPass",set_frontTest:"set_frontTest",set_reference:"set_reference",set_writeMask:"set_writeMask",set_readMask:"set_readMask"}},d["hxd.PixelFormat"]={__ename__:!0,__constructs__:null,ARGB:{_hx_name:"ARGB",_hx_index:0,__enum__:"hxd.PixelFormat",toString:l},BGRA:{_hx_name:"BGRA",_hx_index:1,__enum__:"hxd.PixelFormat",toString:l},RGBA:{_hx_name:"RGBA",_hx_index:2,__enum__:"hxd.PixelFormat",toString:l},RGBA16F:{_hx_name:"RGBA16F",_hx_index:3,__enum__:"hxd.PixelFormat",toString:l},RGBA32F:{_hx_name:"RGBA32F",_hx_index:4,__enum__:"hxd.PixelFormat",toString:l},R8:{_hx_name:"R8",_hx_index:5,__enum__:"hxd.PixelFormat",toString:l},R16F:{_hx_name:"R16F",_hx_index:6,__enum__:"hxd.PixelFormat",toString:l},R32F:{_hx_name:"R32F",_hx_index:7,__enum__:"hxd.PixelFormat",toString:l},RG8:{_hx_name:"RG8",_hx_index:8,__enum__:"hxd.PixelFormat",toString:l},RG16F:{_hx_name:"RG16F",_hx_index:9,__enum__:"hxd.PixelFormat",toString:l},RG32F:{_hx_name:"RG32F",_hx_index:10,__enum__:"hxd.PixelFormat",toString:l},RGB8:{_hx_name:"RGB8",_hx_index:11,__enum__:"hxd.PixelFormat",toString:l},RGB16F:{_hx_name:"RGB16F",_hx_index:12,__enum__:"hxd.PixelFormat",toString:l},RGB32F:{_hx_name:"RGB32F",_hx_index:13,__enum__:"hxd.PixelFormat",toString:l},SRGB:{_hx_name:"SRGB",_hx_index:14,__enum__:"hxd.PixelFormat",toString:l},SRGB_ALPHA:{_hx_name:"SRGB_ALPHA",_hx_index:15,__enum__:"hxd.PixelFormat",toString:l},RGB10A2:{_hx_name:"RGB10A2",_hx_index:16,__enum__:"hxd.PixelFormat",toString:l},RG11B10UF:{_hx_name:"RG11B10UF",_hx_index:17,__enum__:"hxd.PixelFormat",toString:l},R16U:{_hx_name:"R16U",_hx_index:18,__enum__:"hxd.PixelFormat",toString:l},RGB16U:{_hx_name:"RGB16U",_hx_index:19,__enum__:"hxd.PixelFormat",toString:l},RGBA16U:{_hx_name:"RGBA16U",_hx_index:20,__enum__:"hxd.PixelFormat",toString:l},PVRTC:((c=function(t){return{_hx_index:21,v:t,__enum__:"hxd.PixelFormat",toString:l}})._hx_name="PVRTC",c.__params__=["v"],c),ASTC:((c=function(t){return{_hx_index:22,v:t,__enum__:"hxd.PixelFormat",toString:l}})._hx_name="ASTC",c.__params__=["v"],c),ETC:((c=function(t){return{_hx_index:23,v:t,__enum__:"hxd.PixelFormat",toString:l}})._hx_name="ETC",c.__params__=["v"],c),S3TC:((c=function(t){return{_hx_index:24,v:t,__enum__:"hxd.PixelFormat",toString:l}})._hx_name="S3TC",c.__params__=["v"],c)}),A=(v.__constructs__=[v.ARGB,v.BGRA,v.RGBA,v.RGBA16F,v.RGBA32F,v.R8,v.R16F,v.R32F,v.RG8,v.RG16F,v.RG32F,v.RGB8,v.RGB16F,v.RGB32F,v.SRGB,v.SRGB_ALPHA,v.RGB10A2,v.RG11B10UF,v.R16U,v.RGB16U,v.RGBA16U,v.PVRTC,v.ASTC,v.ETC,v.S3TC],v.__empty_constructs__=[v.ARGB,v.BGRA,v.RGBA,v.RGBA16F,v.RGBA32F,v.R8,v.R16F,v.R32F,v.RG8,v.RG16F,v.RG32F,v.RGB8,v.RGB16F,v.RGB32F,v.SRGB,v.SRGB_ALPHA,v.RGB10A2,v.RG11B10UF,v.R16U,v.RGB16U,v.RGBA16U],function(t,e,n,s){if(this.mem=ao.CURRENT.mem,null==s&&(s=A.nativeFormat),this.id=++A.UID,this.format=s,this.flags=0,null!=n)for(var i=0;i<n.length;)this.flags|=1<<n[i++]._hx_index;for(var a=1,r=1;a<t;)a<<=1;for(;r<e;)r<<=1;a==t&&r==e||(this.flags|=16),this.width=t,this.height=e,this.set_mipMap(0!=(4&this.flags)?yo.Linear:yo.None),this.set_filter(wo.Linear),this.set_wrap(vo.Clamp),this.bits&=32767,0==(32&this.flags)&&this.alloc()}),Do=((e["h3d.mat.Texture"]=A).__name__="h3d.mat.Texture",A.fromColor=function(t,e){null==e&&(e=1);var n=ao.CURRENT,s=255*e|0,s=(s<0?s=0:255<s&&(s=255),16777215&t|s<<24),i=n.textureColorCache.h[s];return null==i&&((i=new A(1,1,null)).clear(t,e),i.realloc=function(){i.clear(t,e)},n.textureColorCache.h[s]=i),i},A.defaultCubeTexture=function(){var t=ao.CURRENT,e=t.resCache.h[A.__id__];return null==e&&((e=new A(1,1,[Mo.Cube])).clear(2105376),e.realloc=function(){e.clear(2105376)},t.resCache.set(A,e)),e},A.genNoise=function(t){var e,n,s=ao.CURRENT,i=A.noiseTextureKeys.h[t],a=null==i?null:s.resCache.h[i.__id__];return(null==a||null==a.t&&null==a.realloc)&&(null==i&&(A.noiseTextureKeys.h[t]=i={}),e=a=new A(t,t,[Mo.NoAlloc]),n=t,a.realloc=function(){A.allocNoise(e,n)},s.resCache.set(i,a)),a},A.allocNoise=function(t,e){for(var n=new V_(e,e),s=0;s<e;)for(var i=s++,a=0;a<e;){var r=Ja.random(256);n.setPixel(i,a++,-16777216|r|r<<8|r<<16)}t.uploadBitmap(n),n.ctx=null,n.pixel=null},A.prototype={set_lastFrame:function(t){return this._lastFrame!=A.PREVENT_AUTO_DISPOSE&&(this._lastFrame=t),this._lastFrame},get_lastFrame:function(){return this._lastFrame},get_mipLevels:function(){if(0==(4&this.flags))return 1;if(0<this.customMipLevels)return this.customMipLevels;for(var t=1,e=this.width,n=this.height;1<=e>>t||1<=n>>t;)++t;return t},get_layerCount:function(){return 0!=(2&this.flags)?6:1},alloc:function(){null==this.t&&this.mem.allocTexture(this)},preventAutoDispose:function(){this.set_lastFrame(A.PREVENT_AUTO_DISPOSE)},toString:function(){var t=this.name;return(t=null==this.name?"Texture_"+this.id:t)+"("+this.width+"x"+this.height+")"},setName:function(t){this.name=t},set_mipMap:function(t){return this.bits=-4&this.bits|t._hx_index,this.mipMap=t},set_filter:function(t){return this.bits=-25&this.bits|t._hx_index<<3,this.filter=t},set_wrap:function(t){return this.bits=-193&this.bits|t._hx_index<<6,this.wrap=t},resize:function(t,e){this.dispose();for(var n=1,s=1;n<t;)n<<=1;for(;s<e;)s<<=1;n!=t||s!=e?this.flags|=16:this.flags&=-17,this.width=t,this.height=e,0==(32&this.flags)&&this.alloc()},clear:function(t,e,n){if(null==n&&(n=-1),null==e&&(e=1),this.alloc(),0!=this.width&&0!=this.height)if(1!=this.width||1!=this.height){var s=ao.CURRENT;if(t|=(255*(e<0?0:1<e?1:e)|0)<<24,n<0)for(var i=0,a=this.get_layerCount();i<a;)s.pushTarget(this,i++),s.clear(t),s.popTarget();else s.pushTarget(this,n),s.clear(t),s.popTarget()}else{var r=Y_.alloc(this.width,this.height,A.nativeFormat),l=0,o=255&t,h=t>>8&255,u=t>>16&255,_=255*e|0;switch(_<0?_=0:255<_&&(_=255),A.nativeFormat._hx_index){case 1:var c=u,u=o,o=c;break;case 2:break;default:throw tr.thrown("TODO")}for(i=0,a=this.width*this.height;i<a;)++i,r.bytes.b[l++]=u,r.bytes.b[l++]=h,r.bytes.b[l++]=o,r.bytes.b[l++]=_;if(n<0)for(i=0,a=this.get_layerCount();i<a;)this.uploadPixels(r,0,i++);else this.uploadPixels(r,0,n);r.dispose()}},checkSize:function(t,e,n){var s=this.width>>n,n=this.height>>n;if(0==n&&(n=1),t!=(s=0==s?1:s)||e!=n)throw tr.thrown("Invalid upload size : "+t+"x"+e+" should be "+s+"x"+n)},checkMipMapGen:function(t,e){0==t&&0!=(4&this.flags)&&0==(8&this.flags)&&e==this.get_layerCount()-1&&this.mem.driver.generateMipMaps(this)},uploadBitmap:function(t,e,n){null==n&&(n=0),null==e&&(e=0),this.alloc(),this.checkSize(t.ctx.canvas.width,t.ctx.canvas.height,e),this.mem.driver.uploadTextureBitmap(this,t,e,n),this.flags|=256,this.checkMipMapGen(e,n)},uploadPixels:function(t,e,n){null==n&&(n=0),null==e&&(e=0),this.alloc(),this.checkSize(t.width,t.height,e),this.mem.driver.uploadTexturePixels(this,t,e,n),this.flags|=256,this.checkMipMapGen(e,n)},dispose:function(){null!=this.t&&this.mem.deleteTexture(this)},capturePixels:function(t,e,n){null==e&&(e=0),null==t&&(t=0);var s=this.get_lastFrame(),t=(this.preventAutoDispose(),this.mem.driver.capturePixels(this,t,e,n));return this.set_lastFrame(s),t},__class__:A,__properties__:{get_mipLevels:"get_mipLevels",get_layerCount:"get_layerCount",set_wrap:"set_wrap",set_filter:"set_filter",set_mipMap:"set_mipMap",set_lastFrame:"set_lastFrame",get_lastFrame:"get_lastFrame"}},(e["h3d.mat.TextureArray"]=be).__name__="h3d.mat.TextureArray",be.__super__=A,be.prototype=t(A.prototype,{get_layerCount:function(){return this.layers},toString:function(){return A.prototype.toString.call(this)+"["+this.layers+"]"},__class__:be}),(e["h3d.pass.Base"]=ye).__name__="h3d.pass.Base",ye.prototype={setContext:function(t){this.ctx=t},dispose:function(){},draw:function(t,e){},__class__:ye},function(t,e){this.shader=t,this.manager=new Ro(e),this.pass=new To("screenfx",new Jc(t)),this.pass.set_culling(Ao.None),this.pass.depth(!1,xo.Always)}),Eo=((e["h3d.pass.ScreenFx"]=Do).__name__="h3d.pass.ScreenFx",Do.prototype={get_engine:function(){return null==this._engine&&(this._engine=ao.CURRENT),this._engine},render:function(){null==this.primitive&&(this.primitive=Uo.get()),this.shader.flipY__=this.get_engine().driver.hasFeature(co.BottomLeftCoords)&&null!=this.get_engine().getCurrentTarget()?-1:1;var t,e=this.pass.shaders,n=this.manager.compileShaders(e);this.get_engine().selectMaterial(this.pass),this.get_engine().selectShader(n),null==this.buffers?this.buffers=new $o(n):((t=this.buffers).vertex.grow(n.vertex),t.fragment.grow(n.fragment)),this.manager.fillGlobals(this.buffers,n),this.manager.fillParams(this.buffers,n,e),this.get_engine().uploadShaderBuffers(this.buffers,0),this.get_engine().uploadShaderBuffers(this.buffers,1),this.get_engine().uploadShaderBuffers(this.buffers,2),this.primitive.render(this.get_engine())},dispose:function(){},__class__:Do,__properties__:{get_engine:"get_engine"}},function(t,e,n,s){null==s&&(s=1),null==n&&(n=0),null==e&&(e=1),null==t&&(t=1),this.cubeDir=[ro.L([0,0,-1,0,0,-1,0,0,1,0,0,0]),ro.L([0,0,1,0,0,-1,0,0,-1,0,0,0]),ro.L([1,0,0,0,0,0,1,0,0,1,0,0]),ro.L([1,0,0,0,0,0,-1,0,0,-1,0,0]),ro.L([1,0,0,0,0,-1,0,0,0,1,0,0]),ro.L([-1,0,0,0,0,-1,0,0,0,0,-1,0])],Do.call(this,new Jo),this.set_radius(t),this.set_quality(s),this.set_gain(e),this.set_linear(n)}),Po=((e["h3d.pass.Blur"]=Eo).__name__="h3d.pass.Blur",Eo.__super__=Do,Eo.prototype=t(Do.prototype,{set_radius:function(t){return this.radius==t?t:(this.values=null,this.radius=t)},set_quality:function(t){return this.quality==t?t:(this.values=null,this.quality=t)},set_gain:function(t){return this.gain==t?t:(this.values=null,this.gain=t)},set_linear:function(t){return this.linear==t?t:(this.values=null,this.linear=t)},gauss:function(t,e){return e<=0?0==t?1:0:(e=e*e,Math.pow(2.718281828459,-t*t/(2*e))/Math.sqrt(2*Math.PI*e))},calcValues:function(){this.values=[],this.offsets=[];for(var t=0,e=this.quality,n=.7*(e<0?0:1<e?1:e)+.3,s=(e=0<this.radius?(f=this.radius-1,Math.ceil((f<1?1:f)*n/2)):0,Math.sqrt(this.radius)),i=0,a=e+1;i<a;){var r=2*(p=i++),l=0==p?0:2*p-1,o=this.gauss(r,s),h=this.gauss(l,s),u=o+h;this.values[p]=u,this.offsets[p]=0==p?0:(o*r+h*l)/(u*p*Math.sqrt(n)),t+=u,0<p&&(t+=u)}for(var _=this.values[0]*(.01/n);2<this.values.length;){var c=this.values[this.values.length-1];if(_<c)break;t-=2*c,this.values.pop()}t/=this.gain;for(i=0,a=this.values.length;i<a;)this.values[i++]/=t;if(0<this.linear)for(var d=this.gain/(2*this.values.length-1),i=0,a=this.values.length;i<a;){var p=i++,f=this.values[p],g=(this.values[p]=f+this.linear*(d-f),this.offsets[p]);this.offsets[p]=g+this.linear*((0==p?0:(2*p-.5)/(p*n))-g)}},apply:function(t,e,n){if(this.radius<=0&&null==this.shader.fixedColor__)null!=n&&Po.run(e,n);else{null==n&&(n=e),null==this.values&&this.calcValues();for(var s=0!=(2&e.flags),i=s?6:1,a=t.textures.allocTarget(e.name+"BlurTmp",e.width,e.height,!1,e.format,s),t=((t=this.shader).constModified=!0,t.Quality__=this.values.length,this.shader.values__=this.values,this.shader.offsets__=this.offsets,s?(this.shader.cubeTexture__=e,(t=this.shader).constModified=!0,t.isCube__=!0):(this.shader.texture__=e,(t=this.shader).constModified=!0,t.isCube__=!1),this.shader.pixel__),r=1/e.width,l=(t.x=r=null==r?0:r,t.y=0,t.z=0,t.w=1,0),o=i;l<o;){var h=l++;this.get_engine().pushTarget(a,h),s&&(this.shader.cubeDir__=this.cubeDir[h]),this.render(),this.get_engine().popTarget()}s?this.shader.cubeTexture__=a:this.shader.texture__=a;for(t=this.shader.pixel__,r=1/e.height,e=(null==r&&(r=0),t.x=0,t.y=r,t.z=0,t.w=1,n.depthBuffer),l=(n.depthBuffer=null,0),o=i;l<o;){h=l++;this.get_engine().pushTarget(n,h),s&&(this.shader.cubeDir__=this.cubeDir[h]),this.render(),this.get_engine().popTarget()}n.depthBuffer=e}},__class__:Eo,__properties__:t(Do.prototype.__properties__,{set_quality:"set_quality",set_linear:"set_linear",set_gain:"set_gain",set_radius:"set_radius"})}),(e["h3d.pass._Border.BorderShader"]=we).__name__="h3d.pass._Border.BorderShader",we._SHADER=null,we.__super__=n,we.prototype=t(n.prototype,{get_color:function(){return this.color__},set_color:function(t){return this.color__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.color__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:we,__properties__:t(n.prototype.__properties__,{set_color:"set_color",get_color:"get_color"})}),(e["h3d.pass.Border"]=ve).__name__="h3d.pass.Border",ve.__super__=Do,ve.prototype=t(Do.prototype,{dispose:function(){Do.prototype.dispose.call(this),this.primitive.dispose()},__class__:ve}),(e["h3d.pass._Copy.ArrayCopyShader"]=Ce).__name__="h3d.pass._Copy.ArrayCopyShader",Ce._SHADER=null,Ce.__super__=n,Ce.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_layer:function(){return this.layer__},set_layer:function(t){return this.layer__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.layer__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Ce,__properties__:t(n.prototype.__properties__,{set_layer:"set_layer",get_layer:"get_layer",set_texture:"set_texture",get_texture:"get_texture"})}),(e["h3d.pass._Copy.CopyShader"]=Me).__name__="h3d.pass._Copy.CopyShader",Me._SHADER=null,Me.__super__=n,Me.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Me,__properties__:t(n.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(){Do.call(this,new Me)}),zo=((e["h3d.pass.Copy"]=Po).__name__="h3d.pass.Copy",Po.run=function(t,e,n,s,i){var a,r=ao.CURRENT;null!=e&&null!=t&&(null==n||n==y.None)&&null==s&&null==i&&r.driver.copyTexture(t,e)||(null==(a=r.resCache.h[Po.__id__])&&(a=new Po,r.resCache.set(Po,a)),a.apply(t,e,n,s,i))},Po.__super__=Do,Po.prototype=t(Do.prototype,{apply:function(t,e,n,s,i){if(null!=e&&this.get_engine().pushTarget(e,null!=i?i:0),this.shader.texture__=t,null!=s){null!=n&&s.setBlendMode(n);for(var a=s.shaders;null!=a.next;)a=a.next;a.next=this.pass.shaders;i=this.pass;this.pass=s,this.render(),this.pass=i,a.next=null}else this.pass.setBlendMode(null==n?y.None:n),this.render();(this.shader.texture__=null)!=e&&this.get_engine().popTarget()},__class__:Po}),(e["h3d.pass._CubeCopy.CubeCopyShader"]=Se).__name__="h3d.pass._CubeCopy.CubeCopyShader",Se._SHADER=null,Se.__super__=n,Se.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_mat:function(){return this.mat__},set_mat:function(t){return this.mat__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.mat__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Se,__properties__:t(n.prototype.__properties__,{set_mat:"set_mat",get_mat:"get_mat",set_texture:"set_texture",get_texture:"get_texture"})}),(e["h3d.pass.Default"]=ke).__name__="h3d.pass.Default",ke.onShaderError=function(t,e){throw tr.thrown(t)},ke.__super__=ye,ke.prototype=t(ye.prototype,{getCurrentPixelSize:function(){var t=this.ctx.engine.getCurrentTarget();return new R(2/(null==t?this.ctx.engine:t).width,2/(null==t?this.ctx.engine:t).height)},getOutputs:function(){return[Yc.Value("output.color")]},processShaders:function(t,e){for(t=this.ctx.extraShaders;null!=t;)e=this.ctx.allocShaderList(t.s,e),t=t.next;return e},setupShaders:function(t){for(var e=!1,n=t.current;null!=n;){var s=n,n=n.next,i=s.pass.getShadersRec(),i=this.processShaders(s,i),a=(s.pass.enableLights&&null!=this.ctx.lightSystem&&(e||(this.ctx.lightSystem.initGlobals(this.manager.globals),e=!0),i=this.ctx.lightSystem.computeLight(s.obj,i)),s.shader=this.manager.compileShaders(i,s.pass.batchMode),s.shaders=i,s.shader.fragment.textures);if(null==a||15==a.type._hx_index)s.texture=0;else{var r=this.manager;if(null!=a.perObjectGlobal){var l=r.globals.map.h[a.perObjectGlobal.gid];if(null==l)throw tr.thrown("Missing global value "+a.perObjectGlobal.path+" for shader "+r.shaderInfo(i,a.perObjectGlobal.path));l=17==a.type._hx_index?l.texture:l}else{for(var o=i,h=a.instance;0<--h;)o=o.next;l=o.s.getParamValue(a.index)}s.texture=null==l?0:l.id}}},drawObject:function(t){this.ctx.drawPass=t,this.ctx.engine.selectMaterial(t.pass),t.obj.draw(this.ctx)},draw:function(t,e){if(null!=t.current){for(var n=0,s=this.ctx.sharedGlobals;n<s.length;){var i=s[n];++n,this.manager.globals.map.h[i.gid]=i.value}this.setGlobals(),this.setupShaders(t),null==e?this.defaultSort(t):e(t),this.ctx.currentManager=this.manager;for(var a=this.ctx.shaderBuffers,r=null,l=t.current;null!=l;){var o,h=l,l=l.next;if(this.manager.globals.map.h[this.globalModelView_id]=h.obj.absPos,h.shader.globals.h.hasOwnProperty(this.globalModelViewInverse_id)&&(o=h.obj.getInvPos(),this.manager.globals.map.h[this.globalModelViewInverse_id]=o),r!=h.shader){r=h.shader;try{this.ctx.engine.selectShader(h.shader)}catch(n){s=tr.caught(n).unwrap();ke.onShaderError(s,h);continue}null==a?a=this.ctx.shaderBuffers=new $o(h.shader):(o=h.shader,a.vertex.grow(o.vertex),a.fragment.grow(o.fragment)),this.manager.fillGlobals(a,h.shader),this.ctx.engine.uploadShaderBuffers(a,0)}h.pass.dynamicParameters||(this.manager.fillParams(a,h.shader,h.shaders),this.ctx.engine.uploadShaderBuffers(a,1),this.ctx.engine.uploadShaderBuffers(a,2),this.ctx.engine.uploadShaderBuffers(a,3)),this.drawObject(h)}e=this.ctx;e.cachedPos=0,e.drawPass=null}},initGlobals:function(){this.cameraView_id=Nc.allocID("camera.view"),this.cameraNear_id=Nc.allocID("camera.zNear"),this.cameraFar_id=Nc.allocID("camera.zFar"),this.cameraProj_id=Nc.allocID("camera.proj"),this.cameraPos_id=Nc.allocID("camera.position"),this.cameraProjDiag_id=Nc.allocID("camera.projDiag"),this.cameraProjFlip_id=Nc.allocID("camera.projFlip"),this.cameraViewProj_id=Nc.allocID("camera.viewProj"),this.cameraInverseViewProj_id=Nc.allocID("camera.inverseViewProj"),this.globalTime_id=Nc.allocID("global.time"),this.pixelSize_id=Nc.allocID("global.pixelSize"),this.globalModelView_id=Nc.allocID("global.modelView"),this.globalModelViewInverse_id=Nc.allocID("global.modelViewInverse")},setGlobals:function(){this.manager.globals.map.h[this.cameraView_id]=this.ctx.camera.mcam,this.manager.globals.map.h[this.cameraNear_id]=this.ctx.camera.zNear,this.manager.globals.map.h[this.cameraFar_id]=this.ctx.camera.zFar,this.manager.globals.map.h[this.cameraProj_id]=this.ctx.camera.mproj,this.manager.globals.map.h[this.cameraPos_id]=this.ctx.camera.pos,this.manager.globals.map.h[this.cameraProjDiag_id]=new R(this.ctx.camera.mproj._11,this.ctx.camera.mproj._22,this.ctx.camera.mproj._33,this.ctx.camera.mproj._44);var t=this.ctx.engine.driver.hasFeature(co.BottomLeftCoords)&&null!=this.ctx.engine.getCurrentTarget(),t=(this.manager.globals.map.h[this.cameraProjFlip_id]=t?-1:1,this.manager.globals.map.h[this.cameraViewProj_id]=this.ctx.camera.m,this.ctx.camera.getInverseViewProj()),t=(this.manager.globals.map.h[this.cameraInverseViewProj_id]=t,this.manager.globals.map.h[this.globalTime_id]=this.ctx.time,this.getCurrentPixelSize());this.manager.globals.map.h[this.pixelSize_id]=t},__class__:ke}),(e["h3d.pass.Shadows"]=Be).__name__="h3d.pass.Shadows",Be.__super__=ke,Be.prototype=t(ke.prototype,{set_size:function(t){return t!=this.size&&null!=this.staticTexture&&(this.staticTexture.dispose(),this.staticTexture=null),this.size=t},dispose:function(){ke.prototype.dispose.call(this),this.blur.dispose(),null!=this.staticTexture&&this.staticTexture.dispose()},getShadowProj:function(){return this.lightCamera.m},isUsingWorldDist:function(){return!1},getOutputs:function(){return this.isUsingWorldDist()?[Yc.Swiz(Yc.Value("output.worldDist",1),[Rc.X,Rc.X,Rc.X,Rc.X])]:this.format==A.nativeFormat?[Yc.PackFloat(Yc.Value("output.depth"))]:[Yc.Swiz(Yc.Value("output.depth",1),[Rc.X,Rc.X,Rc.X,Rc.X])]},createDefaultShadowMap:function(){var t=A.fromColor(16777215);return t.name="defaultShadowMap",t},syncShader:function(t){},filterPasses:function(t){if(this.ctx.computingStatic)switch(this.mode._hx_index){case 0:return!1;case 1:for(n=null,s=null,i=t.discarded,a=t.lastDisc,r=t.current;null!=r;)1==r.pass.isStatic?null==n?n=s=r:(s.next=r,s=r):null==i?i=a=r:(a.next=r,a=r),r=r.next;return null!=s&&(s.next=null),null!=a&&(a.next=null),t.current=n,t.discarded=i,t.lastDisc=a,!0;case 2:return!1;case 3:for(n=null,s=null,i=t.discarded,a=t.lastDisc,r=t.current;null!=r;)1==r.pass.isStatic?null==n?n=s=r:(s.next=r,s=r):null==i?i=a=r:(a.next=r,a=r),r=r.next;return null!=s&&(s.next=null),null!=a&&(a.next=null),t.current=n,t.discarded=i,t.lastDisc=a,!0}else switch(this.mode._hx_index){case 0:return!1;case 1:return(null==this.staticTexture||null==(e=this.staticTexture).t&&null==e.realloc)&&(this.staticTexture=this.createDefaultShadowMap()),this.syncShader(this.staticTexture),!1;case 2:return!0;case 3:(null==this.staticTexture||null==(e=this.staticTexture).t&&null==e.realloc)&&(this.staticTexture=this.createDefaultShadowMap());for(var e,n=null,s=null,i=t.discarded,a=t.lastDisc,r=t.current;null!=r;)0==r.pass.isStatic?null==n?n=s=r:(s.next=r,s=r):null==i?i=a=r:(a.next=r,a=r),r=r.next;return null!=s&&(s.next=null),null!=a&&(a.next=null),t.current=n,t.discarded=i,t.lastDisc=a,!0}},__class__:Be,__properties__:{set_size:"set_size"}}),(e["h3d.pass.DirShadowMap"]=Ie).__name__="h3d.pass.DirShadowMap",Ie.__super__=Be,Ie.prototype=t(Be.prototype,{set_mode:function(t){var e=this.dshader;return e.constModified=!0,e.enable__=t!=Vo.None,this.mode=t},set_size:function(t){return null!=this.border&&this.size!=t&&(this.border.dispose(),this.border=new ve(t,t)),Be.prototype.set_size.call(this,t)},dispose:function(){Be.prototype.dispose.call(this),this.customDepth&&null!=this.depth&&this.depth.dispose(),this.border.dispose()},calcShadowBounds:function(h){var u,_,c,t,e,n,s,i,a,r,l,o,d,p,f,g,m,A,x,b,y,w,v,C,M,S,k,B,I=this,T=h.orthoBounds,F=-1e9,D=1e9;this.autoShrink?(u=new ro,_=ro.I(),c=this.autoZPlanes?new oo:null,(null!=this.boundingObject?this.boundingObject:this.ctx.scene).iterVisibleMeshes(function(t){var e,n,s,i,a,r,l,o;null==t.primitive||!t.material.castShadows||(e=t.primitive.getBounds()).xMin>e.xMax||(t=t.primitive instanceof Lo?_:t.getAbsPos(),I.autoZPlanes&&(c.load(e),c.transform(t),c.zMax>F&&(F=c.zMax),c.zMin<D)&&(D=c.zMin),u.multiply3x4(t,h.mcam),t=e.xMin,a=n=null==(n=e.yMin)?0:n,r=s=null==(s=e.zMin)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMin,a=n=null==(n=e.yMin)?0:n,r=s=null==(s=e.zMax)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMin,a=n=null==(n=e.yMax)?0:n,r=s=null==(s=e.zMin)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMin,a=n=null==(n=e.yMax)?0:n,r=s=null==(s=e.zMax)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMax,a=n=null==(n=e.yMin)?0:n,r=s=null==(s=e.zMin)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMax,a=n=null==(n=e.yMin)?0:n,r=s=null==(s=e.zMax)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMax,a=n=null==(n=e.yMax)?0:n,r=s=null==(s=e.zMin)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r),t=e.xMax,a=n=null==(n=e.yMax)?0:n,r=s=null==(s=e.zMax)?0:s,l=(i=t=null==t?0:t)*u._12+a*u._22+r*u._32+u._42,o=i*u._13+a*u._23+r*u._33+u._43,i=i*u._11+a*u._21+r*u._31+u._41,a=l,r=o,i<T.xMin&&(T.xMin=i),i>T.xMax&&(T.xMax=i),a<T.yMin&&(T.yMin=a),a>T.yMax&&(T.yMax=a),r<T.zMin&&(T.zMin=r),r>T.zMax&&(T.zMax=r))})):this.mode==Vo.Dynamic&&(T.xMin=-1e20,T.xMax=1e20,T.yMin=-1e20,T.yMax=1e20,T.zMin=-1e20,T.zMax=1e20),this.mode==Vo.Dynamic&&(t=new oo,l=this.minDist<0?this.ctx.camera.zNear:this.minDist,o=this.maxDist<0?this.ctx.camera.zFar:this.maxDist,r=A=null==(A=(e=I.ctx.camera.unproject(-1,-1,I.ctx.camera.distanceToDepth(i=l))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&i<a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(-1,1,I.ctx.camera.distanceToDepth(i=l))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&i<a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(1,-1,I.ctx.camera.distanceToDepth(i=l))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&i<a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(1,1,I.ctx.camera.distanceToDepth(i=l))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&i<a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(-1,-1,I.ctx.camera.distanceToDepth(i=o))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=D,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&-1*i<-1*a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(-1,1,I.ctx.camera.distanceToDepth(i=o))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=D,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&-1*i<-1*a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(1,-1,I.ctx.camera.distanceToDepth(i=o))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=D,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&-1*i<-1*a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),r=A=null==(A=(e=I.ctx.camera.unproject(1,1,I.ctx.camera.distanceToDepth(i=o))).x)?0:A,f=x=null==(x=e.y)?0:x,B=b=null==(b=e.z)?0:b,I.autoShrink&&I.autoZPlanes&&(d=A=null==(A=(e=I.ctx.camera.pos).x)?0:A,n=x=null==(x=e.y)?0:x,s=b=null==(b=e.z)?0:b,(y=new ie).px=d,y.py=n,y.pz=s,y.lx=r-d,y.ly=f-n,y.lz=B-s,y.normalize(),w=D,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),0<(a=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S))&&-1*i<-1*a&&(r=A=null==(A=y.px+a*y.lx)?0:A,f=x=null==(x=y.py+a*y.ly)?0:x,B=b=null==(b=y.pz+a*y.lz)?0:b),g=r*(p=h.mcam)._12+f*p._22+B*p._32+p._42,m=r*p._13+f*p._23+B*p._33+p._43,A=r=r*p._11+f*p._21+B*p._31+p._41,x=f=g,b=B=m,A<t.xMin&&(t.xMin=A),A>t.xMax&&(t.xMax=A),x<t.yMin&&(t.yMin=x),x>t.yMax&&(t.yMax=x),b<t.zMin&&(t.zMin=b),b>t.zMax&&(t.zMax=b),this.autoShrink?(t.zMin=T.zMin,T.intersection(T,t),this.autoZPlanes&&(e=h.target,w=h.pos,l=A=null==(A=e.x-w.x)?0:A,s=A=null==(A=A*(n=(n=A*A+(o=x=null==(x=e.y-w.y)?0:x)*o+(d=b=null==(b=e.z-w.z)?0:b)*d)<1e-10?0:1/Math.sqrt(n)))?0:A,i=x=null==(x=o*n)?0:x,a=b=null==(b=d*n)?0:b,r=1e9,f=T.xMin,x=g=T.yMin,o=x=null==g?0:x,d=b=null==(b=T.zMin)?0:b,A=f=(l=A=null==(A=f)?0:A)*(p=h.getInverseView())._11+o*p._21+d*p._31+p._41,x=g=l*p._12+o*p._22+d*p._32+p._42,b=null==(m=l*p._13+o*p._23+d*p._33+p._43)?0:m,null==g&&(x=0),(y=new ie).px=A=null==f?0:A,y.py=x,y.pz=b,y.lx=s,y.ly=i,y.lz=a,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),(B=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S)<1e9&&(r=B),A=f=T.xMin,x=g=T.yMax,o=x=null==g?0:x,d=b=null==(b=T.zMin)?0:b,A=f=(l=A=null==f?0:A)*(p=h.getInverseView())._11+o*p._21+d*p._31+p._41,x=g=l*p._12+o*p._22+d*p._32+p._42,b=null==(m=l*p._13+o*p._23+d*p._33+p._43)?0:m,null==g&&(x=0),(y=new ie).px=A=null==f?0:A,y.py=x,y.pz=b,y.lx=s,y.ly=i,y.lz=a,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),(B=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S)<r&&(r=B),A=f=T.xMax,x=g=T.yMin,o=x=null==g?0:x,d=b=null==(b=T.zMin)?0:b,A=f=(l=A=null==f?0:A)*(p=h.getInverseView())._11+o*p._21+d*p._31+p._41,x=g=l*p._12+o*p._22+d*p._32+p._42,b=null==(m=l*p._13+o*p._23+d*p._33+p._43)?0:m,null==g&&(x=0),(y=new ie).px=A=null==f?0:A,y.py=x,y.pz=b,y.lx=s,y.ly=i,y.lz=a,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),(B=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S)<r&&(r=B),A=f=T.xMax,x=g=T.yMax,o=x=null==g?0:x,d=b=null==(b=T.zMin)?0:b,A=f=(l=A=null==f?0:A)*(p=h.getInverseView())._11+o*p._21+d*p._31+p._41,x=g=l*p._12+o*p._22+d*p._32+p._42,b=null==(m=l*p._13+o*p._23+d*p._33+p._43)?0:m,null==g&&(x=0),(y=new ie).px=A=null==f?0:A,y.py=x,y.pz=b,y.lx=s,y.ly=i,y.lz=a,y.normalize(),w=F,S=y.lx*(v=0)+y.ly*(C=0)+y.lz*(M=1),k=(w=null==w?0:w)-(y.px*v+y.py*C+y.pz*M),T.zMin+=r=(B=(S<0?-S:S)<1e-10?(k<0?-k:k)<1e-10?0:-1:k/S)<r?B:r)):T.load(t)),T.scaleCenter(1.01)},setGlobals:function(){Be.prototype.setGlobals.call(this);var t=this.getShadowProj();this.manager.globals.map.h[this.cameraViewProj_id]=t},syncShader:function(t){(e=this.dshader).constModified=!0,e.shadowMap__=t,(e=this.dshader).constModified=!0,e.shadowMapChannel__=this.format==A.nativeFormat?Qc.PackedFloat:Qc.R,this.dshader.shadowBias__=this.bias,this.dshader.shadowPower__=this.power,this.dshader.shadowProj__=this.getShadowProj(),(e=this.dshader).constModified=!0,e.USE_ESM__=this.samplingKind==Qo.ESM,this.dshader.shadowPower__=this.power;(e=this.dshader).constModified=!0,e.USE_PCF__=this.samplingKind==Qo.PCF;var e=this.dshader.shadowRes__,n=t.width,t=t.height;null==t&&(t=0),e.x=n=null==n?0:n,e.y=t,e.z=0,e.w=1,this.dshader.pcfScale__=this.pcfScale,this.dshader.set_pcfQuality(this.pcfQuality)},processShadowMap:function(t,e,n){this.ctx.engine.pushTarget(e),this.ctx.engine.clear(16777215,1),Be.prototype.draw.call(this,t,n);t=0<this.blur.radius&&(this.mode!=Vo.Mixed||!this.ctx.computingStatic);null==this.border||t||this.border.render(),this.ctx.engine.popTarget(),this.mode!=Vo.Mixed||this.ctx.computingStatic||(n=this.ctx.textures.allocTarget("mergedDirShadowMap",this.size,this.size,!1,this.format),this.mergePass.shader.texA__=e,this.mergePass.shader.texB__=this.staticTexture,this.ctx.engine.pushTarget(n),this.mergePass.render(),this.ctx.engine.popTarget(),e=n),t&&(this.blur.apply(this.ctx,e),null!=this.border)&&(this.ctx.engine.pushTarget(e),this.border.render(),this.ctx.engine.popTarget())},draw:function(t,e){var n=this;if(this.enabled&&this.filterPasses(t)){this.mode==Vo.Mixed&&!this.ctx.computingStatic||(s=this.ctx.camera.target,null==(i=null==(i=null==this.light?this.ctx.lightSystem.shadowLight:this.light)?null:i.getShadowDirection())?((r=this.lightCamera.target).x=0,r.y=0,r.z=-1,r.w=1):(r=this.lightCamera.target,a=i.x,f=i.y,null==(i=i.z)&&(i=0),null==f&&(f=0),r.x=a=null==a?0:a,r.y=f,r.z=i,r.w=1,a=(a=(r=this.lightCamera.target).x*r.x+r.y*r.y+r.z*r.z)<1e-10?0:1/Math.sqrt(a),r.x*=a,r.y*=a,r.z*=a),this.lightCamera.target.x+=s.x,this.lightCamera.target.y+=s.y,this.lightCamera.target.z+=s.z,(r=this.lightCamera.pos).x=s.x,r.y=s.y,r.z=s.z,r.w=s.w,this.lightCamera.update(),(r=this.lightCamera.orthoBounds).xMin=1e20,r.xMax=-1e20,r.yMin=1e20,r.yMax=-1e20,r.zMin=1e20,r.zMax=-1e20,null!=t.current&&this.calcShadowBounds(this.lightCamera),this.lightCamera.update());for(var s,i,a,r,l=null,o=!0,h=null,u=null,_=t.discarded,c=t.lastDisc,d=t.current;null!=d;){var p=d.obj.cullingCollider,p=null==p||(o=p!=l?(l=p).inFrustum(n.lightCamera.frustum):o);p?null==h?h=u=d:(u.next=d,u=d):null==_?_=c=d:(c.next=d,c=d),d=d.next}null!=u&&(u.next=null),null!=c&&(c.next=null),t.current=h,t.discarded=_,t.lastDisc=c;var f=this.ctx.textures.allocTarget("dirShadowMap",this.size,this.size,!1,this.format);this.customDepth&&(null==this.depth||this.depth.width!=this.size||this.depth.height!=this.size||this.depth.isDisposed())&&(null!=this.depth&&this.depth.dispose(),this.depth=new Bo(this.size,this.size)),f.depthBuffer=this.depth,this.processShadowMap(t,f,e),this.syncShader(f)}},__class__:Ie}),(e["h3d.pass.DefaultShadowMap"]=Te).__name__="h3d.pass.DefaultShadowMap",Te.__super__=Ie,Te.prototype=t(Ie.prototype,{draw:function(t,e){Ie.prototype.draw.call(this,t,e),this.ctx.setGlobalID(this.shadowMapId,{texture:this.dshader.shadowMap__,channel:this.format==A.nativeFormat?Qc.PackedFloat:Qc.R}),this.ctx.setGlobalID(this.shadowProjId,this.getShadowProj()),this.ctx.setGlobalID(this.shadowColorId,this.color),this.ctx.setGlobalID(this.shadowPowerId,this.power),this.ctx.setGlobalID(this.shadowBiasId,this.bias)},__class__:Te}),(e["h3d.pass._HardwarePick.FixedColor"]=Fe).__name__="h3d.pass._HardwarePick.FixedColor",Fe._SHADER=null,Fe.__super__=f,Fe.prototype=t(f.prototype,{get_colorID:function(){return this.colorID__},set_colorID:function(t){return this.colorID__=t},get_viewport:function(){return this.viewport__},set_viewport:function(t){return this.viewport__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.colorID__;case 1:return this.viewport__}return null},getParamFloatValue:function(t){return 0},__class__:Fe,__properties__:{set_viewport:"set_viewport",get_viewport:"get_viewport",set_colorID:"set_colorID",get_colorID:"get_colorID"}}),(e["h3d.pass.HardwarePick"]=De).__name__="h3d.pass.HardwarePick",De.__super__=ke,De.prototype=t(ke.prototype,{dispose:function(){ke.prototype.dispose.call(this),this.texOut.dispose(),this.texOut.depthBuffer.dispose()},getOutputs:function(){return[Yc.Value("output.colorID")]},drawObject:function(t){ke.prototype.drawObject.call(this,t);var t=this.fixedColor.colorID__,e=-16777216|++this.colorID;t.x=(e>>16&255)/255,t.y=(e>>8&255)/255,t.z=(255&e)/255,t.w=(e>>>24)/255},draw:function(t,e){for(var n=t.current;null!=n;){var s=n;n=n.next,s.pass.bits&=-268435393,s.pass.bits|=268435392&this.material.bits}this.colorID=0;for(var i=this.fixedColor.colorID__,a=-16777216|++this.colorID,i=(i.x=(a>>16&255)/255,i.y=(a>>8&255)/255,i.z=(255&a)/255,i.w=(a>>>24)/255,this.fixedColor.viewport__),a=-(2*this.pickX/this.ctx.engine.width-1),r=2*this.pickY/this.ctx.engine.height-1,l=this.ctx.engine.width/this.texOut.width,o=this.ctx.engine.height/this.texOut.height,n=(null==o&&(o=1),null==l&&(l=0),null==r&&(r=0),i.x=a=null==a?0:a,i.y=r,i.z=l,i.w=o,this.ctx.engine.pushTarget(this.texOut),this.ctx.engine.clear(-16777216,1),this.ctx.extraShaders=this.ctx.allocShaderList(this.fixedColor),ke.prototype.draw.call(this,t,e),this.ctx.extraShaders=null,this.ctx.engine.popTarget(),t.current);null!=n;){s=n;n=n.next,s.pass.set_blendSrc(s.pass.blendSrc),s.pass.set_blendDst(s.pass.blendDst),s.pass.set_blendOp(s.pass.blendOp),s.pass.set_blendAlphaSrc(s.pass.blendAlphaSrc),s.pass.set_blendAlphaDst(s.pass.blendAlphaDst),s.pass.set_blendAlphaOp(s.pass.blendAlphaOp),s.pass.colorMask=s.pass.colorMask}this.ctx.engine.clear(null,null,0);a=this.texOut.capturePixels();this.pickedIndex=(16777215&a.getPixel(a.width>>1,a.height>>1))-1},__class__:De}),function(t,e,n,s){null==s&&(s=!0),null==n&&(n=.3),null==e&&(e=0),null==t&&(t=4),this.alpha=1,Do.call(this,new ih),this.size=t,this.color=e,this.quality=n,this.multiplyAlpha=s}),Ro=((e["h3d.pass.Outline"]=zo).__name__="h3d.pass.Outline",zo.__super__=Do,zo.prototype=t(Do.prototype,{apply:function(t,e,n){null==n&&(n=e);var t=t.textures.allocTarget(e.name+"OutlineTmp",e.width,e.height,!1,e.format),s=this.shader.color__,i=this.color,s=(s.x=(i>>16&255)/255,s.y=(i>>8&255)/255,s.z=(255&i)/255,s.w=(i>>>24)/255,this.shader.color__.w=this.alpha,this.shader.size__),i=this.size/e.width,a=this.size/e.height,s=(null==a&&(a=0),s.x=i=null==i?0:i,s.y=a,s.z=0,s.w=1,this.shader),i=0|Math.max(100*this.quality,1);s.constModified=!0,s.samples__=i;(s=this.shader).constModified=!0,s.multiplyAlpha__=this.multiplyAlpha?0:1,this.shader.texture__=e,this.get_engine().pushTarget(t),this.render(),this.get_engine().popTarget(),this.shader.texture__=t;a=n.depthBuffer;n.depthBuffer=null,this.get_engine().pushTarget(n),this.render(),this.get_engine().popTarget(),n.depthBuffer=a},__class__:zo}),(e["h3d.pass.PassList"]=Ee).__name__="h3d.pass.PassList",Ee.prototype={__class__:Ee},(e["h3d.pass.PassObject"]=Pe).__name__="h3d.pass.PassObject",Pe.prototype={__class__:Pe},function(t){this.shaderCache=Vc.get(),this.globals=new Nc,this.currentOutput=new Jc(null),this.setOutput(t)}),Vo=((e["h3d.pass.ShaderManager"]=Ro).__name__="h3d.pass.ShaderManager",Ro.prototype={setOutput:function(t){null==t&&(t=[Yc.Value("output.color")]),this.currentOutput.s=this.shaderCache.getLinkShader(t)},fillRec:function(t,e,n,s){switch(e._hx_index){case 1:case 3:return n[s]=t,1;case 5:var i=e.size,a=t;switch(n[s++]=a.x,n[s++]=a.y,i){case 3:n[s++]=a.z;break;case 4:n[s++]=a.z,n[s++]=a.w}return i;case 6:var r=t;return n[s++]=r._11,n[s++]=r._21,n[s++]=r._31,n[s++]=0,n[s++]=r._12,n[s++]=r._22,n[s++]=r._32,n[s++]=0,n[s++]=r._13,n[s++]=r._23,n[s++]=r._33,n[s++]=0,12;case 7:r=t;return n[s++]=r._11,n[s++]=r._21,n[s++]=r._31,n[s++]=r._41,n[s++]=r._12,n[s++]=r._22,n[s++]=r._32,n[s++]=r._42,n[s++]=r._13,n[s++]=r._23,n[s++]=r._33,n[s++]=r._43,n[s++]=r._14,n[s++]=r._24,n[s++]=r._34,n[s++]=r._44,16;case 8:r=t;return n[s++]=r._11,n[s++]=r._21,n[s++]=r._31,n[s++]=r._41,n[s++]=r._12,n[s++]=r._22,n[s++]=r._32,n[s++]=r._42,n[s++]=r._13,n[s++]=r._23,n[s++]=r._33,n[s++]=r._43,12;case 13:for(var i=e.vl,l=0,o=0;o<i.length;){var h=i[o];++o,l+=this.fillRec(Z.field(t,h.name),h.type,n,s+l)}return l;case 15:i=e.t,o=e.size;switch(i._hx_index){case 3:if(0!=o._hx_index)throw tr.thrown("assert "+Ja.string(e));for(var u=o.v,_=0,c=(a=t).length<u?a.length:u;_<c;)n[s++]=a[_++];return u;case 5:if(4==i.size&&1==i.t._hx_index){if(0!=o._hx_index)throw tr.thrown("assert "+Ja.string(e));for(u=o.v,a=t,_=0;_<u&&null!=(d=a[_++]);)n[s++]=d.x,n[s++]=d.y,n[s++]=d.z,n[s++]=d.w;return 4*u}if(0!=o._hx_index)throw tr.thrown("assert "+Ja.string(e));for(u=o.v,a=t,p=0,_=0;_<u&&null!=(d=a[_++]);)s+=p=this.fillRec(d,i,n,s);return u*p;case 8:if(0!=o._hx_index)throw tr.thrown("assert "+Ja.string(e));for(u=o.v,a=t,_=0;_<u&&null!=(r=a[_++]);)n[s++]=r._11,n[s++]=r._21,n[s++]=r._31,n[s++]=r._41,n[s++]=r._12,n[s++]=r._22,n[s++]=r._32,n[s++]=r._42,n[s++]=r._13,n[s++]=r._23,n[s++]=r._33,n[s++]=r._43;return 12*u;default:if(0!=o._hx_index)throw tr.thrown("assert "+Ja.string(e));for(var d,u=o.v,a=t,p=0,o=0;o<u&&null!=(d=a[o++]);)s+=p=this.fillRec(d,i,n,s);return u*p}break;default:throw tr.thrown("assert "+Ja.string(e))}},shaderInfo:function(t,e){for(var n=e.split(".").pop();null!=t;){for(var s=0,i=t.s.instance.shader.vars;s<i.length;)if(i[s++].name==n)return t.s.toString();t=t.next}return"(not found)"},fillGlobals:function(t,e){for(var n=e.vertex,s=n.globals,i=t.vertex.globals;null!=s;){if(null==(a=this.globals.map.h[s.gid])){if("__consts__"!=s.path)throw tr.thrown("Missing global value "+s.path);this.fillRec(n.consts,s.type,i,s.pos)}else this.fillRec(a,s.type,i,s.pos);s=s.next}for(var a,s=(n=e.fragment).globals,i=t.fragment.globals;null!=s;){if(null==(a=this.globals.map.h[s.gid])){if("__consts__"!=s.path)throw tr.thrown("Missing global value "+s.path);this.fillRec(n.consts,s.type,i,s.pos)}else this.fillRec(a,s.type,i,s.pos);s=s.next}},fillParams:function(t,e,n){for(var s=-1,i=null,a=t.vertex,r=e.vertex,l=r.params,o=a.params;null!=l;){if(null==l.perObjectGlobal){if(l.type==V.TFloat){if(s==(S=l.instance))m=i;else{for(var h=n,s=S;0<--S;)h=h.next;m=i=h.s}o[l.pos]=m.getParamFloatValue(l.index),l=l.next;continue}if(s==(A=l.instance))k=i;else{var u=n;for(s=A;0<--A;)u=u.next;k=i=u.s}if(null==(M=k.getParamValue(l.index)))throw tr.thrown("Missing param value "+Ja.string(i)+"."+l.name)}else if(null!=l.perObjectGlobal){if(null==(B=this.globals.map.h[l.perObjectGlobal.gid]))throw tr.thrown("Missing global value "+l.perObjectGlobal.path+" for shader "+this.shaderInfo(n,l.perObjectGlobal.path));M=17==l.type._hx_index?B.texture:B}else{if(s==(x=l.instance))b=i;else{var _=n;for(s=x;0<--x;)_=_.next;b=i=_.s}if(null==(y=b.getParamValue(l.index)))throw tr.thrown("Missing param value "+Ja.string(n.s)+"."+l.name);M=y}this.fillRec(M,l.type,o,l.pos),l=l.next}for(var c=0,l=r.textures;null!=l;){if(null==(v=!Ro.STRICT)&&(v=!1),null!=l.perObjectGlobal){if(null==(M=this.globals.map.h[l.perObjectGlobal.gid]))throw tr.thrown("Missing global value "+l.perObjectGlobal.path+" for shader "+this.shaderInfo(n,l.perObjectGlobal.path));w=17==l.type._hx_index?M.texture:M}else{if(s==(S=l.instance))k=i;else{h=n;for(s=S;0<--S;)h=h.next;k=i=h.s}if(null==(B=k.getParamValue(l.index))&&!v)throw tr.thrown("Missing param value "+Ja.string(n.s)+"."+l.name);w=B}if(l.pos<0)for(var d=w,p=0,f=-l.pos;p<f;)a.tex[c++]=d[p++];else a.tex[c++]=w;l=l.next}for(var l=r.buffers,g=0;null!=l;){if(null==(v=!Ro.STRICT)&&(v=!1),null!=l.perObjectGlobal){if(null==(M=this.globals.map.h[l.perObjectGlobal.gid]))throw tr.thrown("Missing global value "+l.perObjectGlobal.path+" for shader "+this.shaderInfo(n,l.perObjectGlobal.path));C=17==l.type._hx_index?M.texture:M}else{if(s==(S=l.instance))k=i;else{h=n;for(s=S;0<--S;)h=h.next;k=i=h.s}if(null==(B=k.getParamValue(l.index))&&!v)throw tr.thrown("Missing param value "+Ja.string(n.s)+"."+l.name);C=B}a.buffers[g++]=C,l=l.next}for(var m,A,x,b,y,a=t.fragment,l=(r=e.fragment).params,o=a.params;null!=l;){if(null==l.perObjectGlobal){if(l.type==V.TFloat){if(s==(S=l.instance))m=i;else{h=n;for(s=S;0<--S;)h=h.next;m=i=h.s}o[l.pos]=m.getParamFloatValue(l.index),l=l.next;continue}if(s==(A=l.instance))k=i;else{u=n;for(s=A;0<--A;)u=u.next;k=i=u.s}if(null==(M=k.getParamValue(l.index)))throw tr.thrown("Missing param value "+Ja.string(i)+"."+l.name)}else if(null!=l.perObjectGlobal){if(null==(B=this.globals.map.h[l.perObjectGlobal.gid]))throw tr.thrown("Missing global value "+l.perObjectGlobal.path+" for shader "+this.shaderInfo(n,l.perObjectGlobal.path));M=17==l.type._hx_index?B.texture:B}else{if(s==(x=l.instance))b=i;else{_=n;for(s=x;0<--x;)_=_.next;b=i=_.s}if(null==(y=b.getParamValue(l.index)))throw tr.thrown("Missing param value "+Ja.string(n.s)+"."+l.name);M=y}this.fillRec(M,l.type,o,l.pos),l=l.next}for(var w,c=0,l=r.textures;null!=l;){if(null==(v=!Ro.STRICT)&&(v=!1),null!=l.perObjectGlobal){if(null==(M=this.globals.map.h[l.perObjectGlobal.gid]))throw tr.thrown("Missing global value "+l.perObjectGlobal.path+" for shader "+this.shaderInfo(n,l.perObjectGlobal.path));w=17==l.type._hx_index?M.texture:M}else{if(s==(S=l.instance))k=i;else{h=n;for(s=S;0<--S;)h=h.next;k=i=h.s}if(null==(B=k.getParamValue(l.index))&&!v)throw tr.thrown("Missing param value "+Ja.string(n.s)+"."+l.name);w=B}if(l.pos<0)for(d=w,p=0,f=-l.pos;p<f;)a.tex[c++]=d[p++];else a.tex[c++]=w;l=l.next}for(var v,C,M,S,k,B,l=r.buffers,g=0;null!=l;){if(null==(v=!Ro.STRICT)&&(v=!1),null!=l.perObjectGlobal){if(null==(M=this.globals.map.h[l.perObjectGlobal.gid]))throw tr.thrown("Missing global value "+l.perObjectGlobal.path+" for shader "+this.shaderInfo(n,l.perObjectGlobal.path));C=17==l.type._hx_index?M.texture:M}else{if(s==(S=l.instance))k=i;else{h=n;for(s=S;0<--S;)h=h.next;k=i=h.s}if(null==(B=k.getParamValue(l.index))&&!v)throw tr.thrown("Missing param value "+Ja.string(n.s)+"."+l.name);C=B}a.buffers[g++]=C,l=l.next}},compileShaders:function(t,e){null==e&&(e=!1),this.globals.maxChannels=0;for(var n=t;null!=n;){var s=n.s,n=n.next;s.updateConstants(this.globals)}this.currentOutput.next=t;s=this.shaderCache.link(this.currentOutput,e);return this.currentOutput.next=null,s},__class__:Ro},d["h3d.pass.RenderMode"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.pass.RenderMode",toString:l},Static:{_hx_name:"Static",_hx_index:1,__enum__:"h3d.pass.RenderMode",toString:l},Dynamic:{_hx_name:"Dynamic",_hx_index:2,__enum__:"h3d.pass.RenderMode",toString:l},Mixed:{_hx_name:"Mixed",_hx_index:3,__enum__:"h3d.pass.RenderMode",toString:l}}),Qo=(Vo.__constructs__=[Vo.None,Vo.Static,Vo.Dynamic,Vo.Mixed],Vo.__empty_constructs__=[Vo.None,Vo.Static,Vo.Dynamic,Vo.Mixed],d["h3d.pass.ShadowSamplingKind"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.pass.ShadowSamplingKind",toString:l},PCF:{_hx_name:"PCF",_hx_index:1,__enum__:"h3d.pass.ShadowSamplingKind",toString:l},ESM:{_hx_name:"ESM",_hx_index:2,__enum__:"h3d.pass.ShadowSamplingKind",toString:l}}),Oo=(Qo.__constructs__=[Qo.None,Qo.PCF,Qo.ESM],Qo.__empty_constructs__=[Qo.None,Qo.PCF,Qo.ESM],function(){this.textureCount=1,this.shaderCount=1,this.shaderIdMap=[],this.textureIdMap=[]}),Lo=((e["h3d.pass.SortByMaterial"]=Oo).__name__="h3d.pass.SortByMaterial",Oo.prototype={sort:function(t){for(var e=this.shaderCount,n=this.textureCount,s=t.current;null!=s;){var i=s,s=s.next;(this.shaderIdMap[i.shader.id]<e||null==this.shaderIdMap[i.shader.id])&&(this.shaderIdMap[i.shader.id]=this.shaderCount++),(this.textureIdMap[i.texture]<n||null==this.textureIdMap[i.shader.id])&&(this.textureIdMap[i.texture]=this.textureCount++)}var a=t.current;if(null==a)i=null;else{for(var r,l,o,h,u=1,_=0,c=0;;){for(l=a,h=a=null,r=0;null!=l;){++r;for(var d,p=l,_=0,f=0,g=u;f<g&&(++f,++_,null!=(p=p.next)););for(c=u;0<_||0<c&&null!=p;)0!=_&&(0==c||null==p||(l.pass.layer!=p.pass.layer?l.pass.layer-p.pass.layer:0!=(d=this.shaderIdMap[l.shader.id]-this.shaderIdMap[p.shader.id])?d:this.textureIdMap[l.texture]-this.textureIdMap[p.texture])<=0)?(l=(o=l).next,--_):(p=(o=p).next,--c),null!=h?h.next=o:a=o,h=o;l=p}if(h.next=null,r<=1)break;u*=2}i=a}t.current=i},__class__:Oo},(e["h3d.prim.BigPrimitive"]=ze).__name__="h3d.prim.BigPrimitive",ze.PREV_BUFFER=null,ze.PREV_INDEX=null,ze.__super__=St,ze.prototype=t(St.prototype,{begin:function(t,e){if(this.startIndex=this.bufPos/this.stride|0,65535<=this.startIndex+t){if(65535<=t)throw tr.thrown("Too many vertices in begin()");this.flush()}if(null==this.tmpBuf&&(this.tmpBuf=ze.PREV_BUFFER,null==this.tmpBuf?this.tmpBuf=U_._new(0):ze.PREV_BUFFER=null,this.isStatic))for(var n=this.tmpBuf,s=65535*this.stride,i=n.pos;i<s;)++i,n.pos==n.array.length&&((a=n.array.length<<1)<128&&(a=128),(r=new Float32Array(a)).set(n.array),n.array=r),n.array[n.pos++]=0;if(!this.isStatic)for(var a,r,n=this.tmpBuf,s=t*this.stride+this.bufPos,i=n.pos;i<s;)++i,n.pos==n.array.length&&((a=n.array.length<<1)<128&&(a=128),(r=new Float32Array(a)).set(n.array),n.array=r),n.array[n.pos++]=0;if(null==this.tmpIdx&&(this.tmpIdx=ze.PREV_INDEX,null==this.tmpIdx?this.tmpIdx=new Array(0):ze.PREV_INDEX=null),this.idxPos+e>this.tmpIdx.length){for(var l=0==this.tmpIdx.length?1024:this.tmpIdx.length,o=this.idxPos+e;l<o;)l<<=1;for(n=this.tmpIdx;n.length<l;)n.push(0)}},triCount:function(){for(var t=0,e=0,n=this.allIndexes;e<n.length;)t+=n[e++].count;return(t+=this.idxPos)/3|0},vertexCount:function(){for(var t=0,e=0,n=this.buffers;e<n.length;)t+=n[e++].vertices;return t+=this.bufPos/this.stride|0},flush:function(){var t;null!=this.tmpBuf&&(0<this.bufPos&&0<this.idxPos&&(this.flushing=!0,null!=this.allocator?t=this.allocator.ofSubFloats(this.tmpBuf,this.stride,this.bufPos/this.stride|0,this.isRaw?2:0):(t=io.ofSubFloats(this.tmpBuf,this.stride,this.bufPos/this.stride|0),this.isRaw&&(t.flags|=16)),this.buffers.push(t),t=null!=this.allocator?this.allocator.ofIndexes(this.tmpIdx,this.idxPos):Kt.alloc(this.tmpIdx,0,this.idxPos),this.allIndexes.push(t),this.flushing=!1),(null==ze.PREV_BUFFER||ze.PREV_BUFFER.pos<this.tmpBuf.pos)&&(ze.PREV_BUFFER=this.tmpBuf),(null==ze.PREV_INDEX||ze.PREV_INDEX.length<this.tmpIdx.length)&&(ze.PREV_INDEX=this.tmpIdx),this.tmpBuf=null,this.tmpIdx=null,this.bufPos=0,this.idxPos=0,this.startIndex=0)},render:function(t){null!=this.tmpBuf&&this.flush();for(var e=0,n=this.buffers.length;e<n;){var s=e++;t.renderIndexed(this.buffers[s],this.allIndexes[s])}},getBounds:function(){return this.bounds},dispose:function(){this.clear()},clear:function(){if(this.flushing)throw tr.thrown("Cannot clear() BigPrimitive while it's flushing");for(var t=this.bounds,e=(t.xMin=1e20,t.xMax=-1e20,t.yMin=1e20,t.yMax=-1e20,t.zMin=1e20,t.zMax=-1e20,0),n=this.buffers;e<n.length;){var s=n[e];++e,null!=this.allocator?this.allocator.disposeBuffer(s):s.dispose()}for(e=0,n=this.allIndexes;e<n.length;){var i=n[e];++e,null!=this.allocator?this.allocator.disposeIndexBuffer(i):i.dispose()}this.buffers=[],this.allIndexes=[],this.bufPos=0,this.idxPos=0,this.tmpBuf=null,this.tmpIdx=null},__class__:ze}),(e["h3d.prim.MeshPrimitive"]=Re).__name__="h3d.prim.MeshPrimitive",Re.__super__=St,Re.prototype=t(St.prototype,{allocBuffer:function(t,e){return null},addBuffer:function(t,e,n){null==n&&(n=0),null==this.bufferCache&&(this.bufferCache=new fl);var t=Nc.allocID(t),s=this.bufferCache.h[t];null!=s&&s.dispose(),this.bufferCache.h[t]=new Ht(e,n),this.layouts=null},dispose:function(){if(St.prototype.dispose.call(this),null!=this.bufferCache)for(var t=this.bufferCache.iterator();t.hasNext();)t.next().dispose();this.bufferCache=null,this.layouts=null},getBuffers:function(t){null==this.bufferCache&&(this.bufferCache=new fl),null==this.layouts&&(this.layouts=new fl);var e=t.driver.getShaderInputNames(),n=this.layouts.h[e.id];if(null==n){for(var s=null,i=0,a=e.names;i<a.length;){var r=a[i],l=(++i,Nc.allocID(r)),o=this.bufferCache.h[l];if(null==o){if(null==(o=this.allocBuffer(t,r)))throw tr.thrown("Buffer "+r+" is not available");this.bufferCache.h[l]=o}r=new Ht(o.buffer,o.offset);null==s?n=s=r:(s.next=r,s=r)}this.layouts.h[e.id]=n}return n},render:function(t){null!=this.indexes&&!this.indexes.isDisposed()||this.alloc(t),t.renderMultiBuffers(this.getBuffers(t),this.indexes)},__class__:Re}),(e["h3d.prim.Polygon"]=Ve).__name__="h3d.prim.Polygon",Ve.__super__=Re,Ve.prototype=t(Re.prototype,{getBounds:function(){for(var t=new oo,e=0,n=this.points;e<n.length;){var s=n[e];++e,s.x<t.xMin&&(t.xMin=s.x),s.x>t.xMax&&(t.xMax=s.x),s.y<t.yMin&&(t.yMin=s.y),s.y>t.yMax&&(t.yMax=s.y),s.z<t.zMin&&(t.zMin=s.z),s.z>t.zMax&&(t.zMax=s.z)}return t},alloc:function(t){this.dispose();for(var e=3,n=["position"],s=[0],i=(null!=this.normals&&(n.push("normal"),s.push(3),e=6),null!=this.tangents&&(n.push("tangent"),s.push(e),e+=3),null!=this.uvs&&(n.push("uv"),s.push(e),e+=2),null!=this.colors&&(n.push("color"),s.push(e),e+=3),U_._new(0)),a=0,r=this.points.length;a<r;){var l,o,h,u=a++,_=this.points[u],c=_.x,d=(i.pos==i.array.length&&((d=i.array.length<<1)<128&&(d=128),(d=new Float32Array(d)).set(i.array),i.array=d),i.array[i.pos++]=c,_.y),c=(i.pos==i.array.length&&((c=i.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(i.array),i.array=c),i.array[i.pos++]=d,_.z);i.pos==i.array.length&&((_=i.array.length<<1)<128&&(_=128),(_=new Float32Array(_)).set(i.array),i.array=_),i.array[i.pos++]=c,null!=this.normals&&(c=(_=this.normals[u]).x,i.pos==i.array.length&&((l=i.array.length<<1)<128&&(l=128),(l=new Float32Array(l)).set(i.array),i.array=l),i.array[i.pos++]=c,l=_.y,i.pos==i.array.length&&((c=i.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(i.array),i.array=c),i.array[i.pos++]=l,c=_.z,i.pos==i.array.length&&((_=i.array.length<<1)<128&&(_=128),(_=new Float32Array(_)).set(i.array),i.array=_),i.array[i.pos++]=c),null!=this.tangents&&(c=(_=this.tangents[u]).x,i.pos==i.array.length&&((o=i.array.length<<1)<128&&(o=128),(o=new Float32Array(o)).set(i.array),i.array=o),i.array[i.pos++]=c,o=_.y,i.pos==i.array.length&&((c=i.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(i.array),i.array=c),i.array[i.pos++]=o,c=_.z,i.pos==i.array.length&&((_=i.array.length<<1)<128&&(_=128),(_=new Float32Array(_)).set(i.array),i.array=_),i.array[i.pos++]=c),null!=this.uvs&&(c=(_=this.uvs[u]).u,i.pos==i.array.length&&((h=i.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(i.array),i.array=h),i.array[i.pos++]=c,h=_.v,i.pos==i.array.length&&((c=i.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(i.array),i.array=_),i.array[i.pos++]=h),null!=this.colors&&(_=(c=this.colors[u]).x,i.pos==i.array.length&&((u=i.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(i.array),i.array=u),i.array[i.pos++]=_,u=c.y,i.pos==i.array.length&&((_=i.array.length<<1)<128&&(_=128),(_=new Float32Array(_)).set(i.array),i.array=_),i.array[i.pos++]=u,_=c.z,i.pos==i.array.length&&((u=i.array.length<<1)<128&&(u=128),(c=new Float32Array(u)).set(i.array),i.array=c),i.array[i.pos++]=_)}for(var p=[],a=(null==this.idx&&p.push(so.Triangles),null!=this.normals&&null==this.tangents||p.push(so.RawFormat),this.buffer=io.ofFloats(i,e,p),0),r=n.length;a<r;){var f=a++;this.addBuffer(n[f],this.buffer,s[f])}null!=this.idx&&(this.indexes=Kt.alloc(this.idx))},translate:function(t,e,n){this.translatedX+=t,this.translatedY+=e,this.translatedZ+=n;for(var s=0,i=this.points;s<i.length;){var a=i[s];++s,a.x+=t,a.y+=e,a.z+=n}},addNormals:function(){this.normals=[];for(var t=0,e=this.points.length;t<e;)this.normals[t++]=new ae;for(var n=0,t=0,e=this.triCount();t<e;){++t,a=null==this.idx?(s=++n-1,i=++n-1,++n-1):(s=this.idx[n++],i=this.idx[n++],this.idx[n++]);var s,i,a,r=this.points[s],l=this.points[i],o=this.points[a],h=l.x-r.x,u=l.y-r.y,l=l.z-r.z,h=h=null==h?0:h,u=u=null==u?0:u,l=l=null==l?0:l,_=o.x-r.x,c=o.y-r.y,o=o.z-r.z,r=(_=null==_?0:_,u*(o=null==o?0:o)-l*(c=null==c?0:c)),l=l*_-h*o,o=h*c-u*_,h=r=null==r?0:r,c=l=null==l?0:l,u=o=null==o?0:o;this.normals[s].x+=h,this.normals[s].y+=c,this.normals[s].z+=u,this.normals[i].x+=h,this.normals[i].y+=c,this.normals[i].z+=u,this.normals[a].x+=h,this.normals[a].y+=c,this.normals[a].z+=u}for(t=0,e=this.normals;t<e.length;){var d=e[t];++t;var p=(p=d.x*d.x+d.y*d.y+d.z*d.z)<1e-10?0:1/Math.sqrt(p);d.x*=p,d.y*=p,d.z*=p}},addTangents:function(){null==this.normals&&this.addNormals(),null==this.uvs&&this.addUVs(),this.tangents=[];for(var t=0,e=this.points.length;t<e;)this.tangents[t++]=new ae;for(var n=0,t=0,e=this.triCount();t<e;){++t,a=null==this.idx?(s=++n-1,i=++n-1,++n-1):(s=this.idx[n++],i=this.idx[n++],this.idx[n++]);var s,i,a,r=this.points[s],l=this.points[i],o=this.points[a],h=this.uvs[s],u=this.normals[s],_=l.x-r.x,c=l.y-r.y,l=l.z-r.z,_=_=null==_?0:_,c=c=null==c?0:c,l=l=null==l?0:l,d=o.x-r.x,p=o.y-r.y,o=o.z-r.z,r=d=null==d?0:d,d=p=null==p?0:p,p=o=null==o?0:o,o=this.uvs[a].v-h.v,o=(_*=o,c*=o,l*=o,this.uvs[i].v-h.v),f=new ae(_-(r*=o),c-(d*=o),l-(p*=o)),h=u.y*f.z-u.z*f.y,_=u.z*f.x-u.x*f.z,r=u.x*f.y-u.y*f.x,c=h=null==h?0:h,d=_=null==_?0:_,l=r=null==r?0:r;c*=g=(g=c*c+d*d+l*l)<1e-10?0:1/Math.sqrt(g),l*=g;o=(o=(f=new ae((d*=g)*u.z-l*u.y,l*u.x-c*u.z,c*u.y-d*u.x)).x*f.x+f.y*f.y+f.z*f.z)<1e-10?0:1/Math.sqrt(o);f.x*=o,f.y*=o,f.z*=o,this.tangents[s].x+=f.x,this.tangents[s].y+=f.y,this.tangents[s].z+=f.z,this.tangents[i].x+=f.x,this.tangents[i].y+=f.y,this.tangents[i].z+=f.z,this.tangents[a].x+=f.x,this.tangents[a].y+=f.y,this.tangents[a].z+=f.z}for(t=0,e=this.tangents;t<e.length;){var g,f=e[t];++t,g=(g=f.x*f.x+f.y*f.y+f.z*f.z)<1e-10?0:1/Math.sqrt(g),f.x*=g,f.y*=g,f.z*=g}},addUVs:function(){this.uvs=[];for(var t=0,e=this.points.length;t<e;){var n=t++;this.uvs[n]=new Go(this.points[n].x,this.points[n].y)}},triCount:function(){var t=Re.prototype.triCount.call(this);return 0!=t?t:(null==this.idx?this.points:this.idx).length/3|0},render:function(t){null!=this.buffer&&null!=(e=this.buffer).buffer&&null!=e.buffer.vbuf||this.alloc(t);var e=this.getBuffers(t);null!=this.indexes?t.renderMultiBuffers(e,this.indexes):0!=(4&this.buffer.flags)?t.renderMultiBuffers(e,t.mem.quadIndexes,0,this.triCount()):t.renderMultiBuffers(e,t.mem.triIndexes,0,this.triCount())},__class__:Ve}),(e["h3d.prim.HMDModel"]=Qe).__name__="h3d.prim.HMDModel",Qe.__super__=Re,Qe.prototype=t(Re.prototype,{triCount:function(){return this.data.get_indexCount()/3|0},getBounds:function(){return this.data.bounds},selectMaterial:function(t){this.curMaterial=t},loadSkin:function(t){this.lib.loadSkin(this.data,t)},alloc:function(t){this.dispose(),this.buffer=new io(this.data.vertexCount,this.data.vertexStride,[so.LargeBuffer]);for(var e=this.lib.resource.entry,n=e.fetchBytes(this.dataPosition+this.data.vertexPosition,this.data.vertexCount*this.data.vertexStride*4),s=(this.buffer.uploadBytes(n,0,this.data.vertexCount),this.indexCount=0,this.indexesTriPos=[],0),i=this.data.indexCounts;s<i.length;){var a=i[s++];this.indexesTriPos.push(this.indexCount/3|0),this.indexCount+=a}for(var r=65536<this.data.vertexCount,n=(this.indexes=new Kt(this.indexCount,r),e.fetchBytes(this.dataPosition+this.data.indexPosition,(r?4:2)*this.indexCount)),l=(this.indexes.uploadBytes(n,0,this.indexCount),0),s=0,i=this.data.vertexFormat;s<i.length;){var o=i[s];++s,this.addBuffer(o.name,this.buffer,l),l+=7&o.format}null!=this.normalsRecomputed&&this.recomputeNormals(this.normalsRecomputed);for(var h=Object.keys(this.bufferAliases.h),u=h.length,_=0;_<u;)this.allocAlias(h[_++])},allocAlias:function(t){var e=this.bufferAliases.h[t],n=this.bufferCache,s=Nc.allocID(e.realName),n=n.h[s];if(null==n)throw tr.thrown("Buffer "+e.realName+" not found for alias "+t);if(n.offset+e.offset>n.buffer.buffer.stride)throw tr.thrown("Alias "+t+" for buffer "+e.realName+" outside stride");this.addBuffer(t,n.buffer,n.offset+e.offset)},recomputeNormals:function(t){for(var e=0,n=this.data.vertexFormat;e<n.length;)if(n[e++].name==t)return;null==t&&(t="normal");for(var s=this.lib.getBuffers(this.data,[new lc("position",3)]),i=[],a=[],r={},e=0,n=this.data.vertexCount;e<n;){var l=e++,o=!1,h=s.vertexes[3*l],u=s.vertexes[3*l+1],_=s.vertexes[3*l+2],l=10.01*(h+u+_)|0,c=r[l];if(null==c)r[l]=c=[];else for(var d=0;d<c.length;){var p=c[d],f=(++d,a[p]);if(f.x==h&&f.y==u&&f.z==_){i.push(p),o=!0;break}}o||(i.push(a.length),c.push(a.length),a.push(new ae(h,u,_)))}for(p=new Array(0),e=0,n=s.indexes;e<n.length;)p.push(i[n[e++]]);for(var g,m=new Ve(a,p),A=(m.addNormals(),U_._new(0)),x=3*this.data.vertexCount,e=A.pos;e<x;)++e,A.pos==A.array.length&&((g=A.array.length<<1)<128&&(g=128),(g=new Float32Array(g)).set(A.array),A.array=g),A.array[A.pos++]=0;for(var b=0,e=0,n=this.data.vertexCount;e<n;){var y=m.normals[i[e++]];A.array[b++]=y.x,A.array[b++]=y.y,A.array[b++]=y.z}this.addBuffer(t,io.ofFloats(A,3),0),this.normalsRecomputed=t},addTangents:function(){for(var t=this.lib.getBuffers(this.data,[new lc("position",3)]),e=[],n=[],s=0,i=this.data.vertexCount;s<i;){for(var a=s++,r=!1,l=t.vertexes[3*a],o=t.vertexes[3*a+1],h=t.vertexes[3*a+2],u=0,_=n.length;u<_;){var c=u++,d=n[c];if(d.x==l&&d.y==o&&d.z==h){e.push(c),r=!0;break}}r||(e.push(n.length),n.push(new ae(l,o,h)))}for(var p=new Array(0),s=0,i=t.indexes;s<i.length;)p.push(e[i[s++]]);for(var f,g=new Ve(n,p),m=(g.addNormals(),g.addTangents(),U_._new(0)),A=3*this.data.vertexCount,s=m.pos;s<A;)++s,m.pos==m.array.length&&((f=m.array.length<<1)<128&&(f=128),(f=new Float32Array(f)).set(m.array),m.array=f),m.array[m.pos++]=0;for(var x=0,s=0,i=this.data.vertexCount;s<i;){var b=g.tangents[e[s++]];m.array[x++]=b.x,m.array[x++]=b.y,m.array[x++]=b.z}this.addBuffer("tangent",io.ofFloats(m,3),0)},render:function(t){this.curMaterial<0?Re.prototype.render.call(this,t):(null!=this.indexes&&!this.indexes.isDisposed()||this.alloc(t),t.renderMultiBuffers(this.getBuffers(t),this.indexes,this.indexesTriPos[this.curMaterial],this.data.indexCounts[this.curMaterial]/3|0),this.curMaterial=-1)},__class__:Qe}),function(){Re.call(this),this.bounds=new oo;var t=this.bounds;0<t.xMin&&(t.xMin=0),t.xMax<0&&(t.xMax=0),0<t.yMin&&(t.yMin=0),t.yMax<0&&(t.yMax=0),0<t.zMin&&(t.zMin=0),t.zMax<0&&(t.zMax=0),this.tmpBounds=new oo}),Uo=((e["h3d.prim.Instanced"]=Lo).__name__="h3d.prim.Instanced",Lo.__super__=Re,Lo.prototype=t(Re.prototype,{setMesh:function(t){0<this.refCount&&(null!=this.primitive&&this.primitive.decref(),t.incref()),this.primitive=t;for(var e,n=ao.CURRENT,s=((null==t.buffer||null==(e=t.buffer).buffer||null==e.buffer.vbuf)&&t.alloc(n),this.buffer=t.buffer,this.indexes=t.indexes,this.baseBounds=t.getBounds(),null==this.indexes&&(this.indexes=n.mem.triIndexes),t.bufferCache.keys());s.hasNext();){var i=s.next(),a=t.bufferCache.h[i];this.addBuffer(Nc.getIDName(i),a.buffer,a.offset)}},dispose:function(){},incref:function(){0==this.refCount&&null!=this.primitive&&this.primitive.incref(),Re.prototype.incref.call(this)},decref:function(){Re.prototype.decref.call(this),0==this.refCount&&null!=this.primitive&&this.primitive.decref()},getBounds:function(){return this.bounds},addBuffer:function(t,e,n){Re.prototype.addBuffer.call(this,t,e,n=null==n?0:n)},render:function(t){var e=this.buffer;null!=e.buffer&&null!=e.buffer.vbuf||this.setMesh(this.primitive),t.renderInstanced(this.getBuffers(t),this.indexes,this.commands)},__class__:Lo}),function(){St.call(this)}),No=((e["h3d.prim.Plane2D"]=Uo).__name__="h3d.prim.Plane2D",Uo.get=function(){var t=ao.CURRENT,e=t.resCache.h[Uo.__id__];return null==e&&(e=new Uo,t.resCache.set(Uo,e)),e},Uo.__super__=St,Uo.prototype=t(St.prototype,{triCount:function(){return 2},alloc:function(t){var e,n,s=U_._new(0);s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=-1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=-1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=0,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=-1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=0,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=0,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=-1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=1,s.pos==s.array.length&&((e=s.array.length<<1)<128&&(e=128),(n=new Float32Array(e)).set(s.array),s.array=n),s.array[s.pos++]=0,this.buffer=io.ofFloats(s,4,[so.Quads,so.RawFormat])},render:function(t){var e;null!=this.buffer&&null!=(e=this.buffer).buffer&&null!=e.buffer.vbuf||this.alloc(t),t.renderBuffer(this.buffer,t.mem.quadIndexes,2,0,-1)},__class__:Uo}),function(t,e){null==e&&(e=!1),St.call(this),this.onContextLost=function(){return t},this.bounds=t.bounds,this.alloc(null),e||(this.onContextLost=null)}),Go=((e["h3d.prim.RawPrimitive"]=No).__name__="h3d.prim.RawPrimitive",No.__super__=St,No.prototype=t(St.prototype,{alloc:function(t){if(null==this.onContextLost)throw tr.thrown("Cannot realloc "+Ja.string(this));var e=this.onContextLost(),n=[];null==e.ibuf&&n.push(e.quads?so.Quads:so.Triangles),e.stride<8&&n.push(so.RawFormat),this.buffer=io.ofFloats(e.vbuf,e.stride,n),this.vcount=this.buffer.vertices,this.tcount=null!=e.ibuf?e.ibuf.length/3|0:e.quads?this.vcount>>1:this.vcount/3|0,null!=e.ibuf?this.indexes=Kt.alloc(e.ibuf):null!=this.indexes&&(this.indexes.dispose(),this.indexes=null)},getBounds:function(){if(null==this.bounds)throw tr.thrown("Bounds not defined for "+Ja.string(this));return this.bounds},triCount:function(){return this.tcount},__class__:No}),function(t,e){this.u=t,this.v=e}),Xo=((e["h3d.prim.UV"]=Go).__name__="h3d.prim.UV",Go.prototype={__class__:Go},function(t,e,n){_o.call(this,n),this.set_primitive(t),null==e&&(e=Io.current.createMaterial()).set_props(e.getDefaultProps()),this.material=e}),Yo=((e["h3d.scene.Mesh"]=Xo).__name__="h3d.scene.Mesh",Xo.__super__=_o,Xo.prototype=t(_o.prototype,{getBoundsRec:function(t){var e,n;return t=_o.prototype.getBoundsRec.call(this,t),null!=this.primitive&&0==(512&this.flags)&&(e=this.primitive.getBounds(),(n=new oo).xMin=e.xMin,n.xMax=e.xMax,n.yMin=e.yMin,n.yMax=e.yMax,n.zMin=e.zMin,n.zMax=e.zMax,n.transform(this.absPos),n.xMin<t.xMin&&(t.xMin=n.xMin),n.xMax>t.xMax&&(t.xMax=n.xMax),n.yMin<t.yMin&&(t.yMin=n.yMin),n.yMax>t.yMax&&(t.yMax=n.yMax),n.zMin<t.zMin&&(t.zMin=n.zMin),n.zMax>t.zMax)&&(t.zMax=n.zMax),t},clone:function(t){t=null==t?new Xo(null,this.material):t;return t.set_primitive(this.primitive),t.material=this.material.clone(),_o.prototype.clone.call(this,t),t},draw:function(t){this.primitive.render(t.engine)},emit:function(t){for(var e=this.material.passes;null!=e;)t.emitPass(e,this).index=0,e=e.nextPass},getMaterials:function(t,e){return null==e&&(e=!0),null==t&&(t=[]),null!=this.material&&t.indexOf(this.material)<0&&t.push(this.material),_o.prototype.getMaterials.call(this,t,e)},onAdd:function(){_o.prototype.onAdd.call(this),null!=this.primitive&&this.primitive.incref()},onRemove:function(){null!=this.primitive&&this.primitive.decref(),_o.prototype.onRemove.call(this)},set_primitive:function(t){return t!=this.primitive&&0!=(32&this.flags)&&(null!=this.primitive&&this.primitive.decref(),null!=t)&&t.incref(),this.primitive=t},__class__:Xo,__properties__:t(_o.prototype.__properties__,{set_primitive:"set_primitive"})}),(e["h3d.scene.Graphics"]=Oe).__name__="h3d.scene.Graphics",Oe.__super__=Xo,Oe.prototype=t(Xo.prototype,{getBoundsRec:function(t){return Xo.prototype.getBoundsRec.call(this,t)},onRemove:function(){Xo.prototype.onRemove.call(this),this.bprim.clear()},flushLine:function(){for(var t,e=this.tmpPoints,n=e.length-1,s=e[n],i=e[0],a=i.x==s.x&&i.y==s.y&&i.z==s.z,r=e.length,l=(a?i!=s&&(--r,s=e[--n]):(null==(t=e[n-1])&&(t=i),e.push(new Yo(2*s.x-t.x,2*s.y-t.y,2*s.z-t.z,0,0,0,0)),null==(t=e[1])&&(t=i),s=new Yo(2*i.x-t.x,2*i.y-t.y,2*i.z-t.z,0,0,0,0)),this.bprim.vertexCount()),o=l,h=0,u=0,_=r;u<_;){var c=u++,d=e[(1+c)%e.length],p=s.y-i.y,f=i.x-s.x,g=1/Math.sqrt(p*p+f*f),m=i.y-d.y,A=d.x-i.x,x=1/Math.sqrt(m*m+A*A),m=p*g+m*x,A=f*g+A*x,x=1/Math.sqrt(m*m+A*A),x=(m*=x,A*=x,.5*this.lineSize/(m*p*g+A*f*g)),p=(m*=x,A*=x,c<r-1||a),f=(this.bprim.begin(2,p?6:0),this.bprim),g=(f.tmpBuf.array[f.bufPos++]=i.x+m,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=i.y+A,this.bprim),f=(x.tmpBuf.array[x.bufPos++]=i.z,this.bprim),g=(f.tmpBuf.array[f.bufPos++]=0,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=0,this.bprim),f=(x.tmpBuf.array[x.bufPos++]=1,this.bprim),g=(f.tmpBuf.array[f.bufPos++]=0,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=h,this.bprim),f=(x.tmpBuf.array[x.bufPos++]=i.r,this.bprim),g=(f.tmpBuf.array[f.bufPos++]=i.g,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=i.b,this.bprim),f=(x.tmpBuf.array[x.bufPos++]=i.a,this.bprim),g=(f.tmpBuf.array[f.bufPos++]=i.x-m,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=i.y-A,this.bprim),f=(x.tmpBuf.array[x.bufPos++]=i.z,this.bprim),m=(f.tmpBuf.array[f.bufPos++]=0,this.bprim),g=(m.tmpBuf.array[m.bufPos++]=0,this.bprim),A=(g.tmpBuf.array[g.bufPos++]=1,this.bprim),x=(A.tmpBuf.array[A.bufPos++]=1,this.bprim),f=(x.tmpBuf.array[x.bufPos++]=h,this.bprim),m=(f.tmpBuf.array[f.bufPos++]=i.r,this.bprim),g=(m.tmpBuf.array[m.bufPos++]=i.g,this.bprim),A=(g.tmpBuf.array[g.bufPos++]=i.b,this.bprim);A.tmpBuf.array[A.bufPos++]=i.a,h=1-h,p&&(x=c==n?l-o:2,(f=this.bprim).tmpIdx[f.idxPos++]=f.startIndex,(m=this.bprim).tmpIdx[m.idxPos++]=1+m.startIndex,(g=this.bprim).tmpIdx[g.idxPos++]=x+g.startIndex,(A=this.bprim).tmpIdx[A.idxPos++]=x+A.startIndex,(p=this.bprim).tmpIdx[p.idxPos++]=1+p.startIndex,(c=this.bprim).tmpIdx[c.idxPos++]=1+x+c.startIndex),o+=2,s=i,i=d}},flush:function(){0!=this.tmpPoints.length&&this.is3D&&(this.flushLine(),this.tmpPoints=[])},sync:function(t){Xo.prototype.sync.call(this,t),this.flush(),this.bprim.flush()},draw:function(t){this.flush(),this.bprim.flush(),Xo.prototype.draw.call(this,t)},clear:function(){this.flush(),this.bprim.clear()},lineStyle:function(t,e,n){null==n&&(n=1),null==e&&(e=0),null==t&&(t=0),this.flush(),0<t&&this.lineSize!=t&&(this.lineSize=t,this.is3D||(this.lineShader.width__=this.lineSize)),this.setColor(e,n)},setColor:function(t,e){this.curA=e=null==e?1:e,this.curR=(t>>16&255)/255,this.curG=(t>>8&255)/255,this.curB=(255&t)/255},moveTo:function(t,e,n){this.is3D?(this.flush(),this.lineTo(t,e,n)):(this.curX=t,this.curY=e,this.curZ=n)},lineTo:function(t,e,n){if(this.is3D)r=this.curX,l=this.curY,o=this.curZ,r<(h=this.bprim.bounds).xMin&&(h.xMin=r),r>h.xMax&&(h.xMax=r),l<h.yMin&&(h.yMin=l),l>h.yMax&&(h.yMax=l),o<h.zMin&&(h.zMin=o),o>h.zMax&&(h.zMax=o),t<(h=this.bprim.bounds).xMin&&(h.xMin=t),t>h.xMax&&(h.xMax=t),e<h.yMin&&(h.yMin=e),e>h.yMax&&(h.yMax=e),n<h.zMin&&(h.zMin=n),n>h.zMax&&(h.zMax=n),this.tmpPoints.push(new Yo(t,e,n,this.curR,this.curG,this.curB,this.curA));else{this.bprim.begin(4,6);{var s=t-this.curX,i=e-this.curY,a=n-this.curZ,r=this.curX,l=this.curY,o=this.curZ,h=this.bprim.bounds,h=(r<h.xMin&&(h.xMin=r),r>h.xMax&&(h.xMax=r),l<h.yMin&&(h.yMin=l),l>h.yMax&&(h.yMax=l),o<h.zMin&&(h.zMin=o),o>h.zMax&&(h.zMax=o),this.bprim.bounds),h=(t<h.xMin&&(h.xMin=t),t>h.xMax&&(h.xMax=t),e<h.yMin&&(h.yMin=e),e>h.yMax&&(h.yMax=e),n<h.zMin&&(h.zMin=n),n>h.zMax&&(h.zMax=n),this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curX,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curY,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curZ,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=s,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=i,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=a,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=0,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=0,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curR,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curG,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curB,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curA,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curX,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curY,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curZ,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=s,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=i,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=a,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=0,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=1,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curR,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curG,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curB,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curA,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curX,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curY,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curZ,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=s,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=i,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=a,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=1,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=0,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curR,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curG,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curB,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curA,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curX,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curY,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=this.curZ,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=s,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=i,this.bprim),h=(h.tmpBuf.array[h.bufPos++]=a,this.bprim);h.tmpBuf.array[h.bufPos++]=1}(h=this.bprim).tmpBuf.array[h.bufPos++]=1,(h=this.bprim).tmpBuf.array[h.bufPos++]=this.curR,(h=this.bprim).tmpBuf.array[h.bufPos++]=this.curG,(h=this.bprim).tmpBuf.array[h.bufPos++]=this.curB,(h=this.bprim).tmpBuf.array[h.bufPos++]=this.curA,(h=this.bprim).tmpIdx[h.idxPos++]=h.startIndex,(h=this.bprim).tmpIdx[h.idxPos++]=1+h.startIndex,(h=this.bprim).tmpIdx[h.idxPos++]=2+h.startIndex,(h=this.bprim).tmpIdx[h.idxPos++]=2+h.startIndex,(h=this.bprim).tmpIdx[h.idxPos++]=3+h.startIndex,(h=this.bprim).tmpIdx[h.idxPos++]=1+h.startIndex,this.curX=t,this.curY=e,this.curZ=n}},__class__:Oe}),function(t,e,n,s,i,a,r){this.x=t,this.y=e,this.z=n,this.r=s,this.g=i,this.b=a,this.a=r}),Wo=((e["h3d.scene._Graphics.GPoint"]=Yo).__name__="h3d.scene._Graphics.GPoint",Yo.prototype={__class__:Yo},(e["h3d.scene.Interactive"]=Le).__name__="h3d.scene.Interactive",Le.__interfaces__=[It],Le.__super__=_o,Le.prototype=t(_o.prototype,{onAdd:function(){this.scene=this.getScene(),null!=this.scene&&this.scene.addEventTarget(this),_o.prototype.onAdd.call(this)},onRemove:function(){null!=this.scene&&(this.scene.removeEventTarget(this),this.scene=null),_o.prototype.onRemove.call(this)},getInteractiveScene:function(){return this.scene},handleEvent:function(t){switch(this.propagateEvents&&(t.propagate=!0),this.cancelEvents&&(t.cancel=!0),t.kind._hx_index){case 0:(this.enableRightButton||0==t.button)&&(this.mouseDownButton=t.button,this.onPush(t),t.cancel)&&(this.mouseDownButton=-1);break;case 1:var e;!this.enableRightButton&&0!=t.button||(this.onRelease(t),e=K_.frameCount,this.mouseDownButton!=t.button)||this.lastClickFrame==e&&!this.allowMultiClick||(this.onClick(t),this.lastClickFrame=e),this.mouseDownButton=-1;break;case 2:this.onMove(t);break;case 3:this.onOver(t);break;case 4:this.onOut(t);break;case 5:this.onWheel(t);break;case 6:this.onFocus(t);break;case 7:this.onFocusLost(t);break;case 8:this.onKeyDown(t);break;case 9:this.onKeyUp(t);break;case 10:!this.enableRightButton&&0!=t.button||(this.onRelease(t),this.mouseDownButton!=t.button)||this.onReleaseOutside(t),this.mouseDownButton=-1;break;case 11:this.onTextInput(t);break;case 12:this.onCheck(t)}},set_cursor:function(t){return this.cursor=t,null!=this.scene&&null!=this.scene.events&&this.scene.events.updateCursor(this),t},onOver:function(t){},onOut:function(t){},onPush:function(t){},onRelease:function(t){},onReleaseOutside:function(t){},onClick:function(t){},onMove:function(t){},onWheel:function(t){},onFocus:function(t){},onFocusLost:function(t){},onKeyUp:function(t){},onKeyDown:function(t){},onCheck:function(t){},onTextInput:function(t){},__class__:Le,__properties__:t(_o.prototype.__properties__,{set_cursor:"set_cursor"})}),(e["h3d.scene.Light"]=Ue).__name__="h3d.scene.Light",Ue.__super__=_o,Ue.prototype=t(_o.prototype,{emit:function(t){t.emitLight(this)},getShadowDirection:function(){return null},__class__:Ue}),(e["h3d.scene.LightSystem"]=Ne).__name__="h3d.scene.LightSystem",Ne.prototype={initGlobals:function(t){},initLights:function(t){if(this.ctx=t,null==this.shadowLight||0==(32&this.shadowLight.flags))for(var e=t.lights;null!=e;){if(null!=e.getShadowDirection()){this.shadowLight=e;break}e=e.next}},computeLight:function(t,e){return e},dispose:function(){},__class__:Ne},(e["h3d.scene.MultiMaterial"]=Ge).__name__="h3d.scene.MultiMaterial",Ge.__super__=Xo,Ge.prototype=t(Xo.prototype,{clone:function(t){for(var e=null==t?new Ge(null,this.materials):t,n=(e.materials=[],0),s=this.materials;n<s.length;){var i=s[n];++n,e.materials.push(null==i?null:i.clone())}return Xo.prototype.clone.call(this,e),e.material=e.materials[0],e},emit:function(t){for(var e=0,n=this.materials.length;e<n;){var s=e++,i=this.materials[s];if(null!=i)for(var a=s,r=(null==s&&(a=0),i.passes);null!=r;)t.emitPass(r,this).index=a,r=r.nextPass}},getMaterials:function(t,e){null==e&&(e=!0),null==t&&(t=[]);for(var n=0,s=this.materials;n<s.length;){var i=s[n];++n,null!=i&&t.indexOf(i)<0&&t.push(i)}if(e)for(n=0,s=this.children;n<s.length;)s[n++].getMaterials(t);return t},draw:function(t){1<this.materials.length&&this.primitive.selectMaterial(t.drawPass.index),Xo.prototype.draw.call(this,t)},__class__:Ge}),(e["h3d.scene._RenderContext.SharedGlobal"]=Xe).__name__="h3d.scene._RenderContext.SharedGlobal",Xe.prototype={__class__:Xe},(e["h3d.scene.RenderContext"]=Ye).__name__="h3d.scene.RenderContext",Ye.__super__=Ft,Ye.prototype=t(Ft.prototype,{start:function(){this.sharedGlobals=[],this.lights=null,this.drawPass=null,this.passes=[],this.lights=null,this.cachedPos=0,this.visibleFlag=!0,this.time+=this.elapsedTime,this.frame++},setGlobalID:function(t,e){for(var n=0,s=this.sharedGlobals;n<s.length;){var i=s[n];if(++n,i.gid==t)return void(i.value=e)}this.sharedGlobals.push(new Xe(t,e))},emitPass:function(t,e){var n=this.allocPool;return null==n?((n=new Pe).nextAlloc=this.allocFirst,this.allocFirst=n):this.allocPool=n.nextAlloc,n.pass=t,n.obj=e,this.passes.length<=t.passId&&(this.passes.length=t.passId),n.next=this.passes[t.passId],this.passes[t.passId]=n},allocShaderList:function(t,e){var n=this.cachedShaderList[this.cachedPos++];return null==n&&(n=new Jc(null),this.cachedShaderList[this.cachedPos-1]=n),n.s=t,n.next=e,n},emitLight:function(t){t.next=this.lights,this.lights=t},uploadParams:function(){this.currentManager.fillParams(this.shaderBuffers,this.drawPass.shader,this.drawPass.shaders),this.engine.uploadShaderBuffers(this.shaderBuffers,1),this.engine.uploadShaderBuffers(this.shaderBuffers,2),this.engine.uploadShaderBuffers(this.shaderBuffers,3)},done:function(){this.drawPass=null;for(var t=this.allocFirst;null!=t&&t!=this.allocPool;)t.obj=null,t.pass=null,t.shader=null,t.shaders=null,t.next=null,t.index=0,t.texture=0,t=t.nextAlloc;null!=this.allocPool&&(this.allocFirst=this.allocFirst.nextAlloc),this.allocPool=this.allocFirst;for(var e=0,n=this.cachedShaderList;e<n.length;){var s=n[e];++e,s.s=null,s.next=null}this.passes=[],this.lights=null},__class__:Ye}),(e["h3d.scene.PassObjects"]=We).__name__="h3d.scene.PassObjects",We.prototype={__class__:We},(e["h3d.scene.Renderer"]=je).__name__="h3d.scene.Renderer",je.__super__=ge,je.prototype=t(ge.prototype,{dispose:function(){for(var t=0,e=this.allPasses;t<e.length;)e[t++].dispose();for(t=0,e=this.effects;t<e.length;)e[t++].dispose();null!=this.ctx.lightSystem&&this.ctx.lightSystem.dispose(),this.passObjects=new N},depthSort:function(t,e){for(var n,s=this.ctx.camera.m,i=e.current;null!=i;){var a=i,i=i.next;a.depth=(a.obj.absPos._41*s._13+a.obj.absPos._42*s._23+a.obj.absPos._43*s._33+s._43)/(a.obj.absPos._41*s._14+a.obj.absPos._42*s._24+a.obj.absPos._43*s._34+s._44)}if(t)if(null==(n=e.current))a=null;else{for(var r=1,l=0,o=0;;){for(c=n,f=n=null,_=0;null!=c;){++_,d=c;for(var h=l=0,u=r;h<u&&(++h,++l,null!=(d=d.next)););for(o=r;0<l||0<o&&null!=d;)0!=l&&(0==o||null==d||(c.pass.layer==d.pass.layer?c.depth>d.depth?1:-1:c.pass.layer-d.pass.layer)<=0)?(c=(p=c).next,--l):(d=(p=d).next,--o),null!=f?f.next=p:n=p,f=p;c=d}if(f.next=null,_<=1)break;r*=2}a=n}else if(null==(n=e.current))a=null;else{for(var _,c,d,p,f,r=1,l=0,o=0;;){for(c=n,f=n=null,_=0;null!=c;){++_,d=c;for(h=l=0,u=r;h<u&&(++h,++l,null!=(d=d.next)););for(o=r;0<l||0<o&&null!=d;)0!=l&&(0==o||null==d||(c.pass.layer==d.pass.layer?c.depth>d.depth?-1:1:c.pass.layer-d.pass.layer)<=0)?(c=(p=c).next,--l):(d=(p=d).next,--o),null!=f?f.next=p:n=p,f=p;c=d}if(f.next=null,_<=1)break;r*=2}a=n}e.current=a},resetTarget:function(){this.hasSetTarget&&(this.ctx.engine.popTarget(),this.hasSetTarget=!1)},has:function(t){return null!=this.passObjects.h[t]},get:function(t){t=this.passObjects.h[t];return null==t?this.emptyPasses:(t.rendered=!0,t.passes)},render:function(){throw tr.thrown("Not implemented")},computeStatic:function(){throw tr.thrown("Not implemented")},start:function(){},process:function(t){this.hasSetTarget=!1;for(var e=0,n=this.allPasses;e<n.length;)n[e++].setContext(this.ctx);for(e=0;e<t.length;){var s=t[e];++e,this.passObjects.h[s.name]=s}this.ctx.textures.begin(),this.ctx.computingStatic?this.computeStatic():this.render(),this.resetTarget();for(e=0;e<t.length;)this.passObjects.h[t[e++].name]=null},__class__:je}),function(t,e){null==e&&(e=!0),null==t&&(t=!0),_o.call(this,null),this.window=J_.getInstance(),this.eventListeners=[],this.hitInteractives=[],this.interactives=[],this.camera=new Zt;var n=ao.CURRENT;null!=n&&(this.camera.screenRatio=n.width/n.height),this.ctx=new Ye,t&&this.set_renderer(Io.current.createRenderer()),e&&(this.lightSystem=Io.current.createLightSystem())}),jo=((e["h3d.scene.Scene"]=Wo).__name__="h3d.scene.Scene",Wo.__interfaces__=[Zl,G],Wo.__super__=_o,Wo.prototype=t(_o.prototype,{setEvents:function(t){this.events=t},dispatchListeners:function(t){for(var e=0,n=this.eventListeners;e<n.length&&(n[e++](t),t.propagate););},set_renderer:function(t){return null!=(this.renderer=t)&&(t.ctx=this.ctx),t},sortHitPointByCameraDistance:function(t,e){return t.hitPoint.w>e.hitPoint.w?-1:1},dispatchEvent:function(t,e){e.handleEvent(t)},isInteractiveVisible:function(t){for(var e=t;e!=this;){if(null==e||0==(2&e.flags))return!1;e=e.parent}return!0},handleEvent:function(t,R){if(0!=this.interactives.length){if(0==this.hitInteractives.length){for(var e=2*(t.relX/this.window.get_width()-.5),n=2*-(t.relY/this.window.get_height()-.5),s=this.camera.unproject(e,n,0),e=this.camera.unproject(e,n,1),n=i=null==(i=s.x)?0:i,V=a=null==(a=s.y)?0:a,s=M=null==(M=s.z)?0:M,i=e.x,a=e.y,r=(null==(M=e.z)&&(M=0),null==a&&(a=0),null==i&&(i=0),new ie),l=(r.px=n,r.py=V,r.pz=s,r.lx=i-n,r.ly=a-V,r.lz=M-s,r.normalize(),r.px),o=r.py,h=r.pz,u=r.lx,_=r.ly,c=r.lz,Q=-2147483648,d=0,p=this.interactives;d<p.length;){var f=p[d];if(++d,!(f.priority<Q)){for(var g=f;null!=g&&0!=(2&g.flags);)g=g.parent;if(null==g){var m=f.getInvPos(),i=r.px,A=a=null==(a=r.py)?0:a,x=M=null==(M=r.pz)?0:M,O=(S=i=null==i?0:i)*m._12+A*m._22+x*m._32+m._42,L=S*m._13+A*m._23+x*m._33+m._43,b=(S=S*m._11+A*m._21+x*m._31+m._41,A=O,x=L,r.px=S,r.py=A,r.pz=x,r.lx),y=k=null==(k=r.ly)?0:k,w=B=null==(B=r.lz)?0:B,U=(I=b=null==b?0:b)*m._12+y*m._22+w*m._32,N=I*m._13+y*m._23+w*m._33;if(I=I*m._11+y*m._21+w*m._31,y=U,w=N,r.lx=I,r.ly=y,r.lz=w,r.normalize(),r.lx!=r.lx)r.px=l,r.py=o,r.pz=h,r.lx=u,r.ly=_,r.lz=c;else if((T=f.shape.rayIntersection(r,f.bestMatch))<0)r.px=l,r.py=o,r.pz=h,r.lx=u,r.ly=_,r.lz=c;else{var v=r.px+T*r.lx,C=r.py+T*r.ly;if(null==(F=r.pz+T*r.lz)&&(F=0),null==C&&(C=0),null==v&&(v=0),r.px=l,r.py=o,r.pz=h,r.lx=u,r.ly=_,r.lz=c,f.hitPoint.x=v,f.hitPoint.y=C,f.hitPoint.z=F,f.priority>Q){for(;0<this.hitInteractives.length;)this.hitInteractives.pop();Q=f.priority}this.hitInteractives.push(f)}}}}if(0==this.hitInteractives.length)return null;if(1<this.hitInteractives.length){for(d=0,p=this.hitInteractives;d<p.length;){var M,S,k,B,I,T,F,f=p[d],D=(++d,f.invPos),G=0,D=(null!=f.preciseShape&&(i=r.px,A=a=null==(a=r.py)?0:a,x=M=null==(M=r.pz)?0:M,O=(S=i=null==i?0:i)*D._12+A*D._22+x*D._32+D._42,L=S*D._13+A*D._23+x*D._33+D._43,S=S*D._11+A*D._21+x*D._31+D._41,A=O,x=L,r.px=S,r.py=A,r.pz=x,b=r.lx,y=k=null==(k=r.ly)?0:k,w=B=null==(B=r.lz)?0:B,U=(I=b=null==b?0:b)*D._12+y*D._22+w*D._32,N=I*D._13+y*D._23+w*D._33,I=I*D._11+y*D._21+w*D._31,y=U,w=N,r.lx=I,r.ly=y,r.lz=w,r.normalize(),0<(T=f.preciseShape.rayIntersection(r,f.bestMatch))?(v=r.px+T*r.lx,C=r.py+T*r.ly,null==(F=r.pz+T*r.lz)&&(F=0),null==C&&(C=0),null==v&&(v=0),f.hitPoint.x=v,f.hitPoint.y=C,f.hitPoint.z=F):G=1,r.px=l,r.py=o,r.pz=h,r.lx=u,r.ly=_,r.lz=c),f.hitPoint),E=D.x,P=D.y,z=D.z,D=D.w,E=E=null==E?0:E,P=P=null==P?0:P,z=z=null==z?0:z,D=(D=null==D?1:D,f.absPos),X=E*D._12+P*D._22+z*D._32+ +D._42,Y=E*D._13+P*D._23+z*D._33+ +D._43,E=E*D._11+P*D._21+z*D._31+ +D._41,D=this.camera.m;z=(E*D._13+(P=X)*D._23+Y*D._33+ +D._43)*(1/(E*D._14+P*D._24+Y*D._34+ +D._44)),f.hitPoint.w=z+G}this.hitInteractives.sort(W(this,this.sortHitPointByCameraDistance))}this.hitInteractives.unshift(null)}for(;0<this.hitInteractives.length;){if(null==(f=this.hitInteractives.pop()))return null;if(t.relX=f.hitPoint.x,t.relY=f.hitPoint.y,t.relZ=f.hitPoint.z,f.handleEvent(t),!t.cancel){if(!t.propagate)for(;0<this.hitInteractives.length;)this.hitInteractives.pop();return f}t.cancel=!1,t.propagate=!1}}return null},clone:function(t){t=null==t?new Wo:t;return t.camera=this.camera.clone(),_o.prototype.clone.call(this,t),t},dispose:function(){0!=(32&this.flags)&&this.onRemove(),null!=this.hardwarePass&&(this.hardwarePass.dispose(),this.hardwarePass=null),this.ctx.dispose(),null!=this.renderer&&(this.renderer.dispose(),this.set_renderer(new je))},addEventTarget:function(t){if(0<=this.interactives.indexOf(t))throw tr.thrown("assert");this.interactives.push(t)},removeEventTarget:function(t){Jn.remove(this.interactives,t)&&(null!=this.events&&this.events.onRemove(t),Jn.remove(this.hitInteractives,t))},setElapsedTime:function(t){this.ctx.elapsedTime=t},syncOnly:function(t){var e=ao.CURRENT,t=(this.setElapsedTime(t),e.getCurrentTarget());this.camera.screenRatio=null==t?e.width/e.height:t.width/t.height,this.camera.update(),this.ctx.camera=this.camera,this.ctx.engine=e,(this.ctx.scene=this).ctx.start(),this.syncRec(this.ctx),this.ctx.camera=null,this.ctx.engine=null,this.ctx.scene=null},onContextLost:function(){this.ctx.wasContextLost=!0},render:function(t){0==(32&this.flags)&&this.onAdd();for(var e=t.getCurrentTarget(),n=(this.camera.screenRatio=null==e?t.width/t.height:e.width/e.height,this.camera.update(),this.camera.rightHanded&&t.driver.setRenderFlag(po.CameraHandness,1),this.ctx.camera=this.camera,this.ctx.engine=t,(this.ctx.scene=this).ctx.start(),this.renderer.start(),this.syncRec(this.ctx),this.emitRec(this.ctx),[]),s=-1,i=0,a=this.ctx.passes.length;i<a;){var r,l=this.ctx.passes[i++];null!=l&&(null==(r=this.ctx.cachedPassObjects[++s])&&(r=new We,this.ctx.cachedPassObjects[s]=r),r.name=l.pass.name,(o=r.passes).current=l,o.discarded=o.lastDisc=null,n.push(r))}null!=this.lightSystem&&(this.ctx.lightSystem=this.lightSystem,this.lightSystem.initLights(this.ctx)),this.renderer.process(n),this.camera.rightHanded&&t.driver.setRenderFlag(po.CameraHandness,0),this.ctx.done(),this.ctx.wasContextLost=!1,this.ctx.scene=null,this.ctx.camera=null,this.ctx.engine=null;for(i=0,a=s;i<a;){var o,h=this.ctx.cachedPassObjects[i++];h.name=null,(o=h.passes).current=null,o.discarded=o.lastDisc=null}},__class__:Wo,__properties__:t(_o.prototype.__properties__,{set_renderer:"set_renderer"})}),(e["h3d.scene.Joint"]=He).__name__="h3d.scene.Joint",He.__super__=_o,He.prototype=t(_o.prototype,{getObjectByName:function(t){var e=this.skin.getSkinData(),n=e.namedJoints.h[t];if(null!=n){var s=e.allJoints[this.index];if(s.index!=this.index)throw tr.thrown("assert");for(var i,a=n.parent;null!=a;){if(a==s)return(i=new He(this.skin,n)).parent=this,i;a=a.parent}}return null},syncPos:function(){for(var t=this.parent;null!=t;){if(0!=(1&t.flags)){null==this.skin.jointsAbsPosInv&&(this.skin.jointsAbsPosInv=new ro,this.skin.jointsAbsPosInv.zero()),0==this.skin.jointsAbsPosInv._44&&this.skin.jointsAbsPosInv.inverse3x4(this.parent.absPos),this.parent.syncPos(),this.lastFrame=-1;break}t=t.parent}this.lastFrame!=this.skin.lastFrame&&(this.lastFrame=this.skin.lastFrame,this.absPos.load(this.skin.currentAbsPose[this.index]),null!=this.skin.jointsAbsPosInv)&&0!=this.skin.jointsAbsPosInv._44&&(this.absPos.multiply3x4(this.absPos,this.skin.jointsAbsPosInv),this.absPos.multiply3x4(this.absPos,this.parent.absPos))},__class__:He}),(e["h3d.scene.Skin"]=Ze).__name__="h3d.scene.Skin",Ze.__super__=Ge,Ze.prototype=t(Ge.prototype,{clone:function(t){t=null==t?new Ze(null,this.materials.slice()):t;return Ge.prototype.clone.call(this,t),t.setSkinData(this.skinData),t.currentRelPose=this.currentRelPose.slice(),t},getBoundsRec:function(t){var e=this.primitive;if(this.set_primitive(null),t=Ge.prototype.getBoundsRec.call(this,t),this.set_primitive(e),0==(512&this.flags)){this.syncJoints(),null==this.skinData.vertexWeights&&er.__cast(this.primitive,Qe).loadSkin(this.skinData);var n=this.getAbsPos(),e=0,s=0,i=0,e=Math.sqrt(n._11*n._11+n._12*n._12+n._13*n._13),s=Math.sqrt(n._21*n._21+n._22*n._22+n._23*n._23),i=Math.sqrt(n._31*n._31+n._32*n._32+n._33*n._33);n._11*(n._22*n._33-n._23*n._32)+n._12*(n._23*n._31-n._21*n._33)+n._13*(n._21*n._32-n._22*n._31)<0&&(e*=-1,s*=-1,i*=-1);for(var a=Math.max(Math.max(e,s),i),r=0,l=this.skinData.allJoints;r<l.length;){var o,h,u,_,c,d,p=l[r];++r,p.offsetRay<0||(u=this.currentPalette[p.bindIndex],o=o=null==(o=(n=p.offsets).xMin)?0:o,d=d=null==(d=n.yMin)?0:d,_=_=null==(_=n.zMin)?0:_,null!=u&&(h=o*u._12+d*u._22+_*u._32+u._42,c=o*u._13+d*u._23+_*u._33+u._43,o=o=o*u._11+d*u._21+_*u._31+u._41,h=d=h,d=_=c,o-(c=p.offsetRay*a)<t.xMin&&(t.xMin=o-c),o+c>t.xMax&&(t.xMax=o+c),h-c<t.yMin&&(t.yMin=h-c),h+c>t.yMax&&(t.yMax=h+c),d-c<t.zMin&&(t.zMin=d-c),d+c>t.zMax&&(t.zMax=d+c),o=(_=p.offsets).xMax,d=h=null==(h=_.yMax)?0:h,h=c=null==(c=_.zMax)?0:c,c=(_=o=null==o?0:o)*u._12+d*u._22+h*u._32+u._42,o=_*u._13+d*u._23+h*u._33+u._43,u=_=_*u._11+d*u._21+h*u._31+u._41,_=d=c,c=h=o,u-(d=p.offsetRay*a)<t.xMin&&(t.xMin=u-d),u+d>t.xMax&&(t.xMax=u+d),_-d<t.yMin&&(t.yMin=_-d),_+d>t.yMax&&(t.yMax=_+d),c-d<t.zMin&&(t.zMin=c-d),c+d>t.zMax)&&(t.zMax=c+d))}}return t},getObjectByName:function(t){if(null!=this.skinData&&this.skinData.name==t)return this;var e=Ge.prototype.getObjectByName.call(this,t);if(null!=e)return e;if(null!=this.skinData){e=this.skinData.namedJoints.h[t];if(null!=e)return new He(this,e)}return null},calcAbsPos:function(){Ge.prototype.calcAbsPos.call(this),this.jointsUpdated=!0},getSkinData:function(){return this.skinData},setSkinData:function(t,e){if(null==e&&(e=!0),this.skinData=t,this.jointsUpdated=!0,this.set_primitive(t.primitive),e){for(var n=!1,s=0,i=this.materials;s<i.length;){var a=i[s];if(++s,null!=a&&null!=a.get_normalMap()){n=!0;break}}this.skinShader=new(n?oh:lh);var e=this.skinShader,r=(e.constModified=!0,e.fourBonesByVertex__=4==this.skinData.bonesPerVertex,0);if(null!=this.skinData.splitJoints)for(s=0,i=this.skinData.splitJoints;s<i.length;){t=i[s];++s,t.joints.length>r&&(r=t.joints.length)}else r=this.skinData.boundJoints.length;this.skinShader.MaxBones__<r&&((e=this.skinShader).constModified=!0,e.MaxBones__=r);for(s=0,i=this.materials;s<i.length;){a=i[s];++s,null!=a&&(null!=a.get_normalMap()?a.passes.addShaderAtIndex(this.skinShader,a.passes.getShaderIndex(a.normalShader)+1):a.passes.addShader(this.skinShader),null!=this.skinData.splitJoints)&&a.passes.set_dynamicParameters(!0)}}this.currentRelPose=[],this.currentAbsPose=[],this.currentPalette=[],this.paletteChanged=!0;for(s=0,i=this.skinData.allJoints;s<i.length;)++s,this.currentAbsPose.push(ro.I());for(s=0,i=this.skinData.boundJoints.length;s<i;)++s,this.currentPalette.push(ro.I());if(null!=this.skinData.splitJoints){this.splitPalette=[];for(s=0,i=this.skinData.splitJoints;s<i.length;){for(var l=this.splitPalette,o=[],h=0,u=i[s++].joints;h<u.length;)o.push(this.currentPalette[u[h++].bindIndex]);l.push(o)}}else this.splitPalette=null},sync:function(t){!t.visibleFlag&&0==(64&this.flags)||this.syncJoints()},syncJoints:function(){if(this.jointsUpdated){for(var t=Ze.TMP_MAT,R=0,V=this.skinData.allJoints;R<V.length;){var e,n,s,i,a,r,l,o,h,u,_,c,d,p,f,g,m,A,x,b,y,w,v,C,Q,O,L,U,N,G,X,Y,W,j,M,S,k,B,I,T,F,D,E,P,z=V[R];++R,null==z.follow&&(C=z.index,e=this.currentAbsPose[C],C=this.currentRelPose[C],M=z.bindIndex,null==C?C=z.defMat:z.retargetAnim&&this.enableRetargeting&&(t.load(C),(C=t)._41=z.defMat._41,t._42=z.defMat._42,t._43=z.defMat._43),null==z.parent?(v=this.absPos,n=C._11,s=C._12,i=C._13,a=C._21,r=C._22,l=C._23,o=C._31,h=C._32,u=C._33,m=C._41,x=C._42,y=C._43,_=v._11,p=v._12,A=v._13,c=v._21,f=v._22,b=v._23,d=v._31,g=v._32,w=v._33,e._11=n*_+s*c+i*d,e._12=n*p+s*f+i*g,e._13=n*A+s*b+i*w,e._14=0,e._21=a*_+r*c+l*d,e._22=a*p+r*f+l*g,e._23=a*A+r*b+l*w,e._24=0,e._31=o*_+h*c+u*d,e._32=o*p+h*f+u*g,e._33=o*A+h*b+u*w,e._34=0,e._41=m*_+x*c+y*d+v._41,e._42=m*p+x*f+y*g+v._42,e._43=m*A+x*b+y*w+v._43):(n=this.currentAbsPose[z.parent.index],s=C._11,i=C._12,a=C._13,r=C._21,l=C._22,o=C._23,h=C._31,u=C._32,_=C._33,c=C._41,d=C._42,p=C._43,f=n._11,g=n._12,m=n._13,A=n._21,x=n._22,b=n._23,y=n._31,w=n._32,v=n._33,e._11=s*f+i*A+a*y,e._12=s*g+i*x+a*w,e._13=s*m+i*b+a*v,e._14=0,e._21=r*f+l*A+o*y,e._22=r*g+l*x+o*w,e._23=r*m+l*b+o*v,e._24=0,e._31=h*f+u*A+_*y,e._32=h*g+u*x+_*w,e._33=h*m+u*b+_*v,e._34=0,e._41=c*f+d*A+p*y+n._41,e._42=c*g+d*x+p*w+n._42,e._43=c*m+d*b+p*v+n._43),e._44=1,0<=M)&&(C=this.currentPalette[M],z=(M=z.transPos)._11,Q=M._12,O=M._13,L=M._21,U=M._22,N=M._23,G=M._31,X=M._32,Y=M._33,W=M._41,j=M._42,M=M._43,S=e._11,k=e._12,B=e._13,I=e._21,T=e._22,F=e._23,D=e._31,E=e._32,P=e._33,C._11=z*S+Q*I+O*D,C._12=z*k+Q*T+O*E,C._13=z*B+Q*F+O*P,C._14=0,C._21=L*S+U*I+N*D,C._22=L*k+U*T+N*E,C._23=L*B+U*F+N*P,C._24=0,C._31=G*S+X*I+Y*D,C._32=G*k+X*T+Y*E,C._33=G*B+X*F+Y*P,C._34=0,C._41=W*S+j*I+M*D+e._41,C._42=W*k+j*T+M*E+e._42,C._43=W*B+j*F+M*P+e._43,C._44=1)}this.skinShader.bonesMatrixes__=this.currentPalette,null!=this.jointsAbsPosInv&&(this.jointsAbsPosInv._44=0),this.jointsUpdated=!1}},emit:function(t){if(this.syncJoints(),null==this.splitPalette)Ge.prototype.emit.call(this,t);else for(var e=0,n=this.splitPalette.length;e<n;){var s=e++;if(null!=(h=this.materials[this.skinData.splitJoints[s].material]))for(var i=s,a=(null==s&&(i=0),h.passes);null!=a;)t.emitPass(a,this).index=i,a=a.nextPass}if(this.showJoints){null==this.jointsGraphics&&(this.jointsGraphics=new Oe(this),this.jointsGraphics.material.passes.depth(!1,xo.Always),this.jointsGraphics.material.passes.setPassName("alpha"));for(var r=this;null!=r.parent;)r=r.parent;this.jointsGraphics.set_follow(r);for(var l=this.jointsGraphics,e=(l.clear(),0),n=this.skinData.allJoints;e<n.length;){var o=n[e],h=(++e,this.currentAbsPose[o.index]),u=null==o.parent?this.absPos:this.currentAbsPose[o.parent.index];l.lineStyle(1,null==o.parent?-16776961:-256),l.moveTo(u._41,u._42,u._43),l.lineTo(h._41,h._42,h._43)}}else{var _;null!=this.jointsGraphics&&(null!=(_=this.jointsGraphics)&&null!=_.parent&&_.parent.removeChild(_),this.jointsGraphics=null)}},draw:function(t){var e;null==this.splitPalette?Ge.prototype.draw.call(this,t):(e=t.drawPass.index,this.skinShader.bonesMatrixes__=this.splitPalette[e],this.primitive.selectMaterial(e),t.uploadParams(),this.primitive.render(t.engine))},__class__:Ze}),(e["h3d.scene.fwd.Light"]=qe).__name__="h3d.scene.fwd.Light",qe.__super__=Ue,qe.prototype=t(Ue.prototype,{__class__:qe}),function(){this.perPixelLighting=!0,this.maxLightsPerObject=6,Ne.call(this),this.ambientLight=new R(.5,.5,.5),this.ambientShader=new Zo,this.set_additiveLighting(!0)}),Ho=((e["h3d.scene.fwd.LightSystem"]=jo).__name__="h3d.scene.fwd.LightSystem",jo.__super__=Ne,jo.prototype=t(Ne.prototype,{set_additiveLighting:function(t){var e=this.ambientShader,e=e instanceof Zo?e:null;return e.constModified=!0,e.additive__=t},initLights:function(t){if(this.lightCount=0,this.ctx=t,this.cullLights(),Ne.prototype.initLights.call(this,t),this.lightCount<=this.maxLightsPerObject){var e,n=t.lights,s=W(this,this.sortLight);if(null==n)e=null;else{for(var i,a,r,l,o=1,h=0,u=0;;){for(a=n,l=n=null,i=0;null!=a;){++i;for(var _=a,h=0,c=0,d=o;c<d&&(++c,++h,null!=(_=_.next)););for(u=o;0<h||0<u&&null!=_;)0!=h&&(0==u||null==_||s(a,_)<=0)?(a=(r=a).next,--h):(_=(r=_).next,--u),null!=l?l.next=r:n=r,l=r;a=_}if(l.next=null,i<=1)break;o*=2}e=n}t.lights=e}},initGlobals:function(t){t.set("global.ambientLight",this.ambientLight),t.set("global.perPixelLighting",this.perPixelLighting)},cullLights:function(){for(var t=this.ctx.lights,e=null,n=new re;null!=t;){var s=t instanceof qe?t:null;null!=s&&(n.x=s.absPos._41,n.y=s.absPos._42,n.z=s.absPos._43,n.r=s.cullingDistance),null==s||0<s.cullingDistance&&!this.ctx.computingStatic&&!this.ctx.camera.frustum.hasSphere(n)?(null==e?this.ctx.lights=t.next:e.next=t.next,t=t.next):(this.lightCount++,s.objectDistance=0,t=(e=t).next)}},sortLight:function(t,e){var n=t.priority-e.priority;return 0!=n?-n:t.objectDistance<e.objectDistance?-1:1},computeLight:function(t,e){if(this.lightCount>this.maxLightsPerObject){for(var n=this.ctx.lights;null!=n;){var s,i,a,r=n instanceof qe?n:null;0!=(16&t.flags)?(s=r.absPos._41-this.ctx.camera.target.x,i=r.absPos._42-this.ctx.camera.target.y,null==(a=r.absPos._43-this.ctx.camera.target.z)&&(a=0),r.objectDistance=s*s+i*i+a*a):(s=r.absPos._41-t.absPos._41,i=r.absPos._42-t.absPos._42,null==(a=r.absPos._43-t.absPos._43)&&(a=0),r.objectDistance=s*s+i*i+a*a),n=n.next}var l,o=this.ctx.lights,h=W(this,this.sortLight);if(null==o)l=null;else{for(var u,_,c,d,p=1,f=0,g=0;;){for(_=o,d=o=null,u=0;null!=_;){++u;for(var m=_,f=0,A=0,x=p;A<x&&(++A,++f,null!=(m=m.next)););for(g=p;0<f||0<g&&null!=m;)0!=f&&(0==g||null==m||h(_,m)<=0)?(_=(c=_).next,--f):(m=(c=m).next,--g),null!=d?d.next=c:o=c,d=c;_=m}if(d.next=null,u<=1)break;p*=2}l=o}this.ctx.lights=l}e=this.ctx.allocShaderList(this.ambientShader,e);for(var r=this.ctx.lights,b=0;null!=r&&b++!=this.maxLightsPerObject;)e=this.ctx.allocShaderList(r.shader,e),r=r.next;return e},__class__:jo,__properties__:{set_additiveLighting:"set_additiveLighting"}}),(e["h3d.scene.fwd.DepthPass"]=Ke).__name__="h3d.scene.fwd.DepthPass",Ke.__super__=ke,Ke.prototype=t(ke.prototype,{getOutputs:function(){return[Yc.PackFloat(Yc.Value("output.depth"))]},draw:function(t,e){var n=this.ctx.textures.allocTarget("depthMap",this.ctx.engine.width,this.ctx.engine.height,!0);this.ctx.engine.pushTarget(n),this.ctx.engine.clear(this.enableSky?0:16711680,1),ke.prototype.draw.call(this,t,e),this.ctx.engine.popTarget(),this.ctx.setGlobalID(this.depthMapId,{texture:n})},__class__:Ke}),(e["h3d.scene.fwd.NormalPass"]=Je).__name__="h3d.scene.fwd.NormalPass",Je.__super__=ke,Je.prototype=t(ke.prototype,{getOutputs:function(){return[Yc.PackNormal(Yc.Value("output.normal"))]},draw:function(t,e){var n=this.ctx.textures.allocTarget("normalMap",this.ctx.engine.width,this.ctx.engine.height);this.ctx.engine.pushTarget(n),this.ctx.engine.clear(8421504,1),ke.prototype.draw.call(this,t,e),this.ctx.engine.popTarget(),this.ctx.setGlobalID(this.normalMapId,n)},__class__:Je}),function(){this.shadow=new Te(1024),this.normal=new Je,this.depth=new Ke,je.call(this),this.defaultPass=new ke("default"),this.allPasses=[this.defaultPass,this.depth,this.normal,this.shadow]}),Zo=((e["h3d.scene.fwd.Renderer"]=Ho).__name__="h3d.scene.fwd.Renderer",Ho.__super__=je,Ho.prototype=t(je.prototype,{renderPass:function(t,e,n){t.draw(e,n)},render:function(){this.has("shadow")&&this.renderPass(this.shadow,this.get("shadow")),this.has("depth")&&this.renderPass(this.depth,this.get("depth")),this.has("normal")&&this.renderPass(this.normal,this.get("normal")),this.renderPass(this.defaultPass,this.get("default")),this.renderPass(this.defaultPass,this.get("alpha"),this.backToFront),this.renderPass(this.defaultPass,this.get("additive"))},__class__:Ho}),function(){f.call(this)}),qo=((e["h3d.shader.AmbientLight"]=Zo).__name__="h3d.shader.AmbientLight",Zo._SHADER=null,Zo.__super__=f,Zo.prototype=t(f.prototype,{get_additive:function(){return this.additive__},set_additive:function(t){return this.constModified=!0,this.additive__=t},updateConstants:function(t){this.constBits=0,this.additive__&&(this.constBits|=2),this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.additive__:null},getParamFloatValue:function(t){return 0},__class__:Zo,__properties__:{set_additive:"set_additive",get_additive:"get_additive"}}),function(){this.viewportB__=new R,this.viewportA__=new R,this.halfPixelInverse__=new R,this.uvPos__=new R,this.filterMatrixB__=new R,this.filterMatrixA__=new R,this.absoluteMatrixB__=new R,this.absoluteMatrixA__=new R,this.color__=new R,this.zValue__=0,f.call(this)}),Ko=((e["h3d.shader.Base2d"]=qo).__name__="h3d.shader.Base2d",qo._SHADER=null,qo.__super__=f,qo.prototype=t(f.prototype,{get_zValue:function(){return this.zValue__},set_zValue:function(t){return this.zValue__=t},get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_isRelative:function(){return this.isRelative__},set_isRelative:function(t){return this.constModified=!0,this.isRelative__=t},get_color:function(){return this.color__},set_color:function(t){return this.color__=t},get_absoluteMatrixA:function(){return this.absoluteMatrixA__},set_absoluteMatrixA:function(t){return this.absoluteMatrixA__=t},get_absoluteMatrixB:function(){return this.absoluteMatrixB__},set_absoluteMatrixB:function(t){return this.absoluteMatrixB__=t},get_filterMatrixA:function(){return this.filterMatrixA__},set_filterMatrixA:function(t){return this.filterMatrixA__=t},get_filterMatrixB:function(){return this.filterMatrixB__},set_filterMatrixB:function(t){return this.filterMatrixB__=t},get_hasUVPos:function(){return this.hasUVPos__},set_hasUVPos:function(t){return this.constModified=!0,this.hasUVPos__=t},get_uvPos:function(){return this.uvPos__},set_uvPos:function(t){return this.uvPos__=t},get_killAlpha:function(){return this.killAlpha__},set_killAlpha:function(t){return this.constModified=!0,this.killAlpha__=t},get_pixelAlign:function(){return this.pixelAlign__},set_pixelAlign:function(t){return this.constModified=!0,this.pixelAlign__=t},get_halfPixelInverse:function(){return this.halfPixelInverse__},set_halfPixelInverse:function(t){return this.halfPixelInverse__=t},get_viewportA:function(){return this.viewportA__},set_viewportA:function(t){return this.viewportA__=t},get_viewportB:function(){return this.viewportB__},set_viewportB:function(t){return this.viewportB__=t},updateConstants:function(t){this.constBits=0,this.isRelative__&&(this.constBits|=1),this.hasUVPos__&&(this.constBits|=2),this.killAlpha__&&(this.constBits|=4),this.pixelAlign__&&(this.constBits|=8),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.zValue__;case 1:return this.texture__;case 2:return this.isRelative__;case 3:return this.color__;case 4:return this.absoluteMatrixA__;case 5:return this.absoluteMatrixB__;case 6:return this.filterMatrixA__;case 7:return this.filterMatrixB__;case 8:return this.hasUVPos__;case 9:return this.uvPos__;case 10:return this.killAlpha__;case 11:return this.pixelAlign__;case 12:return this.halfPixelInverse__;case 13:return this.viewportA__;case 14:return this.viewportB__}return null},getParamFloatValue:function(t){return 0==t?this.zValue__:0},__class__:qo,__properties__:{set_viewportB:"set_viewportB",get_viewportB:"get_viewportB",set_viewportA:"set_viewportA",get_viewportA:"get_viewportA",set_halfPixelInverse:"set_halfPixelInverse",get_halfPixelInverse:"get_halfPixelInverse",set_pixelAlign:"set_pixelAlign",get_pixelAlign:"get_pixelAlign",set_killAlpha:"set_killAlpha",get_killAlpha:"get_killAlpha",set_uvPos:"set_uvPos",get_uvPos:"get_uvPos",set_hasUVPos:"set_hasUVPos",get_hasUVPos:"get_hasUVPos",set_filterMatrixB:"set_filterMatrixB",get_filterMatrixB:"get_filterMatrixB",set_filterMatrixA:"set_filterMatrixA",get_filterMatrixA:"get_filterMatrixA",set_absoluteMatrixB:"set_absoluteMatrixB",get_absoluteMatrixB:"get_absoluteMatrixB",set_absoluteMatrixA:"set_absoluteMatrixA",get_absoluteMatrixA:"get_absoluteMatrixA",set_color:"set_color",get_color:"get_color",set_isRelative:"set_isRelative",get_isRelative:"get_isRelative",set_texture:"set_texture",get_texture:"get_texture",set_zValue:"set_zValue",get_zValue:"get_zValue"}}),function(){this.specularColor__=new R,this.specularAmount__=0,this.specularPower__=0,this.color__=new R,f.call(this);var t=this.color__;t.x=1,t.y=1,t.z=1,t.w=1,(t=this.specularColor__).x=1,t.y=1,t.z=1,t.w=1,this.specularPower__=50,this.specularAmount__=1}),Jo=((e["h3d.shader.BaseMesh"]=Ko).__name__="h3d.shader.BaseMesh",Ko._SHADER=null,Ko.__super__=f,Ko.prototype=t(f.prototype,{get_color:function(){return this.color__},set_color:function(t){return this.color__=t},get_specularPower:function(){return this.specularPower__},set_specularPower:function(t){return this.specularPower__=t},get_specularAmount:function(){return this.specularAmount__},set_specularAmount:function(t){return this.specularAmount__=t},get_specularColor:function(){return this.specularColor__},set_specularColor:function(t){return this.specularColor__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.color__;case 1:return this.specularPower__;case 2:return this.specularAmount__;case 3:return this.specularColor__}return null},getParamFloatValue:function(t){switch(t){case 1:return this.specularPower__;case 2:return this.specularAmount__}return 0},__class__:Ko,__properties__:{set_specularColor:"set_specularColor",get_specularColor:"get_specularColor",set_specularAmount:"set_specularAmount",get_specularAmount:"get_specularAmount",set_specularPower:"set_specularPower",get_specularPower:"get_specularPower",set_color:"set_color",get_color:"get_color"}}),function(){this.cubeDir__=new ro,this.fixedColor__=new R,this.pixel__=new R,this.offsets__=[],this.values__=[],this.Quality__=0,this.cameraInverseViewProj__=new ro,n.call(this)}),$o=((e["h3d.shader.Blur"]=Jo).__name__="h3d.shader.Blur",Jo._SHADER=null,Jo.__super__=n,Jo.prototype=t(n.prototype,{get_cameraInverseViewProj:function(){return this.cameraInverseViewProj__},set_cameraInverseViewProj:function(t){return this.cameraInverseViewProj__=t},get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_depthTexture:function(){return this.depthTexture__},set_depthTexture:function(t){return this.depthTexture__=t},get_Quality:function(){return this.Quality__},set_Quality:function(t){return this.constModified=!0,this.Quality__=t},get_isDepth:function(){return this.isDepth__},set_isDepth:function(t){return this.constModified=!0,this.isDepth__=t},get_values:function(){return this.values__},set_values:function(t){return this.values__=t},get_offsets:function(){return this.offsets__},set_offsets:function(t){return this.offsets__=t},get_pixel:function(){return this.pixel__},set_pixel:function(t){return this.pixel__=t},get_hasFixedColor:function(){return this.hasFixedColor__},set_hasFixedColor:function(t){return this.constModified=!0,this.hasFixedColor__=t},get_smoothFixedColor:function(){return this.smoothFixedColor__},set_smoothFixedColor:function(t){return this.constModified=!0,this.smoothFixedColor__=t},get_fixedColor:function(){return this.fixedColor__},set_fixedColor:function(t){return this.fixedColor__=t},get_isDepthDependant:function(){return this.isDepthDependant__},set_isDepthDependant:function(t){return this.constModified=!0,this.isDepthDependant__=t},get_hasNormal:function(){return this.hasNormal__},set_hasNormal:function(t){return this.constModified=!0,this.hasNormal__=t},get_normalTexture:function(){return this.normalTexture__},set_normalTexture:function(t){return this.normalTexture__=t},get_isCube:function(){return this.isCube__},set_isCube:function(t){return this.constModified=!0,this.isCube__=t},get_cubeTexture:function(){return this.cubeTexture__},set_cubeTexture:function(t){return this.cubeTexture__=t},get_cubeDir:function(){return this.cubeDir__},set_cubeDir:function(t){return this.cubeDir__=t},updateConstants:function(t){this.constBits=0;var e=this.Quality__;if(e>>>8!=0)throw tr.thrown("Quality is out of range "+e+">255");this.constBits|=e,this.isDepth__&&(this.constBits|=256),this.hasFixedColor__&&(this.constBits|=512),this.smoothFixedColor__&&(this.constBits|=1024),this.isDepthDependant__&&(this.constBits|=2048),this.hasNormal__&&(this.constBits|=4096),this.isCube__&&(this.constBits|=8192),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.cameraInverseViewProj__;case 2:return this.texture__;case 3:return this.depthTexture__;case 4:return this.Quality__;case 5:return this.isDepth__;case 6:return this.values__;case 7:return this.offsets__;case 8:return this.pixel__;case 9:return this.hasFixedColor__;case 10:return this.smoothFixedColor__;case 11:return this.fixedColor__;case 12:return this.isDepthDependant__;case 13:return this.hasNormal__;case 14:return this.normalTexture__;case 15:return this.isCube__;case 16:return this.cubeTexture__;case 17:return this.cubeDir__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Jo,__properties__:t(n.prototype.__properties__,{set_cubeDir:"set_cubeDir",get_cubeDir:"get_cubeDir",set_cubeTexture:"set_cubeTexture",get_cubeTexture:"get_cubeTexture",set_isCube:"set_isCube",get_isCube:"get_isCube",set_normalTexture:"set_normalTexture",get_normalTexture:"get_normalTexture",set_hasNormal:"set_hasNormal",get_hasNormal:"get_hasNormal",set_isDepthDependant:"set_isDepthDependant",get_isDepthDependant:"get_isDepthDependant",set_fixedColor:"set_fixedColor",get_fixedColor:"get_fixedColor",set_smoothFixedColor:"set_smoothFixedColor",get_smoothFixedColor:"get_smoothFixedColor",set_hasFixedColor:"set_hasFixedColor",get_hasFixedColor:"get_hasFixedColor",set_pixel:"set_pixel",get_pixel:"get_pixel",set_offsets:"set_offsets",get_offsets:"get_offsets",set_values:"set_values",get_values:"get_values",set_isDepth:"set_isDepth",get_isDepth:"get_isDepth",set_Quality:"set_Quality",get_Quality:"get_Quality",set_depthTexture:"set_depthTexture",get_depthTexture:"get_depthTexture",set_texture:"set_texture",get_texture:"get_texture",set_cameraInverseViewProj:"set_cameraInverseViewProj",get_cameraInverseViewProj:"get_cameraInverseViewProj"})}),(e["h3d.shader.ShaderBuffers"]=$e).__name__="h3d.shader.ShaderBuffers",$e.prototype={grow:function(t){var e=t.globalsSize<<2,n=t.paramsSize<<2,s=t.texturesCount,t=t.bufferCount;this.globals.length<e&&(this.globals=new Float32Array(e)),this.params.length<n&&(this.params=new Float32Array(n)),this.tex.length<s&&(this.tex=new Array(s)),0<t&&(null==this.buffers||this.buffers.length<t)&&(this.buffers=new Array(t))},__class__:$e},function(t){this.vertex=new $e(t.vertex),this.fragment=new $e(t.fragment)}),th=((e["h3d.shader.Buffers"]=$o).__name__="h3d.shader.Buffers",$o.prototype={__class__:$o},(e["h3d.shader.ColorAdd"]=tn).__name__="h3d.shader.ColorAdd",tn._SHADER=null,tn.__super__=f,tn.prototype=t(f.prototype,{get_color:function(){return this.color__},set_color:function(t){return this.color__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.color__:null},getParamFloatValue:function(t){return 0},__class__:tn,__properties__:{set_color:"set_color",get_color:"get_color"}}),(e["h3d.shader.ColorKey"]=en).__name__="h3d.shader.ColorKey",en._SHADER=null,en.__super__=f,en.prototype=t(f.prototype,{get_colorKey:function(){return this.colorKey__},set_colorKey:function(t){return this.colorKey__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.colorKey__:null},getParamFloatValue:function(t){return 0},__class__:en,__properties__:{set_colorKey:"set_colorKey",get_colorKey:"get_colorKey"}}),(e["h3d.shader.ColorMatrix"]=nn).__name__="h3d.shader.ColorMatrix",nn._SHADER=null,nn.__super__=f,nn.prototype=t(f.prototype,{get_matrix:function(){return this.matrix__},set_matrix:function(t){return this.matrix__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.matrix__:null},getParamFloatValue:function(t){return 0},__class__:nn,__properties__:{set_matrix:"set_matrix",get_matrix:"get_matrix"}}),function(){this.poissonDisk__=[],this.shadowBias__=0,this.shadowProj__=new ro,this.shadowMapChannel__=Qc.Unknown,this.shadowRes__=new R,this.pcfScale__=0,this.PCF_SAMPLES__=0,this.shadowPower__=0,f.call(this),this.set_pcfQuality(1)}),eh=((e["h3d.shader.DirShadow"]=th).__name__="h3d.shader.DirShadow",th._SHADER=null,th.__super__=f,th.prototype=t(f.prototype,{set_pcfQuality:function(t){var e;switch(t){case 2:e=[new R(-.326,-.406),new R(-.84,-.074),new R(-.696,.457),new R(-.203,.621),new R(.962,-.195),new R(.473,-.48),new R(.519,.767),new R(.185,-.893),new R(.507,.064),new R(.896,.412),new R(-.322,-.933),new R(-.792,-.598)];break;case 3:e=[new R(-.613392,.617481),new R(.170019,-.040254),new R(-.299417,.791925),new R(.64568,.49321),new R(-.651784,.717887),new R(.421003,.02707),new R(-.817194,-.271096),new R(-.705374,-.668203),new R(.97705,-.108615),new R(.063326,.142369),new R(.203528,.214331),new R(-.667531,.32609),new R(-.098422,-.295755),new R(-.885922,.215369),new R(.566637,.605213),new R(.039766,-.3961),new R(.751946,.453352),new R(.078707,-.715323),new R(-.075838,-.529344),new R(.724479,-.580798),new R(.222999,-.215125),new R(-.467574,-.405438),new R(-.248268,-.814753),new R(.354411,-.88757),new R(.175817,.382366),new R(.487472,-.063082),new R(-.084078,.898312),new R(.488876,-.783441),new R(.470016,.217933),new R(-.69689,-.549791),new R(-.149693,.605762),new R(.034211,.97998),new R(.503098,-.308878),new R(-.016205,-.872921),new R(.385784,-.393902),new R(-.146886,-.859249),new R(.643361,.164098),new R(.634388,-.049471),new R(-.688894,.007843),new R(.464034,-.188818),new R(-.44084,.137486),new R(.364483,.511704),new R(.034028,.325968),new R(.099094,-.308023),new R(.69396,-.366253),new R(.678884,-.204688),new R(.001801,.780328),new R(.145177,-.898984),new R(.062655,-.611866),new R(.315226,-.604297),new R(-.780145,.486251),new R(-.371868,.882138),new R(.200476,.49443),new R(-.494552,-.711051),new R(.612476,.705252),new R(-.578845,-.768792),new R(-.772454,-.090976),new R(.50444,.372295),new R(.155736,.065157),new R(.391522,.849605),new R(-.620106,-.328104),new R(.789239,-.419965),new R(-.545396,.538133),new R(-.178564,-.596057)];break;default:e=[new R(-.942,-.399),new R(.945,-.768),new R(-.094,-.929),new R(.344,.293)]}return this.poissonDisk__=e,this.constModified=!0,this.PCF_SAMPLES__=this.poissonDisk__.length,t},get_enable:function(){return this.enable__},set_enable:function(t){return this.constModified=!0,this.enable__=t},get_USE_ESM:function(){return this.USE_ESM__},set_USE_ESM:function(t){return this.constModified=!0,this.USE_ESM__=t},get_shadowPower:function(){return this.shadowPower__},set_shadowPower:function(t){return this.shadowPower__=t},get_USE_PCF:function(){return this.USE_PCF__},set_USE_PCF:function(t){return this.constModified=!0,this.USE_PCF__=t},get_PCF_SAMPLES:function(){return this.PCF_SAMPLES__},set_PCF_SAMPLES:function(t){return this.constModified=!0,this.PCF_SAMPLES__=t},get_pcfScale:function(){return this.pcfScale__},set_pcfScale:function(t){return this.pcfScale__=t},get_shadowRes:function(){return this.shadowRes__},set_shadowRes:function(t){return this.shadowRes__=t},get_shadowMap:function(){return this.shadowMap__},set_shadowMap:function(t){return this.constModified=!0,this.shadowMap__=t},get_shadowProj:function(){return this.shadowProj__},set_shadowProj:function(t){return this.shadowProj__=t},get_shadowBias:function(){return this.shadowBias__},set_shadowBias:function(t){return this.shadowBias__=t},get_poissonDisk:function(){return this.poissonDisk__},set_poissonDisk:function(t){return this.poissonDisk__=t},updateConstants:function(t){this.constBits=0,this.enable__&&(this.constBits|=1),this.USE_ESM__&&(this.constBits|=2),this.USE_PCF__&&(this.constBits|=4);var e=this.PCF_SAMPLES__;if(e>>>8!=0)throw tr.thrown("PCF_SAMPLES is out of range "+e+">255");if(this.constBits|=e<<3,null==this.shadowMap__)this.shadowMapChannel__=Qc.Unknown;else if(this.shadowMapChannel__==Qc.Unknown){if(this.shadowMap__.format!=A.nativeFormat)throw tr.thrown("shadowMapChannel is not set");this.shadowMapChannel__=Qc.PackedFloat}this.constBits|=(t.allocChannelID(this.shadowMap__)<<3|this.shadowMapChannel__._hx_index)<<11,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.enable__;case 1:return this.USE_ESM__;case 2:return this.shadowPower__;case 3:return this.USE_PCF__;case 4:return this.PCF_SAMPLES__;case 5:return this.pcfScale__;case 6:return this.shadowRes__;case 7:return this.shadowMap__;case 8:return this.shadowProj__;case 9:return this.shadowBias__;case 10:return this.poissonDisk__}return null},getParamFloatValue:function(t){switch(t){case 2:return this.shadowPower__;case 5:return this.pcfScale__;case 9:return this.shadowBias__}return 0},__class__:th,__properties__:{set_poissonDisk:"set_poissonDisk",get_poissonDisk:"get_poissonDisk",set_shadowBias:"set_shadowBias",get_shadowBias:"get_shadowBias",set_shadowProj:"set_shadowProj",get_shadowProj:"get_shadowProj",set_shadowMap:"set_shadowMap",get_shadowMap:"get_shadowMap",set_shadowRes:"set_shadowRes",get_shadowRes:"get_shadowRes",set_pcfScale:"set_pcfScale",get_pcfScale:"get_pcfScale",set_PCF_SAMPLES:"set_PCF_SAMPLES",get_PCF_SAMPLES:"get_PCF_SAMPLES",set_USE_PCF:"set_USE_PCF",get_USE_PCF:"get_USE_PCF",set_shadowPower:"set_shadowPower",get_shadowPower:"get_shadowPower",set_USE_ESM:"set_USE_ESM",get_USE_ESM:"get_USE_ESM",set_enable:"set_enable",get_enable:"get_enable",set_pcfQuality:"set_pcfQuality"}}),(e["h3d.shader.GenTexture"]=sn).__name__="h3d.shader.GenTexture",sn._SHADER=null,sn.__super__=n,sn.prototype=t(n.prototype,{get_mode:function(){return this.mode__},set_mode:function(t){return this.constModified=!0,this.mode__=t},get_color:function(){return this.color__},set_color:function(t){return this.color__=t},updateConstants:function(t){this.constBits=0;var e=this.mode__;if(e>>>8!=0)throw tr.thrown("mode is out of range "+e+">255");this.constBits|=e,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.mode__;case 2:return this.color__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:sn,__properties__:t(n.prototype.__properties__,{set_color:"set_color",get_color:"get_color",set_mode:"set_mode",get_mode:"get_mode"})}),function(t,e){null==e&&(e=1),null==t&&(t=1.5),this.width__=0,this.lengthScale__=0,f.call(this),this.width__=t,this.lengthScale__=e}),nh=((e["h3d.shader.LineShader"]=eh).__name__="h3d.shader.LineShader",eh._SHADER=null,eh.__super__=f,eh.prototype=t(f.prototype,{get_lengthScale:function(){return this.lengthScale__},set_lengthScale:function(t){return this.lengthScale__=t},get_width:function(){return this.width__},set_width:function(t){return this.width__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.lengthScale__;case 1:return this.width__}return null},getParamFloatValue:function(t){switch(t){case 0:return this.lengthScale__;case 1:return this.width__}return 0},__class__:eh,__properties__:{set_width:"set_width",get_width:"get_width",set_lengthScale:"set_lengthScale",get_lengthScale:"get_lengthScale"}}),function(){n.call(this)}),sh=((e["h3d.shader.MinMaxShader"]=nh).__name__="h3d.shader.MinMaxShader",nh._SHADER=null,nh.__super__=n,nh.prototype=t(n.prototype,{get_texA:function(){return this.texA__},set_texA:function(t){return this.texA__=t},get_texB:function(){return this.texB__},set_texB:function(t){return this.texB__=t},get_isMax:function(){return this.isMax__},set_isMax:function(t){return this.constModified=!0,this.isMax__=t},updateConstants:function(t){this.constBits=0,this.isMax__&&(this.constBits|=1),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texA__;case 2:return this.texB__;case 3:return this.isMax__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:nh,__properties__:t(n.prototype.__properties__,{set_isMax:"set_isMax",get_isMax:"get_isMax",set_texB:"set_texB",get_texB:"get_texB",set_texA:"set_texA",get_texA:"get_texA"})}),(e["h3d.shader.CubeMinMaxShader"]=an).__name__="h3d.shader.CubeMinMaxShader",an._SHADER=null,an.__super__=n,an.prototype=t(n.prototype,{get_texA:function(){return this.texA__},set_texA:function(t){return this.texA__=t},get_texB:function(){return this.texB__},set_texB:function(t){return this.texB__=t},get_isMax:function(){return this.isMax__},set_isMax:function(t){return this.constModified=!0,this.isMax__=t},get_mat:function(){return this.mat__},set_mat:function(t){return this.mat__=t},updateConstants:function(t){this.constBits=0,this.isMax__&&(this.constBits|=1),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texA__;case 2:return this.texB__;case 3:return this.isMax__;case 4:return this.mat__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:an,__properties__:t(n.prototype.__properties__,{set_mat:"set_mat",get_mat:"get_mat",set_isMax:"set_isMax",get_isMax:"get_isMax",set_texB:"set_texB",get_texB:"get_texB",set_texA:"set_texA",get_texA:"get_texA"})}),function(t){f.call(this),this.texture__=t}),ih=((e["h3d.shader.NormalMap"]=sh).__name__="h3d.shader.NormalMap",sh._SHADER=null,sh.__super__=f,sh.prototype=t(f.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.texture__:null},getParamFloatValue:function(t){return 0},__class__:sh,__properties__:{set_texture:"set_texture",get_texture:"get_texture"}}),function(){this.multiplyAlpha__=0,this.color__=new R,this.samples__=0,this.size__=new R,n.call(this)}),ah=((e["h3d.shader.Outline2D"]=ih).__name__="h3d.shader.Outline2D",ih._SHADER=null,ih.__super__=n,ih.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_size:function(){return this.size__},set_size:function(t){return this.size__=t},get_samples:function(){return this.samples__},set_samples:function(t){return this.constModified=!0,this.samples__=t},get_color:function(){return this.color__},set_color:function(t){return this.color__=t},get_multiplyAlpha:function(){return this.multiplyAlpha__},set_multiplyAlpha:function(t){return this.constModified=!0,this.multiplyAlpha__=t},updateConstants:function(t){this.constBits=0;var e=this.samples__;if(e>>>8!=0)throw tr.thrown("samples is out of range "+e+">255");if(this.constBits|=e,(e=this.multiplyAlpha__)>>>8!=0)throw tr.thrown("multiplyAlpha is out of range "+e+">255");this.constBits|=e<<8,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.size__;case 3:return this.samples__;case 4:return this.color__;case 5:return this.multiplyAlpha__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:ih,__properties__:t(n.prototype.__properties__,{set_multiplyAlpha:"set_multiplyAlpha",get_multiplyAlpha:"get_multiplyAlpha",set_color:"set_color",get_color:"get_color",set_samples:"set_samples",get_samples:"get_samples",set_size:"set_size",get_size:"get_size",set_texture:"set_texture",get_texture:"get_texture"})}),function(){f.call(this)}),rh=((e["h3d.shader.Shadow"]=ah).__name__="h3d.shader.Shadow",ah._SHADER=null,ah.__super__=f,ah.prototype=t(f.prototype,{updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return null},getParamFloatValue:function(t){return 0},__class__:ah}),function(){this.smoothing__=.041666666666666664,this.alphaCutoff__=.5,this.autoSmoothing__=!1,this.channel__=0,f.call(this)}),lh=((e["h3d.shader.SignedDistanceField"]=rh).__name__="h3d.shader.SignedDistanceField",rh._SHADER=null,rh.__super__=f,rh.prototype=t(f.prototype,{get_channel:function(){return this.channel__},set_channel:function(t){return this.constModified=!0,this.channel__=t},get_autoSmoothing:function(){return this.autoSmoothing__},set_autoSmoothing:function(t){return this.constModified=!0,this.autoSmoothing__=t},get_alphaCutoff:function(){return this.alphaCutoff__},set_alphaCutoff:function(t){return this.alphaCutoff__=t},get_smoothing:function(){return this.smoothing__},set_smoothing:function(t){return this.smoothing__=t},updateConstants:function(t){this.constBits=0;var e=this.channel__;if(e>>>8!=0)throw tr.thrown("channel is out of range "+e+">255");this.constBits|=e,this.autoSmoothing__&&(this.constBits|=256),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.channel__;case 1:return this.autoSmoothing__;case 2:return this.alphaCutoff__;case 3:return this.smoothing__}return null},getParamFloatValue:function(t){switch(t){case 2:return this.alphaCutoff__;case 3:return this.smoothing__}return 0},__class__:rh,__properties__:{set_smoothing:"set_smoothing",get_smoothing:"get_smoothing",set_alphaCutoff:"set_alphaCutoff",get_alphaCutoff:"get_alphaCutoff",set_autoSmoothing:"set_autoSmoothing",get_autoSmoothing:"get_autoSmoothing",set_channel:"set_channel",get_channel:"get_channel"}}),(e["h3d.shader.SkinBase"]=rn).__name__="h3d.shader.SkinBase",rn._SHADER=null,rn.__super__=f,rn.prototype=t(f.prototype,{get_MaxBones:function(){return this.MaxBones__},set_MaxBones:function(t){return this.constModified=!0,this.MaxBones__=t},get_fourBonesByVertex:function(){return this.fourBonesByVertex__},set_fourBonesByVertex:function(t){return this.constModified=!0,this.fourBonesByVertex__=t},get_bonesMatrixes:function(){return this.bonesMatrixes__},set_bonesMatrixes:function(t){return this.bonesMatrixes__=t},updateConstants:function(t){this.constBits=0;var e=this.MaxBones__;if(e>>>8!=0)throw tr.thrown("MaxBones is out of range "+e+">255");this.constBits|=e,this.fourBonesByVertex__&&(this.constBits|=256),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.MaxBones__;case 1:return this.fourBonesByVertex__;case 2:return this.bonesMatrixes__}return null},getParamFloatValue:function(t){return 0},__class__:rn,__properties__:{set_bonesMatrixes:"set_bonesMatrixes",get_bonesMatrixes:"get_bonesMatrixes",set_fourBonesByVertex:"set_fourBonesByVertex",get_fourBonesByVertex:"get_fourBonesByVertex",set_MaxBones:"set_MaxBones",get_MaxBones:"get_MaxBones"}}),function(){rn.call(this)}),oh=((e["h3d.shader.Skin"]=lh).__name__="h3d.shader.Skin",lh._SHADER=null,lh.__super__=rn,lh.prototype=t(rn.prototype,{updateConstants:function(t){this.constBits=0;var e=this.MaxBones__;if(e>>>8!=0)throw tr.thrown("MaxBones is out of range "+e+">255");this.constBits|=e,this.fourBonesByVertex__&&(this.constBits|=256),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.MaxBones__;case 1:return this.fourBonesByVertex__;case 2:return this.bonesMatrixes__}return null},getParamFloatValue:function(t){return 0},__class__:lh}),function(){rn.call(this)}),hh=((e["h3d.shader.SkinTangent"]=oh).__name__="h3d.shader.SkinTangent",oh._SHADER=null,oh.__super__=rn,oh.prototype=t(rn.prototype,{updateConstants:function(t){this.constBits=0;var e=this.MaxBones__;if(e>>>8!=0)throw tr.thrown("MaxBones is out of range "+e+">255");this.constBits|=e,this.fourBonesByVertex__&&(this.constBits|=256),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.MaxBones__;case 1:return this.fourBonesByVertex__;case 2:return this.bonesMatrixes__}return null},getParamFloatValue:function(t){return 0},__class__:oh}),function(t){f.call(this),this.texture__=t}),uh=((e["h3d.shader.SpecularTexture"]=hh).__name__="h3d.shader.SpecularTexture",hh._SHADER=null,hh.__super__=f,hh.prototype=t(f.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.texture__:null},getParamFloatValue:function(t){return 0},__class__:hh,__properties__:{set_texture:"set_texture",get_texture:"get_texture"}}),function(t){this.killAlphaThreshold__=0,f.call(this),this.texture__=t,this.killAlphaThreshold__=So.defaultKillAlphaThreshold}),_h=((e["h3d.shader.Texture"]=uh).__name__="h3d.shader.Texture",uh._SHADER=null,uh.__super__=f,uh.prototype=t(f.prototype,{get_additive:function(){return this.additive__},set_additive:function(t){return this.constModified=!0,this.additive__=t},get_killAlpha:function(){return this.killAlpha__},set_killAlpha:function(t){return this.constModified=!0,this.killAlpha__=t},get_specularAlpha:function(){return this.specularAlpha__},set_specularAlpha:function(t){return this.constModified=!0,this.specularAlpha__=t},get_killAlphaThreshold:function(){return this.killAlphaThreshold__},set_killAlphaThreshold:function(t){return this.killAlphaThreshold__=t},get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},updateConstants:function(t){this.constBits=0,this.additive__&&(this.constBits|=1),this.killAlpha__&&(this.constBits|=2),this.specularAlpha__&&(this.constBits|=4),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.additive__;case 1:return this.killAlpha__;case 2:return this.specularAlpha__;case 3:return this.killAlphaThreshold__;case 4:return this.texture__}return null},getParamFloatValue:function(t){return 3==t?this.killAlphaThreshold__:0},__class__:uh,__properties__:{set_texture:"set_texture",get_texture:"get_texture",set_killAlphaThreshold:"set_killAlphaThreshold",get_killAlphaThreshold:"get_killAlphaThreshold",set_specularAlpha:"set_specularAlpha",get_specularAlpha:"get_specularAlpha",set_killAlpha:"set_killAlpha",get_killAlpha:"get_killAlpha",set_additive:"set_additive",get_additive:"get_additive"}}),(e["h3d.shader.UVDelta"]=ln).__name__="h3d.shader.UVDelta",ln._SHADER=null,ln.__super__=f,ln.prototype=t(f.prototype,{get_uvDelta:function(){return this.uvDelta__},set_uvDelta:function(t){return this.uvDelta__=t},get_uvScale:function(){return this.uvScale__},set_uvScale:function(t){return this.uvScale__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.uvDelta__;case 1:return this.uvScale__}return null},getParamFloatValue:function(t){return 0},__class__:ln,__properties__:{set_uvScale:"set_uvScale",get_uvScale:"get_uvScale",set_uvDelta:"set_uvDelta",get_uvDelta:"get_uvDelta"}}),(e["h3d.shader.VertexColor"]=on).__name__="h3d.shader.VertexColor",on._SHADER=null,on.__super__=f,on.prototype=t(f.prototype,{get_additive:function(){return this.additive__},set_additive:function(t){return this.constModified=!0,this.additive__=t},updateConstants:function(t){this.constBits=0,this.additive__&&(this.constBits|=1),this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.additive__:null},getParamFloatValue:function(t){return 0},__class__:on,__properties__:{set_additive:"set_additive",get_additive:"get_additive"}}),function(){f.call(this)}),ch=((e["h3d.shader.VertexColorAlpha"]=_h).__name__="h3d.shader.VertexColorAlpha",_h._SHADER=null,_h.__super__=f,_h.prototype=t(f.prototype,{get_additive:function(){return this.additive__},set_additive:function(t){return this.constModified=!0,this.additive__=t},updateConstants:function(t){this.constBits=0,this.additive__&&(this.constBits|=1),this.updateConstantsFinal(t)},getParamValue:function(t){return 0==t?this.additive__:null},getParamFloatValue:function(t){return 0},__class__:_h,__properties__:{set_additive:"set_additive",get_additive:"get_additive"}}),(e["h3d.shader.VolumeDecal"]=hn).__name__="h3d.shader.VolumeDecal",hn._SHADER=null,hn.__super__=f,hn.prototype=t(f.prototype,{get_scale:function(){return this.scale__},set_scale:function(t){return this.scale__=t},get_normal:function(){return this.normal__},set_normal:function(t){return this.normal__=t},get_tangent:function(){return this.tangent__},set_tangent:function(t){return this.tangent__=t},get_isCentered:function(){return this.isCentered__},set_isCentered:function(t){return this.constModified=!0,this.isCentered__=t},updateConstants:function(t){this.constBits=0,this.isCentered__&&(this.constBits|=64),this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.scale__;case 1:return this.normal__;case 2:return this.tangent__;case 3:return this.isCentered__}return null},getParamFloatValue:function(t){return 0},__class__:hn,__properties__:{set_isCentered:"set_isCentered",get_isCentered:"get_isCentered",set_tangent:"set_tangent",get_tangent:"get_tangent",set_normal:"set_normal",get_normal:"get_normal",set_scale:"set_scale",get_scale:"get_scale"}}),(e["hacksaw.common.api.GameInfoCallbackData"]=un).__name__="hacksaw.common.api.GameInfoCallbackData",un.prototype={__class__:un},d["hacksaw.common.enums.UiCustomSetting"]={__ename__:!0,__constructs__:null,RevealBehavior:((c=function(t){return{_hx_index:0,behavior:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="RevealBehavior",c.__params__=["behavior"],c),UiTheme:((c=function(t){return{_hx_index:1,theme:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="UiTheme",c.__params__=["theme"],c),SuperTurbo:((c=function(t){return{_hx_index:2,available:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="SuperTurbo",c.__params__=["available"],c),FeatureBuy:((c=function(t,e){return{_hx_index:3,items:t,uiConfig:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="FeatureBuy",c.__params__=["items","uiConfig"],c),ItemCount:((c=function(t,e,n,s,i){return{_hx_index:4,name:t,initial:e,triggers:n,availableDuringPlay:s,uiElementType:i,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="ItemCount",c.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],c),GridSize:((c=function(t,e,n,s,i){return{_hx_index:5,name:t,initial:e,triggers:n,availableDuringPlay:s,uiElementType:i,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="GridSize",c.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],c),Difficulty:((c=function(t,e,n,s,i){return{_hx_index:6,name:t,initial:e,triggers:n,availableDuringPlay:s,uiElementType:i,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="Difficulty",c.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],c),Appearance:((c=function(t,e,n,s,i){return{_hx_index:7,name:t,initial:e,triggers:n,availableDuringPlay:s,uiElementType:i,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="Appearance",c.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],c),WinFieldStyle:((c=function(t){return{_hx_index:8,style:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="WinFieldStyle",c.__params__=["style"],c),Autoplay:((c=function(t,e){return{_hx_index:9,available:t,delays:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="Autoplay",c.__params__=["available","delays"],c),CollectableWins:((c=function(t){return{_hx_index:10,available:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="CollectableWins",c.__params__=["available"],c),Turbo:((c=function(t){return{_hx_index:11,available:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="Turbo",c.__params__=["available"],c),Audio:((c=function(t,e){return{_hx_index:12,sound:t,music:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="Audio",c.__params__=["sound","music"],c),UiLayouts:((c=function(t){return{_hx_index:13,layouts:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:l}})._hx_name="UiLayouts",c.__params__=["layouts"],c)}),s=(ch.__constructs__=[ch.RevealBehavior,ch.UiTheme,ch.SuperTurbo,ch.FeatureBuy,ch.ItemCount,ch.GridSize,ch.Difficulty,ch.Appearance,ch.WinFieldStyle,ch.Autoplay,ch.CollectableWins,ch.Turbo,ch.Audio,ch.UiLayouts],ch.__empty_constructs__=[],(e["hacksaw.common.enums.ItemCountData"]=_n).__name__="hacksaw.common.enums.ItemCountData",(e["hacksaw.common.enums.AppearanceData"]=cn).__name__="hacksaw.common.enums.AppearanceData",(e["hacksaw.common.enums.GridSizeData"]=dn).__name__="hacksaw.common.enums.GridSizeData",dn.prototype={__class__:dn},(e["hacksaw.common.enums.DifficultyData"]=pn).__name__="hacksaw.common.enums.DifficultyData",pn.prototype={__class__:pn},(e["hacksaw.common.enums.AutoplayDelays"]=fn).__name__="hacksaw.common.enums.AutoplayDelays",fn.prototype={__class__:fn},d["hacksaw.common.enums.UiRevealBehavior"]={__ename__:!0,__constructs__:null,SPIN:{_hx_name:"SPIN",_hx_index:0,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:l},DROP:{_hx_name:"DROP",_hx_index:1,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:l},TWIST:{_hx_name:"TWIST",_hx_index:2,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:l},ROTATE:{_hx_name:"ROTATE",_hx_index:3,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:l},Custom:((c=function(t){return{_hx_index:4,behaviorName:t,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:l}})._hx_name="Custom",c.__params__=["behaviorName"],c)}),dh=(s.__constructs__=[s.SPIN,s.DROP,s.TWIST,s.ROTATE,s.Custom],s.__empty_constructs__=[s.SPIN,s.DROP,s.TWIST,s.ROTATE],d["hacksaw.common.enums.UiWinFieldStyle"]={__ename__:!0,__constructs__:null,STANDALONE:{_hx_name:"STANDALONE",_hx_index:0,__enum__:"hacksaw.common.enums.UiWinFieldStyle",toString:l},TICKER:{_hx_name:"TICKER",_hx_index:1,__enum__:"hacksaw.common.enums.UiWinFieldStyle",toString:l}}),ph=(dh.__constructs__=[dh.STANDALONE,dh.TICKER],dh.__empty_constructs__=[dh.STANDALONE,dh.TICKER],d["hacksaw.common.enums.UiLayoutSetting"]={__ename__:!0,__constructs__:null,Desktop:((c=function(t){return{_hx_index:0,landscape:t,__enum__:"hacksaw.common.enums.UiLayoutSetting",toString:l}})._hx_name="Desktop",c.__params__=["landscape"],c),Mobile:((c=function(t,e){return{_hx_index:1,landscape:t,portrait:e,__enum__:"hacksaw.common.enums.UiLayoutSetting",toString:l}})._hx_name="Mobile",c.__params__=["landscape","portrait"],c)}),N=(ph.__constructs__=[ph.Desktop,ph.Mobile],ph.__empty_constructs__=[],(e["hacksaw.common.types.FeatureBuyItem"]=gn).__name__="hacksaw.common.types.FeatureBuyItem",gn.fromDynamic=function(t){var e,n,s,i,a,r,l,o,h;return null==t?null:(e=(h=function(t){return null==t?null:Ja.string(t)})(t.bonusGameId),n=h(t.name),s=h(t.betCostMultiplier),i=parseFloat(h(t.expectedRtp)),a=h(t.image),r=h(t.description),l=h(t.volatility),o="true"==h(t.betCostMultiplierBaseGameEffect),h=h(t.isFeatureSpin),new gn(e,n,s,i,a,r,l,o,null==h?null:Yd.parse(h)))},gn.prototype={__class__:gn},(e["hacksaw.common.types.FeatureBuyUiConfig"]=mn).__name__="hacksaw.common.types.FeatureBuyUiConfig",(e["hacksaw.common.types.LayoutOrientationSettings"]=An).__name__="hacksaw.common.types.LayoutOrientationSettings",An.prototype={__class__:An},(e["hacksaw.common.types.IntRange"]=xn).__name__="hacksaw.common.types.IntRange",xn.prototype={__class__:xn},(e["hacksaw.core.Atlas_misc_info"]=bn).__name__="hacksaw.core.Atlas_misc_info",(e["hacksaw.core.Atlas_splash_info"]=yn).__name__="hacksaw.core.Atlas_splash_info",(e["hacksaw.core.Atlases"]=wn).__name__="hacksaw.core.Atlases",wn.splash=null,wn.misc=null,wn.prototype={__class__:wn},function(){this.h=Object.create(null)}),fh=((e["haxe.ds.StringMap"]=N).__name__="haxe.ds.StringMap",N.__interfaces__=[ot],N.prototype={get:function(t){return this.h[t]},set:function(t,e){this.h[t]=e},keys:function(){return new o_(this.h)},iterator:function(){return new h_(this.h)},__class__:N},(e["hacksaw.core.Configs"]=vn).__name__="hacksaw.core.Configs",vn.prototype={__class__:vn},(e["hacksaw.core.Gradients"]=Cn).__name__="hacksaw.core.Gradients",Cn.prototype={__class__:Cn},(e["hacksaw.core.Images"]=Mn).__name__="hacksaw.core.Images",Mn.prototype={__class__:Mn},(e["hacksaw.core.Models"]=Sn).__name__="hacksaw.core.Models",Sn.prototype={__class__:Sn},(e["hacksaw.core.Sounds"]=kn).__name__="hacksaw.core.Sounds",kn.win_under_bet=null,kn.win_over_medium=null,kn.win_over_low=null,kn.win_over_high=null,kn.level0=null,kn.bounce=null,kn.betlevel=null,kn.bet=null,kn.prototype={__class__:kn},(e["hacksaw.core.Spines"]=Bn).__name__="hacksaw.core.Spines",Bn.prototype={__class__:Bn},(e["hacksaw.core.Assets"]=In).__name__="hacksaw.core.Assets",In.init=function(){kn()},(e["hacksaw.core.Context"]=Tn).__name__="hacksaw.core.Context",Tn.__super__=Y,Tn.prototype=t(Y.prototype,{render:function(t){Y.prototype.render.call(this,t)},update:function(t){Y.prototype.update.call(this,t),null!=this._soundEngine&&this._soundEngine.update(t)},init:function(){var e=this;if(Y.prototype.init.call(this),q.tweenFunc1(function(t){},0,100,.05,null,null,null,null,null,null,null,{fileName:"hacksaw/core/Context.hx",lineNumber:122,className:"hacksaw.core.Context",methodName:"init"}).onFinish(function(){}),this.setupFSM(),this.parseBranding(),null!=this._config.shaderConfigs)for(var t=0,n=this._config.shaderConfigs;t<n.length;){var s=n[t];++t,null!=s.enabledDevices?this.appModel.enableShaderDevices.h[s.name]=s.enabledDevices:null!=s.disabledDevices&&(this.appModel.disableShaderDevices.h[s.name]=s.disabledDevices)}this.appModel.freezeSignal.connect(function(t){t?e._soundEngine.pause():e._soundEngine.resume()}),this.s2d.addEventListener(function(t){2==t.kind._hx_index&&(t.propagate=!1,e.appModel.stageMouseX=t.relX,e.appModel.stageMouseY=t.relY)}),this.s2d.ctx.defaultSmooth=!0,this.appModel.customRenderCallback=function(t){e.s2d.render(t)},this.get_baseEntity().add(this._casinoModel),this.get_baseEntity().add(this._soundTriggers)},addSoundEventHandler:function(e){var n=this;this._gameChannel.subscribe(e.id,function(t){n._soundEngine.handleEvent(e,t)})},loadAssets:function(t){var e,n,s=this;null==this._casinoChannel||null==this._gameChannel?_u.delay(function(){s.loadAssets(t)},50):(hu.ensureMipmap(this.preloaderTile.innerTex),(e=new xt(this.preloaderTile)).smooth=!0,(n=null)!=this.preloaderBackplateTile&&(hu.ensureMipmap(this.preloaderBackplateTile.innerTex),(n=new xt(this.preloaderBackplateTile)).smooth=!0),this._preloader=new fh(e,n,this.s2d,this._config.preloader),this._assetsDone=t,this.subscribe(),this._casinoChannel.publish("gameReady"))},setBackgroundColor:function(t){var e=this;null==this.engine?qu.delay(function(){e.setBackgroundColor(t)},100):this.engine.backgroundColor=t},loadComplete:function(){for(var t=0,e=b.getClassFields(Fh);t<e.length;){var n=e[t];++t,Z.field(this._config.assets,"fonts").h[n]=this._assetContainers.fonts.h[n]}for(t=0,e=b.getClassFields(bh);t<e.length;){n=e[t];++t,Z.field(this._config.assets,"bitmapFonts").h[n]=this._assetContainers.bitmapFonts.h[n]}this._assetsDone(),this._config.onLoaded()},mapInjections:function(){Y.prototype.mapInjections.call(this);var t=this._injector.map(mh);t.provider=new P_(this._casinoModel,t._injector),(t=this._injector.map(gh)).provider=new P_(this._soundTriggers,t._injector)},setupFSM:function(){this._fsm=new Bc(new Fc(this._injector)),this._fsmController=new Ic(this._fsm),this._casinoModel.fsmController=this._fsmController;var t=this._injector.map(Ic);t.provider=new P_(this._fsmController,t._injector)},initSounds:function(){var h=this;return $d.irreversible(function(t){for(var e={sounds:h._config.soundConfigs.sounds,pools:h._config.soundConfigs.pools,groups:h._config.soundConfigs.groups,sequences:h._config.soundConfigs.sequences},n=0,s=Z.fields(h._assetContainers.sounds);n<s.length;)for(var i=s[n],a=(++n,0),r=e.sounds;a<r.length;){var l=r[a];++a,i==l.id&&(l.data=Z.field(h._assetContainers.sounds,i))}h._soundEventConfig={events:h._config.soundConfigs.events},h.addBaseSoundEvents(h._soundEventConfig),h._soundEngine=new Iu(new Bu(e,h._soundEventConfig),function(){t(null)},function(t){h._soundTriggers.handleEvent(t)},!1);for(n=0,s=h._soundEventConfig.events;n<s.length;){var o=[s[n]];++n,h._gameChannel.subscribe(o[0].id,function(e){return function(t){h._soundEngine.handleEvent(e[0],t)}}(o)),h._casinoChannel.subscribe(o[0].id,function(e){return function(t){h._soundEngine.handleEvent(e[0],t)}}(o))}})},startSounds:function(){var i=this;qu.delay(function(){for(var t=i._soundEventConfig.events,e=[],n=0;n<t.length;){var s=t[n];++n,"initPlay"==s.id&&e.push(s)}null!=e&&0<e.length&&i._soundEngine.handleEvent(e[0])},100),window.document.removeEventListener("touchstart",W(this,this.startSounds),!0),window.document.removeEventListener("touchend",W(this,this.startSounds),!0),window.document.removeEventListener("click",W(this,this.startSounds),!0)},addBaseSoundEvents:function(t){t.events.push({id:"muteSound",actions:[{type:"muteGroup",id:"master"}]}),t.events.push({id:"enableSound",actions:[{type:"unmuteGroup",id:"master"}]}),t.events.push({id:"muteMusic",actions:[{type:"muteGroup",id:"music"}]}),null!=wt.find(er.__cast(this._config.soundConfigs.groups,Array),function(t){return"music"==t.id})?t.events.push({id:"enableMusic",actions:[{type:"unmuteGroup",id:"music"}]}):this._casinoChannel.publish("noMusicSupport")},subscribe:function(){var o=this;this._casinoChannel.subscribe("initGame",function(t){var e=t.channel,n=(o._casinoModel.channel=null!=e?e:"desktop",o._casinoModel.mode=t.mode,null==t.language?"en":Ja.string(t.language)),s=(o._casinoModel.language=n,null),e=t.branding;o._assetConfig={pack:null!=e?e:"default",platform:"mobile"==o._casinoModel.channel?o._config.mobileAssetDir:o._config.desktopAssetDir,locale:n.toLowerCase(),formats:[{type:g.Sound,extension:".webm"}]},o.preload(function(t){null!=o._preloader&&(s!=t&&(o._casinoChannel.publish("preloaderProgress",{progress:t}),s=t),o._preloader.progress(t))},function(){o.initSounds().handle(function(){o.loadComplete(),window.document.addEventListener("touchstart",W(o,o.startSounds),!0),window.document.addEventListener("touchend",W(o,o.startSounds),!0),window.document.addEventListener("click",W(o,o.startSounds),!0)})})}),this._casinoChannel.subscribe("startGame",function(t){o._casinoModel.betLevels=t.betLevels,o._casinoModel.betLevelIndex=t.betLevelIndex,o._casinoModel.betAmount=o._casinoModel.betLevels[o._casinoModel.betLevelIndex];var e=null!=t.gameInfoData.baseBetLevel?Hu.parseString(Ja.string(t.gameInfoData.baseBetLevel)):null;o._casinoModel.baseBetLevel=e,o._casinoModel.jurisdiction=t.jurisdiction,o._casinoModel.featureFlags=new Ah(t.disabledTurbo,t.disabledSuperTurbo,t.disabledSlamStop,t.disabledAutoplay),o._casinoModel.uiMargins={top:t.uiMargins.top,right:t.uiMargins.right,bottom:t.uiMargins.bottom,left:t.uiMargins.left}}),this._gameChannel.subscribe("removePreloader",function(t){o.appModel.customRenderCallback=null,o._preloader.dispose(),o.setBackgroundColor(o._config.backgroundColor);var e=document.createElement("div");e.id="PreloadIndicator",document.body.appendChild(e)}),this._casinoChannel.subscribe("betAccepted",function(t){var e,n,s,i,a,r,l;o._casinoModel.roundId!=Ja.string(t.roundId)&&(l=t.events[0],o._casinoModel.betAmount=t.betAmount,o._casinoModel.roundId=Ja.string(t.roundId),o._casinoModel.jackpotWin=t.jackpotWin,o._casinoModel.recieveNewBetData(t.events),o._casinoModel.betAccepted=!0,e=Hu.parseString(Ja.string(l.wa)),l=Hu.parseString(Ja.string(l.wc)),o._casinoModel.currentFeatureBuyData=gn.fromDynamic(t.activeFeatureBuyData),0==(t=0|+e.high)&&(t=Yu.ucompare(e.low,0)),(l=!((e.high<0?-1:t)<=0)||(0==(t=0|+l.high)&&(t=Yu.ucompare(l.low,0)),0<(l.high<0?-1:t)))?(o._casinoModel.win=e,t=o._casinoModel.betAmount,r=65535&e.low,i=e.low>>>16,a=Yu._mul(r,100),n=Yu._mul(i,100),r=Yu._mul(r,0),s=a,i=(Yu._mul(i,0)+(r>>>16)|0)+(n>>>16)|0,Yu.ucompare(s=a+(r<<=16)|0,r)<0&&(++i,i|=0),Yu.ucompare(s=s+(n<<=16)|0,n)<0&&(++i,i|=0),i=i+(Yu._mul(e.low,0)+Yu._mul(e.high,100)|0)|0,a=Wu.divMod(Wu.divMod(new ju(i,s),t).quotient,new ju(0,100)),r=function(t){for(;t.length<2;)t="0"+t;return t}(Wu.toString(a.modulus)),l=parseFloat((null==a.quotient?"null":Wu.toString(a.quotient))+"."+r),o._casinoModel.winFactor=l):(o._casinoModel.win=null,o._casinoModel.winFactor=null))}),this._casinoChannel.subscribe("roundStarted",function(t){o._casinoModel.featureMode=!1;t=t.isFeatureSpin;o._casinoModel.set_featureSpinActive(null!=t&&t)}),this._casinoChannel.subscribe("resultDisplay",function(t){o._casinoModel.betAccepted=!1}),this._casinoChannel.subscribe("startAutoplay",function(t){o._casinoModel.featureFlags.disabledAutoplay||(o._casinoModel.autoplay=!0,t=t.stopAutoplayOnFeature,o._casinoModel.stopAutoplayOnFeature=null!=t&&t)}),this._casinoChannel.subscribe("stopAutoplay",function(t){o._casinoModel.autoplay=!1}),this._casinoChannel.subscribe("autoplayEnded",function(t){o._casinoModel.autoplay=!1}),this._casinoChannel.subscribe("enterFreeRoundMode",function(t){o._casinoModel.freeRoundMode=!0}),this._casinoChannel.subscribe("exitFreeRoundMode",function(t){o._casinoModel.freeRoundMode=!1}),this._casinoChannel.subscribe("featureEnter",function(t){t=null!=t?t.resetFeatureCount:null,null!=t&&!t||(o._casinoModel.featureRoundsPlayed=0),o._casinoModel.set_featureSpinActive(!1),o._casinoModel.featureMode=!0,t=o._casinoModel.currentFeatureBuyData;null!=t&&(t.betCostMultiplierBaseGameEffect=!1)}),this._casinoChannel.subscribe("featureRoundStarted",function(t){o._casinoModel.featureRoundsPlayed+=1}),this._casinoChannel.subscribe("scaleResize",function(t){o._casinoModel.uiMargins=t.uiMargins,o._casinoModel.uiWinFieldPos=t.uiWinFieldPos}),this._casinoChannel.subscribe("logError",function(t){o.appModel.freezeSignal.emit(!0)}),this._casinoChannel.subscribe("enableTurbo",function(t){o._casinoModel.featureFlags.disabledTurbo||(o._casinoModel.turbospin=!0)}),this._casinoChannel.subscribe("disableTurbo",function(t){o._casinoModel.turbospin=!1}),this._casinoChannel.subscribe("enableSuperTurbo",function(t){o._casinoModel.featureFlags.disabledTurbo||o._casinoModel.featureFlags.disabledSuperTurbo||(o._casinoModel.superTurbospin=!0)}),this._casinoChannel.subscribe("disableSuperTurbo",function(t){o._casinoModel.superTurbospin=!1}),this._gameChannel.subscribe("enterMode",function(t){o._casinoModel.gameMode=t.gameMode})},parseBranding:function(){for(var t=0,e=Z.fields(this._assetContainers.brandingConfigs);t<e.length;)for(var n=Z.field(this._assetContainers.brandingConfigs,e[t++]),s=0,i=Z.fields(n);s<i.length;)for(var a=i[s],r=(++s,Z.field(n,a)),l=0,o=Z.fields(r);l<o.length;)for(var h=o[l],u=(++l,Z.field(r,h)),_=0,c=Z.fields(u);_<c.length;){var d=c[_],p=(++_,Z.field(u,d));if("style"==a&&null!=this._config.styleData)for(var f=0,g=Z.fields(p);f<g.length;){var m=g[f],A=(++f,Z.field(p,m));switch(h){case"animations":Z.field(this._config.styleData.animations,d)[m]=A;break;case"images":Z.field(this._config.styleData.images,d)[m]=A;break;case"text":Z.field(this._config.styleData.text,d)[m]=A}}else"game"==a&&null!=this._config.gameData&&(Z.field(this._config.gameData,h)[d]=p)}},__class__:Tn}),(e["hacksaw.core.ShaderConfig"]=Fn).__name__="hacksaw.core.ShaderConfig",Fn.prototype={__class__:Fn},function(t,e,n,s){this._nextBoundsSize={x:0,y:0},this._lastBoundsSize={x:0,y:0},this._backplateHolder=null;var i=this,e=(window.document.getElementById("ProgressIndicator").classList.remove("is-visible"),null==s&&(s={offset:{x:0,y:0},width:290,height:20,color:-1}),null!=e&&(this._backplateImage=e,this._backplateHolder=new Pl(n),this._backplateHolder.addChild(this._backplateImage),this._backplateHolder.set_visible(!1)),this._holder=new Pl(n),this._config=s,this._config.marg),e=(this._config.marg=null!=e?e:{x:100,y:100},this._scene=n,this._holder.addChild(t),new Bt(this._holder)),n=(e.beginFill(s.color,1),e.drawRect(0,0,1,s.height),e.endFill(),e.set_visible(!1),t.getSize());t.alpha=this._config.alphaTween?.8:1,e.posChanged=!0,e.x=(n.xMax-n.xMin-s.width)/2+s.offset.x,e.posChanged=!0,e.y=t.y+(n.yMax-n.yMin)/2+s.offset.y,this._bar=e,this._image=t,this._start=Jn.now()/1e3,this._holder.set_visible(!1),this._lastSceneSize={x:0,y:0},this.scale(),this._lastSceneSize={x:0,y:0},this._scene.ctx.defaultSmooth=!0,qu.delay(function(){null!=i._backplateHolder&&i._backplateHolder.set_visible(!0),null!=i._holder&&i._holder.set_visible(!0)},300)}),gh=((e["hacksaw.core.Preloader"]=fh).__name__="hacksaw.core.Preloader",fh.prototype={progress:function(t){var e=t/100,e=((Jn.now()/1e3-this._start)/e*(1/e)<5&&!this._tweeningImage&&this._config.alphaTween&&(this._tweeningImage=!0,q.serial([q.to(this._image,{alpha:1},.5,hp.expoIn,null,null,null,null,null,null,{fileName:"hacksaw/core/Preloader.hx",lineNumber:94,className:"hacksaw.core.Preloader",methodName:"progress"}),q.to(this._image,{alpha:.8},.5,hp.expoOut,null,null,null,null,null,null,{fileName:"hacksaw/core/Preloader.hx",lineNumber:95,className:"hacksaw.core.Preloader",methodName:"progress"})],null,{fileName:"hacksaw/core/Preloader.hx",lineNumber:93,className:"hacksaw.core.Preloader",methodName:"progress"})),this._bar.set_visible(!0),this._bar);e.posChanged=!0,e.scaleX=t/100*this._config.width,this.scale()},dispose:function(){var t=this._holder;null!=t&&null!=t.parent&&t.parent.removeChild(t),null!=(t=this._image)&&null!=t.parent&&t.parent.removeChild(t),this._holder=null,(this._image=null)!=this._backplateHolder&&(null!=(t=this._backplateHolder)&&null!=t.parent&&t.parent.removeChild(t),(this._backplateHolder=null)!=(t=this._backplateImage)&&null!=t.parent&&t.parent.removeChild(t),this._backplateImage=null)},scale:function(){var t=this;if(null!=this._holder&&(this._lastBoundsSize.x!=this._nextBoundsSize.x||this._lastBoundsSize.y!=this._nextBoundsSize.y||this._lastSceneSize.x!=this._scene.width||this._lastSceneSize.y!=this._scene.height)){var e=this._scene.width-this._scene.width/Tn.REFERENCE_SIZE*2*this._config.marg.x,n=this._scene.height-this._scene.height/Tn.REFERENCE_SIZE*2*this._config.marg.y,s=this._holder.getBounds(),e=Math.min(e/(s.xMax-s.xMin),n/(s.yMax-s.yMin));if((l=this._holder).posChanged=!0,l.scaleX*=e,l.posChanged=!0,l.scaleY*=e,s=this._holder.getBounds(),(l=this._holder).posChanged=!0,l.x=.5*(this._scene.width-(s.xMax-s.xMin)),(l=this._holder).posChanged=!0,l.y=.5*(this._scene.height-(s.yMax-s.yMin)),null!=this._backplateHolder){var i,s=this._backplateHolder.getBounds(),a=function(){return Math.min(Math.min(t._scene.width,t._scene.height)/Math.max(s.xMax-s.xMin,s.yMax-s.yMin),window.devicePixelRatio)},n=this._config.backplate;if(null==n)i=null;else if(t._nextBoundsSize={x:s.xMax-s.xMin,y:s.yMax-s.yMin},null==(r=n.scaleMode))i=a();else switch(r){case"fill":i=Math.max(t._scene.width/(s.xMax-s.xMin),t._scene.height/(s.yMax-s.yMin));break;case"maxAxis":i=Math.max(t._scene.width,t._scene.height)/Math.max(s.xMax-s.xMin,s.yMax-s.yMin);break;default:i=a()}e=null==i?a():i;(l=this._backplateHolder).posChanged=!0,l.scaleX*=e,l.posChanged=!0,l.scaleY*=e;(l=this._holder).posChanged=!0,l.scaleX*=e,l.posChanged=!0,l.scaleY*=e,s=this._backplateHolder.getBounds(),this._lastBoundsSize={x:s.xMax-s.xMin,y:s.yMax-s.yMin};var r,l=this._backplateHolder,o=.5*(this._scene.width-(s.xMax-s.xMin));if(l.posChanged=!0,l.x=o,null!=this._config.backplate&&null!=this._config.backplate.anchor)if(null==(r=this._config.backplate.anchor)){var l=this._backplateHolder,o=.5*(this._scene.height-(s.yMax-s.yMin));l.posChanged=!0,l.y=o}else switch(r){case"bottom":l=this._backplateHolder,o=this._scene.height-(s.yMax-s.yMin);l.posChanged=!0,l.y=o;break;case"center":l=this._backplateHolder,o=.5*(this._scene.height-(s.yMax-s.yMin));l.posChanged=!0,l.y=o;break;case"right":l=this._backplateHolder,o=this._scene.width-(s.xMax-s.xMin),l=(l.posChanged=!0,l.x=o,this._backplateHolder),o=.5*(this._scene.height-(s.yMax-s.yMin));l.posChanged=!0,l.y=o;break;case"top":(l=this._backplateHolder).posChanged=!0,l.y=0;break;default:l=this._backplateHolder,o=.5*(this._scene.height-(s.yMax-s.yMin));l.posChanged=!0,l.y=o}else{l=this._backplateHolder,o=.5*(this._scene.height-(s.yMax-s.yMin));l.posChanged=!0,l.y=o}}this._lastSceneSize={x:this._scene.width,y:this._scene.height}}},__class__:fh},function(t){this._elapsed=0,this._queued=[],p.call(this),this._addEventHandler=t,this.componentType=el.Actor}),mh=((e["hacksaw.core.components.actor.SoundTriggerComponent"]=gh).__name__="hacksaw.core.components.actor.SoundTriggerComponent",gh.__super__=p,gh.prototype=t(p.prototype,{init:function(){this._casinoModel=this.owner.getFromParentsByName(mh.BASE_NAME,mh)},getDuration:function(t){return null==t&&(t=1),null==this._currentBar?null:60/this._currentBar.bpm*t},handleEvent:function(t){switch(t._hx_index){case 0:this._syncStart=null!=this._syncStart?this._syncStart:this._elapsed,this._currentBar={start:this._elapsed,bar:t.bar,bpm:t.bpm,signature:t.signature};break;case 1:for(var n=t.id,s=t.instance,e=function(t){var e,t=t.type;return 1==t._hx_index&&(e=t.instance,t.id==n)&&(null==e||e==s)},i=[],a=0,r=(f=this._queued).length;a<r;){var l=a++;i.push({v:f[l],i:l})}for(a=[],r=0;r<i.length;){var o=i[r];++r,e(o.v)&&a.push(o)}for(var h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].i;for(;0<h.length;)f.splice(h.pop(),1);for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].v;Xd.each(h,function(t){Hd.invoke(t.handler,null)});for(var _=this._queued,a=[],r=0;r<h.length;){o=h[r];++r,o.once||a.push(o)}this._queued=_.concat(a);break;case 2:for(var c=t.id,d=t.instance,e=function(t){var e,t=t.type;return 2==t._hx_index&&(e=t.instance,t.id==c)&&(null==e||e==d)},i=[],a=0,r=(f=this._queued).length;a<r;){l=a++;i.push({v:f[l],i:l})}for(a=[],r=0;r<i.length;){o=i[r];++r,e(o.v)&&a.push(o)}for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].i;for(;0<h.length;)f.splice(h.pop(),1);for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].v;Xd.each(h,function(t){Hd.invoke(t.handler,null)});for(_=this._queued,a=[],r=0;r<h.length;){o=h[r];++r,o.once||a.push(o)}this._queued=_.concat(a);break;case 7:for(e=function(t){return 3==t.type._hx_index},i=[],a=0,r=(f=this._queued).length;a<r;){l=a++;i.push({v:f[l],i:l})}for(a=[],r=0;r<i.length;){o=i[r];++r,e(o.v)&&a.push(o)}for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].i;for(;0<h.length;)f.splice(h.pop(),1);for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].v;Xd.each(h,function(t){Hd.invoke(t.handler,null)});for(_=this._queued,a=[],r=0;r<h.length;){o=h[r];++r,o.once||a.push(o)}this._queued=_.concat(a);break;case 8:for(e=function(t){return 4==t.type._hx_index},i=[],a=0,r=(f=this._queued).length;a<r;){l=a++;i.push({v:f[l],i:l})}for(a=[],r=0;r<i.length;){o=i[r];++r,e(o.v)&&a.push(o)}for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].i;for(;0<h.length;)f.splice(h.pop(),1);for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].v;Xd.each(h,function(t){Hd.invoke(t.handler,null)});for(_=this._queued,a=[],r=0;r<h.length;){o=h[r];++r,o.once||a.push(o)}this._queued=_.concat(a);break;case 9:var p=t.group;this._currLevels=t.levels;for(var f,e=function(t){t=t.type;return 5==t._hx_index&&t.group==p},i=[],a=0,r=(f=this._queued).length;a<r;){l=a++;i.push({v:f[l],i:l})}for(a=[],r=0;r<i.length;){o=i[r];++r,e(o.v)&&a.push(o)}for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].i;for(;0<h.length;)f.splice(h.pop(),1);for(h=new Array(a.length),r=0,u=a.length;r<u;)h[l=r++]=a[l].v;Xd.each(h,function(t){Hd.invoke(t.handler,null)});for(_=this._queued,a=[],r=0;r<h.length;){o=h[r];++r,o.once||a.push(o)}this._queued=_.concat(a)}},update:function(t){var s=this;if(null!=this._currentBar){for(var e=this._queued,n=[],i=0;i<e.length;){var a=e[i];switch(++i,(u=a.type)._hx_index){case 0:var r=u.count,l=s._elapsed-s._syncStart,o=s.getDuration(u.division)*(null==r?1:r),h=o-l%o<K_.dt;break;case 5:h=!0;break;default:h=!1}h&&n.push(a)}Xd.each(n,function(t){var e=t.type;switch(e._hx_index){case 0:var n=e.delay;0<n?s.after(n).handle(function(){Hd.invoke(t.handler,null)}):Hd.invoke(t.handler,null);break;case 5:Hd.invoke(t.handler,null)}});for(var e=this._queued,i=[],u=0;u<e.length;){var _,a=e[u],c=(++u,-1!=n.indexOf(a));switch((r=a.type)._hx_index){case 0:_=r.repeat;break;case 5:_=!0;break;default:_=!1}c&&!_||i.push(a)}this._queued=i,this._elapsed+=t}p.prototype.update.call(this,t)},get_baseName:function(){return"hacksaw.core.components.actor.SoundTriggerComponent"},__class__:gh}),function(){this.featureMode=!1,this.gameMode="base",this.superTurbospin=!1,this.turbospin=!1,this.autoplay=!1,this.language=null,this.currentFeatureBuyData=null,this.featureRoundsPlayed=0,this.featureRoundCurrentWin=new ju(0,0),this.jackpotWin=null,this.betAccepted=!1,this.lastEvent=null,this.currentEvent=null,this.betEvents=[],p.call(this),this.componentType=el.Model}),Ah=((e["hacksaw.core.components.model.CasinoModel"]=mh).__name__="hacksaw.core.components.model.CasinoModel",mh.__super__=p,mh.prototype=t(p.prototype,{recieveNewBetData:function(t){this.hasPendingEvents(),this.featureRoundCurrentWin=new ju(0,0),this.betEvents=t.slice(),this.popEvent()},hasPendingEvents:function(){return 0!=this.betEvents.length},popEvent:function(){return 0==this.betEvents.length?(this.currentEvent=null,this.eventData=null):(this.currentWin=new ju(0,0),this.lastEvent=this.currentEvent,this.currentEvent=this.betEvents.shift(),this.updateWinData(),this.eventData=this.currentEvent.c,hacksawCasino.PubSub.getChannel("casino").publish("popEvent",{eventsLeft:this.betEvents.length}),this.currentEvent)},getEventData:function(){return this.eventData},get_turboMode:function(){return this.currentTurboValue({normal:null,turbo:"turbo",superTurbo:"superTurbo"})},get_winFactorTierOffset:function(){var t=this.currentFeatureBuyData,e=parseFloat(null!=t?t.betCostMultiplier:null),t=isNaN(e)?null:e,e=this.currentFeatureBuyData;return null!=e&&e.betCostMultiplierBaseGameEffect&&null!=t?t:0},set_featureSpinActive:function(t){var e=this.currentFeatureBuyData;return null!=e&&(e.isFeatureSpin=t),t},currentTurboValue:function(t){return this.superTurbospin?t.superTurbo:this.turbospin?t.turbo:t.normal},updateWinData:function(){var t,e,n,s=this.currentEvent,i=Hu.parseString(Ja.string(s.wa)),a=Hu.parseString(Ja.string(s.wc)),s=Hu.parseString(Ja.string(s.awa)),r=0|+i.high;0==r&&(r=Yu.ucompare(i.low,0)),!((i.high<0?-1:r)<=0)||(0==(r=0|+a.high)&&(r=Yu.ucompare(a.low,0)),0<(a.high<0?-1:r))?(a=65535&(this.win=i).low,r=i.low>>>16,n=Yu._mul(a,100),t=Yu._mul(r,100),a=Yu._mul(a,0),e=n,r=(Yu._mul(r,0)+(a>>>16)|0)+(t>>>16)|0,Yu.ucompare(e=n+(a<<=16)|0,a)<0&&(++r,r|=0),Yu.ucompare(e=e+(t<<=16)|0,t)<0&&(++r,r|=0),r=r+(Yu._mul(i.low,0)+Yu._mul(i.high,100)|0)|0,n=Wu.divMod(Wu.divMod(new ju(r,e),this.betAmount).quotient,new ju(0,100)),a=function(t){for(;t.length<2;)t="0"+t;return t}(Wu.toString(n.modulus)),this.winFactor=parseFloat((null==n.quotient?"null":Wu.toString(n.quotient))+"."+a)):(this.win=null,this.winFactor=0),this.accumulatedWin=s},get_baseName:function(){return"hacksaw.core.components.model.CasinoModel"},__class__:mh,__properties__:t(p.prototype.__properties__,{set_featureSpinActive:"set_featureSpinActive",get_turboMode:"get_turboMode",get_winFactorTierOffset:"get_winFactorTierOffset"})}),function(t,e,n,s){this.disabledAutoplay=!1,this.disabledSlamStop=!1,this.disabledSuperTurbo=!1,this.disabledTurbo=!1,null!=t&&(this.disabledTurbo=t),null!=e&&(this.disabledSuperTurbo=e),null!=n&&(this.disabledSlamStop=n),null!=s&&(this.disabledAutoplay=s)}),xh=((e["hacksaw.core.components.model.FeatureFlags"]=Ah).__name__="hacksaw.core.components.model.FeatureFlags",Ah.prototype={__class__:Ah},(e["hacksaw.core.components.model.ExcitementModel"]=Dn).__name__="hacksaw.core.components.model.ExcitementModel",Dn.__super__=p,Dn.prototype=t(p.prototype,{init:function(){function t(t){e._wins.push({factor:t.winFactor,when:e._elapsed}),e._winChecked=.1,0<t.duration&&(e._stickDelay=qu.delay(function(){e.stick=!0},300))}var e=this;hacksawCasino.PubSub.getChannel("game").subscribe("win",t),hacksawCasino.PubSub.getChannel("game").subscribe("lineWin",t),hacksawCasino.PubSub.getChannel("game").subscribe("winCountComplete",function(t){null!=e._stickDelay&&(e._stickDelay.stop(),e._stickDelay=null),e.stick=!1,e._winChecked=0}),hacksawCasino.PubSub.getChannel("game").subscribe("enterMode",function(t){e.reset(t.gameMode)}),p.prototype.init.call(this)},update:function(t){if(this.get_enabled()&&!this.stick&&(this._winChecked+=t,this._elapsed+=t,.1<=this._winChecked)){for(var e,n,s,t=wt.fold(this._wins,function(t,e){return e>t.factor?e:t.factor},0),i=(t!=this.excitement&&(this.excitement=t,t=hacksawCasino.PubSub.getChannel("casino"),e="excitement_"+this._mode,n=this.floor,s=this.excitement-(null!=(s=this.owner.getFromParentsByName(mh.BASE_NAME,mh))?s.get_winFactorTierOffset():null),t.publish(e,{excitement:Math.max(n,null!=s?s:0)})),this._wins),a=[],r=0;r<i.length;){var l=i[r];++r,this._elapsed-l.when<17&&a.push(l)}this._wins=a,this._winChecked=0}},reset:function(t){this._wins=[],this._mode=t,this._winChecked=0,this.stick=!1,this.excitement=0},get_enabled:function(){return this._enabled},get_baseName:function(){return"hacksaw.core.components.model.ExcitementModel"},__class__:Dn}),(e["hacksaw.core.components.view.SplashComponent"]=En).__name__="hacksaw.core.components.view.SplashComponent",En.__super__=j,En.prototype=t(j.prototype,{init:function(){for(var t=this.owner,t=null!=t._compMap?t._compMap.h[$.BASE_NAME]:null,e=(this._fit=t instanceof $?t:null,this._appModel=this.owner.getFromParentsByName(T.BASE_NAME,T),0),n=this._config.splashes;e<n.length;){var s=n[e],i=(++e,new Vl(new _o(this.object.object))),a=(Ql.init(i,null),i),r=(null!=s.header&&(r=new yh(s.header),this._displayables.push(r),a.addChild(r.toObject())),new yh(s.body)),s=(this._displayables.push(r),a.addChild(r.toObject()),new yh(s.background));this._displayables.push(s),a.addChild(s.toObject()),this._splashes.push(a)}var t=new yh(this._config.logo),i=(this._displayables.push(t),new Vl(new _o(this.object.object)));Ql.init(i,null),this._logo=i,this._logo.addChild(t.toObject()),this.object.addChild(this._logo.object),null!=this._config.volatility&&(t=new yh(this._config.volatility),this._displayables.push(t),i=new Vl(new _o(this.object.object)),Ql.init(i,null),this._volatility=i,this._volatility.addChild(t.toObject()),this.object.addChild(this._volatility.object)),null!=this._config.topHeader&&(t=new yh(this._config.topHeader),this._displayables.push(t),i=new Vl(t.toObject()),Ql.init(i,null),this._topHeader=i,this.object.addChild(this._topHeader.object)),null!=this._config.clickToContinue&&(t=new yh(this._config.clickToContinue),this._displayables.push(t),i=new Vl(new _o(this.object.object)),Ql.init(i,null),this._clickToContinue=i,this._clickToContinue.addChild(t.toObject()),this.object.addChild(this._clickToContinue.object)),this.layout(),this._timeLeft=this._config.splashTimeout},dispose:function(){this.object.object.removeChildren(),j.prototype.dispose.call(this)},update:function(e){for(var t=this,n=(Ql.update(this.object,e),0),s=this._splashes;n<s.length;)Ql.update(s[n++],e);Ql.update(this._logo,e);var i=this._clickToContinue;null!=i&&Ql.update(i,e),null!=(i=this._volatility)&&Ql.update(i,e),0<this._timeLeft&&(this._timeLeft-=e,this._timeLeft<=0)&&(this._activeSplashIndex=(this._activeSplashIndex+1)%this._splashes.length,this._onSplashFocused=this.onSplashFocus(this._activeSplashIndex),this._onSplashFocused.handle(function(){t._timeLeft=t._config.splashTimeout,t._onSplashFocused=null})),Xd.each(this._displayables,function(t){t.update(e)})},layout:function(){var n=this;if(this.inited)if(Xd.each(this._displayables,function(t){t.layout(n._appModel.orientation)}),null!=this._onSplashFocused)this._onSplashFocused.handle(function(){n.layout()});else{switch(this._timeLeft=this._config.splashTimeout,this._appModel.orientation){case"landscape":Xd.eachi(this._splashes,function(t,e){t.setPosition((e/(n._splashes.length-1)*2-1)*n._config.xSpacing,n._config.splashes[e].yOffset,0),t.set_visible(!0)});break;case"portrait":Xd.eachi(this._splashes,function(t,e){t.set_visible(e==n._activeSplashIndex),t.setPosition(0,0,0)})}this._fit.set_enabled(!0)}},onSplashFocus:function(t){var e=this;switch(this._appModel.orientation){case"landscape":return $d.NOISE;case"portrait":this._fit.set_enabled(!1);var n=this._splashes.length,s=this._splashes[t],i=this._splashes[((t-1)%n+n)%n],n=(s.set_visible(!0),i.set_visible(!0),$d.inParallel([Ql.tween(s,[Rl.Position(new At(new Ll(0,null,null,null),new Ll(-10,null,null,null),null,null,1,null,function(t){return-t*(t-2)},null,null,null,null,null))]),Ql.tween(i,[Rl.Position(new At(new Ll(10,null,null,null),new Ll(0,null,null,null),null,null,1,null,function(t){return t*t},null,null,null,null,null))])]));return n.handle(function(){s.set_visible(!0),i.set_visible(!1),e._fit.set_enabled(!0),i.setPosition(0,0,0)}),$d.noise(n)}},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:En}),(e["hacksaw.core.components.view.SplashCardConfig"]=Pn).__name__="hacksaw.core.components.view.SplashCardConfig",Pn.prototype={__class__:Pn},(e["hacksaw.core.components.view.SplashComponentConfig"]=zn).__name__="hacksaw.core.components.view.SplashComponentConfig",zn.prototype={__class__:zn},(e["hacksaw.core.components.view.TextDisplayComponent"]=Rn).__name__="hacksaw.core.components.view.TextDisplayComponent",Rn.__super__=j,Rn.prototype=t(j.prototype,{init:function(){null!=this._showTextArgs&&this.showText(this._showTextArgs.text,this._showTextArgs.centerReset),j.prototype.init.call(this)},update:function(t){j.prototype.update.call(this,t);var e=this._textElement;null!=e&&e.update(t)},dispose:function(){var t=this._textElement;null!=t&&t.dispose(),j.prototype.dispose.call(this)},showText:function(t,e){null==e&&(e=!1),null==this._textElement&&(this._textElement=this.addTextElement()),null!=t&&this._textElement.showText(t,e)},addTextElement:function(){var t=Kh.create(this._config);return this.object.addChild(t),t.set_anchor(this._anchor),t},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Rn}),(e["hacksaw.core.components.view.h3d.DisplayComponent"]=Vn).__name__="hacksaw.core.components.view.h3d.DisplayComponent",Vn.__super__=j,Vn.prototype=t(j.prototype,{setup:function(){this._instance=this._config.displayable.get_instance(),this.object.addChild(this._config.displayable.toObject())},update:function(t){this.get_displayable().update(t),j.prototype.update.call(this,t)},get_displayable:function(){return this._config.displayable},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Vn,__properties__:t(j.prototype.__properties__,{get_displayable:"get_displayable"})}),(e["hacksaw.core.components.view.h3d.DisplayConfig"]=Qn).__name__="hacksaw.core.components.view.h3d.DisplayConfig",Qn.prototype={__class__:Qn},(e["hacksaw.core.components.view.h3d.TileTargetComponent"]=On).__name__="hacksaw.core.components.view.h3d.TileTargetComponent",On.__super__=j,On.prototype=t(j.prototype,{setTile:function(t,e){null!=t&&(null==this.tileElement?(this.tileElement=this.createElement(t),this.object.addChild(this.tileElement)):this.tileElement.setTile(t,e))},dispose:function(){this.tileElement.dispose(),j.prototype.dispose.call(this)},update:function(t){j.prototype.update.call(this,t),null!=this.tileElement&&this.tileElement.update(t)},createElement:function(t){throw tr.thrown("Implement this in subclass")},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:On}),(e["hacksaw.core.components.view.h3d.TilePlaneComponent"]=Ln).__name__="hacksaw.core.components.view.h3d.TilePlaneComponent",Ln.__super__=On,Ln.prototype=t(On.prototype,{createElement:function(t){return Jh.create(new $h(t,null,null,this._config.scale,this._config.blendMode,this._config.depthTest,null,null,this._config.shadows,this._config.shadows,this._config.fixedWidth,this._config.fixedHeight,null,null))},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Ln}),(e["hacksaw.core.components.view.h3d.TilePlaneComponentConfig"]=Un).__name__="hacksaw.core.components.view.h3d.TilePlaneComponentConfig",Un.prototype={__class__:Un},(e["hacksaw.core.config.PreloaderData"]=Nn).__name__="hacksaw.core.config.PreloaderData",Nn.prototype={__class__:Nn},(e["hacksaw.core.config.SplashData"]=Gn).__name__="hacksaw.core.config.SplashData",Gn.prototype={__class__:Gn},(e["hacksaw.core.config.TextDisplayConfig"]=Xn).__name__="hacksaw.core.config.TextDisplayConfig",Xn.prototype={__class__:Xn},d["hacksaw.core.data.AnimationType"]={__ename__:!0,__constructs__:null,Tile:((c=function(t){return{_hx_index:0,anim:t,__enum__:"hacksaw.core.data.AnimationType",toString:l}})._hx_name="Tile",c.__params__=["anim"],c),Skin:((c=function(t){return{_hx_index:1,anim:t,__enum__:"hacksaw.core.data.AnimationType",toString:l}})._hx_name="Skin",c.__params__=["anim"],c),Spine:((c=function(t){return{_hx_index:2,anim:t,__enum__:"hacksaw.core.data.AnimationType",toString:l}})._hx_name="Spine",c.__params__=["anim"],c)}),bh=(xh.__constructs__=[xh.Tile,xh.Skin,xh.Spine],xh.__empty_constructs__=[],(e["hacksaw.core.data.SpineAnim"]=Yn).__name__="hacksaw.core.data.SpineAnim",Yn.prototype={__class__:Yn},(e["hacksaw.core.data.TileAnim"]=Wn).__name__="hacksaw.core.data.TileAnim",Wn.prototype={__class__:Wn},(e["hacksaw.core.data.SkinAnim"]=jn).__name__="hacksaw.core.data.SkinAnim",(e["hacksaw.core.data.AtlasInfo"]=Hn).__name__="hacksaw.core.data.AtlasInfo",Hn.prototype={__class__:Hn},function(){}),yh=((e["hacksaw.core.data.BitmapFontList"]=bh).__name__="hacksaw.core.data.BitmapFontList",function(t){this.config=t}),wh=((e["hacksaw.core.data.Displayable"]=yh).__name__="hacksaw.core.data.Displayable",yh.prototype={toObject:function(){var t=this.get_instance();switch(t._hx_index){case 0:return er.__cast(t.element,_o);case 1:return t.object;case 2:return t.animator.get_object();case 3:return er.__cast(t.element,_o)}},update:function(t){var e=this.get_instance();switch(e._hx_index){case 0:e.element.update(t);break;case 1:throw new tr("Object Displayable not implemented for Dialog");case 2:e.animator.update(t);break;case 3:e.element.update(t)}},create:function(t,e){null==e&&(e=!0);var n=this;switch(this._orientation=t=null==t?"portrait":t,this._orientation){case"landscape":var s=this.config.landscapeType,i=null==s?this.config.type:s;break;case"portrait":i=this.config.type}switch(i._hx_index){case 0:switch(i._hx_index){case 0:var a=i.atlas,r=i.defaultTile;_=i.info.animation?a.animation.frames[0]:null!=r?su.getTile(a,r):Jl.fromColor(0,0);break;case 2:_=i.tile;break;case 3:var a=i.style,r=i.size;_=iu.toTile(i.gradients,a.id,a.resolution,r.x,r.y);break;default:_=null}var l=Jh.create(new $h(er.__cast(_,Jl),null,null,this.config.scale,this.config.blendMode,this.config.depthTest,null,null,this.config.shadows,this.config.shadows,null,null,null,this.config.anchor));3==(a=this.config.type)._hx_index&&l.get_material().setUVRotation(3.141592653589793*a.style.rotation/180,!0),c=vh.Tile(l,new kh(lp.trigger(),lp.trigger()),new Bh(function(){},function(){}));break;case 1:var o=i.defaultState,l=Jh.create(new $h(Jl.fromColor(0,0),null,null,this.config.scale,this.config.blendMode,this.config.depthTest,null,null,this.config.shadows,this.config.shadows,null,null,null,this.config.anchor)),h=new zh(new Vh(er.__cast(l,_o),jd.mapValues(i.atlases,function(t){return xh.Tile(new Wn("tmp",null,null,null,new nu(t.atlas.animation,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null),!1))},new N),null,null)),u=lp.trigger();null!=o&&Ql.tween(l.tweenObject,[Rl.Scale(new At(new Ll(null,null,1,null),null,null,null,0,null,null,!0,null,null,null,null))]).handle(function(){u.handlers.invoke(o)}),c=vh.Animation(h,new Ih(lp.trigger(),lp.trigger(),lp.trigger()),new Th(function(){},function(){},function(){}));break;case 2:case 3:switch(i._hx_index){case 0:a=i.atlas,r=i.defaultTile;_=i.info.animation?a.animation.frames[0]:null!=r?su.getTile(a,r):Jl.fromColor(0,0);break;case 2:_=i.tile;break;case 3:a=i.style,r=i.size;_=iu.toTile(i.gradients,a.id,a.resolution,r.x,r.y);break;default:_=null}l=Jh.create(new $h(er.__cast(_,Jl),null,null,this.config.scale,this.config.blendMode,this.config.depthTest,null,null,this.config.shadows,this.config.shadows,null,null,null,this.config.anchor));3==(a=this.config.type)._hx_index&&l.get_material().setUVRotation(3.141592653589793*a.style.rotation/180,!0),c=vh.Tile(l,new kh(lp.trigger(),lp.trigger()),new Bh(function(){},function(){}));break;case 4:var _=i.tile,c=vh.Object(Eh.makeTileObject(i.model.toHmd(),function(t){return _.t},null,new R));break;case 5:var d=i.defaultState,l=Kh.create(new Xn(i.resource,i.strings,this.config.scale,null,this.config.depthTest,this.config.blendMode,this.config.shadows,this.config.rotation,this.config.anchor,null,null)),p=lp.trigger(),f=vh.Text(l,new Mh(p,lp.trigger(),lp.trigger()),new Sh(function(){},function(){},function(){}));null!=d&&Ql.tween(l.tweenObject,[Rl.Scale(new At(new Ll(null,null,1,null),null,null,null,0,null,null,!0,null,null,null,null))]).handle(function(){p.handlers.invoke(d)}),c=f}switch(this._instance=c,(a=this._instance)._hx_index){case 0:r=a.triggers,l=a.element;r.show.listen(function(t){null!=t.id?l.show(t.id):null!=t.text&&l.showText(t.text)}),r.update.listen(function(t){null!=t&&l.changeTextStyle(t)}),r.remove.listen(function(){null!=l&&null!=l.parent&&l.parent.removeChild(l)});break;case 2:r=a.triggers,h=a.animator;r.play.listen(function(t){h.play(t)}),r.remove.listen(function(){h.dispose()});break;case 3:var r=a.triggers,g=a.element;r.show.listen(function(t){var e=n.config.type,e=0==e._hx_index?""==t.id?Jl.fromColor(0,0):su.getTile(e.atlas,t.id):null;g.setTile(null==e?Jl.fromColor(0,0):e,n.config.scale)}),r.remove.listen(function(){null!=g&&null!=g.parent&&g.parent.removeChild(g)});break;default:throw new tr("Displayable type not implemented")}switch(t){case"landscape":this._landscapeInstance=this._instance;break;case"portrait":this._portraitInstance=this._instance}return e&&this.layout(t),this._instance},layout:function(t){var e="landscape"==(t=null==t?"portrait":t),n=null==(s=this.config.pos)?new R:s,s=this.config.landscapePos,n=!e||null==s?n:s,s=null==(s=this.config.rotation)?new R:s,e=e?this._landscapeInstance:this._portraitInstance,i=this._orientation!=t,a=this.toObject(),i=(i&&(a.flags&=-3,au.ignoreAllBounds(a),null==e?this.create(t,!1):this._instance=e),this.toObject());i.flags|=2,au.ignoreAllBounds(i,!1),i.x=n.x,i.flags|=1,i.y=n.y,i.flags|=1,i.z=n.z,i.flags|=1,i.flags|=1,i.setRotation(s.x,s.y,s.z),this._orientation=t,null==i.parent&&null!=a.parent&&a.parent.addChild(i)},get_instance:function(){var t=this._instance;return this._instance=null==t?this.create(this._orientation,!0):t,this._instance},__class__:yh,__properties__:{get_instance:"get_instance"}},(e["hacksaw.core.data.DisplayConfig"]=Zn).__name__="hacksaw.core.data.DisplayConfig",Zn.prototype={__class__:Zn},d["hacksaw.core.data.DisplayableType"]={__ename__:!0,__constructs__:null,Atlas:((c=function(t,e,n,s){return{_hx_index:0,atlas:t,info:e,defaultTile:n,size:s,__enum__:"hacksaw.core.data.DisplayableType",toString:l}})._hx_name="Atlas",c.__params__=["atlas","info","defaultTile","size"],c),AtlasAnimation:((c=function(t,e){return{_hx_index:1,atlases:t,defaultState:e,__enum__:"hacksaw.core.data.DisplayableType",toString:l}})._hx_name="AtlasAnimation",c.__params__=["atlases","defaultState"],c),Tile:((c=function(t){return{_hx_index:2,tile:t,__enum__:"hacksaw.core.data.DisplayableType",toString:l}})._hx_name="Tile",c.__params__=["tile"],c),Gradient:((c=function(t,e,n){return{_hx_index:3,gradients:t,style:e,size:n,__enum__:"hacksaw.core.data.DisplayableType",toString:l}})._hx_name="Gradient",c.__params__=["gradients","style","size"],c),Model:((c=function(t,e){return{_hx_index:4,model:t,tile:e,__enum__:"hacksaw.core.data.DisplayableType",toString:l}})._hx_name="Model",c.__params__=["model","tile"],c),Text:((c=function(t,e,n){return{_hx_index:5,resource:t,defaultState:e,strings:n,__enum__:"hacksaw.core.data.DisplayableType",toString:l}})._hx_name="Text",c.__params__=["resource","defaultState","strings"],c)}),vh=(wh.__constructs__=[wh.Atlas,wh.AtlasAnimation,wh.Tile,wh.Gradient,wh.Model,wh.Text],wh.__empty_constructs__=[],d["hacksaw.core.data.DisplayableInstance"]={__ename__:!0,__constructs__:null,Text:((c=function(t,e,n){return{_hx_index:0,element:t,triggers:e,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:l}})._hx_name="Text",c.__params__=["element","triggers","handlers"],c),Object:((c=function(t){return{_hx_index:1,object:t,__enum__:"hacksaw.core.data.DisplayableInstance",toString:l}})._hx_name="Object",c.__params__=["object"],c),Animation:((c=function(t,e,n){return{_hx_index:2,animator:t,triggers:e,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:l}})._hx_name="Animation",c.__params__=["animator","triggers","handlers"],c),Tile:((c=function(t,e,n){return{_hx_index:3,element:t,triggers:e,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:l}})._hx_name="Tile",c.__params__=["element","triggers","handlers"],c)}),Ch=(vh.__constructs__=[vh.Text,vh.Object,vh.Animation,vh.Tile],vh.__empty_constructs__=[],(e["hacksaw.core.data.TextState"]=qn).__name__="hacksaw.core.data.TextState",qn.prototype={__class__:qn},(e["hacksaw.core.data.TileState"]=Kn).__name__="hacksaw.core.data.TileState",Kn.prototype={__class__:Kn},(e["hacksaw.core.data.AnimationState"]=ts).__name__="hacksaw.core.data.AnimationState",ts.prototype={__class__:ts},d["hacksaw.core.data.AnimationPos"]={__ename__:!0,__constructs__:null,Start:{_hx_name:"Start",_hx_index:0,__enum__:"hacksaw.core.data.AnimationPos",toString:l},End:{_hx_name:"End",_hx_index:1,__enum__:"hacksaw.core.data.AnimationPos",toString:l},Frame:((c=function(t){return{_hx_index:2,index:t,__enum__:"hacksaw.core.data.AnimationPos",toString:l}})._hx_name="Frame",c.__params__=["index"],c),Named:((c=function(t){return{_hx_index:3,name:t,__enum__:"hacksaw.core.data.AnimationPos",toString:l}})._hx_name="Named",c.__params__=["name"],c),Position:((c=function(t){return{_hx_index:4,pos:t,__enum__:"hacksaw.core.data.AnimationPos",toString:l}})._hx_name="Position",c.__params__=["pos"],c),Current:{_hx_name:"Current",_hx_index:5,__enum__:"hacksaw.core.data.AnimationPos",toString:l},None:{_hx_name:"None",_hx_index:6,__enum__:"hacksaw.core.data.AnimationPos",toString:l}}),Mh=(Ch.__constructs__=[Ch.Start,Ch.End,Ch.Frame,Ch.Named,Ch.Position,Ch.Current,Ch.None],Ch.__empty_constructs__=[Ch.Start,Ch.End,Ch.Current,Ch.None],function(t,e,n){this.remove=lp.trigger(),this.update=lp.trigger(),this.show=lp.trigger(),null!=t&&(this.show=t),null!=e&&(this.update=e),null!=n&&(this.remove=n)}),Sh=((e["hacksaw.core.data.TextTriggers"]=Mh).__name__="hacksaw.core.data.TextTriggers",Mh.prototype={__class__:Mh},function(t,e,n){this.onShow=t,this.onUpdate=e,this.onRemove=n}),kh=((e["hacksaw.core.data.TextHandlers"]=Sh).__name__="hacksaw.core.data.TextHandlers",Sh.prototype={__class__:Sh},function(t,e){this.remove=lp.trigger(),this.show=lp.trigger(),null!=t&&(this.show=t),null!=e&&(this.remove=e)}),Bh=((e["hacksaw.core.data.TileTriggers"]=kh).__name__="hacksaw.core.data.TileTriggers",kh.prototype={__class__:kh},function(t,e){this.onShow=t,this.onRemove=e}),Ih=((e["hacksaw.core.data.TileHandlers"]=Bh).__name__="hacksaw.core.data.TileHandlers",Bh.prototype={__class__:Bh},function(t,e,n){this.remove=lp.trigger(),this.stop=lp.trigger(),this.play=lp.trigger(),null!=t&&(this.play=t),null!=e&&(this.stop=e),null!=n&&(this.remove=n)}),Th=((e["hacksaw.core.data.AnimationTriggers"]=Ih).__name__="hacksaw.core.data.AnimationTriggers",Ih.prototype={__class__:Ih},function(t,e,n){this.onPlay=t,this.onStop=e,this.onRemove=n}),Fh=((e["hacksaw.core.data.AnimationHandlers"]=Th).__name__="hacksaw.core.data.AnimationHandlers",Th.prototype={__class__:Th},function(){}),s=((e["hacksaw.core.data.FontList"]=Fh).__name__="hacksaw.core.data.FontList",d["hacksaw.core.data.SoundEngineMessage"]={__ename__:!0,__constructs__:null,EnterBar:((c=function(t,e,n){return{_hx_index:0,bar:t,bpm:e,signature:n,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="EnterBar",c.__params__=["bar","bpm","signature"],c),SoundPlaying:((c=function(t,e,n,s){return{_hx_index:1,id:t,volume:e,duration:n,instance:s,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="SoundPlaying",c.__params__=["id","volume","duration","instance"],c),SoundStopped:((c=function(t,e){return{_hx_index:2,id:t,instance:e,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="SoundStopped",c.__params__=["id","instance"],c),SequencePlaying:((c=function(t,e,n,s,i){return{_hx_index:3,id:t,pattern:e,bpm:n,signature:s,instance:i,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="SequencePlaying",c.__params__=["id","pattern","bpm","signature","instance"],c),SequenceStopped:((c=function(t,e){return{_hx_index:4,id:t,instance:e,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="SequenceStopped",c.__params__=["id","instance"],c),PoolPlaying:((c=function(t,e,n,s){return{_hx_index:5,id:t,volume:e,duration:n,instance:s,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="PoolPlaying",c.__params__=["id","volume","duration","instance"],c),PoolStopped:((c=function(t,e){return{_hx_index:6,id:t,instance:e,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="PoolStopped",c.__params__=["id","instance"],c),PhraseStart:((c=function(t,e){return{_hx_index:7,bpm:t,signature:e,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="PhraseStart",c.__params__=["bpm","signature"],c),PhraseEnd:{_hx_name:"PhraseEnd",_hx_index:8,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l},FrameUpdate:((c=function(t,e){return{_hx_index:9,group:t,levels:e,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:l}})._hx_name="FrameUpdate",c.__params__=["group","levels"],c)}),s=(s.__constructs__=[s.EnterBar,s.SoundPlaying,s.SoundStopped,s.SequencePlaying,s.SequenceStopped,s.PoolPlaying,s.PoolStopped,s.PhraseStart,s.PhraseEnd,s.FrameUpdate],s.__empty_constructs__=[s.PhraseEnd],d["hacksaw.core.data.SoundEvent"]={__ename__:!0,__constructs__:null,OnBeat:((c=function(t,e,n,s){return{_hx_index:0,division:t,repeat:e,count:n,delay:s,__enum__:"hacksaw.core.data.SoundEvent",toString:l}})._hx_name="OnBeat",c.__params__=["division","repeat","count","delay"],c),SoundPlaying:((c=function(t,e){return{_hx_index:1,id:t,instance:e,__enum__:"hacksaw.core.data.SoundEvent",toString:l}})._hx_name="SoundPlaying",c.__params__=["id","instance"],c),SoundStopped:((c=function(t,e){return{_hx_index:2,id:t,instance:e,__enum__:"hacksaw.core.data.SoundEvent",toString:l}})._hx_name="SoundStopped",c.__params__=["id","instance"],c),PhraseStart:((c=function(t,e){return{_hx_index:3,bpm:t,signature:e,__enum__:"hacksaw.core.data.SoundEvent",toString:l}})._hx_name="PhraseStart",c.__params__=["bpm","signature"],c),PhraseEnd:{_hx_name:"PhraseEnd",_hx_index:4,__enum__:"hacksaw.core.data.SoundEvent",toString:l},FrameUpdate:((c=function(t,e){return{_hx_index:5,group:t,levels:e,__enum__:"hacksaw.core.data.SoundEvent",toString:l}})._hx_name="FrameUpdate",c.__params__=["group","levels"],c)}),Dh=(s.__constructs__=[s.OnBeat,s.SoundPlaying,s.SoundStopped,s.PhraseStart,s.PhraseEnd,s.FrameUpdate],s.__empty_constructs__=[s.PhraseEnd],d["hacksaw.core.data.TextResource"]={__ename__:!0,__constructs__:null,Models:((c=function(t,e,n,s){return{_hx_index:0,models:t,charSpacing:e,tiles:n,align:s,__enum__:"hacksaw.core.data.TextResource",toString:l}})._hx_name="Models",c.__params__=["models","charSpacing","tiles","align"],c),TileCharacters:((c=function(t,e,n,s){return{_hx_index:1,atlas:t,charSpacing:e,charMap:n,align:s,__enum__:"hacksaw.core.data.TextResource",toString:l}})._hx_name="TileCharacters",c.__params__=["atlas","charSpacing","charMap","align"],c),FontCharacters:((c=function(t,e,n,s,i,a,r){return{_hx_index:2,font:t,style:e,strings:n,align:s,multiline:i,maxWidth:a,maxHeight:r,__enum__:"hacksaw.core.data.TextResource",toString:l}})._hx_name="FontCharacters",c.__params__=["font","style","strings","align","multiline","maxWidth","maxHeight"],c),Images:((c=function(t){return{_hx_index:3,tiles:t,__enum__:"hacksaw.core.data.TextResource",toString:l}})._hx_name="Images",c.__params__=["tiles"],c)}),Eh=(Dh.__constructs__=[Dh.Models,Dh.TileCharacters,Dh.FontCharacters,Dh.Images],Dh.__empty_constructs__=[],{}),Ph=(Eh.makeTileObject=function(s,i,a,r){if(0==s.header.models.length)throw tr.thrown("This file does not contain any model");r=null==r?new R(0,0,0):r;var l=s.header.models[0];return Jh.create(new $h(null,null,null,null,null,null,function(t){var e=s.makePrimitive(l.geometry),n=new Xo(e,Eh.makeTileMaterial(s,l,l.materials[0],i,a));return e.alloc(ao.CURRENT),e.addTangents(),n.setRotation(r.x,r.y,r.z),n},!1,null,null,null,null,null,null))},Eh.makeTileMaterial=function(t,e,n,s,i){n=t.header.materials[n],s=Qh.create(s(n.diffuseTexture),null==i?null:i(n.normalMap));if(s.name=n.name,null!=n.specularTexture)throw tr.thrown("Specular texture not implemented for tile models");s.set_blendMode(n.blendMode),s.model=t.resource;i=Io.current.loadMaterialProps(s);return null==i&&(i=s.getDefaultModelProps()),s.set_props(i),s},(e["hacksaw.core.filters.h2d.ColorFilter"]=es).__name__="hacksaw.core.filters.h2d.ColorFilter",es._SHADER=null,es.__super__=n,es.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_color:function(){return this.color__},set_color:function(t){return this.color__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.color__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:es,__properties__:t(n.prototype.__properties__,{set_color:"set_color",get_color:"get_color",set_texture:"set_texture",get_texture:"get_texture"})}),function(){n.call(this)}),zh=((e["hacksaw.core.filters.h2d.TextureShader"]=Ph).__name__="hacksaw.core.filters.h2d.TextureShader",Ph._SHADER=null,Ph.__super__=n,Ph.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:Ph,__properties__:t(n.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(t){this._doneHandlers=new N,this._queue=[],this._activeAnimations=new N,this.duration=null,this.activeAnimations=new N,this.animations=new N,this._config=t,this.animations=this._config.animations}),Rh=((e["hacksaw.core.h3d.Animator"]=zh).__name__="hacksaw.core.h3d.Animator",zh.prototype={play:function(t,e){null==e&&(e=0);var n=this,s=this.overrideAnimation,i=null==s?t.name:s;if(this._queue=[],!Object.prototype.hasOwnProperty.call(this.animations.h,i))return new Jd(new Kd(null));var a,r=this.animations.h[i];switch(r._hx_index){case 0:var l=r.anim;this.cancel(),this.duration=l.animation.animationData.frames.length/l.animation.fps,l.tile=l.animation.animationData.frames[0],l.name=null!=i?i:"default",a=0<e?(this._queue.push(new Rh(e,xh.Tile(l))),(o=$d.irreversible(function(t){n._doneHandlers.h[l.name]=t})).eager(),o):this.playTileAnimation(l);break;case 1:throw new tr("Skin animation not implemented for Animator");case 2:var o,h=r.anim;if(h.name=null!=i?i:"default",this.duration=h.animation.overlay?0:Uh.getAnimationDuration(h.animation.animationName,er.__cast(this._config.object.children[0],Wh).skeleton),0<e)return this._queue.push(new Rh(e,xh.Spine(h))),(o=$d.irreversible(function(t){n._doneHandlers.h[h.name]=t})).eager(),o;a=this.playSpineAnimation(h)}return a},cancel:function(){for(var t=this._activeAnimations.h,e=Object.keys(t),n=e.length,s=0;s<n;){var i=t[e[s++]];switch(i._hx_index){case 0:i.anim.animator.cancel();break;case 1:throw new tr("Skin animation not implemented for Animator");case 2:var a=i.anim;a.element.get_animator().cancel(a.element.skeleton)}}for(var r=this._config.object.children,l=0,o=r.length;l<o;){var h=r[l++];null!=h&&null!=h.name&&"Anim|"==Jn.substr(h.name,0,5)&&null!=h&&null!=h.parent&&h.parent.removeChild(h)}this.duration=0,this._activeAnimations.h=Object.create(null),this._doneHandlers=new N},update:function(t){for(var e=this._queue,n=[],s=0;s<e.length;){var i,a=e[s];if(++s,a.delay-=t,a.delay<=0){var r=a.animationType;switch(r._hx_index){case 0:this.playTileAnimation(r.anim);break;case 1:throw new tr("Skin animation not implemented for Animator");case 2:this.playSpineAnimation(r.anim)}i=!1}else i=!0;i&&n.push(a)}if(this._queue=n,0<wt.count(this._activeAnimations))for(var l=this._activeAnimations.h,o=Object.keys(l),h=o.length,u=0;u<h;){var _=l[o[u++]];switch(_._hx_index){case 0:_.anim.animator.update(t);break;case 1:throw new tr("Skin animation not implemented for Animator");case 2:_.anim.element.update(t)}}},dispose:function(){this.cancel(),this.animations.h=Object.create(null),this.animations=null,this._activeAnimations.h=Object.create(null),this._activeAnimations=null},playTileAnimation:function(t){var n=this,e=this._config.object,s=e.children[0],i=t.animation,a=t.name,r=null;if(Object.prototype.hasOwnProperty.call(this._activeAnimations.h,a)){i.replace&&(s.flags&=-3);var l=this._activeAnimations.h[a];if(null==l)throw new tr("Wrong animation type");if(0!=l._hx_index)throw new tr("Wrong animation type");var l=l.anim;l.element.flags|=2,i.overlay&&(h=null==(p=i.offset)?new R(0,0,.01):p,(u=l.element).x=h.x,u.flags|=1,u.y=h.y,u.flags|=1,u.z=h.z,u.flags|=1,u.flags|=1),l=l.animator}else{var o,h,u,_=i.animationData.width*i.scale|0,c=i.animationData.height*i.scale|0,d=(i.overlay||!t.isSymbol?(null==(o=er.__cast(e.getObjectByName("Anim|"+a),Jh))&&((o=Jh.create(new $h(t.tile,null,null,null,i.blendMode,i.depthTest,null,null,i.shadows,i.shadows,i.animationData.width,i.animationData.height,null,null))).name="Anim|"+a,d=null==(d=s.getMeshes()[0])?null:d.material.passes.stencil,i.keepStencil&&null!=d&&(o.get_mesh().material.passes.stencil=d),e.addChild(o)),i.replace&&(s.flags&=-3),o.flags|=2,h=null==(p=i.offset)?new R(0,0,.01):p,o.x=h.x,o.flags|=1,o.y=h.y,o.flags|=1,o.z=h.z,o.flags|=1,o.flags|=1):(o=er.__cast(s,Jh),r=new al(o.get_mesh().scaleX,o.get_mesh().scaleY)),(i.resetScale||i.overlay)&&((u=o.get_mesh()).scaleX=_/Tn.REFERENCE_SIZE,u.flags|=1,(u=o.get_mesh()).scaleY=c/Tn.REFERENCE_SIZE,u.flags|=1),new tu(er.__cast(o.getMaterials()[0],Qh))),e=new Wn(a,d,t.tile,o,i,!1);this._activeAnimations.h[a]=xh.Tile(e),l=e.animator}var p=l.play(i);return p.handle(function(){var t,e=n._activeAnimations.h[a];if(null==e)throw new tr("Wrong animation type");if(0!=e._hx_index)throw new tr("Wrong animation type");e=e.anim.element,null!=s&&i.overlay&&!i.loop&&(i.remainAfterReplace||!i.replace?s.flags|=2:s.flags&=-3),null!=e&&i.overlay&&(i.keepOverlayVisible?e.flags|=2:e.flags&=-3),null==e||i.overlay||null==r||((t=e.get_mesh()).scaleX=r.x,t.flags|=1,(t=e.get_mesh()).scaleY=r.y,t.flags|=1),Object.prototype.hasOwnProperty.call(n._doneHandlers.h,a)&&(n._doneHandlers.h[a](null),t=n._doneHandlers,Object.prototype.hasOwnProperty.call(t.h,a))&&delete t.h[a]}),p},playSpineAnimation:function(t){var e,n=this,s=this._config.object,i=s.children[0],a=t.animation,r=null==(u=t.extraAnimations)?[]:u,l=t.name,o=null;if(Object.prototype.hasOwnProperty.call(this._activeAnimations.h,l)){if(a.replace&&(i.flags&=-3),null==(f=this._activeAnimations.h[l]))throw new tr("Wrong animation type");if(2!=f._hx_index)throw new tr("Wrong animation type");(m=f.anim).element.flags|=2,null!=a.offset&&(A=m.element,_=a.offset.y,c=a.offset.z,A.x=a.offset.x,A.flags|=1,A.y=_,A.flags|=1,A.z=c,A.flags|=1,A.flags|=1),e=m.element.get_animator()}else{for(var h,u,_,c,d=er.__cast(s.getObjectByName("Anim|"+l),Wh),p=(null!=d&&null!=d.parent&&d.parent.removeChild(d),h=a.overlay?null==(d=null==(u=t.element)?null:u.clone())?er.__cast(i.clone(),Wh):d:er.__cast(i,Wh),a.overlay&&(h.name="Anim|"+l,_=i.y,c=i.z,h.x=i.x,h.flags|=1,h.y=_,h.flags|=1,h.z=c,h.flags|=1,h.flags|=1,s.addChild(h),u=i.getMeshes()[0].material.passes.stencil,a.keepStencil&&null!=t.element&&null!=u&&(h.mesh.material.passes.stencil=u),a.replace&&(i.flags&=-3),h.flags|=2),o=new al(h.scaleX,h.scaleY),h.scaleX=a.scale,h.flags|=1,h.scaleY=a.scale,h.flags|=1,null!=a.offset&&(_=h.y+a.offset.y,c=h.z+a.offset.z,h.x=h.x+a.offset.x,h.flags|=1,h.y=_,h.flags|=1,h.z=c,h.flags|=1,h.flags|=1),new Yn(l,h,a,r)),f=[],g=mp(this._activeAnimations);g.hasNext();){var m,A,x,b=g.next();2==b._hx_index&&(m=b.anim).element==h&&(A=n.get_activeAnimations(),x=m.name,Object.prototype.hasOwnProperty.call(A.h,x)&&delete A.h[x],m.animation.trackIndex!=a.trackIndex)&&(l=l+"_"+m.name,p.name=l),f.push(b)}this._activeAnimations.h[l]=xh.Spine(p),e=h.get_animator()}Xd.each(r,function(t){e.play(t)});d=e.play(a);return this.duration=e.getCurrentDuration(),d.handle(function(){var t,e=n._activeAnimations.h[l];if(null==e)t=null;else{if(2!=e._hx_index)throw new tr("Wrong animation type");t=e.anim.element}null!=i&&a.overlay&&!a.loop&&(a.remainAfterReplace||!a.replace?i.flags|=2:i.flags&=-3),null!=t&&a.overlay&&(a.keepOverlayVisible?t.flags|=2:t.flags&=-3),null==t||a.overlay||null==o||(t.scaleX=o.x,t.flags|=1,t.scaleY=o.y,t.flags|=1),Object.prototype.hasOwnProperty.call(n._doneHandlers.h,l)&&(n._doneHandlers.h[l](null),e=n._doneHandlers,Object.prototype.hasOwnProperty.call(e.h,l))&&delete e.h[l]}),d},get_activeAnimations:function(){return this._activeAnimations},get_object:function(){return this._config.object},__class__:zh,__properties__:{get_object:"get_object",get_activeAnimations:"get_activeAnimations"}},function(t,e){this.delay=t,this.animationType=e}),Vh=((e["hacksaw.core.h3d.AnimationQueueItem"]=Rh).__name__="hacksaw.core.h3d.AnimationQueueItem",Rh.prototype={__class__:Rh},function(t,e,n,s){this.fixedHeight=null,this.fixedWidth=null,this.animations=null,this.object=t,null!=e&&(this.animations=e),null!=n&&(this.fixedWidth=n),null!=s&&(this.fixedHeight=s)}),Qh=((e["hacksaw.core.h3d.AnimatorConfig"]=Vh).__name__="hacksaw.core.h3d.AnimatorConfig",Vh.prototype={__class__:Vh},(e["hacksaw.core.h3d.ModelTile"]=ns).__name__="hacksaw.core.h3d.ModelTile",ns.prototype={__class__:ns},function(t){this._uvRotationFit=0,this._uvRotation=0,this._diffuseTileProps=new fl,this.noShader=!1,Ae.call(this,t)}),Oh=((e["hacksaw.core.h3d.mat.TileMaterial"]=Qh).__name__="hacksaw.core.h3d.mat.TileMaterial",Qh.create=function(t,e){var n=new Qh;return null!=t&&n.setDiffuse(t),null!=e&&n.set_normalMap(e.innerTex),n.set_props(n.getDefaultProps()),n},Qh.__super__=Ae,Qh.prototype=t(Ae.prototype,{setDiffuse:function(t,e){null==e&&(e=0);var n=this.textureShader,e=(null==t?this._diffuseTileProps.remove(e):null==this._diffuseTileProps.h[e]?this._diffuseTileProps.h[e]=new Oh(t,null,null,null,null,null,null,null):this._diffuseTileProps.h[e].tile=t,wt.count(this._diffuseTileProps));return null==this.textureShader||e==n.NbTiles__&&!this.noShader||(this.passes.removeShader(this.textureShader),this.textureShader=null),null!=this.textureShader||0==e||this.noShader||(this.textureShader=new Lh(e),this.passes.addShader(this.textureShader)),this.calculateUV(),this.updateShaderValues(this.textureShader),t},getDiffuse:function(t){return null==this._diffuseTileProps.h[t=null==t?0:t]&&(this._diffuseTileProps.h[t]=new Oh(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[t].tile},setFixedWidth:function(t,e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Oh(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].fixedWidth=t,this.calculateUV(),this.updateShaderValues(this.textureShader),t},setFixedHeight:function(t,e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Oh(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].fixedHeight=t,this.calculateUV(),this.updateShaderValues(this.textureShader),t},getFixedHeight:function(t){return null==this._diffuseTileProps.h[t=null==t?0:t]&&(this._diffuseTileProps.h[t]=new Oh(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[t].fixedHeight},getFixedWidth:function(t){return null==this._diffuseTileProps.h[t=null==t?0:t]&&(this._diffuseTileProps.h[t]=new Oh(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[t].fixedWidth},setUVRotation:function(t,e){null==e&&(e=!1),this._uvRotation=t,this._uvRotationFit=e?1:0,this.updateShaderValues(this.textureShader)},calculateUV:function(){for(var t=this._diffuseTileProps,e=t.keys();e.hasNext();){var n,s,i,a,r,l=t.get(e.next()),o=l.tile;null!=o&&(n=o.innerTex,a=l.uvPosition,r=l.uvScale,s=l.uvMargin,i=l.uvOffset,a.x=o.x/n.width,a.y=o.y/n.height,r.x=o.width/n.width,r.y=o.height/n.height,a=null!=l.fixedWidth?l.fixedWidth:o.width,r=null!=l.fixedHeight?l.fixedHeight:o.height,s.x=null!=l.fixedWidth?(a-o.width)/a:0,s.y=null!=l.fixedHeight?(r-o.height)/r:0,i.x=null!=l.fixedWidth?o.dx/n.width:0,i.y=null!=l.fixedHeight?o.dy/n.height:0)}},updateShaderValues:function(t){if(null!=t){t.uvRotation__=this._uvRotation,t.uvRotationFit__=this._uvRotationFit;for(var e=this._diffuseTileProps,n=e.keys();n.hasNext();){var s=n.next(),i=e.get(s),a=i.tile;if(null!=a){var r,l=a.innerTex;switch(s){case 0:t.texture__=l;break;case 1:t.texture2__=l;break;default:throw tr.thrown("diffuse map index "+s+" not supported")}if(t.uvMargin__[s]=i.uvMargin,t.uvOffset__[s]=i.uvOffset,t.uvPosition__[s]=i.uvPosition,t.uvScale__[s]=i.uvScale,t.uvRepeat__[s]=i.uvRepeat,1!=i.uvRepeat.x||1!=i.uvRepeat.y)t.uvRepeatEnable__[s]=1;else{switch(t.uvRepeatEnable__[s]=0,l.wrap._hx_index){case 0:r=0;break;case 1:r=1}t.uvRepeatEnable__[s]=r}}}}},clone:function(t){for(var e=null==t?new Qh:t,n=(Ae.prototype.clone.call(this,e),e.set_props(e.getDefaultProps()),t=null!=(t instanceof Ae?t:null)?(r=(t instanceof Ae?t:null).mshader.color__,new R(r.x,r.y,r.z,r.w)):new R(1,1,1,1),e.mshader.color__=t,e.noShader=this.noShader,this._diffuseTileProps),s=n.keys();s.hasNext();){var i=s.next(),a=n.get(i),r=a.uvOffset,l=a.uvPosition,o=a.uvScale,h=a.uvMargin,u=a.uvRepeat;e._diffuseTileProps.h[i]=new Oh(a.tile,new R(r.x,r.y,r.z,r.w),new R(l.x,l.y,l.z,l.w),new R(o.x,o.y,o.z,o.w),new R(h.x,h.y,h.z,h.w),new R(u.x,u.y,u.z,u.w),a.fixedWidth,a.fixedHeight),e.setDiffuse(a.tile,i)}return e},__class__:Qh}),function(t,e,n,s,i,a,r,l){this.fixedHeight=null,this.fixedWidth=null,this.uvRepeat=new R(1,1,0),this.uvMargin=new R,this.uvScale=new R,this.uvPosition=new R,this.uvOffset=new R,this.tile=t,null!=e&&(this.uvOffset=e),null!=n&&(this.uvPosition=n),null!=s&&(this.uvScale=s),null!=i&&(this.uvMargin=i),null!=a&&(this.uvRepeat=a),null!=r&&(this.fixedWidth=r),null!=l&&(this.fixedHeight=l)}),Lh=((e["hacksaw.core.h3d.mat._TileMaterial.TileRenderProperties"]=Oh).__name__="hacksaw.core.h3d.mat._TileMaterial.TileRenderProperties",Oh.prototype={__class__:Oh},(e["hacksaw.core.h3d.primitives.Plane"]=ss).__name__="hacksaw.core.h3d.primitives.Plane",ss.__super__=Ve,ss.prototype=t(Ve.prototype,{addUVs:function(){this.uvs=[];for(var t=new Go(0,this.uvT),e=new Go(this.uvS,this.uvT),n=new Go(0,0),s=new Go(this.uvS,0),i=0,a=this.points.length>>2;i<a;)++i,this.uvs.push(t),this.uvs.push(e),this.uvs.push(n),this.uvs.push(s)},__class__:ss}),(e["hacksaw.core.h3d.primitives.SpinePrimitive"]=nr).__name__="hacksaw.core.h3d.primitives.SpinePrimitive",nr.__super__=Re,nr.prototype=t(Re.prototype,{alloc:function(t){if(!(this.indexCount<=0)){this.dispose(),this.buffer=io.ofFloats(this.vertexBuffer,this.vertexStride,[so.RawFormat]);for(var e=0,n=this.bufferNames.length;e<n;){var s=e++;this.addBuffer(this.bufferNames[s],this.buffer,this.bufferPositions[s])}this.indexes=Kt.alloc(this.indexBuffer),this.uploadedVertices=this.verticesCount,this.uploadedIndices=this.indexCount}},render:function(t){var e;this.indexCount<=0||(this.verticesCount>this.uploadedVertices||this.indexCount>this.uploadedIndices||null==this.buffer||null==this.indexes||null==(e=this.buffer).buffer||null==e.buffer.vbuf||this.indexes.isDisposed()?(null!=this.buffer&&(null!=(e=this.buffer).buffer&&null!=e.buffer.vbuf)&&this.buffer.dispose(),null==this.indexes||this.indexes.isDisposed()||this.indexes.dispose(),this.alloc(ao.CURRENT)):(this.buffer.uploadVector(this.vertexBuffer,0,this.verticesCount/this.vertexStride|0),this.indexes.upload(this.indexBuffer,0,this.indexCount)),t.renderMultiBuffers(this.getBuffers(t),this.indexes,0,this.indexCount/3|0))},getBounds:function(){for(var t=new oo,e=0;e<this.vertexBuffer.pos;){var n=this.vertexBuffer.array[e],s=this.vertexBuffer.array[e+1],i=this.vertexBuffer.array[e+2],n=n=null==n?0:n,s=s=null==s?0:s,i=i=null==i?0:i;n<t.xMin&&(t.xMin=n),n>t.xMax&&(t.xMax=n),s<t.yMin&&(t.yMin=s),s>t.yMax&&(t.yMax=s),i<t.zMin&&(t.zMin=i),i>t.zMax&&(t.zMax=i),e+=this.vertexStride}return t},__class__:nr}),(e["hacksaw.core.h3d.shaders.BitmapMaskShader"]=is).__name__="hacksaw.core.h3d.shaders.BitmapMaskShader",is._SHADER=null,is.__super__=n,is.prototype=t(n.prototype,{get_texture:function(){return this.texture__},set_texture:function(t){return this.texture__=t},get_mask:function(){return this.mask__},set_mask:function(t){return this.mask__=t},get_maskMatA:function(){return this.maskMatA__},set_maskMatA:function(t){return this.maskMatA__=t},get_maskMatB:function(){return this.maskMatB__},set_maskMatB:function(t){return this.maskMatB__=t},updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.mask__;case 3:return this.maskMatA__;case 4:return this.maskMatB__}return null},getParamFloatValue:function(t){return 0==t?this.flipY__:0},__class__:is,__properties__:t(n.prototype.__properties__,{set_maskMatB:"set_maskMatB",get_maskMatB:"get_maskMatB",set_maskMatA:"set_maskMatA",get_maskMatA:"get_maskMatA",set_mask:"set_mask",get_mask:"get_mask",set_texture:"set_texture",get_texture:"get_texture"})}),function(t){this.uvRotationFit__=0,this.uvRotation__=0,this.uvRepeatEnable__=[],this.uvRepeat__=[],this.uvOffset__=[],this.uvMargin__=[],this.uvScale__=[],this.uvPosition__=[],this.NbTiles__=0,uh.call(this,null),this.constModified=!0,this.NbTiles__=t}),Uh=((e["hacksaw.core.h3d.shaders.MultiTileTextureShader"]=Lh).__name__="hacksaw.core.h3d.shaders.MultiTileTextureShader",Lh._SHADER=null,Lh.__super__=uh,Lh.prototype=t(uh.prototype,{get_NbTiles:function(){return this.NbTiles__},set_NbTiles:function(t){return this.constModified=!0,this.NbTiles__=t},get_uvPosition:function(){return this.uvPosition__},set_uvPosition:function(t){return this.uvPosition__=t},get_uvScale:function(){return this.uvScale__},set_uvScale:function(t){return this.uvScale__=t},get_uvMargin:function(){return this.uvMargin__},set_uvMargin:function(t){return this.uvMargin__=t},get_uvOffset:function(){return this.uvOffset__},set_uvOffset:function(t){return this.uvOffset__=t},get_uvRepeat:function(){return this.uvRepeat__},set_uvRepeat:function(t){return this.uvRepeat__=t},get_uvRepeatEnable:function(){return this.uvRepeatEnable__},set_uvRepeatEnable:function(t){return this.uvRepeatEnable__=t},get_texture2:function(){return this.texture2__},set_texture2:function(t){return this.texture2__=t},get_uvRotation:function(){return this.uvRotation__},set_uvRotation:function(t){return this.uvRotation__=t},get_uvRotationFit:function(){return this.uvRotationFit__},set_uvRotationFit:function(t){return this.uvRotationFit__=t},updateConstants:function(t){this.constBits=0,this.additive__&&(this.constBits|=1),this.killAlpha__&&(this.constBits|=2),this.specularAlpha__&&(this.constBits|=4);var e=this.NbTiles__;if(e>>>8!=0)throw tr.thrown("NbTiles is out of range "+e+">255");this.constBits|=e<<3,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.additive__;case 1:return this.killAlpha__;case 2:return this.specularAlpha__;case 3:return this.killAlphaThreshold__;case 4:return this.texture__;case 5:return this.NbTiles__;case 6:return this.uvPosition__;case 7:return this.uvScale__;case 8:return this.uvMargin__;case 9:return this.uvOffset__;case 10:return this.uvRepeat__;case 11:return this.uvRepeatEnable__;case 12:return this.texture2__;case 13:return this.uvRotation__;case 14:return this.uvRotationFit__}return null},getParamFloatValue:function(t){switch(t){case 3:return this.killAlphaThreshold__;case 13:return this.uvRotation__;case 14:return this.uvRotationFit__}return 0},__class__:Lh,__properties__:t(uh.prototype.__properties__,{set_uvRotationFit:"set_uvRotationFit",get_uvRotationFit:"get_uvRotationFit",set_uvRotation:"set_uvRotation",get_uvRotation:"get_uvRotation",set_texture2:"set_texture2",get_texture2:"get_texture2",set_uvRepeatEnable:"set_uvRepeatEnable",get_uvRepeatEnable:"get_uvRepeatEnable",set_uvRepeat:"set_uvRepeat",get_uvRepeat:"get_uvRepeat",set_uvOffset:"set_uvOffset",get_uvOffset:"get_uvOffset",set_uvMargin:"set_uvMargin",get_uvMargin:"get_uvMargin",set_uvScale:"set_uvScale",get_uvScale:"get_uvScale",set_uvPosition:"set_uvPosition",get_uvPosition:"get_uvPosition",set_NbTiles:"set_NbTiles",get_NbTiles:"get_NbTiles"})}),(e["hacksaw.core.h3d.shaders.PremultiplyAlpha"]=as).__name__="hacksaw.core.h3d.shaders.PremultiplyAlpha",as._SHADER=null,as.__super__=f,as.prototype=t(f.prototype,{updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return null},getParamFloatValue:function(t){return 0},__class__:as}),(e["hacksaw.core.h3d.shaders.VertexColorDarkTint"]=rs).__name__="hacksaw.core.h3d.shaders.VertexColorDarkTint",rs._SHADER=null,rs.__super__=f,rs.prototype=t(f.prototype,{updateConstants:function(t){this.constBits=0,this.updateConstantsFinal(t)},getParamValue:function(t){return null},getParamFloatValue:function(t){return 0},__class__:rs}),function(t){this._attachmentOverrides=null,this._activeTracks=new fl,this.animationState=t;var e=new Nh;if(null==e)throw tr.thrown(new $n("listener cannot be null."));t.listeners.array.push(e)}),Nh=((e["hacksaw.core.h3d.spine.LegacySpineAnimator"]=Uh).__name__="hacksaw.core.h3d.spine.LegacySpineAnimator",Uh.getAnimationDuration=function(t,e){return e.data.findAnimation(t).getDuration()},Uh.prototype={play:function(E,P,z){var R=this,t=$d.irreversible(function(t){P&&(E.loop=!0);var e=R.animationState,n=E.trackIndex,s=E.animationName,i=E.loop,a=e.data.skeletonData.findAnimation(s);if(null==a)throw tr.thrown(new $n("Animation not found: "+s));if(n<0)throw tr.thrown(new $n("trackIndex must be >= 0."));if(null==a)throw tr.thrown(new $n("animation cannot be null."));var s=!0,r=n<e.tracks.length?e.tracks[n]:((o=n+1)<(h=(x=e.tracks).length)?x.splice(o,o-h):h<o&&(x[o-1]=null),null);if(null!=r)if(-1==r.nextTrackLast){e.tracks[n]=r.mixingFrom,(c=e.queue).objects.push(1),c.objects.push(r);(c=e.queue).objects.push(2),c.objects.push(r),c.AnimationState_this.animationsChanged=!0;for(var l=r.next;null!=l;)(c=e.queue).objects.push(3),c.objects.push(l),l=l.next;r.next=null,r=r.mixingFrom,s=!1}else{for(l=r.next;null!=l;)(c=e.queue).objects.push(3),c.objects.push(l),l=l.next;r.next=null}var o,h,u=e.trackEntryPool.obtain();if(u.trackIndex=n,u.animation=a,u.loop=i,u.holdPrevious=!1,u.eventThreshold=0,u.attachmentThreshold=0,u.drawOrderThreshold=0,u.animationStart=0,u.animationEnd=a.getDuration(),u.animationLast=-1,u.nextAnimationLast=-1,u.delay=0,u.trackTime=0,u.trackLast=-1,u.nextTrackLast=-1,u.trackEnd=999999999,u.timeScale=1,u.alpha=1,u.interruptAlpha=1,u.mixTime=0,null==r)x=0;else{var _,c=e.data;if(null==(_=r.animation))throw tr.thrown(new $n("from cannot be null."));if(null==a)throw tr.thrown(new $n("to cannot be null."));c.tempAnimationStateDataKey.a1=_,c.tempAnimationStateDataKey.a2=a;var i=c.animationToMixTime,d=c.tempAnimationStateDataKey,r=c.defaultMix,a=(null==r&&(r=0),d.getHashCode()),p=i.h[a],f=r;if(null!=p)for(var g=0,m=p.length;g<m;){var A=p[g++];if(A.key.equals(d)){f=A.value;break}}x=f}if(u.mixDuration=x,u.mixBlend=2,_=n<e.tracks.length?e.tracks[n]:((o=n+1)<(h=(x=e.tracks).length)?x.splice(o,o-h):h<o&&(x[o-1]=null),null),((e.tracks[n]=u).previous=null)!=_&&(s&&((c=e.queue).objects.push(1),c.objects.push(_)),((u.mixingFrom=_).mixingTo=u).mixTime=0,null!=_.mixingFrom&&0<_.mixDuration&&(u.interruptAlpha*=Math.min(1,_.mixTime/_.mixDuration)),(x=_.timelinesRotation).splice(0,x.length)),(c=e.queue).objects.push(0),c.objects.push(u),c.AnimationState_this.animationsChanged=!0,!(c=e.queue).drainDisabled){c.drainDisabled=!0;for(var x,b=c.AnimationState_this.listeners,y=0;y<c.objects.length;){var w=c.objects[y],f=c.objects[y+1],v=b.array.length,C=b.begin();do{if(0==w){null!=f.listener&&f.listener.start(f);for(var M=0;M<v;)C[M].start(f),++M;break}if(1==w){null!=f.listener&&f.listener.interrupt(f);for(var S=0;S<v;)C[S].interrupt(f),++S;break}if(2==w){null!=f.listener&&f.listener.end(f);for(var k=0;k<v;)C[k].end(f),++k;null!=f.listener&&f.listener.dispose(f);for(var B=0;B<v;)C[B].dispose(f),++B;c.AnimationState_this.trackEntryPool.free(f);break}if(3==w){null!=f.listener&&f.listener.dispose(f);for(var I=0;I<v;)C[I].dispose(f),++I;c.AnimationState_this.trackEntryPool.free(f);break}if(4==w){null!=f.listener&&f.listener.complete(f);for(var T=0;T<v;)C[T].complete(f),++T;break}if(5==w){for(var F=c.objects[2+y++],D=(null!=f.listener&&f.listener.event(f,F),0);D<v;)C[D].event(f,F),++D;break}}while(0);b.end(),y+=2}(x=c.objects).splice(0,x.length),c.drainDisabled=!1}i=E.attachmentOverrides;R._attachmentOverrides=null==i?R._attachmentOverrides:i,u.mixDuration=null!=z?z/1e3:E.mixDuration/1e3,u.timeScale=E.timeScale,R._activeTracks.h[E.trackIndex]=new Gh(u,E,t,null,null,E.stopAction,E.loop)});return t.eager(),t},resetTrack:function(t){var e=this._activeTracks.h[t];if(null!=e)switch((A=e.stopAction)._hx_index){case 0:case 1:e.loopIterations=0,e.loop||this._activeTracks.remove(t),this.triggerCallbacks(e,!0,!0);break;case 2:var n=A.resetTime,s=this.animationState,i=n/1e3,a=sd.emptyAnimation;if(t<0)throw tr.thrown(new $n("trackIndex must be >= 0."));if(null==a)throw tr.thrown(new $n("animation cannot be null."));var r=!0,l=t<s.tracks.length?s.tracks[t]:((h=t+1)<(u=(p=s.tracks).length)?p.splice(h,h-u):u<h&&(p[h-1]=null),null);if(null!=l)if(-1==l.nextTrackLast){s.tracks[t]=l.mixingFrom,(d=s.queue).objects.push(1),d.objects.push(l);(d=s.queue).objects.push(2),d.objects.push(l),d.AnimationState_this.animationsChanged=!0;for(var o=l.next;null!=o;)(d=s.queue).objects.push(3),d.objects.push(o),o=o.next;l.next=null,l=l.mixingFrom,r=!1}else{for(o=l.next;null!=o;)(d=s.queue).objects.push(3),d.objects.push(o),o=o.next;l.next=null}var h,u,_=s.trackEntryPool.obtain();if(_.trackIndex=t,_.animation=a,_.loop=!1,_.holdPrevious=!1,_.eventThreshold=0,_.attachmentThreshold=0,_.drawOrderThreshold=0,_.animationStart=0,_.animationEnd=a.getDuration(),_.animationLast=-1,_.nextAnimationLast=-1,_.delay=0,_.trackTime=0,_.trackLast=-1,_.nextTrackLast=-1,_.trackEnd=999999999,_.timeScale=1,_.alpha=1,_.interruptAlpha=1,_.mixTime=0,null==l)P=0;else{var c,d=s.data;if(null==(c=l.animation))throw tr.thrown(new $n("from cannot be null."));if(null==a)throw tr.thrown(new $n("to cannot be null."));d.tempAnimationStateDataKey.a1=c,d.tempAnimationStateDataKey.a2=a;var p=d.animationToMixTime,f=d.tempAnimationStateDataKey,l=d.defaultMix,a=(null==l&&(l=0),f.getHashCode()),g=p.h[a],m=l;if(null!=g)for(var A=0,x=g.length;A<x;){var b=g[A++];if(b.key.equals(f)){m=b.value;break}}P=m}if(_.mixDuration=P,_.mixBlend=2,c=t<s.tracks.length?s.tracks[t]:((h=t+1)<(u=(p=s.tracks).length)?p.splice(h,h-u):u<h&&(p[h-1]=null),null),((s.tracks[t]=_).previous=null)!=c&&(r&&((d=s.queue).objects.push(1),d.objects.push(c)),((_.mixingFrom=c).mixingTo=_).mixTime=0,null!=c.mixingFrom&&0<c.mixDuration&&(_.interruptAlpha*=Math.min(1,c.mixTime/c.mixDuration)),(p=c.timelinesRotation).splice(0,p.length)),(d=s.queue).objects.push(0),d.objects.push(_),d.AnimationState_this.animationsChanged=!0,!(d=s.queue).drainDisabled){d.drainDisabled=!0;for(var y=d.AnimationState_this.listeners,w=0;w<d.objects.length;){var v=d.objects[w],m=d.objects[w+1],C=y.array.length,M=y.begin();do{if(0==v){null!=m.listener&&m.listener.start(m);for(var S=0;S<C;)M[S].start(m),++S;break}if(1==v){null!=m.listener&&m.listener.interrupt(m);for(var k=0;k<C;)M[k].interrupt(m),++k;break}if(2==v){null!=m.listener&&m.listener.end(m);for(var B=0;B<C;)M[B].end(m),++B;null!=m.listener&&m.listener.dispose(m);for(var I=0;I<C;)M[I].dispose(m),++I;d.AnimationState_this.trackEntryPool.free(m);break}if(3==v){null!=m.listener&&m.listener.dispose(m);for(var T=0;T<C;)M[T].dispose(m),++T;d.AnimationState_this.trackEntryPool.free(m);break}if(4==v){null!=m.listener&&m.listener.complete(m);for(var F=0;F<C;)M[F].complete(m),++F;break}if(5==v){for(var D=d.objects[2+w++],E=(null!=m.listener&&m.listener.event(m,D),0);E<C;)M[E].event(m,D),++E;break}}while(0);y.end(),w+=2}(p=d.objects).splice(0,p.length),d.drainDisabled=!1}_.mixDuration=i,_.trackEnd=i,_.animationEnd=n/1e3;var a=e.stopCallback,l=e.playCallback,P=e.animation;this._activeTracks.remove(t),this._activeTracks.h[t]=new Gh(_,P,l,a,null,Yh.Immediate,!1)}},update:function(t,R){if(0!=wt.count(this._activeTracks)&&null!=t){for(var e=R*(P=this.animationState).timeScale,V=P.tracks,n=0,Q=P.tracks.length;n<Q;){if(null==(m=V[n]));else{m.animationLast=m.nextAnimationLast,m.trackLast=m.nextTrackLast;var s=e*m.timeScale;if(0<m.delay){if(m.delay-=s,0<m.delay){++n;continue}s=-m.delay,m.delay=0}var i,a,r,l,o=m.next;if(null!=o){var h=m.trackLast-o.delay;if(0<=h){o.delay=0,o.trackTime+=0==m.timeScale?0:(h/m.timeScale+e)*o.timeScale,m.trackTime+=s,u=n<P.tracks.length?P.tracks[n]:((h=n+1)<(u=(D=P.tracks).length)?D.splice(h,h-u):u<h&&(D[h-1]=null),null),((P.tracks[n]=o).previous=null)!=u&&((_=P.queue).objects.push(1),_.objects.push(u),((o.mixingFrom=u).mixingTo=o).mixTime=0,null!=u.mixingFrom&&0<u.mixDuration&&(o.interruptAlpha*=Math.min(1,u.mixTime/u.mixDuration)),(h=u.timelinesRotation).splice(0,h.length));var u,_,h=P.queue;for(h.objects.push(0),h.objects.push(o),h.AnimationState_this.animationsChanged=!0;null!=o.mixingFrom;)o.mixTime+=e,o=o.mixingFrom;++n;continue}}else if(m.trackLast>=m.trackEnd&&null==m.mixingFrom){V[n]=null;for(var h=P.queue,c=(h.objects.push(2),h.objects.push(m),h.AnimationState_this.animationsChanged=!0,m.next);null!=c;){var O=P.queue;O.objects.push(3),O.objects.push(c),c=c.next}m.next=null,++n;continue}if(null!=m.mixingFrom&&(null==(i=m.mixingFrom)||(l=null==(a=i.mixingFrom)||(r=P.updateMixingFrom(a,e),a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast,0<i.mixTime&&i.mixTime>=i.mixDuration?(0!=a.totalAlpha&&0!=i.mixDuration||(i.mixingFrom=a.mixingFrom,null!=a.mixingFrom&&(a.mixingFrom.mixingTo=i),i.interruptAlpha=a.interruptAlpha,(l=P.queue).objects.push(2),l.objects.push(a),l.AnimationState_this.animationsChanged=!0),r):(a.trackTime+=e*a.timeScale,i.mixTime+=e,!1)),i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,0<m.mixTime&&m.mixTime>=m.mixDuration?(0!=i.totalAlpha&&0!=m.mixDuration||(m.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=m),m.interruptAlpha=i.interruptAlpha,(r=P.queue).objects.push(2),r.objects.push(i),r.AnimationState_this.animationsChanged=!0),l):(i.trackTime+=e*i.timeScale,m.mixTime+=e,!1)))){var d=m.mixingFrom;for((m.mixingFrom=null)!=d&&(d.mixingTo=null);null!=d;){var p=P.queue;p.objects.push(2),p.objects.push(d),p.AnimationState_this.animationsChanged=!0,d=d.mixingFrom}}m.trackTime+=s}++n}if(!(_=P.queue).drainDisabled){_.drainDisabled=!0;for(var f=_.AnimationState_this.listeners,n=0;n<_.objects.length;){var g=_.objects[n],m=_.objects[n+1],A=f.array.length,x=f.begin();do{if(0==g){null!=m.listener&&m.listener.start(m);for(var b=0;b<A;)x[b].start(m),++b;break}if(1==g){null!=m.listener&&m.listener.interrupt(m);for(var y=0;y<A;)x[y].interrupt(m),++y;break}if(2==g){null!=m.listener&&m.listener.end(m);for(var w=0;w<A;)x[w].end(m),++w;null!=m.listener&&m.listener.dispose(m);for(var v=0;v<A;)x[v].dispose(m),++v;_.AnimationState_this.trackEntryPool.free(m);break}if(3==g){null!=m.listener&&m.listener.dispose(m);for(var C=0;C<A;)x[C].dispose(m),++C;_.AnimationState_this.trackEntryPool.free(m);break}if(4==g){null!=m.listener&&m.listener.complete(m);for(var M=0;M<A;)x[M].complete(m),++M;break}if(5==g){for(var S=_.objects[2+n++],k=(null!=m.listener&&m.listener.event(m,S),0);k<A;)x[k].event(m,S),++k;break}}while(0);f.end(),n+=2}(D=_.objects).splice(0,D.length),_.drainDisabled=!1}if(this.animationState.apply(t),null!=this._attachmentOverrides){for(var B=0,L=this._attachmentOverrides;B<L.length;){var I=L[B],T=(++B,I.slotName),I=I.attachmentName;if(null==T)throw tr.thrown(new $n("slotName cannot be null."));var F=t.findSlot(T);if(null==F)throw tr.thrown(new $n("Slot not found: "+T));var D,E=null;if(null!=I&&null==(E=t.getAttachment(F.data.index,I)))throw tr.thrown(new $n("Attachment not found: "+I+", for slot: "+T));F.attachment!=E&&((!(E instanceof Ad&&F.attachment instanceof Ad)||(m=E,S=F.attachment,(null!=m.deformAttachment?m.deformAttachment:m)!=(null!=S.deformAttachment?S.deformAttachment:S)))&&(D=F.deform).splice(0,D.length),F.attachment=E,F.attachmentTime=F.bone.skeleton.time)}this._attachmentOverrides=null}for(var U=this._activeTracks.iterator();U.hasNext();){var P,z=U.next();(P=z.entry).trackTime>=P.animationEnd-P.animationStart&&(z.loop?(0==z.loopIterations&&this.triggerCallbacks(z,!0,!1),z.loopIterations++):this.resetTrack(z.entry.trackIndex))}}},getCurrentDuration:function(){return wt.fold(this._activeTracks,function(t,e){t=t.entry.animation,t=null==t?null:t.getDuration();return Math.max(null==t?0:t,e)},0)},triggerCallbacks:function(t,e,n){null!=t.playCallback&&e&&(e=t.playCallback,Hd.invoke(t.playCallback,null),e==t.playCallback)&&(t.playCallback=null),null!=t.stopCallback&&n&&(e=t.stopCallback,Hd.invoke(t.stopCallback,null),e==t.stopCallback)&&(t.stopCallback=null)},cancel:function(t){for(var e=this.animationState,R=e.queue.drainDisabled,V=(e.queue.drainDisabled=!0,e.tracks),n=0,Q=e.tracks.length;n<Q;){if(null!=(v=V[n])){var s=v.trackIndex,i=sd.emptyAnimation;if(s<0)throw tr.thrown(new $n("trackIndex must be >= 0."));if(null==i)throw tr.thrown(new $n("animation cannot be null."));var O,L=!0;if(null!=(B=s<e.tracks.length?e.tracks[s]:((S=s+1)<($=(z=e.tracks).length)?z.splice(S,S-$):$<S&&(z[S-1]=null),null)))if(-1==B.nextTrackLast){e.tracks[s]=B.mixingFrom,(I=e.queue).objects.push(1),I.objects.push(B);(T=e.queue).objects.push(2),T.objects.push(B),T.AnimationState_this.animationsChanged=!0;for(var a=B.next;null!=a;)(D=e.queue).objects.push(3),D.objects.push(a),a=a.next;B.next=null,B=B.mixingFrom,L=!1}else{for(var r=B.next;null!=r;)(E=e.queue).objects.push(3),E.objects.push(r),r=r.next;B.next=null}if((P=e.trackEntryPool.obtain()).trackIndex=s,P.animation=i,P.loop=!1,P.holdPrevious=!1,P.eventThreshold=0,P.attachmentThreshold=0,P.drawOrderThreshold=0,P.animationStart=0,P.animationEnd=i.getDuration(),P.animationLast=-1,P.nextAnimationLast=-1,P.delay=0,P.trackTime=0,P.trackLast=-1,P.nextTrackLast=-1,P.trackEnd=999999999,P.timeScale=1,P.alpha=1,P.interruptAlpha=1,P.mixTime=0,null==B)Z=0;else{var l=e.data;if(null==(F=B.animation))throw tr.thrown(new $n("from cannot be null."));if(null==i)throw tr.thrown(new $n("to cannot be null."));l.tempAnimationStateDataKey.a1=F,l.tempAnimationStateDataKey.a2=i;var U=l.animationToMixTime,N=l.tempAnimationStateDataKey,i=l.defaultMix,G=(null==i&&(i=0),N.getHashCode()),X=U.h[G],o=i;if(null!=X)for(var Y=0,W=X.length;Y<W;){var j=X[Y++];if(j.key.equals(N)){o=j.value;break}}Z=o}P.mixDuration=Z,P.mixBlend=2,M=s<e.tracks.length?e.tracks[s]:((G=s+1)<(O=(i=e.tracks).length)?i.splice(G,G-O):O<G&&(i[G-1]=null),null),((e.tracks[s]=P).previous=null)!=M&&(L&&((q=e.queue).objects.push(1),q.objects.push(M)),((P.mixingFrom=M).mixingTo=P).mixTime=0,null!=M.mixingFrom&&0<M.mixDuration&&(P.interruptAlpha*=Math.min(1,M.mixTime/M.mixDuration)),(O=M.timelinesRotation).splice(0,O.length));(tt=e.queue).objects.push(0),tt.objects.push(P),tt.AnimationState_this.animationsChanged=!0;var h=e.queue;if(!h.drainDisabled){h.drainDisabled=!0;for(var u=h.AnimationState_this.listeners,_=0;_<h.objects.length;){var c=h.objects[_],d=h.objects[_+1],p=u.array.length,f=u.begin();do{if(0==c){null!=d.listener&&d.listener.start(d);for(var g=0;g<p;)f[g].start(d),++g;break}if(1==c){null!=d.listener&&d.listener.interrupt(d);for(var m=0;m<p;)f[m].interrupt(d),++m;break}if(2==c){null!=d.listener&&d.listener.end(d);for(var A=0;A<p;)f[A].end(d),++A;null!=d.listener&&d.listener.dispose(d);for(var x=0;x<p;)f[x].dispose(d),++x;h.AnimationState_this.trackEntryPool.free(d);break}if(3==c){null!=d.listener&&d.listener.dispose(d);for(var b=0;b<p;)f[b].dispose(d),++b;h.AnimationState_this.trackEntryPool.free(d);break}if(4==c){null!=d.listener&&d.listener.complete(d);for(var y=0;y<p;)f[y].complete(d),++y;break}if(5==c){for(var H=h.objects[2+_++],w=(null!=d.listener&&d.listener.event(d,H),0);w<p;)f[w].event(d,H),++w;break}}while(0);u.end(),_+=2}i=h.objects;i.splice(0,i.length),h.drainDisabled=!1}P.mixDuration=0,P.trackEnd=0}++n}if(e.queue.drainDisabled=R,!(I=e.queue).drainDisabled){I.drainDisabled=!0;for(u=I.AnimationState_this.listeners,n=0;n<I.objects.length;){var c=I.objects[n],v=I.objects[n+1],p=u.array.length,f=u.begin();do{if(0==c){null!=v.listener&&v.listener.start(v);for(g=0;g<p;)f[g].start(v),++g;break}if(1==c){null!=v.listener&&v.listener.interrupt(v);for(m=0;m<p;)f[m].interrupt(v),++m;break}if(2==c){null!=v.listener&&v.listener.end(v);for(A=0;A<p;)f[A].end(v),++A;null!=v.listener&&v.listener.dispose(v);for(x=0;x<p;)f[x].dispose(v),++x;I.AnimationState_this.trackEntryPool.free(v);break}if(3==c){null!=v.listener&&v.listener.dispose(v);for(b=0;b<p;)f[b].dispose(v),++b;I.AnimationState_this.trackEntryPool.free(v);break}if(4==c){null!=v.listener&&v.listener.complete(v);for(y=0;y<p;)f[y].complete(v),++y;break}if(5==c){for(o=I.objects[2+n++],w=(null!=v.listener&&v.listener.event(v,o),0);w<p;)f[w].event(v,o),++w;break}}while(0);u.end(),n+=2}(z=I.objects).splice(0,z.length),I.drainDisabled=!1}for(var C=0,V=(C*=(e=this.animationState).timeScale,e.tracks),n=0,Q=e.tracks.length;n<Q;){if(null==(v=V[n]));else{v.animationLast=v.nextAnimationLast,v.trackLast=v.nextTrackLast;var Z,M,q,K,J=C*v.timeScale;if(0<v.delay){if(v.delay-=J,0<v.delay){++n;continue}J=-v.delay,v.delay=0}if(null!=(a=v.next)){var S,$,k=v.trackLast-a.delay;if(0<=k){for(a.delay=0,a.trackTime+=0==v.timeScale?0:(k/v.timeScale+C)*a.timeScale,v.trackTime+=J,F=n<e.tracks.length?e.tracks[n]:((S=n+1)<($=(z=e.tracks).length)?z.splice(S,S-$):$<S&&(z[S-1]=null),null),((e.tracks[n]=a).previous=null)!=F&&((I=e.queue).objects.push(1),I.objects.push(F),((a.mixingFrom=F).mixingTo=a).mixTime=0,null!=F.mixingFrom&&0<F.mixDuration&&(a.interruptAlpha*=Math.min(1,F.mixTime/F.mixDuration)),(U=F.timelinesRotation).splice(0,U.length)),(T=e.queue).objects.push(0),T.objects.push(a),T.AnimationState_this.animationsChanged=!0;null!=a.mixingFrom;)a.mixTime+=C,a=a.mixingFrom;++n;continue}}else if(v.trackLast>=v.trackEnd&&null==v.mixingFrom){V[n]=null;for(r=((D=e.queue).objects.push(2),D.objects.push(v),D.AnimationState_this.animationsChanged=!0,v.next);null!=r;)(E=e.queue).objects.push(3),E.objects.push(r),r=r.next;v.next=null,++n;continue}if(Z=null!=v.mixingFrom&&(null==(M=v.mixingFrom)||(K=null==(k=M.mixingFrom)||(K=e.updateMixingFrom(k,C),k.animationLast=k.nextAnimationLast,k.trackLast=k.nextTrackLast,0<M.mixTime&&M.mixTime>=M.mixDuration?(0!=k.totalAlpha&&0!=M.mixDuration||(M.mixingFrom=k.mixingFrom,null!=k.mixingFrom&&(k.mixingFrom.mixingTo=M),M.interruptAlpha=k.interruptAlpha,(l=e.queue).objects.push(2),l.objects.push(k),l.AnimationState_this.animationsChanged=!0),K):(k.trackTime+=C*k.timeScale,M.mixTime+=C,!1)),M.animationLast=M.nextAnimationLast,M.trackLast=M.nextTrackLast,0<v.mixTime&&v.mixTime>=v.mixDuration?(0!=M.totalAlpha&&0!=v.mixDuration||(v.mixingFrom=M.mixingFrom,null!=M.mixingFrom&&(M.mixingFrom.mixingTo=v),v.interruptAlpha=M.interruptAlpha,(q=e.queue).objects.push(2),q.objects.push(M),q.AnimationState_this.animationsChanged=!0),K):(M.trackTime+=C*M.timeScale,v.mixTime+=C,!1)))){var tt,et=v.mixingFrom;for((v.mixingFrom=null)!=et&&(et.mixingTo=null);null!=et;)(tt=e.queue).objects.push(2),tt.objects.push(et),tt.AnimationState_this.animationsChanged=!0,et=et.mixingFrom}v.trackTime+=J}++n}if(!(I=e.queue).drainDisabled){I.drainDisabled=!0;for(u=I.AnimationState_this.listeners,n=0;n<I.objects.length;){c=I.objects[n],v=I.objects[n+1],p=u.array.length,f=u.begin();do{if(0==c){null!=v.listener&&v.listener.start(v);for(g=0;g<p;)f[g].start(v),++g;break}if(1==c){null!=v.listener&&v.listener.interrupt(v);for(m=0;m<p;)f[m].interrupt(v),++m;break}if(2==c){null!=v.listener&&v.listener.end(v);for(A=0;A<p;)f[A].end(v),++A;null!=v.listener&&v.listener.dispose(v);for(x=0;x<p;)f[x].dispose(v),++x;I.AnimationState_this.trackEntryPool.free(v);break}if(3==c){null!=v.listener&&v.listener.dispose(v);for(b=0;b<p;)f[b].dispose(v),++b;I.AnimationState_this.trackEntryPool.free(v);break}if(4==c){null!=v.listener&&v.listener.complete(v);for(y=0;y<p;)f[y].complete(v),++y;break}if(5==c){for(o=I.objects[2+n++],w=(null!=v.listener&&v.listener.event(v,o),0);w<p;)f[w].event(v,o),++w;break}}while(0);u.end(),n+=2}(z=I.objects).splice(0,z.length),I.drainDisabled=!1}if(null!=t){this.animationState.apply(t);for(var nt=t.bones,n=0,Q=t.bones.length;n<Q;)(v=nt[n]).ax=v.x,v.ay=v.y,v.arotation=v.rotation,v.ascaleX=v.scaleX,v.ascaleY=v.scaleY,v.ashearX=v.shearX,v.ashearY=v.shearY,++n;for(var st=t.cache,n=0,Q=t.cache.length;n<Q;)st[n].update(),++n;t.time+=0}for(var B,R=(e=this.animationState).queue.drainDisabled,n=(e.queue.drainDisabled=!0,0),Q=e.tracks.length;n<Q;){if(n<0)throw tr.thrown(new $n("trackIndex must be >= 0."));if(n<e.tracks.length)if(null!=(B=e.tracks[n])){(I=e.queue).objects.push(2),I.objects.push(B),I.AnimationState_this.animationsChanged=!0;for(var I,T,a=B.next;null!=a;)(T=e.queue).objects.push(3),T.objects.push(a),a=a.next;B.next=null;for(var F,D,E,P=B;;){if(null==(F=P.mixingFrom))break;(D=e.queue).objects.push(2),D.objects.push(F),D.AnimationState_this.animationsChanged=!0,P.mixingFrom=null,P.mixingTo=null,P=F}if(e.tracks[B.trackIndex]=null,!(E=e.queue).drainDisabled){E.drainDisabled=!0;for(u=E.AnimationState_this.listeners,_=0;_<E.objects.length;){c=E.objects[_],v=E.objects[_+1],p=u.array.length,f=u.begin();do{if(0==c){null!=v.listener&&v.listener.start(v);for(g=0;g<p;)f[g].start(v),++g;break}if(1==c){null!=v.listener&&v.listener.interrupt(v);for(m=0;m<p;)f[m].interrupt(v),++m;break}if(2==c){null!=v.listener&&v.listener.end(v);for(A=0;A<p;)f[A].end(v),++A;null!=v.listener&&v.listener.dispose(v);for(x=0;x<p;)f[x].dispose(v),++x;E.AnimationState_this.trackEntryPool.free(v);break}if(3==c){null!=v.listener&&v.listener.dispose(v);for(b=0;b<p;)f[b].dispose(v),++b;E.AnimationState_this.trackEntryPool.free(v);break}if(4==c){null!=v.listener&&v.listener.complete(v);for(y=0;y<p;)f[y].complete(v),++y;break}if(5==c){for(o=E.objects[2+_++],w=(null!=v.listener&&v.listener.event(v,o),0);w<p;)f[w].event(v,o),++w;break}}while(0);u.end(),_+=2}(z=E.objects).splice(0,z.length),E.drainDisabled=!1}}++n}if((z=e.tracks).splice(0,z.length),e.queue.drainDisabled=R,!(I=e.queue).drainDisabled){I.drainDisabled=!0;for(var z,u=I.AnimationState_this.listeners,n=0;n<I.objects.length;){c=I.objects[n],v=I.objects[n+1],p=u.array.length,f=u.begin();do{if(0==c){null!=v.listener&&v.listener.start(v);for(g=0;g<p;)f[g].start(v),++g;break}if(1==c){null!=v.listener&&v.listener.interrupt(v);for(m=0;m<p;)f[m].interrupt(v),++m;break}if(2==c){null!=v.listener&&v.listener.end(v);for(A=0;A<p;)f[A].end(v),++A;null!=v.listener&&v.listener.dispose(v);for(x=0;x<p;)f[x].dispose(v),++x;I.AnimationState_this.trackEntryPool.free(v);break}if(3==c){null!=v.listener&&v.listener.dispose(v);for(b=0;b<p;)f[b].dispose(v),++b;I.AnimationState_this.trackEntryPool.free(v);break}if(4==c){null!=v.listener&&v.listener.complete(v);for(y=0;y<p;)f[y].complete(v),++y;break}if(5==c){for(o=I.objects[2+n++],w=(null!=v.listener&&v.listener.event(v,o),0);w<p;)f[w].event(v,o),++w;break}}while(0);u.end(),n+=2}(z=I.objects).splice(0,z.length),I.drainDisabled=!1}},__class__:Uh},(e["spine.AnimationStateListener"]=ls).__name__="spine.AnimationStateListener",ls.__isInterface__=!0,ls.prototype={__class__:ls},function(){}),Gh=((e["hacksaw.core.h3d.spine.LegacySpineEventListener"]=Nh).__name__="hacksaw.core.h3d.spine.LegacySpineEventListener",Nh.__interfaces__=[ls],Nh.prototype={start:function(t){},interrupt:function(t){},end:function(t){},dispose:function(t){},complete:function(t){},event:function(t,e){e=new Xh(e.data.name,t,e,t.timeScale);hacksawCasino.PubSub.getChannel("game").publish("spineEvent",e)},__class__:Nh},function(t,e,n,s,i,a,r){this.loopIterations=0,this.stopCallback=null,this.playCallback=null,this.entry=t,this.animation=e,null!=n&&(this.playCallback=n),null!=s&&(this.stopCallback=s),null!=i&&(this.loopIterations=i),this.stopAction=a,this.loop=r}),Xh=((e["hacksaw.core.h3d.spine.ActiveTrack"]=Gh).__name__="hacksaw.core.h3d.spine.ActiveTrack",Gh.prototype={__class__:Gh},(e["hacksaw.core.h3d.spine.SpineAnimation"]=os).__name__="hacksaw.core.h3d.spine.SpineAnimation",os.prototype={__class__:os},function(t,e,n,s){this.name=t,this.trackEntry=e,this.event=n,this.speed=s}),Yh=((e["hacksaw.core.h3d.spine.SpineEventData"]=Xh).__name__="hacksaw.core.h3d.spine.SpineEventData",Xh.prototype={__class__:Xh},(e["hacksaw.core.h3d.spine.AttachmentOverride"]=hs).__name__="hacksaw.core.h3d.spine.AttachmentOverride",hs.prototype={__class__:hs},d["hacksaw.core.h3d.spine.StopAction"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"hacksaw.core.h3d.spine.StopAction",toString:l},Immediate:{_hx_name:"Immediate",_hx_index:1,__enum__:"hacksaw.core.h3d.spine.StopAction",toString:l},Initial:((c=function(t){return{_hx_index:2,resetTime:t,__enum__:"hacksaw.core.h3d.spine.StopAction",toString:l}})._hx_name="Initial",c.__params__=["resetTime"],c)}),Wh=(Yh.__constructs__=[Yh.Default,Yh.Immediate,Yh.Initial],Yh.__empty_constructs__=[Yh.Default,Yh.Immediate],function(t){this._pointAttachments=new N,this._config=t,_o.call(this,t.parent);for(var t=t.spine.skeletonData,t=(this.animationState=new sd(new rd(t)),this.skeleton=new od(t),this.skeleton),e=t.bones,n=0,s=t.bones.length;n<s;){var i=e[n];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,++n}for(var a=t.cache,n=0,s=t.cache.length;n<s;)a[n].update(),++n;this.mesh=this.createMesh(this.skeleton),this.set_animator(new Uh(this.animationState)),this.addChild(this.mesh);for(var t=new Vl(this),r=(Ql.init(t,null),this.tweenObject=t,[]),l=0,o=this.skeleton.slots;l<o.length;){var h=o[l];++l,h.attachment instanceof vd?r.push({name:h.data.name,object:new _o(this),slot:h}):r.push(null)}this._pointAttachments=jd.fromArray(Xd.filterNull(r),function(t){return t.name},function(t){return new jh(t.object,er.__cast(t.slot.attachment,vd),t.slot.bone)})}),jh=((e["hacksaw.core.h3d.spine.SpineElement"]=Wh).__name__="hacksaw.core.h3d.spine.SpineElement",Wh.create=function(t){return new Wh(t)},Wh.__super__=_o,Wh.prototype=t(_o.prototype,{createMesh:function(t){var e=Io.current.createMaterial(),n=(e.set_props(e.getDefaultProps()),e.passes.set_depthTest(this._config.depthTest),e.set_blendMode(this._config.blendMode),e.passes.set_culling(this._config.culling),e.passes.set_enableLights(this._config.enableLights),this._config.shadows),e=(e.set_castShadows(n),e.set_receiveShadows(n),e.set_texture(A.fromColor(0,0)),new qh(this._config.useDarkTint,e,this._config.parent,t,this._config.usePremultipliedAlpha)),t=(e.setupMesh(),e.mapClippingAttachments(this._config.exposedClippingAttachments),1/Tn.REFERENCE_SIZE),n=(e.scaleX=t,e.flags|=1,e.scaleY=t,e.flags|=1,e.scaleZ=t,e.flags|=1,e.flags|=1,this._config.scale);return e.scaleX*=n,e.flags|=1,e.scaleY*=n,e.flags|=1,e.scaleZ*=n,e.flags|=1,e.flags|=1,null!=this._config.offset&&(t=this._config.offset.y,this.x=this._config.offset.x,this.flags|=1,this.y=this._config.offset.y,this.flags|=1,this.z=t,this.flags|=1,this.flags|=1),e},update:function(t){Ql.update(this.tweenObject,t),this.get_animator().update(this.skeleton,t);for(var e=this.skeleton,n=e.bones,s=0,i=e.bones.length;s<i;){var a=n[s];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,++s}for(var r=e.cache,s=0,i=e.cache.length;s<i;)r[s].update(),++s;this.skeleton.time+=t,this.updatePointAttachments()},get_animator:function(){return this.animator},set_animator:function(t){return this.animator=t},clone:function(t){var e=this._config.parent,n=(this._config.parent=null,Wh.create(this._config)),s=(this._config.parent=e,n.x=this.x,n.flags|=1,n.y=this.y,n.flags|=1,n.z=this.z,n.flags|=1,n.scaleX=this.scaleX,n.flags|=1,n.scaleY=this.scaleY,n.flags|=1,n.scaleZ=this.scaleZ,n.flags|=1,n.qRot),e=this.qRot;s.x=e.x,s.y=e.y,s.z=e.z,s.w=e.w,n.name=this.name,n.set_follow(this.follow),0!=(8&this.flags)?n.flags|=8:n.flags&=-9,0!=(2&this.flags)?n.flags|=2:n.flags&=-3,e=null!=n.defaultTransform?n.defaultTransform:null!=(e=this.defaultTransform)?e.clone():null,n.defaultTransform=e,n.flags|=1,(s=n.mesh).scaleX=this.mesh.scaleX,s.flags|=1,(s=n.mesh).scaleY=this.mesh.scaleY,s.flags|=1;(s=n.mesh).scaleZ=this.mesh.scaleZ,s.flags|=1;for(var s=jd.values(this._pointAttachments),i=new Array(s.length),a=0,r=s.length;a<r;){var l=a++;i[l]=s[l].object}for(a=0,r=this.children;a<r.length;){var o=r[a],h=(++a,o.clone());this.mesh!=o&&-1==i.indexOf(o)&&(h.parent=n).children.push(h)}return n},updatePointAttachments:function(){if(!(Object.keys(this._pointAttachments.h).length<=0))for(var t=this._pointAttachments.h,e=Object.keys(t),n=e.length,s=0;s<n;){var i=t[e[s++]],a=i.attachment,r=i.bone,l=i.object,i=(i=a.x*r.a+a.y*r.b+r.worldX,o=a.x*r.c+a.y*r.d+r.worldY,l.x=i*this.mesh.scaleX,l.flags|=1,l.y=o*this.mesh.scaleY,l.flags|=1,Math.cos(a.rotation*Ed.degRad)),o=Math.sin(a.rotation*Ed.degRad),h=Math.atan2(i*r.c+o*r.d,i*r.a+o*r.b)*Ed.radDeg*(Math.PI/180),u=Math.sqrt(r.a*r.a+r.c*r.c),_=Math.sqrt(r.b*r.b+r.d*r.d);switch(this._config.pointAttachmentTransformSetting._hx_index){case 0:break;case 1:l.setRotation(0,0,h);break;case 2:l.scaleX=u,l.flags|=1,l.scaleY=_,l.flags|=1,l.setRotation(0,0,h)}}},__class__:Wh,__properties__:t(_o.prototype.__properties__,{set_animator:"set_animator",get_animator:"get_animator"})}),function(t,e,n){this.object=t,this.attachment=e,this.bone=n}),Hh=((e["hacksaw.core.h3d.spine.PointAttachmentObject"]=jh).__name__="hacksaw.core.h3d.spine.PointAttachmentObject",jh.prototype={__class__:jh},d["hacksaw.core.h3d.spine.PointAttachmentTransformSettings"]={__ename__:!0,__constructs__:null,PositionOnly:{_hx_name:"PositionOnly",_hx_index:0,__enum__:"hacksaw.core.h3d.spine.PointAttachmentTransformSettings",toString:l},IgnoreScaling:{_hx_name:"IgnoreScaling",_hx_index:1,__enum__:"hacksaw.core.h3d.spine.PointAttachmentTransformSettings",toString:l},All:{_hx_name:"All",_hx_index:2,__enum__:"hacksaw.core.h3d.spine.PointAttachmentTransformSettings",toString:l}}),Zh=(Hh.__constructs__=[Hh.PositionOnly,Hh.IgnoreScaling,Hh.All],Hh.__empty_constructs__=[Hh.PositionOnly,Hh.IgnoreScaling,Hh.All],(e["hacksaw.core.h3d.spine.SpineElementConfig"]=us).__name__="hacksaw.core.h3d.spine.SpineElementConfig",us.prototype={__class__:us},(e["spine.utils.SkeletonClipping"]=_s).__name__="spine.utils.SkeletonClipping",_s.prototype={clip:function(t,e,n,s,i,a,r,l){for(var o=l,h=!1,u=null,_=(2<=r.length%4?(u=l,l=this.scratch):u=this.scratch,u.splice(0,u.length),u.push(t),u.push(e),u.push(n),u.push(s),u.push(i),u.push(a),u.push(t),u.push(e),l.splice(0,l.length),r.length-4),c=0;;){for(var d=r[c],p=r[c+1],f=r[c+2],g=r[c+3],m=d-f,A=p-g,x=u,R=u.length-2,b=l.length,y=0;y<R;){var w=x[y],v=x[y+1],C=x[y+2],M=x[y+3],S=0<m*(M-g)-A*(C-f);if(0<m*(v-g)-A*(w-f)){if(S){l.push(C),l.push(M),y+=2;continue}var k=M-v,B=C-w,I=k*(f-d)-B*(g-p);1e-6<Math.abs(I)?(l.push(d+(f-d)*(B=(B*(p-v)-k*(d-w))/I)),l.push(p+(g-p)*B)):(l.push(d),l.push(p))}else S&&(B=(k=M-v)*(f-d)-(I=C-w)*(g-p),1e-6<Math.abs(B)?(l.push(d+(f-d)*(S=(I*(p-v)-k*(d-w))/B)),l.push(p+(g-p)*S)):(l.push(d),l.push(p)),l.push(C),l.push(M));h=!0,y+=2}if(b==l.length)return o.splice(0,o.length),!0;if(l.push(l[0]),l.push(l[1]),c==_)break;b=l;(l=u).splice(0,l.length),u=b,c+=2}if(o!=l){o.splice(0,o.length);var n=l,T=l.length-2;-1==(T=null==T?-1:T)&&(T=n.length);var F=(c=o.length)+n.length,D=o.length;if(F<D)o.splice(F,F-D);else if(D<F)for(;D<F;)o.push(0),++D;for(var E=0,P=n;E<P.length&&(o[c++]=P[E++],!(--T<=0)););}else{var z=o.length-2;if(z<(F=o.length))o.splice(z,z-F);else if(F<z)for(;F<z;)o.push(0),++F}return h},__class__:_s},function(){this.polygonIndicesPool=new Gd,this.polygonPool=new Nd,this.triangles=[],this.isConcaveArray=[],this.indicesArray=[],this.convexPolygonsIndices=[],this.convexPolygons=[]}),qh=((e["spine.utils.Triangulator"]=Zh).__name__="spine.utils.Triangulator",Zh.prototype={__class__:Zh},function(t,e,n,s,i){this._tempVerticesArray=[],this._meshes=[],this._useDarkColor=!0,this._quadTriangles=[0,1,2,2,3,0],this._usePremultipliedAlpha=!1,this.clippingMeshes=new N,Xo.call(this,null,e,n),this._useDarkColor=t,this._usePremultipliedAlpha=i,this.skeleton=s}),Kh=((e["hacksaw.core.h3d.spine.SpineMesh"]=qh).__name__="hacksaw.core.h3d.spine.SpineMesh",qh.__super__=Xo,qh.prototype=t(Xo.prototype,{setupMesh:function(){var t=new nr(this._useDarkColor),e=this._usePremultipliedAlpha?((e=new Xo(t,er.__cast(this.material.clone(),Ae),this)).name="SplineSubMesh",e.material.passes.load(this.material.passes),e):(this.set_primitive(t),this);e.material.passes.addShader(new(this._useDarkColor?rs:_h)),this._usePremultipliedAlpha&&e.material.passes.addShader(new as),this._meshes.push(e)},mapClippingAttachments:function(t){var e,n=this;if(null!=t){for(var s=new Array(t.length),i=0,a=t.length;i<a;){var r=i++,l=t[r],o=new nr(!1),h=Ae.create(A.fromColor(0,0)),h=(h.name="SpineClippingMat|"+l,h.set_castShadows(!1),h.set_receiveShadows(!1),h.set_blendMode(y.None),h.passes.set_culling(Ao.None),h.passes.set_enableLights(!1),h.passes.set_depthWrite(!1),new Xo(o,h));h.name="SpineClippingMesh|"+l,s[r]={key:l,mesh:h,content:o}}e=s}else e=null;null!=e&&Xd.each(e,function(t){n.clippingMeshes.h[t.key]={mesh:t.mesh,content:t.content},n.addChild(t.mesh)})},renderTriangles:function(){for(var R=this,t=qh.clipper,V=(null!=t.clipAttachment&&(t.clipAttachment=null,t.clippingPolygons=null,(Z=t.clippedVertices).splice(0,Z.length),(Z=t.clippedTriangles).splice(0,Z.length),(Z=t.clippingPolygon).splice(0,Z.length)),Xd.each(this._meshes,function(t){t=er.__cast(t.primitive,nr);t.verticesCount=0,t.indexCount=0}),Xd.each(this._meshes,function(t){t.material!=R.material&&t.material.passes.load(R.material.passes)}),this.clippingMeshes.h),Q=Object.keys(V),O=Q.length,L=0;L<O;)(Zt=V[Q[L++]].content).verticesCount=0,Zt.indexCount=0;for(var U=this._meshes[0],e=er.__cast(U.primitive,nr),n=U,N=null,G=1,X=0,Y=0,W=0,j=0,H=this.skeleton.drawOrder;j<H.length;){var Z,s=H[j];if(++j,null==s.attachment)null!=t.clipAttachment&&t.clipAttachment.endSlot==s.data&&null!=t.clipAttachment&&(t.clipAttachment=null,t.clippingPolygons=null,(Z=t.clippedVertices).splice(0,Z.length),(i=t.clippedTriangles).splice(0,i.length),(i=t.clippingPolygon).splice(0,i.length));else{if(s.attachment instanceof Cd){var i=s.attachment,a=s.bone,r=this._tempVerticesArray,l=i.offset,q=a.worldX,K=a.worldY,J=a.a,o=a.b,h=a.c,a=a.d,u=l[6],_=l[7];if(r[0]=u*J+_*o+q,r[1]=u*h+_*a+K,u=l[0],_=l[1],r[2]=u*J+_*o+q,r[3]=u*h+_*a+K,u=l[2],_=l[3],r[4]=u*J+_*o+q,r[5]=u*h+_*a+K,u=l[4],_=l[5],r[6]=u*J+_*o+q,r[7]=u*h+_*a+K,null==i.region)throw tr.thrown(new Md("Region has not been set: "+Ja.string(i)));l={atlasRegion:er.__cast(i.region,Fd),regionColor:i.color,uvs:i.uvs,triangles:this._quadTriangles,slotVerticesLength:4}}else{if(!(s.attachment instanceof yd)){if(s.attachment instanceof bd){J=s.attachment;if(null==t.clipAttachment){var $=J.worldVerticesLength;if(6<=$){t.clipAttachment=J;var tt=t.clippingPolygon,et=tt.length;if($<et)tt.splice($,$-et);else if(et<$)for(;et<$;)tt.push(0),++et;var nt=tt,st=2*($>>1),it=s.deform,at=J.vertices,rt=J.bones;if(null==rt){0<it.length&&(at=it);for(var o=s.bone,lt=o.worldX,ot=o.worldY,ht=o.a,ut=o.b,_t=o.c,ct=o.d,dt=0,pt=0;pt<st;){var ft=at[dt],gt=at[dt+1];nt[pt]=ft*ht+gt*ut+lt,nt[pt+1]=ft*_t+gt*ct+ot,dt+=2,pt+=2}}else{var c=0,mt=(0,s.bone.skeleton.getBones());if(0==it.length)for(var At=0,xt=0;At<st;){var bt=0,yt=0,wt=rt[c++];for(wt+=c;c<wt;){var vt=mt[rt[c]],Ct=at[xt],Mt=at[xt+1],St=at[xt+2];bt+=(Ct*vt.a+Mt*vt.b+vt.worldX)*St,yt+=(Ct*vt.c+Mt*vt.d+vt.worldY)*St,++c,xt+=3}nt[At]=bt,nt[At+1]=yt,At+=2}else for(var kt=0,Bt=0,It=0;kt<st;){var Tt=0,Ft=0,Dt=rt[c++];for(Dt+=c;c<Dt;){var Et=mt[rt[c]],Pt=at[Bt]+it[It],zt=at[Bt+1]+it[It+1],Rt=at[Bt+2];Tt+=(Pt*Et.a+zt*Et.b+Et.worldX)*Rt,Ft+=(Pt*Et.c+zt*Et.d+Et.worldY)*Rt,++c,Bt+=3,It+=2}nt[kt]=Tt,nt[kt+1]=Ft,kt+=2}}for(var Vt,Qt,Ot,d=t.clippingPolygon,q=d.length,Lt=d[q-2]*d[1]-d[0]*d[q-1],Ut=0,Nt=q-3;Ut<Nt;)Vt=d[Ut],Qt=d[Ut+1],Ot=d[Ut+2],Lt+=Vt*d[Ut+3]-Ot*Qt,Ut+=2;if(!(Lt<0))for(var Gt=0,Xt=q-2,Yt=q>>1;Gt<Yt;){var Wt=d[Gt],jt=d[Gt+1],Ht=Xt-Gt;d[Gt]=d[Ht],d[Gt+1]=d[1+Ht],d[Ht]=Wt,d[1+Ht]=jt,Gt+=2}var Zt=t.triangulator,p=t.clippingPolygon,f=p.length>>1,qt=Zt.indicesArray,Kt=(qt.splice(0,qt.length),qt.length);if(f<Kt)qt.splice(f,f-Kt);else if(Kt<f)for(;Kt<f;)qt.push(0),++Kt;for(var g=qt,Jt=0;Jt<f;)g[Jt]=Jt,++Jt;var $t=Zt.isConcaveArray,te=$t.length;if(f<te)$t.splice(f,f-te);else if(te<f)for(;te<f;)$t.push(!1),++te;for(var ee=$t,ne=0,se=f;ne<se;){var ie=g[(f+ne-1)%f]<<1,ae=g[ne]<<1,re=g[(ne+1)%f]<<1,le=p[1+ie],oe=p[1+ae],he=p[1+re];ee[ne]=!(0<=p[ie]*(he-oe)+p[ae]*(le-he)+p[re]*(oe-le)),++ne}var m=Zt.triangles;for(m.splice(0,m.length);3<f;){for(var ue,_e=f-1,A=0,ce=1;;){if(ue=!1,!ee[A]){for(var de=g[_e]<<1,pe=g[A]<<1,fe=g[ce]<<1,ge=p[de],me=p[1+de],Ae=p[pe],xe=p[1+pe],be=p[fe],ye=p[1+fe],we=(ce+1)%f;we!=_e;){if(ee[we]){var ve=g[we]<<1,Ce=p[ve],ve=p[1+ve];if(0<=be*(ve-me)+ge*(ye-ve)+Ce*(me-ye)&&0<=ge*(ve-xe)+Ae*(me-ve)+Ce*(xe-me)&&0<=Ae*(ve-ye)+be*(xe-ve)+Ce*(ye-xe)){ue=!0;break}}we=(we+1)%f}if(!ue)break}if(0==ce){for(;ee[A]&&0<--A;);break}_e=A,ce=((A=ce)+1)%f}m.push(g[(f+A-1)%f]),m.push(g[A]),m.push(g[(A+1)%f]),qt.splice(A,1),$t.splice(A,1);var Me=(--f+A-1)%f,Se=A==f?0:A,ke=g[(f+Me-1)%f]<<1,Be=g[Me]<<1,Ie=g[(1+Me)%f]<<1,Te=p[1+ke],Fe=p[1+Be],De=p[1+Ie],Me=(ee[Me]=!(0<=p[ke]*(De-Fe)+p[Be]*(Te-De)+p[Ie]*(Fe-Te)),g[(f+Se-1)%f]<<1),ke=g[Se]<<1,Be=g[(Se+1)%f]<<1,De=p[1+Me],Ie=p[1+ke],Fe=p[1+Be];ee[Se]=!(0<=p[Me]*(Fe-Ie)+p[ke]*(De-Fe)+p[Be]*(Ie-De))}3==f&&(m.push(g[2]),m.push(g[0]),m.push(g[1]));var x=t.triangulator,Ee=t.clippingPolygon,b=x.convexPolygons,Pe=(x.polygonPool.freeAll(b),b.splice(0,b.length),x.convexPolygonsIndices),y=(x.polygonIndicesPool.freeAll(Pe),Pe.splice(0,Pe.length),x.polygonIndicesPool.obtain());y.splice(0,y.length);(w=x.polygonPool.obtain()).splice(0,w.length);for(var ze=-1,Re=0,Ve=0,Qe=m.length;Ve<Qe;){var Oe,Le,Ue,Ne,Ge,Xe,Ye,We=m[Ve]<<1,je=m[Ve+1]<<1,He=m[Ve+2]<<1,Ze=Ee[We],qe=Ee[1+We],Ke=Ee[je],Je=Ee[1+je],$e=Ee[He],tn=Ee[1+He],en=!1;ze==We&&(Le=(Oe=w)[Ue=w.length-4],Xe=Oe[1+Ue],Ye=Oe[2+Ue]-Le,Ue=Oe[3+Ue]-Xe,Ne=Oe[0]-$e,Ge=Oe[1]-tn,(0<=$e*Ue-tn*Ye+Ye*Xe-Le*Ue?1:-1)==Re)&&(0<=Oe[2]*Ge-Oe[3]*Ne+Ne*tn-$e*Ge?1:-1)==Re&&(w.push($e),w.push(tn),y.push(He),en=!0),en||(0<w.length&&(b.push(w),Pe.push(y),w=x.polygonPool.obtain(),y=x.polygonIndicesPool.obtain()),w.splice(0,w.length),w.push(Ze),w.push(qe),w.push(Ke),w.push(Je),w.push($e),w.push(tn),y.splice(0,y.length),y.push(We),y.push(je),y.push(He),Re=0<=$e*(Ye=Je-qe)-tn*(Xe=Ke-Ze)+Xe*qe-Ze*Ye?1:-1,ze=We),Ve+=3}0<w.length&&(b.push(w),Pe.push(y));for(var nn=0,sn=b.length;nn<sn;){if(0==(y=Pe[nn]).length);else for(var w,an,rn,ln,on,hn,un,_n,cn,dn,pn=y[0],fn=y[y.length-1],gn=(w=b[nn]).length-4,v=w,mn=v[gn],An=v[1+gn],xn=v[2+gn],bn=v[3+gn],yn=v[0],wn=v[1],vn=v[2],Cn=v[3],gn=xn-mn,v=bn-An,Mn=0<=yn*v-wn*gn+gn*An-mn*v?1:-1,Sn=0;Sn<sn;)Sn==nn?++Sn:(3==(an=Pe[Sn]).length&&(rn=an[2],on=(ln=b[Sn])[ln.length-2],hn=ln[ln.length-1],an[0]==pn)&&an[1]==fn&&(cn=yn-on,dn=wn-hn,(0<=on*(_n=bn-An)-hn*(un=xn-mn)+un*An-mn*_n?1:-1)==Mn)&&(0<=vn*dn-Cn*cn+cn*hn-on*dn?1:-1)==Mn&&(ln.splice(0,ln.length),an.splice(0,an.length),w.push(on),w.push(hn),y.push(rn),mn=xn,An=bn,xn=on,bn=hn,Sn=0),++Sn);++nn}for(var kn,Bn=b.length-1;0<=Bn;)0==(w=b[Bn]).length&&(b.splice(Bn,1),x.polygonPool.free(w),kn=Pe[Bn],Pe.splice(Bn,1),x.polygonIndicesPool.free(kn)),--Bn;t.clippingPolygons=b;for(var In=0,Tn=t.clippingPolygons;In<Tn.length;){for(var Fn,Dn,En,C=Tn[In],Pn=(++In,C.length),zn=C[Pn-2]*C[1]-C[0]*C[Pn-1],Rn=0,Vn=Pn-3;Rn<Vn;)Fn=C[Rn],Dn=C[Rn+1],En=C[Rn+2],zn+=Fn*C[Rn+3]-En*Dn,Rn+=2;if(!(zn<0))for(var Qn=0,On=Pn-2,Ln=Pn>>1;Qn<Ln;){var Un=C[Qn],Nn=C[Qn+1],Gn=On-Qn;C[Qn]=C[Gn],C[Qn+1]=C[1+Gn],C[Gn]=Un,C[1+Gn]=Nn,Qn+=2}C.push(C[0]),C.push(C[1])}}}var Xn=this.clippingMeshes.h[s.attachment.name];if(null!=Xn){var M=t.clippingPolygon,r=qh.triangulator,S=M.length>>1,Yn=r.indicesArray,Wn=(Yn.splice(0,Yn.length),Yn.length);if(S<Wn)Yn.splice(S,S-Wn);else if(Wn<S)for(;Wn<S;)Yn.push(0),++Wn;for(var k=Yn,jn=0;jn<S;)k[jn]=jn,++jn;var Hn=r.isConcaveArray,Zn=Hn.length;if(S<Zn)Hn.splice(S,S-Zn);else if(Zn<S)for(;Zn<S;)Hn.push(!1),++Zn;for(var qn=Hn,Kn=0,Jn=S;Kn<Jn;){var $n=k[(S+Kn-1)%S]<<1,ts=k[Kn]<<1,es=k[(Kn+1)%S]<<1,ns=M[1+$n],ss=M[1+ts],is=M[1+es];qn[Kn]=!(0<=M[$n]*(is-ss)+M[ts]*(ns-is)+M[es]*(ss-ns)),++Kn}var B=r.triangles;for(B.splice(0,B.length);3<S;){for(var as,rs=S-1,I=0,ls=1;;){if(as=!1,!qn[I]){for(var os=k[rs]<<1,hs=k[I]<<1,us=k[ls]<<1,_s=M[os],cs=M[1+os],ds=M[hs],ps=M[1+hs],fs=M[us],gs=M[1+us],ms=(ls+1)%S;ms!=rs;){if(qn[ms]){var As=k[ms]<<1,xs=M[As],As=M[1+As];if(0<=fs*(As-cs)+_s*(gs-As)+xs*(cs-gs)&&0<=_s*(As-ps)+ds*(cs-As)+xs*(ps-cs)&&0<=ds*(As-gs)+fs*(ps-As)+xs*(gs-ps)){as=!0;break}}ms=(ms+1)%S}if(!as)break}if(0==ls){for(;qn[I]&&0<--I;);break}rs=I,ls=((I=ls)+1)%S}B.push(k[(S+I-1)%S]),B.push(k[I]),B.push(k[(I+1)%S]),Yn.splice(I,1),Hn.splice(I,1);var bs=(--S+I-1)%S,ys=I==S?0:I,ws=k[(S+bs-1)%S]<<1,vs=k[bs]<<1,Cs=k[(1+bs)%S]<<1,Ms=M[1+ws],Ss=M[1+vs],ks=M[1+Cs],bs=(qn[bs]=!(0<=M[ws]*(ks-Ss)+M[vs]*(Ms-ks)+M[Cs]*(Ss-Ms)),k[(S+ys-1)%S]<<1),ws=k[ys]<<1,vs=k[(ys+1)%S]<<1,ks=M[1+bs],Cs=M[1+ws],Ss=M[1+vs];qn[ys]=!(0<=M[bs]*(Ss-Cs)+M[ws]*(ks-Ss)+M[vs]*(Cs-ks))}3==S&&(B.push(k[2]),B.push(k[0]),B.push(k[1]));for(var Bs,Is=M.length>>1,u=Xn.content,Ts=B.length,Fs=u.vertexBuffer,Ds=Is*u.vertexStride,Es=Fs.pos;Es<Ds;)++Es,Fs.pos==Fs.array.length&&((Bs=Fs.array.length<<1)<128&&(Bs=128),(Bs=new Float32Array(Bs)).set(Fs.array),Fs.array=Bs),Fs.array[Fs.pos++]=0;for(var Ps=u.indexBuffer;Ps.length<Ts;)Ps.push(0);for(var zs=0;zs<Is;){var Rs=2*zs++,T=Xn.content,Vs=M[Rs],Vs=(T.vertexBuffer.array[T.verticesCount++]=Vs,M[1+Rs]);T.vertexBuffer.array[T.verticesCount++]=Vs,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=1,T.vertexBuffer.array[T.verticesCount++]=1,T.vertexBuffer.array[T.verticesCount++]=1,T.vertexBuffer.array[T.verticesCount++]=1,T.useDarkColor&&(T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0)}for(var Qs=0,Os=B;Qs<Os.length;){var Ls=Xn.content;Ls.indexBuffer[Ls.indexCount]=Os[Qs++],Ls.indexCount++}}continue}continue}var h=s.attachment,_=h.worldVerticesLength,Us=this._tempVerticesArray,Ns=2*(_>>1),Gs=s.deform,Xs=h.vertices,Ys=h.bones;if(null==Ys){0<Gs.length&&(Xs=Gs);for(var a=s.bone,Ws=a.worldX,js=a.worldY,Hs=a.a,Zs=a.b,qs=a.c,Ks=a.d,Js=0,$s=0;$s<Ns;){var ti=Xs[Js],ei=Xs[Js+1];Us[$s]=ti*Hs+ei*Zs+Ws,Us[$s+1]=ti*qs+ei*Ks+js,Js+=2,$s+=2}}else{var ni=0,si=(0,s.bone.skeleton.getBones());if(0==Gs.length)for(var ii=0,ai=0;ii<Ns;){var ri=0,li=0,oi=Ys[ni++];for(oi+=ni;ni<oi;){var hi=si[Ys[ni]],ui=Xs[ai],_i=Xs[ai+1],ci=Xs[ai+2];ri+=(ui*hi.a+_i*hi.b+hi.worldX)*ci,li+=(ui*hi.c+_i*hi.d+hi.worldY)*ci,++ni,ai+=3}Us[ii]=ri,Us[ii+1]=li,ii+=2}else for(var di=0,pi=0,fi=0;di<Ns;){var gi=0,mi=0,Ai=Ys[ni++];for(Ai+=ni;ni<Ai;){var xi=si[Ys[ni]],bi=Xs[pi]+Gs[fi],yi=Xs[pi+1]+Gs[fi+1],wi=Xs[pi+2];gi+=(bi*xi.a+yi*xi.b+xi.worldX)*wi,mi+=(bi*xi.c+yi*xi.d+xi.worldY)*wi,++ni,pi+=3,fi+=2}Us[di]=gi,Us[di+1]=mi,di+=2}}l={atlasRegion:er.__cast(h.getRegion(),Fd),regionColor:h.color,uvs:h.uvs,triangles:h.triangles,slotVerticesLength:_>>1}}if(null!=t.clipAttachment){var vi=l.triangles,Ci=this._tempVerticesArray,Mi=vi.length,Si=l.uvs,ki=t.clipOutput,F=t.clippedVertices,D=t.clippedTriangles,Bi=t.clippingPolygons,Ii=t.clippingPolygons.length,Ti=0;for(F.splice(0,F.length),D.splice(0,D.length);;){for(var Fi=0,Di=0;Di<Mi;){for(var E=vi[Di]<<1,Ei=Ci[E],Pi=Ci[1+E],zi=Si[E],Ri=Si[1+E],Vi=Ci[E=vi[Di+1]<<1],Qi=Ci[1+E],Oi=Si[E],Li=Si[1+E],Ui=Ci[E=vi[Di+2]<<1],Ni=Ci[1+E],Gi=Si[E],Xi=Si[1+E],Yi=0;Yi<Ii;){var P=F.length;if(!t.clip(Ei,Pi,Vi,Qi,Ui,Ni,Bi[Yi],ki)){var Wi=P+18,ji=F.length;if(Wi<ji)F.splice(Wi,Wi-ji);else if(ji<Wi)for(;ji<Wi;)F.push(0),++ji;F[P]=Ei,F[P+1]=Pi,F[P+2]=1,F[P+3]=1,F[P+4]=zi,F[P+5]=Ri,F[P+6]=Vi,F[P+7]=Qi,F[P+8]=1,F[P+9]=1,F[P+10]=Oi,F[P+11]=Li,F[P+12]=Ui,F[P+13]=Ni,F[P+14]=1,F[P+15]=1,F[P+16]=Gi,F[P+17]=Xi;var Hi=(P=D.length)+3,Zi=D.length;if(Hi<Zi)D.splice(Hi,Hi-Zi);else if(Zi<Hi)for(;Zi<Hi;)D.push(0),++Zi;D[P]=Ti,D[P+1]=Ti+1|0,D[P+2]=Ti+2|0,Ti+=3,Fi=2;break}var qi=ki.length;if(0==qi);else{var Ki=Qi-Ni,Ji=Ui-Vi,$i=Ei-Ui,ta=Ni-Pi,ea=1/(Ki*$i+Ji*(Pi-Ni)),na=qi>>1,sa=P+6*na,ia=F.length;if(sa<ia)F.splice(sa,sa-ia);else if(ia<sa)for(;ia<sa;)F.push(0),++ia;for(var aa=0;aa<qi;){var ra=ki[aa],la=ki[aa+1],ra=(F[P]=ra,F[P+1]=la,F[P+2]=1,ra-Ui),la=la-Ni,oa=(Ki*ra+Ji*la)*ea,ra=(ta*ra+$i*la)*ea,la=(F[P+3]=1)-oa-ra;F[P+=4]=zi*oa+Oi*ra+Gi*la,F[P+1]=Ri*oa+Li*ra+Xi*la,P+=2,aa+=2}if(2==Fi)break;if(1<=Fi)break;var ha=(P=D.length)+3*(na-2),ua=D.length;if(ha<ua)D.splice(ha,ha-ua);else if(ua<ha)for(;ua<ha;)D.push(0),++ua;--na;for(var _a=1;_a<na;)D[P]=Ti,D[P+1]=Ti+_a|0,D[P+2]=Ti+_a+1|0,P+=3,++_a;if(2==Fi)break;if(1<=Fi)break;Ti+=1+na}++Yi}if(2==Fi)Fi=0;else if(1<=Fi)break;Di+=3}if(0==Fi)break}if(0==t.clippedTriangles.length){null!=t.clipAttachment&&t.clipAttachment.endSlot==s.data&&null!=t.clipAttachment&&(t.clipAttachment=null,t.clippingPolygons=null,(K=t.clippedVertices).splice(0,K.length),(Aa=t.clippedTriangles).splice(0,Aa.length),(Aa=t.clippingPolygon).splice(0,Aa.length));continue}for(var ca=t.clippedVertices,da=Math.round(ca.length/6),pa=[],fa=0;fa<da;){var ga=6*fa++;pa.push([ga,1+ga,4+ga,5+ga])}for(var ma=Array.prototype.concat.apply([],pa),Aa=t.clippedTriangles,xa=new Array(ma.length),ba=0,ya=ma.length;ba<ya;){var wa=ba++;xa[wa]=ca[ma[wa]]}Ia={triangleIndices:Aa,uvPositions:xa}}else{for(var va=l.uvs,Ca=this._tempVerticesArray.length>>1,Ma=[],Sa=0;Sa<Ca;){var ka=2*Sa++;Ma.push([this._tempVerticesArray[ka],this._tempVerticesArray[1+ka],va[ka],va[1+ka]])}var Ba=Array.prototype.concat.apply([],Ma),Ia={triangleIndices:l.triangles,uvPositions:Ba}}Ba=s.data.blendMode;null==N&&this._usePremultipliedAlpha&&(1==Ba?(n.material.passes.set_depthWrite(!1),n.material.passes.set_blendSrc($a.One),n.material.passes.set_blendDst($a.One),n.material.passes.set_blendAlphaSrc($a.One),n.material.passes.set_blendAlphaDst($a.One)):(n.material.passes.set_depthWrite(!0),n.material.passes.set_blendSrc($a.One),n.material.passes.set_blendDst($a.OneMinusSrcAlpha),n.material.passes.set_blendAlphaSrc($a.One),n.material.passes.set_blendAlphaDst($a.OneMinusSrcAlpha)));var z,N=null!=N?N:Ba;this._usePremultipliedAlpha&&N!=Ba&&(++G,z=this._meshes.length<G?(z=this.createSubMesh(),this._meshes.push(z),z):this._meshes[G-1],e=er.__cast(z.primitive,nr),n=z,N=Ba,W=Y=X=0,this._usePremultipliedAlpha)&&(1==Ba?(z.material.passes.set_depthWrite(!1),z.material.passes.set_blendSrc($a.One),z.material.passes.set_blendDst($a.One),z.material.passes.set_blendAlphaSrc($a.One),z.material.passes.set_blendAlphaDst($a.One)):(z.material.passes.set_depthWrite(!0),z.material.passes.set_blendSrc($a.One),z.material.passes.set_blendDst($a.OneMinusSrcAlpha),z.material.passes.set_blendAlphaSrc($a.One),z.material.passes.set_blendAlphaDst($a.OneMinusSrcAlpha))),n.material.set_texture(er.__cast(l.atlasRegion.page.rendererObject,Jl).innerTex);for(var Ta,Fa=s.color,Da=l.regionColor,Ea=this.skeleton.color,Pa=Da.r*Ea.r*Fa.r,za=Da.g*Ea.g*Fa.g,Ra=Da.b*Ea.b*Fa.b,Va=Da.a*Ea.a*Fa.a,Da=s.darkColor,Qa=null!=Da?Da:kd.CLEAR,Oa=this._usePremultipliedAlpha?0:1,La=Ia.uvPositions,Ua=Ia.triangleIndices,Na=La.length>>2,Ga=Ua.length,Xa=(X+=Na,Y+=Ga,e.vertexBuffer),Ya=X*e.vertexStride,Wa=Xa.pos;Wa<Ya;)++Wa,Xa.pos==Xa.array.length&&((Ta=Xa.array.length<<1)<128&&(Ta=128),(Ta=new Float32Array(Ta)).set(Xa.array),Xa.array=Ta),Xa.array[Xa.pos++]=0;for(var ja=e.indexBuffer;ja.length<Y;)ja.push(0);for(var Ha=0;Ha<Na;){var Za=4*Ha++,qa=La[Za],qa=(e.vertexBuffer.array[e.verticesCount++]=qa,La[1+Za]),qa=(e.vertexBuffer.array[e.verticesCount++]=qa,e.vertexBuffer.array[e.verticesCount++]=0,La[2+Za]),qa=(e.vertexBuffer.array[e.verticesCount++]=qa,La[3+Za]);e.vertexBuffer.array[e.verticesCount++]=qa,e.vertexBuffer.array[e.verticesCount++]=Pa,e.vertexBuffer.array[e.verticesCount++]=za,e.vertexBuffer.array[e.verticesCount++]=Ra,e.vertexBuffer.array[e.verticesCount++]=Va,e.useDarkColor&&(e.vertexBuffer.array[e.verticesCount++]=Qa.r,e.vertexBuffer.array[e.verticesCount++]=Qa.g,e.vertexBuffer.array[e.verticesCount++]=Qa.b,e.vertexBuffer.array[e.verticesCount++]=Oa)}for(var Ka=0;Ka<Ga;)e.indexBuffer[e.indexCount]=Ua[Ka++]+W,e.indexCount++;W+=Na,null!=t.clipAttachment&&t.clipAttachment.endSlot==s.data&&null!=t.clipAttachment&&(t.clipAttachment=null,t.clippingPolygons=null,(Ea=t.clippedVertices).splice(0,Ea.length),(Fa=t.clippedTriangles).splice(0,Fa.length),(Da=t.clippingPolygon).splice(0,Da.length))}}Xd.each(this._meshes.slice(0,G),function(t){t.flags|=2}),Xd.each(this._meshes.slice(G),function(t){t.flags&=-3})},emit:function(t){this.renderTriangles(),null!=this.primitive&&Xo.prototype.emit.call(this,t)},draw:function(t){null!=this.primitive&&Xo.prototype.draw.call(this,t)},clone:function(t){for(var e=er.__cast(this.material.clone(),Ae),t=null==t?new qh(this._useDarkColor,e,null,this.skeleton,this._usePremultipliedAlpha):t,n=(Xo.prototype.clone.call(this,t),t.children),s=[],i=0;i<n.length;){var a=n[i];++i,"SplineSubMesh"==a.name&&s.push(a)}for(var r=new Array(s.length),i=0,l=s.length;i<l;){var o=i++;r[o]=s[o].toMesh()}return this._meshes=r,null!=t.primitive&&this._meshes.push(t),t.material=e,t},createSubMesh:function(){var t=new Xo(new nr(this._useDarkColor),er.__cast(this.material.clone(),Ae),this);return t.name="SplineSubMesh",t.material.passes.load(this.material.passes),t.material.passes.addShader(new(this._useDarkColor?rs:_h)),this._usePremultipliedAlpha&&t.material.passes.addShader(new as),t},__class__:qh}),function(t,e){null==e&&(e=!1),this._initialSize=null,this._lastW=0,this._charW=0,this._fontSettings=null,this._strings=[],this._tiles=[],this._meshPools=new N,_o.call(this),this._config=t,this._anchor=t.anchor,this.prepareResources();e=new Vl(this);Ql.init(e,null),this.tweenObject=e}),Jh=((e["hacksaw.core.h3d.text.TextElement"]=Kh).__name__="hacksaw.core.h3d.text.TextElement",Kh.create=function(t){return new Kh(t)},Kh.__super__=_o,Kh.prototype=t(_o.prototype,{show:function(t,e){this.showText(this._config.strings.h[t],e=null==e?!1:e)},showText:function(t,e){if(null==e&&(e=!1),null!=t&&""!=t){this.flags|=2,this.clear();var n=this._config.resource;switch(n._hx_index){case 0:case 1:var s=n.align;this.showChars(t,e,n.charSpacing,null==s?Kl.Center:s);break;case 2:this.showString(t);break;case 3:this.showImage(t)}this.currString=t,this._centerReset=e}},changeTextStyle:function(t,e){var n;null==e&&(e=!1),null!=t&&null!=this.currString&&(n=this._initialSize,this._initialSize=null==n?this._fontSettings.style.size:n,n=(null==(n=t.size)?this._initialSize:n)/this._initialSize,this._fontSettings.style=ru.mergeTextStyles(this._fontSettings.style,t),this.flags|=2,this.clear(),this.addFontString(this.currString,n),2==this._config.resource._hx_index?this.showString(this.currString):new tr("Change text style is implemented only for FontCharacters"),this._centerReset=e)},clear:function(){var n=this;Xd.each(this._strings,function(t){t.object.set_visible(!1);var e=n._meshPools.h[t.char],t=t.object;e.size==e.maxSize?e.mDispose(t):(e.size==e.mCapacity&&e.resize(),e.mPool[e.size++]=t)}),this._strings=[],this.currString=null},dispose:function(){var e=this;for(this.clear(),Xd.each(this._strings,function(t){e._meshPools.h[t.char].free(),t.object.remove(),t.object.get_parent().removeChild(t.object.object)});0<this._tiles.length;)this._tiles.pop().dispose();this._meshPools.h=Object.create(null),null!=this.parent&&this.parent.removeChild(this)},update:function(t){Ql.update(this.tweenObject,t);for(var e=0,n=this._strings;e<n.length;)Ql.update(n[e++].object,t)},prepareResources:function(){var c=this,t=(this._meshPools.h=Object.create(null),this._config.resource);switch(t._hx_index){case 0:for(var h=t.tiles,e=t.models.h,n=(d=Object.keys(e)).length,s=0;s<n;){var i=d[s++],a=this._meshPools,r=new nd(function(o){return function(){for(var t=o[0].toHmd().makeObject(function(e){var t=Xd.find(h,function(t){return 0<=e.indexOf(t.path)}).diffuse;return c._charW=0==c._charW?t.width:(c._charW+t.width)/2,uu.getSubTexture(t)}),e=0,n=t.getMaterials();e<n.length;){var s,i,a=n[e],r=(++e,i=2==c._config.resource._hx_index?null==(s=c._config.blendMode)?y.AlphaAdd:s:null==(s=c._config.blendMode)?y.Alpha:s,a.set_blendMode(i),a.passes.set_depthTest(c._config.depthTest),c._config.shadows);a.set_castShadows(r),a.set_receiveShadows(r),null!=c.color&&(i=a.mshader.color__,a=c.color,i.x=(a>>16&255)/255,i.y=(a>>8&255)/255,i.z=(255&a)/255,i.w=(a>>>24)/255)}var r=c._config.scale,l=(t.scaleX=r,t.flags|=1,t.scaleY=r,t.flags|=1,t.scaleZ=r,t.flags|=1,t.flags|=1,t.setRotation(c._config.rotation.x,c._config.rotation.y,c._config.rotation.z),c._config.addStencil&&au.stencil(t),t.getBounds());if(t.name=l.xMin+":"+l.xMax+":"+l.yMin+":"+l.yMax,c.addChild(t),c._config.ignoreBounds)for(e=0,n=t.getMeshes();e<n.length;)n[e++].flags|=512;l=new Vl(t);return Ql.init(l,null),l}}([e[i]]),function(t){t.remove()});a.h[i]=r}break;case 1:for(var l=t.charMap,e=t.atlas.contents.h,n=(d=Object.keys(e)).length,s=0;s<n;){var o=[e[i=d[s++]]],u=null!=l&&Object.prototype.hasOwnProperty.call(l.h,i)?l.h[i]:i,a=this._meshPools,r=new nd(function(_){return function(){var t=_[0][0],e=Jh.create(new $h(t.t,null,null,null,null,null,null,null,null,null,t.width,t.height,null,null)),n=(c._charW=0==c._charW?t.width:(c._charW+t.width)/2,t.width/Tn.REFERENCE_SIZE),s=t.height/Tn.REFERENCE_SIZE;(o=e.get_mesh()).scaleX=n,o.flags|=1;(o=e.get_mesh()).scaleY=s,o.flags|=1;for(var i=0,a=e.getMaterials();i<a.length;){var r,l,o,h=a[i],u=(++i,r=2==c._config.resource._hx_index?null==(l=c._config.blendMode)?y.AlphaAdd:l:null==(l=c._config.blendMode)?y.Alpha:l,h.set_blendMode(r),h.passes.set_depthTest(c._config.depthTest),c._config.shadows);h.set_castShadows(u),h.set_receiveShadows(u),null!=c.color&&(o=h.mshader.color__,t=c.color,o.x=(t>>16&255)/255,o.y=(t>>8&255)/255,o.z=(255&t)/255,o.w=(t>>>24)/255)}u=c._config.scale,e.scaleX=u,e.flags|=1,e.scaleY=u,e.flags|=1,e.scaleZ=u,e.flags|=1,e.flags|=1,e.setRotation(c._config.rotation.x,c._config.rotation.y,c._config.rotation.z),c._config.addStencil&&au.stencil(e),n=e.getBounds();if(e.name=n.xMin+":"+n.xMax+":"+n.yMin+":"+n.yMax,c.addChild(e),c._config.ignoreBounds)for(i=0,a=e.getMeshes();i<a.length;)a[i++].flags|=512;s=new Vl(e);return Ql.init(s,null),s}}(o),function(t){t.remove()});a.h[u]=r}break;case 2:l=t.strings;if(this._fontSettings={font:t.font,style:t.style,align:t.align,multiline:t.multiline,maxWidth:t.maxWidth,maxHeight:t.maxHeight},null!=l)for(var _=0;_<l.length;)this.addFontString(l[_++]);break;case 3:for(var d,e=t.tiles.h,n=(d=Object.keys(e)).length,s=0;s<n;){var p=e[d[s++]],a=this._meshPools,i=p.text,r=new nd(function(o){return function(){for(var t=Jh.create(new $h(o[0],null,null,null,null,null,null,null,null,null,null,null,null,null)),e=0,n=t.getMaterials();e<n.length;){var s,i,a=n[e],r=(++e,i=2==c._config.resource._hx_index?null==(s=c._config.blendMode)?y.AlphaAdd:s:null==(s=c._config.blendMode)?y.Alpha:s,a.set_blendMode(i),a.passes.set_depthTest(c._config.depthTest),c._config.shadows);a.set_castShadows(r),a.set_receiveShadows(r),null!=c.color&&(i=a.mshader.color__,a=c.color,i.x=(a>>16&255)/255,i.y=(a>>8&255)/255,i.z=(255&a)/255,i.w=(a>>>24)/255)}var r=c._config.scale,l=(t.scaleX=r,t.flags|=1,t.scaleY=r,t.flags|=1,t.scaleZ=r,t.flags|=1,t.flags|=1,t.setRotation(c._config.rotation.x,c._config.rotation.y,c._config.rotation.z),c._config.addStencil&&au.stencil(t),t.getBounds());if(t.name=l.xMin+":"+l.xMax+":"+l.yMin+":"+l.yMax,c.addChild(t),c._config.ignoreBounds)for(e=0,n=t.getMeshes();e<n.length;)n[e++].flags|=512;l=new Vl(t);return Ql.init(l,null),l}}([p.tile]),function(t){t.remove()});a.h[i]=r}}},createTile:function(t){var e=new mt(this._fontSettings.font),n=(e.set_text(t),this._fontSettings.align),s=this._fontSettings.multiline,n=lu.applyStyleTile(e,new ou(this._fontSettings.style,this._fontSettings.maxWidth,this._fontSettings.maxHeight,null,null==n?this._fontSettings.multiline?Kl.MultilineCenter:Kl.Center:n,null,null!=s&&s,null,null,null,null,null));return e.dispose(),this._charW=n.width/t.length,n},addFontString:function(u,_){var t,e,c=this;null!=u&&""!=u&&(t=this._meshPools,e=new nd(function(){var t=c.createTile(u),e=(c._tiles.push(t),Jh.create(new $h(t,null,null,null,null,null,null,null,null,null,0|t.width,0|t.height,null,null))),n=(e.getMaterials()[0].get_texture().preventAutoDispose(),t.width/Tn.REFERENCE_SIZE),t=t.height/Tn.REFERENCE_SIZE;(r=e.get_mesh()).scaleX=n,r.flags|=1;(r=e.get_mesh()).scaleY=t,r.flags|=1;for(var s=0,i=e.getMaterials();s<i.length;){var a,r,l,o=i[s],h=(++s,l=2==c._config.resource._hx_index?null==(a=c._config.blendMode)?y.AlphaAdd:a:null==(a=c._config.blendMode)?y.Alpha:a,o.set_blendMode(l),o.passes.set_depthTest(c._config.depthTest),c._config.shadows);o.set_castShadows(h),o.set_receiveShadows(h),null!=c.color&&(r=o.mshader.color__,l=c.color,r.x=(l>>16&255)/255,r.y=(l>>8&255)/255,r.z=(255&l)/255,r.w=(l>>>24)/255)}h=null==_?c._config.scale:_/c._config.scale,e.scaleX=h,e.flags|=1,e.scaleY=h,e.flags|=1,e.scaleZ=h,e.flags|=1,e.flags|=1,e.setRotation(c._config.rotation.x,c._config.rotation.y,c._config.rotation.z),c._config.addStencil&&au.stencil(e),n=e.getBounds();if(e.name=n.xMin+":"+n.xMax+":"+n.yMin+":"+n.yMax,c.addChild(e),c._config.ignoreBounds)for(s=0,i=e.getMeshes();s<i.length;)i[s++].flags|=512;t=new Vl(e);return Ql.init(t,null),t}),t.h[u]=e)},showChars:function(t,e,n,s){for(var i,a,r=0,l=0,o=(null==n&&(n=0),this._lastW=e?0:this._lastW,this._config.space),h=null==o?this._charW/Tn.REFERENCE_SIZE:o,u=0,_=t.split("");u<_.length;){var c,d,p,f,g,m=_[u];++u," "==m?r+=h:(Object.prototype.hasOwnProperty.call(this._meshPools.h,m)||(this.prepareResources(),Object.prototype.hasOwnProperty.call(this._meshPools.h,m)),(c=0<(A=this._meshPools.h[m]).size?A.mPool[--A.size]:A.mFactory()).set_visible(!0),g=c.get_name().split(":"),d=parseFloat(g[0]),p=parseFloat(g[1]),f=parseFloat(g[2]),g=parseFloat(g[3]),l=Math.max(g-f,l),c.set_x(r-d),r+=p-d+n,this._strings.push({char:m,object:c}))}switch(this._lastW=Math.max(r-n,this._lastW),s._hx_index){case 0:i=0;break;case 1:i=-this._lastW;break;case 2:i=.5*-this._lastW;break;case 3:case 4:throw tr.thrown("Multiline not implemented for tile and mesh text")}switch(this.get_anchor()._hx_index){case 0:a=l;break;case 1:a=-l;break;case 2:case 3:case 4:a=0}switch(this.get_anchor()._hx_index){case 2:var A,x=.5*-((A=this.getBounds()).xMax-A.xMin);break;case 3:x=.5*((A=this.getBounds()).xMax-A.xMin);break;case 0:case 1:case 4:x=0}for(u=0,_=this._strings;u<_.length;){var b=_[u];++u,b.object.setPosition(b.object.get_x()+i+x,b.object.get_y()+a,b.object.get_z())}e&&(this._lastW=0)},showString:function(t){Object.prototype.hasOwnProperty.call(this._meshPools.h,t)||this.addFontString(t),this.currString=t;var e=this._meshPools.h[t],n=0<e.size?e.mPool[--e.size]:e.mFactory(),e=(n.set_visible(!0),n.get_name().split(":")),s=parseFloat(e[0]),i=parseFloat(e[1]),a=parseFloat(e[2]),r=i-s,l=parseFloat(e[3])-a;switch(this._strings.push({char:t,object:n}),this.get_anchor()._hx_index){case 0:n.setPosition(0,.5*l,n.get_z());break;case 1:n.setPosition(0,.5*-l,n.get_z());break;case 2:n.setPosition(.5*-r,0,n.get_z());break;case 3:n.setPosition(.5*r,0,n.get_z())}},showImage:function(t){if(Object.prototype.hasOwnProperty.call(this._meshPools.h,t)){this.currString=t;var e=this._meshPools.h[t],n=0<e.size?e.mPool[--e.size]:e.mFactory(),e=(n.set_visible(!0),n.get_name().split(":")),s=parseFloat(e[0]),i=parseFloat(e[1]),a=parseFloat(e[2]),r=i-s,l=parseFloat(e[3])-a;switch(this._strings.push({char:t,object:n}),this.get_anchor()._hx_index){case 0:n.setPosition(0,.5*l,n.get_z());break;case 1:n.setPosition(0,.5*-l,n.get_z());break;case 2:n.setPosition(.5*-r,0,n.get_z());break;case 3:n.setPosition(.5*r,0,n.get_z())}}},get_anchor:function(){return this._anchor},set_anchor:function(t){if(this._anchor=t,null!=this.currString){var e=this.currString,n=(this.clear(),this._config.resource);switch(n._hx_index){case 0:var s=n.align;this.showChars(e,this._centerReset,n.charSpacing,null==s?Kl.Center:s);break;case 1:var i,s=n.charSpacing,a=n.align;switch(t._hx_index){case 2:i=Kl.Left;break;case 3:i=Kl.Right;break;default:i=null==a?Kl.Center:a}this.showChars(e,this._centerReset,s,i);break;case 2:this.showString(e);break;case 3:this.showImage(e)}}return t},__class__:Kh,__properties__:t(_o.prototype.__properties__,{set_anchor:"set_anchor",get_anchor:"get_anchor"})}),function(t,e){null==e&&(e=!1),_o.call(this,t.parent),this._config=t;var n=new Vl(this);Ql.init(n,null),this.tweenObject=n,e||((n=Qh.create(t.tile,t.normalMap)).passes.set_depthTest(t.depthTest),n.set_blendMode(t.blendMode),n.set_receiveShadows(t.receiveShadows),n.set_castShadows(t.castShadows),n.setFixedWidth(t.fixedWidth),n.setFixedHeight(t.fixedHeight),this.set_mesh(null!=t.createMesh?t.createMesh(n):this.createMeshDefault(n)),e=this.get_mesh(),n=t.scale,e.scaleX*=n,e.flags|=1,e.scaleY*=n,e.flags|=1,e.scaleZ*=n,e.flags|=1,e.flags|=1,this.position(),null!=t.offset&&((e=this.get_mesh()).x=t.offset.x,e.flags|=1,e.y=t.offset.y,e.flags|=1,e.z=t.offset.z,e.flags|=1,e.flags|=1),this.addChild(this.get_mesh()))}),$h=((e["hacksaw.core.h3d.tile.TileElement"]=Jh).__name__="hacksaw.core.h3d.tile.TileElement",Jh.create=function(t){return new Jh(t)},Jh.__super__=_o,Jh.prototype=t(_o.prototype,{update:function(t){Ql.update(this.tweenObject,t),null!=this.get_animator()&&this.get_animator().update(t)},createMeshDefault:function(t){var e=new ss(1,1,!0),e=(e.addNormals(),e.addUVs(),new Xo(e,t)),t=this.getSize(t);return e.scaleX=t.x,e.flags|=1,e.scaleY=t.y,e.flags|=1,e},dispose:function(){var t;null!=this.get_mesh()&&null!=(t=this.get_mesh())&&null!=t.parent&&t.parent.removeChild(t)},get_animator:function(){return null==this.animator&&this.set_animator(new tu(this.get_material())),this.animator},set_animator:function(t){return this.animator=t},setTile:function(t,e,n){null==n&&(n=0),null==e&&(e=1),this.get_material().setDiffuse(t,n),null!=e&&(n=uu.getSizeByReference(t),(t=this.get_mesh()).scaleX=n.x,t.flags|=1,(t=this.get_mesh()).scaleY=n.y,t.flags|=1,(t=this.get_mesh()).scaleZ=e,t.flags|=1,(t=this.get_mesh()).scaleX*=e,t.flags|=1,t.scaleY*=e,t.flags|=1,t.scaleZ*=e,t.flags|=1,t.flags|=1),this.position(),this.update(0)},clone:function(t){for(var e=new Jh(this._config,!0),n=(e.x=this.x,e.flags|=1,e.y=this.y,e.flags|=1,e.z=this.z,e.flags|=1,e.scaleX=this.scaleX,e.flags|=1,e.scaleY=this.scaleY,e.flags|=1,e.scaleZ=this.scaleZ,e.flags|=1,e.qRot),s=this.qRot,i=(n.x=s.x,n.y=s.y,n.z=s.z,n.w=s.w,e.name=this.name,e.set_follow(this.follow),0!=(8&this.flags)?e.flags|=8:e.flags&=-9,0!=(2&this.flags)?e.flags|=2:e.flags&=-3,null!=this.defaultTransform&&(e.defaultTransform=this.defaultTransform.clone(),e.flags|=1),e.set_mesh(this.get_mesh().clone()),e.addChild(e.get_mesh()),0),a=this.children;i<a.length;){var r=a[i];++i,this.get_mesh()!=r&&e.addChild(r.clone())}return e},getSize:function(t){var e;return null!=this._config.fixedWidth&&null!=this._config.fixedHeight?{x:this._config.fixedWidth/Tn.REFERENCE_SIZE,y:this._config.fixedHeight/Tn.REFERENCE_SIZE}:(e=this.get_material(),uu.getSizeByReference((null==t?e:t).getDiffuse()))},position:function(){var t,e,n=this.getSize();switch(this._config.anchor._hx_index){case 2:t=-n.x;break;case 3:t=n.x;break;default:t=0}switch(this._config.anchor._hx_index){case 0:e=n.y;break;case 1:e=-n.y;break;default:e=0}var s=this.get_mesh();s.x=t,s.flags|=1,(s=this.get_mesh()).y=e,s.flags|=1},get_material:function(){return null!=this.get_mesh()?this.get_mesh().material:null},get_mesh:function(){return this.mesh},set_mesh:function(t){return this.get_mesh(),this.mesh=t},__class__:Jh,__properties__:t(_o.prototype.__properties__,{set_animator:"set_animator",get_animator:"get_animator",set_mesh:"set_mesh",get_mesh:"get_mesh",get_material:"get_material"})}),function(t,e,n,s,i,a,r,l,o,h,u,_,c,d){this.anchor=tl.NONE,this.parent=null,this.fixedHeight=null,this.fixedWidth=null,this.receiveShadows=!1,this.castShadows=!1,this.createAnimator=!1,this.createMesh=null,this.depthTest=xo.LessEqual,this.blendMode=y.Alpha,this.scale=1,this.offset=null,this.normalMap=null,(this.tile=null)!=t&&(this.tile=t),null!=e&&(this.normalMap=e),null!=n&&(this.offset=n),null!=s&&(this.scale=s),null!=i&&(this.blendMode=i),null!=a&&(this.depthTest=a),null!=r&&(this.createMesh=r),null!=l&&(this.createAnimator=l),null!=o&&(this.castShadows=o),null!=h&&(this.receiveShadows=h),null!=u&&(this.fixedWidth=u),null!=_&&(this.fixedHeight=_),null!=c&&(this.parent=c),null!=d&&(this.anchor=d)}),tu=((e["hacksaw.core.h3d.tile.TileElementConfig"]=$h).__name__="hacksaw.core.h3d.tile.TileElementConfig",$h.prototype={__class__:$h},function(t){this._stopCallback=null,this._playCallback=null,this._fixedHeightBefore=null,this._fixedWidthBefore=null,this._endFrameOverride=null,this._loopIterations=0,this._duration=0,this._time=0,this._transitionAnimation=null,this._animation=null,this.material=t,this.set_origTile(t.getDiffuse())}),eu=((e["hacksaw.core.h3d.tile.TileTargetAnimator"]=tu).__name__="hacksaw.core.h3d.tile.TileTargetAnimator",tu.prototype={play:function(s,i,a,r){null==a&&(a=eu.Original);var l=this,t=$d.irreversible(function(t){for(var e,n=0;null==l.origTile;)l.set_origTile(s.animationData.frames[n]),++n;if(s.loop=null!=i?i:s.loop,null!=s.resetFrame&&(a=s.resetFrame),null!=r){switch(r._hx_index){case 0:e=0|Math.max(l.currentFrameIndex,0);break;case 1:e=r.frame;break;case 2:e=l._animation.endFrame}l._transitionAnimation={animation:s,atFrame:e}}else l._animation=s,l.currentFrameIndex=-1,l.set_startFrame(l._animation.startFrame),l.set_endFrame(l._animation.endFrame);l._resetTile=l.determineResetTile(a),null==l._playCallback&&0==l._loopIterations&&(l._resetTile!=l.origTile?(l._fixedWidthBefore=l._animation.animationData.width,l._fixedHeightBefore=l._animation.animationData.height):(l._fixedWidthBefore=l.material.getFixedWidth(l._animation.target),l._fixedHeightBefore=l.material.getFixedHeight(l._animation.target))),l.material.setFixedWidth(l._animation.animationData.width,l._animation.target),l.material.setFixedHeight(l._animation.animationData.height,l._animation.target),l._time=1/s.fps*(l.endFrame-l.startFrame+1),l._duration=l._time,l._playCallback=t,l._stopCallback=null});return t.eager(),t},cancel:function(){this._time=1/0,this.reset()},update:function(t){var e;null!=this._animation&&(this._time-=t,t=!1,1<=(e=1-this._time/this._duration)&&(e=1,t=!0),(e=this.startFrame*(1-e)+(this.endFrame+1)*e|0)!=this.currentFrameIndex&&(null!=this._endFrameOverride&&this.currentFrameIndex==this._endFrameOverride&&(t=!0),this.currentFrameIndex=e,this.currentFrameIndex>this.endFrame&&(this.currentFrameIndex=this.endFrame),null!=this._transitionAnimation&&this._transitionAnimation.atFrame==this.currentFrameIndex&&(this._animation=this._transitionAnimation.animation,this._transitionAnimation=null),null!=(e=this._animation.animationData.frames[this.currentFrameIndex]))&&this.material.setDiffuse(e,this._animation.target),t)&&(this._animation.loop?(this.triggerCallbacks(!0,!1),this._loopIterations++,this.play(this._animation)):this.reset())},determineResetTile:function(t){if(null==t)return this._resetTile;switch(t._hx_index){case 0:return this._animation.animationData.frames[this.endFrame];case 1:return this._animation.animationData.frames[this.startFrame];case 2:return this._animation.animationData.frames[this.currentFrameIndex];case 3:return this.origTile}},triggerCallbacks:function(t,e){null!=this._playCallback&&t&&(t=this._playCallback,Hd.invoke(this._playCallback,null),t==this._playCallback)&&(this._playCallback=null),null!=this._stopCallback&&e&&(t=this._stopCallback,Hd.invoke(this._stopCallback,null),t==this._stopCallback)&&(this._stopCallback=null)},reset:function(){var t=null!=this._animation?this._animation.target:0;this.material.setDiffuse(this._resetTile,t),this.material.setFixedWidth(this._fixedWidthBefore,t),this.material.setFixedHeight(this._fixedHeightBefore,t),this._animation=null,this._transitionAnimation=null,this._endFrameOverride=null,this._loopIterations=0,this.triggerCallbacks(!0,!0)},set_startFrame:function(t){return this.startFrame=0|Math.max(t,0),this.startFrame},set_endFrame:function(t){var e=this._animation.animationData.frames.length-1;return this.endFrame=0|(null==t?e:Math.min(t,e)),this.endFrame},set_origTile:function(t){return this.origTile=t},__class__:tu,__properties__:{set_endFrame:"set_endFrame",set_startFrame:"set_startFrame",set_origTile:"set_origTile"}},d["hacksaw.core.h3d.tile.ResetFrame"]={__ename__:!0,__constructs__:null,LastFrame:{_hx_name:"LastFrame",_hx_index:0,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:l},FirstFrame:{_hx_name:"FirstFrame",_hx_index:1,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:l},CurrentFrame:{_hx_name:"CurrentFrame",_hx_index:2,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:l},Original:{_hx_name:"Original",_hx_index:3,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:l}}),s=(eu.__constructs__=[eu.LastFrame,eu.FirstFrame,eu.CurrentFrame,eu.Original],eu.__empty_constructs__=[eu.LastFrame,eu.FirstFrame,eu.CurrentFrame,eu.Original],d["hacksaw.core.h3d.tile.TileAnimationTransition"]={__ename__:!0,__constructs__:null,Immediate:{_hx_name:"Immediate",_hx_index:0,__enum__:"hacksaw.core.h3d.tile.TileAnimationTransition",toString:l},AtFrame:((c=function(t){return{_hx_index:1,frame:t,__enum__:"hacksaw.core.h3d.tile.TileAnimationTransition",toString:l}})._hx_name="AtFrame",c.__params__=["frame"],c),LastFrame:{_hx_name:"LastFrame",_hx_index:2,__enum__:"hacksaw.core.h3d.tile.TileAnimationTransition",toString:l}}),nu=(s.__constructs__=[s.Immediate,s.AtFrame,s.LastFrame],s.__empty_constructs__=[s.Immediate,s.LastFrame],function(t,e,n,s,i,a,r,l,o,h,u,_,c,d,p,f,g,m,A,x,b){this.resetScale=!0,this.keepStencil=!1,this.keepOverlayVisible=!1,this.remainAfterReplace=!1,this.target=0,this.replace=!1,this.castShadows=!1,this.shadows=!1,this.culling=Ao.None,this.depthTest=xo.Always,this.blendMode=y.Alpha,this.rotation=new R,this.offset=null,this.scale=1,this.overlay=!1,this.endFrame=null,this.resetFrame=null,this.startFrame=0,this.loop=!1,this.fps=30,this.animationData=t,null!=e&&(this.fps=e),null!=n&&(this.loop=n),null!=s&&(this.startFrame=s),null!=i&&(this.resetFrame=i),null!=a&&(this.endFrame=a),null!=r&&(this.overlay=r),null!=l&&(this.scale=l),null!=o&&(this.offset=o),null!=h&&(this.rotation=h),null!=u&&(this.blendMode=u),null!=_&&(this.depthTest=_),null!=c&&(this.culling=c),null!=d&&(this.shadows=d),null!=p&&(this.castShadows=p),null!=f&&(this.replace=f),null!=g&&(this.target=g),null!=m&&(this.remainAfterReplace=m),null!=A&&(this.keepOverlayVisible=A),null!=x&&(this.keepStencil=x),null!=b&&(this.resetScale=b)}),su=((e["hacksaw.core.h3d.tile.TileTargetAnimation"]=nu).__name__="hacksaw.core.h3d.tile.TileTargetAnimation",nu.prototype={__class__:nu},(e["hxfsm.IState"]=cs).__name__="hxfsm.IState",cs.__isInterface__=!0,(e["hxfsm.StateBase"]=ds).__name__="hxfsm.StateBase",ds.__interfaces__=[cs],ds.prototype={__class__:ds},(e["hex.di.IInjectorAcceptor"]=ps).__name__="hex.di.IInjectorAcceptor",ps.__isInterface__=!0,ps.prototype={__class__:ps},(e["hex.di.IInjectorContainer"]=fs).__name__="hex.di.IInjectorContainer",fs.__isInterface__=!0,fs.__interfaces__=[ps],(e["hxfsm.integrations.injector.IInjectorState"]=gs).__name__="hxfsm.integrations.injector.IInjectorState",gs.__isInterface__=!0,gs.__interfaces__=[fs,cs],gs.prototype={__class__:gs},(e["hacksaw.core.state.HacksawStateBase"]=ms).__name__="hacksaw.core.state.HacksawStateBase",ms.__interfaces__=[gs],ms.__super__=ds,ms.prototype=t(ds.prototype,{subscribe:function(t,e,n,s){null==s&&(s=!1),null!=this._listeners&&(e=(t=hacksawCasino.PubSub.getChannel(t)).subscribe(e,n),s||this._listeners.push({sub:e,channel:t}))},subscribeOnce:function(t,e,n){var s;null!=this._listeners&&(t=hacksawCasino.PubSub.getChannel(t),s=null,s={sub:t.subscribe(e,function(t){n(t),null!=s&&s.channel.unsubscribe(s.sub)}),channel:t},this._listeners.push(s))},sub:function(t,e,n){null==n&&(n=!1);var s=lp.trigger();return this.subscribe(t,e,function(t){s.handlers.invoke(t)},n),s},subOnce:function(t,n){var s=this,e=$d.irreversible(function(e){s.subscribeOnce(t,n,function(t){e(t)})});return e.eager(),e},publish:function(t,e,n){hacksawCasino.PubSub.getChannel(t).publish(e,n)},after:function(n,s){null==s&&(s="default");var i=this,t=$d.irreversible(function(t){var e;null!=i._delays&&(e=qu.delay(function(){t(null)},0|ol.mult(n,1e3)),i._delays.push({timer:e,group:s}))});return t.eager(),t},next:function(){var t=$d.irreversible(function(t){qu.delay(function(){t(null)},0)});return t.eager(),t},enter:function(){},exit:function(){for(;0<this._listeners.length;){var t=this._listeners.pop();t.channel.unsubscribe(t.sub)}for(this._listeners=null;0<this._delays.length;)this._delays.pop().timer.stop();this._delays=null;var e=Z.field(this,"appModel");null==e||null==this._renderCallback||ms._renderCallbackPersistent||(e.customRenderCallback=this._renderCallback=null)},acceptInjector:function(t){},__class__:ms}),function(){}),iu=((e["hacksaw.core.utils.AtlasUtils"]=su).__name__="hacksaw.core.utils.AtlasUtils",su.mipmap=function(t){for(var e=ao.CURRENT,n=t.contents.h,s=Object.keys(n),i=s.length,a=0;a<i;){var r=n[s[a++]][0].t.innerTex;0==(4&r.flags)&&(e.driver.generateMipMaps(r),r.flags|=4,r.set_mipMap(yo.Linear),r.set_filter(wo.Linear))}return t},su.getTile=function(t,e){t=t.contents.h[e];return null!=t?t[0].t:null},function(){}),au=((e["hacksaw.core.utils.GradientUtils"]=iu).__name__="hacksaw.core.utils.GradientUtils",iu.toTile=function(t,e,n,s,i){t=t.toTextureMap(n).h[e],s=null==s?n:s,i=null==i?n:i,e=Jl.fromTexture(t);return e.scaleToSize(s,i),e},function(){}),ru=((e["hacksaw.core.utils.ObjectUtils"]=au).__name__="hacksaw.core.utils.ObjectUtils",au.stencil=function(t){var o;(o=function(t){for(var e=0,n=t.getMaterials();e<n.length;){var s=n[e++].passes,i=new Fo;i.setFunc(xo.Equal,1,255,0),s.stencil=i}for(var a=t.children,r=0,l=a.length;r<l;)o(a[r++])})(t)},au.ignoreAllBounds=function(t,i){null==i&&(i=!0);var a;(a=function(t){i?t.flags|=512:t.flags&=-513;for(var e=t.children,n=0,s=e.length;n<s;)a(e[n++])})(t)},(e["hacksaw.core.utils.Sequencer"]=As).__name__="hacksaw.core.utils.Sequencer",As.prototype={add:function(t){this._funcs.push(t)},run:function(e,n,s,i){null==i&&(i=!0),null==s&&(s=!0),null==e&&(e=!1);var a=this,t=$d.irreversible(function(t){a._loop=e,a._clearFunctionsOnStop=i,a._completeIfLoop=s,a._running=!0,null==a._index&&(a._index=0),a._autoProgressDelay=1e3*n|0,ol.gt(n,0)&&(a._autoupdate?a._timer=_u.interval(function(){a.next()},1e3*n|0):a._timeUntilNextEvent=n),a.onComplete(function(){t(null)}),a.next()});return t.eager(),t},next:function(){if(this._running){if(this._index==this._funcs.length){if(!this._loop)return this.stop(),!0;this._completeIfLoop&&this.triggerOnCompleteCallbacks(),this._index=0}var t;this._running&&(t=this._funcs[this._index],this._index++,null!=t)&&t()}else if(this._runUntilResolved){if(this._index==this._funcs.length)return this.stop(),!0;this._index++}return!1},stop:function(){null!=this._timer&&_u.stopInterval(this._timer),this._timeUntilNextEvent=0,this._running=!1,this._index=null,this._loop=!1,this.triggerOnCompleteCallbacks(),this._clearFunctionsOnStop&&(this._funcs=[]),this._onCompleteCallbacks=[],this._runUntilResolved=!1},onComplete:function(t){this._onCompleteCallbacks.push(t)},triggerOnCompleteCallbacks:function(){for(;0!=this._onCompleteCallbacks.length;)this._onCompleteCallbacks.shift()()},__class__:As},function(){}),lu=((e["hacksaw.core.utils.TextStyleUtils"]=ru).__name__="hacksaw.core.utils.TextStyleUtils",ru.mergeTextStyles=function(t,e){for(var n=ru.cloneTextStyle(t),s=ru.cloneTextStyle(e),i=Z.fields(s),a=0;a<i.length;){var r=i[a],l=(++a,Z.field(s,r));null!=l&&(n[r]=l)}return n},ru.cloneTextStyle=function(t){var e,n,s,i,a,r,l,o,h,u,_,c,d,p,f,g,m,A,x,b,y,w,v,C,M,S;return null==t?null:(e=t.size,n=t.width,s=t.maxWidth,i=t.height,a=t.maxHeight,r=t.color,l=t.outlineColor,o=t.outlineWidth,h=t.outlineMultAlpha,u=t.outlineColor2,_=t.outlineWidth2,c=t.outlineMultAlpha2,d=t.outlineColor3,p=t.outlineWidth3,f=t.outlineMultAlpha3,g=t.shadowDistance,m=t.shadowRadius,A=t.shadowAngle,x=t.shadowAlpha,b=t.shadowColor,y=null==(M=t.offset)?null:{x:M.x,y:M.y},w=null==(M=t.backgroundMargins)?null:{left:M.left,right:M.right,top:M.top,bottom:M.bottom},v=t.translationId,C=null!=(C=t.localized)?C.slice():null,M=t.textureMargins,S=t.strings,{size:e,width:n,maxWidth:s,height:i,maxHeight:a,color:r,outlineColor:l,outlineWidth:o,outlineMultAlpha:h,outlineColor2:u,outlineWidth2:_,outlineMultAlpha2:c,outlineColor3:d,outlineWidth3:p,outlineMultAlpha3:f,shadowDistance:g,shadowRadius:m,shadowAngle:A,shadowAlpha:x,shadowColor:b,offset:y,backgroundMargins:w,translationId:v,localized:C,align:t.align,textAlign:t.textAlign,letterSpacing:t.letterSpacing,lineSpacing:t.lineSpacing,spaceWidth:t.spaceWidth,textureMargins:null==M?null:{x:M.x,y:M.y},locale:t.locale,backgroundColor:t.backgroundColor,font:t.font,strings:null==S?null:S.slice(),rotation:t.rotation,enabled:t.enabled,gradient:t.gradient,sdfSmoothing:t.sdfSmoothing})},function(){}),ou=((e["hacksaw.core.utils.TextUtils"]=lu).__name__="hacksaw.core.utils.TextUtils",lu.gradients=null,lu.gradientStyles=null,lu.scene=null,lu.applyStyleTile=function(t,e){lu.scene=null==lu.scene?new ql:lu.scene,null!=e.style.letterSpacing&&t.set_letterSpacing(e.style.letterSpacing),null!=e.style.lineSpacing&&t.set_lineSpacing(e.style.lineSpacing),null!=e.style.spaceWidth&&((f=null==(f=(o=t.font).glyphs.h[32])&&null==(f=o.charset.resolveChar(32,o.glyphs))?o.defaultChar:f).width=e.style.spaceWidth),null!=e.style.textureMargins&&(t.set_xMarg(e.style.textureMargins.x),t.set_yMarg(e.style.textureMargins.y));var n,s=0,i=[],a=(null!=e.style.outlineColor&&(s=2*e.style.outlineWidth,i.push(new Wt(e.style.outlineWidth,Ja.parseInt(e.style.outlineColor))),null!=e.style.outlineColor2)&&(s+=2*e.style.outlineWidth2,i.push(new Wt(e.style.outlineWidth2,Ja.parseInt(e.style.outlineColor2))),null!=e.style.outlineColor3)&&(s+=2*e.style.outlineWidth3,i.push(new Wt(e.style.outlineWidth3,Ja.parseInt(e.style.outlineColor3)))),e.align=null==e.align?Kl.Center:e.align,t.smooth=!0,null!=e.maxWidth&&(e.multiline&&t.set_maxWidth(e.maxWidth-s),c=(e.maxWidth-s)/t.calcTextWidth(t.text),(l=0|Math.min(t._origSize,t._origSize*c|0))!=t._size&&(t.font.resizeTo(l),t._size=l),l=(o=t.getBounds()).xMax-o.xMin,o=t.getBounds(),t.currSize={w:l,h:o.yMax-o.yMin}),t.set_textAlign(e.align),t.set_textColor(Ja.parseInt(e.style.color)),t.getBounds()),r=Math.ceil(e.style.outlineWidth+e.style.outlineWidth2+e.style.outlineWidth3),l=e.forcePOT||e.mipmap,o=null!=e.maxWidth?e.maxWidth+s|0:Math.ceil(t.get_textWidth()+s),h=a.yMax-a.yMin,u=null!=e.dimensions?e.dimensions.x:o+(2*t.xMarg|0),o=e.maxHeight,_=0|(null==o?null!=e.dimensions?e.dimensions.y:Math.ceil(1.2*(h+s)):o),c=_<h?_/h:1,d=(_<h&&t.set_maxWidth(t.maxWidth/c),t.posChanged=!0,t.scaleX=c,t.posChanged=!0,t.scaleY=c,a=t.getBounds(),.5*t.xMarg);switch(e.align._hx_index){case 0:n=r;break;case 1:n=u-r;break;case 2:n=.5*u;break;case 3:n=u-(a.xMax-a.xMin);break;case 4:n=.5*(u-(a.xMax-a.xMin))}if(t.posChanged=!0,t.x=d+n,e.multiline)switch(e.heightExpand){case"both":d=.5*(_-(a.yMax-a.yMin));break;case"down":d=r;break;case"up":d=_-(a.yMax-a.yMin)-r}else d=r;t.posChanged=!0,t.y=d,lu.scene.addChild(t),lu.scene.syncOnly(0);var p,f,o=new A(u,_,[Mo.Target]),c=(null!=e.textureColor&&o.clear(e.textureColor),e.flipY&&(t.posChanged=!0,t.scaleX=-t.scaleX),lu.scene.drawTo(o),lu.scene.removeChild(t),null==e.style.gradient&&null==e.background||(h=0,t=null!=e.style.gradient?(h=(c=lu.gradientStyles.h[e.style.gradient]).rotation,lu.gradients.toTexture(c.id,c.resolution)):e.background.innerTex,p=o,o=hu.applyOverlay(o,t,h/180*Math.PI,e.style.backgroundMargins,!1),p.dispose()),null!=i.length&&(p=o,o=hu.applyFilters(o,i,s,!1),p.dispose()),null!=e.style.shadowDistance&&(c=e.style.shadowAngle,t=new El(0,1),f=Math.cos(c),h=Math.sin(c),i=t.x*h+t.y*f,t.x=t.x*f-t.y*h,t.y=i,p=o,s=Ja.parseInt(e.style.shadowColor),s=(255*e.style.shadowAlpha|0)<<24|((s>>16&255)/255*255|0)<<16|((s>>8&255)/255*255|0)<<8|(255&s)/255*255|0,o=hu.applyShadow(o,t,e.style.shadowDistance,s,e.style.shadowRadius,!1),p.dispose()),Jl.fromTexture(o));return(l||e.mipmap)&&(f=0==((d=o.width)&d-1)?o.width:(d=o.width,--d,d=(d=(d=(d=(d|=d>>1)|d>>2)|d>>4)|d>>8)|d>>16,++d),h=0==((d=o.height)&d-1)?o.height:(d=o.height,--d,d=(d=(d=(d=(d|=d>>1)|d>>2)|d>>4)|d>>8)|d>>16,++d),f==u&&h==_||(i=new A(f,h,[Mo.Target]),(t=new xt(Jl.fromTexture(o))).blendMode=y.AlphaAdd,t.smooth=!0,t.posChanged=!0,t.x=.5*(f-o.width),t.posChanged=!0,t.y=.5*(h-o.height),lu.scene.addChild(t),lu.scene.syncOnly(0),lu.scene.drawTo(i),lu.scene.removeChild(t),c=Jl.fromTexture(i).sub(t.x,t.y,o.width,o.height),o.dispose(),o=i)),e.mipmap&&hu.ensureMipmap(o,!0),o.preventAutoDispose(),c},function(t,e,n,s,i,a,r,l,o,h,u,_){this.flipY=!1,this.textureColor=null,this.mipmap=!0,this.forcePOT=!1,this.background=null,this.multiline=null,this.dimensions=null,this.align=null,this.heightExpand="both",this.maxHeight=null,this.maxWidth=null,this.style=t,null!=e&&(this.maxWidth=e),null!=n&&(this.maxHeight=n),null!=s&&(this.heightExpand=s),null!=i&&(this.align=i),null!=a&&(this.dimensions=a),null!=r&&(this.multiline=r),null!=l&&(this.background=l),null!=o&&(this.forcePOT=o),null!=h&&(this.mipmap=h),null!=u&&(this.textureColor=u),null!=_&&(this.flipY=_)}),hu=((e["hacksaw.core.utils.ApplyStyleConfig"]=ou).__name__="hacksaw.core.utils.ApplyStyleConfig",ou.prototype={__class__:ou},function(){}),uu=((e["hacksaw.core.utils.TextureUtils"]=hu).__name__="hacksaw.core.utils.TextureUtils",hu.applyShadow=function(t,e,n,s,i,a){null==a&&(a=!1),null==i&&(i=0),null==s&&(s=-15658735),null==n&&(n=10),hu.scene=null==hu.scene?new ql:hu.scene;var r=(r=e.x*e.x+e.y*e.y)<1e-10?0:1/Math.sqrt(r),r=(e.x*=r,e.y*=r,e.x),l=e.y,r=t.width+(r<0?-r:r)*n*2|0,l=t.height+(l<0?-l:l)*n*2|0,r=a?(o=(o=r)-1,o=(o=(o=(o=(o|=o>>1)|o>>2)|o>>4)|o>>8)|o>>16,++o):r,a=a?(o=(o=l)-1,o=(o=(o=(o=(o|=o>>1)|o>>2)|o>>4)|o>>8)|o>>16,++o):l,o=new Pl(hu.scene),l=new Pl(o),h=new xt(Jl.fromTexture(t),l),t=new xt(Jl.fromTexture(t),o),t=(t.blendMode=y.AlphaAdd,t.tile.dx-=.5*t.tile.width,t.tile.dy-=.5*t.tile.height,h.tile.dx-=.5*h.tile.width,h.tile.dy-=.5*h.tile.height,t.smooth=!0,h.smooth=!0,t.posChanged=!0,t.x=.5*r,t.posChanged=!0,t.y=.5*a,h.posChanged=!0,h.x=t.x+e.x*n,h.posChanged=!0,h.y=t.y+e.y*n,new A(r,a,[Mo.Target])),e=new es,n=s;return e.color__.x=(n>>16&255)/255,e.color__.y=(n>>8&255)/255,e.color__.z=(255&n)/255,e.color__.w=(n>>24&255)/255,h.set_filter(new jt(e)),hu.scene.syncOnly(0),l.set_filter(new Nt(i)),hu.scene.drawTo(t),hu.scene.removeChild(o),t},hu.applyFilters=function(t,e,n,s){null==s&&(s=!1),null==n&&(n=0),hu.scene=null==hu.scene?new ql:hu.scene;var i=t.width+n|0,n=t.height+n|0,i=s?(a=(a=i)-1,a=(a=(a=(a=(a|=a>>1)|a>>2)|a>>4)|a>>8)|a>>16,++a):i,s=s?(a=(a=n)-1,a=(a=(a=(a=(a|=a>>1)|a>>2)|a>>4)|a>>8)|a>>16,++a):n,a=new xt(Jl.fromTexture(t)),n=(a.blendMode=y.AlphaAdd,a.set_filter(new Gt(e)),a.tile.dx=-t.width/2,a.tile.dy=-t.height/2,a.posChanged=!0,a.x=i/2,a.posChanged=!0,a.y=s/2,a.smooth=!0,new A(i,s,[Mo.Target]));return hu.scene.addChild(a),hu.scene.syncOnly(0),hu.scene.drawTo(n),hu.scene.removeChild(a),n},hu.applyOverlay=function(t,e,n,s,i){null==i&&(i=!1),null==n&&(n=0),hu.scene=null==hu.scene?new ql:hu.scene;var a,r=Jl.fromTexture(t),e=Jl.fromTexture(e),l=.5*t.width|0,o=.5*t.height|0,h=new xt(e),u=new xt(r),_=(u.blendMode=y.AlphaAdd,t.width-(null==s?0:s.left+s.right)),c=t.height-(null==s?0:s.top+s.bottom),d=_*Math.cos(n)+c*Math.sin(n),p=0|(d<0?-d:d),_=0|((d=_*Math.sin(n)+c*Math.cos(n))<0?-d:d),c=i?(a=(a=p)-1,a=(a=(a=(a=(a|=a>>1)|a>>2)|a>>4)|a>>8)|a>>16,++a):p,d=i?(a=(a=_)-1,a=(a=(a=(a=(a|=a>>1)|a>>2)|a>>4)|a>>8)|a>>16,++a):_,p=(e.scaleToSize(c,d),e.dx=-e.width/2,e.dy=-e.height/2,r.dx=-r.width/2,r.dy=-r.height/2,h.posChanged=!0,h.x=l,h.posChanged=!0,h.y=o,h.posChanged=!0,h.rotation+=n,null!=s&&(h.posChanged=!0,h.x-=s.right/2,h.posChanged=!0,h.x+=s.left/2,h.posChanged=!0,h.y-=s.bottom/2,h.posChanged=!0,h.y+=s.top/2),u.posChanged=!0,u.x=l,u.posChanged=!0,u.y=o,u.smooth=!0,h.smooth=!0,new A(t.width,t.height,[Mo.Target])),i=new Pl;return i.addChild(h),hu.scene.addChild(u),hu.scene.addChild(i),i.set_filter(new Yt(u,!1,!0)),hu.scene.syncOnly(0),hu.scene.drawTo(p),hu.scene.removeChild(u),hu.scene.removeChild(i),p},hu.ensureMipmap=function(t,e){null==e&&(e=!1),0==(16&t.flags)&&0==(4&t.flags)&&(ao.CURRENT.driver.generateMipMaps(t),t.flags|=4,t.set_mipMap(yo.Linear),t.set_filter(wo.Linear))},function(){}),_u=((e["hacksaw.core.utils.TileUtils"]=uu).__name__="hacksaw.core.utils.TileUtils",uu.getSubTexture=function(t,e){null==e&&(e=!1);var n=t.innerTex.mipMap,s=t.innerTex.filter,i=new A(0|t.width,0|t.height,[Mo.Target]),a=(i.realloc=null,i.preventAutoDispose(),new xt(t));return a.smooth=!0,e&&(a.posChanged=!0,a.scaleX=-1,a.posChanged=!0,a.x=t.width),a.drawTo(i),t.innerTex.set_filter(s),t.innerTex.set_mipMap(n),i},uu.getSizeByReference=function(t){return{x:t.width/Tn.REFERENCE_SIZE,y:t.height/Tn.REFERENCE_SIZE}},uu.applyShader=function(t,e,n,s){null==s&&(s=!0),null==n&&(n=y.Alpha);var i=new A(0|t.width,0|t.height,[Mo.Target]),t=(i.realloc=null,i.preventAutoDispose(),new xt(t));return t.set_filter(new jt(e)),t.blendMode=n,t.smooth=s,t.drawTo(i),Jl.fromTexture(i)},function(){}),cu=((e["hacksaw.core.utils.TimerUtils"]=_u).__name__="hacksaw.core.utils.TimerUtils",_u.delay=function(t,e,n){null==n&&(n="none"),null==e&&(e=0),_u._delayId++;var s=_u._delayId,i=qu.delay(function(){_u._delays.remove(s),t()},e);return _u._delays.h[s]={timer:i,start:Jn.now()/1e3,remaining:.001*e,duration:.001*e,func:t,id:s,group:n},s},_u.interval=function(t,e,n){null==n&&(n="none"),null==e&&(e=0),_u._intervalId++;var s=new qu(e),i={timer:s,start:Jn.now()/1e3,remaining:.001*e,duration:.001*e,func:t,id:_u._intervalId,group:n};return s.run=function(){i.start=Jn.now()/1e3,t()},_u._intervals.h[_u._intervalId]=i,_u._intervalId},_u.stopInterval=function(t){var e=_u._intervals.h[t];null!=e&&(e.timer.stop(),_u._intervals.remove(t))},(e["hacksaw.games.plinko.AnimationData"]=xs).__name__="hacksaw.games.plinko.AnimationData",xs.prototype={__class__:xs},(e["hacksaw.games.plinko.App"]=bs).__name__="hacksaw.games.plinko.App",bs.__super__=Tn,bs.prototype=t(Tn.prototype,{init:function(){var a=this;Tn.prototype.init.call(this),this.get_baseEntity().add(new Dn),this._gameModel.gameData=new cu,this._gameModel.styleData={text:new fu,images:new pu,animations:new xs,gradients:new du},this.appModel.resizeSignal.connect(function(t){if((n=null!=a._gameModel.logoFit&&null!=((e=null!=(i=a._gameModel.logoFit)._compMap?i._compMap.h[nt.BASE_NAME]:null)instanceof nt?e:null))&&(n=null!=a._gameModel.baseFit&&null!=((e=null!=(i=a._gameModel.baseFit)._compMap?i._compMap.h[nt.BASE_NAME]:null)instanceof nt?e:null))){var e,n,s=(e=null!=(i=a._gameModel.baseFit)._compMap?i._compMap.h[nt.BASE_NAME]:null)instanceof nt?e:null,i=(e=null!=(i=a._gameModel.logoFit)._compMap?i._compMap.h[nt.BASE_NAME]:null)instanceof nt?e:null;switch(a._casinoModel.channel){case"desktop":n=new st(.15,.07,.1,.1);break;case"mobile":switch(a.appModel.orientation){case"landscape":n=new st(.12,.07,.01,.01);break;case"portrait":n=new st(.18,.01,.01,.01)}}switch(s.set_margins(n),a._casinoModel.channel){case"desktop":n=new st(.02,.9,.1,.1);break;case"mobile":switch(a.appModel.orientation){case"landscape":n=new st(.01,.9,.1,.1);break;case"portrait":n=new st(.03,.8,.23,.23)}}i.set_margins(n)}a._size=t})},setupFSM:function(){Tn.prototype.setupFSM.call(this),this._fsm.add(Mu,[Su]),this._fsm.add(Su,[ku]),this._fsm.add(ku,[Cu]),this._fsm.add(Cu,[vu]),this._fsm.add(vu,[Cu])},mapInjections:function(){Tn.prototype.mapInjections.call(this),this._injector.mapToValue(Au,this._gameModel)},subscribe:function(){var _=this;this._casinoChannel.subscribe("startGame",function(t){_._gameModel.replayManagerModeActive="replay-manager"==t.customLaunchData,_._gameModel.parallelRoundsSupportEnabled=t.parallelRoundsSupport,_._gameModel.gameInfo=t.gameInfoData,_._gameRtp=t.gameInfoData.rtp.toFixed(2);for(var e=new N,n=0,s=Z.fields(t.gameInfoData.paytables);n<s.length;)for(var i=s[n],a=(++n,e.h[i]=new fl,Z.field(t.gameInfoData.paytables,i)),r=0,l=Z.fields(a);r<l.length;){var o=l[r],h=(++r,e.h[i]),u=Ja.parseInt(o),o=Z.field(a,o).map(function(t){return{multiplier:parseFloat(Ja.string(Z.field(t,"multiplier"))),odds:parseFloat(Ja.string(Z.field(t,"odds")))}});h.h[u]=o}_._gameModel.gameInfo.paytables=e,_._fsmController.goto(Mu,function(){return!_.appModel.frozen})}),this._casinoChannel.subscribe("initGame",function(t){_._gameModel.branding=t.branding}),this._casinoChannel.subscribe("updateSettings",W(this,this.onUpdateSettings)),Tn.prototype.subscribe.call(this)},setup:function(){this.preloaderTile=j_.get_loader().loadCache("preloader/logo.png",vc).toTile(),Tn.prototype.setup.call(this)},onUpdateSettings:function(t){var e,n;null!=this._gameModel.ballTriangle&&(null!=(e=(e=null!=(e=this._gameModel.ballTriangle)._compMap?e._compMap.h[gu.BASE_NAME]:null)instanceof gu?e:null)&&e.inited&&(n=(null!=t.risk?t:e).risk,t=0<Ja.parseInt(t.nbRows)?Ja.parseInt(t.nbRows)+1:e.numPayouts,0<n.length)&&0<t&&e.setNumPayouts(n,t),this._gameChannel.publish("updateSettings"))},__class__:bs}),function(){}),du=((e["hacksaw.games.plinko.GameData"]=cu).__name__="hacksaw.games.plinko.GameData",cu.prototype={__class__:cu},(e["hacksaw.games.plinko.GameInfo"]=ys).__name__="hacksaw.games.plinko.GameInfo",ys.prototype={__class__:ys},(e["hacksaw.games.plinko.GameInfoPayoutItem"]=ws).__name__="hacksaw.games.plinko.GameInfoPayoutItem",ws.prototype={__class__:ws},function(){}),pu=((e["hacksaw.games.plinko.GradientData"]=du).__name__="hacksaw.games.plinko.GradientData",du.prototype={__class__:du},function(){}),fu=((e["hacksaw.games.plinko.ImageData"]=pu).__name__="hacksaw.games.plinko.ImageData",pu.prototype={__class__:pu},(e["hacksaw.games.plinko.Main"]=vs).__name__="hacksaw.games.plinko.Main",vs.main=function(){j_.set_loader(new Cc(new uc(Ku.run("oy9:preloaderoy8:logo.pngtgy15:gameconfig.jsontg")))),new J_(window.document.getElementById("webgl")).setCurrent(),new bs({charset:",.0123456789-=+xX/:()%$лв¥č€£₹៛₩₱zł₽฿₴₫ABCDEFGHIJKLMNOPQRSTUVYZabcdefghijklmnopqrstuvy₿₾₺₡₲₮μ₸ w!WæøåéÆäüö¡úáàêΔΙΑΜΟΡΦΩΣΗΕπιλέξτεοναρθόωσώυίκδΠΝΤήγΚάςχΌηζΛΓΥΧÁÍíÉőù設定するプレイ列数と希望リスクベルを選択しまょう！ット[]押てーたびにボがつ落ち。一度複のでき賞金止場所中央から遠ければいほど、多くなり続구성플레이할행수와원하는위험벨을선택세요베팅눌러서각은한개의볼드롭합니다번에여공사용있습승리중앙멀어질록더많클릭계속기ĒēīāņūŠĶĀÅęóżąŁśćĆçÊțăâșîÂȘĂȚхНАСТРОИЬВыбериткочсяджамйуньК«»гзпшЫГШЧЖМЕБПДЛÖÄกำหนดค่าเลือจวแถ\\ทีะรับมสยงุณต้ิพปูึไช็ğıİşÇẾẬọốđểơứủạƯỢấỗượẽảộềẮìắớẤĐỂỤ配置选择要玩的行和喜欢风险等级投注按“”以开始游戏每次都会掉个小球您可同时掷赢奖下位距离间越远，得就点击继续 ",soundConfigs:{events:JSON.parse('{\n    "events": [\n        {\n            "id": "updateBetLevel",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": "betlevel",\n                    "params": {\n                        "volume": 0.35,\n                        "pitch": {\n                            "arg": "index",\n                            "source": {\n                                "min": 0,\n                                "max": {\n                                    "arg": "max"\n                                }\n                            },\n                            "target": {\n                                "min": 0,\n                                "max": 1200\n                            }\n                        },\n                        "instance": {\n                            "arg": "index"\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            "id": "hit",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": "hit",\n                    "params": {\n                        "volume": 0.2\n                    }\n                }\n            ]\n        },\n        {\n            "id": "bounce",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": "bounce",\n                    "params": {\n                        "volume": 0.3\n                    }\n                }\n            ]\n        },\n        {\n            "id": "stop",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": "bounce",\n                    "params": {\n                        "volume": 0.5\n                    }\n                }\n            ]\n        },\n        {\n            "id": "gameStarted",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": "level0",\n                    "params": {\n                        "loop": true\n                    }\n                }\n            ]\n        },\n        {\n            "id": "ballBump",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": "bounce",\n                    "params": {\n                        "volume": 0.35\n                    }\n                }\n            ]\n        },\n        {\n            "id": "payout",\n            "actions": [\n                {\n                    "type": "playSound",\n                    "id": {\n                        "arg": "winFactor",\n                        "mapRange": [\n                            {\n                                "range": [\n                                    0,\n                                    0.9999\n                                ],\n                                "target": "win_under_bet"\n                            },\n                            {\n                                "range": [\n                                    1.0,\n                                    2.0\n                                ],\n                                "target": "win_over_low"\n                            },\n                            {\n                                "range": [\n                                    2.01,\n                                    5.0\n                                ],\n                                "target": "win_over_medium"\n                            },\n                            {\n                                "range": [\n                                    5.01,\n                                    10000.0\n                                ],\n                                "target": "win_over_high"\n                            }\n                        ]\n                    },\n                    "params": {\n                        "volume": {\n                            "arg": "winFactor",\n                            "mapRange": [\n                                {\n                                    "range": [\n                                        0,\n                                        0.9999\n                                    ],\n                                    "target": 1.0\n                                },\n                                {\n                                    "range": [\n                                        1.0,\n                                        2.0\n                                    ],\n                                    "target": 1.0\n                                },\n                                {\n                                    "range": [\n                                        2.01,\n                                        5.0\n                                    ],\n                                    "target": 0.3\n                                },\n                                {\n                                    "range": [\n                                        5.01,\n                                        10000.0\n                                    ],\n                                    "target": 1.0\n                                }\n                            ]\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}').events,sounds:JSON.parse('{\n    "sounds": [\n        {\n            "id": "level0",\n            "group": "music",\n            "bitrate": 96,\n            "channels": 2\n        },\n        {\n            "id": "betlevel",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        },\n        {\n            "id": "bet",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        },\n        {\n            "id": "bounce",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        },\n        {\n            "id": "win_over_high",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        },\n        {\n            "id": "win_over_low",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        },\n        {\n            "id": "win_over_medium",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        },\n        {\n            "id": "win_under_bet",\n            "group": "fx",\n            "bitrate": 48,\n            "channels": 1\n        }\n    ]\n}').sounds,groups:JSON.parse('{\n    "groups": [\n        {\n            "id": "fx",\n            "vol": 1.0,\n            "duck": {\n                "target": "music",\n                "attack": 0.001,\n                "release": 0.13,\n                "ratio": 7,\n                "threshold": -53\n            }\n        },\n        {\n            "id": "music",\n            "vol": 0.3\n        },\n        {\n            "id": "base_music",\n            "vol": 1.0,\n            "dest": "music"\n        }\n    ]\n}').groups,pools:JSON.parse('{\n    "pools": [\n\n    ]\n}').pools,sequences:JSON.parse('{\n    "sequences": [\n        {\n            "id": "basegame_music",\n            "bpm": 120,\n            "signature": "4/4",\n            "quantize": 1.0,\n            "returnQuantize": 8.0,\n            "patterns": [\n                {\n                    "id": "level_0",\n                    "actions": [\n                        {\n                            "type": "playSound",\n                            "id": "soundtrack",\n                            "params": {\n                                "volume": 1.0,\n                                "loop": true\n                            }\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}').sequences}})},function(){this.clickToContinue={spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:0,strings:["click_to_continue_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:"0xFF000000",localized:null,outlineMultAlpha:!0,color:"0xffa5e5ff",size:50,shadowDistance:null,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:null,outlineColor:null,maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:8,gradient:null,textAlign:"left",align:"center",font:"teko_medium",outlineColor3:null,rotation:0,lineSpacing:null,enabled:!0,outlineWidth3:null,height:33,locale:null,shadowAlpha:.6,outlineWidth2:null,width:null},this.splashBody={spaceWidth:9,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["splash_about_configure","splash_about_bet","splash_about_win"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:"0xFF000000",localized:null,outlineMultAlpha:!0,color:"0xffa5e5ff",size:44,shadowDistance:null,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:null,outlineColor:null,maxWidth:null,outlineMultAlpha2:!0,textureMargins:{x:0,y:40},shadowRadius:8,gradient:null,textAlign:"left",align:"center",font:"teko_medium",outlineColor3:null,rotation:0,lineSpacing:5,enabled:!0,outlineWidth3:null,height:33,locale:null,shadowAlpha:.6,outlineWidth2:null,width:null},this.splashHeader={spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["bet_uc","configure_uc","win_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:"0xFF000000",localized:null,outlineMultAlpha:!0,color:"0xffa5e5ff",size:90,shadowDistance:null,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:null,outlineColor:null,maxWidth:null,outlineMultAlpha2:!0,textureMargins:{x:0,y:40},shadowRadius:8,gradient:null,textAlign:"left",align:"center",font:"teko_medium",outlineColor3:null,rotation:0,lineSpacing:null,enabled:!0,outlineWidth3:null,height:33,locale:null,shadowAlpha:.6,outlineWidth2:null,width:null},this.payoutSmall={spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:{x:0,y:0},letterSpacing:-2,strings:["digits","x"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:"0xFF000000",localized:null,outlineMultAlpha:!0,color:"0xFF222222",size:44,shadowDistance:null,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:null,outlineColor:null,maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:8,gradient:null,textAlign:"left",align:"center",font:"rubik_black",outlineColor3:null,rotation:0,lineSpacing:null,enabled:!0,outlineWidth3:null,height:33,locale:null,shadowAlpha:.6,outlineWidth2:null,width:null},this.payoutMedium={spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:{x:0,y:0},letterSpacing:0,strings:["digits","x"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:"0xFF000000",localized:null,outlineMultAlpha:!0,color:"0xFF222222",size:44,shadowDistance:null,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:null,outlineColor:null,maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:8,gradient:null,textAlign:"left",align:"center",font:"rubik_black",outlineColor3:null,rotation:0,lineSpacing:null,enabled:!0,outlineWidth3:null,height:33,locale:null,shadowAlpha:.6,outlineWidth2:null,width:null},this.payout={spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:{x:0,y:-0},letterSpacing:null,strings:["digits","x"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:"0xFF000000",localized:null,outlineMultAlpha:!0,color:"0xFF222222",size:54,shadowDistance:null,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:null,outlineColor:null,maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:8,gradient:null,textAlign:"left",align:"center",font:"rubik_black",outlineColor3:null,rotation:0,lineSpacing:null,enabled:!0,outlineWidth3:null,height:33,locale:null,shadowAlpha:.6,outlineWidth2:null,width:null}}),gu=((e["hacksaw.games.plinko.TextData"]=fu).__name__="hacksaw.games.plinko.TextData",fu.prototype={__class__:fu},function(t){this._hidden=!0,this._graphicalEntities=[],this._gravity=9.8,this._payoutSigns=[],this._rows=[],this.ongoingBalls=[],p.call(this),this._config=t,this.componentType=el.Actor}),mu=((e["hacksaw.games.plinko.components.actor.BallTriangle"]=gu).__name__="hacksaw.games.plinko.components.actor.BallTriangle",gu.__super__=p,gu.prototype=t(p.prototype,{init:function(){this.setNumPayouts(this._config.defaultRisk,this._config.defaultNumPayouts),p.prototype.init.call(this)},setNumPayouts:function(t,e){var n=this;if(t!=this.risk||e!=this.numPayouts){this.numPayouts=e,this.risk=t,Xd.each(this._graphicalEntities,function(t){n.owner.removeChild(t)}),this._graphicalEntities=[],this._rows=[],this._payoutSigns=[];for(var s=e+1,i=s-this._config.startWidth,a=new R(0,0,0),r=new ro,l=(r.initRotation(0,0,-Math.PI/3*2),r.getDirection()),r=this._config.distance,o=(l.x*=r,l.y*=r,l.z*=r,a.x=-this._config.distance*(this._config.startWidth-1)*.5,a.y=Math.abs(l.y)*i*.5,s+1),h=this._config.startWidth;h<o;){for(var u=h++,_=[],c=v=null==(v=a.x)?0:v,d=C=null==(C=a.y)?0:C,p=B=null==(B=a.z)?0:B,f=0;f<u;){++f;var g=this.createBall(this._config.dotTile,this._config.dotSize);g.object.setPosition(c,d,p),c+=this._config.distance,_.push(g)}this._rows.push(_),a=new R(a.x+l.x,a.y+l.y,a.z+l.z,a.w+l.w)}for(var m=v=null==(v=a.x)?0:v,A=C=null==(C=a.y)?0:C,x=B=null==(B=a.z)?0:B,b=I=null==(I=a.w)?1:I,h=(m+=this._config.distance/2-l.x,A-=.5*l.y,[]),f=0;f<e;)h.push(f++);for(var y=new Array(h.length),f=0,w=h.length;f<w;){var v,C,M=f++,S=h[M],k=n.createPayout(n._config.payouts.h[t].h[e][S].multiplier),B=x,I=null==b?1:b,S=(null==(C=A)&&(C=0),null==(v=m)&&(v=0),n._config.distance*S);null==S&&(S=0),y[M]={payout:k,pos:new R(v+S,C,B=null==x?0:B,I+1)}}Xd.each(y,function(t){t.payout.object.setPosition(t.pos.x,t.pos.y,t.pos.z)}),this.when(function(){return null==Xd.find(n._payoutSigns,function(t){return!t.inited})}).handle(function(){n._hidden&&n.hideTriangle(0),n.setPayoutColors()})}},setPayoutColors:function(t){null==t&&(t=0);for(var e=this._payoutSigns,n=[],s=0,i=e.length;s<i;){var a=s++,r=1-Math.abs(a/(this.numPayouts-1)*2-1),l=new R;l.x=this._hidden?0:1-r+r,l.y=this._hidden?0:0*(1-r)+r,l.z=this._hidden?0:0*(1-r)+0*r,l.w=this._hidden?0:1,n.push({color:l,payout:e[a]})}Xd.each(n,function(i){Ql.colorTo(i.payout.object,new At(new Ll(i.color.x,i.color.y,i.color.z,i.color.w),null,null,null,t,null,null,null,null,null,null,null)).handle(function(){var t=i.color,e=t.w,n=t.x,s=t.y,t=t.z;i.payout.set_color((255*(e<0?0:1<e?1:e)+.499|0)<<24|(255*(n<0?0:1<n?1:n)+.499|0)<<16|(255*(s<0?0:1<s?1:s)+.499|0)<<8|255*(t<0?0:1<t?1:t)+.499|0)})})},dropBall:function(d,t,p,f){null==p&&(p=1);for(var g=this,e=new ep,m=new W_(t),A=new As(!1),x=this._config.distance,t=this._rows,n=t[t.length-1][d],t=(t=this._rows)[t.length-1][d+1],s=n.get_pos(),i=t.get_pos(),a=n.get_pos(),t=i.x-a.x,n=i.y-a.y,r=i.z-a.z,l=(u=null==(u=i.w-a.w)?1:u,.5*(t=null==t?0:t)),o=.5*(n=null==n?0:n),h=.5*(r=null==r?0:r),u=null==u?1:u,t=s.x+(l=null==l?0:l),n=s.y+(o=null==o?0:o),r=s.z+(h=null==h?0:h),l=s.w+u,_=[new mu(new R(t=null==t?0:t,(n=null==n?0:n)-1,r=null==r?0:r,(l=null==l?1:l)-1),null,null,null)],c=this._rows.length-1,o=d,b=(m.seed=36969*(65535&m.seed)+(m.seed>>16),m.seed2=18e3*(65535&m.seed2)+(m.seed2>>16),o+(1073741823&((m.seed<<16)+m.seed2|0))%2),h=this._rows[c][b],y=(_.push(new mu(h.get_pos(),h,null,null)),0);0!=c;){var w=[function(){return--c,y=0},function(){return--b,--c,y=0}],v=(b/(this._rows[c].length-1)*2-1<0?w.push(w[0]):w.push(w[1]),y<1&&(w.push(function(){return y+=1,(b+=1)-1}),0!=b)&&w.push(function(){return y+=1,--b+1}),m.seed=36969*(65535&m.seed)+(m.seed>>16),m.seed2=18e3*(65535&m.seed2)+(m.seed2>>16),w[(1073741823&((m.seed<<16)+m.seed2|0))%w.length](),b=0|Math.max(0,Math.min(b,this._rows[c].length-1)),this._rows[c][b]);_.push(new mu(v.get_pos(),v,null,null))}for(var C=_.slice(),M=(C.reverse(),0),S=C.length-1;M<S;){var k=C[T=M++].pos,B=C[T+1].pos;C[T].toNext=new R(B.x-k.x,B.y-k.y,B.z-k.z,B.w-k.w),(s=C[T].pos).x*s.x+s.y*s.y+s.z*s.z<.01&&(C[T].toNext=new R(0,1,0));B=(B=(i=C[T].toNext).x*i.x+i.y*i.y+i.z*i.z)<1e-10?0:1/Math.sqrt(B);i.x*=B,i.y*=B,i.z*=B}for(var v=this.createBall(this._config.ballTile,this._config.ballSize,!0),I=(this.ongoingBalls.push(v),new Array(C.length)),M=0,S=C.length;M<S;){var T,a=C[T=M++];I[T]={toNext:a.toNext,ball:a.ball,p:null!=a.ball?g.getRandomHitPosition(a,v,m):a.pos}}var F=I,u=(m.seed=36969*(65535&m.seed)+(m.seed>>16),m.seed2=18e3*(65535&m.seed2)+(m.seed2>>16),this._config.distance+(1073741823&((m.seed<<16)+m.seed2|0))%10007/10007*this._config.distance*.2);v.object.setPosition(F[0].p.x,F[0].p.y+u,0),A.add(function(){Ql.colorTo(v.object,new At(new Ll(null,null,null,1),new Ll(null,null,null,0),null,null,.3,null,null,null,null,null,null,null)),A.next()});m.seed=36969*(65535&m.seed)+(m.seed>>16),m.seed2=18e3*(65535&m.seed2)+(m.seed2>>16);for(var D=.05+(1073741823&((m.seed<<16)+m.seed2|0))%10007/10007*.2,E=u,P=1,M=0;M<F.length;){var z=[F[M]];++M,A.add(function(_,c){return function(){v.get_pos();var t,e,n,s,i,a=Math.abs(v.get_pos().y-_[0].y),r=g.distanceToVelocity(E)*D*P,l=(m.seed=36969*(65535&m.seed)+(m.seed>>16),m.seed2=18e3*(65535&m.seed2)+(m.seed2>>16),(r+=(1073741823&((m.seed<<16)+m.seed2|0))%10007/10007*.02*x)<.2/x&&(l=.3*x,m.seed=36969*(65535&m.seed)+(m.seed>>16),m.seed2=18e3*(65535&m.seed2)+(m.seed2>>16),r=l+(1073741823&((m.seed<<16)+m.seed2|0))%10007/10007*(.1*x)),g.distanceToTime(r)),o=g.distanceToTime(a+r),h=(P=null!=c[0].ball?(a=c[0].ball.get_pos(),e=(t=n=null==(n=_[0].x-a.x)?0:n)*t+(h=s=null==(s=_[0].y-a.y)?0:s)*h+(a=null==(a=_[0].z-a.z)?0:a)*a,null==(a=a*(e=e<1e-10?0:1/Math.sqrt(e)))&&(a=0),null==(s=h*e)&&(s=0),null==(n=t*e)&&(n=0),Math.abs(1-(0*n+ +s+0*a))):1,l+o),u=p;Ql.translateTo(v.object,new At(new Ll(null,r,null,null),null,null,null,l/u,null,function(t){return-t*(t-2)},!0,null,null,null,null)).handle((i=_,function(){E=Math.abs(v.get_pos().y-i[0].y),Ql.translateTo(v.object,new At(new Ll(null,i[0].y,null,null),null,null,null,o/u,null,function(t){return t*t},null,null,null,null,null))})),Ql.translateTo(v.object,new At(new Ll(_[0].x,null,null,null),null,null,null,h/u,null,null,null,null,null,null,null)).handle(W(A,A.next)),c[0]==F[F.length-1]&&(Ql.colorTo(v.object,new At(new Ll(null,null,null,0),null,null,.9*h/u,.1*h/u,null,null,null,null,null,null,null)),g.after(h/u*.5).handle(function(){g._payoutSigns[d].bump(),hacksawCasino.PubSub.getChannel("game").publish("payout",{winFactor:f})}))}}([z[0].p],z)),A.add(function(t){return function(){null!=t[0].ball&&(hacksawCasino.PubSub.getChannel("game").publish("ballBump"),t[0].ball.bump()),A.next()}}(z))}return A.add(function(){e.trigger(!0),g.ongoingBalls.pop(),A.next()}),A.run(),e.handle(function(){Jn.remove(g._graphicalEntities,v.owner),g.owner.removeChild(v.owner)}),e},revealTriangle:function(t){null==t&&(t=.3),this._hidden=!1,this.setPayoutColors(t);for(var e=this._rows,n=Array.prototype.concat.apply([],e),s=new Array(n.length),i=0,a=n.length;i<a;){for(var r=n[c=i++].elements,l=new Array(r.length),o=0,h=r.length;o<h;){var u=o++;l[u]=r[u].tweenObject}s[c]=l}for(var _=Array.prototype.concat.apply([],s),s=new Array(_.length),i=0,a=_.length;i<a;)s[c=i++]=Ql.tween(_[c],[Rl.Color(new At(new Ll(null,null,null,1),null,null,null,t,null,null,null,null,null,null,null))]);for(var c,n=this._payoutSigns,l=new Array(n.length),i=0,a=n.length;i<a;)l[c=i++]=Ql.tween(n[c].object,[Rl.Color(new At(new Ll(null,null,null,1),null,null,null,t,null,null,null,null,null,null,null))]);return $d.map($d.inParallel(s.concat(l)),function(t){return null})},hideTriangle:function(t){null==t&&(t=0),this._hidden=!0,this.setPayoutColors(t);for(var e=this._rows,n=Array.prototype.concat.apply([],e),s=new Array(n.length),i=0,a=n.length;i<a;){for(var r=n[c=i++].elements,l=new Array(r.length),o=0,h=r.length;o<h;){var u=o++;l[u]=r[u].tweenObject}s[c]=l}for(var _=Array.prototype.concat.apply([],s),s=new Array(_.length),i=0,a=_.length;i<a;)s[c=i++]=Ql.tween(_[c],[Rl.Color(new At(new Ll(null,null,null,0),null,null,null,t,null,null,null,null,null,null,null))]);for(var c,n=this._payoutSigns,l=new Array(n.length),i=0,a=n.length;i<a;)l[c=i++]=Ql.tween(n[c].object,[Rl.Color(new At(new Ll(null,null,null,0),null,null,null,t,null,null,null,null,null,null,null))]);return $d.map($d.inParallel(s.concat(l)),function(t){return null})},distanceToTime:function(t){return Math.sqrt(2)*Math.sqrt(t)/Math.sqrt(this._gravity)},distanceToVelocity:function(t){return Math.sqrt(t)*this._gravity},getRandomHitPosition:function(t,e,n){var s=new ro,n=(n.seed=36969*(65535&n.seed)+(n.seed>>16),n.seed2=18e3*(65535&n.seed2)+(n.seed2>>16),s.initRotation(0,0,Math.PI/2+(0<t.toNext.x?-1:1)*((1073741823&((n.seed<<16)+n.seed2|0))%10007/10007)*Math.PI/4),t.ball.get_pos()),s=s.getDirection(),t=t.ball.get_radius()+e.get_radius(),e=s.x*t,i=s.y*t,t=s.z*t,s=s.w;return new R(n.x+(e=null==e?0:e),n.y+(i=null==i?0:i),n.z+(t=null==t?0:t),n.w+(s=null==s?1:s))},createBall:function(t,e,n){t=new xu(new bu(t,e,n=null==n?!1:n)),e=(new Zr).add(t);return this._graphicalEntities.push(e),this.owner.addChild(e),t},createPayout:function(t){var n=this,e=Xd.find(this._config.payoutTextConfigs,function(t){var t=t.sizeRange,e=n.numPayouts;return e>=t.start&&e<=t.end}),t=new yu(new wu(this._config.payoutBackplateSize,this._config.payoutTile,null==t?"null":""+t,e.scale,e.offset,e.resource)),e=(this._payoutSigns.push(t),(new Zr).add(t));return this._graphicalEntities.push(e),this.owner.addChild(e),t},get_baseName:function(){return"hacksaw.games.plinko.components.actor.BallTriangle"},__class__:gu}),(e["hacksaw.games.plinko.components.actor.PayoutTextConfig"]=Cs).__name__="hacksaw.games.plinko.components.actor.PayoutTextConfig",Cs.prototype={__class__:Cs},function(t,e,n,s){this.hitForce=0,this.toNext=null,this.ball=null,this.pos=t,null!=e&&(this.ball=e),null!=n&&(this.toNext=n),null!=s&&(this.hitForce=s)}),Au=((e["hacksaw.games.plinko.components.actor.PhysicalPathPoint"]=mu).__name__="hacksaw.games.plinko.components.actor.PhysicalPathPoint",mu.prototype={__class__:mu},(e["hacksaw.games.plinko.components.actor.BallTriangleConfig"]=Ms).__name__="hacksaw.games.plinko.components.actor.BallTriangleConfig",Ms.prototype={__class__:Ms},function(){this.parallelRoundsSupportEnabled=!1,this.replayManagerModeActive=!1,p.call(this),this.componentType=el.Model}),xu=((e["hacksaw.games.plinko.components.model.GameModel"]=Au).__name__="hacksaw.games.plinko.components.model.GameModel",Au.__super__=p,Au.prototype=t(p.prototype,{get_baseName:function(){return"hacksaw.games.plinko.components.model.GameModel"},__class__:Au}),function(t){this._lastIndex=-1,this._eventPath=null,this._path=null,this._animationTime=0,this.elements=[],j.call(this),this._config=t}),bu=((e["hacksaw.games.plinko.components.view.Ball"]=xu).__name__="hacksaw.games.plinko.components.view.Ball",xu.__super__=j,xu.prototype=t(j.prototype,{init:function(){var e=this;this._element=Jh.create(new $h(this._config.tile,null,null,this._config.size,null,xo.Always,null,null,null,null,null,null,this.object.object,null)),this.elements.push(this._element),Xd.each(this.object.getMeshes(),function(t){e._config.ignoreBounds?t.flags|=512:t.flags&=-513}),j.prototype.init.call(this)},bump:function(){var i=this,a=Jh.create(new $h(this._config.tile,null,null,this._config.size,null,xo.Always,null,null,null,null,null,null,this.object.object,null));Xd.each(a.getMeshes(),function(t){t.flags|=512}),this.elements.push(a),Ql.tween(a.tweenObject,[Rl.Color(new At(new Ll(null,null,null,0),new Ll(null,null,null,1),null,null,.3,null,null,null,null,null,null,null)),Rl.Scale(new At(new Ll(2.5,2.5,2.5,null),null,null,null,.3,null,null,!0,null,null,null,null))]).handle(function(){for(var t=i.elements,e=[],n=0;n<t.length;){var s=t[n];++n,s!=a&&e.push(s)}i.elements=e,i.object.removeChild(a)})},update:function(e){var t,n,s,i;j.prototype.update.call(this,e),Xd.each(this.elements,function(t){t.update(e)}),null!=this._path&&((0|Math.floor(this._animationTime/this._timestep))>=this._path.length-2&&(this._animationTime=0),this._animationTime+=e,t=this._animationTime/this._timestep,s=0|Math.floor(t),t=t-Math.floor(t),this._lastIndex!=s&&null!=this._eventPath[s]&&this._eventPath[s](),this._lastIndex=s,n=this._path[s],s=this._path[1+s],(i=this._element).x=n.x*(1-t)+s.x*t,i.flags|=1,(i=this._element).y=n.y*(1-t)+s.y*t,i.flags|=1)},get_size:function(){return this._config.size*(this._config.tile.width/Tn.REFERENCE_SIZE)},get_radius:function(){return this.get_size()/2},get_pos:function(){return new R(this.object.get_x(),this.object.get_y(),this.object.get_z())},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:xu,__properties__:t(j.prototype.__properties__,{get_pos:"get_pos",get_radius:"get_radius",get_size:"get_size"})}),function(t,e,n){this.ignoreBounds=!1,this.tile=t,this.size=e,null!=n&&(this.ignoreBounds=n)}),yu=((e["hacksaw.games.plinko.components.view.BallConfig"]=bu).__name__="hacksaw.games.plinko.components.view.BallConfig",bu.prototype={__class__:bu},function(t){j.call(this),this._config=t}),wu=((e["hacksaw.games.plinko.components.view.PayoutSign"]=yu).__name__="hacksaw.games.plinko.components.view.PayoutSign",yu.__super__=j,yu.prototype=t(j.prototype,{init:function(){var t=this,e=(this._element=Jh.create(new $h(this._config.backplateTile,null,null,this._config.backplateSize,null,xo.Always,null,null,null,null,null,null,null,null)),this.object.addChild(this._element),Ql.colorTo(this.object,new At(new Ll(null,null,null,0),null,null,null,0,null,null,null,null,null,null,null)),new Rn(new Xn(this._config.textResource,null,this._config.textScale,null,xo.Always,null,null,null,null,null,null)));e.object.setPosition(this._config.textOffset.x,this._config.textOffset.y,this._config.textOffset.z),this.owner.addChild((new Zr).add(e)),this.when(function(){return e.inited}).handle(function(){e.showText(t._config.text+"x"),Xd.each(t.object.getMeshes(),function(t){t.flags|=512})}),j.prototype.init.call(this)},bump:function(){var t=this.color,e=.00392156862745098*(t>>16&255),n=.00392156862745098*(t>>8&255),t=.00392156862745098*(255&t),s=e=null==e?0:e,i=n=null==n?0:n,a=t=null==t?0:t;null==(t=3*a)&&(t=0),null==(n=3*i)&&(n=0),null==(e=3*s)&&(e=0),Ql.colorTo(this.object,new At(new Ll(s,i,a,null),new Ll(e,n,t,null),null,null,0,null,null,null,null,null,null,null)),Ql.scaleTo(this.object,new At(new Ll(1,1,1,null),new Ll(1.5,1.5,1.1,null),null,null,.2,null,function(t){return-t*(t-2)},null,null,null,null,null))},set_color:function(t){var e=.00392156862745098*(t>>16&255),n=.00392156862745098*(t>>8&255),s=.00392156862745098*(255&t),i=.00392156862745098*(t>>>24);return Ql.colorTo(this.object,new At(new Ll(e=null==e?0:e,n=null==n?0:n,s=null==s?0:s,i=null==i?1:i),null,null,null,0,null,null,null,null,null,null,null)),this.color=t},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:yu,__properties__:t(j.prototype.__properties__,{set_color:"set_color"})}),function(t,e,n,s,i,a){this.backplateSize=t,this.backplateTile=e,this.text=n,this.textScale=s,this.textOffset=i,this.textResource=a}),vu=((e["hacksaw.games.plinko.components.view.PayoutSignConfig"]=wu).__name__="hacksaw.games.plinko.components.view.PayoutSignConfig",wu.prototype={__class__:wu},function(){ms.call(this)}),Cu=((e["hacksaw.games.plinko.states.BallState"]=vu).__name__="hacksaw.games.plinko.states.BallState",vu.__super__=ms,vu.prototype=t(ms.prototype,{enter:function(){var l=this,t=this.sub("casino","betAccepted"),o=(t.listen(function(t){l.publish("casino","betAcknowledged")}),null);(this.gameModel.parallelRoundsSupportEnabled?this.sub("casino","roundConfirmed"):t).listen(function(t){var e=t.roundId,t=(l.publish("casino","gameRoundStarted",{roundId:e}),l.casinoModel.getEventData()),n=l.gameModel.ballTriangle,n=null!=n._compMap?n._compMap.h[gu.BASE_NAME]:null,s=n instanceof gu?n:null,n=l.casinoModel.get_turboMode(),i=Wu.divMod(Hu.parseString(Ja.string(l.casinoModel.currentEvent.wa)),new ju(0,100)),a=function(t){for(;t.length<2;)t="0"+t;return t}(Wu.toString(i.modulus)),r=parseFloat((null==i.quotient?"null":Wu.toString(i.quotient))+"."+a),i=Wu.divMod(l.casinoModel.betAmount,new ju(0,100)),a=function(t){for(;t.length<2;)t="0"+t;return t}(Wu.toString(i.modulus)),r=r/parseFloat((null==i.quotient?"null":Wu.toString(i.quotient))+"."+a);o=l.subOnce("casino","roundEnded"),l.subOnce("casino","roundStarted").handle(function(){o=null}),s.dropBall(Ja.parseInt(null==t.index?"null":""+t.index),Ja.parseInt(null==t.seed?"null":""+t.seed),null!=n&&"superTurbo"==n?2:1,r).handle(function(){l.publish("casino","gameRoundCompleted",{roundId:e}),null!=o&&o.handle(function(){0==s.ongoingBalls.length&&l.fsm.goto(Cu)})})}),ms.prototype.enter.call(this)},exit:function(){ms.prototype.exit.call(this)},acceptInjector:function(t){t=W(t,t.getInstanceWithClassName);this.fsm=t("hxfsm.FSMController","",vu,!0),this.baseEntity=t("gasm.core.Entity","",vu,!0),this.gameModel=t("hacksaw.games.plinko.components.model.GameModel","",vu,!0),this.casinoModel=t("hacksaw.core.components.model.CasinoModel","",vu,!0),this.appModel=t("gasm.core.components.AppModelComponent","",vu,!0)},__class__:vu}),function(){ms.call(this)}),Mu=((e["hacksaw.games.plinko.states.IdleState"]=Cu).__name__="hacksaw.games.plinko.states.IdleState",Cu.__super__=ms,Cu.prototype=t(ms.prototype,{enter:function(){var n=this,e=(this.publish("game","updateSettings"),this.sub("game","resize").listen(function(t){var e=n.gameModel.ballTriangle,e=null!=e._compMap?e._compMap.h[gu.BASE_NAME]:null;(e instanceof gu?e:null).setNumPayouts(Ja.string(t.risk),Ja.parseInt(Ja.string(t.numPayouts))),n.publish("game","updateSettings")}));this.subOnce("casino","roundStarted").handle(function(t){null!=e&&e.cancel(),n.fsm.goto(vu)}),ms.prototype.enter.call(this)},exit:function(){ms.prototype.exit.call(this)},acceptInjector:function(t){t=W(t,t.getInstanceWithClassName);this.fsm=t("hxfsm.FSMController","",Cu,!0),this.baseEntity=t("gasm.core.Entity","",Cu,!0),this.gameModel=t("hacksaw.games.plinko.components.model.GameModel","",Cu,!0),this.casinoModel=t("hacksaw.core.components.model.CasinoModel","",Cu,!0),this.appModel=t("gasm.core.components.AppModelComponent","",Cu,!0)},__class__:Cu}),function(){ms.call(this)}),Su=((e["hacksaw.games.plinko.states.InitState"]=Mu).__name__="hacksaw.games.plinko.states.InitState",Mu.__super__=ms,Mu.prototype=t(ms.prototype,{enter:function(){var n=this,t=(this.baseEntity.add(this.gameModel),this.addScene("background",5)),e=new Zr,e=(this.gameModel.logoFit=e,t.addChild(e),e.add(new nt(new it(new st(0,0,.6,0),null,null,null,null,null,null,null))),this.addLogo(e),this.addBackground(t),this.addScene("base",5)),t=new Zr;(this.gameModel.baseFit=t).add(new nt(new it(new st(.01,.13,.1,.1),null,null,null,null,null,null,null))),e.addChild(t),this.addBallTriangle(t),this.mipTextures(),this.sub("game","updateSettings",!0).listen(function(){var t=n.gameModel.ballTriangle,e=null!=t._compMap?t._compMap.h[gu.BASE_NAME]:null,t=null!=(t=n.gameModel.ballTriangle)._compMap?t._compMap.h[gu.BASE_NAME]:null;n.publish("casino","updateCustomBetData",{nbPayouts:(e instanceof gu?e:null).numPayouts,risk:(t instanceof gu?t:null).risk})}),this.next().handle(function(){n.appModel.resizeSignal.emit({width:n.appModel.stageSize.x,height:n.appModel.stageSize.y}),n.fsm.goto(Su)}),ms.prototype.enter.call(this)},mipTextures:function(){su.mipmap(In.atlases.misc);var t=In.atlases.misc.tile.innerTex;t.set_mipMap(yo.Linear),t.set_filter(wo.Linear)},addBackground:function(t){var e=new Ln(new Un(su.getTile(In.atlases.misc,"bg"),null,null,null,null,null,null));e.object.set_z(-1),t.addChild((new Zr).add(new nt(new it(null,null,!0,null,null,null,null,null))).addChild((new Zr).add(e)))},addLogo:function(t){var e=new Ln(new Un(su.getTile(In.atlases.misc,"logo_nobrand"),1,null,null,null,null,null));e.object.set_z(0),Ql.colorTo(e.object,new At(new Ll(null,null,null,0),null,null,null,0,null,null,null,null,null,null,null)),this.gameModel.logo=(new Zr).add(e),t.addChild(this.gameModel.logo)},addBallTriangle:function(t){var e=this.gameModel.styleData.text.payout,n=In.bitmapFonts.h[e.font].toSdfFont(e.size,4,.5,.125),s=this.gameModel.styleData.text.payoutMedium,i=In.bitmapFonts.h[s.font].toSdfFont(s.size,4,.5,.5),a=this.gameModel.styleData.text.payoutSmall,r=In.bitmapFonts.h[a.font].toSdfFont(a.size,4,.5,.5);this.gameModel.ballTriangle=(new Zr).add(new gu(new Ms(3,9,"medium",su.getTile(In.atlases.misc,"dot"),su.getTile(In.atlases.misc,"ball"),su.getTile(In.atlases.misc,"multiplier_backplate"),.48,.26,1.2000000000000002,.2,[new Cs(Dh.FontCharacters(n,e),new xn(0,11),.5,new R(e.offset.x,e.offset.y,0)),new Cs(Dh.FontCharacters(i,s),new xn(12,15),.5,new R(s.offset.x,s.offset.y,0)),new Cs(Dh.FontCharacters(r,a),new xn(16,999),.5,new R(a.offset.x,a.offset.y,0))],this.gameModel.gameInfo.paytables))),this.gameModel.ballTriangle.add(new j),t.addChild(this.gameModel.ballTriangle)},addScene:function(t,e,n){null==n&&(n=1),null==e&&(e=10);var t=this.sceneModel.addScene(new P(t,!0,null,!1,null,null)),s=null!=t._compMap?t._compMap.h[cl.BASE_NAME]:null,s=(s instanceof cl?s:null).scene3d,e=(t.add(new H(new K(null,null,null,new R(0,0,e),null,null,100,null,null,null,null))),er.__cast(s.lightSystem,jo).ambientLight),s=n,i=n,a=null==n?0:n;return null==n&&(i=0),e.x=s=null==n?0:s,e.y=i,e.z=a,e.w=1,t},exit:function(){this.publish("game","removePreloader"),this.appModel.resizeSignal.emit({width:this.appModel.stageSize.x,height:this.appModel.stageSize.y}),ms.prototype.exit.call(this)},acceptInjector:function(t){t=W(t,t.getInstanceWithClassName);this.fsm=t("hxfsm.FSMController","",Mu,!0),this.baseEntity=t("gasm.core.Entity","",Mu,!0),this.gameModel=t("hacksaw.games.plinko.components.model.GameModel","",Mu,!0),this.casinoModel=t("hacksaw.core.components.model.CasinoModel","",Mu,!0),this.appModel=t("gasm.core.components.AppModelComponent","",Mu,!0),this.sceneModel=t("gasm.core.components.SceneModelComponent","",Mu,!0)},__class__:Mu}),function(){ms.call(this)}),ku=((e["hacksaw.games.plinko.states.IntroState"]=Su).__name__="hacksaw.games.plinko.states.IntroState",Su.__super__=ms,Su.prototype=t(ms.prototype,{enter:function(){var t=this,e=this.createIntroScene(),n=(this.sceneModel.hideScene("base"),this.sceneModel.showScene("intro"),this.createIntro(e),new ep);this.subOnce("casino","clickScreen").handle(function(){n.trigger(null)}),$d.or(this.after(1),n).handle(function(){t.sceneModel.removeScene("intro"),t.after(.2).handle(function(){t.fsm.goto(ku)})}),ms.prototype.enter.call(this)},createIntro:function(t){var e,n=new Vn(new Qn(new yh(new Zn(wh.Tile(su.getTile(In.atlases.splash,"title")),null,null,null,null,null,null,xo.Always,null,null)),null));switch(this.appModel.orientation){case"landscape":e=new st(.25,.25,.25,.25);break;case"portrait":e=new st(.25,.25,.1,.1)}var s=new nt(new it(e,null,null,null,null,null,null,null));t.addChild((new Zr).add(s).addChild((new Zr).add(n)))},createIntroScene:function(){var t=this.sceneModel.addScene(new P("intro",!0,null,!1,null,null)),e=null!=t._compMap?t._compMap.h[cl.BASE_NAME]:null,e=(e instanceof cl?e:null).scene3d,e=(t.add(new H(new K(null,null,null,new R(0,0,10),null,null,null,45,null,null,null))),er.__cast(e.lightSystem,jo).ambientLight);return e.x=1,e.y=1,e.z=1,e.w=1,t},acceptInjector:function(t){t=W(t,t.getInstanceWithClassName);this.fsm=t("hxfsm.FSMController","",Su,!0),this.appModel=t("gasm.core.components.AppModelComponent","",Su,!0),this.sceneModel=t("gasm.core.components.SceneModelComponent","",Su,!0),this.casinoModel=t("hacksaw.core.components.model.CasinoModel","",Su,!0),this.baseEntity=t("gasm.core.Entity","",Su,!0),this.gameModel=t("hacksaw.games.plinko.components.model.GameModel","",Su,!0)},__class__:Su}),function(){ms.call(this)}),Bu=((e["hacksaw.games.plinko.states.SplashState"]=ku).__name__="hacksaw.games.plinko.states.SplashState",ku.__super__=ms,ku.prototype=t(ms.prototype,{enter:function(){function e(t){var e=s.gameModel.logo,n=null!=e._compMap?e._compMap.h[Ln.BASE_NAME]:null;Ql.tween((n instanceof Ln?n:null).object,[Rl.Color(new At(new Ll(null,null,null,1),null,null,null,t,null,null,null,null,null,null,null))]),((n=null!=(e=s.gameModel.ballTriangle)._compMap?e._compMap.h[gu.BASE_NAME]:null)instanceof gu?n:null).revealTriangle(t).eager(),s.gameModel.replayManagerModeActive&&s.publish("casino","gameStarted"),s.after(.2).handle(function(){s.sceneModel.showScene("background"),s.sceneModel.showScene("base"),s.fsm.goto(Cu)})}var s=this,t=this.gameModel.logo,t=null!=t._compMap?t._compMap.h[Ln.BASE_NAME]:null,t=(Ql.tween((t instanceof Ln?t:null).object,[Rl.Color(new At(new Ll(null,null,null,0),null,null,null,0,null,null,null,null,null,null,null))]),this.createSplashScene());this.sceneModel.showScene("splash");this.createSplash(t).onContinue.handle(function(){s.sceneModel.removeScene("splash"),s.gameModel.replayManagerModeActive?e(0):(s.publish("casino","gameStarted"),s.appModel.resizeSignal.connect(function(t){e(.1)}).once())}),ms.prototype.enter.call(this)},createSplash:function(t){for(var e=this,n=this.gameModel.styleData.text.splashHeader,s=this.gameModel.styleData.text.splashBody,i=this.gameModel.styleData.text.clickToContinue,a=this.gameModel.splashData,r=("plinko__rizk"==this.gameModel.branding&&(n.color="0xFF000000",s.color="0xFF000000",i.color="0xFFFFE400"),new Zn(wh.Tile(su.getTile(In.atlases.misc,"logo")),null,a.logoPos,null,null,null,null,xo.Never,null,null)),l=a.xSpacing,o=[],h=0,u=a.splashes;h<u.length;){var _=u[h];++h,o.push(new Pn(new Zn(wh.Text(Dh.FontCharacters(In.bitmapFonts.h[n.font].toSdfFont(n.size,4,.5,.125),n,n.strings,Kl.MultilineCenter,null,a.headerMaxWidth),new qn(hacksawCasino.Translation.game(_.header),null)),null,new R(_.headerPos.x,_.headerPos.y,_.headerPos.z),null,null,null,y.AlphaAdd,xo.Always,null,null),new Zn(wh.Text(Dh.FontCharacters(In.bitmapFonts.h[s.font].toSdfFont(s.size,4,.5,.125),s,s.strings,Kl.MultilineCenter,!0,a.bodyMaxWidth,a.bodyMaxHeight),new qn(hacksawCasino.Translation.game(_.body),null)),null,new R(_.bodyPos.x,_.bodyPos.y,_.bodyPos.z),null,null,null,y.AlphaAdd,xo.Always,null,null),new Zn(wh.Tile(su.getTile(In.atlases.splash,_.background)),null,new R(_.backgroundPos.x,_.backgroundPos.y,_.backgroundPos.z),null,null,null,null,xo.Always,null,null),null))}function c(){switch(e.appModel.orientation){case"landscape":p.object.setScale(1);break;case"portrait":p.object.setScale(.5)}}var d=new En(new zn(r,null,null,new Zn(wh.Text(Dh.FontCharacters(In.bitmapFonts.h[i.font].toSdfFont(i.size,4,.5,.125),i,i.strings,Kl.MultilineCenter,!0,1024),new qn(hacksawCasino.Translation.game(a.clickToContinue.text),null)),null,new R(a.clickToContinue.pos.x,a.clickToContinue.pos.y,a.clickToContinue.pos.z),null,null,null,null,null,null,null),l,null,o)),r=new $(new et(new tt(-.109,-.2,-.45,-.45),null,null,null,null)),p=(t.addChild((new Zr).add(d).add(r)),new Vn(new Qn(new yh(new Zn(wh.Tile(su.getTile(In.atlases.splash,"logo")),null,null,null,null,null,null,xo.Always,null,null)),null)));p.object.set_y(.9),t.addChild((new Zr).add(p));return c(),this._layoutResize=this.appModel.resizeSignal.connect(function(t){d.layout(),c()}),d},createSplashScene:function(){var t=this.sceneModel.addScene(new P("splash",!0,null,!1,null,null)),e=null!=t._compMap?t._compMap.h[cl.BASE_NAME]:null,e=(e instanceof cl?e:null).scene3d,e=(t.add(new H(new K(null,null,null,new R(0,0,10),null,null,null,45,null,null,null))),er.__cast(e.lightSystem,jo).ambientLight);return e.x=1,e.y=1,e.z=1,e.w=1,t},exit:function(){this._layoutResize.dispose(),this.publish("game","enterMode",{gameMode:"base"}),ms.prototype.exit.call(this)},acceptInjector:function(t){t=W(t,t.getInstanceWithClassName);this.fsm=t("hxfsm.FSMController","",ku,!0),this.appModel=t("gasm.core.components.AppModelComponent","",ku,!0),this.sceneModel=t("gasm.core.components.SceneModelComponent","",ku,!0),this.casinoModel=t("hacksaw.core.components.model.CasinoModel","",ku,!0),this.baseEntity=t("gasm.core.Entity","",ku,!0),this.gameModel=t("hacksaw.games.plinko.components.model.GameModel","",ku,!0)},__class__:ku}),(e["hacksaw.sound.IAudioRenderer"]=Ss).__name__="hacksaw.sound.IAudioRenderer",Ss.__isInterface__=!0,Ss.prototype={__class__:Ss,__properties__:{get_currentTime:"get_currentTime"}},(e["hacksaw.sound.Sequencer"]=ks).__name__="hacksaw.sound.Sequencer",ks.prototype={update:function(e){Xd.each(this._scheduled,function(t){t.remaining-=e});for(var t=this._scheduled,n=[],s=0,i=t.length;s<i;){var a=s++;n.push({v:t[a],i:a})}for(s=[],i=0;i<n.length;){var r=n[i];++i,r.v.remaining<=0&&s.push(r)}for(var l=new Array(s.length),i=0,o=s.length;i<o;)l[a=i++]=s[a].i;for(;0<l.length;)t.splice(l.pop(),1);for(l=new Array(s.length),i=0,o=s.length;i<o;)l[a=i++]=s[a].v;Xd.each(l,function(t){t.action()})},playSound:function(s,t){null==t&&(t=!0);var i=this;if(!this.rateLimit(s.maxrate,"playSound",s.id)&&null!=s.id&&"none"!=s.id){var a,r,e,n=this._renderer.get_currentTime(),l=s.quantize,o=s.instance,o=this._sequenceState.h[null!=o?o:this._currBpmSequence],o=null!=o?o:{index:0,start:n,quantize:null!=l?l:1,bpm:this._currentBpm},h=o.start,u=o.quantize,o=o.bpm,_=null!=(l=s.delay)?l:0,h=0<h?n-h:0;if(null!=s.start){if(null==(e=s.start)||"string"!=typeof e)C=null;else{for(var c=e.split("."),d=new Array(c.length),p=0,f=c.length;p<f;)d[x=p++]=Ja.parseInt(c[x]);for(var p=[],f=0;f<d.length;){var g=d[f];++f,0<=g&&p.push(g)}C=3!=p.length||wt.has(p,null)?null:{bar:b=null==(b=p[0])?0:b,beat:y=null==(y=p[1])?0:y,tick:w=null==(w=p[2])?0:w}}m=n+this.calculateTime({start:C,currentTime:h,bpm:o,quantize:u,signature:this.currentSignature})}else var m=null!=(l=s.when)?l:n;if(m+=_,null!=s.loopStart||null!=s.loopStartTime){if(null==(e=null==s.loopStart?"null":""+s.loopStart)||"string"!=typeof e)A=null;else{for(c=e.split("."),d=new Array(c.length),p=0,f=c.length;p<f;)d[x=p++]=Ja.parseInt(c[x]);for(var A,p=[],f=0;f<d.length;){g=d[f];++f,0<=g&&p.push(g)}A=3!=p.length||wt.has(p,null)?null:{bar:b=null==(b=p[0])?0:b,beat:y=null==(y=p[1])?0:y,tick:w=null==(w=p[2])?0:w}}a=null!=A&&null!=A.bar?this.calculateTime({start:A,bpm:o}):s.loopStartTime}else a=0;if(null!=s.end){if(null==(e=null==s.end?"null":""+s.end)||"string"!=typeof e)v=null;else{for(var x,c=e.split("."),d=new Array(c.length),p=0,f=c.length;p<f;)d[x=p++]=Ja.parseInt(c[x]);for(var b,y,w,v,p=[],f=0;f<d.length;){g=d[f];++f,0<=g&&p.push(g)}v=3!=p.length||wt.has(p,null)?null:{bar:b=null==(b=p[0])?0:b,beat:y=null==(y=p[1])?0:y,tick:w=null==(w=p[2])?0:w}}r=this.calculateTime({start:v,bpm:o})}else r=s.duration;s.when=m,s.duration=r;var C=function(){var t,e,n;i._renderer.playSound(s),0<r&&s.loop&&(0<a||s.sync&&s.sequenced)&&(e=m+(t=a<r?r-a:r),n=new Vu(s.id,s.instance,s.volume,null,null,null,s.loop,null,null,null,a,s.onComplete,null,null,null,null,t,null,e,s.sync,s.sequenced,null),i.scheduleAction(e,n,function(){i.playSound(n,!1)}))};t?this.scheduleAction(s.when,s,C):C()}},stopSound:function(t,e,n){null==n&&(n=!0);var s,i=this;null!=t.id&&"none"!=t.id&&(null==e&&(e=function(){}),n&&this.cancelScheduledEvent("playSound",t.id,t.instance),n=t.delay,s=null!=(s=t.when)?s:this._renderer.get_currentTime(),t.when=s+(null!=n?n:0),this.scheduleAction(t.when,t,function(){i._renderer.stopSound(t),e()}))},playPool:function(e){var t=Xd.find(this._poolConfigs,function(t){return t.id==e.id}),n=e.maxrate;if(!this.rateLimit(null!=n?n:t.maxrate,"playPool",e.id)&&null!=e.id&&"none"!=e.id){for(var n=null!=(n=e.items)?n:t.items,s=this._pools.h[e.id],i=(null==s?null!=(a=(s={items:n,currIndex:0,order:t.order}).order)&&"random"==a&&Tu.shuffleArray(s.items):s.currIndex==s.items.length&&(s.currIndex=0,null!=(a=s.order))&&"random"==a&&Tu.shuffleArray(s.items),s.items[s.currIndex]),t=Xd.find(n,function(t){return t.id==i.id}),a=(i.params=(i.params!=t.params?t:i).params,0),r=Z.fields(i.params);a<r.length;){var l=r[a];++a,i.params[l]=Tu.getRandomValue(Z.field(i.params,l))}"playSound"==i.type&&(n=null!=i.params?i.params:{volume:1,pan:0,pitch:0,delay:0,start:null,loop:!1},this.playSound(new Vu(i.id,null,n.volume,n.pan,n.pitch,null,n.loop,null,null,null,null,null,n.delay,(null!=n.start?n:e).start,null,null,null,null,null,null,null,null))),s.currIndex++,this._pools.h[e.id]=s}},playEnvelope:function(t){var e=this;if(null!=t.targets&&"none"!=t.id){0<t.points[0].pos&&t.points.unshift({val:null,pos:0});for(var n=this._renderer.get_currentTime(),s=0,i=t.points;s<i.length;){var a,r,l,o,h,u=i[s];++s,null!=u.beatPos&&(a=0,l=t.quantize,a=(o=null)!=(h=null==(h=this._sequenceState.h["sequence"==t.targetType?t.targets[0]:this._currBpmSequence])?{start:n,quantize:l,bpm:e._currentBpm,index:0}:h)?n-h.start:0,r=h.quantize,o=h.bpm,h=this.calculateTime({start:u.beatPos,bpm:o,currentTime:a,quantize:l=null!=r?r:1,signature:this.currentSignature}),u.pos+=h),u.pos+=n}t.when=t.points[0].pos+.05,this.scheduleAction(t.when,t,function(){e._renderer.playEnvelope(t)})}},resetPool:function(t){t=this._pools.h[t];null!=t&&(t.currIndex=0)},triggerInterval:function(){this.after(.025,W(this,this.triggerInterval));var t=this;if(null!=this.currentSignature){for(var e=this._renderer.get_currentTime(),n=this._sequenceState.h[this._currBpmSequence],n=e-(null!=n?n.start:0),s="0.0.0".split("."),i=new Array(s.length),a=0,r=s.length;a<r;)i[A=a++]=Ja.parseInt(s[A]);for(a=[],r=0;r<i.length;){var l=i[r];++r,0<=l&&a.push(l)}h=3!=a.length||wt.has(a,null)?null:{bar:h=null==(h=a[0])?0:h,beat:h=null==(h=a[1])?0:h,tick:h=null==(h=a[2])?0:h};var o,h=this.calculateTime({start:h,currentTime:n,bpm:this._currentBpm,quantize:1,signature:this.currentSignature});h<=.05&&(n=this.currentSignature,o=n.beat+"/"+n.measure,this.after(h,function(){t._eventHandler(Xu.EnterBar(0,t._currentBpm,o))}))}for(var e=this._renderer.get_currentTime(),a=[],u=this._scheduledEvents.h,_=Object.keys(u),c=_.length,d=0;d<c;){for(var p=_[d++],f=u[p],g=[],r=0,m=f.length;r<m;){var A=r++;g.push({v:f[A],i:A})}for(var x=[],b=0;b<g.length;){l=g[b];++b,l.v.when-e<=.1&&x.push(l)}for(var i=new Array(x.length),y=0,w=x.length;y<w;){var v=y++;i[v]=x[v].i}for(;0<i.length;)f.splice(i.pop(),1);for(var C=new Array(x.length),M=0,S=x.length;M<S;){var k=M++;C[k]=x[k].v}a.push(C)}n=Array.prototype.concat.apply([],a);Xd.each(n,function(t){t.act(t.arguments)})},rateLimit:function(t,e,n){var s,i,a=!1;return null==t||(s=null!=(s=this._triggers.h[e])?s:new N,i=Jn.now()/1e3*1e3,a=!!(Object.prototype.hasOwnProperty.call(s.h,n)&&i-s.h[n]<Tu.getRandomValue(t))||a)||(s.h[n]=i,this._triggers.h[e]=s),a},playSequence:function(z){var R=this;if(null!=z.id&&"none"!=z.patternId){var t=this._renderer.get_currentTime(),V=z.sequence,Q=this._sequences.h[V.id],e=z.restart,e=null!=e&&e||null==z.patternId;if(e&&(this.stopSequence(new Ou(V.id,null,null,this._renderer.get_currentTime(),null,null)),Q=null),null==Q?Q={currIndex:0,item:V}:Q.item=V,null!=z.patternId){var n=Xd.find(V.patterns,function(t){return t.id==z.patternId});if(null==n)return;Q.currIndex=V.patterns.indexOf(n)}else if(e)Q.currIndex=0;else if(Q.currIndex++,Q.currIndex==V.patterns.length)return;if(!this.rateLimit(V.maxrate,"playSequence",V.id)){for(var n=this._sequencePlayCancel.h[V.id],n=(null!=n&&(n(),s=this._sequencePlayCancel,e=V.id,Object.prototype.hasOwnProperty.call(s.h,e))&&delete s.h[e],this._sequenceState.h[V.id]),e=null!=n,O=e?t-n.start:0,L=null==z.quantize?Q.currIndex<(e?n.index:0)&&null!=V.returnQuantize?V.returnQuantize:V.quantize:z.quantize,U=V.patterns[Q.currIndex],N=[],e=null!=z.start,G=t,s=V.signature.split("/"),i=new Array(s.length),a=0,r=s.length;a<r;)i[u=a++]=Ja.parseInt(s[u]);for(a=[],r=0;r<i.length;){var l=i[r];++r,1<l&&l<=16&&a.push(l)}var t=a[0],o=a[1],o=(this.currentSignature={beat:t=null==t?4:t,measure:o=null==o?4:o},U.bpm),X=null!=o?o:V.bpm,Y=null!=X,W=null!=n&&null!=n.bpm?n.bpm:null!=X?X:this._currentBpm;if(Y){o=this._sequenceState.h[this._currBpmSequence],n=null!=o?o.start:0;if(e){o=z.start;if(null==o||"string"!=typeof o)h=null;else{for(s=o.split("."),i=new Array(s.length),a=0,r=s.length;a<r;)i[u=a++]=Ja.parseInt(s[u]);for(var h,a=[],r=0;r<i.length;){l=i[r];++r,0<=l&&a.push(l)}h=3!=a.length||wt.has(a,null)?null:{bar:_=null==(_=a[0])?0:_,beat:t=null==(t=a[1])?0:t,tick:c=null==(c=a[2])?0:c}}}else{for(var u,s="0.0.0".split("."),i=new Array(s.length),a=0,r=s.length;a<r;)i[u=a++]=Ja.parseInt(s[u]);for(var _,c,a=[],r=0;r<i.length;){l=i[r];++r,0<=l&&a.push(l)}h=3!=a.length||wt.has(a,null)?null:{bar:_=null==(_=a[0])?0:_,beat:t=null==(t=a[1])?0:t,tick:c=null==(c=a[2])?0:c}}G+=0<n?this.calculateTime({start:h,currentTime:O,bpm:W,quantize:L,signature:this.currentSignature}):.05}e=this.after(Math.max((G+=null!=z.delay?z.delay:0)-this._renderer.get_currentTime()-.05,0),function(){var t=R._sequenceState.h[V.id],e=null!=t;if(!e||t.index!=Q.currIndex){for(var n={index:Q.currIndex,start:G,bpm:X,quantize:V.quantize},s=Y&&R._currBpmSequence!=V.id,i=((s||e)&&R.stopSequence(new Ou(s?R._currBpmSequence:V.id,null,null,G,null,null)),R._sequenceState.h[V.id]=n,0),a=U.actions;i<a.length;){var r,l,o,h,u=a[i],_=(++i,u.params=null!=u.params?u.params:{},u.id+":"+V.id),c=null;if(null!=u.params.start){var d=u.params.start;if(null==d||"string"!=typeof d)c=null;else{for(var p=d.split("."),f=new Array(p.length),g=0,m=p.length;g<m;){var A=g++;f[A]=Ja.parseInt(p[A])}for(var x=[],b=0;b<f.length;){var y=f[b];++b,0<=y&&x.push(y)}c=3!=x.length||wt.has(x,null)?null:{bar:d=null==(d=x[0])?0:d,beat:d=null==(d=x[1])?0:d,tick:d=null==(d=x[2])?0:d}}}switch(h=null!=c?(null==(d={start:c,currentTime:O,bpm:W,quantize:L,signature:R.currentSignature}).bpm?0:(c=d.signature,r=null!=(r=d.currentTime)?r:R._renderer.get_currentTime(),l=d.quantize,o=null!=(o=d.delay)?o:0,null!=d.start&&(o+=R.calculateTime({start:d.start,bpm:d.bpm,currentTime:r,quantize:null!=l?l:1,signature:null!=c?c:{beat:4,measure:4}})),o))+G:G,u.type){case"playEnvelope":R.playEnvelope(new Pu(u.id,u.params.points,null!=u.params.targets?u.params.targets:N,null!=u.params.targetType?u.params.targetType:"sequence",u.params.param,null,null,null,null));break;case"playPool":var w=[new zu(u.id,u.params.start,null,null,null,null)];R.scheduleAction(h,w[0],function(t){return function(){var e;null!=Xd.find(R._poolConfigs,(e=t,function(t){return t.id==e[0].id}))&&R.playPool(t[0])}}(w));break;case"playSound":N.push(_);w=R._renderer.getSoundDuration(u.id);if(null!=u.params.end){var v=u.params.end;if(null==v||"string"!=typeof v)I=null;else{for(var C=v.split("."),M=new Array(C.length),S=0,k=C.length;S<k;){var B=S++;M[B]=Ja.parseInt(C[B])}for(var I,T=[],F=0;F<M.length;){var D=M[F];++F,0<=D&&T.push(D)}I=3!=T.length||wt.has(T,null)?null:{bar:v=null==(v=T[0])?0:v,beat:v=null==(v=T[1])?0:v,tick:v=null==(v=T[2])?0:v}}}else I=R.calculatePos(w,V.bpm,R.currentSignature);var E,v=null!=u.params.duration?u.params.duration:null!=V.bpm?R.calculateTime({start:I,bpm:X,currentTime:0,quantize:L,signature:R.currentSignature}):0,P=[new Vu(u.id,V.id,u.params.volume,null,u.params.pitch,null,u.params.loop,u.params.loopStart,u.params.loopStartTime,u.params.playStart,u.params.playStartTime,null,u.params.delay,null,null,null,v,null,h,null!=V.bpm,!0,null)];P[0].onComplete=function(t){return function(){t[0].loop||(R._sequenceState.h[V.id]=null)}}(P),Y&&(e&&Q.currIndex<t.index?R._eventHandler(Xu.PhraseEnd):R._eventHandler(Xu.PhraseStart(V.bpm,V.signature))),R.playSound(P[0]),U.progress&&null!=(P=[V.patterns[Q.currIndex+1]])[0]&&(E=R.after((E=[0<v?v:w])[0]-.1,function(t,e){return function(){R.playSequence(new Ru(V.id,V,null,e[0].id,null,null,null,z.when+t[0],!1,null))}}(E,P)),R._sequencePlayCancel.h[V.id+"_progress"]=E);break;case"stopSound":R.stopSound(new Lu(u.id,V.id,null,null,h,null))}}Y&&(R._currBpmSequence=V.id,R._currentBpm=V.bpm),R._sequences.h[V.id]=Q;p=R._sequencePlayCancel,s=V.id;Object.prototype.hasOwnProperty.call(p.h,s)&&delete p.h[s]}});this._sequencePlayCancel.h[V.id]=e}}},stopSequence:function(t,e){if(null==e&&(e=!0),null!=t.id&&"none"!=t.id){var n=this._sequencePlayCancel.h[t.id],n=(null!=n&&(n(),i=this._sequencePlayCancel,s=t.id,Object.prototype.hasOwnProperty.call(i.h,s))&&delete i.h[s],this._sequencePlayCancel.h[t.id+"_progress"]),n=(null!=n&&(n(),i=this._sequencePlayCancel,s=t.id+"_progress",Object.prototype.hasOwnProperty.call(i.h,s))&&delete i.h[s],this._sequences.h[t.id]),s=this._sequenceState.h[t.id];if("string"==typeof t.stop)if(null==(g=null==t.stop?"null":""+t.stop)||"string"!=typeof g)u=null;else{for(var i=g.split("."),a=new Array(i.length),r=0,l=i.length;r<l;)a[p=r++]=Ja.parseInt(i[p]);for(r=[],l=0;l<a.length;){var o=a[l];++l,0<=o&&r.push(o)}u=3!=r.length||wt.has(r,null)?null:{bar:m=null==(m=r[0])?0:m,beat:A=null==(A=r[1])?0:A,tick:x=null==(x=r[2])?0:x}}else u=null;var h=null;if(null!=n?h=n.item.bpm:null!=u&&null!=s&&(h=s.bpm),null==(b=t.when)){var u=t.quantize,n=null!=u?u:null!=n?n.item.quantize:null,_=null!=n?n:1,c=null!=s?s.start:0,d=this._renderer.get_currentTime(),d=null!=s?d-s.start:0;if(null==(g=t.stop)||"string"!=typeof g)f=null;else{for(var p,i=g.split("."),a=new Array(i.length),r=0,l=i.length;r<l;)a[p=r++]=Ja.parseInt(i[p]);for(var f,r=[],l=0;l<a.length;){o=a[l];++l,0<=o&&r.push(o)}f=3!=r.length||wt.has(r,null)?null:{bar:m=null==(m=r[0])?0:m,beat:A=null==(A=r[1])?0:A,tick:x=null==(x=r[2])?0:x}}var g,m,A,s={start:f,currentTime:d,bpm:h,quantize:_,signature:this.currentSignature},x=null==s.bpm?0:(u=s.signature,g=null!=(n=s.currentTime)?n:this._renderer.get_currentTime(),m=s.quantize,A=null!=(n=s.delay)?n:0,null!=s.start&&(A+=this.calculateTime({start:s.start,bpm:s.bpm,currentTime:g,quantize:null!=m?m:1,signature:null!=u?u:{beat:4,measure:4}})),A),b=x+c}this.unscheduleSequence(t.id,b);for(var y=Object.keys(this._renderer.getPlaying().h),w=y.length,v=0;v<w;){var C,M=y[v++].split(":");null!=M&&2==M.length&&(C=M[1])==t.id&&this.stopSound(new Lu(M[0],C,null,null,b,null))}e&&(this._sequenceState.h[t.id]=null)}},unscheduleSequence:function(t,e){var n=this._scheduledEvents.h.playSound;if(null!=n){for(var s=this._scheduledEvents,i=[],a=0;a<n.length;){var r=n[a];++a,((l=r.arguments).instance!=t||l.when-e<0)&&i.push(r)}s.h.playSound=i}if(null!=(n=this._scheduledEvents.h.stopSound)){for(s=this._scheduledEvents,i=[],a=0;a<n.length;){var l,r=n[a];++a,((l=r.arguments).instance!=t||l.when-e<0)&&i.push(r)}s.h.stopSound=i}},cancelScheduledEvent:function(t,e,n,s){var i=this._scheduledEvents.h[t];if(null!=i){for(var a=this._scheduledEvents,r=[],l=0;l<i.length;){var o=i[l],h=(++l,o.arguments);h.instance!=n&&h.id!=e&&r.push(o)}a.h[t]=r}},after:function(t,e){var n,s=this;return(t=null==t?0:t)<=0?(e(),function(){}):this._autoUpdate?W(c=qu.delay(e,0|t),c.stop):((n={remaining:t,action:function(){e()}}).action=function(){Jn.remove(s._scheduled,n),e()},this._scheduled.push(n),function(){Jn.remove(s._scheduled,n)})},muteGroup:function(t,e){this._renderer.muteGroup(t,e=null==e?!0:e)},calculateTime:function(t){var e=t.start,n=null!=(s=t.currentTime)?s:0,s=t.quantize,i=t.signature,i=null!=i?i:{beat:4,measure:4},t=60/t.bpm,i=t*i.beat*(4/i.measure),s=i*(null!=s?s:1),i=e.bar*i+e.beat*t+e.tick*(t*ks.tick);return 0<n&&(i+=s-n%s),i},calculatePos:function(t,e,n){n=null!=n?n:{beat:4,measure:4};var e=60/e,s=Math.round(t%e/(ks.tick*e)),i=Math.floor(t%(e*n.beat)/e),t=((0|s)==(1/ks.tick|0)&&(s=0,++i),Math.floor(t/(e*n.beat)));return{bar:null==t?0:t,beat:null==i?0:i,tick:null==s?0:s}},scheduleAction:function(e,t,n){function s(t){n(),i.triggerEvent({kind:t.kind,args:t,remaining:e-i._renderer.get_currentTime()})}var i=this,a=e-this._renderer.get_currentTime(),r=this._scheduledEvents.h[t.kind],r=null!=r?r:[];.1<a?(r.push({when:e,arguments:t,act:s}),this._scheduledEvents.h[t.kind]=r):s(t)},triggerEvent:function(t){var e=this;switch(t.kind){case"playSound":var n=er.__cast(t.args,Vu),s=this._renderer.getSoundDuration(n.id),i=Xu.SoundPlaying(n.id,n.volume,s,n.instance);this.after(t.remaining,function(){e._eventHandler(i)}),n.loop||this.after(t.remaining+s,function(){e._eventHandler(Xu.SoundStopped(n.id,n.instance))});break;case"stopSound":s=er.__cast(t.args,Lu);this._eventHandler(Xu.SoundStopped(s.id,s.instance))}},__class__:ks},function(t,e){this.config=t,this.events=e}),Iu=((e["hacksaw.sound.SoundConfig"]=Bu).__name__="hacksaw.sound.SoundConfig",Bu.prototype={__class__:Bu},(e["hacksaw.sound.SequenceItem"]=Bs).__name__="hacksaw.sound.SequenceItem",Bs.prototype={__class__:Bs},(e["hacksaw.sound.SequencePattern"]=Is).__name__="hacksaw.sound.SequencePattern",Is.prototype={__class__:Is},(e["hacksaw.sound.DuckConfig"]=Ts).__name__="hacksaw.sound.DuckConfig",Ts.prototype={__class__:Ts},function(t,e,n,s){null==s&&(s=!0),this._enabled=!0,this._config=t;try{this._renderer=new Fu(t.config.sounds,t.config.groups,e),this._sequencer=new ks(this._renderer,this._config.config.pools,n,s)}catch(t){this._enabled=!1,e()}}),Tu=((e["hacksaw.sound.SoundEngine"]=Iu).__name__="hacksaw.sound.SoundEngine",Iu.prototype={update:function(t){var e=this._sequencer;null!=e&&e.update(t)},handleEvent:function(R,u){var _=this;if(this._enabled&&null!=this._renderer.get_currentTime())try{for(var t=R.actions.slice(),V=(t.sort(function(t,e){return"playEnvelope"==t.type?1:-1}),null==Xd.find(t,function(t){return"playEnvelope"!=t.type})),e=Xd.find(t,function(t){return"playSound"==t.type}),n=Xd.find(t,function(t){return"playSequence"==t.type}),s=Xd.find(t,function(t){return"playPool"==t.type}),i=0;i<t.length;){var a=[t[i]];if(++i,null!=a[0].id){var r,l,o,h,Q,O,c=[null!=a[0].params?a[0].params:{}];switch(a[0].type){case"addFilter":var L=this.translateParams(c[0].targetType,u),U=this.translateParams(c[0].target,u),N=this.translateParams(c[0].type,u),G=this.translateParams(c[0].frequency,u),X=this.translateParams(c[0].gain,u),Y=this.translateParams(c[0].q,u);this._renderer.addFilter(new Eu(L,U,G,Y,X,N));break;case"disableAnalyser":this._renderer.disableUpdates(c[0].group);break;case"enableAnalyser":null!=c[0].group&&this._renderer.enableUpdates(c[0].group);break;case"muteGroup":this._sequencer.muteGroup(a[0].id,!0);break;case"playEnvelope":var d=[this.translateParams(c[0].targetType,u)],p=[this.translateParams(c[0].targets,u,!1)],W=(null==d[0]&&(null!=e?(d[0]="sound",p[0]=[e.id+":null"]):null!=n?(d[0]="sequence",p[0]=[n.id]):null!=s&&(d[0]="pool",p[0]=[s.id])),function(t,e,n,s){return function(){_._sequencer.playEnvelope(new Pu(_.translateParams(s[0].id,u),n[0].points.map(function(t){var e=_.translateParams(t.pos,u),t=_.translateParams(t.val,u);if("string"==typeof e){var n=Ja.string(e);if(null==n||"string"!=typeof n)o=null;else{for(var s=n.split("."),i=new Array(s.length),a=0,r=s.length;a<r;){var l=a++;i[l]=Ja.parseInt(s[l])}for(var o,a=[],r=0;r<i.length;){var h=i[r];++r,0<=h&&a.push(h)}o=3!=a.length||wt.has(a,null)?null:{bar:n=null==(n=a[0])?0:n,beat:n=null==(n=a[1])?0:n,tick:n=null==(n=a[2])?0:n}}}else o=null;return{pos:null!=o?null:e,beatPos:o,val:t}}),t[0],e[0],_.translateParams(n[0].param,u),null,null,null,null))}}(p,d,c,a));null!=d[0]&&(V?W():qu.delay(W,100));break;case"playPool":var f=this.translateParams(a[0].id,u);if(null!=f&&"none"!=f){for(var j=this.translateParams(c[0].start,u),H=this.translateParams(c[0].maxrate,u),g=this.getPoolById(f),Z=er.__cast(this.translateParams(c[0].volume,u),yp),m=er.__cast(this.translateParams(c[0].pan,u),yp),A=er.__cast(this.translateParams(c[0].pitch,u),xp),x=er.__cast(this.translateParams(c[0].delay,u),yp),b=0,q=g.items;b<q.length;){var y,w,v=q[b],K=(++b,v.params=null!=v.params?v.params:{},v.type=(null!=v.type?v:g).type,w=null!=v.params.volume?(y=er.__cast(Z,yp),er.__cast(this.translateParams(v.params.volume,u),yp)*(null==y?1:y)):Z,er.__cast(this.translateParams(v.params.pan,u),yp)),C=null==K?0:K,J=(null==m?0:m)*(null==m?0:m),M=(0!=C?Math.sqrt(C*C):0)+(m<0?-J:J),$=isNaN(M)?0:M<-1?-1:1<M?1:M,tt=null!=v.params.pitch?er.__cast(this.translateParams(v.params.pitch,u),xp)+(null==A?0:A):A,et=null!=v.params.delay?er.__cast(this.translateParams(v.params.delay,u),yp)+(null==x?0:x):x;null!=w&&(v.params.volume=w),null!=$&&(v.params.pan=$),null!=tt&&(v.params.pitch=tt),null!=et&&(v.params.delay=et)}this._sequencer.playPool(new zu(f,j,H,g.items,null,null))}break;case"playSequence":null!=a[0].id&&null!=(r=this.getSequenceById(this.translateParams(a[0].id,u),u))&&(l=this.translateParams(c[0].pattern,u,!1),o=this.translateParams(c[0].start,u),h=this.translateParams(c[0].delay,u),Q=this.translateParams(c[0].quantize,u),O=this.translateParams(c[0].restart,u),this._sequencer.playSequence(new Ru(r.id,r,null,l,o,h,Q,null,O,null)));break;case"playSound":var S=this.translateParams(c[0].start,u);if("string"==typeof S){var k=Ja.string(S);if(null==k||"string"!=typeof k)E=null;else{for(var B=k.split("."),I=new Array(B.length),nt=0,st=B.length;nt<st;){var it=nt++;I[it]=Ja.parseInt(B[it])}for(var T,F,D,E,P=[],z=0;z<I.length;){var at=I[z];++z,0<=at&&P.push(at)}E=3!=P.length||wt.has(P,null)?null:{bar:T=null==(T=P[0])?0:T,beat:F=null==(F=P[1])?0:F,tick:D=null==(D=P[2])?0:D}}}else E=null;var rt=this._sequencer,lt=this.translateParams(a[0].id,u),ot=this.translateParams(c[0].instance,u),ht=this.translateParams(c[0].volume,u),ut=this.translateParams(c[0].pan,u),_t=this.translateParams(c[0].duration,u),ct=this.translateParams(c[0].loop,u),dt=this.translateParams(c[0].loopStart,u),pt=this.translateParams(c[0].loopStartTime,u),ft=this.translateParams(c[0].playStart,u),gt=this.translateParams(c[0].playStartTime,u),mt=this.translateParams(c[0].maxrate,u),At=this.translateParams(c[0].delay,u);rt.playSound(new Vu(lt,ot,ht,ut,this.translateParams(c[0].pitch,u),null,ct,dt,pt,ft,gt,null,At,S,this.translateParams(c[0].end,u),mt,_t,this.translateParams(c[0].quantize,u),null,null!=E,null,null));break;case"resetPool":this._sequencer.resetPool(this.translateParams(a[0].id,u));break;case"setGroupVolume":this._renderer.setGroupVolume(new Qu(this.translateParams(a[0].id,u),this.translateParams(c[0].volume,u),null,null));break;case"stopSequence":var xt=this.translateParams(a[0].id,u),bt=this.translateParams(c[0].stop,u),yt=this.translateParams(c[0].quantize,u);this._sequencer.stopSequence(new Ou(xt,null,bt,null,yt,null),!0);break;case"stopSound":this._sequencer.stopSound(new Lu(this.translateParams(a[0].id,u),this.translateParams(c[0].instance,u),null,this.translateParams(c[0].delay,u),null,null));break;case"unmuteGroup":this._sequencer.muteGroup(a[0].id,!1)}}}}catch(i){}},pause:function(){var t=this._renderer;null!=t&&t.pause()},resume:function(){var t=this._renderer;null!=t&&t.resume()},getPoolById:function(e){return JSON.parse(JSON.stringify(Xd.find(this._config.config.pools,function(t){return t.id==e})))},getSequenceById:function(t,e){for(var n=this._config.config.sequences,s=new Array(n.length),i=0,a=n.length;i<a;)s[f=i++]=JSON.parse(JSON.stringify(n[f]));for(i=0,a=s.length;i<a;){var r=s[i++];if(r.id==t){for(var l=new Bs(t,[],r.quantize,r.returnQuantize,null,null,r.bpm,r.signature,this.translateParams(r.start,e)),o=0,h=r.patterns.length;o<h;){var u=o++,_=r.patterns[u],c=l.patterns,d=this.translateParams(_.id,e),R=this.translateParams(_.actions,e,!1),V=this.translateParams(_.duration,e),p=this.translateParams(_.start,e);if(null==p||"string"!=typeof p)A=null;else{for(var f,n=p.split("."),g=new Array(n.length),m=0,Q=n.length;m<Q;)g[f=m++]=Ja.parseInt(n[f]);for(var A,x=[],b=0;b<g.length;){var y=g[b];++b,0<=y&&x.push(y)}A=3!=x.length||wt.has(x,null)?null:{bar:p=null==(p=x[0])?0:p,beat:p=null==(p=x[1])?0:p,tick:p=null==(p=x[2])?0:p}}c[u]=new Is(d,R,_.progress,this.translateParams(_.bpm,e),V,A);for(var w=0,O=_.actions.length;w<O;){for(var v=w++,C=_.actions[v],M=this.translateParams(C.params,e),S=0,k=Z.fields(M);S<k.length;){var B=k[S],I=(++S,Z.field(M,B)),T=(M[B]=this.translateParams(I,e,!1),I);if(null!=T&&T instanceof Array)for(var F=0;F<T.length;){var D=T[F];if(++F,"string"!=typeof D&&("number"!=typeof D||(0|D)!==D)&&"number"!=typeof D)for(var E=0,P=Z.fields(D);E<P.length;){var z=P[E];++E,D[z]=this.translateParams(Z.field(D,z),e,!1)}}}l.patterns[u].actions[v]={id:this.translateParams(C.id,e,!1),type:C.type,params:M}}}return l}}return null},translateParams:function(t,e,n){if(null==n&&(n=!0),null!=e){var s=Z.getProperty(t,"arg");if(null!=s){var i,a,r=Z.getProperty(e,s),s=JSON.parse(JSON.stringify(t)),l=Z.getProperty(s,"mapRange"),o=Z.getProperty(s,"map"),h=Z.getProperty(s,"source"),s=this.translateParams(Z.getProperty(s,"target"),e,n);if(null!=h&&null!=s)return i=null!=h?this.translateParams(h.min,e,n):null,h=null!=h?this.translateParams(h.max,e,n):null,a=null!=s?this.translateParams(s.min,e,n):null,s=null!=s?this.translateParams(s.max,e,n):null,r/(h-i)*(s-a)+a;if(null!=l){for(var u=[],_=0;_<l.length;){var c=l[_],d=(++_,c),p=parseFloat(d.range[0]),d=1<d.range.length?parseFloat(d.range[1]):p;p<=r&&r<=d&&u.push(c)}return 1<=u.length?this.translateParams(u[0].target,e,n):null}if(null==o)return n?Tu.getRandomValue(r):r;h=Xd.find(o,function(t){return t.source==r});if(null!=h)return this.translateParams(h.target,e,n)}}return n?Tu.getRandomValue(t):t},__class__:Iu},function(){}),Fu=((e["hacksaw.sound.Utils"]=Tu).__name__="hacksaw.sound.Utils",Tu.getRandomValue=function(t){for(;;){if(t instanceof Array){var e=t,e=e[Math.floor(Math.random()*e.length)];if(Tu.hasArrayChild(e)){t=e;continue}return e instanceof Array?Tu.randomRange(e[0],e[1]):e}return t}},Tu.shuffleArray=function(t){for(var e=t.length-1;0<e;){var n=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[n],t[n]=s,--e}},Tu.hasArrayChild=function(t){return null!=Xd.find(t,function(t){return t instanceof Array})},Tu.randomRange=function(t,e){return Math.random()*(e-t)+t},function(t,e,n){if(this._groupMutes=new N,this._groupVolumes=new N,this._gain=1,this._enabled=!0,this._groups=new N,this._buffers=new N,this._sounds=new N,this._playing=new N,this._stereo=!0,this._updateTrigger=lp.trigger(),null==t||0==t.length)this._enabled=!1,n();else{for(var s=0;s<t.length;)if(null==t[s++].data)return this._enabled=!1,void n();this._onDecoded=n,this._ctx=this.createAudioContext(),this._stereo=null!=this._ctx.createStereoPanner,this._meters=new N;for(s=0;s<t.length;){var i=t[s];++s,this._sounds.h[i.id]=i}this.setupGroups(e),this.decodeSounds(t);var e=window.hasOwnProperty("ontouchstart"),a=window.hasOwnProperty("onclick");this._unlocked=!("suspended"==this._ctx.state&&(e||a)),this.update=this._updateTrigger,this._unlocked||this.unlockAudio()}}),Du=((e["hacksaw.sound.WebAudioRenderer"]=Fu).__name__="hacksaw.sound.WebAudioRenderer",Fu.__interfaces__=[Ss],Fu.prototype={playSound:function(e){var n,t,s,i,a,r,l,o,h=this;this._enabled&&(n=this._ctx.createBufferSource(),t=this._ctx.createGain(),s=this._stereo?this._ctx.createStereoPanner():null,i=e.volume,a=this._groups.h[this._sounds.h[e.id].group],n.buffer=this._buffers.h[e.id],(r=null!=e.pitch&&(l=e.pitch,isFinite(l)))&&null!=n.detune&&n.detune.setValueAtTime(e.pitch,this._ctx.currentTime),this._stereo?(n.connect(s),s.connect(t),o=s.pan,r=null!=e.pan&&(l=e.pan,isFinite(l)),o.setValueAtTime(r?e.pan:0,this._ctx.currentTime)):n.connect(t),l=null!=(r=a.pan)?r:a.gain,t.connect(l),t.gain.setValueAtTime(null!=i?i:1,this._ctx.currentTime),null!=n.detune&&null!=e.pitch&&(n.detune.value=e.pitch),n.loop=!(0<e.loopStartTime||e.sync&&e.sequenced)&&e.loop,0<e.duration?n.start(e.when,e.playStartTime,e.duration):n.start(e.when,e.playStartTime),o=e.id+":"+e.instance,n.onended=function(t){n.loop||h.cleanBuffer(n),null!=e.onComplete&&e.onComplete()},this._playing.h[o]={sound:n,gain:t,pan:s,target:l})},stopSound:function(t){for(var e=[],n=this._playing.h,s=Object.keys(n),i=s.length,a=0;a<i;){var r=(l=s[a++]).split(":");t.id!=r[0]||null!=t.instance&&t.instance!=r[1]||e.push(n[l])}for(var l=t.id+":"+t.instance,o=0;o<e.length;){var h=e[o++].sound,u=this._playing,u=(Object.prototype.hasOwnProperty.call(u.h,l)&&delete u.h[l],0<t.when?t.when:0);try{h.stop(u)}catch(t){}this.cleanBuffer(h)}},setGroupVolume:function(t){var e,n;this._enabled&&(e=this._groups.h[t.id].gain,this._groupMutes.h[t.id]?this._groupVolumes.h[t.id]=e.gain.value:(n=t.volume,isFinite(n)&&e.gain.setValueAtTime(t.volume,this._ctx.currentTime)))},muteGroup:function(t,e){var n,s=this._groups.h[t].gain;(e=null==e?!0:e)?(this._groupVolumes.h[t]=s.gain.value,s.gain.setValueAtTime(0,this._ctx.currentTime)):(n=this._groupVolumes.h[t],isFinite(n)&&s.gain.setValueAtTime(n,this._ctx.currentTime)),this._groupMutes.h[t]=e},addFilter:function(t){var e,n,s=this._ctx.createBiquadFilter();switch(t.targetType){case"bus":e=this._groups.h[t.target];break;case"sound":e=this._playing.h[t.target]}null!=e&&(e.gain.disconnect(e.target),e.gain.connect(s),s.connect(e.target),e.target=s,(e.filter=s).type=t.type,null!=(n=t.frequency)&&s.frequency.setValueAtTime(n,this._ctx.currentTime),null!=(n=t.gain)&&(s.gain.value=n),null!=(n=t.q))&&(s.Q.value=n)},playEnvelope:function(t){if("sequence"==t.targetType){for(var e=[],n=Object.keys(this._playing.h),s=n.length,i=0;i<s;)for(var a=n[i++],r=0,l=t.targets;r<l.length;)-1!=a.indexOf(l[r++])&&e.push(a);t.targets=e,t.targetType="sound"}for(r=0,l=t.targets;r<l.length;){var o=l[r],h=(++r,t.targetType),u=(null!=h&&"bus"==h?this._groups:this._playing).h[o];if(null!=u)for(var _=0,c=t.points;_<c.length;){var d=c[_],p=(++_,0<d.pos?d.pos:0);switch(t.param){case"filterFrequency":var f=u.filter;null!=f&&(g=null!=(g=d.val)?g:f.frequency.value,f.frequency.exponentialRampToValueAtTime(g,p));break;case"filterGain":var g,f=u.filter;null!=f&&(A=null!=(g=d.val)?g:f.gain.value,f.gain.linearRampToValueAtTime(A,p));break;case"filterQ":var m,A=u.filter;null!=A&&(m=null!=(m=d.val)?m:A.Q.value,A.Q.linearRampToValueAtTime(m,p));break;case"pan":this._stereo&&(m=u.pan,x=null!=d.val?d.val:m.pan.value,isFinite(x))&&m.pan.linearRampToValueAtTime(x,p);break;case"pitch":if("sound"==t.targetType){var x=u.sound;if(null==x.detune)return;var b=null!=d.val?d.val:x.detune.value;isFinite(b)&&x.detune.linearRampToValueAtTime(b,p)}break;case"volume":var b=u.gain,y=null!=d.val?d.val:b.gain.value;this._groupMutes.h[o]?this._groupVolumes.h[o]=y:isFinite(y)&&b.gain.linearRampToValueAtTime(y,p)}}}},pause:function(){null!=this._ctx&&(this._ctx.suspend(),this._gain=this._masterGain.gain.value,this._masterGain.gain.value=0)},resume:function(){null!=this._ctx&&(this._masterGain.gain.value=this._gain,this._ctx.resume())},getSoundDuration:function(t){t=this._buffers.h[t];return null!=t?t.duration:0},getPlaying:function(){return this._playing},enableUpdates:function(t){this.startAnalyser(t)},disableUpdates:function(t){t=this._meters.h[t];null!=t&&t.stop()},get_currentTime:function(){return null==this._ctx?null:this._ctx.currentTime},setupGroups:function(t){for(var h=this,e=(t.push({id:"master",dest:"ctx"}),0);e<t.length;){var n=t[e++],s=this._ctx.createGain(),i=this._stereo?this._ctx.createStereoPanner():null;this._groups.h[n.id]={gain:s,pan:i,target:null}}for(e=0;e<t.length;){var n=t[e],a=(++e,[this._groups.h[n.id]]),r=(null!=a[0].pan&&(a[0].pan.connect(a[0].gain),r=n.pan,a[0].pan.pan.setValueAtTime(null!=r?r:0,this._ctx.currentTime)),n.vol),l=(a[0].gain.gain.value=null!=r?r:1,n.dest);if(null==l)var o=this._groups.h.master.pan,u=null!=o?o:this._groups.h.master.gain;else switch(l){case"ctx":u=this._ctx.destination;break;case"master":var _=this._groups.h.master.pan;u=null!=_?_:this._groups.h.master.gain;break;default:_=this._groups.h[n.dest].pan;u=null!=_?_:this._groups.h[n.dest].gain}for(var o=[u],c=[],d=0;d<t.length;){var p=t[d],f=(++d,p.duck);(null!=f?f.target:null)==n.id&&c.push(p)}0==c.length?(a[0].target=o[0],a[0].gain.connect(o[0])):Xd.each(c,function(l,o){return function(t){var e=new Ts(t.duck.target,null,null,null,null,null),n=t.duck.attack,s=t.duck.release,i=t.duck.ratio,a=t.duck.threshold,r=t.duck.knee,t=new Du(h._ctx,h._groups.h[t.id].gain,o[0].gain,l[0],new Ts(t.duck.target,null!=n?n:e.attack,null!=s?s:e.release,null!=i?i:e.ratio,null!=a?a:e.threshold,null!=r?r:e.knee));o[0].target=t.targetInput}}(o,a))}},decodeSounds:function(n){for(var s=this,i=0,t=0;t<n.length;){var e=[n[t]],e=(++t,this._ctx.decodeAudioData(e[0].data.b.bufferValue,function(e){return function(t){s._buffers.h[e[0].id]=t,i+=1,s._enabled&&i==n.length&&s._onDecoded()}}(e)));null!=e&&e.catch(function(t){s._ctx=null,s._enabled=!1,s._onDecoded()})}},createAudioContext:function(){if(null==this._ctx){try{this._ctx=new AudioContext}catch(t){try{this._ctx=new window.webkitAudioContext}catch(t){this._ctx=null}}null!=this._ctx&&(this._masterGain=this._ctx.createGain(),this._masterGain.connect(this._ctx.destination))}else this._ctx.resume();return this._ctx},unlockAudio:function(){var e,n=this,s=window.document.body,t=e=function(){null!=n._ctx&&n._ctx.resume().then(function(t){return s.removeEventListener("touchstart",e),s.removeEventListener("touchend",e),s.removeEventListener("click",e),s.removeEventListener("keydown",e),n._unlocked=!0},function(t){return s.removeEventListener("touchstart",e),s.removeEventListener("touchend",e),s.removeEventListener("click",e),s.removeEventListener("keydown",e),!0})};null!=s&&(s.addEventListener("touchstart",t,!1),s.addEventListener("touchend",t,!1),s.addEventListener("click",t,!1),s.addEventListener("keydown",t,!1))},startAnalyser:function(n){var s,i,t,a,r,l,o=this,e=this._groups.h[n],e=null!=e?e.gain:null;null!=e&&((s=this._ctx.createAnalyser()).fftSize=512,t=s.frequencyBinCount,i=new Float32Array(t),s.getFloatTimeDomainData(i),e.connect(s),t=Needles.LoudnessMeter({source:e,workerUri:"vendor/needles-worker.js"}),this._meters.h[n]=t,a=[],r=new Gu(0,0,0),l=new Gu(0,0,0),t.on("dataavailable",function(t){s.getFloatTimeDomainData(i);var e=i.reduce(function(t,e){return e<t?t:e},0);switch(t.data.mode){case"integrated":l.integrated=t.data.value;break;case"momentary":l.momentary=t.data.value;break;case"short-term":l.shortterm=t.data.value}r.momentary=e,a.push(e),60==a.length&&a.shift(),r.shortterm=Xd.reduce(a,function(t,e){return Math.max(t,e)},0),r.integrated=Math.max(r.integrated,e),o._updateTrigger.handlers.invoke(new Uu(n,new Nu(r,l)))}),t.start())},cleanBuffer:function(t){if(null!=t&&(t.onended=null,t.disconnect(0),this.isiOS()))try{t.buffer=null!=this._scratchBuffer?this._scratchBuffer:t.buffer}catch(t){}},isiOS:function(t){return null==t&&(t=x.navigator.userAgent),new ct("(iPad|iPhone|iPod)","i").match(t)},__class__:Fu,__properties__:{get_currentTime:"get_currentTime"}},function(t,e,n,s,i){this.sourceInput=t.createGain(),this.targetInput=t.createGain(),e.connect(this.sourceInput),n.connect(this.targetInput);n=this.createCompressor(t,e,i),e=this.createProcessor(t,this.targetInput,n),this.sourceInput.connect(n),n.connect(e),e.connect(t.destination),i=t.createGain();this.sourceInput.connect(i),this.targetInput.connect(i),i.connect(s)}),Eu=((e["hacksaw.sound.Ducker"]=Du).__name__="hacksaw.sound.Ducker",Du.prototype={createCompressor:function(t,e,n){t=t.createDynamicsCompressor();return t.threshold.value=n.threshold,t.knee.value=n.knee,t.ratio.value=n.ratio,t.attack.value=n.attack,t.release.value=n.release,t},createProcessor:function(n,s,i){var t=n.createScriptProcessor(2048,2,1);return t.onaudioprocess=function(t){var e=Math.pow(10,i.reduction/20);isFinite(e)&&s.gain.setValueAtTime(e,n.currentTime)},s.connect(t),t},__class__:Du},function(t,e,n,s,i,a){this.targetType=t,this.target=e,this.frequency=n,this.q=s,this.gain=i,this.type=a}),Pu=((e["hacksaw.sound.api.BiquadFilterArgs"]=Eu).__name__="hacksaw.sound.api.BiquadFilterArgs",Eu.prototype={__class__:Eu},(e["hacksaw.sound.api.IActionArgs"]=Fs).__name__="hacksaw.sound.api.IActionArgs",Fs.__isInterface__=!0,Fs.prototype={__class__:Fs},function(t,e,n,s,i,a,r,l,o){this.kind="playEnvelope",this.when=null,this.quantize=null,this.instance=null,this.targetType=null,this.id=t,this.points=e,this.targets=n,null!=s&&(this.targetType=s),this.param=i,null!=a&&(this.instance=a),null!=r&&(this.quantize=r),null!=l&&(this.when=l),null!=o&&(this.kind=o)}),zu=((e["hacksaw.sound.api.PlayEnvelopeArgs"]=Pu).__name__="hacksaw.sound.api.PlayEnvelopeArgs",Pu.__interfaces__=[Fs],Pu.prototype={__class__:Pu},function(t,e,n,s,i,a){this.kind="playPool",this.instance=null,this.items=null,this.maxrate=null,this.start=null,this.id=t,null!=e&&(this.start=e),null!=n&&(this.maxrate=n),null!=s&&(this.items=s),null!=i&&(this.instance=i),null!=a&&(this.kind=a)}),Ru=((e["hacksaw.sound.api.PlayPoolArgs"]=zu).__name__="hacksaw.sound.api.PlayPoolArgs",zu.__interfaces__=[Fs],zu.prototype={__class__:zu},function(t,e,n,s,i,a,r,l,o,h){this.kind="playSequence",this.restart=null,this.when=null,this.quantize=null,this.delay=null,this.start=null,this.patternId=null,this.instance=null,this.id=t,this.sequence=e,null!=n&&(this.instance=n),null!=s&&(this.patternId=s),null!=i&&(this.start=i),null!=a&&(this.delay=a),null!=r&&(this.quantize=r),null!=l&&(this.when=l),null!=o&&(this.restart=o),null!=h&&(this.kind=h)}),Vu=((e["hacksaw.sound.api.PlaySequenceArgs"]=Ru).__name__="hacksaw.sound.api.PlaySequenceArgs",Ru.__interfaces__=[Fs],Ru.prototype={__class__:Ru},function(t,e,n,s,i,a,r,l,o,h,u,_,c,d,p,f,g,m,A,x,b,y){this.kind="playSound",this.sequenced=!1,this.sync=!1,this.when=null,this.quantize=null,this.duration=null,this.maxrate=null,this.end=null,this.start=null,this.delay=0,this.onComplete=null,this.playStartTime=null,this.playStart=null,this.loopStartTime=null,this.loopStart=null,this.loop=!1,this.filter=0,this.pitch=0,this.pan=0,this.volume=1,this.instance=null,this.id=t,null!=e&&(this.instance=e),null!=n&&(this.volume=n),null!=s&&(this.pan=s),null!=i&&(this.pitch=i),null!=a&&(this.filter=a),null!=r&&(this.loop=r),null!=l&&(this.loopStart=l),null!=o&&(this.loopStartTime=o),null!=h&&(this.playStart=h),null!=u&&(this.playStartTime=u),null!=_&&(this.onComplete=_),null!=c&&(this.delay=c),null!=d&&(this.start=d),null!=p&&(this.end=p),null!=f&&(this.maxrate=f),null!=g&&(this.duration=g),null!=m&&(this.quantize=m),null!=A&&(this.when=A),null!=x&&(this.sync=x),null!=b&&(this.sequenced=b),null!=y&&(this.kind=y)}),Qu=((e["hacksaw.sound.api.PlaySoundArgs"]=Vu).__name__="hacksaw.sound.api.PlaySoundArgs",Vu.__interfaces__=[Fs],Vu.prototype={__class__:Vu},function(t,e,n,s){this.kind="setGroupVolume",this.instance=null,this.id=t,this.volume=e,null!=n&&(this.instance=n),null!=s&&(this.kind=s)}),Ou=((e["hacksaw.sound.api.SetGroupVolumeArgs"]=Qu).__name__="hacksaw.sound.api.SetGroupVolumeArgs",Qu.__interfaces__=[Fs],Qu.prototype={__class__:Qu},function(t,e,n,s,i,a){this.kind="stopSequence",this.quantize=null,this.when=null,this.stop=null,this.instance=null,this.id=t,null!=e&&(this.instance=e),null!=n&&(this.stop=n),null!=s&&(this.when=s),null!=i&&(this.quantize=i),null!=a&&(this.kind=a)}),Lu=((e["hacksaw.sound.api.StopSequenceArgs"]=Ou).__name__="hacksaw.sound.api.StopSequenceArgs",Ou.__interfaces__=[Fs],Ou.prototype={__class__:Ou},function(t,e,n,s,i,a){this.kind="stopSound",this.when=null,this.delay=0,this.start=null,this.instance=null,this.id=t,null!=e&&(this.instance=e),null!=n&&(this.start=n),null!=s&&(this.delay=s),null!=i&&(this.when=i),null!=a&&(this.kind=a)}),Uu=((e["hacksaw.sound.api.StopSoundArgs"]=Lu).__name__="hacksaw.sound.api.StopSoundArgs",Lu.__interfaces__=[Fs],Lu.prototype={__class__:Lu},function(t,e){this.group=t,this.levels=e}),Nu=((e["hacksaw.sound.data.RendererUpdate"]=Uu).__name__="hacksaw.sound.data.RendererUpdate",Uu.prototype={__class__:Uu},function(t,e){this.peak=t,this.lufs=e}),Gu=((e["hacksaw.sound.data.LevelUpdate"]=Nu).__name__="hacksaw.sound.data.LevelUpdate",Nu.prototype={__class__:Nu},function(t,e,n){this.shortterm=t,this.momentary=e,this.integrated=n}),Xu=((e["hacksaw.sound.data.AnalysisWindow"]=Gu).__name__="hacksaw.sound.data.AnalysisWindow",Gu.prototype={__class__:Gu},d["hacksaw.sound.data.SoundMessageType"]={__ename__:!0,__constructs__:null,EnterBar:((c=function(t,e,n){return{_hx_index:0,bar:t,bpm:e,signature:n,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="EnterBar",c.__params__=["bar","bpm","signature"],c),SoundPlaying:((c=function(t,e,n,s){return{_hx_index:1,id:t,volume:e,duration:n,instance:s,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="SoundPlaying",c.__params__=["id","volume","duration","instance"],c),SoundStopped:((c=function(t,e){return{_hx_index:2,id:t,instance:e,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="SoundStopped",c.__params__=["id","instance"],c),SequencePlaying:((c=function(t,e,n,s,i){return{_hx_index:3,id:t,pattern:e,bpm:n,signature:s,instance:i,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="SequencePlaying",c.__params__=["id","pattern","bpm","signature","instance"],c),SequenceStopped:((c=function(t,e){return{_hx_index:4,id:t,instance:e,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="SequenceStopped",c.__params__=["id","instance"],c),PoolPlaying:((c=function(t,e,n,s){return{_hx_index:5,id:t,volume:e,duration:n,instance:s,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="PoolPlaying",c.__params__=["id","volume","duration","instance"],c),PoolStopped:((c=function(t,e){return{_hx_index:6,id:t,instance:e,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="PoolStopped",c.__params__=["id","instance"],c),PhraseStart:((c=function(t,e){return{_hx_index:7,bpm:t,signature:e,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="PhraseStart",c.__params__=["bpm","signature"],c),PhraseEnd:{_hx_name:"PhraseEnd",_hx_index:8,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l},FrameUpdate:((c=function(t,e){return{_hx_index:9,group:t,levels:e,__enum__:"hacksaw.sound.data.SoundMessageType",toString:l}})._hx_name="FrameUpdate",c.__params__=["group","levels"],c)}),s=(Xu.__constructs__=[Xu.EnterBar,Xu.SoundPlaying,Xu.SoundStopped,Xu.SequencePlaying,Xu.SequenceStopped,Xu.PoolPlaying,Xu.PoolStopped,Xu.PhraseStart,Xu.PhraseEnd,Xu.FrameUpdate],Xu.__empty_constructs__=[Xu.PhraseEnd],d["haxe.StackItem"]={__ename__:!0,__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:l},Module:((c=function(t){return{_hx_index:1,m:t,__enum__:"haxe.StackItem",toString:l}})._hx_name="Module",c.__params__=["m"],c),FilePos:((c=function(t,e,n,s){return{_hx_index:2,s:t,file:e,line:n,column:s,__enum__:"haxe.StackItem",toString:l}})._hx_name="FilePos",c.__params__=["s","file","line","column"],c),Method:((c=function(t,e){return{_hx_index:3,classname:t,method:e,__enum__:"haxe.StackItem",toString:l}})._hx_name="Method",c.__params__=["classname","method"],c),LocalFunction:((c=function(t){return{_hx_index:4,v:t,__enum__:"haxe.StackItem",toString:l}})._hx_name="LocalFunction",c.__params__=["v"],c)}),tr=(s.__constructs__=[s.CFunction,s.Module,s.FilePos,s.Method,s.LocalFunction],s.__empty_constructs__=[s.CFunction],(e["haxe.EntryPoint"]=Ds).__name__="haxe.EntryPoint",Ds.processEvents=function(){for(;;){var t=Ds.pending.shift();if(null==t)break;t()}var e=Zu.tick();return Zu.hasEvents()||0!=Ds.threadCount?e:-1},Ds.run=function(){var t,e=Ds.processEvents();"undefined"!=typeof window&&null!=(t=(t=window).requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame)?t(Ds.run):0<=e&&setTimeout(Ds.run,1e3*e)},function(t,e,n){Error.call(this,t),this.message=t,this.__previousException=e,this.__nativeException=null!=n?n:this}),Yu=((e["haxe.Exception"]=tr).__name__="haxe.Exception",tr.caught=function(t){return t instanceof tr?t:t instanceof Error?new tr(t.message,null,t):new Ju(t,null,t)},tr.thrown=function(t){return t instanceof tr?t.get_native():t instanceof Error?t:new Ju(t)},tr.__super__=Error,tr.prototype=t(Error.prototype,{unwrap:function(){return this.__nativeException},toString:function(){return this.get_message()},get_message:function(){return this.message},get_native:function(){return this.__nativeException},__class__:tr,__properties__:{get_native:"get_native",get_message:"get_message"}}),{}),Wu=(Yu.ucompare=function(t,e){return t<0?e<0?~e-~t|0:1:e<0?-1:t-e|0},{}),ju=(Wu.toString=function(t){if(0==(r=t).high&&0==r.low)return"0";for(var e="",t=!1,n=(r.high<0&&(t=!0),new ju(0,10));0!=r.high||0!=r.low;)var s,i,a=Wu.divMod(r,n),r=a.modulus.high<0?(e=(1+~a.modulus.low|0)+e,s=~(i=a.quotient).high,0==(i=1+~i.low|0)&&(++s,s|=0),new ju(s,i)):(e=a.modulus.low+e,a.quotient);return e=t?"-"+e:e},Wu.divMod=function(t,e){if(0==e.high)switch(e.low){case 0:throw tr.thrown("divide by zero");case 1:return{quotient:new ju(t.high,t.low),modulus:new ju(0,0)}}var n=t.high<0!=e.high<0,s=t.high<0?(i=~t.high,0==(a=1+~t.low|0)&&(++i,i|=0),new ju(i,a)):new ju(t.high,t.low);e.high<0&&(i=~e.high,0==(a=1+~e.low|0)&&(++i,i|=0),e=new ju(i,a));for(var i,a,r=new ju(0,0),l=new ju(0,1);!(e.high<0);){var o,h=0!=(o=Yu.ucompare(e.high,s.high))?o:Yu.ucompare(e.low,s.low);if(e=new ju(e.high<<1|e.low>>>31,e.low<<1),l=new ju(l.high<<1|l.low>>>31,l.low<<1),0<=h)break}for(;0!=l.high||0!=l.low;)0<=(0!=(o=Yu.ucompare(s.high,e.high))?o:Yu.ucompare(s.low,e.low))&&(r=new ju(r.high|l.high,r.low|l.low),i=s.high-e.high|0,Yu.ucompare(s.low,e.low)<0&&(--i,i|=0),s=new ju(i,s.low-e.low|0)),l=new ju(l.high>>>1,l.high<<31|l.low>>>1),e=new ju(e.high>>>1,e.high<<31|e.low>>>1);return n&&(i=~r.high,0==(a=1+~r.low|0)&&(++i,i|=0),r=new ju(i,a)),t.high<0&&(i=~s.high,0==(a=1+~s.low|0)&&(++i,i|=0),s=new ju(i,a)),{quotient:r,modulus:s}},function(t,e){this.high=t,this.low=e}),Hu=((e["haxe._Int64.___Int64"]=ju).__name__="haxe._Int64.___Int64",ju.prototype={__class__:ju},function(){}),Zu=((e["haxe.Int64Helper"]=Hu).__name__="haxe.Int64Helper",Hu.parseString=function(t){for(var e=new ju(0,0),n=new ju(0,1),s=!1,i=ut.trim(t),a=("-"==i.charAt(0)&&(s=!0,i=i.substring(1,i.length)),i.length),r=0;r<a;){var l=Jn.cca(i,a-1-r++)-48;if(l<0||9<l)throw tr.thrown("NumberFormatError");if(0!=l){var o=l>>31;if(s){var h=65535&n.low,u=n.low>>>16,_=65535&l,c=l>>>16,d=Yu._mul(h,_),_=Yu._mul(u,_),h=Yu._mul(h,c),u=(Yu._mul(u,c)+(h>>>16)|0)+(_>>>16)|0,d=(h<<=16,Yu.ucompare(c=d+h|0,h)<0&&(++u,u|=0),_<<=16,Yu.ucompare(c=c+_|0,_)<0&&(++u,u|=0),u=u+(Yu._mul(n.low,o)+Yu._mul(n.high,l)|0)|0,c),h=e.high-u|0;if(Yu.ucompare(e.low,d)<0&&(--h,h|=0),!((e=new ju(h,e.low-d|0)).high<0))throw tr.thrown("NumberFormatError: Underflow")}else{var _=65535&n.low,c=n.low>>>16,u=65535&l,h=l>>>16,d=Yu._mul(_,u),p=Yu._mul(c,u),f=Yu._mul(_,h),g=(Yu._mul(c,h)+(f>>>16)|0)+(p>>>16)|0,f=(f<<=16,Yu.ucompare(m=d+f|0,f)<0&&(++g,g|=0),p<<=16,Yu.ucompare(m=m+p|0,p)<0&&(++g,g|=0),g=g+(Yu._mul(n.low,o)+Yu._mul(n.high,l)|0)|0,e.high+g|0),p=e.low+m|0;if(Yu.ucompare(p,e.low)<0&&(++f,f|=0),(e=new ju(f,p)).high<0)throw tr.thrown("NumberFormatError: Overflow")}}var o=65535&n.low,l=n.low>>>16,g=Yu._mul(o,10),m=Yu._mul(l,10),f=Yu._mul(o,0),p=(Yu._mul(l,0)+(f>>>16)|0)+(m>>>16)|0;f<<=16,Yu.ucompare(l=g+f|0,f)<0&&(++p,p|=0),m<<=16,Yu.ucompare(l=l+m|0,m)<0&&(++p,p|=0),p=p+(Yu._mul(n.low,0)+Yu._mul(n.high,10)|0)|0,n=new ju(p,l)}return e},(e["haxe.Log"]=Es).__name__="haxe.Log",Es.formatOutput=function(t,e){var n=Ja.string(t);if(null==e)return n;t=e.fileName+":"+e.lineNumber;if(null!=e.customParams)for(var s=0,i=e.customParams;s<i.length;)n+=", "+Ja.string(i[s++]);return t+": "+n},Es.trace=function(t,e){t=Es.formatOutput(t,e);"undefined"!=typeof console&&null!=console.log&&console.log(t)},(e["haxe.MainEvent"]=Ps).__name__="haxe.MainEvent",Ps.prototype={__class__:Ps},function(){}),qu=((e["haxe.MainLoop"]=Zu).__name__="haxe.MainLoop",Zu.pending=null,Zu.hasEvents=function(){for(var t=Zu.pending;null!=t;){if(t.isBlocking)return!0;t=t.next}return!1},Zu.add=function(t,e){if(null==e&&(e=0),null==t)throw tr.thrown("Event function is null");t=new Ps(t,e),e=Zu.pending;return null!=e&&(e.prev=t),t.next=e,Zu.pending=t},Zu.sortEvents=function(){var t=Zu.pending;if(null!=t){for(var e,n,s,i,a=1,r=0,l=0;;){for(n=t,i=t=null,e=0;null!=n;){++e;for(var o=n,r=0,h=0,u=a;h<u&&(++h,++r,null!=(o=o.next)););for(l=a;0<r||0<l&&null!=o;)0!=r&&(0==l||null==o||n.priority>o.priority||n.priority==o.priority&&n.nextRun<=o.nextRun)?(n=(s=n).next,--r):(o=(s=o).next,--l),null!=i?i.next=s:t=s,s.prev=i,i=s;n=o}if(i.next=null,e<=1)break;a*=2}t.prev=null,Zu.pending=t}},Zu.tick=function(){Zu.sortEvents();for(var t=Zu.pending,e=Jn.now()/1e3,n=1e9;null!=t;){var s=t.next,i=t.nextRun-e;i<=0?(n=0,null!=t.f&&t.f()):i<n&&(n=i),t=s}return n},(e["haxe.Resource"]=zs).__name__="haxe.Resource",zs.content=null,zs.getBytes=function(t){for(var e=0,n=zs.content;e<n.length;){var s=n[e];if(++e,s.name==t)return null!=s.str?Rt.ofString(s.str):t_.decode(s.data)}return null},function(t){var e=this;this.id=setInterval(function(){e.run()},t)}),Ku=((e["haxe.Timer"]=qu).__name__="haxe.Timer",qu.delay=function(t,e){var n=new qu(e);return n.run=function(){n.stop(),t()},n},qu.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:qu},(e["haxe._Unserializer.DefaultResolver"]=Rs).__name__="haxe._Unserializer.DefaultResolver",Rs.prototype={resolveClass:function(t){return e[t]},resolveEnum:function(t){return d[t]},__class__:Rs},function(t){this.buf=t,this.length=this.buf.length,this.pos=0,this.scache=[],this.cache=[];t=Ku.DEFAULT_RESOLVER;null==t&&(t=new Rs,Ku.DEFAULT_RESOLVER=t),this.resolver=t}),Ju=((e["haxe.Unserializer"]=Ku).__name__="haxe.Unserializer",Ku.initCodes=function(){for(var t=[],e=0,n=Ku.BASE64.length;e<n;){var s=e++;t[Ku.BASE64.charCodeAt(s)]=s}return t},Ku.run=function(t){return new Ku(t).unserialize()},Ku.prototype={readDigits:function(){for(var t=0,e=!1,n=this.pos;;){var s=this.buf.charCodeAt(this.pos);if(s!=s)break;if(45==s){if(this.pos!=n)break;e=!0}else{if(s<48||57<s)break;t=10*t+(s-48)}this.pos++}return e&&(t*=-1),t},readFloat:function(){for(var t=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(!(43<=e&&e<58||101==e||69==e))break;this.pos++}return parseFloat(Jn.substr(this.buf,t,this.pos-t))},unserializeObject:function(t){for(;;){if(this.pos>=this.length)throw tr.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var e=this.unserialize();if("string"!=typeof e)throw tr.thrown("Invalid object key");t[e]=this.unserialize()}this.pos++},unserializeEnum:function(t,e){if(58!=this.buf.charCodeAt(this.pos++))throw tr.thrown("Invalid enum format");var n=this.readDigits();if(0==n)return b.createEnum(t,e);for(var s=[];0<n--;)s.push(this.unserialize());return b.createEnum(t,e,s)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var t=this.unserialize();if(null==(r=this.resolver.resolveClass(t)))throw tr.thrown("Class not found "+t);return r;case 66:t=this.unserialize();if(null==(c=this.resolver.resolveEnum(t)))throw tr.thrown("Enum not found "+t);return c;case 67:t=this.unserialize();if(null==(r=this.resolver.resolveClass(t)))throw tr.thrown("Class not found "+t);var e=Object.create(r.prototype);if(this.cache.push(e),e.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw tr.thrown("Invalid custom data");return e;case 77:var n=new r_;for(this.cache.push(n);104!=this.buf.charCodeAt(this.pos);)n.set(this.unserialize(),this.unserialize());return this.pos++,n;case 82:if((g=this.readDigits())<0||g>=this.scache.length)throw tr.thrown("Invalid string reference");return this.scache[g];case 97:var s=[];for(this.cache.push(s);;){if(104==(p=this.buf.charCodeAt(this.pos))){this.pos++;break}117==p?(this.pos++,g=this.readDigits(),s[s.length+g-1]=null):s.push(this.unserialize())}return s;case 98:n=new N;for(this.cache.push(n);104!=this.buf.charCodeAt(this.pos);){var i=this.unserialize(),a=this.unserialize();n.h[i]=a}return this.pos++,n;case 99:var t=this.unserialize();if(null==(r=this.resolver.resolveClass(t)))throw tr.thrown("Class not found "+t);e=Object.create(r.prototype);return this.cache.push(e),this.unserializeObject(e),e;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:t=this.unserialize();if(null==(B=this.resolver.resolveEnum(t)))throw tr.thrown("Enum not found "+t);this.pos++;for(var r=this.readDigits(),l=B.__constructs__,o=new Array(l.length),h=0,u=l.length;h<u;)o[f=h++]=l[f]._hx_name;var _=o[r];if(null==_)throw tr.thrown("Unknown enum index "+t+"@"+r);var c=this.unserializeEnum(B,_);return this.cache.push(c),c;case 107:return NaN;case 108:var d=new i_;for(this.cache.push(d);104!=this.buf.charCodeAt(this.pos);)d.add(this.unserialize());return this.pos++,d;case 109:return-1/0;case 110:return null;case 111:e={};return this.cache.push(e),this.unserializeObject(e),e;case 112:return 1/0;case 113:for(var n=new fl,p=(this.cache.push(n),this.buf.charCodeAt(this.pos++));58==p;){var f=this.readDigits(),a=this.unserialize();n.h[f]=a,p=this.buf.charCodeAt(this.pos++)}if(104!=p)throw tr.thrown("Invalid IntMap format");return n;case 114:var g;if((g=this.readDigits())<0||g>=this.cache.length)throw tr.thrown("Invalid reference");return this.cache[g];case 115:var m=this.readDigits(),A=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<m)throw tr.thrown("Invalid bytes length");var x=Ku.CODES;null==x&&(x=Ku.initCodes(),Ku.CODES=x);for(var r=3&m,b=(f=this.pos)+(m-r),y=new Rt(new ArrayBuffer(3*(m>>2)+(2<=r?r-1:0))),w=0;f<b;){var v=x[A.charCodeAt(f++)],C=x[A.charCodeAt(f++)],M=(y.b[w++]=v<<2|C>>4,x[A.charCodeAt(f++)]),S=(y.b[w++]=C<<4|M>>2,x[A.charCodeAt(f++)]);y.b[w++]=M<<6|S}return 2<=r&&(v=x[A.charCodeAt(f++)],C=x[A.charCodeAt(f++)],y.b[w++]=v<<2|C>>4,3==r)&&(M=x[A.charCodeAt(f++)],y.b[w++]=C<<4|M>>2),this.pos+=m,this.cache.push(y),y;case 116:return!0;case 118:var k;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(k=Jn.strDate(Jn.substr(this.buf,this.pos,19)),this.pos+=19):k=new Date(this.readFloat()),this.cache.push(k),k;case 119:var B,t=this.unserialize();if(null==(B=this.resolver.resolveEnum(t)))throw tr.thrown("Enum not found "+t);c=this.unserializeEnum(B,this.unserialize());return this.cache.push(c),c;case 120:throw tr.thrown(this.unserialize());case 121:m=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<m)throw tr.thrown("Invalid string length");i=Jn.substr(this.buf,this.pos,m);return this.pos+=m,i=decodeURIComponent(i.split("+").join(" ")),this.scache.push(i),i;case 122:return 0}throw this.pos--,tr.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:Ku},function(t,e,n){tr.call(this,String(t),e,n),this.value=t}),Rt=((e["haxe.ValueException"]=Ju).__name__="haxe.ValueException",Ju.__super__=tr,Ju.prototype=t(tr.prototype,{unwrap:function(){return this.value},__class__:Ju}),(e["haxe.crypto.Adler32"]=Vs).__name__="haxe.crypto.Adler32",Vs.read=function(t){var e=new Vs,n=t.readByte(),s=t.readByte();return e.a1=t.readByte()<<8|t.readByte(),e.a2=n<<8|s,e},Vs.prototype={update:function(t,e,n){for(var s=this.a1,i=this.a2,a=e,r=e+n;a<r;)i=(i+(s=(s+t.b[a++])%65521))%65521;this.a1=s,this.a2=i},equals:function(t){return t.a1==this.a1&&t.a2==this.a2},__class__:Vs},function(t){this.length=t.byteLength,this.b=new Uint8Array(t),(this.b.bufferValue=t).hxBytes=this,t.bytes=this.b}),$u=((e["haxe.io.Bytes"]=Rt).__name__="haxe.io.Bytes",Rt.ofString=function(t,e){if(e==$u.RawNative){for(var n=new Uint8Array(t.length<<1),s=0,i=t.length;s<i;){var a=s++,r=t.charCodeAt(a);n[a<<1]=255&r,n[a<<1|1]=r>>8}return new Rt(n.buffer)}for(var l=[],a=0;a<t.length;)(r=55296<=(r=t.charCodeAt(a++))&&r<=56319?r-55232<<10|1023&t.charCodeAt(a++):r)<=127?l.push(r):(r<=2047?l.push(192|r>>6):(r<=65535?l.push(224|r>>12):(l.push(240|r>>18),l.push(128|r>>12&63)),l.push(128|r>>6&63)),l.push(128|63&r));return new Rt(new Uint8Array(l).buffer)},Rt.ofData=function(t){var e=t.hxBytes;return null!=e?e:new Rt(t)},Rt.prototype={blit:function(t,e,n,s){if(t<0||n<0||s<0||t+s>this.length||n+s>e.length)throw tr.thrown(f_.OutsideBounds);0==n&&s==e.b.byteLength?this.b.set(e.b,t):this.b.set(e.b.subarray(n,n+s),t)},fill:function(t,e,n){for(var s=0;s<e;)++s,this.b[t++]=n},getFloat:function(t){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(t,!0)},setFloat:function(t,e){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(t,e,!0)},getUInt16:function(t){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(t,!0)},setUInt16:function(t,e){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setUint16(t,e,!0)},getInt32:function(t){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(t,!0)},setInt32:function(t,e){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(t,e,!0)},getString:function(t,e,n){if(t<0||e<0||t+e>this.length)throw tr.thrown(f_.OutsideBounds);null==n&&(n=$u.UTF8);var s,i,a="",r=this.b,l=t,o=t+e;switch(n._hx_index){case 0:for(;l<o;)if((h=r[l++])<128){if(0==h)break;a+=String.fromCodePoint(h)}else h<224?(s=(63&h)<<6|127&r[l++],a+=String.fromCodePoint(s)):h<240?(s=(31&h)<<12|(127&r[l++])<<6|127&r[l++],a+=String.fromCodePoint(s)):(i=(15&h)<<18|(127&r[l++])<<12|(127&r[l++])<<6|127&r[l++],a+=String.fromCodePoint(i));break;case 1:for(;l<o;){var h=r[l++]|r[l++]<<8;a+=String.fromCodePoint(h)}}return a},toString:function(){return this.getString(0,this.length)},__class__:Rt},d["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:l},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:l}}),t_=($u.__constructs__=[$u.UTF8,$u.RawNative],$u.__empty_constructs__=[$u.UTF8,$u.RawNative],function(){}),e_=((e["haxe.crypto.Base64"]=t_).__name__="haxe.crypto.Base64",t_.encode=function(t,e){null==e&&(e=!0);var n=new e_(t_.BYTES).encodeBytes(t).toString();if(e)switch(t.length%3){case 1:n+="==";break;case 2:n+="="}return n},t_.decode=function(t,e){if(e=null==e?!0:e)for(;61==Jn.cca(t,t.length-1);)t=Jn.substr(t,0,-1);return new e_(t_.BYTES).decodeBytes(Rt.ofString(t))},function(t){for(var e=t.length,n=1;1<<n<e;)++n;if(8<n||e!=1<<n)throw tr.thrown("BaseCode : base length must be a power of two.");this.base=t,this.nbits=n}),n_=((e["haxe.crypto.BaseCode"]=e_).__name__="haxe.crypto.BaseCode",e_.prototype={encodeBytes:function(t){for(var e=this.nbits,n=this.base,s=8*t.length/e|0,i=new Rt(new ArrayBuffer(s+(8*t.length%e==0?0:1))),a=0,r=0,l=(1<<e)-1,o=0,h=0;h<s;){for(;r<e;)r+=8,a=(a<<=8)|t.b[o++];r-=e,i.b[h++]=n.b[a>>r&l]}return 0<r&&(i.b[h++]=n.b[a<<e-r&l]),i},initTable:function(){for(var t=[],e=0;e<256;)t[e++]=-1;for(var e=0,n=this.base.length;e<n;){var s=e++;t[this.base.b[s]]=s}this.tbl=t},decodeBytes:function(t){for(var e=this.nbits,n=(null==this.tbl&&this.initTable(),this.tbl),s=t.length*e>>3,i=new Rt(new ArrayBuffer(s)),a=0,r=0,l=0,o=0;o<s;){for(;r<8;){r+=e,a<<=e;var h=n[t.b[l++]];if(-1==h)throw tr.thrown("BaseCode : invalid encoded char");a|=h}r-=8,i.b[o++]=a>>r&255}return i},__class__:e_},(e["haxe.crypto.Md5"]=Qs).__name__="haxe.crypto.Md5",Qs.encode=function(t){var e=new Qs;return e.hex(e.doEncode(Qs.str2blks(t)))},Qs.str2blks=function(t){for(var e=Rt.ofString(t),t=1+(e.length+8>>6),n=[],s=16*t,i=0;i<s;)n[i++]=0;for(var a=0,r=e.length,l=8*r;a<r;)n[a>>2]|=e.b[a]<<(l+a)%4*8,++a;n[a>>2]|=128<<(l+a)%4*8;t=16*t-2;return n[t]=255&l,n[t]=(n[t]|=(l>>>8&255)<<8)|(l>>>16&255)<<16,n[t]|=(l>>>24&255)<<24,n},Qs.prototype={bitOR:function(t,e){return(t>>>1|e>>>1)<<1|1&t|1&e},bitXOR:function(t,e){return(t>>>1^e>>>1)<<1|1&t^1&e},bitAND:function(t,e){return(t>>>1&e>>>1)<<1|1&t&e},addme:function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},hex:function(t){for(var e="",n=0;n<t.length;){var s=t[n];++n,e=(e=(e=(e+="0123456789abcdef".charAt(s>>4&15)+"0123456789abcdef".charAt(15&s))+("0123456789abcdef".charAt(s>>12&15)+"0123456789abcdef".charAt(s>>8&15)))+("0123456789abcdef".charAt(s>>20&15)+"0123456789abcdef".charAt(s>>16&15)))+("0123456789abcdef".charAt(s>>28&15)+"0123456789abcdef".charAt(s>>24&15))}return e},rol:function(t,e){return t<<e|t>>>32-e},cmn:function(t,e,n,s,i,a){return this.addme(this.rol(this.addme(this.addme(e,t),this.addme(s,a)),i),n)},ff:function(t,e,n,s,i,a,r){return this.cmn(this.bitOR(this.bitAND(e,n),this.bitAND(~e,s)),t,e,i,a,r)},gg:function(t,e,n,s,i,a,r){return this.cmn(this.bitOR(this.bitAND(e,s),this.bitAND(n,~s)),t,e,i,a,r)},hh:function(t,e,n,s,i,a,r){return this.cmn(this.bitXOR(this.bitXOR(e,n),s),t,e,i,a,r)},ii:function(t,e,n,s,i,a,r){return this.cmn(this.bitXOR(n,this.bitOR(e,~s)),t,e,i,a,r)},doEncode:function(t){for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,a=0;a<t.length;){var r=e,l=n,o=s,h=i,e=this.ff(e,n,s,i,t[a],7,-680876936),i=this.ff(i,e,n,s,t[a+1],12,-389564586),s=this.ff(s,i,e,n,t[a+2],17,606105819),n=this.ff(n,s,i,e,t[a+3],22,-1044525330);e=this.ff(e,n,s,i,t[a+4],7,-176418897),i=this.ff(i,e,n,s,t[a+5],12,1200080426),s=this.ff(s,i,e,n,t[a+6],17,-1473231341),n=this.ff(n,s,i,e,t[a+7],22,-45705983),e=this.ff(e,n,s,i,t[a+8],7,1770035416),i=this.ff(i,e,n,s,t[a+9],12,-1958414417),s=this.ff(s,i,e,n,t[a+10],17,-42063),n=this.ff(n,s,i,e,t[a+11],22,-1990404162),e=this.ff(e,n,s,i,t[a+12],7,1804603682),i=this.ff(i,e,n,s,t[a+13],12,-40341101),s=this.ff(s,i,e,n,t[a+14],17,-1502002290),n=this.ff(n,s,i,e,t[a+15],22,1236535329),e=this.gg(e,n,s,i,t[a+1],5,-165796510),i=this.gg(i,e,n,s,t[a+6],9,-1069501632),s=this.gg(s,i,e,n,t[a+11],14,643717713),n=this.gg(n,s,i,e,t[a],20,-373897302),e=this.gg(e,n,s,i,t[a+5],5,-701558691),i=this.gg(i,e,n,s,t[a+10],9,38016083),s=this.gg(s,i,e,n,t[a+15],14,-660478335),n=this.gg(n,s,i,e,t[a+4],20,-405537848),e=this.gg(e,n,s,i,t[a+9],5,568446438),i=this.gg(i,e,n,s,t[a+14],9,-1019803690),s=this.gg(s,i,e,n,t[a+3],14,-187363961),n=this.gg(n,s,i,e,t[a+8],20,1163531501),e=this.gg(e,n,s,i,t[a+13],5,-1444681467),i=this.gg(i,e,n,s,t[a+2],9,-51403784),s=this.gg(s,i,e,n,t[a+7],14,1735328473),n=this.gg(n,s,i,e,t[a+12],20,-1926607734),e=this.hh(e,n,s,i,t[a+5],4,-378558),i=this.hh(i,e,n,s,t[a+8],11,-2022574463),s=this.hh(s,i,e,n,t[a+11],16,1839030562),n=this.hh(n,s,i,e,t[a+14],23,-35309556),e=this.hh(e,n,s,i,t[a+1],4,-1530992060),i=this.hh(i,e,n,s,t[a+4],11,1272893353),s=this.hh(s,i,e,n,t[a+7],16,-155497632),n=this.hh(n,s,i,e,t[a+10],23,-1094730640),e=this.hh(e,n,s,i,t[a+13],4,681279174),i=this.hh(i,e,n,s,t[a],11,-358537222),s=this.hh(s,i,e,n,t[a+3],16,-722521979),n=this.hh(n,s,i,e,t[a+6],23,76029189),e=this.hh(e,n,s,i,t[a+9],4,-640364487),i=this.hh(i,e,n,s,t[a+12],11,-421815835),s=this.hh(s,i,e,n,t[a+15],16,530742520),n=this.hh(n,s,i,e,t[a+2],23,-995338651),e=this.ii(e,n,s,i,t[a],6,-198630844),i=this.ii(i,e,n,s,t[a+7],10,1126891415),s=this.ii(s,i,e,n,t[a+14],15,-1416354905),n=this.ii(n,s,i,e,t[a+5],21,-57434055),e=this.ii(e,n,s,i,t[a+12],6,1700485571),i=this.ii(i,e,n,s,t[a+3],10,-1894986606),s=this.ii(s,i,e,n,t[a+10],15,-1051523),n=this.ii(n,s,i,e,t[a+1],21,-2054922799),e=this.ii(e,n,s,i,t[a+8],6,1873313359),i=this.ii(i,e,n,s,t[a+15],10,-30611744),s=this.ii(s,i,e,n,t[a+6],15,-1560198380),n=this.ii(n,s,i,e,t[a+13],21,1309151649),e=this.ii(e,n,s,i,t[a+4],6,-145523070),i=this.ii(i,e,n,s,t[a+11],10,-1120210379),s=this.ii(s,i,e,n,t[a+2],15,718787259),n=this.ii(n,s,i,e,t[a+9],21,-343485551),e=this.addme(e,r),n=this.addme(n,l),s=this.addme(s,o),i=this.addme(i,h),a+=16}return[e,n,s,i]},__class__:Qs},(e["haxe.ds.ArraySort"]=Os).__name__="haxe.ds.ArraySort",Os.sort=function(t,e){Os.rec(t,e,0,t.length)},Os.rec=function(t,e,n,s){var i=n+s>>1;if(s-n<12){if(!(s<=n))for(var a=n+1;a<s;)for(var r=a++;n<r&&e(t[r],t[r-1])<0;)Os.swap(t,r-1,r),--r}else Os.rec(t,e,n,i),Os.rec(t,e,i,s),Os.doMerge(t,e,n,i,s,i-n,s-i)},Os.doMerge=function(t,e,n,s,i,a,r){for(;;){var l,o,h,u;if(0==a||0==r)return;if(a+r==2)return void(e(t[s],t[n])<0&&Os.swap(t,s,n));r<a?u=(o=Os.lower(t,e,s,i,l=n+(h=a>>1)))-s:h=(l=Os.upper(t,e,n,s,o=s+(u=r>>1)))-n,Os.rotate(t,e,l,s,o);var _=l+u;Os.doMerge(t,e,n,l,_,h,u),n=_,s=o,a-=h,r-=u}},Os.rotate=function(t,e,n,s,i){if(n!=s&&s!=i)for(var a=Os.gcd(i-n,s-n);0!=a--;){for(var r=t[n+a],l=s-n,o=n+a,h=n+a+l;h!=n+a;)t[o]=t[h],l<i-(o=h)?h+=l:h=n+(l-(i-h));t[o]=r}},Os.gcd=function(t,e){for(;0!=e;){var n=t%e;t=e,e=n}return t},Os.upper=function(t,e,n,s,i){for(var a,r,l=s-n;0<l;)l=e(t[i],t[r=n+(a=l>>1)])<0?a:(n=r+1,l-a-1);return n},Os.lower=function(t,e,n,s,i){for(var a,r,l=s-n;0<l;)l=e(t[r=n+(a=l>>1)],t[i])<0?(n=r+1,l-a-1):a;return n},Os.swap=function(t,e,n){var s=t[e];t[e]=t[n],t[n]=s},(e["haxe.ds.BalancedTree"]=Ls).__name__="haxe.ds.BalancedTree",Ls.__interfaces__=[ot],Ls.prototype={set:function(t,e){this.root=this.setLoop(t,e,this.root)},get:function(t){for(var e=this.root;null!=e;){var n=this.compare(t,e.key);if(0==n)return e.value;e=n<0?e.left:e.right}return null},keys:function(){var t=[];return this.keysLoop(this.root,t),new A_(t)},setLoop:function(t,e,n){var s;return null==n?new n_(null,t,e,null):0==(s=this.compare(t,n.key))?new n_(n.left,t,e,n.right,null==n?0:n._height):s<0?this.balance(this.setLoop(t,e,n.left),n.key,n.value,n.right):(s=this.setLoop(t,e,n.right),this.balance(n.left,n.key,n.value,s))},keysLoop:function(t,e){null!=t&&(this.keysLoop(t.left,e),e.push(t.key),this.keysLoop(t.right,e))},balance:function(t,e,n,s){var i,a,r=null==t?0:t._height,l=null==s?0:s._height;return l+2<r?(i=t.left,a=t.right,(null==i?0:i._height)>=(null==a?0:a._height)?new n_(t.left,t.key,t.value,new n_(t.right,e,n,s)):new n_(new n_(t.left,t.key,t.value,t.right.left),t.right.key,t.right.value,new n_(t.right.right,e,n,s))):r+2<l?(i=s.right,a=s.left,(null==i?0:i._height)>(null==a?0:a._height)?new n_(new n_(t,e,n,s.left),s.key,s.value,s.right):new n_(new n_(t,e,n,s.left.left),s.left.key,s.left.value,new n_(s.left.right,s.key,s.value,s.right))):new n_(t,e,n,s,(l<r?r:l)+1)},compare:function(t,e){return Z.compare(t,e)},__class__:Ls},function(t,e,n,s,i){null==i&&(i=-1),this.left=t,this.key=e,this.value=n,this.right=s,-1==i?(t=this.left,e=this.right,n=(null==t?0:t._height)>(null==e?0:e._height)?null==(t=this.left)?0:t._height:null==(t=this.right)?0:t._height,this._height=n+1):this._height=i}),s_=((e["haxe.ds.TreeNode"]=n_).__name__="haxe.ds.TreeNode",n_.prototype={__class__:n_},function(){Ls.call(this)}),i_=((e["haxe.ds.EnumValueMap"]=s_).__name__="haxe.ds.EnumValueMap",s_.__interfaces__=[ot],s_.__super__=Ls,s_.prototype=t(Ls.prototype,{compare:function(t,e){var n=t._hx_index-e._hx_index;return 0!=n?n:(n=b.enumParameters(t),t=b.enumParameters(e),0==n.length&&0==t.length?0:this.compareArgs(n,t))},compareArgs:function(t,e){var n=t.length-e.length;if(0!=n)return n;for(var s=0,i=t.length;s<i;){var a=s++,a=this.compareArg(t[a],e[a]);if(0!=a)return a}return 0},compareArg:function(t,e){return Z.isEnumValue(t)&&Z.isEnumValue(e)?this.compare(t,e):t instanceof Array&&e instanceof Array?this.compareArgs(t,e):Z.compare(t,e)},__class__:s_}),function(){this.length=0}),a_=((e["haxe.ds.List"]=i_).__name__="haxe.ds.List",i_.prototype={add:function(t){t=new a_(t,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},push:function(t){t=new a_(t,this.h);this.h=t,null==this.q&&(this.q=t),this.length++},remove:function(t){for(var e=null,n=this.h;null!=n;){if(n.item==t)return null==e?this.h=n.next:e.next=n.next,this.q==n&&(this.q=e),this.length--,!0;n=(e=n).next}return!1},__class__:i_},function(t,e){this.item=t,this.next=e}),r_=((e["haxe.ds._List.ListNode"]=a_).__name__="haxe.ds._List.ListNode",a_.prototype={__class__:a_},function(){this.h={__keys__:{}}}),l_=((e["haxe.ds.ObjectMap"]=r_).__name__="haxe.ds.ObjectMap",r_.__interfaces__=[ot],r_.prototype={set:function(t,e){var n=t.__id__;null==n&&(n=t.__id__=x.$haxeUID++),this.h[n]=e,this.h.__keys__[n]=t},get:function(t){return this.h[t.__id__]},remove:function(t){t=t.__id__;return null!=this.h.__keys__[t]&&(delete this.h[t],delete this.h.__keys__[t],!0)},keys:function(){var t,e=[];for(t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return new A_(e)},__class__:r_},d["haxe.ds.Option"]={__ename__:!0,__constructs__:null,Some:((c=function(t){return{_hx_index:0,v:t,__enum__:"haxe.ds.Option",toString:l}})._hx_name="Some",c.__params__=["v"],c),None:{_hx_name:"None",_hx_index:1,__enum__:"haxe.ds.Option",toString:l}}),o_=(l_.__constructs__=[l_.Some,l_.None],l_.__empty_constructs__=[l_.None],function(t){this.h=t,this.keys=Object.keys(t),this.length=this.keys.length,this.current=0}),h_=((e["haxe.ds._StringMap.StringMapKeyIterator"]=o_).__name__="haxe.ds._StringMap.StringMapKeyIterator",o_.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:o_},function(t){this.h=t,this.keys=Object.keys(t),this.length=this.keys.length,this.current=0}),u_=((e["haxe.ds._StringMap.StringMapValueIterator"]=h_).__name__="haxe.ds._StringMap.StringMapValueIterator",h_.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:h_},(e["haxe.exceptions.PosException"]=Us).__name__="haxe.exceptions.PosException",Us.__super__=tr,Us.prototype=t(tr.prototype,{toString:function(){return tr.prototype.toString.call(this)+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber},__class__:Us}),(e["haxe.exceptions.NotImplementedException"]=Ns).__name__="haxe.exceptions.NotImplementedException",Ns.__super__=Us,Ns.prototype=t(Us.prototype,{__class__:Ns}),(e["haxe.http.HttpBase"]=Gs).__name__="haxe.http.HttpBase",Gs.prototype={onData:function(t){},onBytes:function(t){},onError:function(t){},onStatus:function(t){},hasOnData:function(){return W(this,this.onData)!=this.emptyOnData},success:function(t){this.responseBytes=t,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes)},get_responseData:function(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,$u.UTF8)),this.responseAsString},__class__:Gs,__properties__:{get_responseData:"get_responseData"}},function(t){this.async=!0,this.withCredentials=!1,Gs.call(this,t)}),__=((e["haxe.http.HttpJs"]=u_).__name__="haxe.http.HttpJs",u_.__super__=Gs,u_.prototype=t(Gs.prototype,{request:function(t){function e(t){if(4==c.readyState){var e,n;try{e=c.status}catch(i){e=null}if(null!=(e=null==(e=0==e&&$_.get_supported()&&null!=x.location&&(n=x.location.protocol.toLowerCase(),new ct("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(n))?null!=c.response?200:404:e)?null:e)&&_.onStatus(e),null!=e&&200<=e&&e<400){_.req=null;for(var s=c.getAllResponseHeaders().split("\r\n"),i=[],a=0,r=s;a<r.length;){var l=r[a];++a,""!=l&&i.push(l)}s=i,_.responseHeaders=new N;for(i=0;i<s.length;){var o=s[i++].split(": "),h=o.shift(),o=1==o.length?o[0]:o.join(": "),o=ut.ltrim(ut.rtrim(o));_.responseHeaders.h[h]=o}_.success(Rt.ofData(c.response))}else if(null==e||0==e&&null==c.response)_.req=null,_.onError("Failed to connect or resolve host");else if(null==e){var u=(_.req=null)!=c.response?Rt.ofData(c.response):null;_.responseBytes=u,_.onError("Http Error #"+c.status)}else switch(e){case 12007:_.req=null,_.onError("Unknown host");break;case 12029:_.req=null,_.onError("Failed to connect to host");break;default:u=(_.req=null)!=c.response?Rt.ofData(c.response):null;_.responseBytes=u,_.onError("Http Error #"+c.status)}}}var _=this,c=(this.responseAsString=null,this.responseBytes=null,this.responseHeaders=null,this.req=$_.createXMLHttpRequest()),n=(this.async&&(c.onreadystatechange=e),this.postData),s=this.postBytes;if(null!=(r=null==n?null==s?null:new Blob([s.b.bufferValue]):null==s?n:null))t=!0;else for(n=0,s=this.params;n<s.length;)var i=s[n],a=(++n,r=null==r?"":(null==r?"null":Ja.string(r))+"&",i.name),a=(null==r?"null":Ja.string(r))+encodeURIComponent(a)+"=",i=i.value,r=a+encodeURIComponent(i);try{t?c.open("POST",this.url,this.async):null!=r?(c.open("GET",this.url+(this.url.split("?").length<=1?"?":"&")+(null==r?"null":Ja.string(r)),this.async),r=null):c.open("GET",this.url,this.async),c.responseType="arraybuffer"}catch(n){s=tr.caught(n).unwrap();return this.req=null,void this.onError(s.toString())}c.withCredentials=this.withCredentials,!wt.exists(this.headers,function(t){return"Content-Type"==t.name})&&t&&null==this.postData&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(n=0,s=this.headers;n<s.length;){var l=s[n];++n,c.setRequestHeader(l.name,l.value)}c.send(r),this.async||e()},__class__:u_}),function(){this.pos=0,this.size=0}),c_=((e["haxe.io.BytesBuffer"]=__).__name__="haxe.io.BytesBuffer",__.prototype={addByte:function(t){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,t)},add:function(t){var e;this.pos+t.length>this.size&&this.grow(t.length),0!=this.size&&(e=new Uint8Array(t.b.buffer,t.b.byteOffset,t.length),this.u8.set(e,this.pos),this.pos+=t.length)},addBytes:function(t,e,n){if(e<0||n<0||e+n>t.length)throw tr.thrown(f_.OutsideBounds);this.pos+n>this.size&&this.grow(n),0!=this.size&&(t=new Uint8Array(t.b.buffer,t.b.byteOffset+e,n),this.u8.set(t,this.pos),this.pos+=n)},grow:function(t){for(var e=this.pos+t,n=0==this.size?16:this.size;n<e;)n=3*n>>1;var t=new ArrayBuffer(n),s=new Uint8Array(t);0<this.size&&s.set(this.u8),this.size=n,this.buffer=t,this.u8=s,this.view=new DataView(this.buffer)},getBytes:function(){var t;return 0==this.size?new Rt(new ArrayBuffer(0)):((t=new Rt(this.buffer)).length=this.pos,t)},__class__:__},(e["haxe.io.Input"]=Xs).__name__="haxe.io.Input",Xs.prototype={readByte:function(){throw new Ns(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"})},readBytes:function(t,e,n){var s=n,i=t.b;if(e<0||n<0||e+n>t.length)throw tr.thrown(f_.OutsideBounds);try{for(;0<s;)i[e]=this.readByte(),++e,--s}catch(t){if(!(tr.caught(t).unwrap()instanceof p_))throw t}return n-s},set_bigEndian:function(t){return this.bigEndian=t},readFullBytes:function(t,e,n){for(;0<n;){var s=this.readBytes(t,e,n);if(0==s)throw tr.thrown(f_.Blocked);e+=s,n-=s}},read:function(t){for(var e=new Rt(new ArrayBuffer(t)),n=0;0<t;){var s=this.readBytes(e,n,t);if(0==s)throw tr.thrown(f_.Blocked);n+=s,t-=s}return e},readUntil:function(t){for(var e,n=new __;(e=this.readByte())!=t;)n.addByte(e);return n.getBytes().toString()},readLine:function(){var t,e,n=new __;try{for(;;){if(10==(t=this.readByte()))break;n.addByte(t)}e=n.getBytes().toString(),13==Jn.cca(e,e.length-1)&&(e=Jn.substr(e,0,-1))}catch(t){var s=tr.caught(t).unwrap();if(!(s instanceof p_))throw t;if(0==(e=n.getBytes().toString()).length)throw tr.thrown(s)}return e},readFloat:function(){return g_.i32ToFloat(this.readInt32())},readDouble:function(){var t=this.readInt32(),e=this.readInt32();return this.bigEndian?g_.i64ToDouble(e,t):g_.i64ToDouble(t,e)},readInt16:function(){var t=this.readByte(),e=this.readByte(),t=this.bigEndian?e|t<<8:t|e<<8;return 0!=(32768&t)?t-65536:t},readUInt16:function(){var t=this.readByte(),e=this.readByte();return this.bigEndian?e|t<<8:t|e<<8},readUInt24:function(){var t=this.readByte(),e=this.readByte(),n=this.readByte();return this.bigEndian?n|e<<8|t<<16:t|e<<8|n<<16},readInt32:function(){var t=this.readByte(),e=this.readByte(),n=this.readByte(),s=this.readByte();return this.bigEndian?s|n<<8|e<<16|t<<24:t|e<<8|n<<16|s<<24},readString:function(t,e){var n=new Rt(new ArrayBuffer(t));return this.readFullBytes(n,0,t),n.getString(0,t,e)},__class__:Xs,__properties__:{set_bigEndian:"set_bigEndian"}},function(t,e,n){if(null==e&&(e=0),null==n&&(n=t.length-e),e<0||n<0||e+n>t.length)throw tr.thrown(f_.OutsideBounds);this.b=t.b,this.pos=e,this.len=n,this.totlen=n}),d_=((e["haxe.io.BytesInput"]=c_).__name__="haxe.io.BytesInput",c_.__super__=Xs,c_.prototype=t(Xs.prototype,{set_position:function(t){return t<0?t=0:t>this.totlen&&(t=this.totlen),this.len=this.totlen-t,this.pos=t},readByte:function(){if(0==this.len)throw tr.thrown(new p_);return this.len--,this.b[this.pos++]},readBytes:function(t,e,n){if(e<0||n<0||e+n>t.length)throw tr.thrown(f_.OutsideBounds);if(0==this.len&&0<n)throw tr.thrown(new p_);this.len<n&&(n=this.len);for(var s=this.b,i=t.b,a=0,r=n;a<r;){var l=a++;i[e+l]=s[this.pos+l]}return this.pos+=n,this.len-=n,n},__class__:c_,__properties__:t(Xs.prototype.__properties__,{set_position:"set_position"})}),(e["haxe.io.Output"]=Ys).__name__="haxe.io.Output",Ys.prototype={flush:function(){},close:function(){},__class__:Ys},function(){this.b=new __}),p_=((e["haxe.io.BytesOutput"]=d_).__name__="haxe.io.BytesOutput",d_.__super__=Ys,d_.prototype=t(Ys.prototype,{writeBytes:function(t,e,n){return this.b.addBytes(t,e,n),n},getBytes:function(){return this.b.getBytes()},__class__:d_}),function(){}),f_=((e["haxe.io.Eof"]=p_).__name__="haxe.io.Eof",p_.prototype={toString:function(){return"Eof"},__class__:p_},d["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:l},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:l},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:l},Custom:((c=function(t){return{_hx_index:3,e:t,__enum__:"haxe.io.Error",toString:l}})._hx_name="Custom",c.__params__=["e"],c)}),g_=(f_.__constructs__=[f_.Blocked,f_.Overflow,f_.OutsideBounds,f_.Custom],f_.__empty_constructs__=[f_.Blocked,f_.Overflow,f_.OutsideBounds],function(){}),m_=((e["haxe.io.FPHelper"]=g_).__name__="haxe.io.FPHelper",g_.i32ToFloat=function(t){return g_.helper.setInt32(0,t,!0),g_.helper.getFloat32(0,!0)},g_.floatToI32=function(t){return g_.helper.setFloat32(0,t,!0),g_.helper.getInt32(0,!0)},g_.i64ToDouble=function(t,e){return g_.helper.setInt32(0,t,!0),g_.helper.setInt32(4,e,!0),g_.helper.getFloat64(0,!0)},function(t){switch(t){case".":case"..":return this.dir=t,void(this.file="")}var e=t.lastIndexOf("/"),n=t.lastIndexOf("\\"),n=(e<n?(this.dir=Jn.substr(t,0,n),t=Jn.substr(t,n+1,null),this.backslash=!0):n<e?(this.dir=Jn.substr(t,0,e),t=Jn.substr(t,e+1,null)):this.dir=null,t.lastIndexOf("."));-1!=n?(this.ext=Jn.substr(t,n+1,null),this.file=Jn.substr(t,0,n)):(this.ext=null,this.file=t)}),A_=((e["haxe.io.Path"]=m_).__name__="haxe.io.Path",m_.directory=function(t){t=new m_(t);return null==t.dir?"":t.dir},m_.extension=function(t){t=new m_(t);return null==t.ext?"":t.ext},m_.withExtension=function(t,e){t=new m_(t);return t.ext=e,t.toString()},m_.join=function(t){for(var e=[],n=0;n<t.length;){var s=t[n];++n,null!=s&&""!=s&&e.push(s)}if(0==e.length)return"";for(var i=e[0],n=1,a=e.length;n<a;)i=m_.addTrailingSlash(i),i+=e[n++];return m_.normalize(i)},m_.normalize=function(t){if("/"==(t=t.split("\\").join("/")))return"/";for(var e=[],n=0,s=t.split("/");n<s.length;){var i=s[n];++n,".."==i&&0<e.length&&".."!=e[e.length-1]?e.pop():""==i?(0<e.length||47==Jn.cca(t,0))&&e.push(i):"."!=i&&e.push(i)}for(var a="",r=!1,l=!1,o=0,h=e.join("/");o<h.length;){var u=h,_=o++,c=u.charCodeAt(_),d=(c=55296<=c&&c<=56319?c-55232<<10|1023&u.charCodeAt(1+_):c,65536<=c&&++o,c);switch(d){case 47:r?(r=!1,l&&(a+="/",l=!1),a+=String.fromCodePoint(d)):l=!0;break;case 58:a+=":",r=!0;break;default:r=!1,l&&(a+="/",l=!1),a+=String.fromCodePoint(d)}}return a},m_.addTrailingSlash=function(t){var e,n;return 0==t.length?"/":(e=t.lastIndexOf("/"))<(n=t.lastIndexOf("\\"))?n!=t.length-1?t+"\\":t:e!=t.length-1?t+"/":t},m_.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:m_},function(t){this.current=0,this.array=t}),C=((e["haxe.iterators.ArrayIterator"]=A_).__name__="haxe.iterators.ArrayIterator",A_.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:A_},d["haxe.macro.Binop"]={__ename__:!0,__constructs__:null,OpAdd:{_hx_name:"OpAdd",_hx_index:0,__enum__:"haxe.macro.Binop",toString:l},OpMult:{_hx_name:"OpMult",_hx_index:1,__enum__:"haxe.macro.Binop",toString:l},OpDiv:{_hx_name:"OpDiv",_hx_index:2,__enum__:"haxe.macro.Binop",toString:l},OpSub:{_hx_name:"OpSub",_hx_index:3,__enum__:"haxe.macro.Binop",toString:l},OpAssign:{_hx_name:"OpAssign",_hx_index:4,__enum__:"haxe.macro.Binop",toString:l},OpEq:{_hx_name:"OpEq",_hx_index:5,__enum__:"haxe.macro.Binop",toString:l},OpNotEq:{_hx_name:"OpNotEq",_hx_index:6,__enum__:"haxe.macro.Binop",toString:l},OpGt:{_hx_name:"OpGt",_hx_index:7,__enum__:"haxe.macro.Binop",toString:l},OpGte:{_hx_name:"OpGte",_hx_index:8,__enum__:"haxe.macro.Binop",toString:l},OpLt:{_hx_name:"OpLt",_hx_index:9,__enum__:"haxe.macro.Binop",toString:l},OpLte:{_hx_name:"OpLte",_hx_index:10,__enum__:"haxe.macro.Binop",toString:l},OpAnd:{_hx_name:"OpAnd",_hx_index:11,__enum__:"haxe.macro.Binop",toString:l},OpOr:{_hx_name:"OpOr",_hx_index:12,__enum__:"haxe.macro.Binop",toString:l},OpXor:{_hx_name:"OpXor",_hx_index:13,__enum__:"haxe.macro.Binop",toString:l},OpBoolAnd:{_hx_name:"OpBoolAnd",_hx_index:14,__enum__:"haxe.macro.Binop",toString:l},OpBoolOr:{_hx_name:"OpBoolOr",_hx_index:15,__enum__:"haxe.macro.Binop",toString:l},OpShl:{_hx_name:"OpShl",_hx_index:16,__enum__:"haxe.macro.Binop",toString:l},OpShr:{_hx_name:"OpShr",_hx_index:17,__enum__:"haxe.macro.Binop",toString:l},OpUShr:{_hx_name:"OpUShr",_hx_index:18,__enum__:"haxe.macro.Binop",toString:l},OpMod:{_hx_name:"OpMod",_hx_index:19,__enum__:"haxe.macro.Binop",toString:l},OpAssignOp:((c=function(t){return{_hx_index:20,op:t,__enum__:"haxe.macro.Binop",toString:l}})._hx_name="OpAssignOp",c.__params__=["op"],c),OpInterval:{_hx_name:"OpInterval",_hx_index:21,__enum__:"haxe.macro.Binop",toString:l},OpArrow:{_hx_name:"OpArrow",_hx_index:22,__enum__:"haxe.macro.Binop",toString:l},OpIn:{_hx_name:"OpIn",_hx_index:23,__enum__:"haxe.macro.Binop",toString:l},OpNullCoal:{_hx_name:"OpNullCoal",_hx_index:24,__enum__:"haxe.macro.Binop",toString:l}}),s=(C.__constructs__=[C.OpAdd,C.OpMult,C.OpDiv,C.OpSub,C.OpAssign,C.OpEq,C.OpNotEq,C.OpGt,C.OpGte,C.OpLt,C.OpLte,C.OpAnd,C.OpOr,C.OpXor,C.OpBoolAnd,C.OpBoolOr,C.OpShl,C.OpShr,C.OpUShr,C.OpMod,C.OpAssignOp,C.OpInterval,C.OpArrow,C.OpIn,C.OpNullCoal],C.__empty_constructs__=[C.OpAdd,C.OpMult,C.OpDiv,C.OpSub,C.OpAssign,C.OpEq,C.OpNotEq,C.OpGt,C.OpGte,C.OpLt,C.OpLte,C.OpAnd,C.OpOr,C.OpXor,C.OpBoolAnd,C.OpBoolOr,C.OpShl,C.OpShr,C.OpUShr,C.OpMod,C.OpInterval,C.OpArrow,C.OpIn,C.OpNullCoal],d["haxe.macro.Unop"]={__ename__:!0,__constructs__:null,OpIncrement:{_hx_name:"OpIncrement",_hx_index:0,__enum__:"haxe.macro.Unop",toString:l},OpDecrement:{_hx_name:"OpDecrement",_hx_index:1,__enum__:"haxe.macro.Unop",toString:l},OpNot:{_hx_name:"OpNot",_hx_index:2,__enum__:"haxe.macro.Unop",toString:l},OpNeg:{_hx_name:"OpNeg",_hx_index:3,__enum__:"haxe.macro.Unop",toString:l},OpNegBits:{_hx_name:"OpNegBits",_hx_index:4,__enum__:"haxe.macro.Unop",toString:l},OpSpread:{_hx_name:"OpSpread",_hx_index:5,__enum__:"haxe.macro.Unop",toString:l}}),x_=(s.__constructs__=[s.OpIncrement,s.OpDecrement,s.OpNot,s.OpNeg,s.OpNegBits,s.OpSpread],s.__empty_constructs__=[s.OpIncrement,s.OpDecrement,s.OpNot,s.OpNeg,s.OpNegBits,s.OpSpread],{}),b_=(x_.resolve=function(t,e){var n,s=t.elementsNamed(e).next();if(null==s){if(t.nodeType==_t.Document)n="Document";else{if(t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));n=t.nodeName}throw tr.thrown(n+" is missing element "+e)}if(s.nodeType!=_t.Document&&s.nodeType!=_t.Element)throw tr.thrown("Invalid nodeType "+(null==s.nodeType?"null":Qr.toString(s.nodeType)));return s},{}),y_=(b_.resolve=function(t,e){if(t.nodeType==_t.Document)throw tr.thrown("Cannot access document attribute "+e);var n=t.get(e);if(null!=n)return n;if(t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));throw tr.thrown(t.nodeName+" is missing attribute "+e)},{}),w_=(y_.resolve=function(t,e){return t.elementsNamed(e).hasNext()},(e["haxe.xml.XmlParserException"]=Ws).__name__="haxe.xml.XmlParserException",Ws.prototype={toString:function(){return er.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Ws},function(){}),v_=((e["haxe.xml.Parser"]=w_).__name__="haxe.xml.Parser",w_.parse=function(t,e){null==e&&(e=!1);var n=_t.createDocument();return w_.doParse(t,e,0,n),n},w_.doParse=function(t,e,n,s){null==n&&(n=0);for(var i=null,a=1,r=1,l=null,o=0,h=0,u=0,_=new w,c=1,d=-1;n<t.length;){var p,f,g,m=t.charCodeAt(n);switch(a){case 0:switch(m){case 9:case 10:case 13:case 32:break;default:a=r;continue}break;case 1:if(60!=m){o=n,a=13;continue}a=0,r=2;break;case 2:switch(m){case 33:if(91==t.charCodeAt(n+1)){if(n+=2,"CDATA["!=Jn.substr(t,n,6).toUpperCase())throw tr.thrown(new Ws("Expected <![CDATA[",t,n));a=17,o=(n+=5)+1}else if(68==t.charCodeAt(n+1)||100==t.charCodeAt(n+1)){if("OCTYPE"!=Jn.substr(t,n+2,6).toUpperCase())throw tr.thrown(new Ws("Expected <!DOCTYPE",t,n));a=16,o=(n+=8)+1}else{if(45!=t.charCodeAt(n+1)||45!=t.charCodeAt(n+2))throw tr.thrown(new Ws("Expected \x3c!--",t,n));a=15,o=(n+=2)+1}break;case 47:if(null==s)throw tr.thrown(new Ws("Expected node name",t,n));o=n+1,a=0,r=10;break;case 63:a=14,o=n;break;default:a=3,o=n;continue}break;case 3:if(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)break;if(n==o)throw tr.thrown(new Ws("Expected node name",t,n));i=_t.createElement(Jn.substr(t,o,n-o)),s.addChild(i),++h,a=0,r=4;continue;case 4:switch(m){case 47:a=11;break;case 62:a=9;break;default:a=5,o=n;continue}break;case 5:if(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)break;if(o==n)throw tr.thrown(new Ws("Expected attribute name",t,n));if(l=Jn.substr(t,o,n-o),i.exists(l))throw tr.thrown(new Ws("Duplicate attribute ["+l+"]",t,n));a=0,r=6;continue;case 6:if(61!=m)throw tr.thrown(new Ws("Expected =",t,n));a=0,r=7;break;case 7:switch(m){case 34:case 39:_=new w,a=8,o=n+1,d=m;break;default:throw tr.thrown(new Ws('Expected "',t,n))}break;case 8:switch(m){case 38:var A=n-o;_.b+=null==A?Jn.substr(t,o,null):Jn.substr(t,o,A),a=18,c=8,o=n+1;break;case 60:case 62:if(e)throw tr.thrown(new Ws("Invalid unescaped "+String.fromCodePoint(m)+" in attribute value",t,n));m==d&&(_.b+=null==(p=n-o)?Jn.substr(t,o,null):Jn.substr(t,o,p),p=_.b,_=new w,i.set(l,p),a=0,r=4);break;default:m==d&&(_.b+=null==(p=n-o)?Jn.substr(t,o,null):Jn.substr(t,o,p),f=_.b,_=new w,i.set(l,f),a=0,r=4)}break;case 9:o=n=w_.doParse(t,e,n,i),a=1;break;case 10:if(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)break;if(o==n)throw tr.thrown(new Ws("Expected node name",t,n));var x=Jn.substr(t,o,n-o);if(null==s||0!=s.nodeType)throw tr.thrown(new Ws("Unexpected </"+x+">, tag is not open",t,n));if(s.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":Qr.toString(s.nodeType)));if(x!=s.nodeName){if(s.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":Qr.toString(s.nodeType)));throw tr.thrown(new Ws("Expected </"+s.nodeName+">",t,n))}a=0,r=12;continue;case 11:if(62!=m)throw tr.thrown(new Ws("Expected >",t,n));a=1;break;case 12:if(62==m)return 0==h&&s.addChild(_t.createPCData("")),n;throw tr.thrown(new Ws("Expected >",t,n));case 13:60==m?(_.b+=null==(x=n-o)?Jn.substr(t,o,null):Jn.substr(t,o,x),g=_t.createPCData(_.b),_=new w,s.addChild(g),++h,a=0,r=2):38==m&&(_.b+=null==(g=n-o)?Jn.substr(t,o,null):Jn.substr(t,o,g),a=18,c=13,o=n+1);break;case 14:63==m&&62==t.charCodeAt(n+1)&&(++n,s.addChild(_t.createProcessingInstruction(Jn.substr(t,o+1,n-o-2))),++h,a=1);break;case 15:45==m&&45==t.charCodeAt(n+1)&&62==t.charCodeAt(n+2)&&(s.addChild(_t.createComment(Jn.substr(t,o,n-o))),++h,n+=2,a=1);break;case 16:91==m?++u:93==m?--u:62==m&&0==u&&(s.addChild(_t.createDocType(Jn.substr(t,o,n-o))),++h,a=1);break;case 17:93==m&&93==t.charCodeAt(n+1)&&62==t.charCodeAt(n+2)&&(s.addChild(_t.createCData(Jn.substr(t,o,n-o))),++h,n+=2,a=1);break;case 18:if(59==m){var b=Jn.substr(t,o,n-o);if(35==b.charCodeAt(0)){var y=120==b.charCodeAt(1)?Ja.parseInt("0"+Jn.substr(b,1,b.length-1)):Ja.parseInt(Jn.substr(b,1,b.length-1));_.b+=String.fromCodePoint(y)}else if(Object.prototype.hasOwnProperty.call(w_.escapes.h,b))_.b+=Ja.string(w_.escapes.h[b]);else{if(e)throw tr.thrown(new Ws("Undefined entity: "+b,t,n));_.b+=Ja.string("&"+b+";")}o=n+1,a=c}else if(!(97<=m&&m<=122||65<=m&&m<=90||48<=m&&m<=57||58==m||46==m||95==m||45==m)&&35!=m){if(e)throw tr.thrown(new Ws("Invalid character in entity: "+String.fromCodePoint(m),t,n));_.b+=String.fromCodePoint(38);y=n-o;_.b+=null==y?Jn.substr(t,o,null):Jn.substr(t,o,y),o=--n+1,a=c}}++n}if(1==a&&(o=n,a=13),13==a){if(0==s.nodeType){if(s.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":Qr.toString(s.nodeType)));throw tr.thrown(new Ws("Unclosed node <"+s.nodeName+">",t,n))}n==o&&0!=h||(_.b+=null==(A=n-o)?Jn.substr(t,o,null):Jn.substr(t,o,A),s.addChild(_t.createPCData(_.b)),++h)}else{if(e||18!=a||13!=c)throw tr.thrown(new Ws("Unexpected end",t,n));_.b+=String.fromCodePoint(38),_.b+=null==(A=n-o)?Jn.substr(t,o,null):Jn.substr(t,o,A),s.addChild(_t.createPCData(_.b)),++h}return n},function(t){this.output=new w,this.pretty=t}),C_=((e["haxe.xml.Printer"]=v_).__name__="haxe.xml.Printer",v_.print=function(t,e){e=new v_(e=null==e?!1:e);return e.writeNode(t,""),e.output.b},v_.prototype={writeNode:function(t,e){switch(t.nodeType){case 0:if(this.output.b+=Ja.string(e+"<"),t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));this.output.b+=Ja.string(t.nodeName);for(var n=t.attributes();n.hasNext();){var s=n.next(),i=(this.output.b+=Ja.string(" "+s+'="'),ut.htmlEscape(t.get(s),!0));this.output.b+=Ja.string(i),this.output.b+='"'}if(this.hasChildren(t)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),t.nodeType!=_t.Document&&t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));for(var a=t.children,r=0;r<a.length;)this.writeNode(a[r++],this.pretty?e+"\t":e);if(this.output.b+=Ja.string(e+"</"),t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));this.output.b+=Ja.string(t.nodeName),this.output.b+=">"}else this.output.b+="/>";this.pretty&&(this.output.b+="\n");break;case 1:if(t.nodeType==_t.Document||t.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));var l=t.nodeValue;0!=l.length&&(i=e+ut.htmlEscape(l),this.output.b+=Ja.string(i),this.pretty)&&(this.output.b+="\n");break;case 2:if(this.output.b+=Ja.string(e+"<![CDATA["),t.nodeType==_t.Document||t.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));this.output.b+=Ja.string(t.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(t.nodeType==_t.Document||t.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));var l=t.nodeValue,o=new RegExp("[\n\r\t]+","g".split("u").join(""));l="\x3c!--"+(l=l.replace(o,""))+"--\x3e",this.output.b+=null==e?"null":""+e,this.output.b+=Ja.string(ut.trim(l)),this.pretty&&(this.output.b+="\n");break;case 4:if(t.nodeType==_t.Document||t.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));this.output.b+=Ja.string("<!DOCTYPE "+t.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(t.nodeType==_t.Document||t.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));this.output.b+=Ja.string("<?"+t.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(t.nodeType!=_t.Document&&t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));for(a=t.children,r=0;r<a.length;)this.writeNode(a[r++],e)}},hasChildren:function(t){if(t.nodeType!=_t.Document&&t.nodeType!=_t.Element)throw tr.thrown("Bad node type, expected Element or Document but found "+(null==t.nodeType?"null":Qr.toString(t.nodeType)));for(var e=t.children,n=0;n<e.length;){var s=e[n++];switch(s.nodeType){case 0:case 1:return!0;case 2:case 3:if(s.nodeType==_t.Document||s.nodeType==_t.Element)throw tr.thrown("Bad node type, unexpected "+(null==s.nodeType?"null":Qr.toString(s.nodeType)));if(0!=ut.ltrim(s.nodeValue).length)return!0}}return!1},__class__:v_},d["haxe.zip.Huffman"]={__ename__:!0,__constructs__:null,Found:((c=function(t){return{_hx_index:0,i:t,__enum__:"haxe.zip.Huffman",toString:l}})._hx_name="Found",c.__params__=["i"],c),NeedBit:((c=function(t,e){return{_hx_index:1,left:t,right:e,__enum__:"haxe.zip.Huffman",toString:l}})._hx_name="NeedBit",c.__params__=["left","right"],c),NeedBits:((c=function(t,e){return{_hx_index:2,n:t,table:e,__enum__:"haxe.zip.Huffman",toString:l}})._hx_name="NeedBits",c.__params__=["n","table"],c)}),M_=(C_.__constructs__=[C_.Found,C_.NeedBit,C_.NeedBits],C_.__empty_constructs__=[],(e["haxe.zip.HuffTools"]=js).__name__="haxe.zip.HuffTools",js.prototype={treeDepth:function(t){switch(t._hx_index){case 0:return 0;case 1:var e=this.treeDepth(t.left),n=this.treeDepth(t.right);return 1+(e<n?e:n);case 2:throw tr.thrown("assert")}},treeCompress:function(t){var e=this.treeDepth(t);if(0==e)return t;if(1==e){if(1==t._hx_index)return C_.NeedBit(this.treeCompress(t.left),this.treeCompress(t.right));throw tr.thrown("assert")}for(var n=1<<e,s=[],i=0;i<n;)++i,s.push(C_.Found(-1));return this.treeWalk(s,0,0,e,t),C_.NeedBits(e,s)},treeWalk:function(t,e,n,s,i){1==i._hx_index&&0<s?(this.treeWalk(t,e,n+1,s-1,i.left),this.treeWalk(t,e|1<<n,n+1,s-1,i.right)):t[e]=this.treeCompress(i)},treeMake:function(t,e,n,s){if(e<s)throw tr.thrown("Invalid huffman");var i=n<<5|s;return t.h.hasOwnProperty(i)?C_.Found(t.h[i]):C_.NeedBit(this.treeMake(t,e,n<<=1,++s),this.treeMake(t,e,1|n,s))},make:function(t,e,n,s){if(1==n)return C_.NeedBit(C_.Found(0),C_.Found(0));var i=[],a=[];if(32<s)throw tr.thrown("Invalid huffman");for(var r=0;r<s;)++r,i.push(0),a.push(0);for(r=0;r<n;){var l=t[r+++e];if(s<=l)throw tr.thrown("Invalid huffman");i[l]++}for(var o=0,r=1,h=s-1;r<h;){o=o+i[_=r++]<<1;a[_]=o}for(var u=new fl,r=0;r<n;){var _,c,d=t[(_=r++)+e];0!=d&&(a[d-1]=(c=a[d-1])+1,u.h[c<<5|d]=_)}return this.treeCompress(C_.NeedBit(this.treeMake(u,s,0,1),this.treeMake(u,s,1,1)))},__class__:js},(e["haxe.zip._InflateImpl.Window"]=Hs).__name__="haxe.zip._InflateImpl.Window",Hs.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var t=new Rt(new ArrayBuffer(65536));this.pos-=32768,t.blit(0,this.buffer,32768,this.pos),this.buffer=t},addBytes:function(t,e,n){65536<this.pos+n&&this.slide(),this.buffer.blit(this.pos,t,e,n),this.pos+=n},addByte:function(t){65536==this.pos&&this.slide(),this.buffer.b[this.pos]=t,this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){return null!=this.crc&&this.crc.update(this.buffer,0,this.pos),this.crc},__class__:Hs},d["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:null,Head:{_hx_name:"Head",_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",toString:l},Block:{_hx_name:"Block",_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:l},CData:{_hx_name:"CData",_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:l},Flat:{_hx_name:"Flat",_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:l},Crc:{_hx_name:"Crc",_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:l},Dist:{_hx_name:"Dist",_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:l},DistOne:{_hx_name:"DistOne",_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:l},Done:{_hx_name:"Done",_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:l}}),S_=(M_.__constructs__=[M_.Head,M_.Block,M_.CData,M_.Flat,M_.Crc,M_.Dist,M_.DistOne,M_.Done],M_.__empty_constructs__=[M_.Head,M_.Block,M_.CData,M_.Flat,M_.Crc,M_.Dist,M_.DistOne,M_.Done],(e["haxe.zip.InflateImpl"]=Zs).__name__="haxe.zip.InflateImpl",Zs.run=function(t,e){null==e&&(e=65536);for(var n=new Rt(new ArrayBuffer(e)),s=new __,i=new Zs(t);;){var a=i.readBytes(n,0,e);if(s.addBytes(n,0,a),a<e)break}return s.getBytes()},Zs.prototype={buildFixedHuffman:function(){if(null==Zs.FIXED_HUFFMAN){for(var t=[],e=0;e<288;){var n=e++;t.push(n<=143?8:n<=255?9:n<=279?7:8)}Zs.FIXED_HUFFMAN=this.htools.make(t,0,288,10)}return Zs.FIXED_HUFFMAN},readBytes:function(t,e,n){if(this.needed=n,this.outpos=e,this.output=t,0<n)for(;this.inflateLoop(););return n-this.needed},getBits:function(t){for(;this.nbits<t;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var e=this.bits&(1<<t)-1;return this.nbits-=t,this.bits>>=t,e},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var t=1==(1&this.bits);return this.nbits--,this.bits>>=1,t},getRevBits:function(t){return 0==t?0:this.getBit()?1<<t-1|this.getRevBits(t-1):this.getRevBits(t-1)},resetBits:function(){this.bits=0,this.nbits=0},addBytes:function(t,e,n){this.window.addBytes(t,e,n),this.output.blit(this.outpos,t,e,n),this.needed-=n,this.outpos+=n},addByte:function(t){this.window.addByte(t),this.output.b[this.outpos]=t,this.needed--,this.outpos++},addDistOne:function(t){for(var e=this.window.getLastChar(),n=0;n<t;)++n,this.addByte(e)},addDist:function(t,e){this.addBytes(this.window.buffer,this.window.pos-t,e)},applyHuffman:function(t){switch(t._hx_index){case 0:return t.i;case 1:return this.applyHuffman(this.getBit()?t.right:t.left);case 2:return this.applyHuffman(t.table[this.getBits(t.n)])}},inflateLengths:function(t,e){for(var n=0,s=0;n<e;){var i=this.applyHuffman(this.huffman);switch(i){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:t[n]=s=i,++n;break;case 16:var a=n+3+this.getBits(2);if(e<a)throw tr.thrown("Invalid data");for(;n<a;)t[n]=s,++n;break;case 17:if(e<(n+=3+this.getBits(3)))throw tr.thrown("Invalid data");break;case 18:if(e<(n+=11+this.getBits(7)))throw tr.thrown("Invalid data");break;default:throw tr.thrown("Invalid data")}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var t=this.input.readByte();if(8!=(15&t))throw tr.thrown("Invalid data");var e=this.input.readByte();if(((t<<8)+e)%31!=0)throw tr.thrown("Invalid data");if(0!=(32&e))throw tr.thrown("Unsupported dictionary");return this.state=M_.Block,!0;case 1:switch(this.isFinal=this.getBit(),this.getBits(2)){case 0:if(this.len=this.input.readUInt16(),this.input.readUInt16()!=65535-this.len)throw tr.thrown("Invalid data");this.state=M_.Flat;var n=this.inflateLoop();return this.resetBits(),n;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=M_.CData,!0;case 2:for(var n=this.getBits(5)+257,s=this.getBits(5)+1,i=this.getBits(4)+4,a=0;a<i;)this.lengths[Zs.CODE_LENGTHS_POS[a++]]=this.getBits(3);for(a=i;a<19;)this.lengths[Zs.CODE_LENGTHS_POS[a++]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);for(var r=[],a=0,l=n+s;a<l;)++a,r.push(0);return this.inflateLengths(r,n+s),this.huffdist=this.htools.make(r,n,s,16),this.huffman=this.htools.make(r,0,n,16),this.state=M_.CData,!0;default:throw tr.thrown("Invalid data")}break;case 2:t=this.applyHuffman(this.huffman);if(t<256)return this.addByte(t),0<this.needed;if(256==t)this.state=this.isFinal?M_.Crc:M_.Block;else{e=Zs.LEN_EXTRA_BITS_TBL[t-=257];if(-1==e)throw tr.thrown("Invalid data");this.len=Zs.LEN_BASE_VAL_TBL[t]+this.getBits(e);t=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);if(-1==(e=Zs.DIST_EXTRA_BITS_TBL[t]))throw tr.thrown("Invalid data");if(this.dist=Zs.DIST_BASE_VAL_TBL[t]+this.getBits(e),this.dist>this.window.available())throw tr.thrown("Invalid data");this.state=1==this.dist?M_.DistOne:M_.Dist}return!0;case 3:var o=this.len<this.needed?this.len:this.needed,t=this.input.read(o);return this.len-=o,this.addBytes(t,0,o),0==this.len&&(this.state=this.isFinal?M_.Crc:M_.Block),0<this.needed;case 4:e=this.window.checksum();if(null==e);else if(!e.equals(Vs.read(this.input)))throw tr.thrown("Invalid CRC");return this.state=M_.Done,!0;case 5:for(;0<this.len&&0<this.needed;){var h=this.len<this.dist?this.len:this.dist,o=this.needed<h?this.needed:h;this.addDist(this.dist,o),this.len-=o}return 0==this.len&&(this.state=M_.CData),0<this.needed;case 6:o=this.len<this.needed?this.len:this.needed;return this.addDistOne(o),this.len-=o,0==this.len&&(this.state=M_.CData),0<this.needed;case 7:return!1}},__class__:Zs},function(){}),k_=((e["haxe.zip.Uncompress"]=S_).__name__="haxe.zip.Uncompress",S_.run=function(t,e){return Zs.run(new c_(t),e)},(e["hex.collection.IHashMap"]=qs).__name__="hex.collection.IHashMap",qs.__isInterface__=!0,(e["hex.collection.ArrayMap"]=Ks).__name__="hex.collection.ArrayMap",Ks.__interfaces__=[qs],Ks.prototype={containsKey:function(t){if(null!=t)return-1!=R_.indexOf(this._k,t);throw tr.thrown(new z_("Key can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:48,className:"hex.collection.ArrayMap",methodName:"containsKey"}))},put:function(t,e){var n=null;if(null==t)throw tr.thrown(new z_("Key can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:136,className:"hex.collection.ArrayMap",methodName:"put"}));if(null==e)throw tr.thrown(new z_("Value can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:140,className:"hex.collection.ArrayMap",methodName:"put"}));var s=R_.indexOf(this._k,t);return-1==s?(this._k.push(t),this._v.push(e)):(n=this._v[s],this._v[s]=e),n},remove:function(t){var e=null;if(null==t)throw tr.thrown(new z_("Key can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:206,className:"hex.collection.ArrayMap",methodName:"remove"}));t=R_.indexOf(this._k,t);return-1==t?null:(t==this._k.length-1?(this._k.pop(),e=this._v.pop()):(e=this._v[t],this._k[t]=this._k.pop(),this._v[t]=this._v.pop()),e)},__class__:Ks},{}),B_=(k_.ofClassRef=function(t){return t.__name__},(e["hex.di.IBasicInjector"]=Js).__name__="hex.di.IBasicInjector",Js.__isInterface__=!0,Js.prototype={__class__:Js},(e["hex.di.IDependencyInjector"]=$s).__name__="hex.di.IDependencyInjector",$s.__isInterface__=!0,$s.__interfaces__=[Js],$s.prototype={__class__:$s},(e["hex.di.IInjectorListener"]=ti).__name__="hex.di.IInjectorListener",ti.__isInterface__=!0,ti.prototype={__class__:ti},function(){this.trigger=new T_,this._mapping=new N,this._processedMapping=new N,this._managedObjects=new Ks}),I_=((e["hex.di.Injector"]=B_).__name__="hex.di.Injector",B_.__interfaces__=[$s],B_.prototype={mapToValue:function(t,e,n){t=this.map(t,n);t.provider=new P_(e,t._injector)},getInstance:function(t,e,n){var s=I_.makeId(k_.ofClassRef(t),e),i=this._mapping.h[s];if(null!=i)return i.getResult(n);if(null!=this._parentInjector)return this._parentInjector.getInstance(t,e,n);throw tr.thrown(new D_("Injector is missing a mapping to get instance with type '"+t.__name__+"'. Target dependency: '"+s+"'",{fileName:"hex/di/Injector.hx",lineNumber:88,className:"hex.di.Injector",methodName:"getInstance"}))},getInstanceWithClassName:function(t,e,n,s){null==s&&(s=!0);var i=I_.makeId(t,e),a=this._mapping.h[i];if(null!=a)return a.getResult(n);if(null!=this._parentInjector)return this._parentInjector.getInstanceWithClassName(t,e,n);if(s)throw a="Injector is missing a mapping to get instance with type '"+(null==t?"null":t)+"'",a+=null!=n?" in class '"+n.__name__+"'.":".",tr.thrown(new D_(a+=" Target dependency: '"+i+"'",{fileName:"hex/di/Injector.hx",lineNumber:111,className:"hex.di.Injector",methodName:"getInstanceWithClassName"}));return null},instantiateUnmapped:function(e){var n,s;try{n=e.__ac(W(this,this.getInstanceWithClassName))}catch(t){if((s=tr.caught(t).unwrap())instanceof D_)throw tr.thrown(s);n=b.createInstance(e,[])}try{null!=n.acceptInjector&&this._applyInjection(n,e)}catch(t){if((s=tr.caught(t).unwrap())instanceof D_)throw tr.thrown(s)}return n},unmap:function(t,e){var t=I_.makeId(k_.ofClassRef(t),e),e=this._mapping.h[t];null!=e&&(e.provider.destroy(),e=this._mapping,Object.prototype.hasOwnProperty.call(e.h,t))&&delete e.h[t]},destroyInstance:function(t){this._managedObjects.containsKey(t)&&(this._managedObjects.remove(t),t.__ap())},map:function(t,e){t=I_.makeId(k_.ofClassRef(t),e);return null!=this._mapping.h[t]?this._mapping.h[t]:this._createMapping(t)},_createMapping:function(t){if(this._processedMapping.h[t])throw tr.thrown(new F_("Mapping named '"+t+"' is already processing",{fileName:"hex/di/Injector.hx",lineNumber:342,className:"hex.di.Injector",methodName:"_createMapping"}));this._processedMapping.h[t]=!0;var e=new E_(this,t),n=(this._mapping.h[t]=e,this._processedMapping);return Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t],e},_applyInjection:function(t,e){this.trigger.onPreConstruct(this,t,e),t.acceptInjector(this);try{null!=t.__ap&&this._managedObjects.put(t,t)}catch(t){}this.trigger.onPostConstruct(this,t,e)},__class__:B_},{}),T_=(I_.makeId=function(t,e){return t+"|"+(null==e?"":e)},(e["hex.event.ITrigger"]=ei).__name__="hex.event.ITrigger",ei.__isInterface__=!0,function(){this._inputs=[]}),F_=((e["hex.di.__Trigger_Class_For__IInjectorListener"]=T_).__name__="hex.di.__Trigger_Class_For__IInjectorListener",T_.__interfaces__=[ei,ti],T_.prototype={onPreConstruct:function(t,e,n){for(var s=this._inputs.slice(),i=0;i<s.length;)s[i++].onPreConstruct(t,e,n)},onPostConstruct:function(t,e,n){for(var s=this._inputs.slice(),i=0;i<s.length;)s[i++].onPostConstruct(t,e,n)},__class__:T_},(e["tink.core.TypedError"]=ni).__name__="tink.core.TypedError",ni.prototype={printPos:function(){return this.pos.className+"."+this.pos.methodName+":"+this.pos.lineNumber},toString:function(){var t="Error#"+this.code+": "+this.message;return null!=this.pos&&(t+=" @ "+this.printPos()),t},__class__:ni},function(t,e){ni.call(this,this.code,t,this.pos)}),D_=((e["hex.di.error.InjectorException"]=F_).__name__="hex.di.error.InjectorException",F_.__super__=ni,F_.prototype=t(ni.prototype,{__class__:F_}),function(t,e){F_.call(this,t,e)}),E_=((e["hex.di.error.MissingMappingException"]=D_).__name__="hex.di.error.MissingMappingException",D_.__super__=F_,D_.prototype=t(F_.prototype,{__class__:D_}),function(t,e){this._injector=t,this._mappingID=e}),P_=((e["hex.di.mapping.InjectionMapping"]=E_).__name__="hex.di.mapping.InjectionMapping",E_.prototype={getResult:function(t){if(null==this.provider)throw tr.thrown(new z_("can't retrieve result, mapping with id '"+this._mappingID+"' has no provider",{fileName:"hex/di/mapping/InjectionMapping.hx",lineNumber:34,className:"hex.di.mapping.InjectionMapping",methodName:"getResult"}));return this.provider.getResult(this._injector,t)},__class__:E_},(e["hex.di.provider.IDependencyProvider"]=si).__name__="hex.di.provider.IDependencyProvider",si.__isInterface__=!0,si.prototype={__class__:si},function(t,e){this._value=t,this._injector=e}),z_=((e["hex.di.provider.ValueProvider"]=P_).__name__="hex.di.provider.ValueProvider",P_.__interfaces__=[si],P_.prototype={getResult:function(t,e){return this._value},destroy:function(){this._injector.destroyInstance(this._value),this._injector=null,this._value=null},__class__:P_},function(t,e){ni.call(this,this.code,t,this.pos)}),R_=((e["hex.error.NullPointerException"]=z_).__name__="hex.error.NullPointerException",z_.__super__=ni,z_.prototype=t(ni.prototype,{__class__:z_}),function(){}),V_=((e["hex.util.ArrayUtil"]=R_).__name__="hex.util.ArrayUtil",R_.indexOf=function(t,e){return t.indexOf(e)},function(t,e){var n;-101==t&&-102==e||((n=window.document.createElement("canvas")).width=t,n.height=e,this.ctx=n.getContext("2d",null))}),Q_=((e["hxd.BitmapData"]=V_).__name__="hxd.BitmapData",V_.prototype={setPixel:function(t,e,n){var s,i=this.lockImage;null!=i?(s=t+e*i.width<<2,i.data[s]=n>>16&255,i.data[1|s]=n>>8&255,i.data[2|s]=255&n,i.data[3|s]=n>>>24&255):(null==(i=this.pixel)&&(i=this.ctx.createImageData(1,1),this.pixel=i),i.data[0]=n>>16&255,i.data[1]=n>>8&255,i.data[2]=255&n,i.data[3]=n>>>24&255,this.ctx.putImageData(i,t,e))},getPixels:function(){var t=this.ctx.canvas.width,e=this.ctx.canvas.height,n=this.ctx.getImageData(0,0,t,e).data.buffer;return new Y_(t,e,Rt.ofData(n),v.RGBA)},__class__:V_},function(){this.map=new fl;for(var t=0;t<94;){var e=t++;this.map.h[65281+e]=33+e}for(t=192;t<199;)this.map.h[t++]=65;for(t=224;t<231;)this.map.h[t++]=97;for(t=200;t<204;)this.map.h[t++]=69;for(t=232;t<236;)this.map.h[t++]=101;for(t=204;t<208;)this.map.h[t++]=73;for(t=236;t<240;)this.map.h[t++]=105;for(t=210;t<215;)this.map.h[t++]=79;for(t=242;t<247;)this.map.h[t++]=111;for(t=217;t<221;)this.map.h[t++]=85;for(t=249;t<253;)this.map.h[t++]=117;this.map.h[199]=67,this.map.h[231]=67,this.map.h[208]=68,this.map.h[222]=100,this.map.h[209]=78,this.map.h[241]=110,this.map.h[221]=89,this.map.h[253]=121,this.map.h[255]=121,this.map.h[8364]=69,this.map.h[12288]=32,this.map.h[160]=32,this.map.h[171]=34,this.map.h[187]=34,this.map.h[8220]=34,this.map.h[8221]=34,this.map.h[8222]=34,this.map.h[8216]=39,this.map.h[8217]=39,this.map.h[180]=39,this.map.h[8216]=39,this.map.h[8249]=60,this.map.h[8250]=62,this.map.h[8211]=45}),O_=((e["hxd.Charset"]=Q_).__name__="hxd.Charset",Q_.inst=null,Q_.getDefault=function(){return null==Q_.inst&&(Q_.inst=new Q_),Q_.inst},Q_.prototype={resolveChar:function(t,e){for(var n=t;null!=n;){var s=e.h[n];if(null!=s)return s;n=this.map.h[n]}return null},isCJK:function(t){return 11904<=t&&t<=42191||63744<=t&&t<=64255||131072<=t&&t<=262141},isSpace:function(t){return 32==t||12288==t},isBreakChar:function(t){return!!this.isSpace(t)||this.isCJK(t)},isComplementChar:function(t){return Q_.complementChars.h.hasOwnProperty(t)},__class__:Q_},d["hxd.Cursor"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"hxd.Cursor",toString:l},Button:{_hx_name:"Button",_hx_index:1,__enum__:"hxd.Cursor",toString:l},Move:{_hx_name:"Move",_hx_index:2,__enum__:"hxd.Cursor",toString:l},TextInput:{_hx_name:"TextInput",_hx_index:3,__enum__:"hxd.Cursor",toString:l},Hide:{_hx_name:"Hide",_hx_index:4,__enum__:"hxd.Cursor",toString:l},Custom:((c=function(t){return{_hx_index:5,custom:t,__enum__:"hxd.Cursor",toString:l}})._hx_name="Custom",c.__params__=["custom"],c),Callback:((c=function(t){return{_hx_index:6,f:t,__enum__:"hxd.Cursor",toString:l}})._hx_name="Callback",c.__params__=["f"],c)}),L_=(O_.__constructs__=[O_.Default,O_.Button,O_.Move,O_.TextInput,O_.Hide,O_.Custom,O_.Callback],O_.__empty_constructs__=[O_.Default,O_.Button,O_.Move,O_.TextInput,O_.Hide],(e["hxd.CustomCursor"]=ii).__name__="hxd.CustomCursor",ii.prototype={reset:function(){this.frameTime=0,this.frameIndex=0},update:function(t){for(var e=this.frameTime+t,n=this.frameDelay,s=this.frameIndex;n<=e;)e-=n,++s;return this.frameTime=e,s>=this.frames.length&&(s%=this.frames.length),s!=this.frameIndex?this.frameIndex=s:-1},__class__:ii},d["hxd.EventKind"]={__ename__:!0,__constructs__:null,EPush:{_hx_name:"EPush",_hx_index:0,__enum__:"hxd.EventKind",toString:l},ERelease:{_hx_name:"ERelease",_hx_index:1,__enum__:"hxd.EventKind",toString:l},EMove:{_hx_name:"EMove",_hx_index:2,__enum__:"hxd.EventKind",toString:l},EOver:{_hx_name:"EOver",_hx_index:3,__enum__:"hxd.EventKind",toString:l},EOut:{_hx_name:"EOut",_hx_index:4,__enum__:"hxd.EventKind",toString:l},EWheel:{_hx_name:"EWheel",_hx_index:5,__enum__:"hxd.EventKind",toString:l},EFocus:{_hx_name:"EFocus",_hx_index:6,__enum__:"hxd.EventKind",toString:l},EFocusLost:{_hx_name:"EFocusLost",_hx_index:7,__enum__:"hxd.EventKind",toString:l},EKeyDown:{_hx_name:"EKeyDown",_hx_index:8,__enum__:"hxd.EventKind",toString:l},EKeyUp:{_hx_name:"EKeyUp",_hx_index:9,__enum__:"hxd.EventKind",toString:l},EReleaseOutside:{_hx_name:"EReleaseOutside",_hx_index:10,__enum__:"hxd.EventKind",toString:l},ETextInput:{_hx_name:"ETextInput",_hx_index:11,__enum__:"hxd.EventKind",toString:l},ECheck:{_hx_name:"ECheck",_hx_index:12,__enum__:"hxd.EventKind",toString:l}}),U_=(L_.__constructs__=[L_.EPush,L_.ERelease,L_.EMove,L_.EOver,L_.EOut,L_.EWheel,L_.EFocus,L_.EFocusLost,L_.EKeyDown,L_.EKeyUp,L_.EReleaseOutside,L_.ETextInput,L_.ECheck],L_.__empty_constructs__=[L_.EPush,L_.ERelease,L_.EMove,L_.EOver,L_.EOut,L_.EWheel,L_.EFocus,L_.EFocusLost,L_.EKeyDown,L_.EKeyUp,L_.EReleaseOutside,L_.ETextInput,L_.ECheck],(e["hxd.Event"]=ai).__name__="hxd.Event",ai.prototype={__class__:ai},{}),N_=(U_._new=function(t){return{pos:t,array:new Float32Array(new ArrayBuffer(t<<2))}},function(){}),G_=((e["hxd.Key"]=N_).__name__="hxd.Key",N_.initialize=function(){N_.initDone&&N_.dispose(),N_.initDone=!0,N_.keyPressed=[],J_.getInstance().addEventTarget(N_.onEvent)},N_.dispose=function(){N_.initDone&&(J_.getInstance().removeEventTarget(N_.onEvent),N_.initDone=!1,N_.keyPressed=[])},N_.onEvent=function(t){switch(t.kind._hx_index){case 0:t.button<5&&(N_.keyPressed[t.button]=K_.frameCount+2);break;case 1:t.button<5&&(N_.keyPressed[t.button]=-(K_.frameCount+2));break;case 5:N_.keyPressed[0<t.wheelDelta?6:5]=K_.frameCount+2;break;case 8:!N_.ALLOW_KEY_REPEAT&&0<N_.keyPressed[t.keyCode]||(N_.keyPressed[t.keyCode]=K_.frameCount+2);break;case 9:N_.keyPressed[t.keyCode]=-(K_.frameCount+2);break;case 10:N_.keyPressed=[]}},d["hxd.Flags"]={__ename__:!0,__constructs__:null,ReadOnly:{_hx_name:"ReadOnly",_hx_index:0,__enum__:"hxd.Flags",toString:l},AlphaPremultiplied:{_hx_name:"AlphaPremultiplied",_hx_index:1,__enum__:"hxd.Flags",toString:l},FlipY:{_hx_name:"FlipY",_hx_index:2,__enum__:"hxd.Flags",toString:l}}),X_=(G_.__constructs__=[G_.ReadOnly,G_.AlphaPremultiplied,G_.FlipY],G_.__empty_constructs__=[G_.ReadOnly,G_.AlphaPremultiplied,G_.FlipY],{}),Y_=(X_.fromPixels=function(t){return t.convert(v.ARGB),t.setFlip(!1),t},function(t,e,n,s,i){null==i&&(i=0),this.width=t,this.height=e,this.bytes=n,this.set_innerFormat(s),this.offset=i,this.flags=0}),W_=((e["hxd.Pixels"]=Y_).__name__="hxd.Pixels",Y_.calcDataSize=function(t,e,n){return 24==n._hx_index?(e+3>>2<<2)*Y_.calcStride(t,n):e*Y_.calcStride(t,n)},Y_.calcStride=function(t,e){var n;switch(e._hx_index){case 3:case 20:n=8;break;case 4:n=16;break;case 5:n=1;break;case 6:case 18:n=2;break;case 7:n=4;break;case 8:n=2;break;case 9:n=4;break;case 10:n=8;break;case 11:n=3;break;case 12:case 19:n=6;break;case 13:n=12;break;case 0:case 1:case 2:case 14:case 15:case 16:case 17:n=4;break;case 21:case 22:case 23:n=1;break;case 24:var s=e.v,i=t+3>>2;return 1==s||4==s?i<<1:i<<2}return t*n},Y_.alloc=function(t,e,n){return new Y_(t,e,new Rt(new ArrayBuffer(Y_.calcDataSize(t,e,n))),n)},Y_.prototype={set_innerFormat:function(t){return this.innerFormat=t,this.stride=Y_.calcStride(this.width,t),this.dataSize=Y_.calcDataSize(this.width,this.height,t),this.bytesPerPixel=Y_.calcStride(1,t),t},invalidFormat:function(){throw tr.thrown("Unsupported format for this operation : "+Ja.string(this.innerFormat))},copyInner:function(){var t=this.bytes;this.bytes=new Rt(new ArrayBuffer(this.dataSize)),this.bytes.blit(0,t,this.offset,this.dataSize),this.offset=0,this.flags&=-2},setFlip:function(t){if(0!=(4&this.flags)!=(t=null!=t&&t)){0!=(1&this.flags)&&this.copyInner(),t?this.flags|=4:this.flags&=-5,this.stride%4!=0&&this.invalidFormat();for(var e=0,n=this.height>>1;e<n;)for(var s=e++,i=s*this.stride+this.offset,a=(this.height-1-s)*this.stride+this.offset,r=0,l=this.stride>>2;r<l;){++r;var o=this.bytes.getInt32(i),t=this.bytes.getInt32(a);this.bytes.setInt32(i,t),this.bytes.setInt32(a,o),i+=4,a+=4}}},convert:function(t){if(this.innerFormat!=t&&!b.enumEq(this.innerFormat,t)){0!=(1&this.flags)&&this.copyInner();var e=this.bytes.b,n=this.innerFormat;switch(n._hx_index){case 0:switch(t._hx_index){case 1:for(var s=0,i=this.width*this.height;s<i;){var a=e[d=(s++<<2)+this.offset],r=e[d+1],l=e[d+2],o=e[d+3];e[d++]=o,e[d++]=l,e[d++]=r,e[d]=a}break;case 2:for(s=0,i=this.width*this.height;s<i;){a=e[d=(s++<<2)+this.offset];e[d]=e[d+1],e[d+1]=e[d+2],e[d+2]=e[d+3],e[d+3]=a}break;default:throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t))}break;case 1:switch(t._hx_index){case 0:for(s=0,i=this.width*this.height;s<i;){a=e[d=(s++<<2)+this.offset],r=e[d+1],l=e[d+2],o=e[d+3];e[d++]=o,e[d++]=l,e[d++]=r,e[d]=a}break;case 2:for(s=0,i=this.width*this.height;s<i;){o=e[d=(s++<<2)+this.offset];e[d]=e[d+2],e[d+2]=o}break;default:throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t))}break;case 2:switch(t._hx_index){case 0:for(s=0,i=this.width*this.height;s<i;){a=e[(d=(s++<<2)+this.offset)+3];e[d+3]=e[d+2],e[d+2]=e[d+1],e[d+1]=e[d],e[d]=a}break;case 1:for(s=0,i=this.width*this.height;s<i;){o=e[d=(s++<<2)+this.offset];e[d]=e[d+2],e[d+2]=o}break;case 5:for(var h=(u=new Rt(new ArrayBuffer(this.width*this.height))).b,s=0,i=this.width*this.height;s<i;)h[_=s++]=e[_<<2];this.bytes=u;break;default:throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t))}break;case 4:if(7!=t._hx_index)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));for(var u=new Rt(new ArrayBuffer(this.height*this.width*4)),s=0,i=this.width*this.height;s<i;){var _=s++;u.setFloat(_<<2,this.bytes.getFloat(_<<4))}this.bytes=u;break;case 7:switch(t._hx_index){case 1:case 2:for(var c=this.bytes,d=0,s=0,i=this.width*this.height;s<i;){++s;var p=255*c.getFloat(d)|0;p<0?p=0:255<p&&(p=255),e[d++]=p,e[d++]=p,e[d++]=p,e[d++]=255}break;default:throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t))}break;case 18:if(7!=t._hx_index)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));for(u=new Rt(new ArrayBuffer(this.width*this.height*4)),c=this.bytes,s=0,i=this.width*this.height;s<i;){_=s++;u.setFloat(_<<2,c.getUInt16(_<<1)/65535)}this.bytes=u;break;case 21:if(21!=t._hx_index)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));if(n.v!=t.v)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));break;case 22:if(22!=t._hx_index)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));if(n.v!=t.v)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));break;case 23:if(23!=t._hx_index)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));if(n.v!=t.v)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));break;case 24:if(24!=t._hx_index)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));if(n.v!=t.v)throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t));break;default:throw tr.thrown("Cannot convert from "+Ja.string(this.innerFormat)+" to "+Ja.string(t))}this.set_innerFormat(t)}},getPixel:function(t,e){var n=(t+(0!=(4&this.flags)?this.height-1-e:e)*this.width)*this.bytesPerPixel+this.offset;switch(this.innerFormat._hx_index){case 0:return(s=this.bytes.getInt32(n))>>>24|s>>8&65280|s<<8&16711680|s<<24;case 1:return this.bytes.getInt32(n);case 2:return-16711936&(s=this.bytes.getInt32(n))|s<<16&16711680|s>>16&255;case 5:return this.bytes.b[n];case 8:var s=this.bytes.getUInt16(n);return(255&s)<<8|s>>8;default:return this.invalidFormat(),0}},setPixel:function(t,e,n){var s=(t+(0!=(4&this.flags)?this.height-1-e:e)*this.width)*this.bytesPerPixel+this.offset;switch(0!=(1&this.flags)&&this.copyInner(),this.innerFormat._hx_index){case 0:this.bytes.setInt32(s,n>>>24|n>>8&65280|n<<8&16711680|n<<24);break;case 1:this.bytes.setInt32(s,n);break;case 2:this.bytes.setInt32(s,-16711936&n|n<<16&16711680|n>>16&255);break;case 5:this.bytes.b[s]=n;break;case 8:this.bytes.setUInt16(s,(255&n)<<8|(65280&n)>>8);break;default:this.invalidFormat()}},dispose:function(){this.bytes=null},toString:function(){return"Pixels("+this.width+"x"+this.height+" "+Ja.string(this.innerFormat)+")"},__class__:Y_,__properties__:{set_innerFormat:"set_innerFormat"}},function(t){this.init(t)}),j_=((e["hxd.Rand"]=W_).__name__="hxd.Rand",W_.hash=function(t,e){null==e&&(e=5381);t=Yu._mul(t,-862048943),t=Yu._mul(t<<15|t>>>17,461845907),e=Yu._mul(e=(e^=t)<<13|e>>>19,5)+-430675100|0;return e=Yu._mul(e^=e>>16,-2048144789),(e=Yu._mul(e^=e>>13,-1028477387))^e>>16},W_.prototype={init:function(t){this.seed=t,this.seed2=W_.hash(t),0==this.seed&&(this.seed=1),0==this.seed2&&(this.seed2=1)},__class__:W_},function(){}),H_=((e["hxd.Res"]=j_).__name__="hxd.Res",j_.__properties__={set_loader:"set_loader",get_loader:"get_loader"},j_.get_loader=function(){var t=Cc.currentInstance;if(null==t)throw tr.thrown("Resource loader not initialized: call to hxd.Res.initXXX() required");return t},j_.set_loader=function(t){return Cc.currentInstance=t},function(t){this.defaultCursor=O_.Default,this.mouseCheckMove=!0,this.enablePhysicalMouse=!0,this.isOut=!1,this.onOver=new ai(L_.EOver),this.onOut=new ai(L_.EOut),this.checkPos=new ai(L_.ECheck),this.focusLost=new ai(L_.EFocusLost),this.lastTouch=0,this.mouseY=-1,this.mouseX=-1,this.overIndex=-1,this.scenes=[],this.pendingEvents=[],this.pushList=[],this.overList=[],this.overCandidates=[],null==t&&(t=J_.getInstance()),(this.window=t).addEventTarget(W(this,this.onEvent))}),Z_=((e["hxd.SceneEvents"]=H_).__name__="hxd.SceneEvents",H_.prototype={onRemove:function(t){var e;t==this.currentFocus&&(this.currentFocus=null),0<=this.overIndex?0<=(e=this.overList.indexOf(t))&&(Jn.remove(this.overList,t),e<this.overIndex)&&this.overIndex--:(Jn.remove(this.overList,t),this.selectCursor()),Jn.remove(this.pushList,t)},addScene:function(t,e){t.setEvents(this),null==e?this.scenes.push(t):this.scenes.splice(e,0,t)},blur:function(){null==this.currentFocus||(this.focusLost.cancel=!1,this.currentFocus.handleEvent(this.focusLost),this.focusLost.cancel)||(this.currentFocus=null)},checkFocus:function(){var t;null!=this.currentFocus&&(null==(t=this.currentFocus.getInteractiveScene())?this.currentFocus=null:t.isInteractiveVisible(this.currentFocus)||this.blur())},emitEvent:function(t){var e=t.relX,n=t.relY,s=0,i=!1,a=!1,r=!1,l=!1,o=!1,h=!1;switch(this.overIndex=0,t.kind._hx_index){case 0:l=o=!0;break;case 1:l=!0;break;case 5:case 8:case 9:case 11:if(null==this.currentFocus||(t.relX=t.relY=0,this.currentFocus.handleEvent(t),t.relX=e,t.relY=n,t.propagate))break;return;case 2:case 12:r=a=!0}for(var u=0,_=this.scenes;u<_.length;){for(var c=_[u],d=(++u,null);;){if(null==(f=c.handleEvent(t,d))){t.relX=e,t.relY=n;break}if(a){if(r){var p=this.overList.indexOf(f);if(-1==p)this.overCandidates.length==s?this.overCandidates[s]={i:f,s:c,x:t.relX,y:t.relY,z:t.relZ}:((m=this.overCandidates[s]).i=f,m.s=c,m.x=t.relX,m.y=t.relY,m.z=t.relZ),++s,this.overList.splice(this.overIndex++,0,f),h=!0;else{if(p<this.overIndex){for(;this.overList[p]=this.overList[p+1],++p<this.overIndex;);this.overList[this.overIndex]=f,h=!0}else if(p>this.overIndex){for(;this.overList[p]=this.overList[p-1],--p>this.overIndex;);this.overList[this.overIndex]=f,h=!0}this.overIndex++}r=t.propagate}}else l&&(t.kind==L_.EPush?this.pushList.push(f):Jn.remove(this.pushList,f)),o&&f==this.currentFocus&&(o=!1);if(t.relX=e,t.relY=n,!t.propagate){i=!0;break}d=f,t.propagate=!1}if(i)break}if(o&&null!=this.currentFocus&&this.blur(),a){if(this.overIndex<this.overList.length){for(;this.overIndex<this.overList.length;)this.overList.pop().handleEvent(this.onOut);h=!0}if(0!=s){var f=0,g=this.onOver;do{var m=this.overCandidates[f++]}while(g.relX=m.x,g.relY=m.y,g.relZ=m.z,m.s.isInteractiveVisible(m.i)?m.i.handleEvent(g):Jn.remove(this.overList,m.i),m.i=null,m.s=null,f<s)}}if(this.overIndex=-1,h&&this.selectCursor(),i||t==this.checkPos||(t.kind==L_.EPush?this.pushList.push(null):t.kind==L_.ERelease&&Jn.remove(this.pushList,null),this.dispatchListeners(t)),t.kind==L_.ERelease&&0<this.pushList.length){for(u=0,_=this.pushList;u<_.length;){f=_[u];++u,null==f?(t.kind=L_.EReleaseOutside,this.dispatchListeners(t),t.kind=L_.ERelease):null!=(c=f.getInteractiveScene())&&(t.kind=L_.EReleaseOutside,c.dispatchEvent(t,f),t.kind=L_.ERelease,t.relX=e,t.relY=n)}this.pushList=[]}},checkEvents:function(){var t=this.pendingEvents,e=!this.mouseCheckMove,n=null==this.currentFocus;if(0<t.length){this.pendingEvents=[];for(var s=0;s<t.length;){var i=t[s],a=(++s,i.relX),r=i.relY;switch(i.kind._hx_index){case 0:case 1:this.mouseX=i.relX,this.mouseY=i.relY,this.lastTouch=i.touchId;break;case 2:e=!0,this.mouseX=i.relX,this.mouseY=i.relY,this.lastTouch=i.touchId;break;case 3:this.isOut=!1,this.selectCursor();continue;case 4:if(this.isOut=!0,0<this.overList.length){for(var l=this.overList.length-1;0<=l;)this.onOut.cancel=!1,this.overList[l].handleEvent(this.onOut),Jn.remove(this.overList,this.overList[l]),--l;this.selectCursor()}continue;case 5:case 8:case 9:case 11:n||(n=!0,this.checkFocus())}(null==this.currentDrag||null!=this.currentDrag.ref&&this.currentDrag.ref!=i.touchId||(i.propagate=!0,i.cancel=!1,this.currentDrag.f(i),i.relX=a,i.relY=r,i.propagate))&&this.emitEvent(i)}}n||this.checkFocus(),e||this.isOut||null!=this.currentDrag||(this.checkPos.relX=this.mouseX,this.checkPos.relY=this.mouseY,this.checkPos.touchId=this.lastTouch,this.checkPos.cancel=!1,this.checkPos.propagate=!1,this.emitEvent(this.checkPos))},updateCursor:function(t){-1!=this.overList.indexOf(t)&&this.selectCursor()},selectCursor:function(){for(var t=this.defaultCursor,e=0,n=this.overList;e<n.length;){var s=n[e];if(++e,null!=s.cursor){t=s.cursor;break}}6==t._hx_index?t.f():tc.setCursor(t)},onEvent:function(t){!this.enablePhysicalMouse&&t.kind==L_.EMove||this.pendingEvents.push(t)},dispatchListeners:function(t){for(var e=t.relX,n=t.relY,s=(t.propagate=!0,0),i=this.scenes;s<i.length;){var a=i[s++];if(t.cancel=!1,a.dispatchListeners(t),t.relX=e,t.relY=n,!t.propagate)break}},__class__:H_},d["hxd.Platform"]={__ename__:!0,__constructs__:null,IOS:{_hx_name:"IOS",_hx_index:0,__enum__:"hxd.Platform",toString:l},Android:{_hx_name:"Android",_hx_index:1,__enum__:"hxd.Platform",toString:l},WebGL:{_hx_name:"WebGL",_hx_index:2,__enum__:"hxd.Platform",toString:l},PC:{_hx_name:"PC",_hx_index:3,__enum__:"hxd.Platform",toString:l},Console:{_hx_name:"Console",_hx_index:4,__enum__:"hxd.Platform",toString:l},FlashPlayer:{_hx_name:"FlashPlayer",_hx_index:5,__enum__:"hxd.Platform",toString:l}}),q_=(Z_.__constructs__=[Z_.IOS,Z_.Android,Z_.WebGL,Z_.PC,Z_.Console,Z_.FlashPlayer],Z_.__empty_constructs__=[Z_.IOS,Z_.Android,Z_.WebGL,Z_.PC,Z_.Console,Z_.FlashPlayer],d["hxd.SystemValue"]={__ename__:!0,__constructs__:null,IsTouch:{_hx_name:"IsTouch",_hx_index:0,__enum__:"hxd.SystemValue",toString:l},IsWindowed:{_hx_name:"IsWindowed",_hx_index:1,__enum__:"hxd.SystemValue",toString:l},IsMobile:{_hx_name:"IsMobile",_hx_index:2,__enum__:"hxd.SystemValue",toString:l}}),K_=(q_.__constructs__=[q_.IsTouch,q_.IsWindowed,q_.IsMobile],q_.__empty_constructs__=[q_.IsTouch,q_.IsWindowed,q_.IsMobile],function(){}),J_=((e["hxd.Timer"]=K_).__name__="hxd.Timer",K_.update=function(){K_.frameCount++;var t=Jn.now()/1e3;K_.elapsedTime=t-K_.lastTimeStamp,K_.lastTimeStamp=t,K_.elapsedTime<K_.maxDeltaTime?(t=K_.elapsedTime,K_.currentDT=t+K_.smoothFactor*(K_.currentDT-t)):K_.elapsedTime=1/K_.wantedFPS,K_.dt=K_.currentDT},K_.skip=function(){K_.lastTimeStamp=Jn.now()/1e3},function(t,e){this.canLockMouse=!0,this.discardMouseUp=-1,this.discardMouseCaptureEvent=!0,this.useScreenPixels=$_.get_supported(),this.curMouseY=0,this.curMouseX=0,this.mouseMode=fc.Absolute;var n=this,s=null!=t;if(this.eventTargets=new i_,this.resizeEvents=new i_,$_.get_supported()){if(null==t){if(null==(t=window.document.getElementById("webgl")))throw tr.thrown("Missing canvas #webgl");"1"==t.getAttribute("globalEvents")&&(e=!0)}this.canvas=t,this.propagateKeyEvents=e;var i=t.getAttribute("propagateKeyEvents"),a=(null!=i&&(this.propagateKeyEvents="0"!=i&&"false"!=i),this.focused=e,this.element=e?window:t,this.canvasPos=t.getBoundingClientRect(),(s?t:window).addEventListener("mousemove",W(this,this.onMouseMove)),this.element.addEventListener("mousedown",W(this,this.onMouseDown)),this.element.addEventListener("mouseup",W(this,this.onMouseUp)),this.element.addEventListener("mouseleave",W(this,this.onMouseLeave)),this.element.addEventListener("wheel",W(this,this.onMouseWheel)),this.element.addEventListener("touchstart",W(this,this.onTouchStart)),this.element.addEventListener("touchmove",W(this,this.onTouchMove)),this.element.addEventListener("touchend",W(this,this.onTouchEnd)),this.element.addEventListener("keydown",W(this,this.onKeyDown)),this.element.addEventListener("keyup",W(this,this.onKeyUp)),this.element.addEventListener("keypress",W(this,this.onKeyPress)),this),r=!1,l=(this.element.addEventListener("blur",function(){a.onFocus(r)}),this),o=!0;this.element.addEventListener("focus",function(){l.onFocus(o)}),null!=window.ResizeObserver&&(this.observer=new ResizeObserver(function(t){n.checkResize()}),this.observer.observe(t)),window.addEventListener("resize",W(this,this.checkResize)),window.document.addEventListener("pointerlockchange",W(this,this.onPointerLockChange)),t.addEventListener("contextmenu",function(t){return t.stopPropagation(),2==t.button&&t.preventDefault(),!1}),e?(t.addEventListener("mousedown",function(t){n.onMouseDown(t),t.stopPropagation(),t.preventDefault()}),this.element.addEventListener("contextmenu",function(t){return t.stopPropagation(),t.preventDefault(),!1})):(null==t.getAttribute("tabindex")&&t.setAttribute("tabindex","1"),t.style.outline="none"),this.curW=this.get_width(),this.curH=this.get_height()}else this.canvasPos={width:0,top:0,left:0,height:0}}),$_=((e["hxd.Window"]=J_).__name__="hxd.Window",J_.getInstance=function(){return null==J_.inst&&(J_.inst=new J_),J_.inst},J_.prototype={checkResize:function(){this.canvasPos=this.canvas.getBoundingClientRect();var t=this.get_width(),e=this.get_height();this.curW==t&&this.curH==e||(this.curW=t,this.curH=e,this.onResize(null))},onMouseModeChange:function(t,e){return null},event:function(t){for(var e=this.eventTargets.h;null!=e;){var n=e.item,e=e.next;n(t)}},addEventTarget:function(t){this.eventTargets.add(t)},removeEventTarget:function(t){for(var e=this.eventTargets.h;null!=e;){var n=e.item,e=e.next;if(n==t){this.eventTargets.remove(n);break}}},addResizeEvent:function(t){this.resizeEvents.push(t)},removeResizeEvent:function(t){for(var e=this.resizeEvents.h;null!=e;){var n=e.item,e=e.next;if(n==t){this.resizeEvents.remove(t);break}}},onResize:function(t){for(var e=this.resizeEvents.h;null!=e;){var n=e.item,e=e.next;n()}},setCurrent:function(){J_.inst=this},getPixelRatio:function(){return this.useScreenPixels?window.devicePixelRatio:1},get_width:function(){return Math.round(this.canvasPos.width*this.getPixelRatio())},get_height:function(){return Math.round(this.canvasPos.height*this.getPixelRatio())},get_mouseX:function(){return Math.round((this.curMouseX-this.canvasPos.left)*this.getPixelRatio())},get_mouseY:function(){return Math.round((this.curMouseY-this.canvasPos.top)*this.getPixelRatio())},set_mouseMode:function(t){var e;return b.enumEq(t,this.mouseMode)?t:(null!=(e=this.onMouseModeChange(this.mouseMode,t))&&(t=e),e=this.pointerLockTarget=null!=this.canvas?this.canvas:window.document.documentElement,t==fc.Absolute?e.ownerDocument.pointerLockElement==e&&e.ownerDocument.exitPointerLock():this.canLockMouse&&e.ownerDocument.pointerLockElement!=e&&e.requestPointerLock(),this.mouseMode=t)},onPointerLockChange:function(t){this.mouseMode!=fc.Absolute&&this.pointerLockTarget.ownerDocument.pointerLockElement!=this.pointerLockTarget&&(this.canLockMouse=!1,this.set_mouseMode(fc.Absolute),this.canLockMouse=!0)},onMouseDown:function(t){if(this.mouseMode==fc.Absolute)t.clientX==this.curMouseX&&t.clientY==this.curMouseY||this.onMouseMove(t);else{if(this.pointerLockTarget.ownerDocument.pointerLockElement!=this.pointerLockTarget&&(this.pointerLockTarget.requestPointerLock(),this.discardMouseCaptureEvent))return void(this.discardMouseUp=t.button);0==t.movementX&&0==t.movementY||this.onMouseMove(t)}var e,n=new ai(L_.EPush,this.get_mouseX(),this.get_mouseY()),s=t.button;switch(s){case 1:e=2;break;case 2:e=1;break;default:e=s}n.button=e,this.event(n)},onMouseUp:function(t){if(this.discardMouseUp==t.button)this.discardMouseUp=-1;else{(this.mouseMode==fc.Absolute?t.clientX!=this.curMouseX||t.clientY!=this.curMouseY:0!=t.movementX||0!=t.movementY)&&this.onMouseMove(t);var e,n=new ai(L_.ERelease,this.get_mouseX(),this.get_mouseY()),s=t.button;switch(s){case 1:e=2;break;case 2:e=1;break;default:e=s}n.button=e,this.event(n)}},onMouseLeave:function(t){var e,n=new ai(L_.EReleaseOutside,this.get_mouseX(),this.get_mouseY()),s=t.button;switch(s){case 1:e=2;break;case 2:e=1;break;default:e=s}n.button=e,this.event(n)},onMouseMove:function(t){var e,n=this.mouseMode;switch(n._hx_index){case 0:this.curMouseX=t.clientX,this.curMouseY=t.clientY,this.event(new ai(L_.EMove,this.get_mouseX(),this.get_mouseY()));break;case 1:this.pointerLockTarget.ownerDocument.pointerLockElement==this.pointerLockTarget&&(e=new ai(L_.EMove,t.movementX,t.movementY),n.callback(e),!e.cancel&&e.propagate)&&(e.cancel=!1,e.propagate=!1,e.relX=this.curMouseX,e.relY=this.curMouseY,this.event(e));break;case 2:this.pointerLockTarget.ownerDocument.pointerLockElement==this.pointerLockTarget&&(this.curMouseX+=t.movementX,this.curMouseY+=t.movementY,this.event(new ai(L_.EMove,this.get_mouseX(),this.get_mouseY())))}},onMouseWheel:function(t){t.preventDefault();var e=new ai(L_.EWheel,this.get_mouseX(),this.get_mouseY());e.wheelDelta=t.deltaY/120,this.event(e)},onTouchStart:function(t){t.preventDefault();for(var e,n,s=0,i=t.changedTouches;s<i.length;){var a=i[s];++s,n=Math.round((a.clientX-this.canvasPos.left)*this.getPixelRatio()),e=Math.round((a.clientY-this.canvasPos.top)*this.getPixelRatio()),(n=new ai(L_.EPush,n,e)).touchId=a.identifier,this.event(n)}},onTouchMove:function(t){t.preventDefault();for(var e,n,s=0,i=t.changedTouches;s<i.length;){var a=i[s];++s,n=Math.round((a.clientX-this.canvasPos.left)*this.getPixelRatio()),e=Math.round((a.clientY-this.canvasPos.top)*this.getPixelRatio()),(n=new ai(L_.EMove,n,e)).touchId=a.identifier,this.event(n)}},onTouchEnd:function(t){t.preventDefault();for(var e,n,s=0,i=t.changedTouches;s<i.length;){var a=i[s];++s,n=Math.round((a.clientX-this.canvasPos.left)*this.getPixelRatio()),e=Math.round((a.clientY-this.canvasPos.top)*this.getPixelRatio()),(n=new ai(L_.ERelease,n,e)).touchId=a.identifier,this.event(n)}},onKeyUp:function(t){var e=new ai(L_.EKeyUp,this.get_mouseX(),this.get_mouseY());e.keyCode=t.keyCode,this.event(e),this.propagateKeyEvents||(t.preventDefault(),t.stopPropagation())},onKeyDown:function(t){var e=new ai(L_.EKeyDown,this.get_mouseX(),this.get_mouseY());if(e.keyCode=t.keyCode,this.event(e),!this.propagateKeyEvents){switch(e.keyCode){case 8:case 9:case 16:case 17:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:t.preventDefault()}t.stopPropagation()}},onKeyPress:function(t){var e=new ai(L_.ETextInput,this.get_mouseX(),this.get_mouseY());e.charCode=t.charCode,this.event(e),this.propagateKeyEvents||(t.preventDefault(),t.stopPropagation())},onFocus:function(t){this.event(new ai(t?L_.EFocus:L_.EFocusLost)),this.focused=t},set_displayMode:function(t){if($_.get_supported()){var e=window.document,n=e.documentElement;if(e.fullscreenElement==n==(t!=ec.Windowed))return ec.Windowed;t!=ec.Windowed?n.requestFullscreen():e.exitFullscreen()}return t},__class__:J_,__properties__:{set_displayMode:"set_displayMode",set_mouseMode:"set_mouseMode",get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",get_height:"get_height",get_width:"get_width"}},function(){}),tc=((e["js.Browser"]=$_).__name__="js.Browser",$_.__properties__={get_supported:"get_supported"},$_.get_supported=function(){return"undefined"!=typeof window&&void 0!==window.location&&"string"==typeof window.location.protocol},$_.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw tr.thrown("Unable to create XMLHttpRequest object.")},function(){}),ec=((e["hxd.System"]=tc).__name__="hxd.System",tc.__properties__={get_platform:"get_platform"},tc.loopFunc=null,tc.currentNativeCursor=null,tc.currentCustomCursor=null,tc.setLoop=function(t){tc.loopInit||(tc.loopInit=!0,tc.browserLoop()),tc.loopFunc=t},tc.browserLoop=function(){if(!$_.get_supported())throw tr.thrown("Cannot use browserLoop without Browser support nor defining nodejs + hxnodejs");var t=window,e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame;0<tc.fpsLimit?window.setTimeout(function(){return e(tc.browserLoop)},1e3/tc.fpsLimit):e(tc.browserLoop),null!=tc.loopFunc&&tc.loopFunc()},tc.start=function(t){t()},tc.setNativeCursor=function(t){if(null==tc.currentNativeCursor||!b.enumEq(t,tc.currentNativeCursor)){tc.currentNativeCursor=t,tc.currentCustomCursor=null;var e,n=J_.getInstance().canvas;if(null!=n){switch(t._hx_index){case 0:e="default";break;case 1:e="pointer";break;case 2:e="move";break;case 3:e="text";break;case 4:e="none";break;case 5:var s=t.custom;if(null==s.alloc){s.alloc=[];for(var i=0,a=s.frames;i<a.length;)s.alloc.push('url("'+a[i++].ctx.canvas.toDataURL("image/png")+'") '+s.offsetX+" "+s.offsetY+", default")}1<s.frames.length&&(tc.currentCustomCursor=s).reset(),e=s.alloc[s.frameIndex];break;case 6:throw tr.thrown("assert")}n.style.cursor=e}}},tc.getDefaultFrameRate=function(){return 60},tc.getValue=function(t){switch(t._hx_index){case 0:return tc.get_platform()==Z_.Android||tc.get_platform()==Z_.IOS;case 1:return!0;case 2:return tc.get_platform()==Z_.Android||tc.get_platform()==Z_.IOS}},tc.updateCursor=function(){var t,e;null!=tc.currentCustomCursor&&-1!=(t=tc.currentCustomCursor.update(K_.elapsedTime))&&null!=(e=J_.getInstance().canvas)&&(e.style.cursor=tc.currentCustomCursor.alloc[t])},tc.get_platform=function(){var t=x.navigator.userAgent.toLowerCase();return 0<=t.indexOf("android")?Z_.Android:0<=t.indexOf("ipad")||0<=t.indexOf("iphone")||0<=t.indexOf("ipod")?Z_.IOS:Z_.PC},d["hxd.DisplayMode"]={__ename__:!0,__constructs__:null,Windowed:{_hx_name:"Windowed",_hx_index:0,__enum__:"hxd.DisplayMode",toString:l},Borderless:{_hx_name:"Borderless",_hx_index:1,__enum__:"hxd.DisplayMode",toString:l},Fullscreen:{_hx_name:"Fullscreen",_hx_index:2,__enum__:"hxd.DisplayMode",toString:l},FullscreenResize:{_hx_name:"FullscreenResize",_hx_index:3,__enum__:"hxd.DisplayMode",toString:l}}),nc=(ec.__constructs__=[ec.Windowed,ec.Borderless,ec.Fullscreen,ec.FullscreenResize],ec.__empty_constructs__=[ec.Windowed,ec.Borderless,ec.Fullscreen,ec.FullscreenResize],(e["hxd.earcut.EarNode"]=ri).__name__="hxd.earcut.EarNode",ri.prototype={__class__:ri},function(){}),sc=((e["hxd.earcut.Earcut"]=nc).__name__="hxd.earcut.Earcut",nc.prototype={triangulate_h2d_GPoint:function(t,e){var n=null!=e&&0<e.length?e[0]:t.length;return n<3?[]:(n=this.setLinkedList_triangulate_T(t,0,n,!0),null!=e&&(n=this.eliminateHoles_triangulate_T(t,e,n)),this.triangulateNode(n,80<t.length))},eliminateHoles_triangulate_T:function(t,e,n){for(var s=[],i=0,a=e.length;i<a;){var r=i++,r=this.setLinkedList_eliminateHoles_T(t,e[r],r==e.length-1?t.length:e[1+r],!1);r==r.next&&(r.steiner=!0),s.push(this.getLeftmost(r))}s.sort(W(this,this.compareX));for(i=0;i<s.length;)this.eliminateHole(s[i++],n),n=this.filterPoints(n,n.next);return n},setLinkedList_eliminateHoles_T:function(t,e,n,s){for(var i=0,a=n-1,r=e;r<n;){var l=r++;i+=(t[a].x-t[l].x)*(t[l].y+t[a].y),a=l}null==(_=this.cache)?((_=new ri).allocNext=this.allocated,this.allocated=_):this.cache=_.next,_.i=-1,_.z=-1,_.x=0,_.y=0,_.next=null,_.prev=null,_.steiner=!1,_.prevZ=null,_.nextZ=null;var o=_,h=o;if(s==0<i)for(r=e;r<n;){var u=t[l=r++];null==(_=this.cache)?((_=new ri).allocNext=this.allocated,this.allocated=_):this.cache=_.next,_.i=l,_.z=-1,_.x=u.x,_.y=u.y,_.next=null,_.prev=o,_.steiner=!1,_.prevZ=null,(_.nextZ=null)!=o&&(o.next=_),o=_}else for(l=n-1;e<=l;){var _,u=t[l];null==(_=this.cache)?((_=new ri).allocNext=this.allocated,this.allocated=_):this.cache=_.next,_.i=l,_.z=-1,_.x=u.x,_.y=u.y,_.next=null,_.prev=o,_.steiner=!1,_.prevZ=null,(_.nextZ=null)!=o&&(o.next=_),o=_,--l}return o.next=h.next,o.next.prev=o},setLinkedList_triangulate_T:function(t,e,n,s){for(var i=0,a=n-1,r=e;r<n;){var l=r++;i+=(t[a].x-t[l].x)*(t[l].y+t[a].y),a=l}null==(_=this.cache)?((_=new ri).allocNext=this.allocated,this.allocated=_):this.cache=_.next,_.i=-1,_.z=-1,_.x=0,_.y=0,_.next=null,_.prev=null,_.steiner=!1,_.prevZ=null,_.nextZ=null;var o=_,h=o;if(s==0<i)for(r=e;r<n;){var u=t[l=r++];null==(_=this.cache)?((_=new ri).allocNext=this.allocated,this.allocated=_):this.cache=_.next,_.i=l,_.z=-1,_.x=u.x,_.y=u.y,_.next=null,_.prev=o,_.steiner=!1,_.prevZ=null,(_.nextZ=null)!=o&&(o.next=_),o=_}else for(l=n-1;e<=l;){var _,u=t[l];null==(_=this.cache)?((_=new ri).allocNext=this.allocated,this.allocated=_):this.cache=_.next,_.i=l,_.z=-1,_.x=u.x,_.y=u.y,_.next=null,_.prev=o,_.steiner=!1,_.prevZ=null,(_.nextZ=null)!=o&&(o.next=_),o=_,--l}return o.next=h.next,o.next.prev=o},triangulateNode:function(t,e){if(this.triangles=[],t=this.filterPoints(t),e&&null!=t){for(var n=t.x,s=(this.minX=n,t.y),i=(this.minY=s,t.next);i!=t;){var a=i.x,r=i.y;a<this.minX&&(this.minX=a),r<this.minY&&(this.minY=r),n<a&&(n=a),s<r&&(s=r),i=i.next}var e=n-this.minX,l=s-this.minY;this.size=e<l?l:e,this.hasSize=!0}else this.hasSize=!1;this.earcutLinked(t);var l=this.triangles,o=(this.triangles=null,this.allocated);if(null!=this.cache){for(;o!=this.cache;)o=o.allocNext;o=o.allocNext}for(;null!=o;)o.next=this.cache,o=(this.cache=o).allocNext;return l},eliminateHole:function(t,e){null!=(e=this.findHoleBridge(t,e))&&(e=this.splitPolygon(e,t),this.filterPoints(e,e.next))},findHoleBridge:function(t,e){var n,s=e,i=t.x,a=t.y,r=-1/0,l=null;do{}while(a<=s.y&&a>=s.next.y&&(n=s.x+(a-s.y)*(s.next.x-s.x)/(s.next.y-s.y))<=i&&r<n&&(r=n,l=s.x<s.next.x?s:s.next),(s=s.next)!=e);if(null==l)return null;for(var o,h,u,_,c,d,p=l,f=1/0,s=l.next;s!=p;)i>=s.x&&s.x>=l.x&&(_=a<l.y?i:r,d=l.x,h=l.y,0<=((c=a<l.y?r:i)-(o=s.x))*(a-(u=s.y))-(_-o)*(a-u))&&0<=(_-o)*(h-u)-(d-o)*(a-u)&&0<=(d-o)*(a-u)-(c-o)*(h-u)&&(((d=((_=a-s.y)<0?-_:_)/(i-s.x))<f||d==f&&s.x>l.x)&&(c=s.prev,o=s.next,(s.y-c.y)*(o.x-s.x)-(s.x-c.x)*(o.y-s.y)<0?(h=s.next,0<=(t.y-s.y)*(h.x-t.x)-(t.x-s.x)*(h.y-t.y)&&0<=((u=s.prev).y-s.y)*(t.x-u.x)-(u.x-s.x)*(t.y-u.y)):(_=s.prev,(t.y-s.y)*(_.x-t.x)-(t.x-s.x)*(_.y-t.y)<0||((c=s.next).y-s.y)*(t.x-c.x)-(c.x-s.x)*(t.y-c.y)<0)))&&(l=s,f=d),s=s.next;return l},getLeftmost:function(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!=t;);return n},compareX:function(t,e){return 0<t.x-e.x?1:-1},filterPoints:function(t,e){if(null==t)return t;null==e&&(e=t);var n=t;do{var s,i,a=!1;if(!n.steiner&&(s=n.next,n.x==s.x&&n.y==s.y||(s=n.prev,i=n.next,(n.y-s.y)*(i.x-n.x)-(n.x-s.x)*(i.y-n.y)==0))){if(n.next.prev=n.prev,n.prev.next=n.next,null!=n.prevZ&&(n.prevZ.nextZ=n.nextZ),null!=n.nextZ&&(n.nextZ.prevZ=n.prevZ),(n=e=n.prev)==n.next)return null;a=!0}else n=n.next}while(a||n!=e);return e},earcutLinked:function(t,e){if(null==e&&(e=0),null!=t){0==e&&this.hasSize&&this.indexCurve(t);for(var n,s,i=t;t.prev!=t.next;)if(n=t.prev,s=t.next,this.hasSize?this.isEarHashed(t):this.isEar(t))this.triangles.push(n.i),this.triangles.push(t.i),this.triangles.push(s.i),t.next.prev=t.prev,t.prev.next=t.next,null!=t.prevZ&&(t.prevZ.nextZ=t.nextZ),null!=t.nextZ&&(t.nextZ.prevZ=t.prevZ),t=s.next,i=s.next;else if((t=s)==i){switch(e){case 0:this.earcutLinked(this.filterPoints(s),1);break;case 1:t=this.cureLocalIntersections(s),this.earcutLinked(t,2);break;case 2:this.splitEarcut(s)}break}}},isEar:function(t){var e=t.prev,n=t.next;if(0<=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))return!1;for(var s=t.next.next;s!=t.prev;){var i=e.x,a=e.y,r=t.x,l=t.y,o=n.x,h=n.y,u=s.x,_=s.y;if(0<=(o-u)*(a-_)-(i-u)*(h-_)&&0<=(i-u)*(l-_)-(r-u)*(a-_)&&0<=(r-u)*(h-_)-(o-u)*(l-_)&&(i=s.prev,a=s.next,0<=(s.y-i.y)*(a.x-s.x)-(s.x-i.x)*(a.y-s.y)))return!1;s=s.next}return!0},isEarHashed:function(t){var e=t.prev,n=t.next;if(0<=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))return!1;for(var s,i,a,r,l,o,h,u,_,c,d=32767*((e.x<t.x?e.x<n.x?e:n:t.x<n.x?t:n).x-this.minX)/this.size|0,p=32767*((e.y<t.y?e.y<n.y?e:n:t.y<n.y?t:n).y-this.minY)/this.size|0,f=1431655765&((d=858993459&((d=252645135&((d=16711935&(d|d<<8))|d<<4))|d<<2))|d<<1)|(1431655765&((p=858993459&((p=252645135&((p=16711935&(p|p<<8))|p<<4))|p<<2))|p<<1))<<1,g=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*((e.x>t.x?e.x>n.x?e:n:t.x>n.x?t:n).x-this.minX)/this.size|0)|d<<8))|d<<4))|d<<2))|d<<1)|(1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*((e.y>t.y?e.y>n.y?e:n:t.y>n.y?t:n).y-this.minY)/this.size|0)|p<<8))|p<<4))|p<<2))|p<<1))<<1,m=t.nextZ;null!=m&&m.z<=g;){if(!!(m!=t.prev&&m!=t.next&&(s=e.x,i=e.y,a=t.x,r=t.y,l=n.x,o=n.y,0<=(l-(h=m.x))*(i-(u=m.y))-(s-h)*(o-u))&&0<=(s-h)*(r-u)-(a-h)*(i-u)&&0<=(a-h)*(o-u)-(l-h)*(r-u))&&(_=m.prev,c=m.next,0<=(m.y-_.y)*(c.x-m.x)-(m.x-_.x)*(c.y-m.y)))return!1;m=m.nextZ}for(m=t.prevZ;null!=m&&m.z>=f;){if(!!(m!=t.prev&&m!=t.next&&(s=e.x,i=e.y,a=t.x,r=t.y,l=n.x,o=n.y,0<=(l-(h=m.x))*(i-(u=m.y))-(s-h)*(o-u))&&0<=(s-h)*(r-u)-(a-h)*(i-u)&&0<=(a-h)*(o-u)-(l-h)*(r-u))&&(_=m.prev,c=m.next,0<=(m.y-_.y)*(c.x-m.x)-(m.x-_.x)*(c.y-m.y)))return!1;m=m.prevZ}return!0},cureLocalIntersections:function(t){var e=t;do{var n,s=e.prev,i=e.next.next,a=e.next}while(!!(0<(e.y-s.y)*(a.x-e.x)-(e.x-s.x)*(a.y-e.y)!=0<(e.y-s.y)*(i.x-e.x)-(e.x-s.x)*(i.y-e.y)&&0<(i.y-a.y)*(s.x-i.x)-(i.x-a.x)*(s.y-i.y)!=0<(i.y-a.y)*(e.x-i.x)-(i.x-a.x)*(e.y-i.y)&&(a=s.prev,n=s.next,(s.y-a.y)*(n.x-s.x)-(s.x-a.x)*(n.y-s.y)<0?(a=s.next,0<=(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)&&0<=((n=s.prev).y-s.y)*(i.x-n.x)-(n.x-s.x)*(i.y-n.y)):(a=s.prev,(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)<0||((n=s.next).y-s.y)*(i.x-n.x)-(n.x-s.x)*(i.y-n.y)<0)))&&(a=i.prev,n=i.next,(i.y-a.y)*(n.x-i.x)-(i.x-a.x)*(n.y-i.y)<0?(a=i.next,0<=(s.y-i.y)*(a.x-s.x)-(s.x-i.x)*(a.y-s.y)&&0<=((a=i.prev).y-i.y)*(s.x-a.x)-(a.x-i.x)*(s.y-a.y)):(a=i.prev,(s.y-i.y)*(a.x-s.x)-(s.x-i.x)*(a.y-s.y)<0||((a=i.next).y-i.y)*(s.x-a.x)-(a.x-i.x)*(s.y-a.y)<0))&&(this.triangles.push(s.i),this.triangles.push(e.i),this.triangles.push(i.i),e.next.prev=e.prev,e.prev.next=e.next,null!=e.prevZ&&(e.prevZ.nextZ=e.nextZ),null!=e.nextZ&&(e.nextZ.prevZ=e.prevZ),(a=e.next).next.prev=a.prev,a.prev.next=a.next,null!=a.prevZ&&(a.prevZ.nextZ=a.nextZ),null!=a.nextZ&&(a.nextZ.prevZ=a.prevZ),e=t=i),(e=e.next)!=t);return e},splitEarcut:function(t){var e=t;do{for(var n,s=e.next.next;s!=e.prev;){if(e.i!=s.i&&this.isValidDiagonal(e,s))return n=this.splitPolygon(e,s),e=this.filterPoints(e,e.next),n=this.filterPoints(n,n.next),this.earcutLinked(e),void this.earcutLinked(n);s=s.next}}while((e=e.next)!=t)},splitPolygon:function(t,e){var n=this.cache,s=(null==n?((n=new ri).allocNext=this.allocated,this.allocated=n):this.cache=n.next,n.i=t.i,n.z=-1,n.x=t.x,n.y=t.y,n.next=null,n.prev=null,n.steiner=!1,n.prevZ=null,n.nextZ=null,n),i=(null==(n=this.cache)?((n=new ri).allocNext=this.allocated,this.allocated=n):this.cache=n.next,n.i=e.i,n.z=-1,n.x=e.x,n.y=e.y,n.next=null,n.prev=null,n.steiner=!1,n.prevZ=null,n.nextZ=null,t.next),a=e.prev;return(t.next=e).prev=t,(s.next=i).prev=s,(n.next=s).prev=n,(a.next=n).prev=a,n},isValidDiagonal:function(t,e){var n,s,i;return t.x==e.x&&t.y==e.y||!!(!!(t.next.i!=e.i&&t.prev.i!=e.i&&!this.intersectsPolygon(t,e)&&(n=t.prev,s=t.next,(t.y-n.y)*(s.x-t.x)-(t.x-n.x)*(s.y-t.y)<0?(s=t.next,0<=(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y)&&0<=((i=t.prev).y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y)):(s=t.prev,(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y)<0||((i=t.next).y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y)<0)))&&(n=e.prev,s=e.next,(e.y-n.y)*(s.x-e.x)-(e.x-n.x)*(s.y-e.y)<0?(s=e.next,0<=(t.y-e.y)*(s.x-t.x)-(t.x-e.x)*(s.y-t.y)&&0<=((i=e.prev).y-e.y)*(t.x-i.x)-(i.x-e.x)*(t.y-i.y)):(s=e.prev,(t.y-e.y)*(s.x-t.x)-(t.x-e.x)*(s.y-t.y)<0||((i=e.next).y-e.y)*(t.x-i.x)-(i.x-e.x)*(t.y-i.y)<0)))&&this.middleInside(t,e)},middleInside:function(t,e){for(var n=t,s=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;n.y>a!=n.next.y>a&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(s=!s),(n=n.next)!=t;);return s},intersectsPolygon:function(t,e){var n,s=t;do{if(s.i!=t.i&&s.next.i!=t.i&&s.i!=e.i&&s.next.i!=e.i&&0<((n=s.next).y-s.y)*(t.x-n.x)-(n.x-s.x)*(t.y-n.y)!=0<(n.y-s.y)*(e.x-n.x)-(n.x-s.x)*(e.y-n.y)&&0<(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y)!=0<(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))return!0}while((s=s.next)!=t);return!1},indexCurve:function(t){var e,n,s=t;do{}while(s.z<0&&(n=32767*(s.x-this.minX)/this.size|0,e=32767*(s.y-this.minY)/this.size|0,s.z=(n=1431655765&((n=858993459&((n=252645135&((n=16711935&(n|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&(e|e<<8))|e<<4))|e<<2))|e<<1))<<1),s.prevZ=s.prev,s.nextZ=s.next,(s=s.next)!=t);s.prevZ.nextZ=null,s.prevZ=null,this.sortLinked(s)},sortLinked:function(t){var e,n,s,i,a,r=1;do{for(e=t,s=t=null,i=0;null!=e;){++i;for(var l=e,o=0,h=0,u=r;h<u&&(++h,++o,null!=(l=l.nextZ)););for(a=r;0<o||0<a&&null!=l;)0!=o&&(0==a||null==l||e.z<=l.z)?(e=(n=e).nextZ,--o):(l=(n=l).nextZ,--a),null!=s?s.nextZ=n:t=n,n.prevZ=s,s=n;e=l}}while(s.nextZ=null,r*=2,1<i);return t},__class__:nc},(e["hxd.fmt.bfnt.FontParser"]=li).__name__="hxd.fmt.bfnt.FontParser",li.parse=function(t,e,n){var s=null,i=new Ct(null,0),a=i.glyphs,R=(i.baseLine=0,t.getInt32(0));switch(R){case 54938946:var r=new c_(t);for(r.set_position(r.pos+4);r.pos<r.totlen;){var l=r.readByte(),o=r.readInt32(),V=r.pos;switch(l){case 1:i.size=i.initSize=r.readInt16(),r.set_position(r.pos+12),i.name=r.readUntil(0);break;case 2:i.lineHeight=r.readUInt16(),i.baseLine=r.readUInt16(),r.set_position(r.pos+4),r.readUInt16();break;case 3:var Q=r.readUntil(0);try{i.tilePath=Q,s=n(m_.join([m_.directory(e),Q]))}catch(x){i.tilePath=new m_(e).file+".png",s=n(m_.withExtension(e,"png"))}break;case 4:for(var O=o/20|0;0<O;){var L=r.readInt32(),h=new vt(s.sub(r.readUInt16(),r.readUInt16(),r.readUInt16(),r.readUInt16(),r.readInt16(),r.readInt16()),r.readInt16());a.h[L]=h,r.set_position(r.pos+2),--O}break;case 5:for(var U=o/10|0;0<U;){var N=r.readInt32(),G=r.readInt32();null!=(F=a.h[G])?F.addKerning(N,r.readInt16()):r.set_position(r.pos+2),--U}}r.set_position(V+o)}break;case 1414415938:return new sc(new c_(t)).read(function(t){try{i.tilePath=t,s=n(m_.join([m_.directory(e),t]))}catch(t){i.tilePath=new m_(e).file+".png",s=n(m_.withExtension(e,"png"))}return s});case 1836597052:case 1852794428:if((w=_t.parse(t.toString()).firstElement()).nodeType!=_t.Document&&w.nodeType!=_t.Element)throw tr.thrown("Invalid nodeType "+(null==w.nodeType?"null":Qr.toString(w.nodeType)));var u=w;if(y_.resolve(u,"info")){for(var _=x_.resolve(u,"info"),_=(i.name=b_.resolve(_,"face"),b_.resolve(x_.resolve(u,"info"),"size")),_=(i.size=i.initSize=Ja.parseInt(_),b_.resolve(x_.resolve(u,"common"),"lineHeight")),_=(i.lineHeight=Ja.parseInt(_),b_.resolve(x_.resolve(u,"common"),"base")),X=(i.baseLine=Ja.parseInt(_),x_.resolve(u,"pages").elements());X.hasNext();){var Y=X.next();if("0"==b_.resolve(Y,"id")){var c=b_.resolve(Y,"file");try{i.tilePath=c,s=n(m_.join([m_.directory(e),c]))}catch(x){i.tilePath=new m_(e).file+".png",s=n(m_.withExtension(e,"png"))}}}for(var W=x_.resolve(u,"chars").elements();W.hasNext();){for(var d=W.next(),h=new vt(s.sub(Ja.parseInt(b_.resolve(d,"x")),Ja.parseInt(b_.resolve(d,"y")),Ja.parseInt(b_.resolve(d,"width")),Ja.parseInt(b_.resolve(d,"height")),Ja.parseInt(b_.resolve(d,"xoffset")),Ja.parseInt(b_.resolve(d,"yoffset"))),Ja.parseInt(b_.resolve(d,"xadvance"))),j=x_.resolve(u,"kernings").elements();j.hasNext();){var p=j.next();b_.resolve(p,"second")==b_.resolve(d,"id")&&h.addKerning(Ja.parseInt(b_.resolve(p,"first")),Ja.parseInt(b_.resolve(p,"amount")))}G=Ja.parseInt(b_.resolve(d,"id"));a.h[G]=h}}else{i.tilePath=new m_(e).file+".png",s=n(m_.withExtension(e,"png")),i.name=b_.resolve(u,"family");for(var _=b_.resolve(u,"size"),_=(i.size=i.initSize=Ja.parseInt(_),b_.resolve(u,"height")),H=(i.lineHeight=Ja.parseInt(_),[]),d=u.elements();d.hasNext();){for(var f=d.next(),g=b_.resolve(f,"rect").split(" "),Z=b_.resolve(f,"offset").split(" "),h=new vt(s.sub(Ja.parseInt(g[0]),Ja.parseInt(g[1]),Ja.parseInt(g[2]),Ja.parseInt(g[3]),Ja.parseInt(Z[0]),Ja.parseInt(Z[1])),Ja.parseInt(b_.resolve(f,"width"))),g=b_.resolve(f,"code"),q=ut.startsWith(g,"&#")?Ja.parseInt(Jn.substr(g,2,g.length-3)):Jn.cca(g,0),p=f.elements();p.hasNext();){var m=p.next(),A=b_.resolve(m,"id"),A=ut.startsWith(A,"&#")?Ja.parseInt(Jn.substr(A,2,A.length-3)):Jn.cca(A,0),m=Ja.parseInt(b_.resolve(m,"advance"));a.h.hasOwnProperty(A)?a.h[A].addKerning(q,m):H.push({prev:q,next:A,adv:m})}a.h[q]=h}for(var x=0;x<H.length;){var p=H[x],K=(++x,a.h[p.next]);null!=K&&K.addKerning(p.prev,p.adv)}}break;case 1868983913:for(var J=t.toString().split("\n"),b=new ct(' *?([0-9a-zA-Z]+)=("[^"]+"|.+?)(?:[ \r]|$)',""),x=0;x<J.length;){var y=J[x];switch(++x,k=y.indexOf(" "),Jn.substr(y,0,k)){case"char":for(var l=0,w=0,$=0,tt=0,et=0,nt=0,st=0,it=0;k<y.length&&b.matchSub(y,k);){switch(b.matched(1)){case"height":var v=b.matched(2),et=Ja.parseInt(34==Jn.cca(v,0)?v.substring(1,v.length-1):v);break;case"id":v=b.matched(2);l=Ja.parseInt(34==Jn.cca(v,0)?v.substring(1,v.length-1):v);break;case"width":var C=b.matched(2),tt=Ja.parseInt(34==Jn.cca(C,0)?C.substring(1,C.length-1):C);break;case"x":C=b.matched(2);w=Ja.parseInt(34==Jn.cca(C,0)?C.substring(1,C.length-1):C);break;case"xadvance":var M=b.matched(2),it=Ja.parseInt(34==Jn.cca(M,0)?M.substring(1,M.length-1):M);break;case"xoffset":M=b.matched(2),nt=Ja.parseInt(34==Jn.cca(M,0)?M.substring(1,M.length-1):M);break;case"y":var S=b.matched(2),$=Ja.parseInt(34==Jn.cca(S,0)?S.substring(1,S.length-1):S);break;case"yoffset":S=b.matched(2),st=Ja.parseInt(34==Jn.cca(S,0)?S.substring(1,S.length-1):S)}var k=(V=b.matchedPos()).pos+V.len}h=new vt(s.sub(w,$,tt,et,nt,st),it);a.h[l]=h;break;case"common":for(;k<y.length&&b.matchSub(y,k);){switch(b.matched(1)){case"base":var B=b.matched(2);i.baseLine=Ja.parseInt(34==Jn.cca(B,0)?B.substring(1,B.length-1):B);break;case"lineHeight":B=b.matched(2);i.lineHeight=Ja.parseInt(34==Jn.cca(B,0)?B.substring(1,B.length-1):B);break;case"pages":var I=b.matched(2);Ja.parseInt(34==Jn.cca(I,0)?I.substring(1,I.length-1):I)}var at=b.matchedPos();k=at.pos+at.len}break;case"info":for(;k<y.length&&b.matchSub(y,k);){switch(b.matched(1)){case"face":var T=b.matched(2);i.name=34==Jn.cca(T,0)?T.substring(1,T.length-1):T;break;case"size":T=b.matched(2);i.size=i.initSize=Ja.parseInt(34==Jn.cca(T,0)?T.substring(1,T.length-1):T)}var rt=b.matchedPos();k=rt.pos+rt.len}break;case"kerning":for(var F,N=0,lt=0,ot=0;k<y.length&&b.matchSub(y,k);){switch(b.matched(1)){case"amount":var D=b.matched(2),ot=Ja.parseInt(34==Jn.cca(D,0)?D.substring(1,D.length-1):D);break;case"first":D=b.matched(2);N=Ja.parseInt(34==Jn.cca(D,0)?D.substring(1,D.length-1):D);break;case"second":var E=b.matched(2),lt=Ja.parseInt(34==Jn.cca(E,0)?E.substring(1,E.length-1):E)}var ht=b.matchedPos();k=ht.pos+ht.len}null!=(F=a.h[lt])&&F.addKerning(N,ot);break;case"page":for(;k<y.length&&b.matchSub(y,k);){if("file"==b.matched(1)){var P=b.matched(2),c=34==Jn.cca(P,0)?P.substring(1,P.length-1):P;try{i.tilePath=c,s=n(m_.join([m_.directory(e),c]))}catch(t){i.tilePath=new m_(e).file+".png",s=n(m_.withExtension(e,"png"))}}P=b.matchedPos();k=P.pos+P.len}}}break;default:throw tr.thrown("Unknown font signature "+ut.hex(R,8))}null==a.h[32]&&(z=s.sub(0,0,0,0),a.h[32]=new vt(z,i.size>>1)),i.tile=s,0==i.baseLine&&(i.baseLine=i.calcBaseLine());var z=a.h[65533];return null!=(z=null==(z=null==z?a.h[9633]:z)?a.h[63]:z)&&(i.defaultChar=z),i},function(t){this.i=t}),ic=((e["hxd.fmt.bfnt.Reader"]=sc).__name__="hxd.fmt.bfnt.Reader",sc.prototype={read:function(t){if("BFNT"!=this.i.readString(4)||0!=this.i.readByte())throw tr.thrown("Not a BFNT file!");var e=null,n=this.i.readByte();if(1!=n)throw tr.thrown("Unknown BFNT version: "+n);(e=new Ct(this.i.readString(this.i.readUInt16()),this.i.readInt16())).tilePath=this.i.readString(this.i.readUInt16());for(var s,i=e.tile=t(e.tilePath),a=(e.lineHeight=this.i.readInt16(),e.baseLine=this.i.readInt16(),this.i.readInt32());0!=(s=this.i.readInt32());){var r,l=new vt(i.sub(this.i.readUInt16(),this.i.readUInt16(),this.i.readUInt16(),this.i.readUInt16(),this.i.readInt16(),this.i.readInt16()),this.i.readInt16());for(e.glyphs.h[s]=l,s==a&&(e.defaultChar=l);;){if(0==(r=this.i.readInt32()))break;l.addKerning(r,this.i.readInt16())}}return e},__class__:sc},(e["hxd.fmt.grd.Gradient"]=oi).__name__="hxd.fmt.grd.Gradient",oi.prototype={__class__:oi},(e["hxd.fmt.grd.ColorStop"]=hi).__name__="hxd.fmt.grd.ColorStop",hi.prototype={__class__:hi},d["hxd.fmt.grd.ColorStopType"]={__ename__:!0,__constructs__:null,User:{_hx_name:"User",_hx_index:0,__enum__:"hxd.fmt.grd.ColorStopType",toString:l},Background:{_hx_name:"Background",_hx_index:1,__enum__:"hxd.fmt.grd.ColorStopType",toString:l},Foreground:{_hx_name:"Foreground",_hx_index:2,__enum__:"hxd.fmt.grd.ColorStopType",toString:l}}),ac=(ic.__constructs__=[ic.User,ic.Background,ic.Foreground],ic.__empty_constructs__=[ic.User,ic.Background,ic.Foreground],(e["hxd.fmt.grd.TransparencyStop"]=ui).__name__="hxd.fmt.grd.TransparencyStop",ui.prototype={__class__:ui},d["hxd.fmt.grd.Color"]={__ename__:!0,__constructs__:null,RGB:((c=function(t,e,n){return{_hx_index:0,r:t,g:e,b:n,__enum__:"hxd.fmt.grd.Color",toString:l}})._hx_name="RGB",c.__params__=["r","g","b"],c),HSB:((c=function(t,e,n){return{_hx_index:1,h:t,s:e,b:n,__enum__:"hxd.fmt.grd.Color",toString:l}})._hx_name="HSB",c.__params__=["h","s","b"],c)}),rc=(ac.__constructs__=[ac.RGB,ac.HSB],ac.__empty_constructs__=[],(e["hxd.fmt.grd.GradientStop"]=_i).__name__="hxd.fmt.grd.GradientStop",_i.prototype={__class__:_i},(e["hxd.fmt.grd.Data"]=ci).__name__="hxd.fmt.grd.Data",ci.__super__=N,ci.prototype=t(N.prototype,{__class__:ci}),(e["hxd.fmt.grd.Reader"]=di).__name__="hxd.fmt.grd.Reader",di.prototype={readUnicode:function(t,e){for(var n="",s=0,i=e-1;s<i;){s++;var a=t.readInt16();n+=String.fromCodePoint(a)}return t.readInt16(),n},parseValue:function(t){var e=t.readString(4);switch(e){case"Objc":s=this.parseObj(t);break;case"TEXT":s=this.readUnicode(t,t.readInt32());break;case"UntF":t.readString(4),s=t.readDouble();break;case"VlLs":s=this.parseList(t);break;case"bool":s=t.readByte();break;case"doub":s=t.readDouble();break;case"enum":s=this.parseEnum(t);break;case"long":s=t.readInt32();break;case"tdtd":var n=t.readInt32(),s={length:n,value:t.read(n)};break;default:throw tr.thrown('Unhandled type "'+e+'"')}return s},parseObj:function(t){for(var e=t.readInt32(),n=this.readUnicode(t,e=0==e?4:e),e=t.readInt32(),s={name:n,type:t.readString(e=0==e?4:e)},i=t.readInt32(),a=0;a<i;){++a,0==(e=t.readInt32())&&(e=4);var r=t.readString(e),l=r.indexOf(" ");s[r=0<l?r.substring(0,l):r]=this.parseValue(t)}return s},parseList:function(t){for(var e=[],n=t.readInt32(),s=0;s<n;)++s,e.push(this.parseValue(t));return e},parseEnum:function(t){var e=t.readInt32(),n=t.readString(e=0==e?4:e),e=t.readInt32();return{type:n,value:t.readString(e=0==e?4:e)}},read:function(){for(var t=new ci,e=(this.i.read(32),this.i.readString(4),er.__cast(this.parseValue(this.i),Array)),n=0;n<e.length;){var s=e[n++].Grad,i=new oi,a=s.Nm;i.name=a.substring(a.indexOf("=")+1),i.interpolation=s.Intr,this.createColorStops(s.Clrs,i.colorStops),this.createTransparencyStops(s.Trns,i.transparencyStops),this.createGradientStops(i.colorStops,i.transparencyStops,i.gradientStops),t.h[i.name]=i}return t},createColorStops:function(t,e){for(var n=0;n<t.length;){var s,i=t[n],a=(++n,ac.RGB(0,0,0));switch(i.Type.value){case"BckC":s=ic.Background;break;case"FrgC":s=ic.Foreground;break;case"UsrS":s=ic.User;break;default:throw tr.thrown("unhalndled color stop type : "+Ja.string(i.Type.value))}if(s==ic.User)switch(i.Clr.type){case"HSBC":a=ac.HSB(i.Clr.H,i.Clr.Strt,i.Clr.Brgh);break;case"RGBC":a=ac.RGB(i.Clr.Rd,i.Clr.Grn,i.Clr.Bl)}var r=new hi;r.color=a,r.location=i.Lctn,r.midpoint=i.Mdpn,r.type=s,e.push(r)}},createTransparencyStops:function(t,e){for(var n=0;n<t.length;){var s=t[n],i=(++n,new ui);i.opacity=s.Opct,i.location=s.Lctn,i.midpoint=s.Mdpn,e.push(i)}},createGradientStops:function(t,e,n){for(var s=0;s<t.length;){var i=t[s],a=(++s,new _i);a.opacity=this.getOpacity(i,e),a.colorStop=i,n.push(a)}},getOpacity:function(t,e){for(var n,s,i,a=-1,r=0,l=e.length;r<l;){var o=r++;if(e[o].location>=t.location){a=o;break}}return 0==a?e[0].opacity:a<0?e[e.length-1].opacity:(n=e[a-1],0==(s=(i=e[a]).location-n.location)?n.opacity:(i=(i.opacity-n.opacity)/s)*t.location+(n.opacity-i*n.location))},__class__:di},(e["hxd.fmt.hdr.Reader"]=pi).__name__="hxd.fmt.hdr.Reader",pi.decode=function(t,e){for(var n=new c_(t),s=Object.create(null);;){var i=n.readLine();if(""==i)break;35!=Jn.cca(i,0)&&1<(i=i.split("=")).length&&(s[i.shift()]=i.join("="))}for(var a=n.readLine().split(" "),r=Ja.parseInt(a[1]),l=Ja.parseInt(a[3]),a="1"==s.GAMMA,o=new Rt(new ArrayBuffer(l*r*4*4)),h=1,u=s.EXPOSURE,_=(null!=u&&((u=parseFloat(u))<1e-12||u<1e12)&&(h=u),e?1:.45454545454545453),c=[],d=0;d<256;)c.push(Math.pow(d++,_));for(var d=[],p=0;p<256;)d.push(Math.pow(Math.pow(2,p++-128)/(256*h),_));if(null==(p=s.FORMAT))throw tr.thrown("Unsupported HDR format "+p);if("32-bit_rle_rgbe"!=p)throw tr.thrown("Unsupported HDR format "+p);for(var f=n.pos,g=new Rt(new ArrayBuffer(4*l)),m=l>>8|(255&l)<<8,A=0,x=r;A<x;){var b=A++,y=t.getInt32(f);if(514!=(65535&y)||y>>>16!=m)g.blit(0,t,f,4*l),f+=4*l;else{f+=4;for(var w=0,v=4*l;w<v;){var C=t.b[f++];128<C?(C-=128,g.fill(w,C,t.b[f++])):(g.blit(w,t,f,C),f+=C),w+=C}}for(var M=b*l*16,S=0,k=l;S<k;){var B=S++,I=d[g.b[B+3*l]];o.setFloat(M,c[g.b[B]]*I),M+=4,o.setFloat(M,c[g.b[B+l]]*I),M+=4,o.setFloat(M,c[g.b[B+(l<<1)]]*I),M+=4,o.setFloat(M,1),M+=4}}return{width:l,height:r,bytes:o,gamma:a}},d["hxd.fmt.hmd.Property"]={__ename__:!0,__constructs__:null,CameraFOVY:((c=function(t){return{_hx_index:0,v:t,__enum__:"hxd.fmt.hmd.Property",toString:l}})._hx_name="CameraFOVY",c.__params__=["v"],c),Unused_HasMaterialFlags:{_hx_name:"Unused_HasMaterialFlags",_hx_index:1,__enum__:"hxd.fmt.hmd.Property",toString:l},HasExtraTextures:{_hx_name:"HasExtraTextures",_hx_index:2,__enum__:"hxd.fmt.hmd.Property",toString:l},FourBonesByVertex:{_hx_name:"FourBonesByVertex",_hx_index:3,__enum__:"hxd.fmt.hmd.Property",toString:l}}),lc=(rc.__constructs__=[rc.CameraFOVY,rc.Unused_HasMaterialFlags,rc.HasExtraTextures,rc.FourBonesByVertex],rc.__empty_constructs__=[rc.Unused_HasMaterialFlags,rc.HasExtraTextures,rc.FourBonesByVertex],(e["hxd.fmt.hmd.Position"]=fi).__name__="hxd.fmt.hmd.Position",fi.prototype={get_qw:function(){var t=1-(this.qx*this.qx+this.qy*this.qy+this.qz*this.qz);return t<0?-Math.sqrt(-t):Math.sqrt(t)},toMatrix:function(t){null==t&&(t=!1);var e=new ro,n=fi.QTMP;return n.x=this.qx,n.y=this.qy,n.z=this.qz,n.w=this.get_qw(),n.toMatrix(e),t?(e.translate(this.x,this.y,this.z),e.scale(this.sx,this.sy,this.sz)):(e._11*=this.sx,e._12*=this.sx,e._13*=this.sx,e._21*=this.sy,e._22*=this.sy,e._23*=this.sy,e._31*=this.sz,e._32*=this.sz,e._33*=this.sz,e.translate(this.x,this.y,this.z)),e},__class__:fi,__properties__:{get_qw:"get_qw"}},function(t,e){this.name=t,this.format=e}),oc=((e["hxd.fmt.hmd.GeometryFormat"]=lc).__name__="hxd.fmt.hmd.GeometryFormat",lc.prototype={__class__:lc},(e["hxd.fmt.hmd.Geometry"]=gi).__name__="hxd.fmt.hmd.Geometry",gi.prototype={get_indexCount:function(){for(var t=0,e=0,n=this.indexCounts;e<n.length;)t+=n[e++];return t},__class__:gi,__properties__:{get_indexCount:"get_indexCount"}},(e["hxd.fmt.hmd.Material"]=mi).__name__="hxd.fmt.hmd.Material",mi.prototype={__class__:mi},(e["hxd.fmt.hmd.SkinJoint"]=xi).__name__="hxd.fmt.hmd.SkinJoint",xi.prototype={__class__:xi},(e["hxd.fmt.hmd.SkinSplit"]=bi).__name__="hxd.fmt.hmd.SkinSplit",bi.prototype={__class__:bi},(e["hxd.fmt.hmd.Skin"]=yi).__name__="hxd.fmt.hmd.Skin",yi.prototype={__class__:yi},(e["hxd.fmt.hmd.Model"]=wi).__name__="hxd.fmt.hmd.Model",wi.prototype={__class__:wi},d["hxd.fmt.hmd.AnimationFlag"]={__ename__:!0,__constructs__:null,HasPosition:{_hx_name:"HasPosition",_hx_index:0,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},HasRotation:{_hx_name:"HasRotation",_hx_index:1,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},HasScale:{_hx_name:"HasScale",_hx_index:2,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},HasUV:{_hx_name:"HasUV",_hx_index:3,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},HasAlpha:{_hx_name:"HasAlpha",_hx_index:4,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},SingleFrame:{_hx_name:"SingleFrame",_hx_index:5,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},HasProps:{_hx_name:"HasProps",_hx_index:6,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l},Reserved:{_hx_name:"Reserved",_hx_index:7,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:l}}),hc=(oc.__constructs__=[oc.HasPosition,oc.HasRotation,oc.HasScale,oc.HasUV,oc.HasAlpha,oc.SingleFrame,oc.HasProps,oc.Reserved],oc.__empty_constructs__=[oc.HasPosition,oc.HasRotation,oc.HasScale,oc.HasUV,oc.HasAlpha,oc.SingleFrame,oc.HasProps,oc.Reserved],(e["hxd.fmt.hmd.AnimationObject"]=vi).__name__="hxd.fmt.hmd.AnimationObject",vi.prototype={__class__:vi},(e["hxd.fmt.hmd.AnimationEvent"]=Ci).__name__="hxd.fmt.hmd.AnimationEvent",Ci.prototype={__class__:Ci},(e["hxd.fmt.hmd.Animation"]=Mi).__name__="hxd.fmt.hmd.Animation",Mi.prototype={__class__:Mi},(e["hxd.fmt.hmd.Data"]=Si).__name__="hxd.fmt.hmd.Data",Si.prototype={__class__:Si},(e["hxd.fmt.hmd._Library.FormatMap"]=ki).__name__="hxd.fmt.hmd._Library.FormatMap",ki.prototype={__class__:ki},(e["hxd.fmt.hmd.GeometryBuffer"]=Bi).__name__="hxd.fmt.hmd.GeometryBuffer",Bi.prototype={__class__:Bi},(e["hxd.fmt.hmd.Library"]=Ii).__name__="hxd.fmt.hmd.Library",Ii.prototype={getBuffers:function(t,e,R,n){0==n&&1==t.indexCounts.length&&(n=null);for(var s=null,V=0,i=0,a=e.length;i<a;){for(var r=e[w=e.length-1-i++],l=7&r.format,Q=0,O=!1,o=0,h=t.vertexFormat;o<h.length;){var u=h[o];if(++o,u.name==r.name){if((7&u.format)<l)throw tr.thrown("Requested "+r.name+" data has only "+(7&u.format)+" regs instead of "+l);O=!0;break}Q+=7&u.format}if(O)s=new ki(l,Q,null,s);else{var L=null==R?null:R[w];if(null==L)throw tr.thrown("Missing required "+r.name);s=new ki(l,0,L,s)}V+=l}var _,c=t.vertexCount*t.vertexStride*4,d=new Rt(new ArrayBuffer(c)),U=this.resource.entry,c=(U.readFull(d,this.header.dataPosition+t.vertexPosition,c),this.header.dataPosition+t.indexPosition),p=t.vertexCount<=65536,f=p?2:4;if(null==n)_=t.get_indexCount()*f;else{for(var N=0,i=0,a=n;i<a;)N+=t.indexCounts[i++];c+=N*f,_=t.indexCounts[n]*f}var g=new Rt(new ArrayBuffer(_)),m=(U.readFull(g,c,_),new Bi);if(null==n){m.vertexes=new Array(V*t.vertexCount),m.indexes=new Array(t.get_indexCount());for(var A=0,i=0,a=t.vertexCount;i<a;)for(var x=i++,b=s;null!=b;){if(null==b.def)for(var y=x*t.vertexStride,o=0,h=b.size;o<h;)m.vertexes[A++]=d.getFloat(y+b.offset+o++<<2);else switch(b.size){case 1:m.vertexes[A++]=b.def.x;break;case 2:m.vertexes[A++]=b.def.x,m.vertexes[A++]=b.def.y;break;case 3:m.vertexes[A++]=b.def.x,m.vertexes[A++]=b.def.y,m.vertexes[A++]=b.def.z;break;default:m.vertexes[A++]=b.def.x,m.vertexes[A++]=b.def.y,m.vertexes[A++]=b.def.z,m.vertexes[A++]=b.def.w}b=b.next}if(p)for(y=0,i=0,a=m.indexes.length;i<a;)m.indexes[i++]=g.b[y++]|g.b[y++]<<8;else for(i=0,a=m.indexes.length;i<a;){var w=i++;m.indexes[w]=g.getInt32(w<<2)}}else{for(var f=t.indexCounts[n],G=new Array(t.vertexCount),v=U_._new(0),y=(m.indexes=new Array(f),0),X=0,i=0,a=m.indexes.length;i<a;){var w=i++,C=G[x=p?g.b[y++]|g.b[y++]<<8:g.getInt32(w<<2)];if(0==C){C=++X,G[x]=C;for(b=s;null!=b;){if(null==b.def)for(var Y=x*t.vertexStride,o=0,h=b.size;o<h;){var M,W=d.getFloat(Y+b.offset+o++<<2);v.pos==v.array.length&&((M=v.array.length<<1)<128&&(M=128),(M=new Float32Array(M)).set(v.array),v.array=M),v.array[v.pos++]=W}else switch(b.size){case 1:var S=b.def.x;v.pos==v.array.length&&((k=v.array.length<<1)<128&&(k=128),(k=new Float32Array(k)).set(v.array),v.array=k),v.array[v.pos++]=S;break;case 2:var k=b.def.x,j=(v.pos==v.array.length&&((S=v.array.length<<1)<128&&(S=128),(j=new Float32Array(S)).set(v.array),v.array=j),v.array[v.pos++]=k,b.def.y);v.pos==v.array.length&&((B=v.array.length<<1)<128&&(B=128),(B=new Float32Array(B)).set(v.array),v.array=B),v.array[v.pos++]=j;break;case 3:var B=b.def.x,I=(v.pos==v.array.length&&((I=v.array.length<<1)<128&&(I=128),(I=new Float32Array(I)).set(v.array),v.array=I),v.array[v.pos++]=B,b.def.y),T=(v.pos==v.array.length&&((T=v.array.length<<1)<128&&(T=128),(T=new Float32Array(T)).set(v.array),v.array=T),v.array[v.pos++]=I,b.def.z);v.pos==v.array.length&&((D=v.array.length<<1)<128&&(D=128),(D=new Float32Array(D)).set(v.array),v.array=D),v.array[v.pos++]=T;break;default:var F,D=b.def.x,E=(v.pos==v.array.length&&((E=v.array.length<<1)<128&&(E=128),(E=new Float32Array(E)).set(v.array),v.array=E),v.array[v.pos++]=D,b.def.y),P=(v.pos==v.array.length&&((P=v.array.length<<1)<128&&(P=128),(P=new Float32Array(P)).set(v.array),v.array=P),v.array[v.pos++]=E,b.def.z),z=(v.pos==v.array.length&&((z=v.array.length<<1)<128&&(z=128),(z=new Float32Array(z)).set(v.array),v.array=z),v.array[v.pos++]=P,b.def.w);v.pos==v.array.length&&((F=v.array.length<<1)<128&&(F=128),(F=new Float32Array(F)).set(v.array),v.array=F),v.array[v.pos++]=z}b=b.next}}m.indexes[w]=C-1}for(var H=v,i=[],a=0,o=H.pos;a<o;)i.push(H.array[a++]);m.vertexes=i}return m},makePrimitive:function(t){var e=this.cachedPrimitives[t];return null==e&&((e=new Qe(this.header.geometries[t],this.header.dataPosition,this)).incref(),this.cachedPrimitives[t]=e),e},makeMaterial:function(t,e,n){var e=this.header.materials[e],s=Io.current.createMaterial(),i=(s.name=e.name,s.model=this.resource,s.set_blendMode(e.blendMode),Io.current.loadMaterialProps(s));return null==i&&(i=s.getDefaultModelProps()),null!=e.diffuseTexture&&(s.set_texture(n(e.diffuseTexture)),null==s.get_texture())&&s.set_texture(A.fromColor(16711935)),null!=e.specularTexture&&s.set_specularTexture(n(e.specularTexture)),null!=e.normalMap&&s.set_normalMap(n(e.normalMap)),s.set_props(i),s},makeSkin:function(t,e){var n=this.cachedSkin.h[t.name];if(null==n){(n=new ne(t.name,0,null!=e.props&&0<=e.props.indexOf(rc.FourBonesByVertex)?4:3)).namedJoints=new N,n.allJoints=[],n.boundJoints=[],n.rootJoints=[];for(var s=0,i=t.joints;s<i.length;){var a=i[s],r=(++s,new te);r.name=a.name,r.index=n.allJoints.length,r.defMat=a.position.toMatrix(),0<=a.bind&&(r.bindIndex=a.bind,r.transPos=a.transpos.toMatrix(!0),n.boundJoints[r.bindIndex]=r),0<=a.parent?((a=n.allJoints[a.parent]).subs.push(r),r.parent=a):n.rootJoints.push(r),n.allJoints.push(r),n.namedJoints.h[r.name]=r}if(null!=t.split){n.splitJoints=[];for(s=0,i=t.split;s<i.length;){for(var l=i[s],o=(++s,n.splitJoints),h=l.materialIndex,u=[],_=0,c=l.joints;_<c.length;)u.push(n.allJoints[c[_++]]);o.push({material:h,joints:u})}}this.cachedSkin.h[t.name]=n}return n},makeObject:function(t){if(null==t&&(t=function(t){return A.fromColor(16711935)}),0==this.header.models.length)throw tr.thrown("This file does not contain any model");for(var e=[],n=0,s=this.header.models;n<s.length;){var i,a=s[n];if(++n,a.geometry<0)i=new _o;else{var r=this.makePrimitive(a.geometry);if(null!=a.skin){for(var l=this.makeSkin(a.skin,this.header.geometries[a.geometry]),o=(l.primitive=r,[]),h=0,u=a.materials;h<u.length;)o.push(this.makeMaterial(a,u[h++],t));i=new Ze(l,o)}else if(1==a.materials.length)i=new Xo(r,this.makeMaterial(a,a.materials[0],t));else{for(var _=[],c=0,d=a.materials;c<d.length;)_.push(this.makeMaterial(a,d[c++],t));i=new Ge(r,_)}}i.name=a.name,i.defaultTransform=a.position.toMatrix(),i.flags|=1,e.push(i);l=e[a.parent];null!=l&&l.addChild(i)}var p=e[0];return null!=p&&(p.flags|=256),p},loadSkin:function(t,e,n){if(null==n&&(n=!0),null==e.vertexWeights){var s=e.bonesPerVertex;if(3!=s&&4!=s)throw tr.thrown("assert");for(var R=4==s,i=(e.vertexCount=t.vertexCount,[new lc("position",3),new lc("weights",3),new lc("indexes",9)]),a=this.getBuffers(t,i),V=0,r=0;r<i.length;)V+=7&i[r++].format;e.vertexWeights=new Array(e.vertexCount*s),e.vertexJoints=new Array(e.vertexCount*s);for(var r=0,l=e.boundJoints;r<l.length;)l[r++].offsets=new oo;var o,h=a.vertexes,u=1e20,_=-1e20,c=1e20,d=-1e20,p=1e20,Q=-1e20;if(null==e.splitJoints){for(var O=[],r=0,l=e.boundJoints;r<l.length;){var f=l[r];++r,O[f.bindIndex]=f}o=[{index:0,pos:0,count:a.indexes.length,joints:O}]}else{for(var g=0,L=[],U=0,r=0,l=t.indexCounts;r<l.length;){var N=l[r++];L.push(U),U+=N}for(var r=[],l=0,G=e.splitJoints;l<G.length;)r.push({index:g,pos:L[g],count:t.indexCounts[g++],joints:G[l++].joints});o=r}for(r=0;r<o.length;)for(var m=o[r],l=(++r,m.pos),G=m.pos+m.count;l<G;){var X=a.indexes[l++],A=X*V,x=h[A];if(x==x){h[A++]=NaN;for(var b=h[A++],y=h[A++],Y=h[A++],W=h[A++],j=h[A++],H=0,w=X*s,Z=(e.vertexWeights[w]=Y,e.vertexWeights[w+1]=W,e.vertexWeights[w+2]=j,R&&(e.vertexWeights[w+3]=H=1-Y-W-j),(0==Y?1:0)|(0==W?2:0)|(0==j?4:0)|(0==H?8:0)),g=g_.floatToI32(h[+A]),q=(x<u&&(u=x),_<x&&(_=x),b<c&&(c=b),d<b&&(d=b),y<p&&(p=y),Q<y&&(Q=y),0);q<s;){var K=q++;0!=(Z&1<<K)?e.vertexJoints[w++]=-1:(x<(C=(f=m.joints[g>>(K<<3)&255]).offsets).xMin&&(C.xMin=x),x>C.xMax&&(C.xMax=x),b<C.yMin&&(C.yMin=b),b>C.yMax&&(C.yMax=b),y<C.zMin&&(C.zMin=y),y>C.zMax&&(C.zMax=y),e.vertexJoints[w++]=f.bindIndex)}}}if(n)for(var v,C,M,S,k,B,g=e.allJoints.length-1,J=(_-u)*(d-c)*(Q-p);0<=g;)null!=(f=e.allJoints[g--]).offsets&&null!=f.parent&&null!=f.parent.offsets&&(v=f.parent.offsets,M=(C=f.offsets).xMax-C.xMin,S=C.yMax-C.yMin,k=C.zMax-C.zMin,x=null==(x=.5*(C.xMin+C.xMax))?0:x,b=null==(b=.5*(C.yMin+C.yMax))?0:b,y=null==(y=.5*(C.zMin+C.zMax))?0:y,m=null==(m=.5*Math.sqrt(M*M+S*S+k*k))?0:m,M=null==x?0:x,S=null==b?0:b,k=null==y?0:y,B=null==m?0:m,v.xMin<=M-B&&v.yMin<=S-B&&v.zMin<=k-B&&v.xMax>=M+B&&v.yMax>=S+B&&v.zMax>=k+B?f.offsets=null:((I=new oo).xMin=v.xMin,I.xMax=v.xMax,I.yMin=v.yMin,I.yMax=v.yMax,I.zMin=v.zMin,I.zMax=v.zMax,M-B<I.xMin&&(I.xMin=M-B),M+B>I.xMax&&(I.xMax=M+B),S-B<I.yMin&&(I.yMin=S-B),S+B>I.yMax&&(I.yMax=S+B),k-B<I.zMin&&(I.zMin=k-B),k+B>I.zMax&&(I.zMax=k+B),(I.xMax-I.xMin)*(I.yMax-I.yMin)*(I.zMax-I.zMin)/((v.xMax-v.xMin)*(v.yMax-v.yMin)*(v.zMax-v.zMin))<Math.sqrt(1.5*J/((I.xMax-I.xMin)*(I.yMax-I.yMin)*(I.zMax-I.zMin)))&&(f.parent.offsets=I,f.offsets=null)));for(r=0,l=e.allJoints;r<l.length;){var I,T,F,D,E,P,z,f=l[r];++r,null==f.offsets?f.offsetRay=-1:(T=x=null==(x=.5*((I=f.offsets).xMin+I.xMax))?0:x,F=b=null==(b=.5*(I.yMin+I.yMax))?0:b,z=y=null==(y=.5*(I.zMin+I.zMax))?0:y,z=I.xMax-I.xMin>I.yMax-I.yMin&&I.xMax-I.xMin>I.zMax-I.zMin?(E=I.yMax-I.yMin,D=I.zMax-I.zMin,D=new ae(I.xMin+(m=.5*(E<D?D:E)),F,z),new ae(I.xMax-m,F,z)):I.yMax-I.yMin>I.zMax-I.zMin?(E=I.xMax-I.xMin,P=I.zMax-I.zMin,D=new ae(T,I.yMin+(m=.5*(E<P?P:E)),z),new ae(T,I.yMax-m,z)):(P=I.xMax-I.xMin,z=I.yMax-I.yMin,D=new ae(T,F,I.zMin+(m=.5*(P<z?z:P))),new ae(T,F,I.zMax-m)),I.xMin=D.x,I.yMin=D.y,I.zMin=D.z,I.xMax=z.x,I.yMax=z.y,I.zMax=z.z,f.offsetRay=m)}}},__class__:Ii},(e["hxd.fmt.hmd.Reader"]=Ti).__name__="hxd.fmt.hmd.Reader",Ti.HMD_STRINGS=null,Ti.prototype={readProperty:function(){var t=this.i.readByte();switch(t){case 0:return rc.CameraFOVY(this.i.readFloat());case 1:throw tr.thrown("Obsolete HasMaterialFlags");case 2:return rc.HasExtraTextures;case 3:return rc.FourBonesByVertex;default:throw tr.thrown("Unknown property #"+t)}},readProps:function(){if(1==this.version)return null;var t=this.i.readByte();if(0==t)return null;for(var e=[],n=0;n<t;)++n,e.push(this.readProperty());return e},readName:function(){var t=this.i.readByte();return 255==t?null:this.i.readString(t)},readCachedName:function(){var t,e=this.readName();return null==e?null:null!=(t=(Ti.HMD_STRINGS=null==Ti.HMD_STRINGS?new N:Ti.HMD_STRINGS).h[e])?t:Ti.HMD_STRINGS.h[e]=e},readPosition:function(t){null==t&&(t=!0);var e=new fi;return e.x=this.i.readFloat(),e.y=this.i.readFloat(),e.z=this.i.readFloat(),e.qx=this.i.readFloat(),e.qy=this.i.readFloat(),e.qz=this.i.readFloat(),t?(e.sx=this.i.readFloat(),e.sy=this.i.readFloat(),e.sz=this.i.readFloat()):(e.sx=1,e.sy=1,e.sz=1),e},readBounds:function(){var t=new oo;return t.xMin=this.i.readFloat(),t.yMin=this.i.readFloat(),t.zMin=this.i.readFloat(),t.xMax=this.i.readFloat(),t.yMax=this.i.readFloat(),t.zMax=this.i.readFloat(),t},readSkin:function(){var t=this.readCachedName();if(null==t)return null;for(var e=new yi,n=(e.props=this.readProps(),e.name=t,e.joints=[],0),s=this.i.readUInt16();n<s;){++n;var i=new xi,a=(i.props=this.readProps(),i.name=this.readCachedName(),this.i.readUInt16()),r=0!=(32768&a);r&&(a&=32767),i.parent=a-1,i.position=this.readPosition(r),i.bind=this.i.readUInt16()-1,0<=i.bind&&(i.transpos=this.readPosition(r)),e.joints.push(i)}var l=this.i.readByte();if(0<l){e.split=[];for(n=0;n<l;){++n;for(var o=new bi,s=(o.materialIndex=this.i.readByte(),[]),h=0,u=this.i.readByte();h<u;)++h,s.push(this.i.readUInt16());o.joints=s,e.split.push(o)}}return e},readHeader:function(t){null==t&&(t=!1);var e=new Si,n=this.i.readString(3);if("HMD"!=n){if(59==Jn.cca(n,0))throw tr.thrown("FBX was not converted to HMD");throw tr.thrown("Invalid HMD header "+encodeURIComponent(n))}if(this.version=this.i.readByte(),3<this.version)throw tr.thrown("Can't read HMD v"+this.version);e.version=this.version,e.geometries=[],e.dataPosition=this.i.readInt32(),t&&(this.i=new c_(this.i.read(e.dataPosition-12))),e.props=this.readProps();for(var s=0,i=this.i.readInt32();s<i;){s++;for(var a=new gi,r=(a.props=this.readProps(),a.vertexCount=this.i.readInt32(),a.vertexStride=this.i.readByte(),[]),l=0,o=this.i.readByte();l<o;)l++,r.push(new lc(this.readCachedName(),this.i.readByte()));a.vertexFormat=r,a.vertexPosition=this.i.readInt32();for(var h=this.i.readByte(),u=[],_=0,c=h=255==h?this.i.readInt32():h;_<c;)_++,u.push(this.i.readInt32());a.indexCounts=u,a.indexPosition=this.i.readInt32(),a.bounds=this.readBounds(),e.geometries.push(a)}e.materials=[];for(s=0,i=this.i.readInt32();s<i;)s++,(d=new mi).props=this.readProps(),d.name=this.readName(),d.diffuseTexture=this.readName(),d.blendMode=Ti.BLEND[this.i.readByte()],this.i.readByte(),this.i.readFloat(),null!=d.props&&0<=d.props.indexOf(rc.HasExtraTextures)&&(d.specularTexture=this.readName(),d.normalMap=this.readName()),e.materials.push(d);e.models=[];for(s=0,i=this.i.readInt32();s<i;){s++;var d=new wi;if(d.props=this.readProps(),d.name=this.readCachedName(),d.parent=this.i.readInt32()-1,d.follow=this.readCachedName(),d.position=this.readPosition(),d.geometry=this.i.readInt32()-1,e.models.push(d),!(d.geometry<0)){d.materials=[];for(var p=this.i.readByte(),r=0,l=p=255==p?this.i.readInt32():p;r<l;)r++,d.materials.push(this.i.readInt32());d.skin=this.readSkin()}}e.animations=[];for(s=0,i=this.i.readInt32();s<i;){s++;for(var f=new Mi,g=(f.props=this.readProps(),f.name=this.readName(),f.frames=this.i.readInt32(),f.sampling=this.i.readFloat(),f.speed=this.i.readFloat(),this.i.readByte()),r=(f.loop=0!=(1&g),f.dataPosition=this.i.readInt32(),f.objects=[],0),l=this.i.readInt32();r<l;){r++;var m=new vi,A=(m.name=this.readCachedName(),this.i.readByte());if(null==A&&(A=0),m.flags=A,f.objects.push(m),0!=(m.flags&1<<oc.HasProps._hx_index)){for(o=[],u=0,_=this.i.readByte();u<_;)u++,o.push(this.readName());m.props=o}}if(0!=(2&g)){f.events=[];for(var c=0,x=this.i.readInt32();c<x;){c++;var b=new Ci;b.frame=this.i.readInt32(),b.data=this.readCachedName(),f.events.push(b)}}e.animations.push(f)}return e},__class__:Ti},(e["hxd.fs.FileEntry"]=Fi).__name__="hxd.fs.FileEntry",Fi.prototype={getBytes:function(){return null},readBytes:function(t,e,n,s){throw tr.thrown("readBytes() not implemented")},fetchBytes:function(t,e){var n=Fi.TMP_BYTES;return(null==n||n.length<e)&&(n=new Rt(new ArrayBuffer(e+65535&-65536)),Fi.TMP_BYTES=n),this.readFull(n,t,e),n},readFull:function(t,e,n){if(this.readBytes(t,0,e,n)<n)throw tr.thrown(new p_)},getText:function(){return this.getBytes().toString()},open:function(){return new _c(this)},load:function(t){if(!this.get_isAvailable())throw tr.thrown("load() not implemented");null!=t&&t()},loadBitmap:function(t){throw tr.thrown("loadBitmap() not implemented")},watch:function(t){},get_isAvailable:function(){return!0},get_size:function(){return 0},get_path:function(){throw tr.thrown("path() not implemented")},get_directory:function(){var t=this.get_path().lastIndexOf("/");return t<0?"":Jn.substr(this.get_path(),0,t)},get_extension:function(){var t=this.name.lastIndexOf(".");return t<0?"":Jn.substr(this.name,t+1,null).toLowerCase()},__class__:Fi,__properties__:{get_isAvailable:"get_isAvailable",get_size:"get_size",get_extension:"get_extension",get_directory:"get_directory",get_path:"get_path"}},function(t,e){this.fullPath=t,this.name=t.split("/").pop(),this.bytes=e}),uc=((e["hxd.fs.BytesFileEntry"]=hc).__name__="hxd.fs.BytesFileEntry",hc.__super__=Fi,hc.prototype=t(Fi.prototype,{get_path:function(){return this.fullPath},getBytes:function(){return this.bytes},readBytes:function(t,e,n,s){return n+s>this.bytes.length&&(s=this.bytes.length-n),t.blit(e,this.bytes,n,s=s<0?0:s),s},load:function(t){qu.delay(t,1)},loadBitmap:function(t){var e;switch(m_.extension(this.fullPath).toLowerCase()){case"gif":e="image/gif";break;case"jpeg":case"jpg":e="image/jpeg";break;case"png":e="image/png";break;default:throw tr.thrown("Cannot determine image encoding, try adding an extension to the resource path")}var n=new Image,s=(n.onload=function(){t(n)},t_.encode(this.bytes));n.src="data:"+e+";base64,"+s},get_size:function(){return this.bytes.length},__class__:hc}),(e["hxd.fs.BytesFileSystem"]=Di).__name__="hxd.fs.BytesFileSystem",Di.__interfaces__=[ht],Di.prototype={getBytes:function(t){throw tr.thrown("Not implemented")},get:function(t){var e=this.getBytes(t);if(null==e)throw tr.thrown("Resource not found '"+t+"'");return new hc(t,e)},__class__:Di},(e["hxd.fs._EmbedFileSystem.EmbedEntry"]=Ei).__name__="hxd.fs._EmbedFileSystem.EmbedEntry",Ei.__super__=Fi,Ei.prototype=t(Fi.prototype,{init:function(){if(null==this.bytes&&(this.bytes=zs.getBytes(this.data),null==this.bytes))throw tr.thrown("Missing resource "+this.data)},getBytes:function(){return null==this.bytes&&this.init(),this.bytes},readBytes:function(t,e,n,s){return null==this.bytes&&this.init(),n+s>this.bytes.length&&(s=this.bytes.length-n),t.blit(e,this.bytes,n,s=s<0?0:s),s},load:function(t){null!=t&&qu.delay(t,1)},loadBitmap:function(e){for(var t=null,n=0,s=zs.content;n<s.length;){var i=s[n];if(++n,i.name==this.data){t=i.data;break}}if(null==t)throw tr.thrown("Missing resource "+this.data);for(var a=new Image,r=(a.onload=function(t){e(a)},""),n=0,s=(3-4*(6*t.length>>3)%3)%3;n<s;)++n,r+="=";var l="data:image/"+this.get_extension()+";base64,"+t;a.src=l+r},get_path:function(){return"."==this.relPath?"<root>":this.relPath},get_size:function(){return this.init(),this.bytes.length},__class__:Ei}),function(t){this.root=t}),_c=((e["hxd.fs.EmbedFileSystem"]=uc).__name__="hxd.fs.EmbedFileSystem",uc.__interfaces__=[ht],uc.resolve=function(t){return"R_"+t.replace(uc.invalidChars.r,"_")},uc.prototype={splitPath:function(t){return"."==t?[]:t.split("/")},exists:function(t){for(var e=this.root,n=0,s=this.splitPath(t);n<s.length;)if(null==(e=Z.field(e,s[n++])))return!1;return!0},get:function(t){var e;if(this.exists(t))return e=uc.resolve(t),new Ei(this,t.split("/").pop(),t,e);throw tr.thrown(new dc(t))},__class__:uc},function(t){this.nextReadPos=0,this.cacheLen=0,this.cachePos=0,this.entry=t}),cc=((e["hxd.fs.FileInput"]=_c).__name__="hxd.fs.FileInput",_c.__super__=Xs,_c.prototype=t(Xs.prototype,{fetch:function(t){null==t&&(t=256);var e=this.cache,n=((null==this.cache||this.cache.length<t)&&(this.cache=_c.PREFETCH_CACHE,null!=this.cache&&this.cache.length>=t?_c.PREFETCH_CACHE=null:this.cache=new Rt(new ArrayBuffer(t))),0),e=(0<this.cacheLen&&(n=this.cacheLen,t-=this.cacheLen,this.cache.blit(0,e,this.cachePos,this.cacheLen)),this.entry.readBytes(this.cache,n,this.nextReadPos,t));if(this.cachePos=0,this.cacheLen=n+e,this.nextReadPos+=e,0==this.cacheLen)throw tr.thrown(new p_)},skip:function(t){var e;0<this.cacheLen&&(e=this.cacheLen,this.cachePos+=e=t<e?t:e,this.cacheLen-=e,t-=e),this.nextReadPos+=t},readByte:function(){0==this.cacheLen&&this.fetch();var t=this.cache.b[this.cachePos++];return this.cacheLen--,t},readBytes:function(t,e,n){var s=0;if(n<256&&this.cacheLen<n&&this.fetch(),0<this.cacheLen){var i=this.cacheLen,i=i<n?i:n;if(t.blit(e,this.cache,this.cachePos,i),this.cachePos+=i,this.cacheLen-=i,0==(n-=i))return i;e+=i,s=i}return 0<n&&(i=this.entry.readBytes(t,e,this.nextReadPos,n),this.nextReadPos+=i,s+=i),s},close:function(){null!=this.cache&&(null==_c.PREFETCH_CACHE||_c.PREFETCH_CACHE.length<this.cache.length)&&(_c.PREFETCH_CACHE=this.cache),this.cache=null,this.cacheLen=0},__class__:_c}),{}),dc=(cc.toBitmap=function(t){var e=new V_(t.width,t.height);return e.ctx.drawImage(t,0,0),e},function(t){this.path=t}),pc=((e["hxd.fs.NotFound"]=dc).__name__="hxd.fs.NotFound",dc.prototype={toString:function(){return"Resource file not found '"+this.path+"'"},__class__:dc},function(){}),fc=((e["hxd.impl.Allocator"]=pc).__name__="hxd.impl.Allocator",pc.inst=null,pc.get=function(){return null==pc.inst&&(pc.inst=new pc),pc.inst},pc.prototype={allocBuffer:function(t,e,n){var s;switch(n){case 0:s=[so.Dynamic];break;case 1:s=[so.UniformBuffer,so.Dynamic];break;case 2:s=[so.RawFormat];break;case 3:s=[so.Quads,so.RawFormat]}return new io(t,e,s)},ofFloats:function(t,e,n){return this.ofSubFloats(t,e,t.pos/e|0,n)},ofSubFloats:function(t,e,n,s){e=this.allocBuffer(n,e,s);return e.uploadVector(t,0,n),e},disposeBuffer:function(t){t.dispose()},allocIndexBuffer:function(t){return new Kt(t)},ofIndexes:function(t,e){(e=null==e?-1:e)<0&&null!=t&&(e=t.length);var n=this.allocIndexBuffer(e);return n.upload(t,0,e),n},disposeIndexBuffer:function(t){t.dispose()},onContextLost:function(){},__class__:pc},(e["hxd.impl.AsyncLoader"]=Pi).__name__="hxd.impl.AsyncLoader",Pi.__isInterface__=!0,Pi.prototype={__class__:Pi},d["hxd.impl.MouseMode"]={__ename__:!0,__constructs__:null,Absolute:{_hx_name:"Absolute",_hx_index:0,__enum__:"hxd.impl.MouseMode",toString:l},Relative:((c=function(t,e){return{_hx_index:1,callback:t,restorePos:e,__enum__:"hxd.impl.MouseMode",toString:l}})._hx_name="Relative",c.__params__=["callback","restorePos"],c),AbsoluteUnbound:((c=function(t){return{_hx_index:2,restorePos:t,__enum__:"hxd.impl.MouseMode",toString:l}})._hx_name="AbsoluteUnbound",c.__params__=["restorePos"],c)}),gc=(fc.__constructs__=[fc.Absolute,fc.Relative,fc.AbsoluteUnbound],fc.__empty_constructs__=[fc.Absolute],(e["hxd.net.BinaryLoader"]=zi).__name__="hxd.net.BinaryLoader",zi.prototype={onLoaded:function(t){},onProgress:function(t,e){},onError:function(t){throw tr.thrown(t)},load:function(e){null==e&&(e=!1);var n=this,s=new XMLHttpRequest;s.open("GET",this.url,!0),s.responseType="arraybuffer",s.onerror=function(t){n.onError(s.statusText)},s.onload=function(t){200!=s.status?n.onError(s.statusText):n.onLoaded(e?s.response:Rt.ofData(s.response))},s.onprogress=function(t){n.onProgress(t.loaded||0|t.position,t.total||0|t.totalSize)},s.send()},__class__:zi},(e["hxd.res._Any.SingleFileSystem"]=Ri).__name__="hxd.res._Any.SingleFileSystem",Ri.__super__=Di,Ri.prototype=t(Di.prototype,{getBytes:function(t){return t==this.path?this.bytes:null},__class__:Ri}),(e["hxd.res.Resource"]=Vi).__name__="hxd.res.Resource",Vi.prototype={toString:function(){return this.entry.get_path()},watch:function(t){Vi.LIVE_UPDATE&&this.entry.watch(t)},__class__:Vi},function(t,e){Vi.call(this,e),this.loader=t}),mc=((e["hxd.res.Any"]=gc).__name__="hxd.res.Any",gc.fromBytes=function(t,e){return new Cc(new Ri(t,e)).load(t)},gc.__super__=Vi,gc.prototype=t(Vi.prototype,{toTexture:function(){return this.toImage().toTexture()},toTile:function(){return this.toImage().toTile()},toText:function(){return this.entry.getText()},toImage:function(){return this.loader.loadCache(this.entry.get_path(),vc)},to:function(t){return this.loader.loadCache(this.entry.get_path(),t)},__class__:gc}),function(){}),Ac=((e["hxd.res.BasisTextureLoader"]=mc).__name__="hxd.res.BasisTextureLoader",mc._workerSourceURL=null,mc._transcoderPending=null,mc._transcoderBinary=null,mc.getTexture=function(t){return mc.detectSupport(),mc.createTexture(t)},mc.detectSupport=function(){var t;switch(ao.CURRENT.driver.textureSupport._hx_index){case 21:t=9;break;case 22:t=10;break;case 23:t=0;break;case 24:t=3;break;default:throw tr.thrown("No suitable compressed texture format found.")}mc._workerConfig.format=t},mc.createTexture=function(n){var s,i,a;return mc.getWorker().then(function(t){return s=(i=t).worker,a=mc._workerNextTaskID++,new Promise(function(t,e){i.callbacks.h[a]={resolve:t,reject:e},i.taskCosts.h[a]=n.byteLength,i.taskLoad+=i.taskCosts.h[a],s.postMessage({type:"transcode",id:a,buffer:n},[n])})}).then(function(t){function e(t){for(var e=new A(r,l,null,t),n=0,s=0;s<o.length;){var i=o[s],a=(++s,Rt.ofData(i.data)),i=new Y_(i.width,i.height,a,t);e.uploadPixels(i,n),++n}return e}var n,r=t.width,l=t.height,o=t.mipmaps,s=t.format;switch(s){case 0:n=e(v.ETC(s));break;case 2:case 3:n=e(v.S3TC(s));break;case 8:case 9:n=e(v.PVRTC(s));break;case 10:n=e(v.ASTC(s));break;default:throw tr.thrown("BasisTextureLoader: No supported format available.")}return 1<o.length&&(n.flags|=4),n}).then(function(t){return null!=i&&0<a&&(i.taskLoad-=i.taskCosts.h[a],i.callbacks.remove(a),i.taskCosts.remove(a)),t})},mc.initTranscoder=function(){var n,t,s;return null==mc._transcoderBinary&&(n=new zi(mc.transcoderPath),t=new Promise(function(t,e){n.onLoaded=t,n.onError=e,n.load()}),s=new zi(mc.wasmPath),mc._transcoderPending=Promise.all([t,new Promise(function(t,e){s.onLoaded=t,s.onError=e,s.load(!0)})]).then(function(t){var e=t[0].toString(),t=t[1],n=Ac.func;return mc._workerSourceURL=URL.createObjectURL(new Blob([["/* basis_transcoder.js */",e,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n")])),mc._transcoderBinary=t})),mc._transcoderPending},mc.getWorker=function(){return mc.initTranscoder().then(function(t){var e,n;return mc._workerPool.length<mc.workerLimit?(e=new Worker(mc._workerSourceURL),n={worker:e,callbacks:new fl,taskCosts:new fl,taskLoad:0},e.postMessage({type:"init",config:mc._workerConfig,transcoderBinary:mc._transcoderBinary}),e.onmessage=function(t){var e=t.data;switch(e.type){case"error":n.callbacks.h[e.id].reject(e);break;case"transcode":n.callbacks.h[e.id].resolve(e);break;default:throw tr.thrown('BasisTextureLoader: Unexpected message, "'+e.type+'"')}},mc._workerPool.push(n)):mc._workerPool.sort(function(t,e){return t.taskLoad>e.taskLoad?-1:1}),mc._workerPool[mc._workerPool.length-1]})},function(){}),xc=((e["hxd.res.BasisWorker"]=Ac).__name__="hxd.res.BasisWorker",function(t){Vi.call(this,t),this.loader=Cc.currentInstance}),bc=((e["hxd.res.BitmapFont"]=xc).__name__="hxd.res.BitmapFont",xc.__super__=Vi,xc.prototype=t(Vi.prototype,{toFont:function(){return null==this.font&&(this.font=li.parse(this.entry.getBytes(),this.entry.get_path(),W(this,this.resolveTile))),this.font},toSdfFont:function(t,e,n,s){null==s&&(s=-1),null==n&&(n=.5),null==e&&(e=0),null==this.sdfFonts&&(this.sdfFonts=[]),null==t&&(t=this.toFont().size);for(var i=0,a=this.sdfFonts;i<a.length;){var r=a[i],l=(++i,r.type);if(1==l._hx_index&&r.size==t&&l.channel==e&&l.alphaCutoff==n&&l.smoothing==s)return r}return(r=li.parse(this.entry.getBytes(),this.entry.get_path(),W(this,this.resolveSdfTile))).type=Yl.SignedDistanceField(e,n,s),r.resizeTo(t),this.sdfFonts.push(r),r},resolveSdfTile:function(t){t=this.loader.load(t).toTexture();return t.set_filter(wo.Linear),Jl.fromTexture(t)},resolveTile:function(t){return this.loader.load(t).toTile()},__class__:xc}),function(t){Vi.call(this,t)}),yc=((e["hxd.res.Font"]=bc).__name__="hxd.res.Font",bc.__super__=Vi,bc.prototype=t(Vi.prototype,{__class__:bc}),function(t){Vi.call(this,t)}),wc=((e["hxd.res.Gradients"]=yc).__name__="hxd.res.Gradients",yc.createTexture=function(s,i){if(0!=(i&i-1))throw tr.thrown("gradient resolution should be a power of two");function t(){for(var t=Y_.alloc(i,r,v.ARGB),e=0,n=0;n<s.length;)yc.appendPixels(t,s[n++],l.width,a,e),e+=a;l.uploadPixels(t),t.dispose()}var a=1<s.length?3:1,e=a*s.length,r=(--e,e=(e=(e=(e=(e|=e>>1)|e>>2)|e>>4)|e>>8)|e>>16,++e),l=new A(i,r);return t(),l.realloc=t,l},yc.appendPixels=function(t,e,n,s,i){for(var a=[],r=0,l=e.gradientStops;r<l.length;){var o,h=l[r],u=(++r,h.colorStop.color);switch(u._hx_index){case 0:o=new R(u.r/255,u.g/255,u.b/255);break;case 1:o=yc.HSVtoRGB(u.h,u.s/100,u.b/100)}o.w=h.opacity/100,a.push({value:o,loc:(n-1)*h.colorStop.location/e.interpolation|0})}a.sort(function(t,e){return t.loc-e.loc}),0<a[0].loc&&a.unshift({value:a[0].value,loc:0}),a[a.length-1].loc<n-1&&a.push({value:a[a.length-1].value,loc:n-1});for(var _=0,c=0;_<n;){for(var d=a[c].loc,p=a[c+1].loc,f=a[c].value,g=a[c+1].value;_<=p;){for(var m=(_-d)/(p-d),A=f.x,x=A+m*(g.x-A),A=f.y,b=A+m*(g.y-A),A=f.z,y=A+m*(g.z-A),A=f.w,w=A+m*(g.w-A),r=0;r<s;)t.setPixel(_,i+r++,(255*(w<0?0:1<w?1:w)+.499|0)<<24|(255*(x<0?0:1<x?1:x)+.499|0)<<16|(255*(b<0?0:1<b?1:b)+.499|0)<<8|255*(y<0?0:1<y?1:y)+.499|0);++_}++c}},yc.HSVtoRGB=function(t,e,n){if(0==e)return new R(n,n,n);t/=60;var s=Math.floor(t),t=t-s,i=n*(1-e),a=n*(1-e*t),r=n*(1-e*(1-t));switch(s){case 0:return new R(n,r,i);case 1:return new R(a,n,i);case 2:return new R(i,n,r);case 3:return new R(i,a,n);case 4:return new R(r,i,n);default:return new R(n,i,a)}},yc.__super__=Vi,yc.prototype=t(Vi.prototype,{toTexture:function(t,e){return null==e&&(e=256),yc.createTexture([this.getData().h[t]],e)},toTextureMap:function(t){null==t&&(t=256);for(var e=new N,n=this.getData().h,s=Object.keys(n),i=s.length,a=0;a<i;){var r=n[s[a++]],l=r.name,r=yc.createTexture([r],t);e.h[l]=r}return e},getData:function(){var t;return null==this.data&&(t=this.entry.open(),this.data=new di(t).read(),t.close()),this.data},__class__:yc}),d["hxd.res.ImageInfoFlag"]={__ename__:!0,__constructs__:null,IsCube:{_hx_name:"IsCube",_hx_index:0,__enum__:"hxd.res.ImageInfoFlag",toString:l},Dxt10Header:{_hx_name:"Dxt10Header",_hx_index:1,__enum__:"hxd.res.ImageInfoFlag",toString:l}}),vc=(wc.__constructs__=[wc.IsCube,wc.Dxt10Header],wc.__empty_constructs__=[wc.IsCube,wc.Dxt10Header],(e["hxd.res.ImageInfo"]=Qi).__name__="hxd.res.ImageInfo",Qi.prototype={__class__:Qi},function(t){Vi.call(this,t)}),Cc=((e["hxd.res.Image"]=vc).__name__="hxd.res.Image",vc.ASYNC_LOADER=null,vc.setupTextureFlags=function(t){},vc.__super__=Vi,vc.prototype=t(Vi.prototype,{getInfo:function(){if(null==this.inf){this.inf=new Qi;var e,t=this.entry.open();t.fetch(256);try{e=t.readUInt16()}catch(t){if(!(tr.caught(t).unwrap()instanceof p_))throw t;e=0}switch(e){case 16163:for(this.inf.dataFormat=6;""!=t.readLine(););var n=t.readLine().split(" ");this.inf.pixelFormat=v.RGBA32F,this.inf.height=Ja.parseInt(n[1]),this.inf.width=Ja.parseInt(n[3]);break;case 17011:this.inf.dataFormat=7,t.skip(63),this.inf.pixelFormat=v.BGRA,t.skip(t.readInt32()-42),this.inf.width=t.readUInt16(),this.inf.height=t.readUInt16();break;case 17476:this.inf.dataFormat=4,t.skip(10),this.inf.height=t.readInt32(),this.inf.width=t.readInt32(),t.skip(8),this.inf.mipLevels=t.readInt32(),t.skip(48);var s,i=t.readInt32(),a=t.readInt32(),r=t.readInt32(),l=t.readInt32(),o=t.readInt32(),h=t.readInt32(),u=t.readInt32();switch(t.readInt32(),65024==(65024&t.readInt32())&&(this.inf.flags|=1<<wc.IsCube._hx_index),16777215&a){case 0:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else if(0!=(64&i)){if(32!=r)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));switch(l){case 255:if(65280!=o)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));if(16711680!=h)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));if(-16777216!=u)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));this.inf.pixelFormat=v.RGBA;break;case 16711680:if(65280!=o)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));if(255!=h)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));if(-16777216!=u)throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u));this.inf.pixelFormat=v.BGRA;break;default:throw tr.thrown("Unsupported RGB DDS "+r+"bits "+ut.hex(l)+"/"+ut.hex(o)+"/"+ut.hex(h)+"/"+ut.hex(u))}}break;case 111:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else this.inf.pixelFormat=v.R16F;break;case 112:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else this.inf.pixelFormat=v.RG16F;break;case 113:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else this.inf.pixelFormat=v.RGBA16F;break;case 114:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else this.inf.pixelFormat=v.R32F;break;case 115:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else this.inf.pixelFormat=v.RG32F;break;case 116:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}else this.inf.pixelFormat=v.RGBA32F;break;case 4805697:switch((a>>>24)-48){case 1:c=v.S3TC(4);break;case 2:c=v.S3TC(5);break;default:c=null}this.inf.pixelFormat=c;break;case 5527620:switch((a>>>24)-48){case 1:c=v.S3TC(1);break;case 2:case 3:c=v.S3TC(2);break;case 4:case 5:c=v.S3TC(3);break;default:c=null}this.inf.pixelFormat=c;break;default:if(808540228==a){switch(t.skip(12),this.inf.flags|=1<<wc.Dxt10Header._hx_index,s=t.readInt32()){case 28:c=v.RGBA;break;case 71:c=v.S3TC(1);break;case 74:c=v.S3TC(2);break;case 77:c=v.S3TC(3);break;case 95:c=v.S3TC(6);break;case 98:c=v.S3TC(7);break;default:throw tr.thrown(this.entry.get_path()+" has unsupported DXGI format "+s)}this.inf.pixelFormat=c,t.readInt32(),t.skip(4),this.inf.layerCount=t.readInt32()}}if(null==this.inf.pixelFormat)throw n=String.fromCodePoint(255&a)+String.fromCodePoint(a>>8&255)+String.fromCodePoint(a>>16&255)+String.fromCodePoint(a>>>24),(255&a)==a&&(n="0x"+a),tr.thrown(this.entry.get_path()+" has unsupported 4CC "+n);break;case 18759:this.inf.dataFormat=2,this.inf.pixelFormat=v.BGRA,t.readInt32(),this.inf.width=t.readUInt16(),this.inf.height=t.readUInt16();break;case 20617:for(this.inf.dataFormat=1,t.set_bigEndian(!0),t.skip(6);;){var _=t.readInt32();if(1229472850==t.readInt32()){this.inf.width=t.readInt32(),this.inf.height=t.readInt32();var c,d=t.readByte();switch(d){case 4:case 8:c=v.BGRA;break;case 16:c=v.R16U;break;case 48:c=v.RGB16U;break;case 64:c=v.RGBA16U;break;default:throw tr.thrown("Unsupported png format "+d+"("+this.entry.get_path()+")")}this.inf.pixelFormat=c;break}t.skip(_+4)}break;case 55551:this.inf.dataFormat=0,this.inf.pixelFormat=v.BGRA,t.set_bigEndian(!0);t:for(;;)switch(t.readUInt16()){case 65472:case 65473:case 65474:t.readUInt16(),t.readByte(),this.inf.height=t.readUInt16(),this.inf.width=t.readUInt16();break t;default:t.skip(t.readUInt16()-2)}break;default:if("tga"==this.entry.get_extension())this.inf.dataFormat=3,this.inf.pixelFormat=v.ARGB,t.skip(10),this.inf.width=t.readUInt16(),this.inf.height=t.readUInt16();else{if("raw"!=this.entry.get_extension())throw tr.thrown("Unsupported texture format "+this.entry.get_path());this.inf.dataFormat=5,this.inf.pixelFormat=v.R32F;n=0|Math.sqrt(this.entry.get_size()>>2);if(this.entry.get_size()!=n*n*4){var p=0|Math.sqrt(this.entry.get_size()>>1);if(this.entry.get_size()!=p*p*2)throw tr.thrown("RAW format does not match 32 bit per components on "+n+"x"+n);this.inf.pixelFormat=v.R16F,n=p}this.inf.width=this.inf.height=n}}if(t.close(),null==this.inf.pixelFormat)throw tr.thrown("Unsupported internal format ("+this.entry.get_path()+")");if(0!=vc.MIPMAP_MAX_SIZE&&1<this.inf.mipLevels)for(;0==(7&(this.inf.width|this.inf.height))&&this.inf.width>>1>=vc.MIPMAP_MAX_SIZE&&this.inf.height>>1>=vc.MIPMAP_MAX_SIZE;)this.inf.width>>=1,this.inf.height>>=1,this.inf.mipLevels--,this.inf.mipOffset++}return this.inf},getPixels:function(t,e,n){switch(null==n&&(n=0),this.getInfo().dataFormat){case 0:var s=this.entry.getBytes();if(this.inf.pixelFormat!=v.BGRA)throw tr.thrown("No support to decode "+Ja.string(this.inf.pixelFormat)+" on this platform ("+this.entry.get_path()+")");try{p=kc.decode(s)}catch(u){var i=tr.caught(u).unwrap();throw tr.thrown("Failed to decode JPG "+this.entry.get_path()+" ("+Ja.string(i)+")")}r=new Y_(p.width,p.height,p.pixels,v.BGRA);break;case 1:s=this.entry.getBytes();if(this.inf.pixelFormat!=v.BGRA)throw tr.thrown("No support to decode "+Ja.string(this.inf.pixelFormat)+" on this platform ("+this.entry.get_path()+")");var a=new k(new c_(s));a.checkCRC=!1,r=Y_.alloc(this.inf.width,this.inf.height,v.BGRA),Vt.extract32(a.read(),r.bytes,e),e&&(r.flags|=4);break;case 2:var a=new M(new c_(this.entry.getBytes())).read(),r=t==v.RGBA?new Y_(this.inf.width,this.inf.height,S.extractFullRGBA(a,0),v.RGBA):new Y_(this.inf.width,this.inf.height,S.extractFullBGRA(a,0),v.BGRA);break;case 3:var l=new B(new c_(this.entry.getBytes())).read();if(l.header.imageType!=jr.UncompressedTrueColor||32!=l.header.bitsPerPixel)throw tr.thrown("Not supported TGA "+Ja.string(l.header.imageType)+"/"+l.header.bitsPerPixel);var o=l.header.width,h=l.header.height;if(t==v.RGBA)for(var s=(r=Y_.alloc(o,h,v.RGBA)).bytes,u=0,i=o*h;u<i;){var _=u++,c=l.imageData[_];s.setInt32(_<<2,c=c>>>24|c<<8)}else{r=Y_.alloc(o,h,v.ARGB);for(var d=X_.fromPixels(r),p=0,u=0;u<h;)for(var f=u++,i=0;i<o;){c=l.imageData[p++];d.bytes.setInt32((i+++f*d.width<<2)+d.offset,c>>>24|c>>8&65280|c<<8&16711680|c<<24)}}switch(l.header.imageOrigin._hx_index){case 0:r.flags|=4;break;case 2:break;default:throw tr.thrown("Not supported "+Ja.string(l.header.imageOrigin))}break;case 4:var g=128,m=0;if(0!=(2&this.inf.flags)&&(g=148),0<(n+=this.inf.mipOffset)){for(var A=this.inf.mipLevels+this.inf.mipOffset,x=n/A|0,m=n%A,b=0,u=0;u<A;){var y,_=u++;if(0==(o=this.inf.width<<this.inf.mipOffset>>_)&&(o=1),0==(h=this.inf.height<<this.inf.mipOffset>>_)&&(h=1),b+=y=Y_.calcDataSize(o,h,this.inf.pixelFormat),_<m)g+=y;else if(0==x)break}g+=b*x}0==(o=this.inf.width>>m-this.inf.mipOffset)&&(o=1),0==(h=this.inf.height>>m-this.inf.mipOffset)&&(h=1),this.inf.mipLevels+this.inf.mipOffset==1&&0==(1&this.inf.flags)?s=this.entry.getBytes():(y=Y_.calcDataSize(o,h,this.inf.pixelFormat),s=new Rt(new ArrayBuffer(y)),this.entry.readFull(s,g,y),g=0),r=new Y_(o,h,s,this.inf.pixelFormat,g);break;case 5:s=this.entry.getBytes();r=new Y_(this.inf.width,this.inf.height,s,this.inf.pixelFormat);break;case 6:a=pi.decode(this.entry.getBytes(),!1);r=new Y_(a.width,a.height,a.bytes,this.inf.pixelFormat);break;case 7:var w,s=this.entry.getBytes();switch(ao.CURRENT.driver.checkTextureSupport()._hx_index){case 21:w=v.PVRTC(9);break;case 22:w=v.ASTC(10);break;case 23:w=v.ETC(0);break;case 24:w=v.S3TC(0);break;default:throw tr.thrown("Unsupported basis texture")}r=new Y_(this.inf.width,this.inf.height,s,w)}return null!=t&&r.convert(t),null!=e&&r.setFlip(e),r},watchCallb:function(){var t=this.inf.width,e=this.inf.height,n=(this.inf=null,this.getInfo());t==n.width&&e==n.height||this.tex.resize(n.width,n.height),this.tex.realloc=null,this.loadTexture()},loadTexture:function(f){var t,g=this;0==this.getInfo().dataFormat?(this.tex.flags|=512,this.entry.loadBitmap(function(t){t=cc.toBitmap(t);if(g.tex.alloc(),g.tex.uploadBitmap(t),t.ctx=null,t.pixel=null,g.tex.realloc=function(){g.loadTexture()},g.tex.flags&=-513,null!=g.tex.waitLoads)for(var e=g.tex.waitLoads,n=(g.tex.waitLoads=null,0);n<e.length;)e[n++]();vc.ENABLE_AUTO_WATCH&&g.watch(W(g,g.watchCallb))})):(t=function(){if((g.enableAsyncLoading||0!=(4096&g.tex.flags))&&null==f&&vc.ASYNC_LOADER.isSupported(g))g.tex.dispose(),g.tex.format=v.RGBA,g.tex.width=1,g.tex.height=1,g.tex.customMipLevels=1,g.tex.flags|=512,g.tex.alloc(),g.tex.uploadPixels(vc.BLACK_1x1),g.tex.width=g.inf.width,g.tex.height=g.inf.height,vc.ASYNC_LOADER.load(g),g.tex.realloc=function(){g.loadTexture()};else{if(g.tex.customMipLevels=g.inf.mipLevels,g.tex.alloc(),4==g.inf.dataFormat)for(var t=128,e=(0!=(2&g.inf.flags)&&(t=148),0),n=g.tex.get_layerCount();e<n;){for(var s=e++,i=0,a=g.inf.mipOffset;i<a;){var r=i++;t+=Y_.calcDataSize(g.inf.width<<g.inf.mipOffset>>r,g.inf.height<<g.inf.mipOffset>>r,g.inf.pixelFormat)}for(var l=0,o=g.inf.mipLevels;l<o;){var h=l++,u=g.inf.width>>h,_=g.inf.height>>h,c=(0==u&&(u=1),0==_&&(_=1),Y_.calcDataSize(u,_,g.inf.pixelFormat)),d=null==f?g.entry.fetchBytes(t,c):f;g.tex.uploadPixels(new Y_(u,_,d,g.inf.pixelFormat,null==f?0:t),h,s),t+=c}}else for(e=0,n=g.tex.get_layerCount();e<n;)for(s=e++,i=0,a=g.inf.mipLevels;i<a;){var r=i++,p=g.getPixels(g.tex.format,null,s*g.inf.mipLevels+r);g.tex.uploadPixels(p,r,s),p.dispose()}g.tex.realloc=function(){g.loadTexture()},vc.ENABLE_AUTO_WATCH&&g.watch(W(g,g.watchCallb))}},this.entry.get_isAvailable()?t():this.entry.load(t))},toTexture:function(){if(null==this.tex){this.getInfo();var t=[Mo.NoAlloc],e=this.inf.pixelFormat;if(e!=v.BGRA&&e!=v.ARGB&&e!=v.RGBA||(e=A.nativeFormat),0!=(1&this.inf.flags)&&t.push(Mo.Cube),1<this.inf.mipLevels&&(t.push(Mo.MipMapped),t.push(Mo.ManualMipMapGen)),e==v.R16U)throw tr.thrown("Unsupported texture format "+Ja.string(e)+" for "+this.entry.get_path());1<this.inf.layerCount?this.tex=new be(this.inf.width,this.inf.height,this.inf.layerCount,t,e):this.tex=new A(this.inf.width,this.inf.height,t,e),vc.DEFAULT_FILTER!=wo.Linear&&this.tex.set_filter(vc.DEFAULT_FILTER),this.tex.setName(this.entry.get_path()),vc.setupTextureFlags(this.tex),this.loadTexture()}return this.tex},toTile:function(){return this.getInfo(),Jl.fromTexture(this.toTexture()).sub(0,0,this.inf.width,this.inf.height)},__class__:vc}),function(t){this.fs=t,this.cache=new N}),Mc=((e["hxd.res.Loader"]=Cc).__name__="hxd.res.Loader",Cc.currentInstance=null,Cc.prototype={load:function(t){return new gc(this,this.fs.get(t))},loadCache:function(t,e){var n=this.cache.h[t];if(null==n){var s=this.fs.get(t),i=Cc.currentInstance;Cc.currentInstance=this,n=b.createInstance(e,[s]),Cc.currentInstance=i,this.cache.h[t]=n}else if(null==(er.__downcastCheck(n,e)?n:null))throw tr.thrown(t+" has been reintrepreted from "+Ja.string(er.getClass(n))+" to "+Ja.string(e));return n},__class__:Cc},function(t){Vi.call(this,t)}),Sc=((e["hxd.res.Model"]=Mc).__name__="hxd.res.Model",Mc.__super__=Vi,Mc.prototype=t(Vi.prototype,{toHmd:function(){var t=this.entry.open(),e=new Ti(t).readHeader();return t.close(),new Ii(this,e)},__class__:Mc}),d["hxd.res.Filter"]={__ename__:!0,__constructs__:null,Fast:{_hx_name:"Fast",_hx_index:0,__enum__:"hxd.res.Filter",toString:l},Chromatic:{_hx_name:"Chromatic",_hx_index:1,__enum__:"hxd.res.Filter",toString:l}}),kc=(Sc.__constructs__=[Sc.Fast,Sc.Chromatic],Sc.__empty_constructs__=[Sc.Fast,Sc.Chromatic],(e["hxd.res._NanoJpeg.Component"]=Oi).__name__="hxd.res._NanoJpeg.Component",Oi.prototype={__class__:Oi},function(){this.comps=[new Oi,new Oi,new Oi].slice(0),this.qtab=[new Array(64),new Array(64),new Array(64),new Array(64)].slice(0),this.counts=new Array(16),this.block=new Array(64),this.njZZ=[0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63].slice(0),this.vlctab=[null,null,null,null,null,null,null,null].slice(0)}),Bc=((e["hxd.res.NanoJpeg"]=kc).__name__="hxd.res.NanoJpeg",kc.decode=function(t,e,n,s){return null==s&&(s=-1),null==n&&(n=0),null==kc.inst&&(kc.inst=new kc),kc.inst.njInit(t,n,s,e),kc.inst.njDecode()},kc.prototype={njInit:function(t,e,n,s){this.bytes=t,this.pos=e,this.filter=null==s?Sc.Chromatic:s,n<0&&(n=t.length-e),null==this.vlctab[0]&&(this.vlctab[0]=new Rt(new ArrayBuffer(131072))),null==this.vlctab[1]&&(this.vlctab[1]=new Rt(new ArrayBuffer(131072))),null==this.vlctab[2]&&(this.vlctab[2]=new Rt(new ArrayBuffer(131072))),null==this.vlctab[3]&&(this.vlctab[3]=new Rt(new ArrayBuffer(131072))),this.size=n,this.qtused=0,this.qtavail=0,this.rstinterval=0,this.length=0,this.buf=0,this.bufbits=0,this.progressive=!1,this.comps[0].dcpred=0,this.comps[1].dcpred=0,this.comps[2].dcpred=0},cleanup:function(){this.bytes=null;for(var t=0,e=this.comps;t<e.length;){var n=e[t];++t,null!=n.pixels&&(n.pixels=null)}null!=this.vlctab[0]&&(this.vlctab[0]=null),null!=this.vlctab[1]&&(this.vlctab[1]=null),null!=this.vlctab[2]&&(this.vlctab[2]=null),null!=this.vlctab[3]&&(this.vlctab[3]=null),null!=this.vlctab[4]&&(this.vlctab[4]=null),null!=this.vlctab[5]&&(this.vlctab[5]=null),null!=this.vlctab[6]&&(this.vlctab[6]=null),null!=this.vlctab[7]&&(this.vlctab[7]=null)},njShowBits:function(t){if(0==t)return 0;for(;this.bufbits<t;)if(this.size<=0)this.buf=this.buf<<8|255,this.bufbits+=8;else{var e=this.bytes.b[this.pos];if(this.pos++,this.size--,this.bufbits+=8,this.buf=this.buf<<8|e,255==e){var n=this.bytes.b[this.pos];switch(this.pos++,this.size--,n){case 217:this.size=0;break;case 0:case 255:break;default:this.buf=this.buf<<8|n,this.bufbits+=8}}}return this.buf>>this.bufbits-t&(1<<t)-1},njDecodeSOF:function(){switch(this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2,8!=this.bytes.b[this.pos]&&this.notSupported(),this.height=this.bytes.b[this.pos+1]<<8|this.bytes.b[this.pos+2],this.width=this.bytes.b[this.pos+3]<<8|this.bytes.b[this.pos+4],this.ncomp=this.bytes.b[this.pos+5],this.pos+=6,this.size-=6,this.length-=6,this.ncomp){case 1:case 3:break;default:this.notSupported()}for(var t=0,e=0,n=0,s=this.ncomp;n<s;)(i=this.comps[n++]).cid=this.bytes.b[this.pos],i.ssx=this.bytes.b[this.pos+1]>>4,0!=(i.ssx&i.ssx-1)&&this.notSupported(),i.ssy=15&this.bytes.b[this.pos+1],0!=(i.ssy&i.ssy-1)&&this.notSupported(),i.qtsel=this.bytes.b[this.pos+2],this.pos+=3,this.size-=3,this.length-=3,this.qtused|=1<<i.qtsel,i.ssx>t&&(t=i.ssx),i.ssy>e&&(e=i.ssy);1==this.ncomp&&((i=this.comps[0]).ssx=i.ssy=t=e=1),this.mbsizex=t<<3,this.mbsizey=e<<3,this.mbwidth=(this.width+this.mbsizex-1)/this.mbsizex|0,this.mbheight=(this.height+this.mbsizey-1)/this.mbsizey|0;for(var i,n=0,s=this.ncomp;n<s;)(i=this.comps[n++]).width=(this.width*i.ssx+t-1)/t|0,i.stride=i.width+7&2147483640,i.height=(this.height*i.ssy+e-1)/e|0,i.stride=this.mbwidth*this.mbsizex*i.ssx/t|0,(i.width<3&&i.ssx!=t||i.height<3&&i.ssy!=e)&&this.notSupported(),i.pixels=new Rt(new ArrayBuffer(i.stride*(this.mbheight*this.mbsizey*i.ssy/e|0)));var a=this.length;this.pos+=a,this.size-=a,this.length-=a},njDecodeDQT:function(){for(this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;65<=this.length;){for(var t=this.bytes.b[this.pos],e=(this.qtavail|=1<<t,this.qtab[t]),n=0;n<64;){var s=n++;e[s]=this.bytes.b[this.pos+(1+s)]}this.pos+=65,this.size-=65,this.length-=65}},njDecodeDHT:function(){for(this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;17<=this.length;){var t=(t=this.bytes.b[this.pos])>>4&1|(3&t)<<1;this.counts[0]=this.bytes.b[this.pos+1],this.counts[1]=this.bytes.b[this.pos+2],this.counts[2]=this.bytes.b[this.pos+3],this.counts[3]=this.bytes.b[this.pos+4],this.counts[4]=this.bytes.b[this.pos+5],this.counts[5]=this.bytes.b[this.pos+6],this.counts[6]=this.bytes.b[this.pos+7],this.counts[7]=this.bytes.b[this.pos+8],this.counts[8]=this.bytes.b[this.pos+9],this.counts[9]=this.bytes.b[this.pos+10],this.counts[10]=this.bytes.b[this.pos+11],this.counts[11]=this.bytes.b[this.pos+12],this.counts[12]=this.bytes.b[this.pos+13],this.counts[13]=this.bytes.b[this.pos+14],this.counts[14]=this.bytes.b[this.pos+15],this.counts[15]=this.bytes.b[this.pos+16],this.pos+=17,this.size-=17,this.length-=17;for(var e=this.vlctab[t],n=0,s=65536,i=65536,a=1;a<17;){var r=a++,l=(i>>=1,this.counts[r-1]);if(0!=l){s-=l<<16-r;for(var o=0;o<l;)for(var h=this.bytes.b[this.pos+o++],u=0,_=i;u<_;)++u,e.b[n++]=r,e.b[n++]=h;this.pos+=l,this.size-=l,this.length-=l}}for(;0!=s--;)e.b[n]=0,n+=2}},njDecodeDRI:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2,this.rstinterval=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];var t=this.length;this.pos+=t,this.size-=t,this.length-=t},njDecodeBlock:function(t,e){for(var n,s=t.pixels,i=0,a=0;a<64;)this.block[a++]=0;var r=t.dcpred,l=this.vlctab[t.dctabsel],o=this.njShowBits(16),h=l.b[o<<1],u=(this.bufbits<h&&this.njShowBits(h),this.bufbits-=h,o=l.b[o<<1|1],l=0==(h=15&(this.vlcCode=o))?0:(c=this.njShowBits(h),this.bufbits-=h,o=(o=c)<1<<h-1?c+(1+(-1<<h)):o),t.dcpred=r+l,this.qtab[t.qtsel]),_=this.vlctab[t.actabsel];this.block[0]=t.dcpred*u[0];do{var c,o=this.njShowBits(16),h=_.b[o<<1]}while((this.bufbits<h&&this.njShowBits(h),this.bufbits-=h,o=_.b[o<<1|1],n=0==(h=15&(this.vlcCode=o))?0:(c=this.njShowBits(h),this.bufbits-=h,o=(o=c)<1<<h-1?c+(1+(-1<<h)):o),0!=this.vlcCode)&&(i+=1+(this.vlcCode>>4),this.block[this.njZZ[i]]=n*u[i],i<63));var r=this.block[4]<<11,l=this.block[6],d=this.block[2],p=this.block[1],f=this.block[7],g=this.block[5],m=this.block[3];0==(r|l|d|p|f|g|m)?(w=this.block[7]=this.block[0]<<3,y=this.block[6]=w,w=this.block[5]=y,y=this.block[4]=w,w=this.block[3]=y,y=this.block[2]=w,w=this.block[1]=y,this.block[0]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[0]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[0]=m+r>>8,this.block[1]=d+l>>8,this.block[2]=A+p>>8,this.block[3]=x+g>>8,this.block[4]=x-g>>8,this.block[5]=A-p>>8,this.block[6]=d-l>>8,this.block[7]=m-r>>8),0==((r=this.block[12]<<11)|(l=this.block[14])|(d=this.block[10])|(p=this.block[9])|(f=this.block[15])|(g=this.block[13])|(m=this.block[11]))?(w=this.block[15]=this.block[8]<<3,y=this.block[14]=w,w=this.block[13]=y,y=this.block[12]=w,w=this.block[11]=y,y=this.block[10]=w,w=this.block[9]=y,this.block[8]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[8]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[8]=m+r>>8,this.block[9]=d+l>>8,this.block[10]=A+p>>8,this.block[11]=x+g>>8,this.block[12]=x-g>>8,this.block[13]=A-p>>8,this.block[14]=d-l>>8,this.block[15]=m-r>>8),0==((r=this.block[20]<<11)|(l=this.block[22])|(d=this.block[18])|(p=this.block[17])|(f=this.block[23])|(g=this.block[21])|(m=this.block[19]))?(w=this.block[23]=this.block[16]<<3,y=this.block[22]=w,w=this.block[21]=y,y=this.block[20]=w,w=this.block[19]=y,y=this.block[18]=w,w=this.block[17]=y,this.block[16]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[16]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[16]=m+r>>8,this.block[17]=d+l>>8,this.block[18]=A+p>>8,this.block[19]=x+g>>8,this.block[20]=x-g>>8,this.block[21]=A-p>>8,this.block[22]=d-l>>8,this.block[23]=m-r>>8),0==((r=this.block[28]<<11)|(l=this.block[30])|(d=this.block[26])|(p=this.block[25])|(f=this.block[31])|(g=this.block[29])|(m=this.block[27]))?(w=this.block[31]=this.block[24]<<3,y=this.block[30]=w,w=this.block[29]=y,y=this.block[28]=w,w=this.block[27]=y,y=this.block[26]=w,w=this.block[25]=y,this.block[24]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[24]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[24]=m+r>>8,this.block[25]=d+l>>8,this.block[26]=A+p>>8,this.block[27]=x+g>>8,this.block[28]=x-g>>8,this.block[29]=A-p>>8,this.block[30]=d-l>>8,this.block[31]=m-r>>8),0==((r=this.block[36]<<11)|(l=this.block[38])|(d=this.block[34])|(p=this.block[33])|(f=this.block[39])|(g=this.block[37])|(m=this.block[35]))?(w=this.block[39]=this.block[32]<<3,y=this.block[38]=w,w=this.block[37]=y,y=this.block[36]=w,w=this.block[35]=y,y=this.block[34]=w,w=this.block[33]=y,this.block[32]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[32]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[32]=m+r>>8,this.block[33]=d+l>>8,this.block[34]=A+p>>8,this.block[35]=x+g>>8,this.block[36]=x-g>>8,this.block[37]=A-p>>8,this.block[38]=d-l>>8,this.block[39]=m-r>>8),0==((r=this.block[44]<<11)|(l=this.block[46])|(d=this.block[42])|(p=this.block[41])|(f=this.block[47])|(g=this.block[45])|(m=this.block[43]))?(w=this.block[47]=this.block[40]<<3,y=this.block[46]=w,w=this.block[45]=y,y=this.block[44]=w,w=this.block[43]=y,y=this.block[42]=w,w=this.block[41]=y,this.block[40]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[40]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[40]=m+r>>8,this.block[41]=d+l>>8,this.block[42]=A+p>>8,this.block[43]=x+g>>8,this.block[44]=x-g>>8,this.block[45]=A-p>>8,this.block[46]=d-l>>8,this.block[47]=m-r>>8),0==((r=this.block[52]<<11)|(l=this.block[54])|(d=this.block[50])|(p=this.block[49])|(f=this.block[55])|(g=this.block[53])|(m=this.block[51]))?(w=this.block[55]=this.block[48]<<3,y=this.block[54]=w,w=this.block[53]=y,y=this.block[52]=w,w=this.block[51]=y,y=this.block[50]=w,w=this.block[49]=y,this.block[48]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[48]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[48]=m+r>>8,this.block[49]=d+l>>8,this.block[50]=A+p>>8,this.block[51]=x+g>>8,this.block[52]=x-g>>8,this.block[53]=A-p>>8,this.block[54]=d-l>>8,this.block[55]=m-r>>8);0==((r=this.block[60]<<11)|(l=this.block[62])|(d=this.block[58])|(p=this.block[57])|(f=this.block[63])|(g=this.block[61])|(m=this.block[59]))?(w=this.block[63]=this.block[56]<<3,y=this.block[62]=w,w=this.block[61]=y,y=this.block[60]=w,w=this.block[59]=y,y=this.block[58]=w,w=this.block[57]=y,this.block[56]=w):(p=(x=565*(p+f))+2276*p,f=x-3406*f,g=(x=2408*(g+m))-799*g,m=x-4017*m,x=(A=128+(this.block[56]<<11))+r,A-=r,l=(r=1108*(d+l))-3784*l,d=r+1568*d,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,this.block[56]=m+r>>8,this.block[57]=d+l>>8,this.block[58]=A+p>>8,this.block[59]=x+g>>8,this.block[60]=x-g>>8,this.block[61]=A-p>>8,this.block[62]=d-l>>8,this.block[63]=m-r>>8);var A,x,b,y=e,w=t.stride,y=(0==((r=this.block[32]<<8)|(l=this.block[48])|(d=this.block[16])|(p=this.block[8])|(f=this.block[56])|(g=this.block[40])|(m=this.block[24]))?(b=128+(this.block[0]+32>>6),s.b[e]=r=b<0?0:255<b?255:b,s.b[y=e+w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[0]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[e]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y=e+w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),1+e),w=t.stride,y=(0==((r=this.block[33]<<8)|(l=this.block[49])|(d=this.block[17])|(p=this.block[9])|(f=this.block[57])|(g=this.block[41])|(m=this.block[25]))?(b=128+(this.block[1]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[1]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),2+e),w=t.stride,y=(0==((r=this.block[34]<<8)|(l=this.block[50])|(d=this.block[18])|(p=this.block[10])|(f=this.block[58])|(g=this.block[42])|(m=this.block[26]))?(b=128+(this.block[2]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[2]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),3+e),w=t.stride,y=(0==((r=this.block[35]<<8)|(l=this.block[51])|(d=this.block[19])|(p=this.block[11])|(f=this.block[59])|(g=this.block[43])|(m=this.block[27]))?(b=128+(this.block[3]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[3]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),4+e),w=t.stride,y=(0==((r=this.block[36]<<8)|(l=this.block[52])|(d=this.block[20])|(p=this.block[12])|(f=this.block[60])|(g=this.block[44])|(m=this.block[28]))?(b=128+(this.block[4]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[4]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),5+e),w=t.stride,y=(0==((r=this.block[37]<<8)|(l=this.block[53])|(d=this.block[21])|(p=this.block[13])|(f=this.block[61])|(g=this.block[45])|(m=this.block[29]))?(b=128+(this.block[5]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[5]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),6+e),w=t.stride,y=(0==((r=this.block[38]<<8)|(l=this.block[54])|(d=this.block[22])|(p=this.block[14])|(f=this.block[62])|(g=this.block[46])|(m=this.block[30]))?(b=128+(this.block[6]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[6]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b),7+e),w=t.stride;0==((r=this.block[39]<<8)|(l=this.block[55])|(d=this.block[23])|(p=this.block[15])|(f=this.block[63])|(g=this.block[47])|(m=this.block[31]))?(b=128+(this.block[7]+32>>6),s.b[y]=r=b<0?0:255<b?255:b,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r,s.b[y+=w]=r):(p=(x=565*(p+f)+4)+2276*p>>3,f=x-3406*f>>3,g=(x=2408*(g+m)+4)-799*g>>3,m=x-4017*m>>3,x=(A=8192+(this.block[7]<<8))+r,A-=r,l=(r=1108*(d+l)+4)-3784*l>>3,d=r+1568*d>>3,r=p+g,p-=g,g=f+m,f-=m,m=x+d,x-=d,d=A+l,A-=l,l=181*(p+f)+128>>8,p=181*(p-f)+128>>8,s.b[y]=(b=128+(m+r>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d+l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A+p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x+g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(x-g>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(A-p>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(d-l>>14))<0?0:255<b?255:b,s.b[y+=w]=(b=128+(m-r>>14))<0?0:255<b?255:b)},notSupported:function(){throw tr.thrown("This JPG file is not supported")},njDecodeScan:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2,this.bytes.b[this.pos]!=this.ncomp&&this.notSupported(),this.pos+=1,--this.size,--this.length;for(var t=0,e=this.ncomp;t<e;)(r=this.comps[t++]).dctabsel=this.bytes.b[this.pos+1]>>4<<1,r.actabsel=(3&this.bytes.b[this.pos+1])<<1|1,this.pos+=2,this.size-=2,this.length-=2;for(var n=this.bytes.b[this.pos],n=((this.progressive||0==n)&&this.bytes.b[this.pos+1]==63-n&&0==this.bytes.b[this.pos+2]||this.notSupported(),this.length),s=(this.pos+=n,this.size-=n,this.length-=n,0),i=0,a=this.rstinterval;;){for(t=0,e=this.ncomp;t<e;)for(var r,l=0,o=(r=this.comps[t++]).ssy;l<o;)for(var h=l++,u=0,_=r.ssx;u<_;)this.njDecodeBlock(r,(i*r.ssy+h)*r.stride+s*r.ssx+u++<<3);if(++s>=this.mbwidth&&(s=0,++i>=this.mbheight))break;0!=this.rstinterval&&0==--a&&(this.bufbits&=248,this.njShowBits(16),this.bufbits-=16,a=this.rstinterval,this.comps[0].dcpred=0,this.comps[1].dcpred=0,this.comps[2].dcpred=0)}},njUpsampleH:function(t){for(var e=t.width-3,n=new Rt(new ArrayBuffer(t.width*t.height<<1)),s=n,i=t.pixels,a=0,r=0,l=0,o=t.height;l<o;){++l;for(var h=139*i.b[a]+-11*i.b[a+1]+64>>7,h=(s.b[r]=h<0?0:255<h?255:h,104*i.b[a]+27*i.b[a+1]+-3*i.b[a+2]+64>>7),h=(s.b[r+1]=h<0?0:255<h?255:h,28*i.b[a]+109*i.b[a+1]+-9*i.b[a+2]+64>>7),u=(s.b[r+2]=h<0?0:255<h?255:h,0);u<e;){var _=u++,c=-9*i.b[a+_]+111*i.b[a+_+1]+29*i.b[a+_+2]+-3*i.b[a+_+3]+64>>7,c=(s.b[r+(_<<1)+3]=c<0?0:255<c?255:c,-3*i.b[a+_]+29*i.b[a+_+1]+111*i.b[a+_+2]+-9*i.b[a+_+3]+64>>7);s.b[r+(_<<1)+4]=c<0?0:255<c?255:c}a+=t.stride,r+=t.width<<1;h=28*i.b[a-1]+109*i.b[a-2]+-9*i.b[a-3]+64>>7,h=(s.b[r-3]=h<0?0:255<h?255:h,104*i.b[a-1]+27*i.b[a-2]+-3*i.b[a-3]+64>>7),h=(s.b[r-2]=h<0?0:255<h?255:h,139*i.b[a-1]+-11*i.b[a-2]+64>>7);s.b[r-1]=h<0?0:255<h?255:h}t.width<<=1,t.stride=t.width,t.pixels=n},njUpsampleV:function(t){for(var e=t.width,n=t.stride,s=n+n,i=new Rt(new ArrayBuffer(t.width*t.height<<1)),a=0,r=0,l=i,o=t.pixels,h=0;h<e;){for(var u=h++,r=u,a=u,_=139*o.b[a]+-11*o.b[a+n]+64>>7,_=(l.b[u]=_<0?0:255<_?255:_,104*o.b[a]+27*o.b[a+n]+-3*o.b[a+s]+64>>7),u=(l.b[r=u+e]=_<0?0:255<_?255:_,r+=e,28*o.b[a]+109*o.b[a+n]+-9*o.b[a+s]+64>>7),c=(l.b[r]=u<0?0:255<u?255:u,r+=e,a+=n,0),d=t.height-2;c<d;){++c;var p=-9*o.b[a-n]+111*o.b[a]+29*o.b[a+n]+-3*o.b[a+s]+64>>7,p=(l.b[r]=p<0?0:255<p?255:p,r+=e,-3*o.b[a-n]+29*o.b[a]+111*o.b[a+n]+-9*o.b[a+s]+64>>7);l.b[r]=p<0?0:255<p?255:p,r+=e,a+=n}a+=n;_=28*o.b[a]+109*o.b[a-n]+-9*o.b[a-s]+64>>7,u=(l.b[r]=_<0?0:255<_?255:_,r+=e,104*o.b[a]+27*o.b[a-n]+-3*o.b[a-s]+64>>7),_=(l.b[r]=u<0?0:255<u?255:u,r+=e,139*o.b[a]+-11*o.b[a-n]+64>>7);l.b[r]=_<0?0:255<_?255:_}t.height<<=1,t.stride=t.width,t.pixels=i},njUpsample:function(t){for(var e=0,n=0;t.width<this.width;)t.width<<=1,++e;for(;t.height<this.height;)t.height<<=1,++n;for(var s=new Rt(new ArrayBuffer(t.width*t.height)),i=t.pixels,a=0,r=s,l=0,o=t.height;l<o;)for(var h=(l++>>n)*t.stride,u=0,_=t.width;u<_;)r.b[a++]=i.b[(u++>>e)+h];t.stride=t.width,t.pixels=s},njConvert:function(){for(var t=0,e=this.ncomp;t<e;){var n=this.comps[t++];switch(this.filter._hx_index){case 0:(n.width<this.width||n.height<this.height)&&this.njUpsample(n);break;case 1:for(;n.width<this.width||n.height<this.height;)n.width<this.width&&this.njUpsampleH(n),n.height<this.height&&this.njUpsampleV(n)}if(n.width<this.width||n.height<this.height)throw tr.thrown("assert")}var s=new Rt(new ArrayBuffer(this.width*this.height*4));if(3!=this.ncomp)throw tr.thrown("TODO");for(var i=this.comps[0].pixels,a=this.comps[1].pixels,r=this.comps[2].pixels,l=s,o=0,h=0,u=0,_=0,t=0,e=this.height;t<e;){++t;for(var c=0,d=this.width;c<d;){++c;var p=i.b[o++]<<8,f=a.b[h++]-128,g=r.b[u++]-128,m=p+359*g+128>>8,g=p-88*f-183*g+128>>8,p=p+454*f+128>>8;l.b[_++]=p<0?0:255<p?255:p,l.b[_++]=g<0?0:255<g?255:g,l.b[_++]=m<0?0:255<m?255:m,l.b[_++]=255}o+=this.comps[0].stride-this.width,h+=this.comps[1].stride-this.width,u+=this.comps[2].stride-this.width}return s},njDecode:function(){if(this.size<2||255!=this.bytes.b[this.pos]||216!=this.bytes.b[this.pos+1])throw tr.thrown("This file is not a JPEG");this.pos+=2,this.size-=2,this.length-=2;t:for(;;)switch(this.pos+=2,this.size-=2,this.length-=2,this.bytes.b[this.pos+-1]){case 192:this.njDecodeSOF();break;case 194:if(this.progressive=!0,this.progressive)throw tr.thrown("Unsupported progressive JPG");null==this.vlctab[4]&&(this.vlctab[4]=new Rt(new ArrayBuffer(131072))),null==this.vlctab[5]&&(this.vlctab[5]=new Rt(new ArrayBuffer(131072))),null==this.vlctab[6]&&(this.vlctab[6]=new Rt(new ArrayBuffer(131072))),null==this.vlctab[7]&&(this.vlctab[7]=new Rt(new ArrayBuffer(131072))),this.njDecodeSOF();break;case 195:throw tr.thrown("Unsupported lossless JPG");case 196:this.njDecodeDHT();break;case 218:this.njDecodeScan();break t;case 219:this.njDecodeDQT();break;case 221:this.njDecodeDRI();break;case 254:this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;var t=this.length;this.pos+=t,this.size-=t,this.length-=t;break;default:switch(240&this.bytes.b[this.pos+-1]){case 192:throw tr.thrown("Unsupported jpeg type "+(15&this.bytes.b[this.pos+-1]));case 224:this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;var e=this.length;this.pos+=e,this.size-=e,this.length-=e;break;default:throw tr.thrown("Unsupported jpeg tag 0x"+ut.hex(this.bytes.b[this.pos+-1],2))}}var n=this.njConvert();return this.cleanup(),{pixels:n,width:this.width,height:this.height}},__class__:kc},function(t){this._states=new N,this._integration=t}),Ic=((e["hxfsm.FSM"]=Bc).__name__="hxfsm.FSM",Bc.prototype={goto:function(t){var e=t.__name__.split(".").pop(),n=this._states.h[e],s=this._currentState;if(null==n)throw tr.thrown("Attempting to transtion to "+e+", but state has not been added.");return null==s?(this.transition(n,s),!0):-1!=s.transitions.indexOf(t)?(this.transition(n,s),s.set_instance(null),!0):(this._currentState.get_name(),!1)},transition:function(t,e){var n=this;this._integration.transition(t,e,function(t){n._currentState=t})},add:function(t,e){t=new Tc(t,e),e=t.get_name();if(null!=this._states.h[e])throw tr.thrown("Trying to add "+e+" several times. Only add states once!");this._states.h[e]=t},__class__:Bc},function(t){this._fsm=t}),Tc=((e["hxfsm.FSMController"]=Ic).__name__="hxfsm.FSMController",Ic.prototype={goto:function(t,e,n){null==n&&(n=!0);var s=this;if(null!=e){var i=e();if(!i&&!n)return!1;if(!i)return qu.delay(function(){s.goto(t,e)},10),!0}return this._fsm.goto(t)},__class__:Ic},function(t,e){this.stateClass=t,this.transitions=e}),Fc=((e["hxfsm.StateDef"]=Tc).__name__="hxfsm.StateDef",Tc.prototype={get_instance:function(){if(null==this._instance)throw tr.thrown("Attempting to get instance before it was set");return this._instance},set_instance:function(t){return this._instance=t,this._instance},get_name:function(){var t;return null==this._name&&(t=this.stateClass,this._name=t.__name__.split(".").pop()),this._name},__class__:Tc,__properties__:{get_name:"get_name",set_instance:"set_instance",get_instance:"get_instance"}},(e["hxfsm.integrations.IFSMIntegration"]=Li).__name__="hxfsm.integrations.IFSMIntegration",Li.__isInterface__=!0,Li.prototype={__class__:Li},function(t){this._injector=t}),V=((e["hxfsm.integrations.injector.InjectorIntegration"]=Fc).__name__="hxfsm.integrations.injector.InjectorIntegration",Fc.__interfaces__=[Li],Fc.prototype={transition:function(t,e,n){var s=this._injector.instantiateUnmapped(t.stateClass);t.set_instance(s),null!=e&&((e=e.get_instance()).exit(),this._injector.destroyInstance(e)),n(t),qu.delay(function(){s.enter()},0)},__class__:Fc},d["hxsl.Type"]={__ename__:!0,__constructs__:null,TVoid:{_hx_name:"TVoid",_hx_index:0,__enum__:"hxsl.Type",toString:l},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"hxsl.Type",toString:l},TBool:{_hx_name:"TBool",_hx_index:2,__enum__:"hxsl.Type",toString:l},TFloat:{_hx_name:"TFloat",_hx_index:3,__enum__:"hxsl.Type",toString:l},TString:{_hx_name:"TString",_hx_index:4,__enum__:"hxsl.Type",toString:l},TVec:((c=function(t,e){return{_hx_index:5,size:t,t:e,__enum__:"hxsl.Type",toString:l}})._hx_name="TVec",c.__params__=["size","t"],c),TMat3:{_hx_name:"TMat3",_hx_index:6,__enum__:"hxsl.Type",toString:l},TMat4:{_hx_name:"TMat4",_hx_index:7,__enum__:"hxsl.Type",toString:l},TMat3x4:{_hx_name:"TMat3x4",_hx_index:8,__enum__:"hxsl.Type",toString:l},TBytes:((c=function(t){return{_hx_index:9,size:t,__enum__:"hxsl.Type",toString:l}})._hx_name="TBytes",c.__params__=["size"],c),TSampler2D:{_hx_name:"TSampler2D",_hx_index:10,__enum__:"hxsl.Type",toString:l},TSampler2DArray:{_hx_name:"TSampler2DArray",_hx_index:11,__enum__:"hxsl.Type",toString:l},TSamplerCube:{_hx_name:"TSamplerCube",_hx_index:12,__enum__:"hxsl.Type",toString:l},TStruct:((c=function(t){return{_hx_index:13,vl:t,__enum__:"hxsl.Type",toString:l}})._hx_name="TStruct",c.__params__=["vl"],c),TFun:((c=function(t){return{_hx_index:14,variants:t,__enum__:"hxsl.Type",toString:l}})._hx_name="TFun",c.__params__=["variants"],c),TArray:((c=function(t,e){return{_hx_index:15,t:t,size:e,__enum__:"hxsl.Type",toString:l}})._hx_name="TArray",c.__params__=["t","size"],c),TBuffer:((c=function(t,e){return{_hx_index:16,t:t,size:e,__enum__:"hxsl.Type",toString:l}})._hx_name="TBuffer",c.__params__=["t","size"],c),TChannel:((c=function(t){return{_hx_index:17,size:t,__enum__:"hxsl.Type",toString:l}})._hx_name="TChannel",c.__params__=["size"],c),TMat2:{_hx_name:"TMat2",_hx_index:18,__enum__:"hxsl.Type",toString:l}}),Dc=(V.__constructs__=[V.TVoid,V.TInt,V.TBool,V.TFloat,V.TString,V.TVec,V.TMat3,V.TMat4,V.TMat3x4,V.TBytes,V.TSampler2D,V.TSampler2DArray,V.TSamplerCube,V.TStruct,V.TFun,V.TArray,V.TBuffer,V.TChannel,V.TMat2],V.__empty_constructs__=[V.TVoid,V.TInt,V.TBool,V.TFloat,V.TString,V.TMat3,V.TMat4,V.TMat3x4,V.TSampler2D,V.TSampler2DArray,V.TSamplerCube,V.TMat2],d["hxsl.VecType"]={__ename__:!0,__constructs__:null,VInt:{_hx_name:"VInt",_hx_index:0,__enum__:"hxsl.VecType",toString:l},VFloat:{_hx_name:"VFloat",_hx_index:1,__enum__:"hxsl.VecType",toString:l},VBool:{_hx_name:"VBool",_hx_index:2,__enum__:"hxsl.VecType",toString:l}}),Ec=(Dc.__constructs__=[Dc.VInt,Dc.VFloat,Dc.VBool],Dc.__empty_constructs__=[Dc.VInt,Dc.VFloat,Dc.VBool],d["hxsl.SizeDecl"]={__ename__:!0,__constructs__:null,SConst:((c=function(t){return{_hx_index:0,v:t,__enum__:"hxsl.SizeDecl",toString:l}})._hx_name="SConst",c.__params__=["v"],c),SVar:((c=function(t){return{_hx_index:1,v:t,__enum__:"hxsl.SizeDecl",toString:l}})._hx_name="SVar",c.__params__=["v"],c)}),Q=(Ec.__constructs__=[Ec.SConst,Ec.SVar],Ec.__empty_constructs__=[],(e["hxsl.Error"]=Ui).__name__="hxsl.Error",Ui.t=function(t,e){throw tr.thrown(new Ui(t,e))},Ui.prototype={toString:function(){return"Error("+this.msg+")@"+Ja.string(this.pos)},__class__:Ui},d["hxsl.VarKind"]={__ename__:!0,__constructs__:null,Global:{_hx_name:"Global",_hx_index:0,__enum__:"hxsl.VarKind",toString:l},Input:{_hx_name:"Input",_hx_index:1,__enum__:"hxsl.VarKind",toString:l},Param:{_hx_name:"Param",_hx_index:2,__enum__:"hxsl.VarKind",toString:l},Var:{_hx_name:"Var",_hx_index:3,__enum__:"hxsl.VarKind",toString:l},Local:{_hx_name:"Local",_hx_index:4,__enum__:"hxsl.VarKind",toString:l},Output:{_hx_name:"Output",_hx_index:5,__enum__:"hxsl.VarKind",toString:l},Function:{_hx_name:"Function",_hx_index:6,__enum__:"hxsl.VarKind",toString:l}}),Pc=(Q.__constructs__=[Q.Global,Q.Input,Q.Param,Q.Var,Q.Local,Q.Output,Q.Function],Q.__empty_constructs__=[Q.Global,Q.Input,Q.Param,Q.Var,Q.Local,Q.Output,Q.Function],d["hxsl.VarQualifier"]={__ename__:!0,__constructs__:null,Const:((c=function(t){return{_hx_index:0,max:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Const",c.__params__=["max"],c),Private:{_hx_name:"Private",_hx_index:1,__enum__:"hxsl.VarQualifier",toString:l},Nullable:{_hx_name:"Nullable",_hx_index:2,__enum__:"hxsl.VarQualifier",toString:l},PerObject:{_hx_name:"PerObject",_hx_index:3,__enum__:"hxsl.VarQualifier",toString:l},Name:((c=function(t){return{_hx_index:4,n:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Name",c.__params__=["n"],c),Shared:{_hx_name:"Shared",_hx_index:5,__enum__:"hxsl.VarQualifier",toString:l},Precision:((c=function(t){return{_hx_index:6,p:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Precision",c.__params__=["p"],c),Range:((c=function(t,e){return{_hx_index:7,min:t,max:e,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Range",c.__params__=["min","max"],c),Ignore:{_hx_name:"Ignore",_hx_index:8,__enum__:"hxsl.VarQualifier",toString:l},PerInstance:((c=function(t){return{_hx_index:9,v:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="PerInstance",c.__params__=["v"],c),Doc:((c=function(t){return{_hx_index:10,s:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Doc",c.__params__=["s"],c),Borrow:((c=function(t){return{_hx_index:11,source:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Borrow",c.__params__=["source"],c),Sampler:((c=function(t){return{_hx_index:12,name:t,__enum__:"hxsl.VarQualifier",toString:l}})._hx_name="Sampler",c.__params__=["name"],c)}),G_=(Pc.__constructs__=[Pc.Const,Pc.Private,Pc.Nullable,Pc.PerObject,Pc.Name,Pc.Shared,Pc.Precision,Pc.Range,Pc.Ignore,Pc.PerInstance,Pc.Doc,Pc.Borrow,Pc.Sampler],Pc.__empty_constructs__=[Pc.Private,Pc.Nullable,Pc.PerObject,Pc.Shared,Pc.Ignore],d["hxsl.Prec"]={__ename__:!0,__constructs__:null,Low:{_hx_name:"Low",_hx_index:0,__enum__:"hxsl.Prec",toString:l},Medium:{_hx_name:"Medium",_hx_index:1,__enum__:"hxsl.Prec",toString:l},High:{_hx_name:"High",_hx_index:2,__enum__:"hxsl.Prec",toString:l}}),F=(G_.__constructs__=[G_.Low,G_.Medium,G_.High],G_.__empty_constructs__=[G_.Low,G_.Medium,G_.High],d["hxsl.Const"]={__ename__:!0,__constructs__:null,CNull:{_hx_name:"CNull",_hx_index:0,__enum__:"hxsl.Const",toString:l},CBool:((c=function(t){return{_hx_index:1,b:t,__enum__:"hxsl.Const",toString:l}})._hx_name="CBool",c.__params__=["b"],c),CInt:((c=function(t){return{_hx_index:2,v:t,__enum__:"hxsl.Const",toString:l}})._hx_name="CInt",c.__params__=["v"],c),CFloat:((c=function(t){return{_hx_index:3,v:t,__enum__:"hxsl.Const",toString:l}})._hx_name="CFloat",c.__params__=["v"],c),CString:((c=function(t){return{_hx_index:4,v:t,__enum__:"hxsl.Const",toString:l}})._hx_name="CString",c.__params__=["v"],c)}),zc=(F.__constructs__=[F.CNull,F.CBool,F.CInt,F.CFloat,F.CString],F.__empty_constructs__=[F.CNull],d["hxsl.FunctionKind"]={__ename__:!0,__constructs__:null,Vertex:{_hx_name:"Vertex",_hx_index:0,__enum__:"hxsl.FunctionKind",toString:l},Fragment:{_hx_name:"Fragment",_hx_index:1,__enum__:"hxsl.FunctionKind",toString:l},Init:{_hx_name:"Init",_hx_index:2,__enum__:"hxsl.FunctionKind",toString:l},Helper:{_hx_name:"Helper",_hx_index:3,__enum__:"hxsl.FunctionKind",toString:l}}),D=(zc.__constructs__=[zc.Vertex,zc.Fragment,zc.Init,zc.Helper],zc.__empty_constructs__=[zc.Vertex,zc.Fragment,zc.Init,zc.Helper],d["hxsl.TGlobal"]={__ename__:!0,__constructs__:null,Radians:{_hx_name:"Radians",_hx_index:0,__enum__:"hxsl.TGlobal",toString:l},Degrees:{_hx_name:"Degrees",_hx_index:1,__enum__:"hxsl.TGlobal",toString:l},Sin:{_hx_name:"Sin",_hx_index:2,__enum__:"hxsl.TGlobal",toString:l},Cos:{_hx_name:"Cos",_hx_index:3,__enum__:"hxsl.TGlobal",toString:l},Tan:{_hx_name:"Tan",_hx_index:4,__enum__:"hxsl.TGlobal",toString:l},Asin:{_hx_name:"Asin",_hx_index:5,__enum__:"hxsl.TGlobal",toString:l},Acos:{_hx_name:"Acos",_hx_index:6,__enum__:"hxsl.TGlobal",toString:l},Atan:{_hx_name:"Atan",_hx_index:7,__enum__:"hxsl.TGlobal",toString:l},Pow:{_hx_name:"Pow",_hx_index:8,__enum__:"hxsl.TGlobal",toString:l},Exp:{_hx_name:"Exp",_hx_index:9,__enum__:"hxsl.TGlobal",toString:l},Log:{_hx_name:"Log",_hx_index:10,__enum__:"hxsl.TGlobal",toString:l},Exp2:{_hx_name:"Exp2",_hx_index:11,__enum__:"hxsl.TGlobal",toString:l},Log2:{_hx_name:"Log2",_hx_index:12,__enum__:"hxsl.TGlobal",toString:l},Sqrt:{_hx_name:"Sqrt",_hx_index:13,__enum__:"hxsl.TGlobal",toString:l},Inversesqrt:{_hx_name:"Inversesqrt",_hx_index:14,__enum__:"hxsl.TGlobal",toString:l},Abs:{_hx_name:"Abs",_hx_index:15,__enum__:"hxsl.TGlobal",toString:l},Sign:{_hx_name:"Sign",_hx_index:16,__enum__:"hxsl.TGlobal",toString:l},Floor:{_hx_name:"Floor",_hx_index:17,__enum__:"hxsl.TGlobal",toString:l},Ceil:{_hx_name:"Ceil",_hx_index:18,__enum__:"hxsl.TGlobal",toString:l},Fract:{_hx_name:"Fract",_hx_index:19,__enum__:"hxsl.TGlobal",toString:l},Mod:{_hx_name:"Mod",_hx_index:20,__enum__:"hxsl.TGlobal",toString:l},Min:{_hx_name:"Min",_hx_index:21,__enum__:"hxsl.TGlobal",toString:l},Max:{_hx_name:"Max",_hx_index:22,__enum__:"hxsl.TGlobal",toString:l},Clamp:{_hx_name:"Clamp",_hx_index:23,__enum__:"hxsl.TGlobal",toString:l},Mix:{_hx_name:"Mix",_hx_index:24,__enum__:"hxsl.TGlobal",toString:l},Step:{_hx_name:"Step",_hx_index:25,__enum__:"hxsl.TGlobal",toString:l},Smoothstep:{_hx_name:"Smoothstep",_hx_index:26,__enum__:"hxsl.TGlobal",toString:l},Length:{_hx_name:"Length",_hx_index:27,__enum__:"hxsl.TGlobal",toString:l},Distance:{_hx_name:"Distance",_hx_index:28,__enum__:"hxsl.TGlobal",toString:l},Dot:{_hx_name:"Dot",_hx_index:29,__enum__:"hxsl.TGlobal",toString:l},Cross:{_hx_name:"Cross",_hx_index:30,__enum__:"hxsl.TGlobal",toString:l},Normalize:{_hx_name:"Normalize",_hx_index:31,__enum__:"hxsl.TGlobal",toString:l},LReflect:{_hx_name:"LReflect",_hx_index:32,__enum__:"hxsl.TGlobal",toString:l},Texture:{_hx_name:"Texture",_hx_index:33,__enum__:"hxsl.TGlobal",toString:l},TextureLod:{_hx_name:"TextureLod",_hx_index:34,__enum__:"hxsl.TGlobal",toString:l},Texel:{_hx_name:"Texel",_hx_index:35,__enum__:"hxsl.TGlobal",toString:l},TextureSize:{_hx_name:"TextureSize",_hx_index:36,__enum__:"hxsl.TGlobal",toString:l},ToInt:{_hx_name:"ToInt",_hx_index:37,__enum__:"hxsl.TGlobal",toString:l},ToFloat:{_hx_name:"ToFloat",_hx_index:38,__enum__:"hxsl.TGlobal",toString:l},ToBool:{_hx_name:"ToBool",_hx_index:39,__enum__:"hxsl.TGlobal",toString:l},Vec2:{_hx_name:"Vec2",_hx_index:40,__enum__:"hxsl.TGlobal",toString:l},Vec3:{_hx_name:"Vec3",_hx_index:41,__enum__:"hxsl.TGlobal",toString:l},Vec4:{_hx_name:"Vec4",_hx_index:42,__enum__:"hxsl.TGlobal",toString:l},IVec2:{_hx_name:"IVec2",_hx_index:43,__enum__:"hxsl.TGlobal",toString:l},IVec3:{_hx_name:"IVec3",_hx_index:44,__enum__:"hxsl.TGlobal",toString:l},IVec4:{_hx_name:"IVec4",_hx_index:45,__enum__:"hxsl.TGlobal",toString:l},BVec2:{_hx_name:"BVec2",_hx_index:46,__enum__:"hxsl.TGlobal",toString:l},BVec3:{_hx_name:"BVec3",_hx_index:47,__enum__:"hxsl.TGlobal",toString:l},BVec4:{_hx_name:"BVec4",_hx_index:48,__enum__:"hxsl.TGlobal",toString:l},Mat2:{_hx_name:"Mat2",_hx_index:49,__enum__:"hxsl.TGlobal",toString:l},Mat3:{_hx_name:"Mat3",_hx_index:50,__enum__:"hxsl.TGlobal",toString:l},Mat4:{_hx_name:"Mat4",_hx_index:51,__enum__:"hxsl.TGlobal",toString:l},Mat3x4:{_hx_name:"Mat3x4",_hx_index:52,__enum__:"hxsl.TGlobal",toString:l},Saturate:{_hx_name:"Saturate",_hx_index:53,__enum__:"hxsl.TGlobal",toString:l},Pack:{_hx_name:"Pack",_hx_index:54,__enum__:"hxsl.TGlobal",toString:l},Unpack:{_hx_name:"Unpack",_hx_index:55,__enum__:"hxsl.TGlobal",toString:l},PackNormal:{_hx_name:"PackNormal",_hx_index:56,__enum__:"hxsl.TGlobal",toString:l},UnpackNormal:{_hx_name:"UnpackNormal",_hx_index:57,__enum__:"hxsl.TGlobal",toString:l},ScreenToUv:{_hx_name:"ScreenToUv",_hx_index:58,__enum__:"hxsl.TGlobal",toString:l},UvToScreen:{_hx_name:"UvToScreen",_hx_index:59,__enum__:"hxsl.TGlobal",toString:l},DFdx:{_hx_name:"DFdx",_hx_index:60,__enum__:"hxsl.TGlobal",toString:l},DFdy:{_hx_name:"DFdy",_hx_index:61,__enum__:"hxsl.TGlobal",toString:l},Fwidth:{_hx_name:"Fwidth",_hx_index:62,__enum__:"hxsl.TGlobal",toString:l},ChannelRead:{_hx_name:"ChannelRead",_hx_index:63,__enum__:"hxsl.TGlobal",toString:l},ChannelReadLod:{_hx_name:"ChannelReadLod",_hx_index:64,__enum__:"hxsl.TGlobal",toString:l},ChannelFetch:{_hx_name:"ChannelFetch",_hx_index:65,__enum__:"hxsl.TGlobal",toString:l},ChannelTextureSize:{_hx_name:"ChannelTextureSize",_hx_index:66,__enum__:"hxsl.TGlobal",toString:l},Trace:{_hx_name:"Trace",_hx_index:67,__enum__:"hxsl.TGlobal",toString:l},VertexID:{_hx_name:"VertexID",_hx_index:68,__enum__:"hxsl.TGlobal",toString:l},InstanceID:{_hx_name:"InstanceID",_hx_index:69,__enum__:"hxsl.TGlobal",toString:l},FragCoord:{_hx_name:"FragCoord",_hx_index:70,__enum__:"hxsl.TGlobal",toString:l},FrontFacing:{_hx_name:"FrontFacing",_hx_index:71,__enum__:"hxsl.TGlobal",toString:l}}),Rc=(D.__constructs__=[D.Radians,D.Degrees,D.Sin,D.Cos,D.Tan,D.Asin,D.Acos,D.Atan,D.Pow,D.Exp,D.Log,D.Exp2,D.Log2,D.Sqrt,D.Inversesqrt,D.Abs,D.Sign,D.Floor,D.Ceil,D.Fract,D.Mod,D.Min,D.Max,D.Clamp,D.Mix,D.Step,D.Smoothstep,D.Length,D.Distance,D.Dot,D.Cross,D.Normalize,D.LReflect,D.Texture,D.TextureLod,D.Texel,D.TextureSize,D.ToInt,D.ToFloat,D.ToBool,D.Vec2,D.Vec3,D.Vec4,D.IVec2,D.IVec3,D.IVec4,D.BVec2,D.BVec3,D.BVec4,D.Mat2,D.Mat3,D.Mat4,D.Mat3x4,D.Saturate,D.Pack,D.Unpack,D.PackNormal,D.UnpackNormal,D.ScreenToUv,D.UvToScreen,D.DFdx,D.DFdy,D.Fwidth,D.ChannelRead,D.ChannelReadLod,D.ChannelFetch,D.ChannelTextureSize,D.Trace,D.VertexID,D.InstanceID,D.FragCoord,D.FrontFacing],D.__empty_constructs__=[D.Radians,D.Degrees,D.Sin,D.Cos,D.Tan,D.Asin,D.Acos,D.Atan,D.Pow,D.Exp,D.Log,D.Exp2,D.Log2,D.Sqrt,D.Inversesqrt,D.Abs,D.Sign,D.Floor,D.Ceil,D.Fract,D.Mod,D.Min,D.Max,D.Clamp,D.Mix,D.Step,D.Smoothstep,D.Length,D.Distance,D.Dot,D.Cross,D.Normalize,D.LReflect,D.Texture,D.TextureLod,D.Texel,D.TextureSize,D.ToInt,D.ToFloat,D.ToBool,D.Vec2,D.Vec3,D.Vec4,D.IVec2,D.IVec3,D.IVec4,D.BVec2,D.BVec3,D.BVec4,D.Mat2,D.Mat3,D.Mat4,D.Mat3x4,D.Saturate,D.Pack,D.Unpack,D.PackNormal,D.UnpackNormal,D.ScreenToUv,D.UvToScreen,D.DFdx,D.DFdy,D.Fwidth,D.ChannelRead,D.ChannelReadLod,D.ChannelFetch,D.ChannelTextureSize,D.Trace,D.VertexID,D.InstanceID,D.FragCoord,D.FrontFacing],d["hxsl.Component"]={__ename__:!0,__constructs__:null,X:{_hx_name:"X",_hx_index:0,__enum__:"hxsl.Component",toString:l},Y:{_hx_name:"Y",_hx_index:1,__enum__:"hxsl.Component",toString:l},Z:{_hx_name:"Z",_hx_index:2,__enum__:"hxsl.Component",toString:l},W:{_hx_name:"W",_hx_index:3,__enum__:"hxsl.Component",toString:l}}),O=(Rc.__constructs__=[Rc.X,Rc.Y,Rc.Z,Rc.W],Rc.__empty_constructs__=[Rc.X,Rc.Y,Rc.Z,Rc.W],d["hxsl.TExprDef"]={__ename__:!0,__constructs__:null,TConst:((c=function(t){return{_hx_index:0,c:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TConst",c.__params__=["c"],c),TVar:((c=function(t){return{_hx_index:1,v:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TVar",c.__params__=["v"],c),TGlobal:((c=function(t){return{_hx_index:2,g:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TGlobal",c.__params__=["g"],c),TParenthesis:((c=function(t){return{_hx_index:3,e:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TParenthesis",c.__params__=["e"],c),TBlock:((c=function(t){return{_hx_index:4,el:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TBlock",c.__params__=["el"],c),TBinop:((c=function(t,e,n){return{_hx_index:5,op:t,e1:e,e2:n,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TBinop",c.__params__=["op","e1","e2"],c),TUnop:((c=function(t,e){return{_hx_index:6,op:t,e1:e,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TUnop",c.__params__=["op","e1"],c),TVarDecl:((c=function(t,e){return{_hx_index:7,v:t,init:e,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TVarDecl",c.__params__=["v","init"],c),TCall:((c=function(t,e){return{_hx_index:8,e:t,args:e,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TCall",c.__params__=["e","args"],c),TSwiz:((c=function(t,e){return{_hx_index:9,e:t,regs:e,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TSwiz",c.__params__=["e","regs"],c),TIf:((c=function(t,e,n){return{_hx_index:10,econd:t,eif:e,eelse:n,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TIf",c.__params__=["econd","eif","eelse"],c),TDiscard:{_hx_name:"TDiscard",_hx_index:11,__enum__:"hxsl.TExprDef",toString:l},TReturn:((c=function(t){return{_hx_index:12,e:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TReturn",c.__params__=["e"],c),TFor:((c=function(t,e,n){return{_hx_index:13,v:t,it:e,loop:n,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TFor",c.__params__=["v","it","loop"],c),TContinue:{_hx_name:"TContinue",_hx_index:14,__enum__:"hxsl.TExprDef",toString:l},TBreak:{_hx_name:"TBreak",_hx_index:15,__enum__:"hxsl.TExprDef",toString:l},TArray:((c=function(t,e){return{_hx_index:16,e:t,index:e,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TArray",c.__params__=["e","index"],c),TArrayDecl:((c=function(t){return{_hx_index:17,el:t,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TArrayDecl",c.__params__=["el"],c),TSwitch:((c=function(t,e,n){return{_hx_index:18,e:t,cases:e,def:n,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TSwitch",c.__params__=["e","cases","def"],c),TWhile:((c=function(t,e,n){return{_hx_index:19,e:t,loop:e,normalWhile:n,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TWhile",c.__params__=["e","loop","normalWhile"],c),TMeta:((c=function(t,e,n){return{_hx_index:20,m:t,args:e,e:n,__enum__:"hxsl.TExprDef",toString:l}})._hx_name="TMeta",c.__params__=["m","args","e"],c)}),Vc=(O.__constructs__=[O.TConst,O.TVar,O.TGlobal,O.TParenthesis,O.TBlock,O.TBinop,O.TUnop,O.TVarDecl,O.TCall,O.TSwiz,O.TIf,O.TDiscard,O.TReturn,O.TFor,O.TContinue,O.TBreak,O.TArray,O.TArrayDecl,O.TSwitch,O.TWhile,O.TMeta],O.__empty_constructs__=[O.TDiscard,O.TContinue,O.TBreak],(e["hxsl.Tools"]=lt).__name__="hxsl.Tools",lt.allocVarId=function(){return++lt.UID},lt.getName=function(t){if(null!=t.qualifiers)for(var e=0,n=t.qualifiers;e<n.length;){var s=n[e];if(++e,4==s._hx_index)return s.n}return t.name},lt.getConstBits=function(t){switch(t.type._hx_index){case 1:for(var e=0,n=t.qualifiers;e<n.length;){var s=n[e];if(++e,0==s._hx_index){var i=s.max;if(null==i)return 8;for(var a=0;1<<a<=i;)++a;return a}}break;case 2:return 1;case 17:return 3+lt.MAX_CHANNELS_BITS}return 0},lt.isConst=function(t){if(17==t.type._hx_index)return!0;if(null!=t.qualifiers)for(var e=0,n=t.qualifiers;e<n.length;)if(0==n[e++]._hx_index)return!0;return!1},lt.hasQualifier=function(t,e){if(null!=t.qualifiers)for(var n=0,s=t.qualifiers;n<s.length;)if(s[n++]==e)return!0;return!1},lt.hasBorrowQualifier=function(t,e){if(null!=t.qualifiers)for(var n=0,s=t.qualifiers;n<s.length;){var i=s[n];if(++n,11==i._hx_index)return e==i.source}return!1},lt.isSampler=function(t){switch(t._hx_index){case 10:case 11:case 12:case 17:return!0;default:return!1}},lt.toString=function(t){switch(t._hx_index){case 5:var e,n=t.size;switch(t.t._hx_index){case 0:e="I";break;case 1:e="";break;case 2:e="B"}return e+"Vec"+n;case 9:return"Bytes"+t.size;case 13:for(var n=t.vl,s=[],i=0;i<n.length;){var a=n[i];++i,s.push(a.name+" : "+lt.toString(a.type))}return"{"+s.join(",")+"}";case 15:var n=t.size,r=lt.toString(t.t)+"[";switch(n._hx_index){case 0:l=""+n.v;break;case 1:l=n.v.name}return r+l+"]";case 16:var l,n=t.size,r="buffer "+lt.toString(t.t)+"[";switch(n._hx_index){case 0:l=""+n.v;break;case 1:l=n.v.name}return r+l+"]";default:return Jn.substr(d[t.__enum__].__constructs__[t._hx_index]._hx_name,1,null)}},lt.hasSideEffect=function(t){for(;;){var e=t.e;switch(e._hx_index){case 0:case 1:case 2:return!1;case 3:t=e.e;continue;case 4:for(var n=e.el,s=0;s<n.length;)if(lt.hasSideEffect(n[s++]))return!0;return!1;case 5:var i=e.e1,a=e.e2;switch(e.op._hx_index){case 4:case 20:return!0;default:return!!lt.hasSideEffect(i)||lt.hasSideEffect(a)}break;case 6:t=e.e1;continue;case 7:return!0;case 8:var r=e.args;if(2!=e.e.e._hx_index)return!0;for(var l=0;l<r.length;)if(lt.hasSideEffect(r[l++]))return!0;return!1;case 9:t=e.e;continue;case 10:var o=e.eelse;return!(!lt.hasSideEffect(e.econd)&&!lt.hasSideEffect(e.eif))||null!=o&&lt.hasSideEffect(o);case 12:return!0;case 13:return!!lt.hasSideEffect(e.it)||lt.hasSideEffect(e.loop);case 11:case 14:case 15:return!0;case 16:return!!lt.hasSideEffect(e.e)||lt.hasSideEffect(e.index);case 17:for(var h=e.el,u=0;u<h.length;)if(lt.hasSideEffect(h[u++]))return!0;return!1;case 18:for(var o=e.e,_=e.cases,c=e.def,d=0;d<_.length;){for(var p=_[d],f=(++d,0),g=p.values;f<g.length;)if(lt.hasSideEffect(g[f++]))return!0;if(lt.hasSideEffect(p.expr))return!0}return!!lt.hasSideEffect(o)||null!=c&&lt.hasSideEffect(c);case 19:return!!lt.hasSideEffect(e.e)||lt.hasSideEffect(e.loop);case 20:t=e.e;continue}}},lt.iter=function(t,e){var n=t.e;switch(n._hx_index){case 0:case 1:case 2:break;case 3:e(n.e);break;case 4:for(var s=n.el,i=0;i<s.length;)e(s[i++]);break;case 5:e(n.e1),e(n.e2);break;case 6:e(n.e1);break;case 7:null!=(s=n.init)&&e(s);break;case 8:for(var s=n.args,i=(e(n.e),0);i<s.length;)e(s[i++]);break;case 9:e(n.e);break;case 10:s=n.eelse;e(n.econd),e(n.eif),null!=s&&e(s);break;case 12:null!=(s=n.e)&&e(s);break;case 13:e(n.it),e(n.loop);break;case 11:case 14:case 15:break;case 16:e(n.e),e(n.index);break;case 17:for(s=n.el,i=0;i<s.length;)e(s[i++]);break;case 18:for(var s=n.cases,i=n.def,a=(e(n.e),0);a<s.length;){for(var r=s[a],l=(++a,0),o=r.values;l<o.length;)e(o[l++]);e(r.expr)}null!=i&&e(i);break;case 19:e(n.e),e(n.loop);break;case 20:e(n.e)}},lt.map=function(t,e){var n=t.e;switch(n._hx_index){case 0:case 1:case 2:r=t.e;break;case 3:r=O.TParenthesis(e(n.e));break;case 4:for(var s=n.el,i=[],a=0;a<s.length;)i.push(e(s[a++]));r=O.TBlock(i);break;case 5:r=O.TBinop(n.op,e(n.e1),e(n.e2));break;case 6:r=O.TUnop(n.op,e(n.e1));break;case 7:var s=n.init,r=O.TVarDecl(n.v,null!=s?e(s):null);break;case 8:for(var s=n.args,l=e(n.e),i=[],a=0;a<s.length;)i.push(e(s[a++]));r=O.TCall(l,i);break;case 9:r=O.TSwiz(e(n.e),n.regs);break;case 10:s=n.eelse;r=O.TIf(e(n.econd),e(n.eif),null!=s?e(s):null);break;case 12:s=n.e;r=O.TReturn(null!=s?e(s):null);break;case 13:r=O.TFor(n.v,e(n.it),e(n.loop));break;case 11:case 14:case 15:r=t.e;break;case 16:r=O.TArray(e(n.e),e(n.index));break;case 17:for(s=n.el,i=[],a=0;a<s.length;)i.push(e(s[a++]));r=O.TArrayDecl(i);break;case 18:for(var s=n.cases,i=n.def,l=e(n.e),a=[],o=0;o<s.length;){for(var h=s[o],u=(++o,[]),_=0,c=h.values;_<c.length;)u.push(e(c[_++]));a.push({values:u,expr:e(h.expr)})}r=O.TSwitch(l,a,null==i?null:e(i));break;case 19:r=O.TWhile(e(n.e),e(n.loop),n.normalWhile);break;case 20:r=O.TMeta(n.m,n.args,e(n.e))}return{e:r,t:t.t,p:t.p}},lt.size=function(t){switch(t._hx_index){case 0:return 0;case 1:case 3:return 1;case 5:return t.size;case 6:return 9;case 7:return 16;case 8:return 12;case 9:return t.size;case 2:case 4:case 10:case 11:case 12:return 0;case 13:for(var e=t.vl,n=0,s=0;s<e.length;)n+=lt.size(e[s++].type);return n;case 14:return 0;case 15:e=t.t;switch((s=t.size)._hx_index){case 0:return lt.size(e)*s.v;case 1:return 0}break;case 16:return 0==(e=t.size)._hx_index?lt.size(t.t)*e.v:0;case 17:return t.size;case 18:return 4}},(e["hxsl.Tools2"]=Ni).__name__="hxsl.Tools2",Ni.toString=function(t){t=d[t.__enum__].__constructs__[t._hx_index]._hx_name;return t.charAt(0).toLowerCase()+Jn.substr(t,1,null)},(e["hxsl.BatchShader"]=Gi).__name__="hxsl.BatchShader",Gi._SHADER=null,Gi.__super__=f,Gi.prototype=t(f.prototype,{get_Batch_HasOffset:function(){return this.Batch_HasOffset__},set_Batch_HasOffset:function(t){return this.constModified=!0,this.Batch_HasOffset__=t},get_Batch_Count:function(){return this.Batch_Count__},set_Batch_Count:function(t){return this.constModified=!0,this.Batch_Count__=t},get_Batch_Buffer:function(){return this.Batch_Buffer__},set_Batch_Buffer:function(t){return this.Batch_Buffer__=t},updateConstants:function(t){this.constBits=0,this.Batch_HasOffset__&&(this.constBits|=1);var e=this.Batch_Count__;if(e>>>17!=0)throw tr.thrown("Batch_Count is out of range "+e+">131071");this.constBits|=e<<1,this.updateConstantsFinal(t)},getParamValue:function(t){switch(t){case 0:return this.Batch_HasOffset__;case 1:return this.Batch_Count__;case 2:return this.Batch_Buffer__}return null},getParamFloatValue:function(t){return 0},__class__:Gi,__properties__:{set_Batch_Buffer:"set_Batch_Buffer",get_Batch_Buffer:"get_Batch_Buffer",set_Batch_Count:"set_Batch_Count",get_Batch_Count:"get_Batch_Count",set_Batch_HasOffset:"set_Batch_HasOffset",get_Batch_HasOffset:"get_Batch_HasOffset"}}),(e["hxsl.SearchMap"]=Xi).__name__="hxsl.SearchMap",Xi.prototype={set:function(t,e){if(0==this.minId)this.minId=t,this.nexts=[e];else{var n=t-this.minId;if(n<0){for(var s=[],i=0,a=this.nexts.length;i<a;){var r=i++;s[r-n]=this.nexts[r]}this.nexts=s,this.minId+=n,n=0}this.nexts[n]=e}},__class__:Xi},function(){this.constsToGlobal=!1,this.linkCache=new Xi,this.linkShaders=new N,this.batchShaders=new r_,this.byID=new N}),Qc=((e["hxsl.Cache"]=Vc).__name__="hxsl.Cache",Vc.INST=null,Vc.get=function(){var t=Vc.INST;return null==t&&(t=new Vc,Vc.INST=t),t},Vc.prototype={getLinkShader:function(t){for(var e=[],n=0;n<t.length;)e.push(Ja.string(t[n++]));var a,h,l,s,o,u,_,c,r,i,d=e.join(","),p=this.linkShaders.h[d];return null==p&&(a=new $c(""),i="shaderLinker_"+Jn.substr(Qs.encode(d),0,8),a.data={name:i,vars:[],funs:[]},h=null,l=Object.create(null),s=0,o=V.TVec(4,Dc.VFloat),u=function(t,e,n,s){for(var i=[],a=e,r=0,l=n.length;r<l;){var o=r++,o=s(n[n.length-1-o],a-(n.length-1-o));a-=lt.size(o.t),i.unshift(o)}return{e:O.TCall({e:O.TGlobal(t),t:V.TVoid,p:h},i),t:V.TVec(e,Dc.VFloat),p:h}},_=function(t,e,n){var s=null==n?t:lt.getName(n)+"."+t,i=l[s];if(null==i){if(i={id:lt.allocVarId(),name:t,type:e,kind:Q.Var,parent:n},null==n)a.data.vars.push(i);else{t=n.type;if(13!=t._hx_index)throw tr.thrown("assert");t.vl.push(i)}l[s]=i}return i},c=function(t,e){switch(t._hx_index){case 0:return{e:O.TConst(F.CFloat(t.v)),t:V.TFloat,p:h};case 1:var n=t.v,s=t.size,i=l[n];if(null==i){for(var a=n.split("."),r=null;1<a.length;)r=_(a.shift(),V.TStruct([]),r);null!=s&&(e=s),i=_(a.shift(),1==e?V.TFloat:V.TVec(e,Dc.VFloat),r)}return{e:O.TVar(i),t:i.type,p:h};case 2:return{e:O.TCall({e:O.TGlobal(D.PackNormal),t:V.TVoid,p:h},[c(t.v,3)]),t:o,p:h};case 3:return{e:O.TCall({e:O.TGlobal(D.Pack),t:V.TVoid,p:h},[c(t.v,1)]),t:o,p:h};case 4:return u(D.Vec2,2,t.a,c);case 5:return u(D.Vec3,3,t.a,c);case 6:return u(D.Vec4,4,t.a,c);case 7:n=t.swiz;return{e:O.TSwiz(c(t.a,4),n),t:V.TVec(n.length,Dc.VFloat),p:h}}},r=function(t){s+=1;var e={id:lt.allocVarId(),type:o,name:"OUTPUT"+(s-1),kind:Q.Output};return a.data.vars.push(e),{e:O.TBinop(C.OpAssign,{e:O.TVar(e),t:o,p:h},c(t,4)),t:V.TVoid,p:h}},(i=function(t,e){for(var n={id:lt.allocVarId(),type:V.TFun([]),name:(""+Ja.string(t)).toLowerCase(),kind:Q.Function},s=[],i=0;i<e.length;)s.push(r(e[i++]));a.data.funs.push({kind:t,ref:n,args:[],ret:V.TVoid,expr:{e:O.TBlock(s),p:h,t:V.TVoid}})})(zc.Vertex,[Yc.Value("output.position")]),i(zc.Fragment,t),(p=Object.create(f.prototype)).shader=a,(this.linkShaders.h[d]=p).updateConstantsFinal(null)),p},link:function(t,e){for(var n=this.linkCache,s=t;null!=s;){var i=s.s,s=s.next,i=i.instance,a=n.nexts[i.id-n.minId];null==a&&(a=new Xi,n.set(i.id,a)),n=a}return null==n.linked&&(n.linked=this.compileRuntimeShader(t,e)),n.linked},compileRuntimeShader:function(t,e){for(var n=[],s=0,i=null,a=t;a!=i;){var r=a.s;a=a.next,n.push({inst:r.instance,p:r.priority,index:s++})}n.reverse(),Os.sort(n,function(t,e){return e.p-t.p});var l=new Xc(e);try{for(var o=[],h=0;h<n.length;)o.push(n[h++].inst.shader);r=l.link(o)}catch(o){if((h=tr.caught(o).unwrap())instanceof Ui){for(var u=h,h=[],_=0;_<n.length;)h.push(Wc.shaderToString(n[_++].inst.shader));throw u.msg+="\n\nin\n\n"+h.join("\n-----\n"),tr.thrown(u)}throw o}if(e)for(var c=null,c=function(t){if(null!=t.qualifiers&&0<=t.qualifiers.indexOf(Pc.PerObject)&&(1==t.qualifiers.length?t.qualifiers=null:(t.qualifiers=t.qualifiers.slice(),Jn.remove(t.qualifiers,Pc.PerObject)),t.kind!=Q.Var)&&(t.kind=Q.Local),13==(n=t.type)._hx_index)for(var e=n.vl,n=0;n<e.length;)c(e[n++])},o=0,h=r.vars;o<h.length;)c(h[o++]);var d,p=new td;try{d=p.split(r)}catch(o){throw(h=tr.caught(o).unwrap())instanceof Ui?((u=h).msg+="\n\nin\n\n"+Wc.shaderToString(r),tr.thrown(u)):o}for(var f=new fl,o=0,h=l.allVars;o<h.length;){var g,m,A=h[o];++o,A.v.kind==Q.Param&&13!=A.v.type._hx_index&&(g=n[A.instanceIndex],m=p.varMap.h[A.v.__id__],f.h[(null==m?A:m).id]={instance:g.index,index:g.inst.params.h[A.merged[0].id]})}for(var r=(new Oc).dce(d.vertex,d.fragment),x=this.buildRuntimeShader(r.vertex,r.fragment,f),o=[],i=null,a=t;a!=i;){r=a.s;a=a.next,o.push(new qc(r.shader,r.constBits))}x.spec={instances:o,signature:null};for(o=0,h=n.length;o<h;){var b=o++;x.spec.instances[n[n.length-1-b].index].index=b}for(o=[],h=0,_=x.spec.instances;h<_.length;){b=_[h];++h,o.push(b.shader.data.name+"_"+b.bits+"_"+b.index)}u=o.join(":"),x.spec.signature=Qs.encode(u),x.signature=Qs.encode(Wc.shaderToString(x.vertex.data)+Wc.shaderToString(x.fragment.data)),x.batchMode=e,l=this.byID.h[x.signature];return null!=l?x.id=l.id:this.byID.h[x.signature]=x,x},buildRuntimeShader:function(t,e,n){var s=new Kc;return s.vertex=this.flattenShader(t,zc.Vertex,n),s.vertex.vertex=!0,s.fragment=this.flattenShader(e,zc.Fragment,n),s.globals=new fl,this.initGlobals(s,s.vertex),this.initGlobals(s,s.fragment),s},initGlobals:function(t,e){for(var n=e.globals;null!=n;)t.globals.h[n.gid]=!0,n=n.next;for(n=e.params;null!=n;)null!=n.perObjectGlobal&&(t.globals.h[n.perObjectGlobal.gid]=!0),n=n.next},getPath:function(t){return null==t.parent?t.name:this.getPath(t.parent)+"."+t.name},flattenShader:function(t,e,n){for(var s=new Uc,i=new Zc,t=s.flatten(t,e,this.constsToGlobal),a=[],r=(i.consts=s.consts,i.texturesCount=0,s.allocData.keys());r.hasNext();){var l=r.next(),o=s.allocData.h[l.__id__];switch(l.kind._hx_index){case 0:for(var h=[],u=0;u<o.length;){var _=o[u];++u,null!=_.v&&h.push(new Hc(_.pos,this.getPath(_.v),_.v.type))}for(var c=0,d=h.length-1;c<d;)h[k=c++].next=h[k+1];var p=l.type;if(15!=p._hx_index)throw tr.thrown("assert");var f=p.t,p=p.size;if(5!=f._hx_index)throw tr.thrown("assert");if(4!=f.size)throw tr.thrown("assert");if(1!=f.t._hx_index)throw tr.thrown("assert");if(0!=p._hx_index)throw tr.thrown("assert");i.globals=h[0],i.globalsSize=p.v;break;case 2:for(var g=[],m=0,A=0;A<o.length;){var x,b,y=o[A];++A,null!=y.v&&(null==(b=n.h[y.v.id])?((x=new jc(y.v.name,y.pos,-1,-1,y.v.type)).perObjectGlobal=new Hc(-1,this.getPath(y.v),y.v.type),g.push(x),++m):(x=new jc(y.v.name,y.pos,b.instance,b.index,y.v.type),15==(b=y.v.type)._hx_index&&lt.isSampler(b.t)?(x.pos=-y.size,m+=y.size):++m,g.push(x)))}for(var w=0,v=g.length-1;w<v;){var C=w++;g[C].next=g[1+C]}f=l.type;if(15!=f._hx_index)throw tr.thrown("assert");var M=f.t,S=f.size;if(lt.isSampler(M))a.push({t:M,all:g}),i.texturesCount+=m;else switch(M._hx_index){case 5:if(4!=M.size)throw tr.thrown("assert");if(1!=M.t._hx_index)throw tr.thrown("assert");if(0!=S._hx_index)throw tr.thrown("assert");i.params=g[0],i.paramsSize=S.v;break;case 16:i.buffers=g[0],i.bufferCount=g.length;break;default:throw tr.thrown("assert")}break;default:throw tr.thrown("assert")}}if(0<a.length){a.sort(function(t,e){return t.t._hx_index-e.t._hx_index}),i.textures=a[0].all[0];for(h=1,u=a.length;h<u;){var k,B=a[(k=h++)-1].all;B[B.length-1].next=a[k].all[0]}}return null==i.globals&&(i.globalsSize=0),null==i.params&&(i.paramsSize=0),null==i.buffers&&(i.bufferCount=0),i.data=t,i},__class__:Vc},d["hxsl.Channel"]={__ename__:!0,__constructs__:null,Unknown:{_hx_name:"Unknown",_hx_index:0,__enum__:"hxsl.Channel",toString:l},R:{_hx_name:"R",_hx_index:1,__enum__:"hxsl.Channel",toString:l},G:{_hx_name:"G",_hx_index:2,__enum__:"hxsl.Channel",toString:l},B:{_hx_name:"B",_hx_index:3,__enum__:"hxsl.Channel",toString:l},A:{_hx_name:"A",_hx_index:4,__enum__:"hxsl.Channel",toString:l},PackedFloat:{_hx_name:"PackedFloat",_hx_index:5,__enum__:"hxsl.Channel",toString:l},PackedNormal:{_hx_name:"PackedNormal",_hx_index:6,__enum__:"hxsl.Channel",toString:l}}),Oc=(Qc.__constructs__=[Qc.Unknown,Qc.R,Qc.G,Qc.B,Qc.A,Qc.PackedFloat,Qc.PackedNormal],Qc.__empty_constructs__=[Qc.Unknown,Qc.R,Qc.G,Qc.B,Qc.A,Qc.PackedFloat,Qc.PackedNormal],(e["hxsl.Clone"]=Yi).__name__="hxsl.Clone",Yi.shaderData=function(t){return(new Yi).shader(t)},Yi.prototype={tvar:function(t){var e=this.varMap.h[t.id];return null==e&&(e={id:lt.allocVarId(),type:t.type,name:t.name,kind:t.kind},this.varMap.h[t.id]=e,null!=t.parent&&(e.parent=this.tvar(t.parent)),null!=t.qualifiers&&(e.qualifiers=t.qualifiers.slice()),e.type=this.ttype(t.type)),e},tfun:function(t){for(var e=this.ttype(t.ret),n=t.kind,s=this.tvar(t.ref),i=[],a=0,r=t.args;a<r.length;)i.push(this.tvar(r[a++]));return{ret:e,kind:n,ref:s,args:i,expr:this.texpr(t.expr)}},ttype:function(t){switch(t._hx_index){case 13:for(var e=t.vl,n=[],s=0;s<e.length;)n.push(this.tvar(e[s++]));return V.TStruct(n);case 14:return V.TFun(t.variants);case 15:var i,e=t.size,a=this.ttype(t.t);switch(e._hx_index){case 0:i=e;break;case 1:i=Ec.SVar(this.tvar(e.v))}return V.TArray(a,i);default:return t}},texpr:function(t){var e,n=lt.map(t,W(this,this.texpr)),s=(n.t=this.ttype(t.t),n.e);switch(s._hx_index){case 1:e=O.TVar(this.tvar(s.v));break;case 7:e=O.TVarDecl(this.tvar(s.v),s.init);break;case 13:e=O.TFor(this.tvar(s.v),s.it,s.loop);break;default:e=n.e}return n.e=e,n},shader:function(t){for(var e=t.name,n=[],s=0,i=t.vars;s<i.length;)n.push(this.tvar(i[s++]));for(var s=[],i=0,a=t.funs;i<a.length;)s.push(this.tfun(a[i++]));return{name:e,vars:n,funs:s}},__class__:Yi},(e["hxsl._Dce.VarDeps"]=Wi).__name__="hxsl._Dce.VarDeps",Wi.prototype={__class__:Wi},function(){}),Lc=((e["hxsl.Dce"]=Oc).__name__="hxsl.Dce",Oc.prototype={dce:function(t,e){this.used=new fl,this.channelVars=[];for(var n=[],s=0,i=t.vars;s<i.length;){var a=i[s],r=(++s,this.get(a));a.kind==Q.Input&&n.push(r),a.kind==Q.Output&&(r.keep=!0)}for(s=0,i=e.vars;s<i.length;){a=i[s],r=(++s,this.get(a));a.kind==Q.Output&&(r.keep=!0)}for(s=0,i=t.funs;s<i.length;)this.check(i[s++].expr,[],[]);for(s=0,i=e.funs;s<i.length;)this.check(i[s++].expr,[],[]);var l=[];do{for(a=this.used.iterator();a.hasNext();)(c=a.next()).keep&&this.markRec(c);for(;1<n.length&&!n[n.length-1].used;)n.pop();for(s=0;s<n.length;)this.markRec(n[s++]);for(var l=[],i=0,o=t.funs;i<o.length;)l.push(this.mapExpr(o[i++].expr,!1));for(var h=0,u=e.funs;h<u.length;)l.push(this.mapExpr(u[h++].expr,!1));this.markAsKeep=!1;for(var _=0;_<l.length;)this.checkBranches(l[_++])}while(this.markAsKeep);for(s=0,i=t.funs;s<i.length;)i[s++].expr=l.shift();for(s=0,i=e.funs;s<i.length;)i[s++].expr=l.shift();for(var c,a=this.used.iterator();a.hasNext();)(c=a.next()).used||c.v.kind!=Q.Input&&(Jn.remove(t.vars,c.v),Jn.remove(e.vars,c.v));return{fragment:e,vertex:t}},get:function(t){var e=this.used.h[t.id];return null==e&&(e=new Wi(t),this.used.h[t.id]=e),e},markRec:function(t){if(!t.used){t.used=!0;for(var e=t.deps.iterator();e.hasNext();)this.markRec(e.next())}},link:function(t,e){for(var n=this.get(t),s=0;s<e.length;){var i=e[s];++s,null==i?n.keep||(n.keep=!0,this.markAsKeep=!0):i.deps.h[t.id]=n}},check:function(t,e,n){switch((z=t.e)._hx_index){case 1:this.link(z.v,e);break;case 4:for(var s=z.el,R=[],i=0,a=s.length;i<a;){var r=i++;this.check(s[r],r<s.length-1?R:e,n)}break;case 5:var l,o,h,u,s=z.e1,i=z.e2;switch(z.op._hx_index){case 4:switch((a=s.e)._hx_index){case 1:var _=this.get(a.v);e.push(_),this.check(i,e,n),e.pop(),n.indexOf(_)<0&&n.push(_);break;case 9:1==(c=a.e.e)._hx_index?(_=this.get(c.v),e.push(_),this.check(i,e,n),e.pop(),n.indexOf(_)<0&&n.push(_)):(a=this,l=e,o=n,lt.iter(t,function(t){a.check(t,l,o)}));break;default:var c=this,V=e,Q=n;lt.iter(t,function(t){c.check(t,V,Q)})}break;case 20:switch((d=s.e)._hx_index){case 1:var _=this.get(d.v);e.push(_),this.check(i,e,n),e.pop(),n.indexOf(_)<0&&n.push(_);break;case 9:1==(s=d.e.e)._hx_index?(_=this.get(s.v),e.push(_),this.check(i,e,n),e.pop(),n.indexOf(_)<0&&n.push(_)):(s=this,h=e,u=n,lt.iter(t,function(t){s.check(t,h,u)}));break;default:var i=this,O=e,L=n;lt.iter(t,function(t){i.check(t,O,L)})}break;default:var d=this,U=e,N=n;lt.iter(t,function(t){d.check(t,U,N)})}break;case 7:var p,f,g=z.init;null!=g?(e.push(this.get(z.v)),this.check(g,e,n),e.pop()):(g=this,p=e,f=n,lt.iter(t,function(t){g.check(t,p,f)}));break;case 8:var m,A,x,b,y,w,v,C,M,G,X,Y,W,S,j,H,k,Z,q,B,K,J,I=z.args,T=z.e.e;if(2==T._hx_index)switch(T.g._hx_index){case 63:3==I.length?1==(T=I[0].e)._hx_index?(x=T.v,0==(T=I[2].e)._hx_index?2==(w=T.c)._hx_index?(T=w.v,this.check(I[1],e,n),null==this.channelVars[T]?(this.channelVars[T]=x,this.link(x,e)):this.link(this.channelVars[T],e)):(T=this,m=e,A=n,lt.iter(t,function(t){T.check(t,m,A)})):(x=this,b=e,y=n,lt.iter(t,function(t){x.check(t,b,y)}))):(w=this,v=e,C=n,lt.iter(t,function(t){w.check(t,v,C)})):(M=this,G=e,X=n,lt.iter(t,function(t){M.check(t,G,X)}));break;case 64:4==I.length?(S=I[2],1==(k=I[0].e)._hx_index?(B=k.v,0==(k=I[3].e)._hx_index?2==(F=k.c)._hx_index?(k=F.v,this.check(I[1],e,n),this.check(S,e,n),null==this.channelVars[k]?(this.channelVars[k]=B,this.link(B,e)):this.link(this.channelVars[k],e)):(I=this,Y=e,W=n,lt.iter(t,function(t){I.check(t,Y,W)})):(S=this,j=e,H=n,lt.iter(t,function(t){S.check(t,j,H)}))):(k=this,Z=e,q=n,lt.iter(t,function(t){k.check(t,Z,q)}))):(B=this,K=e,J=n,lt.iter(t,function(t){B.check(t,K,J)}));break;default:var F=this,$=e,tt=n;lt.iter(t,function(t){F.check(t,$,tt)})}else{var et=this,nt=e,st=n;lt.iter(t,function(t){et.check(t,nt,st)})}break;case 10:for(var D=z.econd,E=z.eelse,P=[],it=(this.check(z.eif,e,P),null!=E&&this.check(E,e,P),P.length),E=0;E<e.length;){_=e[E];++E,P.indexOf(_)<0&&P.push(_)}this.check(D,P,n);for(D=0;D<it;){_=P[D++];n.indexOf(_)<0&&n.push(_)}break;case 13:for(var P=[],z=(this.check(z.loop,e,P),this.check(z.it,P,n),0);z<P.length;){_=P[z];++z,n.indexOf(_)<0&&n.push(_)}break;default:var z=this,at=e,rt=n;lt.iter(t,function(t){z.check(t,at,rt)})}},checkBranches:function(t){var e=t.e;10==e._hx_index&&this.check(e.econd,[null],[]),lt.iter(t,W(this,this.checkBranches))},mapExpr:function(t,e){var n=this,s=t.e;switch(s._hx_index){case 4:for(var i=s.el,a=[],r=0,l=0;l<i.length;){var o=i[l++],h=e&&r==i.length-1,u=this.mapExpr(o,h);(lt.hasSideEffect(u)||h)&&a.push(u),++r}return{e:O.TBlock(a),p:t.p,t:t.t};case 5:i=s.e1;switch(s.op._hx_index){case 4:switch((l=i.e)._hx_index){case 1:return this.get(l.v).used?lt.map(t,function(t){return n.mapExpr(t,!0)}):{e:O.TConst(F.CNull),t:t.t,p:t.p};case 9:return 1==(_=l.e.e)._hx_index?this.get(_.v).used?lt.map(t,function(t){return n.mapExpr(t,!0)}):{e:O.TConst(F.CNull),t:t.t,p:t.p}:lt.map(t,function(t){return n.mapExpr(t,!0)});default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}break;case 20:switch((l=i.e)._hx_index){case 1:return this.get(l.v).used?lt.map(t,function(t){return n.mapExpr(t,!0)}):{e:O.TConst(F.CNull),t:t.t,p:t.p};case 9:return 1==(i=l.e.e)._hx_index?this.get(i.v).used?lt.map(t,function(t){return n.mapExpr(t,!0)}):{e:O.TConst(F.CNull),t:t.t,p:t.p}:lt.map(t,function(t){return n.mapExpr(t,!0)});default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}break;default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}break;case 7:return this.get(s.v).used?lt.map(t,function(t){return n.mapExpr(t,!0)}):{e:O.TConst(F.CNull),t:t.t,p:t.p};case 8:i=s.args;if(2!=(l=s.e.e)._hx_index)return lt.map(t,function(t){return n.mapExpr(t,!0)});switch(l.g._hx_index){case 63:return 3==i.length?0==(l=i[2].e)._hx_index?2==(_=l.c)._hx_index?(d=this.channelVars[_.v],{e:O.TCall({e:O.TGlobal(D.Texture),p:t.p,t:V.TVoid},[{e:O.TVar(d),t:d.type,p:t.p},this.mapExpr(i[1],!0)]),t:V.TVoid,p:t.p}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)});case 64:return 4==i.length?(l=i[2],0==(_=i[3].e)._hx_index?2==(c=_.c)._hx_index?(d=this.channelVars[c.v],{e:O.TCall({e:O.TGlobal(D.TextureLod),p:t.p,t:V.TVoid},[{e:O.TVar(d),t:d.type,p:t.p},this.mapExpr(i[1],!0),this.mapExpr(l,!0)]),t:V.TVoid,p:t.p}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)})):lt.map(t,function(t){return n.mapExpr(t,!0)});case 65:switch(i.length){case 3:return 0==(l=i[2].e)._hx_index?2==(_=l.c)._hx_index?(d=this.channelVars[_.v],{e:O.TCall({e:O.TGlobal(D.Texel),p:t.p,t:V.TVoid},[{e:O.TVar(d),t:d.type,p:t.p},this.mapExpr(i[1],!0)]),t:V.TVoid,p:t.p}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)});case 4:var _,c,d,l=i[2];return 0==(_=i[3].e)._hx_index?2==(c=_.c)._hx_index?(d=this.channelVars[c.v],{e:O.TCall({e:O.TGlobal(D.Texel),p:t.p,t:V.TVoid},[{e:O.TVar(d),t:d.type,p:t.p},this.mapExpr(i[1],!0),this.mapExpr(l,!0)]),t:V.TVoid,p:t.p}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)});default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}break;case 66:switch(i.length){case 2:return 0==(l=i[1].e)._hx_index?2==(_=l.c)._hx_index?(d=this.channelVars[_.v],{e:O.TCall({e:O.TGlobal(D.TextureSize),p:t.p,t:V.TVoid},[{e:O.TVar(d),t:d.type,p:t.p}]),t:V.TVoid,p:t.p}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)});case 3:return 0==(l=i[2].e)._hx_index?2==(_=l.c)._hx_index?(d=this.channelVars[_.v],{e:O.TCall({e:O.TGlobal(D.TextureSize),p:t.p,t:V.TVoid},[{e:O.TVar(d),t:d.type,p:t.p},this.mapExpr(i[1],!0)]),t:V.TVoid,p:t.p}):lt.map(t,function(t){return n.mapExpr(t,!0)}):lt.map(t,function(t){return n.mapExpr(t,!0)});default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}break;default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}break;case 10:var i=s.eelse,o=this.mapExpr(s.econd,!0),p=this.mapExpr(s.eif,e),f=null==i?null:this.mapExpr(i,e);return e||lt.hasSideEffect(p)||null!=f&&lt.hasSideEffect(f)?{e:O.TIf(o,p,f),p:o.p,t:o.t}:{e:O.TConst(F.CNull),t:o.t,p:o.p};case 13:p=this.mapExpr(s.it,!0),f=this.mapExpr(s.loop,!1);return lt.hasSideEffect(f)?{e:O.TFor(s.v,p,f),p:t.p,t:t.t}:{e:O.TConst(F.CNull),t:t.t,p:t.p};default:return lt.map(t,function(t){return n.mapExpr(t,!0)})}},__class__:Oc},(e["hxsl.Eval"]=ji).__name__="hxsl.Eval",ji.prototype={setConstant:function(t,e){this.constants.h[t.id]=O.TConst(e)},mapVar:function(t){var e=this.varMap.h[t.__id__];if(null!=e)return t==e?e:this.mapVar(e);if(null!=t.parent&&(this.mapVar(t.parent),null!=(e=this.varMap.h[t.__id__])))return t==e?e:this.mapVar(e);switch(e={id:17==t.type._hx_index?t.id:lt.allocVarId(),name:t.name,type:t.type,kind:t.kind},null!=t.parent&&(e.parent=this.mapVar(t.parent)),null!=t.qualifiers&&(e.qualifiers=t.qualifiers.slice()),this.varMap.set(t,e),this.varMap.set(e,e),(r=e.type)._hx_index){case 13:for(var n=r.vl,s=[],i=0;i<n.length;)s.push(this.mapVar(n[i++]));e.type=V.TStruct(s);break;case 15:var a,n=r.t;1==(s=r.size)._hx_index&&(i=s.v,null!=(l=this.constants.h[i.id])?null!=l&&0==l._hx_index&&2==(s=l.c)._hx_index?(a=s.v,e.type=15==e.type._hx_index?V.TArray(n,Ec.SConst(a)):V.TBuffer(n,Ec.SConst(a))):Ui.t("Integer value expected for array size constant "+i.name,null):(o=this.mapVar(i),e.type=15==e.type._hx_index?V.TArray(n,Ec.SVar(o)):V.TBuffer(n,Ec.SVar(o))));break;case 16:var r,l,o,n=r.t;1==(s=r.size)._hx_index&&(r=s.v,null!=(l=this.constants.h[r.id])?null!=l&&0==l._hx_index&&2==(s=l.c)._hx_index?(i=s.v,e.type=15==e.type._hx_index?V.TArray(n,Ec.SConst(i)):V.TBuffer(n,Ec.SConst(i))):Ui.t("Integer value expected for array size constant "+r.name,null):(o=this.mapVar(r),e.type=15==e.type._hx_index?V.TArray(n,Ec.SVar(o)):V.TBuffer(n,Ec.SVar(o))))}return e},checkSamplerRec:function(t){if(lt.isSampler(t))return!0;switch(t._hx_index){case 13:for(var e=t.vl,n=0;n<e.length;)if(this.checkSamplerRec(e[n++].type))return!0;return!1;case 15:return this.checkSamplerRec(t.t);case 16:return!0}return!1},needsInline:function(t){for(var e=0,n=t.args;e<n.length;)if(this.checkSamplerRec(n[e++].type))return!0;return!1},eval:function(t){for(var e=[],n=0,s=t.funs;n<s.length;){for(var i=s[n],a=(++n,i.kind),r=this.mapVar(i.ref),l=[],o=0,h=i.args;o<h.length;)l.push(this.mapVar(h[o++]));a={kind:a,ref:r,args:l,ret:i.ret,expr:i.expr};i.kind==zc.Helper&&this.inlineCalls||this.needsInline(a)?this.funMap.set(a.ref,i):e.push(a)}for(n=0,s=e.length;n<s;)this.curFun=e[n++],this.curFun.expr=this.evalExpr(this.curFun.expr,!1);for(var u=t.name,n=[],s=0,l=t.vars;s<l.length;)n.push(this.mapVar(l[s++]));return{name:u,vars:n,funs:e}},hasReturn:function(t){return this.markReturn=!1,this.hasReturnLoop(t),this.markReturn},hasReturnLoop:function(t){12==t.e._hx_index?this.markReturn=!0:this.markReturn||lt.iter(t,W(this,this.hasReturnLoop))},handleReturn:function(t,e){null==e&&(e=!1);var n,s=t.e;switch(s._hx_index){case 3:var i=this.handleReturn(s.e,e);return{e:O.TParenthesis(i),t:i.t,p:t.p};case 4:var a=0,r=(_=s.el).length,l=[];t:for(;a<r;){var o=_[a++];if(a==r)l.push(this.handleReturn(o,e));else{var h=o.e;switch(h._hx_index){case 10:var u=h.eif;if(null==h.eelse&&e&&this.hasReturn(u)){l.push(this.handleReturn({e:O.TIf(h.econd,u,{e:O.TBlock(_.slice(a)),t:o.t,p:o.p}),t:o.t,p:o.p}));break t}l.push(this.handleReturn(o));break;case 12:l.push(this.handleReturn(h.e,e));break t;default:l.push(this.handleReturn(o))}}}return{e:O.TBlock(l),t:e?0==l.length?V.TVoid:l[l.length-1].t:t.t,p:t.p};case 10:return null!=(_=s.eelse)&&e?(i=this.handleReturn(s.econd),n=this.handleReturn(s.eif,e),{e:O.TIf(i,n,this.handleReturn(_,e)),t:n.t,p:t.p}):lt.map(t,W(this,this.handleReturnDef));case 12:var _=s.e;return e||Ui.t("Cannot inline not final return",t.p),null==_?{e:O.TBlock([]),t:V.TVoid,p:t.p}:this.handleReturn(_,!0);default:return lt.map(t,W(this,this.handleReturnDef))}},handleReturnDef:function(t){return this.handleReturn(t)},evalCall:function(t,e,n,s){switch(t._hx_index){case 38:return 1==e.length&&0==(h=e[0].e)._hx_index&&2==(u=h.c)._hx_index?O.TConst(F.CFloat(u.v)):null;case 63:case 64:if(0!=(h=e[0].e)._hx_index)throw Ui.t("Cannot eval complex channel "+Wc.toString(e[0],!0)+" "+this.constantsToString(),s),tr.thrown("assert");if(2!=(u=h.c)._hx_index)throw Ui.t("Cannot eval complex channel "+Wc.toString(e[0],!0)+" "+this.constantsToString(),s),tr.thrown("assert");var i=u.v,a=n[0];if(1!=(h=a.e)._hx_index)throw tr.thrown("assert");if(17!=(h=(a={e:O.TVar(this.mapVar(h.v)),t:a.t,p:a.p}).t)._hx_index)throw tr.thrown("assert");for(var r=h.size,l=b.createEnumIndex(Qc,7&i,null),o=[a],h=1,u=e.length;h<u;)o.push(e[h++]);o.push({e:O.TConst(F.CInt(i>>3)),t:V.TInt,p:s});var _,c={e:O.TCall({e:O.TGlobal(t),t:V.TVoid,p:s},o),t:V.TVoid,p:s};switch(l._hx_index){case 0:var d={e:O.TConst(F.CFloat(0)),t:V.TFloat,p:s};return 1==r?d.e:O.TCall({e:O.TGlobal([D.Vec2,D.Vec3,D.Vec4][r-2]),t:V.TVoid,p:s},[d]);case 1:case 2:case 3:case 4:switch(r){case 1:switch(l._hx_index){case 1:_=[Rc.X];break;case 2:_=[Rc.Y];break;case 3:_=[Rc.Z];break;case 4:_=[Rc.W];break;default:throw tr.thrown("Invalid channel value "+Ja.string(l)+" for "+r+" channels")}break;case 2:switch(l._hx_index){case 1:_=[Rc.X,Rc.Y];break;case 2:_=[Rc.Y,Rc.Z];break;case 3:_=[Rc.Z,Rc.W];break;default:throw tr.thrown("Invalid channel value "+Ja.string(l)+" for "+r+" channels")}break;case 3:switch(l._hx_index){case 1:_=[Rc.X,Rc.Y,Rc.Z];break;case 2:_=[Rc.Y,Rc.Z,Rc.W];break;default:throw tr.thrown("Invalid channel value "+Ja.string(l)+" for "+r+" channels")}break;default:throw tr.thrown("Invalid channel value "+Ja.string(l)+" for "+r+" channels")}return O.TSwiz(c,_);case 5:return O.TCall({e:O.TGlobal(D.Unpack),t:V.TVoid,p:s},[c]);case 6:return O.TCall({e:O.TGlobal(D.UnpackNormal),t:V.TVoid,p:s},[c])}break;case 67:for(h=0;h<e.length;){var p=e[h];++h,Es.trace(Wc.toString(p),{fileName:p.p.file,lineNumber:0,className:null,methodName:null})}return O.TBlock([]);default:return null}},constantsToString:function(){for(var t=[],e=this.constants.keys();e.hasNext();){var n=e.next();t.push(n+" => "+Wc.toString({e:this.constants.h[n],t:V.TVoid,p:null},!0))}return t.toString()},ifBlock:function(t){return null==t||10!=t.e._hx_index?t:{e:O.TBlock([t]),t:t.t,p:t.p}},evalExpr:function(t,e){null==e&&(e=!0);var n=this,s=t.e;switch(s._hx_index){case 0:a=t.e;break;case 1:var i=s.v,a=null!=(f=this.constants.h[i.id])?f:O.TVar(this.mapVar(i));break;case 2:a=t.e;break;case 3:a=0==(c=this.evalExpr(s.e,e)).e._hx_index?c.e:O.TParenthesis(c);break;case 4:for(var r=[],l=(i=s.el).length-1,o=0,h=i.length;o<h;){var u=o++,_=e&&u==l;switch((c=this.evalExpr(i[u],_)).e._hx_index){case 0:case 1:_&&r.push(c);break;default:r.push(c)}}a=1==r.length&&this.curFun.kind!=zc.Init?r[0].e:O.TBlock(r);break;case 5:var i=s.op,c=this.evalExpr(s.e1),d=this.evalExpr(s.e2);switch(i._hx_index){case 0:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 2:a=0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v+o.v|0)):O.TBinop(i,c,d);break;case 3:a=0==h._hx_index&&3==(o=h.c)._hx_index?O.TConst(F.CFloat(g.v+o.v)):O.TBinop(i,c,d);break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 1:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 2:a=0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v*o.v|0)):O.TBinop(i,c,d);break;case 3:a=0==h._hx_index&&3==(o=h.c)._hx_index?O.TConst(F.CFloat(g.v*o.v)):O.TBinop(i,c,d);break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 2:a=0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v/o.v|0)):O.TBinop(i,c,d);break;case 3:a=0==h._hx_index&&3==(o=h.c)._hx_index?O.TConst(F.CFloat(g.v/o.v)):O.TBinop(i,c,d);break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 2:a=0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v-o.v|0)):O.TBinop(i,c,d);break;case 3:a=0==h._hx_index&&3==(o=h.c)._hx_index?O.TConst(F.CFloat(g.v-o.v)):O.TBinop(i,c,d);break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:case 21:a=O.TBinop(i,c,d);break;case 5:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 0:a=0==h._hx_index?0==h.c._hx_index?O.TConst(F.CBool(!0)):O.TConst(F.CBool(!1)):O.TBinop(i,c,d);break;case 1:o=g.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 1:a=O.TConst(F.CBool(0==(o==b.b?0:1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 2:a=O.TConst(F.CBool(o-b.v==0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 3:var p=b.v;a=O.TConst(F.CBool(0==(p<o?1:o==p?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:o=g.v;if(0==h._hx_index)switch((g=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 4:h=g.v;a=O.TConst(F.CBool(0==(h<o?1:o==h?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 6:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 0:a=0==h._hx_index?0==h.c._hx_index?O.TConst(F.CBool(!1)):O.TConst(F.CBool(!0)):O.TBinop(i,c,d);break;case 1:o=g.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 1:a=O.TConst(F.CBool(0!=(o==b.b?0:1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 2:a=O.TConst(F.CBool(o-b.v!=0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 3:p=b.v;a=O.TConst(F.CBool(0!=(p<o?1:o==p?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:o=g.v;if(0==h._hx_index)switch((g=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 4:h=g.v;a=O.TConst(F.CBool(0!=(h<o?1:o==h?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 7:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 0:a=0==h._hx_index?(h.c._hx_index,O.TConst(F.CBool(!1))):O.TBinop(i,c,d);break;case 1:o=g.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 1:a=O.TConst(F.CBool(0<(o==b.b?0:1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 2:a=O.TConst(F.CBool(0<o-b.v));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 3:p=b.v;a=O.TConst(F.CBool(0<(p<o?1:o==p?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:o=g.v;if(0==h._hx_index)switch((g=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 4:h=g.v;a=O.TConst(F.CBool(0<(h<o?1:o==h?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 8:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 0:a=0==h._hx_index?0==h.c._hx_index?O.TConst(F.CBool(!0)):O.TConst(F.CBool(!1)):O.TBinop(i,c,d);break;case 1:o=g.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 1:a=O.TConst(F.CBool(0<=(o==b.b?0:1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 2:a=O.TConst(F.CBool(0<=o-b.v));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 3:p=b.v;a=O.TConst(F.CBool(0<=(p<o?1:o==p?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:o=g.v;if(0==h._hx_index)switch((g=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!0));break;case 4:h=g.v;a=O.TConst(F.CBool(0<=(h<o?1:o==h?0:-1)));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 9:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 0:a=0==h._hx_index?0==h.c._hx_index?O.TConst(F.CBool(!1)):O.TConst(F.CBool(!0)):O.TBinop(i,c,d);break;case 1:o=g.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 1:a=O.TConst(F.CBool((o==b.b?0:1)<0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 2:a=O.TConst(F.CBool(o-b.v<0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 3:p=b.v;a=O.TConst(F.CBool((p<o?1:o==p?0:-1)<0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:o=g.v;if(0==h._hx_index)switch((g=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 4:h=g.v;a=O.TConst(F.CBool((h<o?1:o==h?0:-1)<0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 10:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 0:a=0==h._hx_index?(h.c._hx_index,O.TConst(F.CBool(!0))):O.TBinop(i,c,d);break;case 1:o=g.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 1:a=O.TConst(F.CBool((o==b.b?0:1)<=0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 2:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 2:a=O.TConst(F.CBool(o-b.v<=0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 3:o=g.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 3:p=b.v;a=O.TConst(F.CBool((p<o?1:o==p?0:-1)<=0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 4:o=g.v;if(0==h._hx_index)switch((g=h.c)._hx_index){case 0:a=O.TConst(F.CBool(!1));break;case 4:h=g.v;a=O.TConst(F.CBool((h<o?1:o==h?0:-1)<=0));break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 11:o=c.e,h=d.e;a=0==o._hx_index&&2==(g=o.c)._hx_index&&0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v&o.v)):O.TBinop(i,c,d);break;case 12:o=c.e,h=d.e;a=0==o._hx_index&&2==(g=o.c)._hx_index&&0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v|o.v)):O.TBinop(i,c,d);break;case 13:o=c.e,h=d.e;a=0==o._hx_index&&2==(g=o.c)._hx_index&&0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v^o.v)):O.TBinop(i,c,d);break;case 14:o=c.e,h=d.e;a=0==o._hx_index?1==(g=o.c)._hx_index?(o=g.b,0==h._hx_index&&1==(g=h.c)._hx_index?O.TConst(F.CBool(o&&g.b)):0==o?O.TConst(F.CBool(o)):d.e):0==h._hx_index&&1==(o=h.c)._hx_index?0==(g=o.b)?O.TConst(F.CBool(g)):c.e:O.TBinop(i,c,d):0==h._hx_index&&1==(o=h.c)._hx_index?0==(h=o.b)?O.TConst(F.CBool(h)):c.e:O.TBinop(i,c,d);break;case 15:o=c.e,h=d.e;a=0==o._hx_index?1==(g=o.c)._hx_index?(o=g.b,0==h._hx_index&&1==(g=h.c)._hx_index?O.TConst(F.CBool(o||g.b)):1==o?O.TConst(F.CBool(o)):d.e):0==h._hx_index&&1==(o=h.c)._hx_index?1==(g=o.b)?O.TConst(F.CBool(g)):c.e:O.TBinop(i,c,d):0==h._hx_index&&1==(o=h.c)._hx_index?1==(h=o.b)?O.TConst(F.CBool(h)):c.e:O.TBinop(i,c,d);break;case 16:o=c.e,h=d.e;a=0==o._hx_index&&2==(g=o.c)._hx_index&&0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v<<o.v)):O.TBinop(i,c,d);break;case 17:o=c.e,h=d.e;a=0==o._hx_index&&2==(g=o.c)._hx_index&&0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v>>o.v)):O.TBinop(i,c,d);break;case 18:o=c.e,h=d.e;a=0==o._hx_index&&2==(g=o.c)._hx_index&&0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v>>>o.v)):O.TBinop(i,c,d);break;case 19:o=c.e,h=d.e;if(0==o._hx_index)switch((g=o.c)._hx_index){case 2:a=0==h._hx_index&&2==(o=h.c)._hx_index?O.TConst(F.CInt(g.v%o.v|0)):O.TBinop(i,c,d);break;case 3:a=0==h._hx_index&&3==(o=h.c)._hx_index?O.TConst(F.CFloat(g.v%o.v)):O.TBinop(i,c,d);break;default:a=O.TBinop(i,c,d)}else a=O.TBinop(i,c,d);break;case 20:a=O.TBinop(i,c,d);break;default:throw tr.thrown("assert")}break;case 6:i=s.op;if(0==(o=(c=this.evalExpr(s.e1)).e)._hx_index){h=o.c;switch(i._hx_index){case 2:a=1==h._hx_index?O.TConst(F.CBool(!h.b)):O.TUnop(i,c);break;case 3:switch(h._hx_index){case 2:a=O.TConst(F.CInt(-h.v));break;case 3:a=O.TConst(F.CFloat(-h.v));break;default:a=O.TUnop(i,c)}break;default:a=O.TUnop(i,c)}}else a=O.TUnop(i,c);break;case 7:i=s.init;a=O.TVarDecl(this.mapVar(s.v),null==i?null:this.evalExpr(i));break;case 8:for(var i=s.args,f=this.evalExpr(s.e),o=[],h=0;h<i.length;)o.push(this.evalExpr(i[h++]));switch((h=f.e)._hx_index){case 1:var g=h.v;if(null!=this.funMap.h.__keys__[g.__id__]){for(var m=this.funMap.h[g.__id__],A=[],x=[],g=0,b=m.args.length;g<b;){var u=g++,y=[m.args[u]];switch((p=(c=o[u]).e)._hx_index){case 0:x.push(function(t,e){return function(){null==t[0]?n.constants.remove(e[0].id):n.constants.h[e[0].id]=t[0]}}([this.constants.h[y[0].id]],y)),this.constants.h[y[0].id]=c.e;break;case 1:switch(p.v.kind._hx_index){case 0:case 1:case 2:x.push(function(t,e){return function(){null==t[0]?n.constants.remove(e[0].id):n.constants.h[e[0].id]=t[0]}}([this.constants.h[y[0].id]],y)),this.constants.h[y[0].id]=c.e;break;default:var w=[this.varMap.h[y[0].__id__]];null==w[0]?x.push(function(t){return function(){n.varMap.remove(t[0])}}(y)):(this.varMap.remove(y[0]),x.push(function(t,e){return function(){n.varMap.set(e[0],t[0])}}(w,y))),A.push({e:O.TVarDecl(this.mapVar(y[0]),c),t:V.TVoid,p:c.p})}break;default:var v=[this.varMap.h[y[0].__id__]];null==v[0]?x.push(function(t){return function(){n.varMap.remove(t[0])}}(y)):(this.varMap.remove(y[0]),x.push(function(t,e){return function(){n.varMap.set(e[0],t[0])}}(v,y))),A.push({e:O.TVarDecl(this.mapVar(y[0]),c),t:V.TVoid,p:c.p})}}for(c=this.handleReturn(this.evalExpr(m.expr,!1),!0),g=0;g<x.length;)x[g++]();if(4==(g=c.e)._hx_index)for(b=g.el,g=0;g<b.length;)A.push(b[g++]);else A.push(c);a=O.TBlock(A)}else a=O.TCall(f,o);break;case 2:var C=this.evalCall(h.g,o,i,t.p);a=null!=C?C:O.TCall(f,o);break;default:a=Ui.t("Cannot eval non-static call expresssion '"+(new Wc).exprString(f)+"'",f.p)}break;case 9:a=O.TSwiz(this.evalExpr(s.e),s.regs.slice());break;case 10:var M=i=s.eif,S=o=s.eelse,k=this.evalExpr(s.econd);a=0==(h=k.e)._hx_index?1==(g=h.c)._hx_index?g.b?this.evalExpr(i,e).e:null==o?O.TConst(F.CNull):this.evalExpr(o,e).e:e&&null!=o&&this.eliminateConditionals?O.TCall({e:O.TGlobal(D.Mix),t:t.t,p:t.p},[this.evalExpr(o,!0),this.evalExpr(i,!0),{e:O.TCall({e:O.TGlobal(D.ToFloat),t:V.TFun([]),p:k.p},[k]),t:V.TFloat,p:t.p}]):(M=this.evalExpr(i,e),null!=o&&0==(h=(S=this.evalExpr(o,e)).e)._hx_index&&0==h.c._hx_index&&(S=null),M=this.ifBlock(M),S=this.ifBlock(S),O.TIf(k,M,S)):e&&null!=o&&this.eliminateConditionals?O.TCall({e:O.TGlobal(D.Mix),t:t.t,p:t.p},[this.evalExpr(o,!0),this.evalExpr(i,!0),{e:O.TCall({e:O.TGlobal(D.ToFloat),t:V.TFun([]),p:k.p},[k]),t:V.TFloat,p:t.p}]):(M=this.evalExpr(i,e),null!=o&&0==(i=(S=this.evalExpr(o,e)).e)._hx_index&&0==i.c._hx_index&&(S=null),M=this.ifBlock(M),S=this.ifBlock(S),O.TIf(k,M,S));break;case 11:a=O.TDiscard;break;case 12:i=s.e;a=O.TReturn(null==i?null:this.evalExpr(i));break;case 13:var i=s.v,o=s.loop,k=this.mapVar(i),M=this.evalExpr(s.it);if(5==(h=M.e)._hx_index)if(21==h.op._hx_index){g=h.e1.e;if(0==g._hx_index)if(2==(b=g.c)._hx_index){g=h.e2.e;if(0==g._hx_index)if(2==(h=g.c)._hx_index){g=h.v;if(this.unrollLoops){for(r=[],h=b.v;h<g;)this.constants.h[i.id]=O.TConst(F.CInt(h++)),r.push(this.evalExpr(o,!1));this.constants.remove(i.id),c=O.TBlock(r)}else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)))}else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)));else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)))}else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)));else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)))}else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)));else c=O.TFor(k,M,this.ifBlock(this.evalExpr(o,!1)));this.varMap.remove(i),a=c;break;case 14:a=O.TContinue;break;case 15:a=O.TBreak;break;case 16:c=this.evalExpr(s.e),d=this.evalExpr(s.index),i=c.e,o=d.e;a=17==i._hx_index&&(h=i.el,0==o._hx_index)&&2==(i=o.c)._hx_index&&0<=(o=i.v)&&o<h.length?h[o].e:O.TArray(c,d);break;case 17:for(i=s.el,o=[],h=0;h<i.length;)o.push(this.evalExpr(i[h++]));a=O.TArrayDecl(o);break;case 18:for(i=s.cases,o=s.def,c=this.evalExpr(s.e),h=[],g=0;g<i.length;){for(var f=i[g],b=(++g,[]),p=0,B=f.values;p<B.length;)b.push(this.evalExpr(B[p++]));h.push({values:b,expr:this.evalExpr(f.expr,e)})}var S=null==o?null:this.evalExpr(o,e),I=!1;if(0==(i=c.e)._hx_index){if(2!=(o=i.c)._hx_index)throw tr.thrown("Unsupported switch constant "+Ja.string(o));for(i=o.v,g=0;g<h.length;)for(f=h[g],b=(++g,0),p=f.values;b<p.length;)if(0==(B=p[b++].e)._hx_index){var T=B.c;switch(T._hx_index){case 2:case 3:if(T.v==i)return f.expr}}else I=!0}else I=!0;a=I?O.TSwitch(c,h,S):null==S?O.TBlock([]):S.e;break;case 19:a=O.TWhile(this.evalExpr(s.e),this.ifBlock(this.evalExpr(s.loop,!1)),s.normalWhile);break;case 20:i=s.m,o=s.e;"unroll"==i?(this.unrollLoops=!0,d=this.evalExpr(o,e),this.unrollLoops=!1):d=this.evalExpr(o,e),a=O.TMeta(i,s.args,d)}return{e:a,t:t.t,p:t.p}},__class__:ji},(e["hxsl._Flatten.Alloc"]=Hi).__name__="hxsl._Flatten.Alloc",Hi.prototype={__class__:Hi},d["hxsl.ARead"]={__ename__:!0,__constructs__:null,AIndex:((c=function(t){return{_hx_index:0,a:t,__enum__:"hxsl.ARead",toString:l}})._hx_name="AIndex",c.__params__=["a"],c),AOffset:((c=function(t,e,n){return{_hx_index:1,a:t,stride:e,delta:n,__enum__:"hxsl.ARead",toString:l}})._hx_name="AOffset",c.__params__=["a","stride","delta"],c)}),Uc=(Lc.__constructs__=[Lc.AIndex,Lc.AOffset],Lc.__empty_constructs__=[],function(){}),Nc=((e["hxsl.Flatten"]=Uc).__name__="hxsl.Flatten",Uc.prototype={flatten:function(t,e,n){if(this.globals=[],this.params=[],this.outVars=[],n){this.consts=[];for(var s=t.funs[0].expr.p,n={id:lt.allocVarId(),name:"__consts__",kind:Q.Global,type:null},i=(this.econsts={e:O.TVar(n),t:null,p:s},t.name),a=t.vars.slice(),r=[],l=0,o=t.funs;l<o.length;)r.push(this.mapFun(o[l++],W(this,this.mapConsts)));t={name:i,vars:a,funs:r};for(r=0,l=t.vars;r<l.length;)9==l[r++].type._hx_index&&this.allocConst(255,s);0<this.consts.length&&(n.type=this.econsts.t=V.TArray(V.TFloat,Ec.SConst(this.consts.length)),t.vars.push(n))}this.varMap=new r_,this.allocData=new r_;for(var h,r=0,l=t.vars;r<l.length;)this.gatherVar(l[r++]);switch(e._hx_index){case 0:h="vertex";break;case 1:h="fragment";break;default:throw tr.thrown("assert")}this.pack(h+"Globals",Q.Global,this.globals,Dc.VFloat),this.pack(h+"Params",Q.Param,this.params,Dc.VFloat);for(i=this.globals.concat(this.params),this.packTextures(h+"Textures",i,V.TSampler2D).concat(this.packTextures(h+"TexturesCube",i,V.TSamplerCube)).concat(this.packTextures(h+"TexturesArray",i,V.TSampler2DArray)),this.packBuffers(i),r=[],l=0,o=t.funs;l<o.length;)r.push(this.mapFun(o[l++],W(this,this.mapExpr)));return{name:t.name,vars:this.outVars,funs:r}},mapFun:function(t,e){return{kind:t.kind,ret:t.ret,args:t.args,ref:t.ref,expr:e(t.expr)}},mapExpr:function(t){switch((s=t.e)._hx_index){case 1:var e=s.v;null!=(a=this.varMap.h[e.__id__])&&(t=this.access(a,e.type,t.p,Lc.AIndex(a)));break;case 16:var e=s.e,n=s.index,s=e.e,i=e.p;if(1==s._hx_index){var a,e=s.v,r=n,s=n.e;if(0!=s._hx_index||2!=s.c._hx_index){if(null!=(a=this.varMap.h[e.__id__])){if(15!=(s=e.type)._hx_index)throw tr.thrown("assert");e=s.t;if(lt.isSampler(e))r=this.toInt(this.mapExpr(n)),t=this.access(a,e,i,Lc.AOffset(a,1,r));else{var l=this.varSize(e,a.t);if(0==l||0!=(3&l))throw tr.thrown(new Ui("Dynamic access to an Array which size is not 4 components-aligned is not allowed",t.p));l>>=2,r=this.toInt(this.mapExpr(n)),t=this.access(a,e,i,Lc.AOffset(a,l,1==l?r:{e:O.TBinop(C.OpMult,r,{e:O.TConst(F.CInt(l)),t:V.TInt,p:i}),t:V.TInt,p:i}))}}}else t=lt.map(t,W(this,this.mapExpr))}else t=lt.map(t,W(this,this.mapExpr));break;default:t=lt.map(t,W(this,this.mapExpr))}return this.optimize(t)},mapConsts:function(t){switch((a=t.e)._hx_index){case 0:switch((e=a.c)._hx_index){case 2:case 3:return this.allocConst(e.v,t.p);default:return t}break;case 2:switch(a.g._hx_index){case 0:this.allocConst(Math.PI/180,t.p);break;case 1:this.allocConst(180/Math.PI,t.p);break;case 9:this.allocConst(1.4426950408889634,t.p);break;case 10:this.allocConst(.6931471805599453,t.p);break;case 24:this.allocConst(1,t.p);break;case 26:this.allocConst(2,t.p),this.allocConst(3,t.p);break;case 54:this.allocConsts([1,255,65025,16581375],t.p),this.allocConsts([.00392156862745098,.00392156862745098,.00392156862745098,0],t.p);break;case 55:this.allocConsts([1,.00392156862745098,15378700499807768e-21,6.030862941101084e-8],t.p);break;case 56:this.allocConst(1,t.p),this.allocConst(.5,t.p);break;case 57:this.allocConst(.5,t.p);break;case 58:this.allocConsts([.5,.5],t.p),this.allocConsts([.5,-.5],t.p);break;case 59:this.allocConsts([2,-2],t.p),this.allocConsts([-1,1],t.p)}break;case 5:1==a.op._hx_index&&8==a.e2.t._hx_index&&this.allocConst(1,t.p);break;case 8:var e=a.args,n=a.e.e;if(2==n._hx_index&&42==n.g._hx_index&&2==e.length){var n=e[0],s=e[1],e=n.e,i=n.t;if(1==e._hx_index)switch(e.v.kind._hx_index){case 0:case 1:case 2:case 3:if(5==i._hx_index)if(3==i.size)if(1==i.t._hx_index)if(0==(e=s.e)._hx_index){n=e.c;if(2==n._hx_index&&1==n.v)return t}}}break;case 16:var e=a.e,a=(n=a.index).e;if(0==a._hx_index&&2==a.c._hx_index)return{e:O.TArray(this.mapConsts(e),n),t:t.t,p:t.p};15==(a=e.t)._hx_index&&this.allocConst(this.varSize(a.t,Dc.VFloat)>>2,t.p)}return lt.map(t,W(this,this.mapConsts))},allocConst:function(t,e){var n=this.consts.indexOf(t);return n<0&&(n=this.consts.length,this.consts.push(t)),{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(n)),t:V.TInt,p:e}),t:V.TFloat,p:e}},allocConsts:function(t,e){for(var n=t.length-1&3,s=-1,i=0,a=this.consts.length-(t.length-1);i<a;){var r=i++;if(r>>2==r+n>>2){for(var l=!0,o=0,h=t.length;o<h;){var u=o++;if(this.consts[r+u]!=t[u]){l=!1;break}}if(l){s=r;break}}}if(s<0){for(;this.consts.length>>2!=this.consts.length+n>>2;)this.consts.push(0);for(s=this.consts.length,i=0;i<t.length;)this.consts.push(t[i++])}switch(t.length){case 1:return{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s)),t:V.TInt,p:e}),t:V.TFloat,p:e};case 2:return{e:O.TCall({e:O.TGlobal(D.Vec2),t:V.TVoid,p:e},[{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s)),t:V.TInt,p:e}),t:V.TFloat,p:e},{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s+1)),t:V.TInt,p:e}),t:V.TFloat,p:e}]),t:V.TVec(2,Dc.VFloat),p:e};case 3:return{e:O.TCall({e:O.TGlobal(D.Vec3),t:V.TVoid,p:e},[{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s)),t:V.TInt,p:e}),t:V.TFloat,p:e},{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s+1)),t:V.TInt,p:e}),t:V.TFloat,p:e},{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s+2)),t:V.TInt,p:e}),t:V.TFloat,p:e}]),t:V.TVec(3,Dc.VFloat),p:e};case 4:return{e:O.TCall({e:O.TGlobal(D.Vec4),t:V.TVoid,p:e},[{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s)),t:V.TInt,p:e}),t:V.TFloat,p:e},{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s+1)),t:V.TInt,p:e}),t:V.TFloat,p:e},{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s+3)),t:V.TInt,p:e}),t:V.TFloat,p:e},{e:O.TArray(this.econsts,{e:O.TConst(F.CInt(s+4)),t:V.TInt,p:e}),t:V.TFloat,p:e}]),t:V.TVec(4,Dc.VFloat),p:e};default:throw tr.thrown("assert")}},access:function(t,e,n,s){switch(e._hx_index){case 6:var i=this.access(t,V.TMat3x4,n,s);return{e:O.TCall({e:O.TGlobal(D.Mat3),t:V.TFun([]),p:n},[i]),t:V.TMat3,p:n};case 7:var i=O.TGlobal(D.Mat4),a=V.TFun([]);switch(s._hx_index){case 0:var r=s.a;u={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt(null==r.t?r.pos:r.pos>>2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:var r=s.a,l=s.delta,o=null==r.t?r.pos:r.pos>>2;u={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}switch(s._hx_index){case 0:r=s.a;_={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt((null==r.t?r.pos:r.pos>>2)+1)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=(null==r.t?r.pos:r.pos>>2)+1;_={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}switch(s._hx_index){case 0:r=s.a;c={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt((null==r.t?r.pos:r.pos>>2)+2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=(null==r.t?r.pos:r.pos>>2)+2;c={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}switch(s._hx_index){case 0:var r=s.a,h={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt((null==r.t?r.pos:r.pos>>2)+3)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=(null==r.t?r.pos:r.pos>>2)+3;h={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}return{e:O.TCall({e:i,t:a,p:n},[u,_,c,h]),t:V.TMat4,p:n};case 8:var u,_,c,i=O.TGlobal(D.Mat3x4),a=V.TFun([]);switch(s._hx_index){case 0:r=s.a;u={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt(null==r.t?r.pos:r.pos>>2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=null==r.t?r.pos:r.pos>>2;u={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}switch(s._hx_index){case 0:r=s.a;_={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt((null==r.t?r.pos:r.pos>>2)+1)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=(null==r.t?r.pos:r.pos>>2)+1;_={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}switch(s._hx_index){case 0:r=s.a;c={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt((null==r.t?r.pos:r.pos>>2)+2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=(null==r.t?r.pos:r.pos>>2)+2;c={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}return{e:O.TCall({e:i,t:a,p:n},[u,_,c]),t:V.TMat3x4,p:n};case 15:r=e.t;if(0==(l=e.size)._hx_index){for(var d=l.v,p=t.size/d|0,l=[],f=0;f<d;){var g=new Hi(t.g,t.t,t.pos+p*f++,p);l.push(this.access(g,r,n,Lc.AIndex(g)))}return{e:O.TArrayDecl(l),t:r,p:n}}if(lt.isSampler(e)){switch(s._hx_index){case 0:r=s.a;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt(null==r.t?r.pos:r.pos>>2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=null==r.t?r.pos:r.pos>>2;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}x.t=e}else{if(4<(A=this.varSize(e,t.t)))return Ui.t("Access not supported for "+lt.toString(e),null);switch(s._hx_index){case 0:r=s.a;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt(null==r.t?r.pos:r.pos>>2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=null==r.t?r.pos:r.pos>>2;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}if(4==A){if(-1==t.pos)return{e:O.TCall({e:O.TGlobal(D.Vec4),t:V.TFun([]),p:n},[{e:O.TConst(F.CFloat(0)),t:V.TFloat,p:n}]),t:V.TVec(4,Dc.VFloat),p:n};if(0!=(3&t.pos))throw tr.thrown("assert")}else{for(var m=[],r=0;r<A;)m.push(lt.SWIZ[r+++(3&t.pos)]);x={e:O.TSwiz(x,m),t:e,p:n}}switch(e._hx_index){case 1:x.t=V.TFloat,x=this.toInt(x);break;case 5:r=e.size;0==e.t._hx_index&&(x.t=V.TVec(r,Dc.VFloat),x={e:O.TCall({e:O.TGlobal([D.IVec2,D.IVec3,D.IVec4][r-2]),t:V.TFun([]),p:n},[x]),t:e,p:n})}}return x;default:if(lt.isSampler(e)){switch(s._hx_index){case 0:r=s.a;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt(null==r.t?r.pos:r.pos>>2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=null==r.t?r.pos:r.pos>>2;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}x.t=e}else{var A,x;if(4<(A=this.varSize(e,t.t)))return Ui.t("Access not supported for "+lt.toString(e),null);switch(s._hx_index){case 0:r=s.a;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},{e:O.TConst(F.CInt(null==r.t?r.pos:r.pos>>2)),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n};break;case 1:r=s.a,l=s.delta,o=null==r.t?r.pos:r.pos>>2;x={e:O.TArray({e:O.TVar(r.g),t:r.g.type,p:n},0==o?l:{e:O.TBinop(C.OpAdd,l,{e:O.TConst(F.CInt(o)),t:V.TInt,p:n}),t:V.TInt,p:n}),t:V.TVec(4,r.t),p:n}}if(4==A){if(-1==t.pos)return{e:O.TCall({e:O.TGlobal(D.Vec4),t:V.TFun([]),p:n},[{e:O.TConst(F.CFloat(0)),t:V.TFloat,p:n}]),t:V.TVec(4,Dc.VFloat),p:n};if(0!=(3&t.pos))throw tr.thrown("assert")}else{for(m=[],r=0;r<A;)m.push(lt.SWIZ[r+++(3&t.pos)]);x={e:O.TSwiz(x,m),t:e,p:n}}switch(e._hx_index){case 1:x.t=V.TFloat,x=this.toInt(x);break;case 5:r=e.size;0==e.t._hx_index&&(x.t=V.TVec(r,Dc.VFloat),x={e:O.TCall({e:O.TGlobal([D.IVec2,D.IVec3,D.IVec4][r-2]),t:V.TFun([]),p:n},[x]),t:e,p:n})}}return x}},toInt:function(t){return t.t==V.TInt?t:{e:O.TCall({e:O.TGlobal(D.ToInt),t:V.TFun([]),p:t.p},[t]),t:V.TInt,p:t.p}},optimize:function(t){switch((l=t.e)._hx_index){case 8:var e=l.args,n=l.e.e;if(2==n._hx_index)if(52==n.g._hx_index)if(1==e.length)if(8==(n=e[0].e)._hx_index){var e=n.args,s=n.e.e;if(2==s._hx_index&&51==s.g._hx_index){for(var i=0,a=0;a<4;)a+=this.varSize(e[e.length-1-i].t,Dc.VFloat),++i;if(4==a){for(var r,n=0,s=i;n<s;)++n,e.pop();if(8!=(n=t.e)._hx_index)throw tr.thrown("assert");return r=n.e,{e:O.TCall(r,e),t:t.t,p:t.p}}}}break;case 16:if(17==(e=l.e.e)._hx_index){var l,n=e.el,e=l.index.e;if(0==e._hx_index)if(2==(l=e.c)._hx_index){if(0<=(e=l.v)&&e<n.length)return n[e];Ui.t("Reading outside array bounds",t.p)}}}return t},packTextures:function(t,e,n){for(var s=[],i={id:lt.allocVarId(),name:t,type:n,kind:Q.Param},a=0,r=[],l=0;l<e.length;){var o=e[l],h=(++l,1);if(o.type!=n)switch((A=o.type)._hx_index){case 15:var u=A.size;if(0!=u._hx_index)continue;if(A.t!=n)continue;h=u.v;break;case 17:if(n!=V.TSampler2D)continue;break;default:continue}var _=new Hi(i,null,a,h);if(null!=(_.v=o).qualifiers)for(var c=0,d=o.qualifiers;c<d.length;){var p=d[c];if(++c,12==p._hx_index)for(var f=p.name,g=0,m=h;g<m;)r[a+g++]=f}this.varMap.set(o,_),s.push(_),a+=h}if(i.type=V.TArray(n,Ec.SConst(a)),0<r.length){for(var l=0,A=a;l<A;){var x=l++;null==r[x]&&(r[x]="")}null==i.qualifiers&&(i.qualifiers=[]),i.qualifiers.push(Pc.Sampler(r.join(",")))}return 0<s.length&&(this.outVars.push(i),this.allocData.set(i,s)),s},packBuffers:function(t){for(var e=[],n={id:lt.allocVarId(),name:"buffers",type:V.TVoid,kind:Q.Param},s=0;s<t.length;){var i,a=t[s];++s,16==a.type._hx_index&&((i=new Hi(n,null,e.length,1)).v=a,e.push(i),this.outVars.push(a))}n.type=V.TArray(V.TBuffer(V.TVoid,Ec.SConst(0)),Ec.SConst(e.length)),this.allocData.set(n,e)},pack:function(t,e,n,s){for(var i=[],a=0,r={id:lt.allocVarId(),name:t,type:V.TVec(0,s),kind:e},l=0;l<n.length;){var o=n[l];if(++l,!lt.isSampler(o.type)&&16!=o.type._hx_index){var h=o.type;if(15!=h._hx_index||!lt.isSampler(h.t)){var u=this.varSize(o.type,s);if(0==u){h=new Hi(r,s,-1,u);h.v=o,this.varMap.set(o,h)}else{for(var _=null,c=0;c<i.length;){var d=i[c];++c,null==d.v&&d.size>=u&&(null==_||_.size>d.size)&&(_=d)}null!=_?(0<(h=_.size-u)&&(i.splice(i.indexOf(_)+1,0,new Hi(r,s,_.pos+u,h)),_.size=u),_.v=o,this.varMap.set(o,_)):(h=new Hi(r,s,a,u),a+=u,h.v=o,this.varMap.set(o,h),i.push(h),0<(o=(4-u%4)%4)&&(h=new Hi(r,s,a,o),a+=o,i.push(h)))}}}}return r.type=V.TArray(V.TVec(4,s),Ec.SConst(a>>2)),0<a&&(this.outVars.push(r),this.allocData.set(r,i)),r},varSize:function(t,e){switch(t._hx_index){case 1:case 3:if(e==Dc.VFloat)return 1;throw tr.thrown(lt.toString(t)+" size unknown for type "+Ja.string(e));case 5:if(e==t.t)return t.size;throw tr.thrown(lt.toString(t)+" size unknown for type "+Ja.string(e));case 7:if(e==Dc.VFloat)return 16;throw tr.thrown(lt.toString(t)+" size unknown for type "+Ja.string(e));case 6:case 8:if(e==Dc.VFloat)return 12;throw tr.thrown(lt.toString(t)+" size unknown for type "+Ja.string(e));case 15:var n=t.size;if(0==n._hx_index)return this.varSize(t.t,e)*n.v;throw tr.thrown(lt.toString(t)+" size unknown for type "+Ja.string(e));default:throw tr.thrown(lt.toString(t)+" size unknown for type "+Ja.string(e))}},gatherVar:function(t){if(13==(n=t.type)._hx_index)for(var e=n.vl,n=0;n<e.length;)this.gatherVar(e[n++]);else switch(t.kind._hx_index){case 0:(lt.hasQualifier(t,Pc.PerObject)?this.params:this.globals).push(t);break;case 2:this.params.push(t);break;default:this.outVars.push(t)}},__class__:Uc},function(){this.channels=[],this.map=new fl}),er=((e["hxsl.Globals"]=Nc).__name__="hxsl.Globals",Nc.ALL=null,Nc.MAP=null,Nc.allocID=function(t){null==Nc.MAP&&(Nc.MAP=new N,Nc.ALL=[]);var e=Nc.MAP.h[t];return null==e&&(e=Nc.ALL.length,Nc.ALL.push(t),Nc.MAP.h[t]=e),e},Nc.getIDName=function(t){return Nc.ALL[t]},Nc.prototype={set:function(t,e){var n=this.map,t=Nc.allocID(t);n.h[t]=e},allocChannelID:function(t){for(var e=0,n=this.maxChannels;e<n;){var s=e++;if(this.channels[s]==t)return s}if(this.maxChannels==1<<lt.MAX_CHANNELS_BITS)throw tr.thrown("Too many unique channels");s=this.maxChannels++;return this.channels[s]=t,s},__class__:Nc},function(){}),Gc=((e["js.Boot"]=er).__name__="js.Boot",er.getClass=function(t){var e;return null==t?null:t instanceof Array?Array:null!=(e=t.__class__)?e:null!=(e=er.__nativeClassName(t))?er.__resolveNativeClass(e):null},er.__string_rec=function(i,a){if(null==i)return"null";if(5<=a.length)return"<...>";var r,t,e=typeof i;switch(e="function"==e&&(i.__name__||i.__ename__)?"object":e){case"function":return"<function>";case"object":if(i.__enum__)return h=(r=d[i.__enum__].__constructs__[i._hx_index])._hx_name,r.__params__?(a+="\t",h+"("+function(){for(var t=[],e=0,n=r.__params__;e<n.length;){var s=n[e];e+=1,t.push(er.__string_rec(i[s],a))}return t}().join(",")+")"):h;if(i instanceof Array){for(var n="[",s=(a+="\t",0),l=i.length;s<l;){var o=s++;n+=(0<o?",":"")+er.__string_rec(i[o],a)}return n+="]"}try{t=i.toString}catch(s){return"???"}if(null!=t&&t!=Object.toString&&"function"==typeof t){var h=i.toString();if("[object Object]"!=h)return h}var n="{\n",u=(a+="\t",null!=i.hasOwnProperty),_=null;for(_ in i)u&&!i.hasOwnProperty(_)||"prototype"!=_&&"__class__"!=_&&"__super__"!=_&&"__interfaces__"!=_&&"__properties__"!=_&&(2!=n.length&&(n+=", \n"),n+=a+_+" : "+er.__string_rec(i[_],a));return n+="\n"+(a=a.substring(1))+"}";case"string":return i;default:return String(i)}},er.__interfLoop=function(t,e){for(;;){if(null==t)return!1;if(t==e)return!0;var n=t.__interfaces__;if(null!=n)for(var s=0,i=n.length;s<i;){var a=n[s++];if(a==e||er.__interfLoop(a,e))return!0}t=t.__super__}},er.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array;case wp:return"boolean"==typeof t;case bp:return null!=t;case yp:return"number"==typeof t;case xp:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(er.__downcastCheck(t,e))return!0}else if("object"==typeof e&&er.__isNativeObj(e)&&t instanceof e)return!0;return e==vp&&null!=t.__name__?!0:e==Cp&&null!=t.__ename__||null!=t.__enum__&&d[t.__enum__]==e}},er.__downcastCheck=function(t,e){return t instanceof e||!!e.__isInterface__&&er.__interfLoop(er.getClass(t),e)},er.__implements=function(t,e){return er.__interfLoop(er.getClass(t),e)},er.__cast=function(t,e){if(null==t||er.__instanceof(t,e))return t;throw tr.thrown("Cannot cast "+Ja.string(t)+" to "+Ja.string(e))},er.__toStr=null,er.__nativeClassName=function(t){t=er.__toStr.call(t).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},er.__isNativeObj=function(t){return null!=er.__nativeClassName(t)},er.__resolveNativeClass=function(t){return x[t]},function(){this.outIndex=0,this.uniformBuffer=0,this.exprIds=0,this.varNames=new fl,this.allNames=new N}),Xc=((e["hxsl.GlslOut"]=Gc).__name__="hxsl.GlslOut",Gc.prototype={decl:function(t){for(var e=0,n=this.decls;e<n.length;)if(n[e++]==t)return;35==Jn.cca(t,0)?this.decls.unshift(t):this.decls.push(t)},addType:function(t){switch(t._hx_index){case 0:this.buf.b+="void";break;case 1:this.buf.b+="int";break;case 2:this.buf.b+="bool";break;case 3:this.buf.b+="float";break;case 4:this.buf.b+="string";break;case 5:var e=t.size;switch(t.t._hx_index){case 0:this.buf.b+="i";break;case 1:break;case 2:this.buf.b+="b"}this.buf.b+="vec",this.buf.b+=Ja.string(e);break;case 6:this.buf.b+="mat3";break;case 7:this.buf.b+="mat4";break;case 8:this.decl(Gc.MAT34),this.buf.b+="_mat3x4";break;case 9:this.buf.b+="vec",this.buf.b+=Ja.string(t.size);break;case 10:this.buf.b+="sampler2D";break;case 11:this.buf.b+="sampler2DArray",null!=this.glES&&this.decl("precision lowp sampler2DArray;");break;case 12:this.buf.b+="samplerCube";break;case 13:for(var e=t.vl,n=(this.buf.b+="struct { ",0);n<e.length;)this.addVar(e[n++]),this.buf.b+=";";this.buf.b+=" }";break;case 14:this.buf.b+="function";break;case 15:e=t.size;switch(this.addType(t.t),this.buf.b+="[",e._hx_index){case 0:1==(n=e.v)&&this.intelDriverFix?this.buf.b+="2":this.buf.b+=Ja.string(n);break;case 1:var s=this.varName(e.v);this.buf.b+=Ja.string(s)}this.buf.b+="]";break;case 16:throw tr.thrown("assert");case 17:this.buf.b+=Ja.string("channel"+t.size);break;case 18:this.buf.b+="mat2"}},addVar:function(t){var e=t.type;switch(e._hx_index){case 15:var n=e.size,s=t.type;switch(t.type=e.t,this.addVar(t),t.type=s,this.buf.b+="[",n._hx_index){case 0:1==(a=n.v)&&this.intelDriverFix?this.buf.b+="2":this.buf.b+=Ja.string(a);break;case 1:var i=this.varName(n.v);this.buf.b+=Ja.string(i)}this.buf.b+="]";break;case 16:var n=e.t,a=e.size;this.buf.b+=Ja.string((this.isVertex?"vertex_":"")+"uniform_buffer"+this.uniformBuffer++),this.buf.b+=" { ",t.type=V.TArray(n,a),this.addVar(t),t.type=V.TBuffer(n,a),this.buf.b+="; }";break;default:this.addType(t.type),this.buf.b+=" ";i=this.varName(t);this.buf.b+=Ja.string(i)}},addValue:function(t,e){var n=t.e;switch(n._hx_index){case 4:var s="val"+this.exprIds++,i=this.buf,a=(this.buf=new w,this.addType(t.t),this.buf.b+=" ",this.buf.b+=Ja.string(s),this.buf.b+="(void)",n.el.slice()),r=a[a.length-1];a[a.length-1]={e:O.TReturn(r),t:t.t,p:r.p},this.addExpr({t:V.TVoid,e:O.TBlock(a),p:t.p},""),this.exprValues.push(this.buf.b),this.buf=i,this.buf.b+=Ja.string(s),this.buf.b+="()";break;case 10:this.buf.b+="( ",this.addValue(n.econd,e),this.buf.b+=" ) ? ",this.addValue(n.eif,e),this.buf.b+=" : ",this.addValue(n.eelse,e);break;case 20:this.addValue(n.e,e);break;default:this.addExpr(t,e)}},addBlock:function(t,e){this.addExpr(t,e)},getFunName:function(t,e,n){switch(t._hx_index){case 20:if(n==V.TInt&&null!=this.glES)return this.decl("int _imod( int x, int y ) { return int(mod(float(x),float(y))); }"),"_imod";break;case 33:switch(e[0].t._hx_index){case 10:case 11:if(null!=this.glES&&this.glES<=2)return"texture2D";break;case 12:if(null!=this.glES&&this.glES<=2)return"textureCube";break;case 17:if(null!=this.glES&&this.glES<=2)return"texture2D"}break;case 34:switch(e[0].t._hx_index){case 10:case 11:if(null!=this.glES&&this.glES<=2)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"texture2DLodEXT";break;case 12:if(null!=this.glES&&this.glES<=2)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"textureCubeLodEXT";break;case 17:if(null!=this.glES&&this.glES<=2)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"texture2DLodEXT"}break;case 35:return"texelFetch";case 36:switch(e[0].t._hx_index){case 10:this.decl("vec2 _textureSize(sampler2D sampler, int lod) { return vec2(textureSize(sampler, lod)); }");break;case 11:this.decl("vec3 _textureSize(sampler2DArray sampler, int lod) { return vec3(textureSize(sampler, lod)); }");break;case 12:this.decl("vec2 _textureSize(samplerCube sampler, int lod) { return vec2(textureSize(sampler, lod)); }");break;case 17:this.decl("vec2 _textureSize(sampler2D sampler, int lod) { return vec2(textureSize(sampler, lod)); }")}return"_textureSize";case 50:if(e[0].t==V.TMat3x4)return this.decl(Gc.MAT34),this.decl("mat3 _mat3( _mat3x4 v ) { return mat3(v.a.xyz,v.b.xyz,v.c.xyz); }"),"_mat3";break;case 52:if(this.decl(Gc.MAT34),1==e.length)return this.decl("_mat3x4 mat_to_34( mat4 m ) { return _mat3x4(m[0],m[1],m[2]); }"),"mat_to_34";break;case 54:this.decl("vec4 pack( float v ) { vec4 color = fract(v * vec4(1, 255, 255.*255., 255.*255.*255.)); return color - color.yzww * vec4(1. / 255., 1. / 255., 1. / 255., 0.); }");break;case 55:this.decl("float unpack( vec4 color ) { return dot(color,vec4(1., 1. / 255., 1. / (255. * 255.), 1. / (255. * 255. * 255.))); }");break;case 56:this.decl("vec4 packNormal( vec3 v ) { return vec4((v + vec3(1.)) * vec3(0.5),1.); }");break;case 57:this.decl("vec3 unpackNormal( vec4 v ) { return normalize((v.xyz - vec3(0.5)) * vec3(2.)); }");break;case 58:this.decl("vec2 screenToUv( vec2 v ) { return v * vec2(0.5,-0.5) + vec2(0.5,0.5); }");break;case 59:this.decl("vec2 uvToScreen( vec2 v ) { return v * vec2(2.,-2.) + vec2(-1., 1.); }");break;case 60:case 61:case 62:if(this.isVertex)throw tr.thrown("Can't use "+Ja.string(t)+" in vertex shader");this.version<300&&this.decl("#extension GL_OES_standard_derivatives:enable")}return Gc.GLOBALS[t._hx_index]},addExpr:function(t,e){var n=t.e;switch(n._hx_index){case 0:switch((a=n.c)._hx_index){case 0:this.buf.b+="null";break;case 1:this.buf.b+=Ja.string(a.b);break;case 2:this.buf.b+=Ja.string(a.v);break;case 3:var s=""+a.v;this.buf.b+=Ja.string(s),-1==s.indexOf(".")&&-1==s.indexOf("e")&&(this.buf.b+=".");break;case 4:this.buf.b+=Ja.string('"'+a.v+'"')}break;case 1:var i=this.varName(n.v);this.buf.b+=Ja.string(i);break;case 2:this.buf.b+=Ja.string(Gc.GLOBALS[n.g._hx_index]);break;case 3:this.buf.b+="(",this.addValue(n.e,e),this.buf.b+=")";break;case 4:for(var a=n.el,r=(this.buf.b+="{\n",e+"\t"),l=0;l<a.length;){var o=a[l];++l,this.buf.b+=Ja.string(r),this.addExpr(o,r),this.newLine(o)}this.buf.b+=Ja.string(e),this.buf.b+="}";break;case 5:var a=n.op,l=n.e1,h=n.e2,u=l.t,_=h.t;switch(a._hx_index){case 1:5==u._hx_index&&3==u.size&&1==u.t._hx_index&&8==_._hx_index?(this.decl(Gc.MAT34),this.decl("vec3 m3x4mult( vec3 v, _mat3x4 m) { vec4 ve = vec4(v,1.0); return vec3(dot(m.a,ve),dot(m.b,ve),dot(m.c,ve)); }"),20==a._hx_index&&(this.addValue(l,e),this.buf.b+=" = "),this.buf.b+="m3x4mult(",this.addValue(l,e),this.buf.b+=",",this.addValue(h,e),this.buf.b+=")"):(this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e));break;case 5:case 6:case 7:case 8:case 9:case 10:if(5==u._hx_index)if(5==_._hx_index){switch(this.buf.b+=Ja.string("vec"+u.size+"("),a._hx_index){case 5:i="equal";break;case 6:i="notEqual";break;case 7:i="greaterThan";break;case 8:i="greaterThanEqual";break;case 9:i="lessThan";break;case 10:i="lessThanEqual";break;default:throw tr.thrown("assert")}this.buf.b+=Ja.string(i),this.buf.b+="(",this.addValue(l,e),this.buf.b+=",",this.addValue(h,e),this.buf.b+="))"}else this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e);else this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e);break;case 18:this.decl("int _ushr( int i, int j ) { return int(uint(i) >> uint(j)); }"),this.buf.b+="_ushr(",this.addValue(l,e),this.buf.b+=",",this.addValue(h,e),this.buf.b+=")";break;case 19:t.t!=V.TInt?(20==a._hx_index&&(this.addValue(l,e),this.buf.b+=" = "),this.addExpr({e:O.TCall({e:O.TGlobal(D.Mod),t:V.TFun([]),p:t.p},[l,h]),t:t.t,p:t.p},e)):(this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e));break;case 20:switch(a.op._hx_index){case 1:5==u._hx_index&&3==u.size&&1==u.t._hx_index&&8==_._hx_index?(this.decl(Gc.MAT34),this.decl("vec3 m3x4mult( vec3 v, _mat3x4 m) { vec4 ve = vec4(v,1.0); return vec3(dot(m.a,ve),dot(m.b,ve),dot(m.c,ve)); }"),20==a._hx_index&&(this.addValue(l,e),this.buf.b+=" = "),this.buf.b+="m3x4mult(",this.addValue(l,e),this.buf.b+=",",this.addValue(h,e),this.buf.b+=")"):(this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e));break;case 19:t.t!=V.TInt?(20==a._hx_index&&(this.addValue(l,e),this.buf.b+=" = "),this.addExpr({e:O.TCall({e:O.TGlobal(D.Mod),t:V.TFun([]),p:t.p},[l,h]),t:t.t,p:t.p},e)):(this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e));break;default:this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e)}break;default:this.addValue(l,e),this.buf.b+=" ",this.buf.b+=Ja.string(Wc.opStr(a)),this.buf.b+=" ",this.addValue(h,e)}break;case 6:a=n.e1;switch(n.op._hx_index){case 0:i="++";break;case 1:i="--";break;case 2:i="!";break;case 3:i="-";break;case 4:i="~";break;default:throw tr.thrown("assert")}this.buf.b+=Ja.string(i),this.addValue(a,e);break;case 7:a=n.v,l=n.init;this.locals.h[a.id]=a,null!=l?(i=this.varName(a),this.buf.b+=Ja.string(i),this.buf.b+=" = ",this.addValue(l,e)):this.buf.b+="/*var*/";break;case 8:a=n.e,l=n.args;if(2==(h=a.e)._hx_index)switch((u=h.g)._hx_index){case 35:i=this.getFunName(u,l,t.t);this.buf.b+=Ja.string(i),this.buf.b+="(",this.addValue(l[0],e),this.buf.b+=", ",this.addValue(l[1],e),2!=l.length?(this.buf.b+=", ",this.addValue(l[2],e),this.buf.b+=")"):this.buf.b+=", 0)";break;case 36:i=this.getFunName(u,l,t.t);this.buf.b+=Ja.string(i),this.buf.b+="(",this.addValue(l[0],e),1!=l.length?(this.buf.b+=", ",this.addValue(l[1],e),this.buf.b+=")"):this.buf.b+=", 0)";break;case 53:if(1==l.length){h=l[0];this.buf.b+="clamp(",this.addValue(h,e),this.buf.b+=", 0., 1.)"}else{2==(h=a.e)._hx_index?(i=this.getFunName(h.g,l,t.t),this.buf.b+=Ja.string(i)):this.addValue(a,e),this.buf.b+="(";for(var c=!0,h=0;h<l.length;){o=l[h++];c?c=!1:this.buf.b+=", ",this.addValue(o,e)}this.buf.b+=")"}break;default:for(c=(2==(h=a.e)._hx_index?(i=this.getFunName(h.g,l,t.t),this.buf.b+=Ja.string(i)):this.addValue(a,e),this.buf.b+="(",!0),h=0;h<l.length;){o=l[h++];c?c=!1:this.buf.b+=", ",this.addValue(o,e)}this.buf.b+=")"}else{for(c=(2==(h=a.e)._hx_index?(i=this.getFunName(h.g,l,t.t),this.buf.b+=Ja.string(i)):this.addValue(a,e),this.buf.b+="(",!0),a=0;a<l.length;){o=l[a++];c?c=!1:this.buf.b+=", ",this.addValue(o,e)}this.buf.b+=")"}break;case 9:a=n.e,l=n.regs;if(3==a.t._hx_index){for(h=0;h<l.length;)if(l[h++]!=Rc.X)throw tr.thrown("assert");switch(l.length){case 1:this.addValue(a,e);break;case 2:this.decl("vec2 _vec2( float v ) { return vec2(v,v); }"),this.buf.b+="_vec2(",this.addValue(a,e),this.buf.b+=")";break;case 3:this.decl("vec3 _vec3( float v ) { return vec3(v,v,v); }"),this.buf.b+="_vec3(",this.addValue(a,e),this.buf.b+=")";break;case 4:this.decl("vec4 _vec4( float v ) { return vec4(v,v,v,v); }"),this.buf.b+="_vec4(",this.addValue(a,e),this.buf.b+=")";break;default:throw tr.thrown("assert")}}else{this.addValue(a,e),this.buf.b+=".";for(a=0;a<l.length;){var d,p=this.buf,f=p.b;switch(l[a++]._hx_index){case 0:d="x";break;case 1:d="y";break;case 2:d="z";break;case 3:d="w"}p.b=f+Ja.string(d)}}break;case 10:a=n.eif,l=n.eelse;this.buf.b+="if( ",this.addValue(n.econd,e),this.buf.b+=") ",this.addExpr(a,e),null!=l&&(this.isBlock(a)||(this.buf.b+=";"),this.buf.b+=" else ",this.addExpr(l,e));break;case 11:this.buf.b+="discard";break;case 12:null==(a=n.e)?this.buf.b+="return":(this.buf.b+="return ",this.addValue(a,e));break;case 13:a=n.v;if(this.locals.h[a.id]=a,5!=(l=n.it.e)._hx_index)throw tr.thrown("assert");if(21!=l.op._hx_index)throw tr.thrown("assert");this.buf.b+="for(",this.buf.b+=Ja.string(a.name+"="),this.addValue(l.e1,e),this.buf.b+=Ja.string(";"+a.name+"<"),this.addValue(l.e2,e),this.buf.b+=Ja.string(";"+a.name+"++) "),this.addBlock(n.loop,e);break;case 14:this.buf.b+="continue";break;case 15:this.buf.b+="break";break;case 16:this.addValue(n.e,e),this.buf.b+="[",this.addValue(n.index,e),this.buf.b+="]";break;case 17:a=n.el;if(15!=(l=t.t)._hx_index)throw tr.thrown("assert");this.addType(l.t),this.buf.b+=Ja.string("["+a.length+"]"),this.buf.b+="(";for(c=!0,l=0;l<a.length;){t=a[l++];c?c=!1:this.buf.b+=", ",this.addValue(t,e)}this.buf.b+=")";break;case 18:this.buf.b+="switch(...)";break;case 19:a=n.e,l=n.loop;0==n.normalWhile?(e+="\t",this.buf.b+="do ",this.addBlock(l,e),this.buf.b+=" while( ",this.addValue(a,e),this.buf.b+=" )"):(this.buf.b+="while( ",this.addValue(a,e),this.buf.b+=" ) ",this.addBlock(l,e));break;case 20:this.addExpr(n.e,e)}},varName:function(t){if(t.kind==Q.Output){if(this.isVertex)return"gl_Position";if(null!=this.glES&&this.glES<=2)return null==this.outIndexes?"gl_FragColor":"gl_FragData["+this.outIndexes.h[t.id]+"]"}var e=this.varNames.h[t.id];if(null==e){if(e=t.name,Object.prototype.hasOwnProperty.call(Gc.KWDS.h,e)&&(e="_"+e),Object.prototype.hasOwnProperty.call(this.allNames.h,e)){var n=2;for(e+="_";Object.prototype.hasOwnProperty.call(this.allNames.h,e+n);)++n;e+=n}this.varNames.h[t.id]=e,this.allNames.h[e]=t.id}return e},newLine:function(t){this.isBlock(t)?this.buf.b+="\n":this.buf.b+=";\n"},isBlock:function(t){var e=t.e;switch(e._hx_index){case 4:return!0;case 13:return this.isBlock(e.loop);case 19:return 1==e.normalWhile&&this.isBlock(e.loop);default:return!1}},initVar:function(t){switch(t.kind._hx_index){case 0:case 2:16==t.type._hx_index&&(this.buf.b+="layout(std140) "),this.buf.b+="uniform ";break;case 1:this.buf.b+=Ja.string(null!=this.glES&&this.glES<=2?"attribute ":"in ");break;case 3:this.buf.b+=Ja.string(null!=this.glES&&this.glES<=2?"varying ":this.isVertex?"out ":"in ");break;case 4:break;case 5:if(null!=this.glES&&this.glES<=2)return void(this.outIndexes.h[t.id]=this.outIndex++);if(this.isVertex)return;null!=this.glES&&(this.buf.b+=Ja.string("layout(location="+this.outIndex+++") ")),this.buf.b+="out ";break;case 6:return}if(null!=t.qualifiers)for(var e=0,n=t.qualifiers;e<n.length;){var s=n[e];if(++e,6==s._hx_index)switch(s.p._hx_index){case 0:this.buf.b+="lowp ";break;case 1:this.buf.b+="mediump ";break;case 2:this.buf.b+="highp "}}this.addVar(t),this.buf.b+=";\n"},initVars:function(t){this.outIndex=0,this.uniformBuffer=0,this.outIndexes=new fl;for(var e=0,n=t.vars;e<n.length;)this.initVar(n[e++]);this.buf.b+="\n",this.outIndex<2?this.outIndexes=null:!this.isVertex&&null!=this.glES&&this.glES<=2&&this.decl("#extension GL_EXT_draw_buffers : enable")},run:function(t){if(this.locals=new fl,this.decls=[],this.buf=new w,this.exprValues=[],1!=t.funs.length)throw tr.thrown("assert");var e=t.funs[0],t=(this.isVertex=e.kind==zc.Vertex,this.isVertex?this.decl("precision highp float;"):this.decl("precision mediump float;"),this.initVars(t),this.buf);if(this.buf=new w,this.buf.b+="void main(void) {\n",4==(s=e.expr.e)._hx_index)for(var n=s.el,s=0;s<n.length;){var i=n[s];++s,this.buf.b+="\t",this.addExpr(i,"\t"),this.newLine(i)}else this.addExpr(e.expr,"");this.isVertex&&(this.buf.b+="\tgl_Position.z += gl_Position.z - gl_Position.w;\n"),this.buf.b+="}",this.exprValues.push(this.buf.b),this.buf=t;for(var a=wt.array(this.locals),s=(a.sort(function(t,e){return Z.compare(t.name,e.name)}),0);s<a.length;)this.addVar(a[s++]),this.buf.b+=";\n";this.buf.b+="\n";for(s=0,n=this.exprValues;s<n.length;)this.buf.b+=Ja.string(n[s++]),this.buf.b+="\n\n";return null!=this.glES?this.decl("#version "+(this.version<100?100:this.version)+(150<this.version?" es":"")):null!=this.version?this.decl("#version "+(150<this.version?150:this.version)):this.decl("#version 130"),this.decls.push(this.buf.b),this.buf=null,this.decls.join("\n")},__class__:Gc},(e["hxsl._Linker.AllocatedVar"]=Zi).__name__="hxsl._Linker.AllocatedVar",Zi.prototype={__class__:Zi},(e["hxsl._Linker.ShaderInfos"]=qi).__name__="hxsl._Linker.ShaderInfos",qi.prototype={__class__:qi},function(t){null==t&&(t=!1),this.debugDepth=0,this.batchMode=t}),Yc=((e["hxsl.Linker"]=Xc).__name__="hxsl.Linker",Xc.prototype={error:function(t,e){return Ui.t(t,e)},mergeVar:function(t,e,n,s,i){switch(e.kind._hx_index){case 2:if(null!=i&&lt.hasBorrowQualifier(n,i))break;throw tr.thrown("assert");case 0:case 1:case 3:case 4:case 5:break;case 6:throw tr.thrown("assert")}e.kind!=n.kind&&e.kind!=Q.Local&&n.kind!=Q.Local&&this.error("'"+t+"' kind does not match : "+Ja.string(e.kind)+" should be "+Ja.string(n.kind),s);var a=e.type,r=n.type;if(13==a._hx_index){var l=a.vl;if(13==r._hx_index)for(a=r.vl,r=0;r<l.length;){for(var o=l[r],h=(++r,null),u=0;u<a.length;){var _=a[u];if(++u,o.name==_.name){h=_;break}}null==h?a.push(this.allocVar(o,s,i).v):this.mergeVar(t+"."+h.name,o,h,s,i)}else b.enumEq(e.type,n.type)||this.error("'"+t+"' type does not match : "+lt.toString(e.type)+" should be "+lt.toString(n.type),s)}else b.enumEq(e.type,n.type)||this.error("'"+t+"' type does not match : "+lt.toString(e.type)+" should be "+lt.toString(n.type),s)},allocVar:function(t,e,n,s,i){if(null!=t.parent&&null==i){var a=(i=this.allocVar(t.parent,e,n)).v;for(s=a.name,a=a.parent;null!=a;)s=a.name+"."+s,a=a.parent}var r=null==s?t.name:s+"."+t.name;if(null!=t.qualifiers)for(var l=0,o=t.qualifiers;l<o.length;){var h=o[l];++l,4==h._hx_index&&(r=h.n)}var u=this.varMap.h[r],_=t.name;if(null!=u){for(var c,l=0,o=u.merged;l<o.length;)if(o[l++]==t)return u;if(!(!((t.kind!=Q.Param||lt.hasBorrowQualifier(u.v,n)||lt.hasQualifier(t,Pc.Shared)||this.isBatchShader)&&t.kind!=Q.Function&&(t.kind!=Q.Var&&t.kind!=Q.Local||!lt.hasQualifier(t,Pc.Private))&&((c=u.v).kind!=Q.Param||lt.hasBorrowQualifier(t,u.rootShaderName)||lt.hasQualifier(c,Pc.Shared)||this.isBatchShader)&&c.kind!=Q.Function)||(c.kind==Q.Var||c.kind==Q.Local)&&lt.hasQualifier(c,Pc.Private)||t.kind==Q.Param&&u.v.kind==Q.Param))return u.merged.push(t),this.mergeVar(r,t,u.v,e,u.rootShaderName),this.varIdMap.h[t.id]=u.id,u;for(var d=2;null!=(p=this.varMap.h[r+d]);){for(l=0,o=p.merged;l<o.length;)if(o[l++]==t)return p;++d}_+=d,r+=d}var p,u={id:lt.allocVarId(),name:_,type:t.type,kind:t.kind,qualifiers:t.qualifiers,parent:null==i?null:i.v};if((p=new Zi).v=u,p.merged=[t],p.path=r,p.id=u.id,p.parent=i,p.instanceIndex=this.curInstance,p.rootShaderName=n,this.allVars.push(p),this.varMap.h[r]=p,13==(l=u.type)._hx_index){for(var o=l.vl,l=[],f=0;f<o.length;)l.push(this.allocVar(o[f++],e,n,r,p).v);u.type=V.TStruct(l)}return p},mapExprVar:function(t){var e=t.e;switch(e._hx_index){case 1:var n=e.v;if(this.locals.h.hasOwnProperty(n.id))break;return u=this.allocVar(n,t.p),null==this.curShader||this.curShader.write.h.hasOwnProperty(u.id)||(this.curShader.read.h[u.id]=u,null==this.curShader.vertex&&u.v.kind==Q.Var&&(this.curShader.vertex=!1)),{e:O.TVar(u.v),t:u.v.type,p:t.p};case 5:var n=e.op,s=e.e1,i=e.e2,a=s.e;switch(n._hx_index){case 4:switch(a._hx_index){case 1:var r=a.v;if(!this.locals.h.hasOwnProperty(r.id))return h=this.mapExprVar(i),u=this.allocVar(r,s.p),null!=this.curShader&&(this.curShader.write.h[u.id]=u),{e:O.TBinop(n,{e:O.TVar(u.v),t:u.v.type,p:t.p},h),t:t.t,p:t.p};if(this.locals.h.hasOwnProperty(r.id))break;return o=this.mapExprVar(s),h=this.mapExprVar(i),u=this.allocVar(r,o.p),null!=this.curShader&&(this.curShader.write.h[u.id]=u),{e:O.TBinop(n,o,h),t:t.t,p:t.p};case 9:if(1==(r=a.e.e)._hx_index){var l=r.v;if(!this.locals.h.hasOwnProperty(l.id))return o=this.mapExprVar(s),h=this.mapExprVar(i),u=this.allocVar(l,o.p),null!=this.curShader&&(this.curShader.write.h[u.id]=u),{e:O.TBinop(n,o,h),t:t.t,p:t.p}}}break;case 20:switch(a._hx_index){case 1:var r=a.v;if(this.locals.h.hasOwnProperty(r.id))break;return o=this.mapExprVar(s),h=this.mapExprVar(i),u=this.allocVar(r,o.p),null!=this.curShader&&(this.curShader.write.h[u.id]=u),{e:O.TBinop(n,o,h),t:t.t,p:t.p};case 9:if(1==(r=a.e.e)._hx_index){var o,h,u,a=r.v;if(!this.locals.h.hasOwnProperty(a.id))return o=this.mapExprVar(s),h=this.mapExprVar(i),u=this.allocVar(a,o.p),null!=this.curShader&&(this.curShader.write.h[u.id]=u),{e:O.TBinop(n,o,h),t:t.t,p:t.p}}}}break;case 7:this.locals.h[e.v.id]=!0;break;case 11:null!=this.curShader&&(this.curShader.vertex=!1,this.curShader.hasDiscard=!0);break;case 13:this.locals.h[e.v.id]=!0}return lt.map(t,W(this,this.mapExprVar))},addShader:function(t,e,n,s){t=new qi(t,e);return(this.curShader=t).priority=s,t.body=this.mapExprVar(n),this.shaders.push(t),this.curShader=null,t},sortByPriorityDesc:function(t,e){return t.priority==e.priority?t.uid-e.uid:e.priority-t.priority},buildDependency:function(t,e,n){for(var s=!n,i=0,a=this.shaders;i<a.length;){var r=a[i];if(++i,r==t)s=!0;else if(s&&r.write.h.hasOwnProperty(e.id)){if(t.vertex){if(0==r.vertex)continue;null==r.vertex&&(r.vertex=!0)}if(t.deps.set(r,!0),this.debugDepth++,this.initDependencies(r),this.debugDepth--,!r.read.h.hasOwnProperty(e.id))return}}e.v.kind==Q.Var&&this.error("Variable "+e.path+" required by "+t.name+" is missing initializer",null)},initDependencies:function(t){if(null==t.deps){t.deps=new r_;for(var e=t.read.iterator();e.hasNext();){var n=e.next();this.buildDependency(t,n,t.write.h.hasOwnProperty(n.id))}if(null==t.vertex)for(var s=t.deps.keys();s.hasNext();)if(0==s.next().vertex){t.vertex=!1;break}if(t.vertex)for(s=t.deps.keys();s.hasNext();){var i=s.next();null==i.vertex&&(i.vertex=!0)}}},collect:function(t,e,n){if(t.onStack&&this.error("Loop in shader dependencies ("+t.name+")",null),t.marked!=n){t.marked=n,t.onStack=!0;for(var s=[],i=t.deps.keys();i.hasNext();)s.push(i.next());s.sort(W(this,this.sortByPriorityDesc));for(var a=0;a<s.length;)this.collect(s[a++],e,n);null==t.vertex&&(t.vertex=n),t.vertex==n&&e.push(t),t.onStack=!1}},link:function(t){this.varMap=new N,this.varIdMap=new fl,this.allVars=[],this.shaders=[],this.locals=new fl;for(var e=[],n=[],s=0,i=t;s<i.length;){var a,r=i[s];t.indexOf(r)<s++?(a=Yi.shaderData(r),e.push({origin:r,cloned:a}),n.push(a)):n.push(r)}this.curInstance=0;for(var h=[],l=0;l<n.length;){for(var o=n[l],u=(++l,this.isBatchShader=this.batchMode&&ut.startsWith(o.name,"batchShader_"),0),_=o.vars;u<_.length;){var c=_[u],d=(++u,this.allocVar(c,null,o.name));this.isBatchShader&&d.v.kind==Q.Param&&!ut.startsWith(d.path,"Batch_")&&(d.v.kind=Q.Local),c.kind==Q.Output&&h.push(c)}for(var p=0,f=o.funs;p<f.length;){var g=f[p];++p,this.allocVar(g.ref,g.expr.p).kind=g.kind}this.curInstance++}for(var m=0,A=[-3e3],x=[-2e3],b=[-1e3],l=0;l<n.length;){for(o=n[l],u=(++l,0),_=o.funs;u<_.length;){var y,w,g=_[u];if(++u,null==(c=this.allocVar(g.ref,g.expr.p)).kind)throw tr.thrown("assert");switch(c.kind._hx_index){case 0:case 1:this.addShader(o.name+"."+(c.kind==zc.Vertex?"vertex":"fragment"),c.kind==zc.Vertex,g.expr,m);break;case 2:switch(g.ref.name){case"__init__fragment":y=b,w=!1;break;case"__init__vertex":y=x,w=!0;break;default:y=A,w=null}if(4==(p=g.expr.e)._hx_index)for(var f=p.el,R=0,v=0;v<f.length;)this.addShader(o.name+"."+g.ref.name+R++,w,f[v++],y[0]++);else this.addShader(o.name+"."+g.ref.name,w,g.expr,y[0]++);break;case 3:throw tr.thrown("Unexpected helper function in linker "+c.v.name)}}++m}this.shaders.sort(W(this,this.sortByPriorityDesc));for(var C=new qi("<entry>",!1),n=(C.deps=new r_,0);n<h.length;)this.buildDependency(C,this.allocVar(h[n++],null),!1);for(n=0,l=this.shaders;n<l.length;){o=l[n];++n,o.hasDiscard&&(this.initDependencies(o),C.deps.set(o,!0))}for(n=0,l=this.shaders;n<l.length;){o=l[n];if(++n,null==o.vertex){for(var M=!0,S=o.read.iterator();S.hasNext();)if(S.next().v.kind!=Q.Param){M=!1;break}M&&(o.vertex=!1)}}c=[],g=[];if(this.collect(C,c,!0),this.collect(C,g,!1),g.pop()!=C)throw tr.thrown("assert");for(n=0,l=this.shaders;n<l.length;)l[n++].marked=null;for(n=0,l=c.concat(g);n<l.length;){for(var o=l[n],k=(++n,o.deps.keys());k.hasNext();){var B=k.next();null==B.marked&&this.error(B.name+" needed by "+o.name+" is unreachable",null)}o.marked=!0}for(var h=[],I={},T=function(t){for(;;){if(I.hasOwnProperty(t.id))return;if(I[t.id]=!0,null==t.v.parent)return void h.push(t.v);t=t.parent}},n=0,l=c.concat(g);n<l.length;){for(var o=l[n],F=(++n,o.read.iterator());F.hasNext();)T(d=F.next());for(var D=o.write.iterator();D.hasNext();)T(D.next())}for(var E=null,E=function(t){if(13==(s=t.type)._hx_index){var e=s.vl;if(t.kind!=Q.Input){for(var n=[],s=0;s<e.length;){var i=e[s];++s,I.hasOwnProperty(i.id)&&(E(i),n.push(i))}t.type=V.TStruct(n)}}},n=0;n<h.length;)E(h[n++]);for(var P=function(t,e,n){for(var e={id:lt.allocVarId(),name:e,type:V.TFun([{ret:V.TVoid,args:[]}]),kind:Q.Function},s=(h.push(e),[]),i=0;i<n.length;){var a=n[i],r=(++i,a.body.e);if(4==r._hx_index)for(var l=r.el,o=0;o<l.length;)s.push(l[o++]);else s.push(a.body)}return{kind:t,ref:e,ret:V.TVoid,args:[],expr:{e:O.TBlock(s),t:V.TVoid,p:0==s.length?null:s[0].p}}},P=[P(zc.Vertex,"vertex",c),P(zc.Fragment,"fragment",g)],n=0;n<e.length;)for(k=e[n],l=(++n,0),u=k.cloned.vars.length;l<u;){var z=l++;this.allocVar(k.cloned.vars[z],null).merged.unshift(k.origin.vars[z])}return{name:"out",vars:h,funs:P}},__class__:Xc},d["hxsl.Output"]={__ename__:!0,__constructs__:null,Const:((c=function(t){return{_hx_index:0,v:t,__enum__:"hxsl.Output",toString:l}})._hx_name="Const",c.__params__=["v"],c),Value:((c=function(t,e){return{_hx_index:1,v:t,size:e,__enum__:"hxsl.Output",toString:l}})._hx_name="Value",c.__params__=["v","size"],c),PackNormal:((c=function(t){return{_hx_index:2,v:t,__enum__:"hxsl.Output",toString:l}})._hx_name="PackNormal",c.__params__=["v"],c),PackFloat:((c=function(t){return{_hx_index:3,v:t,__enum__:"hxsl.Output",toString:l}})._hx_name="PackFloat",c.__params__=["v"],c),Vec2:((c=function(t){return{_hx_index:4,a:t,__enum__:"hxsl.Output",toString:l}})._hx_name="Vec2",c.__params__=["a"],c),Vec3:((c=function(t){return{_hx_index:5,a:t,__enum__:"hxsl.Output",toString:l}})._hx_name="Vec3",c.__params__=["a"],c),Vec4:((c=function(t){return{_hx_index:6,a:t,__enum__:"hxsl.Output",toString:l}})._hx_name="Vec4",c.__params__=["a"],c),Swiz:((c=function(t,e){return{_hx_index:7,a:t,swiz:e,__enum__:"hxsl.Output",toString:l}})._hx_name="Swiz",c.__params__=["a","swiz"],c)}),Wc=(Yc.__constructs__=[Yc.Const,Yc.Value,Yc.PackNormal,Yc.PackFloat,Yc.Vec2,Yc.Vec3,Yc.Vec4,Yc.Swiz],Yc.__empty_constructs__=[],function(t){this.varId=t=null==t?!1:t}),jc=((e["hxsl.Printer"]=Wc).__name__="hxsl.Printer",Wc.opStr=function(t){switch(t._hx_index){case 0:return"+";case 1:return"*";case 2:return"/";case 3:return"-";case 4:return"=";case 5:return"==";case 6:return"!=";case 7:return">";case 8:return">=";case 9:return"<";case 10:return"<=";case 11:return"&";case 12:return"|";case 13:return"^";case 14:return"&&";case 15:return"||";case 16:return"<<";case 17:return">>";case 18:return">>>";case 19:return"%";case 20:return Wc.opStr(t.op)+"=";case 21:return"...";case 22:return"=>";default:return"??"+Ja.string(t)}},Wc.toString=function(t,e){return new Wc(e=null==e?!1:e).exprString(t)},Wc.shaderToString=function(t,e){return new Wc(e=null==e?!1:e).shaderString(t)},Wc.prototype={shaderString:function(t){this.buffer=new w;for(var e=0,n=t.vars;e<n.length;)this.addVar(n[e++],null),this.buffer.b+=";\n";0<t.vars.length&&(this.buffer.b+="\n");for(e=0,n=t.funs;e<n.length;)this.addFun(n[e++]),this.buffer.b+="\n\n";return this.buffer.b},exprString:function(t){return this.buffer=new w,this.addExpr(t,""),this.buffer.b},addVar:function(t,e,n,s){if(null==n&&(n=""),null!=t.qualifiers)for(var i=0,a=t.qualifiers;i<a.length;){var r=a[i];switch(++i,r._hx_index){case 0:var l=r.max;h="const"+(null==l?"":"("+l+")");break;case 1:h="private";break;case 2:h="nullable";break;case 3:h="perObject";break;case 4:h="name('"+r.n+"')";break;case 5:h="shared";break;case 6:l=r.p;h=d[l.__enum__].__constructs__[l._hx_index]._hx_name.toLowerCase()+"p";break;case 7:h="range("+r.min+","+r.max+")";break;case 8:h="ignore";break;case 9:h="perInstance("+r.v+")";break;case 10:h='doc("'+ut.replace(r.s,'"','\\"')+'")';break;case 11:h="borrow("+r.source+")";break;case 12:h="sampler("+r.name+")"}this.buffer.b+=Ja.string("@"+h+" ")}if(t.kind!=e)switch(t.kind._hx_index){case 0:this.buffer.b+="@global ";break;case 1:this.buffer.b+="@input ";break;case 2:this.buffer.b+="@param ";break;case 3:this.buffer.b+="@varying ";break;case 4:this.buffer.b+="@local ";break;case 5:this.buffer.b+="@output ";break;case 6:this.buffer.b+="@function "}if(this.buffer.b+="var ",t.parent==s?this.buffer.b+=Ja.string(t.name+(this.varId?"@"+t.id:"")):this.addVarName(t),this.buffer.b+=" : ",13==(i=t.type)._hx_index){for(var a=i.vl,o=(this.buffer.b+="{",!0),i=0;i<a.length;){var h=a[i];++i,o?o=!1:this.buffer.b+=", ",this.addVar(h,h.kind,n,h)}this.buffer.b+="}"}else{h=lt.toString(t.type);this.buffer.b+=Ja.string(h)}},addFun:function(t){this.buffer.b+=Ja.string("function "+t.ref.name+"(");for(var e=!0,n=0,s=t.args;n<s.length;){var i=s[n++];e?(this.buffer.b+=" ",e=!1):this.buffer.b+=", ",this.addVar(i,Q.Local)}0<t.args.length&&(this.buffer.b+=" ");var a=") : "+lt.toString(t.ret)+" ";this.buffer.b+=Ja.string(a),this.addExpr(t.expr,"")},addVarName:function(t){null!=t.parent&&(this.addVarName(t.parent),this.buffer.b+="."),this.buffer.b+=Ja.string(t.name),this.varId&&(this.buffer.b+=Ja.string("@"+t.id))},addConst:function(t){var e,n=this.buffer,s=n.b;switch(t._hx_index){case 0:e="null";break;case 1:e=t.b;break;case 2:case 3:e=t.v;break;case 4:e='"'+t.v+'"'}n.b=s+Ja.string(e)},addExpr:function(t,e){switch((_=t.e)._hx_index){case 0:this.addConst(_.c);break;case 1:this.addVarName(_.v);break;case 2:var n=Ni.toString(_.g);this.buffer.b+=Ja.string(n);break;case 3:this.buffer.b+="(",this.addExpr(_.e,e),this.buffer.b+=")";break;case 4:for(var s=_.el,i=(this.buffer.b+="{",e+="\t",0);i<s.length;){t=s[i++];this.buffer.b+=Ja.string("\n"+e),this.addExpr(t,e),this.buffer.b+=";"}e=Jn.substr(e,1,null),0<s.length&&(this.buffer.b+=Ja.string("\n"+e)),this.buffer.b+="}";break;case 5:this.addExpr(_.e1,e),this.buffer.b+=Ja.string(" "+Wc.opStr(_.op)+" "),this.addExpr(_.e2,e);break;case 6:s=_.e1;switch(_.op._hx_index){case 0:n="++";break;case 1:n="--";break;case 2:n="!";break;case 3:n="-";break;case 4:n="~";break;default:throw tr.thrown("assert")}this.buffer.b+=Ja.string(n),this.addExpr(s,e);break;case 7:s=_.init;this.addVar(_.v,Q.Local,e),null!=s&&(this.buffer.b+=" = ",this.addExpr(s,e));break;case 8:for(var s=_.args,a=(this.addExpr(_.e,e),this.buffer.b+="(",!0),i=0;i<s.length;){t=s[i++];a?a=!1:this.buffer.b+=", ",this.addExpr(t,e)}this.buffer.b+=")";break;case 9:for(s=_.regs,i=(this.addExpr(_.e,e),this.buffer.b+=".",0);i<s.length;)this.buffer.b+=Ja.string(Wc.SWIZ[s[i++]._hx_index]);break;case 10:s=_.eelse;this.buffer.b+="if( ",this.addExpr(_.econd,e),this.buffer.b+=" ) ",this.addExpr(_.eif,e),null!=s&&(this.buffer.b+=" else ",this.addExpr(s,e));break;case 11:this.buffer.b+="discard";break;case 12:s=_.e;this.buffer.b+="return",null!=s&&(this.buffer.b+=" ",this.addExpr(s,e));break;case 13:this.buffer.b+="for( ",this.addVarName(_.v),this.buffer.b+=" in ",this.addExpr(_.it,e),this.buffer.b+=" ) ",this.addExpr(_.loop,e);break;case 14:this.buffer.b+="continue";break;case 15:this.buffer.b+="break";break;case 16:this.addExpr(_.e,e),this.buffer.b+="[",this.addExpr(_.index,e),this.buffer.b+="]";break;case 17:for(s=_.el,a=(this.buffer.b+="[",!0),i=0;i<s.length;){t=s[i++];a?a=!1:this.buffer.b+=", ",this.addExpr(t,e)}this.buffer.b+="]";break;case 18:for(var s=_.cases,i=_.def,r=(this.buffer.b+="switch( ",this.addExpr(_.e,e),this.buffer.b+=") {",e),l=0;l<s.length;){for(var o=s[l],a=(++l,this.buffer.b+=Ja.string("\n"+e),this.buffer.b+="case ",!0),h=0,u=o.values;h<u.length;){n=u[h++];a?a=!1:this.buffer.b+=", ",this.addExpr(n,e)}e+="\t",this.buffer.b+=Ja.string(":\n"+e),this.addExpr(o.expr,e),e=r}null!=i&&(this.buffer.b+=Ja.string("\n"+e),this.buffer.b+=Ja.string("default:\n"+(e+="\t")),this.addExpr(i,e),e=r),this.buffer.b+=Ja.string("\n"+e+"}");break;case 19:s=_.e,i=_.loop;0==_.normalWhile?(r=e,this.buffer.b+=Ja.string("do {\n"+(e+="\t")),this.addExpr(i,e),this.buffer.b+=Ja.string("\n"+(e=r)+"} while( "),this.addExpr(s,r),this.buffer.b+=" )"):(this.buffer.b+="while( ",this.addExpr(s,e),r=e,this.buffer.b+=Ja.string(" ) {\n"+(e+="\t")),this.addExpr(i,e),this.buffer.b+=Ja.string("\n"+(e=r)+"}"));break;case 20:s=_.args,i=_.e;if(this.buffer.b+="@",this.buffer.b+=Ja.string(_.m),0<s.length){this.buffer.b+="(";for(var a=!0,_=0;_<s.length;){o=s[_++];a?a=!1:this.buffer.b+=", ",this.addConst(o)}this.buffer.b+=")"}this.buffer.b+=" ",this.addExpr(i,e)}},__class__:Wc},function(t,e,n,s,i){this.name=t,this.pos=e,this.instance=n,this.index=s,this.type=i}),Hc=((e["hxsl.AllocParam"]=jc).__name__="hxsl.AllocParam",jc.prototype={__class__:jc},function(t,e,n){this.pos=t,this.path=e,this.gid=Nc.allocID(e),this.type=n}),Zc=((e["hxsl.AllocGlobal"]=Hc).__name__="hxsl.AllocGlobal",Hc.prototype={__class__:Hc},function(){}),qc=((e["hxsl.RuntimeShaderData"]=Zc).__name__="hxsl.RuntimeShaderData",Zc.prototype={__class__:Zc},function(t,e){this.shader=t,this.bits=e}),Kc=((e["hxsl.ShaderInstanceDesc"]=qc).__name__="hxsl.ShaderInstanceDesc",qc.prototype={__class__:qc},function(){this.id=Kc.UID++}),Jc=((e["hxsl.RuntimeShader"]=Kc).__name__="hxsl.RuntimeShader",Kc.prototype={__class__:Kc},(e["hxsl.Serializer"]=Ki).__name__="hxsl.Serializer",Ki.prototype={readVarInt:function(){var t=this.input.readByte();return t<128?t:255==t?this.input.readInt32():(127&t)<<8|this.input.readByte()},readType:function(){switch(this.input.readByte()){case 0:return V.TVoid;case 1:return V.TInt;case 2:return V.TBool;case 3:return V.TFloat;case 4:return V.TString;case 5:var t=this.input.readByte();return null==(r=Ki.TVECS.h[t])&&(r=V.TVec(7&t,b.createEnumIndex(Dc,t>>3,null)),Ki.TVECS.h[t]=r),r;case 6:return V.TMat3;case 7:return V.TMat4;case 8:return V.TMat3x4;case 9:return V.TBytes(this.input.readInt32());case 10:return V.TSampler2D;case 11:return V.TSampler2DArray;case 12:return V.TSamplerCube;case 13:var t=this.readVarInt(),e=this.types[t];if(null==e){for(var n=W(this,this.readVar),s=[],i=0,a=this.readVarInt();i<a;)++i,s.push(n());e=V.TStruct(s),this.types[t]=e}return e;case 14:return V.TFun(null);case 15:var e=this.readType(),r=this.readVar();return V.TArray(e,null==r?Ec.SConst(this.readVarInt()):Ec.SVar(r));case 16:e=this.readType(),r=this.readVar();return V.TBuffer(e,null==r?Ec.SConst(this.readVarInt()):Ec.SVar(r));case 17:return V.TChannel(this.input.readByte());case 18:return V.TMat2;default:throw tr.thrown("assert")}},readString:function(){var t=this.readVarInt();return this.input.read(t).getString(0,t)},readConst:function(){switch(this.input.readByte()){case 0:return F.CNull;case 1:return F.CBool(0!=this.input.readByte());case 2:return F.CInt(this.input.readInt32());case 3:return F.CFloat(this.input.readDouble());case 4:return F.CString(this.readString());default:throw tr.thrown("assert")}},readExpr:function(){var t=this.input.readByte();if(0==t--)return null;switch(t){case 0:r=O.TConst(this.readConst());break;case 1:r=O.TVar(this.readVar());break;case 2:r=O.TGlobal(Ki.TGLOBALS[this.input.readByte()]);break;case 3:r=O.TParenthesis(this.readExpr());break;case 4:for(var e=W(this,this.readExpr),n=[],s=0,i=this.readVarInt();s<i;)++s,n.push(e());r=O.TBlock(n);break;case 5:var a=this.input.readByte(),r=O.TBinop(128<=a?C.OpAssignOp(Ki.BOPS[127&a]):Ki.BOPS[a],this.readExpr(),this.readExpr());break;case 6:r=O.TUnop(Ki.UNOPS[this.input.readByte()],this.readExpr());break;case 7:r=O.TVarDecl(this.readVar(),this.readExpr());break;case 8:for(var l=this.readExpr(),e=W(this,this.readExpr),n=[],s=0,i=this.readVarInt();s<i;)++s,n.push(e());r=O.TCall(l,n);break;case 9:var l=this.readExpr(),o=this.input.readUInt16(),a=Ki.TSWIZ.h[o];if(null==a){for(n=[],s=0,i=1+(3&o);s<i;)n.push(Ki.REGS[o>>2*s+++2&3]);Ki.TSWIZ.h[o]=a=n}r=O.TSwiz(l,a);break;case 10:r=O.TIf(this.readExpr(),this.readExpr(),this.readExpr());break;case 11:r=O.TDiscard;break;case 12:r=O.TReturn(this.readExpr());break;case 13:r=O.TFor(this.readVar(),this.readExpr(),this.readExpr());break;case 14:r=O.TContinue;break;case 15:r=O.TBreak;break;case 16:r=O.TArray(this.readExpr(),this.readExpr());break;case 17:for(e=W(this,this.readExpr),n=[],s=0,i=this.readVarInt();s<i;)++s,n.push(e());r=O.TArrayDecl(n);break;case 18:for(l=this.readExpr(),n=[],s=0,i=this.readVarInt();s<i;){++s;for(var e=W(this,this.readExpr),h=[],u=0,_=this.readVarInt();u<_;)++u,h.push(e());n.push({values:h,expr:this.readExpr()})}r=O.TSwitch(l,n,this.readExpr());break;case 19:r=O.TWhile(this.readExpr(),this.readExpr(),0!=this.input.readByte());break;case 20:for(l=this.readString(),e=W(this,this.readConst),n=[],s=0,i=this.readVarInt();s<i;)++s,n.push(e());r=O.TMeta(l,n,this.readExpr());break;default:throw tr.thrown("assert")}return{e:r,t:this.readType(),p:null}},readVar:function(){var t=this.readVarInt();if(0==t)return null;var e=this.varMap.h[t];if(null==e){e={id:lt.allocVarId(),name:this.readString(),type:null,kind:null},(this.varMap.h[t]=e).type=this.readType(),e.kind=Ki.VKINDS[this.input.readByte()],e.parent=this.readVar();var n=this.input.readByte();if(0<n){e.qualifiers=[];for(var s=0;s<n;){switch(++s,this.input.readByte()){case 0:var i=this.input.readInt32(),a=Pc.Const(0==i?null:i);break;case 1:a=Pc.Private;break;case 2:a=Pc.Nullable;break;case 3:a=Pc.PerObject;break;case 4:a=Pc.Name(this.readString());break;case 5:a=Pc.Shared;break;case 6:a=Pc.Precision(Ki.PRECS[this.input.readByte()]);break;case 7:a=Pc.Range(this.input.readDouble(),this.input.readDouble());break;case 8:a=Pc.Ignore;break;case 9:a=Pc.PerInstance(this.input.readInt32());break;case 10:a=Pc.Doc(this.readString());break;case 11:a=Pc.Borrow(this.readString());break;case 12:a=Pc.Sampler(this.readString());break;default:throw tr.thrown("assert")}e.qualifiers.push(a)}}}return e},readFun:function(){for(var t=Ki.FKIND[this.input.readByte()],e=this.readVar(),n=W(this,this.readVar),s=[],i=0,a=this.readVarInt();i<a;)++i,s.push(n());return{kind:t,ref:e,args:s,ret:this.readType(),expr:this.readExpr()}},unserialize:function(t){if(this.input=new c_(t_.decode(t,!1)),this.input.readByte()!=(255&Ki.SIGN)||this.input.readByte()!=(Ki.SIGN>>8&255)||this.input.readByte()!=(Ki.SIGN>>16&255))throw tr.thrown("Invalid HXSL data");this.varMap=new fl,this.types=[];for(var t=this.readString(),e=W(this,this.readVar),n=[],s=0,i=this.readVarInt();s<i;)++s,n.push(e());for(var e=W(this,this.readFun),s=[],i=0,a=this.readVarInt();i<a;)++i,s.push(e());return{name:t,vars:n,funs:s}},__class__:Ki},function(t,e){this.s=t,this.next=e}),$c=((e["hxsl.ShaderList"]=Jc).__name__="hxsl.ShaderList",Jc.addSort=function(t,e){for(var n,s=null,i=e;null!=i&&i.s.priority<t.priority;)i=(s=i).next;return null==s?(n=new Jc(t,e),Jc.checkSize(n),n):(s.next=new Jc(t,s.next),Jc.checkSize(e),e)},Jc.checkSize=function(t){if(!(Jc.MAX_LIST_SIZE<=0)){for(var e=t,n=0;null!=e;){if(!Jc.ALLOW_DUPLICATES&&null!=e.next&&e.next.s==e.s)throw tr.thrown("Duplicate shader "+Ja.string(e.s));++n,e=e.next}if(n>Jc.MAX_LIST_SIZE)throw tr.thrown("Too many shaders")}},Jc.prototype={__class__:Jc},(e["hxsl.ShaderInstance"]=Ji).__name__="hxsl.ShaderInstance",Ji.prototype={__class__:Ji},(e["hxsl.ShaderGlobal"]=$i).__name__="hxsl.ShaderGlobal",$i.prototype={__class__:$i},(e["hxsl.ShaderConst"]=ta).__name__="hxsl.ShaderConst",ta.prototype={__class__:ta},function(t){if(this.instanceCache=new fl,this.consts=null,this.globals=[],""!=t){this.data=(new Ki).unserialize(t);for(var e=0,n=this.data.vars;e<n.length;)this.initVarId(n[e++]);this.data=$c.compactMem(this.data),this.initialize()}}),td=((e["hxsl.SharedShader"]=$c).__name__="hxsl.SharedShader",$c.compactMem=function(t){return t},$c.prototype={initialize:function(){for(var t=0,e=this.data.vars;t<e.length;)this.browseVar(e[t++])},makeInstance:function(t){for(var e=new ji,n=this.consts;null!=n;){var s,i=n.v;switch(n.v.type._hx_index){case 1:s=F.CInt(t>>>n.pos&(1<<n.bits)-1);break;case 2:s=F.CBool(0!=(t>>>n.pos&1));break;case 17:s=F.CInt(t>>>n.pos&(1<<n.bits)-1);break;default:throw tr.thrown("assert")}e.setConstant(i,s),n=n.next}e.inlineCalls=!0,e.unrollLoops=$c.UNROLL_LOOPS;for(var a=e.eval(this.data),a=$c.compactMem(a),r=new Ji(a),l=this.paramsCount=0,o=this.data.vars;l<o.length;)this.addParam(e,r,o[l++]);return this.instanceCache.h[t]=r},addParam:function(t,e,n){if(13==(i=n.type)._hx_index)for(var s=i.vl,i=0;i<s.length;)this.addParam(t,e,s[i++]);else n.kind==Q.Param&&(e.params.h[t.varMap.h[n.__id__].id]=this.paramsCount,this.paramsCount++)},initVarId:function(t){if(t.id=lt.allocVarId(),13==(n=t.type)._hx_index)for(var e=n.vl,n=0;n<e.length;)this.initVarId(e[n++])},browseVar:function(t,e){if(null==e?e=lt.getName(t):e+="."+t.name,13==(s=t.type)._hx_index)for(var n=s.vl,s=0;s<n.length;)this.browseVar(n[s++],e);else{var i,a=0;t.kind==Q.Global&&(a=Nc.allocID(e),this.globals.push(new $i(t,a))),lt.isConst(t)&&0<(i=lt.getConstBits(t))&&((t=new ta(t,null==this.consts?0:this.consts.pos+this.consts.bits,i)).globalId=a,t.next=this.consts,this.consts=t)}},__class__:$c},(e["hxsl._Splitter.VarProps"]=ea).__name__="hxsl._Splitter.VarProps",ea.prototype={__class__:ea},function(){}),ed=((e["hxsl.Splitter"]=td).__name__="hxsl.Splitter",td.prototype={split:function(t){for(var n=this,e=null,s=new fl,i=null,a=new fl,r=(this.varNames=new N,this.varMap=new r_,0),l=t.funs;r<l.length;){var o=l[r];switch(++r,o.kind._hx_index){case 0:this.vars=s,e=o,this.checkExpr(o.expr);break;case 1:this.vars=a,this.checkExpr((i=o).expr);break;default:throw tr.thrown("assert")}}for(var h=[],r=0,l=wt.array(s);r<l.length;){var u,_=[l[r]],c=(++r,[_[0].v]);if(!_[0].local){switch(c[0].kind._hx_index){case 3:case 4:var d=a.h[_[0].origin.id];c[0].kind=null!=d&&0<d.read?Q.Var:Q.Local}switch(c[0].kind._hx_index){case 3:case 5:(0<_[0].read||1<_[0].write)&&(A={id:lt.allocVarId(),name:c[0].name,kind:Q.Local,type:c[0].type},this.uniqueName(A),this.varMap.set(_[0].origin,A),(m=new ea(A)).read++,s.h[A.id]=m,u=e.expr.p,h.push(function(t){return function(){n.addExpr(e,t[0])}}([{e:O.TBinop(C.OpAssign,{e:O.TVar(c[0]),t:A.type,p:u},{e:O.TVar(A),t:c[0].type,p:u}),t:A.type,p:u}])),c[0].kind==Q.Var)&&h.push(function(t,e){return function(){n.varMap.set(e[0].origin,t[0])}}(c,_))}}}for(e={ret:e.ret,ref:e.ref,kind:e.kind,args:e.args,expr:this.mapVars(e.expr)},r=0;r<h.length;)h[r++]();for(var p=[],f=a.iterator();f.hasNext();){var g=f.next();switch((b=g.v).kind._hx_index){case 1:var m,A={id:lt.allocVarId(),name:b.name,kind:Q.Var,type:b.type},x=(this.uniqueName(A),s.h[g.origin.id]);null==x&&(x=new ea(b),s.h[g.origin.id]=x),x.read++,this.varMap.set(g.origin,A),(m=new ea(A)).origin=g.origin,a.h[g.origin.id]=m,s.h[A.id]=m,this.addExpr(e,{e:O.TBinop(C.OpAssign,{e:O.TVar(A),t:b.type,p:e.expr.p},{e:O.TVar(b),t:b.type,p:e.expr.p}),t:b.type,p:e.expr.p});break;case 3:0<g.write&&(x={id:lt.allocVarId(),name:b.name,kind:Q.Local,type:b.type},this.uniqueName(x),p.push({e:O.TVarDecl(x,{e:O.TVar(b),t:b.type,p:i.expr.p}),t:V.TVoid,p:i.expr.p}),this.varMap.set(g.origin,x))}}for(var b=s.iterator();b.hasNext();)this.checkVar(b.next(),!0,s,e.expr.p);for(b=a.iterator();b.hasNext();)this.checkVar(b.next(),!1,s,i.expr.p);if(4==(r=(i={ret:i.ret,ref:i.ref,kind:i.kind,args:i.args,expr:this.mapVars(i.expr)}).expr.e)._hx_index)for(l=r.el,r=0;r<p.length;)l.unshift(p[r++]);else p.push(i.expr),i.expr={e:O.TBlock(p),t:V.TVoid,p:i.expr.p};for(r=[],b=s.iterator();b.hasNext();)(y=b.next()).local||r.push(y);for(var y,l=[],b=a.iterator();b.hasNext();)(y=b.next()).local||l.push(y);r.sort(function(t,e){return(null==t.origin?t.v:t.origin).id-(null==e.origin?e.v:e.origin).id}),l.sort(function(t,e){return(null==t.origin?t.v:t.origin).id-(null==e.origin?e.v:e.origin).id});for(var w=[],v=0;v<r.length;)w.push(r[v++].v);for(t={name:"vertex",vars:w,funs:[e]},r=[],w=0;w<l.length;)r.push(l[w++].v);return{vertex:t,fragment:{name:"fragment",vars:r,funs:[i]}}},addExpr:function(t,e){var n=t.expr.e;4==n._hx_index?n.el.push(e):t.expr={e:O.TBlock([t.expr,e]),t:V.TVoid,p:t.expr.p}},checkVar:function(t,e,n,s){switch(t.v.kind._hx_index){case 3:if(!e){var i=n.h[t.origin.id];if(null!=i&&i.v.kind==Q.Input)return;if(null==i||0==i.write)throw tr.thrown(new Ui("Varying "+t.v.name+" is not written by vertex shader",s))}break;case 4:if(t.requireInit)throw tr.thrown(new Ui("Variable "+t.v.name+" is used without being initialized",s))}},mapVars:function(t){var e=t.e;switch(e._hx_index){case 1:return null==(n=this.varMap.h[e.v.__id__])?t:{e:O.TVar(n),t:t.t,p:t.p};case 7:var n,s=e.init;return null==(n=this.varMap.h[e.v.__id__])?lt.map(t,W(this,this.mapVars)):{e:O.TVarDecl(n,null==s?null:this.mapVars(s)),t:t.t,p:t.p};case 13:return null==(n=this.varMap.h[e.v.__id__])?lt.map(t,W(this,this.mapVars)):{e:O.TFor(n,this.mapVars(e.it),this.mapVars(e.loop)),t:t.t,p:t.p};default:return lt.map(t,W(this,this.mapVars))}},get:function(t){var e,n=this.vars.h[t.id];return null==n&&(null==(e=this.varMap.h[t.__id__])&&(t.kind==Q.Global||t.kind==Q.Output||t.kind==Q.Input?e=t:(e={id:lt.allocVarId(),name:t.name,kind:t.kind,type:t.type},this.uniqueName(e)),this.varMap.set(t,e)),(n=new ea(e)).origin=t,this.vars.h[t.id]=n),n},uniqueName:function(t){if(t.kind!=Q.Global&&t.kind!=Q.Output&&t.kind!=Q.Input){var e=this.varNames.h[t.name];if(null!=e&&e!=t){for(var n=t.name;48<=Jn.cca(n,n.length-1)&&Jn.cca(n,n.length-1)<=57;)n=Jn.substr(n,0,-1);for(var s=n==t.name?2:Ja.parseInt(Jn.substr(t.name,n.length,null));Object.prototype.hasOwnProperty.call(this.varNames.h,n+s);)++s;t.name=n+s}this.varNames.h[t.name]=t}},checkExpr:function(t){var e=t.e;switch(e._hx_index){case 1:0==(r=this.get(e.v)).write&&(r.requireInit=!0),r.read++;break;case 5:var n,s=e.e1,i=e.e2;switch(e.op._hx_index){case 4:switch((n=s.e)._hx_index){case 1:(r=this.get(n.v)).write++,this.checkExpr(i);break;case 9:var a=n.e.e;1==a._hx_index?((r=this.get(a.v)).write++,this.checkExpr(i)):lt.iter(t,W(this,this.checkExpr));break;default:lt.iter(t,W(this,this.checkExpr))}break;case 20:switch((n=s.e)._hx_index){case 1:0==(r=this.get(n.v)).write&&(r.requireInit=!0),r.read++,r.write++,this.checkExpr(i);break;case 9:1==(s=n.e.e)._hx_index?(0==(r=this.get(s.v)).write&&(r.requireInit=!0),r.read++,r.write++,this.checkExpr(i)):lt.iter(t,W(this,this.checkExpr));break;default:lt.iter(t,W(this,this.checkExpr))}break;default:lt.iter(t,W(this,this.checkExpr))}break;case 7:var r,s=e.init;(r=this.get(e.v)).local=!0,null!=s&&(this.checkExpr(s),r.write++);break;case 13:this.checkExpr(e.it),(r=this.get(e.v)).local=!0,r.write++,this.checkExpr(e.loop);break;default:lt.iter(t,W(this,this.checkExpr))}},__class__:td},function(){}),nd=((e["js.html._CanvasElement.CanvasUtil"]=ed).__name__="js.html._CanvasElement.CanvasUtil",ed.getContextWebGL=function(t,e){var n=t.getContext("webgl",e);return null!=n||null!=(n=t.getContext("experimental-webgl",e))?n:null},Math.__name__="Math",(e["polygonal.ds.tools.GrowthRate"]=na).__name__="polygonal.ds.tools.GrowthRate",na.compute=function(t,e){if(0<t)e+=t;else switch(t){case-3:e<<=1;break;case-2:e=1+(3*e>>1);break;case-1:var n=e+1;e=(n>>3)+(n<9?3:6),e+=n;break;case 0:throw tr.thrown("out of space")}return e},(e["polygonal.ds.tools.NativeArrayTools"]=sa).__name__="polygonal.ds.tools.NativeArrayTools",sa.blit=function(t,e,n,s,i){if(0<i)if(t==n){if(e<s)for(var a=e+i,r=s+i,l=0;l<i;)++l,t[--r]=t[--a];else if(s<e)for(a=e,r=s,l=0;l<i;)++l,t[r]=t[a],++a,++r}else if(0==e&&0==s)for(l=0;l<i;)n[a=l++]=t[a];else if(0==e)for(l=0;l<i;)n[s+(a=l++)]=t[a];else if(0==s)for(l=0;l<i;)n[a=l++]=t[e+a];else for(l=0;l<i;)n[s+(a=l++)]=t[e+a]},sa.nullify=function(t,e,n){for(var s=e=null==e?0:e,i=(n=null==n?0:n)<=0?t.length:e+n;s<i;)t[s++]=null;return t},function(t,e,n){null==n&&(n=-1),this.mCapacity=16,this.size=0,this.growthRate=-1,this.mFactory=t,this.mDispose=null==e?function(t){}:e,this.maxSize=n,this.mPool=new Array(this.mCapacity)}),$n=((e["polygonal.ds.tools.ObjectPool"]=nd).__name__="polygonal.ds.tools.ObjectPool",nd.prototype={free:function(){for(var t=0,e=this.mCapacity;t<e;)this.mDispose(this.mPool[t++]);sa.nullify(this.mPool),this.mPool=null,this.mFactory=null,this.mDispose=null},resize:function(){var t=na.compute(this.growthRate,this.mCapacity),e=new Array(t);this.mCapacity=t,sa.blit(this.mPool,0,e,0,this.size),this.mPool=e},__class__:nd},(e["spine.Animation"]=ia).__name__="spine.Animation",ia.prototype={setTimelines:function(t){if(null==t)throw tr.thrown(new $n("timelines cannot be null."));for(var e=(this.timelines=t).length,n=this.timelineIds,s=(n.splice(0,n.length),0);s<e;)Od.addAll(this.timelineIds,t[s].getPropertyIds()),++s},hasTimeline:function(t){for(var e=0,n=t;e<n.length;)if(-1!=this.timelineIds.indexOf(n[e++]))return!0;return!1},getDuration:function(){return this.duration},__class__:ia},(e["spine.Timeline"]=aa).__name__="spine.Timeline",aa.search=function(t,e){for(var n=t.length,s=1;s<n;){if(t[s]>e)return s-1;++s}return n-1},aa.searchWithStep=function(t,e,n){for(var s=t.length,i=n;i<s;){if(t[i]>e)return i-n;i+=n}return s-n},aa.prototype={getPropertyIds:function(){return this._propertyIds},getFrameEntries:function(){return 1},getFrameCount:function(){return this.frames.length/this.getFrameEntries()|0},getDuration:function(){return this.frames[this.frames.length-this.getFrameEntries()]},apply:function(t,e,n,s,i,a,r){},__class__:aa},(e["spine.BoneTimeline"]=ra).__name__="spine.BoneTimeline",ra.__isInterface__=!0,(e["spine.SlotTimeline"]=la).__name__="spine.SlotTimeline",la.__isInterface__=!0,(e["spine.CurveTimeline"]=oa).__name__="spine.CurveTimeline",oa.__super__=aa,oa.prototype=t(aa.prototype,{setStepped:function(t){this.curves[t]=1},shrink:function(t){t=this.getFrameCount()+18*t;if(this.curves.length>t){var e=t,n=0|(e=null==t?0:t),s=[];if(0<e){var i=s.length;if(n<i)s.splice(n,n-i);else if(i<n)for(;i<n;)s.push(0),++i}zd.copy(this.curves,0,s,0,t),this.curves=s}},setBezier:function(t,e,n,s,i,a,r,l,o,h,u){for(var _=this.curves,c=this.getFrameCount()+18*t,t=(0==n&&(_[e]=2+c),.03*(s-2*a+l)),n=.03*(i-2*r+o),d=.006*(3*(a-l)-s+h),p=.006*(3*(r-o)-i+u),f=2*t+d,g=2*n+p,m=.3*(a-s)+t+.16666667*d,A=.3*(r-i)+n+.16666667*p,x=s+m,b=i+A,y=c+18;c<y;)_[c]=x,_[c+1]=b,m+=f,A+=g,f+=d,g+=p,x+=m,b+=A,c+=2},getBezierValue:function(t,e,n,s){var i=this.curves;if(i[s]>t)return l=this.frames[e],(r=this.frames[e+n])+(t-l)/(i[s]-l)*(i[s+1]-r);var a=s+18;for(s+=2;s<a;){if(i[s]>=t)return l=i[s-2],(r=i[s-1])+(t-l)/(i[s]-l)*(i[s+1]-r);s+=2}e+=this.getFrameEntries();var r,l=i[a-2];return(r=i[a-1])+(t-l)/(this.frames[e]-l)*(this.frames[e+n]-r)},__class__:oa}),(e["spine.CurveTimeline1"]=ha).__name__="spine.CurveTimeline1",ha.__super__=oa,ha.prototype=t(oa.prototype,{getFrameEntries:function(){return 2},setFrame:function(t,e,n){this.frames[t<<=1]=e,this.frames[t+1]=n},getCurveValue:function(t){for(var e=this.frames,n=e.length-2,s=2;s<=n;){if(e[s]>t){n=s-2;break}s+=2}var i,a,r=0|this.curves[n>>1];return 0==r?(i=e[n],(a=e[n+1])+(t-i)/(e[n+2]-i)*(e[n+2+1]-a)):1==r?e[n+1]:this.getBezierValue(t,n,1,r-2)},__class__:ha}),(e["spine.CurveTimeline2"]=ua).__name__="spine.CurveTimeline2",ua.__super__=oa,ua.prototype=t(oa.prototype,{getFrameEntries:function(){return 3},__class__:ua}),(e["spine.RotateTimeline"]=_a).__name__="spine.RotateTimeline",_a.__interfaces__=[ra],_a.__super__=ha,_a.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.rotation=l.data.rotation):void(1==a&&(l.rotation+=(l.data.rotation-l.rotation)*i));var o=this.getCurveValue(n);do{if(0==a){l.rotation=l.data.rotation+o*i;break}}while(1==a||2==a?(o+=l.data.rotation-l.rotation,l.rotation+=o*i):3==a&&(l.rotation+=o*i),0)}},__class__:_a}),(e["spine.TranslateTimeline"]=ca).__name__="spine.TranslateTimeline",ca.__interfaces__=[ra],ca.__super__=ua,ca.prototype=t(ua.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){var o=this.frames;if(n<o[0])return 0==a?(l.x=l.data.x,void(l.y=l.data.y)):void(1==a&&(l.x+=(l.data.x-l.x)*i,l.y+=(l.data.y-l.y)*i));var h=0,u=0,_=aa.searchWithStep(o,n,3),c=0|this.curves[_/3|0];do{if(0==c){var d=o[_],h=o[_+1],u=o[_+2],d=(n-d)/(o[_+3]-d);h+=(o[_+3+1]-h)*d,u+=(o[_+3+2]-u)*d;break}if(1==c){h=o[_+1],u=o[_+2];break}}while(h=this.getBezierValue(n,_,1,c-2|0),u=this.getBezierValue(n,_,2,18+c-2),0);do{if(0==a){l.x=l.data.x+h*i,l.y=l.data.y+u*i;break}if(1==a){l.x+=(l.data.x+h-l.x)*i,l.y+=(l.data.y+u-l.y)*i;break}if(2==a){l.x+=(l.data.x+h-l.x)*i,l.y+=(l.data.y+u-l.y)*i;break}}while(3==a&&(l.x+=h*i,l.y+=u*i),0)}},__class__:ca}),(e["spine.TranslateXTimeline"]=da).__name__="spine.TranslateXTimeline",da.__interfaces__=[ra],da.__super__=ha,da.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.x=l.data.x):void(1==a&&(l.x+=(l.data.x-l.x)*i));var o=this.getCurveValue(n);do{if(0==a){l.x=l.data.x+o*i;break}if(1==a){l.x+=(l.data.x+o-l.x)*i;break}if(2==a){l.x+=(l.data.x+o-l.x)*i;break}}while(3==a&&(l.x+=o*i),0)}},__class__:da}),(e["spine.TranslateYTimeline"]=pa).__name__="spine.TranslateYTimeline",pa.__interfaces__=[ra],pa.__super__=ha,pa.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.y=l.data.y):void(1==a&&(l.y+=(l.data.y-l.y)*i));var o=this.getCurveValue(n);do{if(0==a){l.y=l.data.y+o*i;break}if(1==a){l.y+=(l.data.y+o-l.y)*i;break}if(2==a){l.y+=(l.data.y+o-l.y)*i;break}}while(3==a&&(l.y+=o*i),0)}},__class__:pa}),(e["spine.ScaleTimeline"]=fa).__name__="spine.ScaleTimeline",fa.__interfaces__=[ra],fa.__super__=ua,fa.prototype=t(ua.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){var o=this.frames;if(n<o[0])return 0==a?(l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY)):void(1==a&&(l.scaleX+=(l.data.scaleX-l.scaleX)*i,l.scaleY+=(l.data.scaleY-l.scaleY)*i));var h=0,u=0,_=aa.searchWithStep(o,n,3),c=0|this.curves[_/3|0];do{if(0==c){var d=o[_],h=o[_+1],u=o[_+2],d=(n-d)/(o[_+3]-d);h+=(o[_+3+1]-h)*d,u+=(o[_+3+2]-u)*d;break}if(1==c){h=o[_+1],u=o[_+2];break}}while(h=this.getBezierValue(n,_,1,c-2|0),u=this.getBezierValue(n,_,2,18+c-2),0);if(h*=l.data.scaleX,u*=l.data.scaleY,1==i)3==a?(l.scaleX+=h-l.data.scaleX,l.scaleY+=u-l.data.scaleY):(l.scaleX=h,l.scaleY=u);else{var p=0,f=0;if(1==r)do{if(0==a){p=l.data.scaleX,f=l.data.scaleY,l.scaleX=p+(Math.abs(h)*(0<p?1:p<0?-1:0)-p)*i,l.scaleY=f+(Math.abs(u)*(0<f?1:f<0?-1:0)-f)*i;break}if(1==a){p=l.scaleX,f=l.scaleY,l.scaleX=p+(Math.abs(h)*(0<p?1:p<0?-1:0)-p)*i,l.scaleY=f+(Math.abs(u)*(0<f?1:f<0?-1:0)-f)*i;break}if(2==a){p=l.scaleX,f=l.scaleY,l.scaleX=p+(Math.abs(h)*(0<p?1:p<0?-1:0)-p)*i,l.scaleY=f+(Math.abs(u)*(0<f?1:f<0?-1:0)-f)*i;break}}while(3==a&&(l.scaleX+=(h-l.data.scaleX)*i,l.scaleY+=(u-l.data.scaleY)*i),0);else do{if(0==a){p=Math.abs(l.data.scaleX)*(0<h?1:h<0?-1:0),f=Math.abs(l.data.scaleY)*(0<u?1:u<0?-1:0),l.scaleX=p+(h-p)*i,l.scaleY=f+(u-f)*i;break}if(1==a){p=Math.abs(l.scaleX)*(0<h?1:h<0?-1:0),f=Math.abs(l.scaleY)*(0<u?1:u<0?-1:0),l.scaleX=p+(h-p)*i,l.scaleY=f+(u-f)*i;break}if(2==a){p=Math.abs(l.scaleX)*(0<h?1:h<0?-1:0),f=Math.abs(l.scaleY)*(0<u?1:u<0?-1:0),l.scaleX=p+(h-p)*i,l.scaleY=f+(u-f)*i;break}}while(3==a&&(l.scaleX+=(h-l.data.scaleX)*i,l.scaleY+=(u-l.data.scaleY)*i),0)}}},__class__:fa}),(e["spine.ScaleXTimeline"]=ga).__name__="spine.ScaleXTimeline",ga.__interfaces__=[ra],ga.__super__=ha,ga.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.scaleX=l.data.scaleX):void(1==a&&(l.scaleX+=(l.data.scaleX-l.scaleX)*i));var o=this.getCurveValue(n)*l.data.scaleX;if(1==i)3==a?l.scaleX+=o-l.data.scaleX:l.scaleX=o;else{var h=0;if(1==r)do{if(0==a){h=l.data.scaleX,l.scaleX=h+(Math.abs(o)*(0<h?1:h<0?-1:0)-h)*i;break}if(1==a){h=l.scaleX,l.scaleX=h+(Math.abs(o)*(0<h?1:h<0?-1:0)-h)*i;break}if(2==a){h=l.scaleX,l.scaleX=h+(Math.abs(o)*(0<h?1:h<0?-1:0)-h)*i;break}}while(3==a&&(l.scaleX+=(o-l.data.scaleX)*i),0);else do{if(0==a){h=Math.abs(l.data.scaleX)*(0<o?1:o<0?-1:0),l.scaleX=h+(o-h)*i;break}if(1==a){h=Math.abs(l.scaleX)*(0<o?1:o<0?-1:0),l.scaleX=h+(o-h)*i;break}if(2==a){h=Math.abs(l.scaleX)*(0<o?1:o<0?-1:0),l.scaleX=h+(o-h)*i;break}}while(3==a&&(l.scaleX+=(o-l.data.scaleX)*i),0)}}},__class__:ga}),(e["spine.ScaleYTimeline"]=ma).__name__="spine.ScaleYTimeline",ma.__interfaces__=[ra],ma.__super__=ha,ma.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.scaleY=l.data.scaleY):void(1==a&&(l.scaleY+=(l.data.scaleY-l.scaleY)*i));var o=this.getCurveValue(n)*l.data.scaleY;if(1==i)3==a?l.scaleY+=o-l.data.scaleY:l.scaleY=o;else{var h=0;if(1==r)do{if(0==a){h=l.data.scaleY,l.scaleY=h+(Math.abs(o)*(0<h?1:h<0?-1:0)-h)*i;break}if(1==a){h=l.scaleY,l.scaleY=h+(Math.abs(o)*(0<h?1:h<0?-1:0)-h)*i;break}if(2==a){h=l.scaleY,l.scaleY=h+(Math.abs(o)*(0<h?1:h<0?-1:0)-h)*i;break}}while(3==a&&(l.scaleY+=(o-l.data.scaleY)*i),0);else do{if(0==a){h=Math.abs(l.data.scaleY)*(0<o?1:o<0?-1:0),l.scaleY=h+(o-h)*i;break}if(1==a){h=Math.abs(l.scaleY)*(0<o?1:o<0?-1:0),l.scaleY=h+(o-h)*i;break}if(2==a){h=Math.abs(l.scaleY)*(0<o?1:o<0?-1:0),l.scaleY=h+(o-h)*i;break}}while(3==a&&(l.scaleY+=(o-l.data.scaleY)*i),0)}}},__class__:ma}),(e["spine.ShearTimeline"]=Aa).__name__="spine.ShearTimeline",Aa.__interfaces__=[ra],Aa.__super__=ua,Aa.prototype=t(ua.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){var o=this.frames;if(n<o[0])return 0==a?(l.shearX=l.data.shearX,void(l.shearY=l.data.shearY)):void(1==a&&(l.shearX+=(l.data.shearX-l.shearX)*i,l.shearY+=(l.data.shearY-l.shearY)*i));var h=0,u=0,_=aa.searchWithStep(o,n,3),c=0|this.curves[_/3|0];do{if(0==c){var d=o[_],h=o[_+1],u=o[_+2],d=(n-d)/(o[_+3]-d);h+=(o[_+3+1]-h)*d,u+=(o[_+3+2]-u)*d;break}if(1==c){h=o[_+1],u=o[_+2];break}}while(h=this.getBezierValue(n,_,1,c-2|0),u=this.getBezierValue(n,_,2,18+c-2),0);do{if(0==a){l.shearX=l.data.shearX+h*i,l.shearY=l.data.shearY+u*i;break}if(1==a){l.shearX+=(l.data.shearX+h-l.shearX)*i,l.shearY+=(l.data.shearY+u-l.shearY)*i;break}if(2==a){l.shearX+=(l.data.shearX+h-l.shearX)*i,l.shearY+=(l.data.shearY+u-l.shearY)*i;break}}while(3==a&&(l.shearX+=h*i,l.shearY+=u*i),0)}},__class__:Aa}),(e["spine.ShearXTimeline"]=xa).__name__="spine.ShearXTimeline",xa.__interfaces__=[ra],xa.__super__=ha,xa.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.shearX=l.data.shearX):void(1==a&&(l.shearX+=(l.data.shearX-l.shearX)*i));var o=this.getCurveValue(n);do{if(0==a){l.shearX=l.data.shearX+o*i;break}if(1==a){l.shearX+=(l.data.shearX+o-l.shearX)*i;break}if(2==a){l.shearX+=(l.data.shearX+o-l.shearX)*i;break}}while(3==a&&(l.shearX+=o*i),0)}},__class__:xa}),(e["spine.ShearYTimeline"]=ba).__name__="spine.ShearYTimeline",ba.__interfaces__=[ra],ba.__super__=ha,ba.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l=t.bones[this.boneIndex];if(l.active){if(n<this.frames[0])return 0==a?void(l.shearY=l.data.shearY):void(1==a&&(l.shearY+=(l.data.shearY-l.shearY)*i));var o=this.getCurveValue(n);do{if(0==a){l.shearY=l.data.shearY+o*i;break}if(1==a){l.shearY+=(l.data.shearY+o-l.shearY)*i;break}if(2==a){l.shearY+=(l.data.shearY+o-l.shearY)*i;break}}while(3==a&&(l.shearY+=o*i),0)}},__class__:ba}),(e["spine.RGBATimeline"]=ya).__name__="spine.RGBATimeline",ya.__interfaces__=[la],ya.__super__=oa,ya.prototype=t(oa.prototype,{getFrameEntries:function(){return 5},apply:function(t,e,n,s,i,a,r){t=t.slots[this.slotIndex];if(t.bone.active){var l=this.frames,o=t.color;if(n<l[0])return h=t.data.color,0==a?(o.r=h.r,o.g=h.g,o.b=h.b,void(o.a=h.a)):void(1==a&&(o.r+=(h.r-o.r)*i,o.g+=(h.g-o.g)*i,o.b+=(h.b-o.b)*i,o.a+=(h.a-o.a)*i));var h,u=0,_=0,c=0,d=0,p=aa.searchWithStep(l,n,5),f=0|this.curves[p/5|0];do{if(0==f){var g=l[p],u=l[p+1],_=l[p+2],c=l[p+3],d=l[p+4],g=(n-g)/(l[p+5]-g);u+=(l[p+5+1]-u)*g,_+=(l[p+5+2]-_)*g,c+=(l[p+5+3]-c)*g,d+=(l[p+5+4]-d)*g;break}if(1==f){u=l[p+1],_=l[p+2],c=l[p+3],d=l[p+4];break}}while(u=this.getBezierValue(n,p,1,f-2|0),_=this.getBezierValue(n,p,2,18+f-2),c=this.getBezierValue(n,p,3,36+f-2),d=this.getBezierValue(n,p,4,54+f-2),0);1==i?(o.r=u,o.g=_,o.b=c,o.a=d):(0==a&&(h=t.data.color,o.r=h.r,o.g=h.g,o.b=h.b,o.a=h.a),o.r+=(u-o.r)*i,o.g+=(_-o.g)*i,o.b+=(c-o.b)*i,o.a+=(d-o.a)*i)}},__class__:ya}),(e["spine.RGBTimeline"]=wa).__name__="spine.RGBTimeline",wa.__interfaces__=[la],wa.__super__=oa,wa.prototype=t(oa.prototype,{getFrameEntries:function(){return 4},apply:function(t,e,n,s,i,a,r){t=t.slots[this.slotIndex];if(t.bone.active){var l=this.frames,o=t.color;if(n<l[0])return h=t.data.color,0==a?(o.r=h.r,o.g=h.g,void(o.b=h.b)):void(1==a&&(o.r+=(h.r-o.r)*i,o.g+=(h.g-o.g)*i,o.b+=(h.b-o.b)*i));var h,u=0,_=0,c=0,d=aa.searchWithStep(l,n,4),p=0|this.curves[d>>2];do{if(0==p){var f=l[d],u=l[d+1],_=l[d+2],c=l[d+3],f=(n-f)/(l[d+4]-f);u+=(l[d+4+1]-u)*f,_+=(l[d+4+2]-_)*f,c+=(l[d+4+3]-c)*f;break}if(1==p){u=l[d+1],_=l[d+2],c=l[d+3];break}}while(u=this.getBezierValue(n,d,1,p-2),_=this.getBezierValue(n,d,2,18+p-2),c=this.getBezierValue(n,d,3,36+p-2),0);1==i?(o.r=u,o.g=_,o.b=c):(0==a&&(h=t.data.color,o.r=h.r,o.g=h.g,o.b=h.b),o.r+=(u-o.r)*i,o.g+=(_-o.g)*i,o.b+=(c-o.b)*i)}},__class__:wa}),(e["spine.AlphaTimeline"]=va).__name__="spine.AlphaTimeline",va.__interfaces__=[la],va.__super__=ha,va.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){var l,o,t=t.slots[this.slotIndex];if(t.bone.active)return l=t.color,n<this.frames[0]?(o=t.data.color,0==a?void(l.a=o.a):void(1==a&&(l.a+=(o.a-l.a)*i))):(o=this.getCurveValue(n),void(1==i?l.a=o:(0==a&&(l.a=t.data.color.a),l.a+=(o-l.a)*i)))},__class__:va}),(e["spine.RGBA2Timeline"]=Ca).__name__="spine.RGBA2Timeline",Ca.__interfaces__=[la],Ca.__super__=oa,Ca.prototype=t(oa.prototype,{getFrameEntries:function(){return 8},apply:function(t,e,n,s,i,a,r){t=t.slots[this.slotIndex];if(t.bone.active){var l=this.frames,o=t.color,h=t.darkColor;if(n<l[0])return u=t.data.color,_=t.data.darkColor,0==a?(o.r=u.r,o.g=u.g,o.b=u.b,o.a=u.a,h.r=_.r,h.g=_.g,void(h.b=_.b)):void(1==a&&(o.r+=(u.r-o.r)*i,o.g+=(u.g-o.g)*i,o.b+=(u.b-o.b)*i,o.a+=(u.a-o.a)*i,h.r+=(_.r-h.r)*i,h.g+=(_.g-h.g)*i,h.b+=(_.b-h.b)*i));var u,_,c=0,d=0,p=0,f=0,g=0,m=0,A=0,x=aa.searchWithStep(l,n,8),b=0|this.curves[x>>3];do{if(0==b){var y=l[x],c=l[x+1],d=l[x+2],p=l[x+3],f=l[x+4],g=l[x+5],m=l[x+6],A=l[x+7],y=(n-y)/(l[x+8]-y);c+=(l[x+8+1]-c)*y,d+=(l[x+8+2]-d)*y,p+=(l[x+8+3]-p)*y,f+=(l[x+8+4]-f)*y,g+=(l[x+8+5]-g)*y,m+=(l[x+8+6]-m)*y,A+=(l[x+8+7]-A)*y;break}if(1==b){c=l[x+1],d=l[x+2],p=l[x+3],f=l[x+4],g=l[x+5],m=l[x+6],A=l[x+7];break}}while(c=this.getBezierValue(n,x,1,b-2),d=this.getBezierValue(n,x,2,18+b-2),p=this.getBezierValue(n,x,3,36+b-2),f=this.getBezierValue(n,x,4,54+b-2),g=this.getBezierValue(n,x,5,72+b-2),m=this.getBezierValue(n,x,6,90+b-2),A=this.getBezierValue(n,x,7,108+b-2),0);1==i?(o.r=c,o.g=d,o.b=p,o.a=f,h.r=g,h.g=m,h.b=A):(0==a&&(u=t.data.color,o.r=u.r,o.g=u.g,o.b=u.b,o.a=u.a,_=t.data.darkColor,h.r=_.r,h.g=_.g,h.b=_.b),o.r+=(c-o.r)*i,o.g+=(d-o.g)*i,o.b+=(p-o.b)*i,o.a+=(f-o.a)*i,h.r+=(g-h.r)*i,h.g+=(m-h.g)*i,h.b+=(A-h.b)*i)}},__class__:Ca}),(e["spine.RGB2Timeline"]=Ma).__name__="spine.RGB2Timeline",Ma.__interfaces__=[la],Ma.__super__=oa,Ma.prototype=t(oa.prototype,{getFrameEntries:function(){return 7},apply:function(t,e,n,s,i,a,r){t=t.slots[this.slotIndex];if(t.bone.active){var l=this.frames,o=t.color,h=t.darkColor;if(n<l[0])return u=t.data.color,_=t.data.darkColor,0==a?(o.r=u.r,o.g=u.g,o.b=u.b,h.r=_.r,h.g=_.g,void(h.b=_.b)):void(1==a&&(o.r+=(u.r-o.r)*i,o.g+=(u.g-o.g)*i,o.b+=(u.b-o.b)*i,h.r+=(_.r-h.r)*i,h.g+=(_.g-h.g)*i,h.b+=(_.b-h.b)*i));var u,_,c=0,d=0,p=0,f=0,g=0,m=0,A=aa.searchWithStep(l,n,7),x=0|this.curves[A/7|0];do{if(0==x){var b=l[A],c=l[A+1],d=l[A+2],p=l[A+3],f=l[A+4],g=l[A+5],m=l[A+6],b=(n-b)/(l[A+7]-b);c+=(l[A+7+1]-c)*b,d+=(l[A+7+2]-d)*b,p+=(l[A+7+3]-p)*b,f+=(l[A+7+4]-f)*b,g+=(l[A+7+5]-g)*b,m+=(l[A+7+6]-m)*b;break}if(1==x){c=l[A+1],d=l[A+2],p=l[A+3],f=l[A+4],g=l[A+5],m=l[A+6];break}}while(c=this.getBezierValue(n,A,1,x-2|0),d=this.getBezierValue(n,A,2,18+x-2),p=this.getBezierValue(n,A,3,36+x-2),f=this.getBezierValue(n,A,4,54+x-2),g=this.getBezierValue(n,A,5,72+x-2),m=this.getBezierValue(n,A,6,90+x-2),0);1==i?(o.r=c,o.g=d,o.b=p,h.r=f,h.g=g,h.b=m):(0==a&&(u=t.data.color,_=t.data.darkColor,o.r=u.r,o.g=u.g,o.b=u.b,h.r=_.r,h.g=_.g,h.b=_.b),o.r+=(c-o.r)*i,o.g+=(d-o.g)*i,o.b+=(p-o.b)*i,h.r+=(f-h.r)*i,h.g+=(g-h.g)*i,h.b+=(m-h.b)*i)}},__class__:Ma}),(e["spine.AttachmentTimeline"]=Sa).__name__="spine.AttachmentTimeline",Sa.__interfaces__=[la],Sa.__super__=aa,Sa.prototype=t(aa.prototype,{getFrameCount:function(){return this.frames.length},apply:function(t,e,n,s,i,a,r){var l,o,h,u,_,c=t.slots[this.slotIndex];c.bone.active&&(1==r?0==a&&(o=null==(l=c.data.attachmentName)?null:t.getAttachment(this.slotIndex,l),c.attachment!=o)&&(o instanceof Ad&&c.attachment instanceof Ad&&(u=c.attachment,(null!=(h=o).deformAttachment?h.deformAttachment:h)==(null!=u.deformAttachment?u.deformAttachment:u))||(_=c.deform).splice(0,_.length),c.attachment=o,c.attachmentTime=c.bone.skeleton.time):n<this.frames[0]?0!=a&&1!=a||(o=null==(l=c.data.attachmentName)?null:t.getAttachment(this.slotIndex,l),c.attachment!=o&&(o instanceof Ad&&c.attachment instanceof Ad&&(h=o,u=c.attachment,(null!=h.deformAttachment?h.deformAttachment:h)==(null!=u.deformAttachment?u.deformAttachment:u))||(_=c.deform).splice(0,_.length),c.attachment=o,c.attachmentTime=c.bone.skeleton.time)):(o=null==(l=this.attachmentNames[aa.search(this.frames,n)])?null:t.getAttachment(this.slotIndex,l),c.attachment!=o&&(o instanceof Ad&&c.attachment instanceof Ad&&(h=o,u=c.attachment,(null!=h.deformAttachment?h.deformAttachment:h)==(null!=u.deformAttachment?u.deformAttachment:u))||(_=c.deform).splice(0,_.length),c.attachment=o,c.attachmentTime=c.bone.skeleton.time)))},__class__:Sa}),(e["spine.DeformTimeline"]=ka).__name__="spine.DeformTimeline",ka.__interfaces__=[la],ka.__super__=oa,ka.prototype=t(oa.prototype,{getFrameCount:function(){return this.frames.length},setBezier:function(t,e,n,s,i,a,r,l,o,h,u){for(var _=this.curves,c=this.frames.length+18*t,t=(0==n&&(_[e]=2+c),.03*(s-2*a+l)),n=.03*o-.06*r,d=.006*(3*(a-l)-s+h),p=.018*(r-o+.33333333),f=2*t+d,g=2*n+p,m=.3*(a-s)+t+.16666667*d,A=.3*r+n+.16666667*p,x=s+m,b=A,y=c+18;c<y;)_[c]=x,_[c+1]=b,m+=f,A+=g,f+=d,g+=p,x+=m,b+=A,c+=2},getCurvePercent:function(t,e){var n=this.curves,s=0|n[e],i=s;if(0==i)return(t-(l=this.frames[e]))/(this.frames[e+this.getFrameEntries()]-l);if(1==i)return 0;if(n[s-=2]>t)return l=this.frames[e],n[s+1]*(t-l)/(n[s]-l);var a=s+18;for(s+=2;s<a;){if(n[s]>=t)return l=n[s-2],(r=n[s-1])+(t-l)/(n[s]-l)*(n[s+1]-r);s+=2}var r,l=n[a-2];return(r=n[a-1])+(1-r)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)},apply:function(t,e,n,z,s,i,R){t=t.slots[this.slotIndex];if(t.bone.active){var a=t.attachment;if(!(!(a instanceof Ad)||(null!=(u=a).deformAttachment?u.deformAttachment:u)!=this.attachment)){var r=t.deform,t=(0==r.length&&(i=0),this.vertices),l=t[0].length,o=this.frames;if(n<o[0]){var h,u=a,_=i;if(0==_)r.splice(0,r.length);else if(1==_){if(1==s)return void r.splice(0,r.length);if(l<(h=r.length))r.splice(l,l-h);else if(h<l)for(;h<l;)r.push(0),++h;var c=r;if(null==u.bones)for(var d=u.vertices,p=0;p<l;)c[p]+=(d[p]-c[p])*s,++p;else{s=1-s;for(var f=0;f<l;)c[f]*=s,++f}}}else{if(l<(h=r.length))r.splice(l,l-h);else if(h<l)for(;h<l;)r.push(0),++h;c=r;if(n>=o[o.length-1]){var g=t[o.length-1];if(1==s)if(3==i)if(null==(u=a).bones)for(d=u.vertices,p=0;p<l;)c[p]+=g[p]-d[p],++p;else for(p=0;p<l;)c[p]+=g[p],++p;else zd.copy(g,0,c,0,l);else do{var m=i;if(0==m){if(null==(u=a).bones)for(d=u.vertices,p=0;p<l;){var A=d[p];c[p]=A+(g[p]-A)*s,++p}else for(f=0;f<l;)c[f]=g[f]*s,++f;break}if(1==m){for(var x=0;x<l;)c[x]+=(g[x]-c[x])*s,++x;break}if(2==m){for(var b=0;b<l;)c[b]+=(g[b]-c[b])*s,++b;break}if(3==m)if(null==(B=a).bones)for(var y=B.vertices,w=0;w<l;)c[w]+=(g[w]-y[w])*s,++w;else for(var v=0;v<l;)c[v]+=g[v]*s,++v}while(0)}else{var _=aa.search(o,n),C=this.getCurvePercent(n,_),M=t[_],S=t[_+1];if(1==s)if(3==i)if(null==(u=a).bones)for(d=u.vertices,p=0;p<l;){var k=M[p];c[p]+=k+(S[p]-k)*C-d[p],++p}else for(p=0;p<l;){k=M[p];c[p]+=k+(S[p]-k)*C,++p}else for(p=0;p<l;){k=M[p];c[p]=k+(S[p]-k)*C,++p}else do{var B,I=i;if(0==I){if(null==(u=a).bones)for(d=u.vertices,p=0;p<l;){k=M[p],A=d[p];c[p]=A+(k+(S[p]-k)*C-A)*s,++p}else for(f=0;f<l;){var T=M[f];c[f]=(T+(S[f]-T)*C)*s,++f}break}if(1==I){for(x=0;x<l;){var F=M[x];c[x]+=(F+(S[x]-F)*C-c[x])*s,++x}break}if(2==I){for(b=0;b<l;){var D=M[b];c[b]+=(D+(S[b]-D)*C-c[b])*s,++b}break}if(3==I)if(null==(B=a).bones)for(y=B.vertices,w=0;w<l;){var E=M[w];c[w]+=(E+(S[w]-E)*C-y[w])*s,++w}else for(v=0;v<l;){var P=M[v];c[v]+=(P+(S[v]-P)*C)*s,++v}}while(0)}}}}},__class__:ka}),(e["spine.EventTimeline"]=Ba).__name__="spine.EventTimeline",Ba.__super__=aa,Ba.prototype=t(aa.prototype,{getFrameCount:function(){return this.frames.length},apply:function(t,e,n,s,i,a,r){if(null!=s){var l=this.frames,o=l.length;if(n<e)this.apply(t,e,999999999,s,i,a,r),e=-1;else if(e>=l[o-1])return;if(!(n<l[0])){var h=0;if(e<l[0])h=0;else for(var u=l[h=aa.search(l,e)+1];0<h&&l[h-1]==u;)--h;for(;h<o&&n>=l[h];)s.push(this.events[h]),++h}}},__class__:Ba}),(e["spine.DrawOrderTimeline"]=Ia).__name__="spine.DrawOrderTimeline",Ia.__super__=aa,Ia.prototype=t(aa.prototype,{getFrameCount:function(){return this.frames.length},apply:function(t,e,n,s,i,a,r){if(1==r)0==a&&zd.copy(t.slots,0,t.drawOrder,0,t.slots.length);else if(n<this.frames[0])0!=a&&1!=a||zd.copy(t.slots,0,t.drawOrder,0,t.slots.length);else{var l=this.drawOrders[aa.search(this.frames,n)];if(null==l)zd.copy(t.slots,0,t.drawOrder,0,t.slots.length);else for(var o=t.slots,h=t.drawOrder,u=0,_=l.length;u<_;)h[u]=o[l[u]],++u}},__class__:Ia}),(e["spine.IkConstraintTimeline"]=Ta).__name__="spine.IkConstraintTimeline",Ta.__super__=oa,Ta.prototype=t(oa.prototype,{getFrameEntries:function(){return 6},apply:function(t,e,n,s,i,a,r){t=t.ikConstraints[this.ikConstraintIndex];if(t.active){var l=this.frames;if(n<l[0])return 0==a?(t.mix=t.data.mix,t.softness=t.data.softness,t.bendDirection=t.data.bendDirection,t.compress=t.data.compress,void(t.stretch=t.data.stretch)):void(1==a&&(t.mix+=(t.data.mix-t.mix)*i,t.softness+=(t.data.softness-t.softness)*i,t.bendDirection=t.data.bendDirection,t.compress=t.data.compress,t.stretch=t.data.stretch));var o=0,h=0,u=aa.searchWithStep(l,n,6),_=0|this.curves[u/6|0];do{if(0==_){var c=l[u],o=l[u+1],h=l[u+2],c=(n-c)/(l[u+6]-c);o+=(l[u+6+1]-o)*c,h+=(l[u+6+2]-h)*c;break}if(1==_){o=l[u+1],h=l[u+2];break}}while(o=this.getBezierValue(n,u,1,_-2|0),h=this.getBezierValue(n,u,2,18+_-2),0);0==a?(t.mix=t.data.mix+(o-t.data.mix)*i,t.softness=t.data.softness+(h-t.data.softness)*i,1==r?(t.bendDirection=t.data.bendDirection,t.compress=t.data.compress,t.stretch=t.data.stretch):(t.bendDirection=0|l[u+3],t.compress=0!=l[u+4],t.stretch=0!=l[u+5])):(t.mix+=(o-t.mix)*i,t.softness+=(h-t.softness)*i,0==r&&(t.bendDirection=0|l[u+3],t.compress=0!=l[u+4],t.stretch=0!=l[u+5]))}},__class__:Ta}),(e["spine.TransformConstraintTimeline"]=Fa).__name__="spine.TransformConstraintTimeline",Fa.__super__=oa,Fa.prototype=t(oa.prototype,{getFrameEntries:function(){return 7},apply:function(t,e,n,s,i,a,r){t=t.transformConstraints[this.transformConstraintIndex];if(t.active){var l=this.frames;if(n<l[0])return o=t.data,0==a?(t.mixRotate=o.mixRotate,t.mixX=o.mixX,t.mixY=o.mixY,t.mixScaleX=o.mixScaleX,t.mixScaleY=o.mixScaleY,void(t.mixShearY=o.mixShearY)):void(1==a&&(t.mixRotate+=(o.mixRotate-t.mixRotate)*i,t.mixX+=(o.mixX-t.mixX)*i,t.mixY+=(o.mixY-t.mixY)*i,t.mixScaleX+=(o.mixScaleX-t.mixScaleX)*i,t.mixScaleY+=(o.mixScaleY-t.mixScaleY)*i,t.mixShearY+=(o.mixShearY-t.mixShearY)*i));var o,h=0,u=0,_=0,c=0,d=0,p=0,f=aa.searchWithStep(l,n,7),g=0|this.curves[f/7|0];do{if(0==g){var m=l[f],h=l[f+1],u=l[f+2],_=l[f+3],c=l[f+4],d=l[f+5],p=l[f+6],m=(n-m)/(l[f+7]-m);h+=(l[f+7+1]-h)*m,u+=(l[f+7+2]-u)*m,_+=(l[f+7+3]-_)*m,c+=(l[f+7+4]-c)*m,d+=(l[f+7+5]-d)*m,p+=(l[f+7+6]-p)*m;break}if(1==g){h=l[f+1],u=l[f+2],_=l[f+3],c=l[f+4],d=l[f+5],p=l[f+6];break}}while(h=this.getBezierValue(n,f,1,g-2|0),u=this.getBezierValue(n,f,2,18+g-2),_=this.getBezierValue(n,f,3,36+g-2),c=this.getBezierValue(n,f,4,54+g-2),d=this.getBezierValue(n,f,5,72+g-2),p=this.getBezierValue(n,f,6,90+g-2),0);0==a?(o=t.data,t.mixRotate=o.mixRotate+(h-o.mixRotate)*i,t.mixX=o.mixX+(u-o.mixX)*i,t.mixY=o.mixY+(_-o.mixY)*i,t.mixScaleX=o.mixScaleX+(c-o.mixScaleX)*i,t.mixScaleY=o.mixScaleY+(d-o.mixScaleY)*i,t.mixShearY=o.mixShearY+(p-o.mixShearY)*i):(t.mixRotate+=(h-t.mixRotate)*i,t.mixX+=(u-t.mixX)*i,t.mixY+=(_-t.mixY)*i,t.mixScaleX+=(c-t.mixScaleX)*i,t.mixScaleY+=(d-t.mixScaleY)*i,t.mixShearY+=(p-t.mixShearY)*i)}},__class__:Fa}),(e["spine.PathConstraintPositionTimeline"]=Da).__name__="spine.PathConstraintPositionTimeline",Da.__super__=ha,Da.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){t=t.pathConstraints[this.pathConstraintIndex];if(t.active)return n<this.frames[0]?0==a?void(t.position=t.data.position):void(1==a&&(t.position+=(t.data.position-t.position)*i)):(n=this.getCurveValue(n),void(0==a?t.position=t.data.position+(n-t.data.position)*i:t.position+=(n-t.position)*i))},__class__:Da}),(e["spine.PathConstraintSpacingTimeline"]=Ea).__name__="spine.PathConstraintSpacingTimeline",Ea.__super__=ha,Ea.prototype=t(ha.prototype,{apply:function(t,e,n,s,i,a,r){t=t.pathConstraints[this.pathConstraintIndex];if(t.active)return n<this.frames[0]?0==a?void(t.spacing=t.data.spacing):void(1==a&&(t.spacing+=(t.data.spacing-t.spacing)*i)):(n=this.getCurveValue(n),void(0==a?t.spacing=t.data.spacing+(n-t.data.spacing)*i:t.spacing+=(n-t.spacing)*i))},__class__:Ea}),(e["spine.PathConstraintMixTimeline"]=Pa).__name__="spine.PathConstraintMixTimeline",Pa.__super__=oa,Pa.prototype=t(oa.prototype,{getFrameEntries:function(){return 4},apply:function(t,e,n,s,i,a,r){t=t.pathConstraints[this.pathConstraintIndex];if(t.active){var l=this.frames;if(n<l[0])return o=t.data,0==a?(t.mixRotate=o.mixRotate,t.mixX=o.mixX,void(t.mixY=o.mixY)):void(1==a&&(t.mixRotate+=(o.mixRotate-t.mixRotate)*i,t.mixX+=(o.mixX-t.mixX)*i,t.mixY+=(o.mixY-t.mixY)*i));var o,h=0,u=0,_=0,c=aa.searchWithStep(l,n,4),d=0|this.curves[c>>2];do{if(0==d){var p=l[c],h=l[c+1],u=l[c+2],_=l[c+3],p=(n-p)/(l[c+4]-p);h+=(l[c+4+1]-h)*p,u+=(l[c+4+2]-u)*p,_+=(l[c+4+3]-_)*p;break}if(1==d){h=l[c+1],u=l[c+2],_=l[c+3];break}}while(h=this.getBezierValue(n,c,1,d-2),u=this.getBezierValue(n,c,2,18+d-2),_=this.getBezierValue(n,c,3,36+d-2),0);0==a?(o=t.data,t.mixRotate=o.mixRotate+(h-o.mixRotate)*i,t.mixX=o.mixX+(u-o.mixX)*i,t.mixY=o.mixY+(_-o.mixY)*i):(t.mixRotate+=(h-t.mixRotate)*i,t.mixX+=(u-t.mixX)*i,t.mixY+=(_-t.mixY)*i)}},__class__:Pa}),(e["spine.support.error.Error"]=za).__name__="spine.support.error.Error",za.prototype={toString:function(){return null!=this.message?this.message:"Error"},__class__:za},function(t){za.call(this,t=null==t?"":t),this.name="IllegalArgumentException"}),sd=((e["spine.support.error.IllegalArgumentException"]=$n).__name__="spine.support.error.IllegalArgumentException",$n.__super__=za,$n.prototype=t(za.prototype,{__class__:$n}),function(t){if(this.trackEntryPool=new ad,this.unkeyedState=0,this.timeScale=1,this.animationsChanged=!1,this.propertyIds=[],this.queue=null,this.listeners=new Ud,this.events=[],this.tracks=[],this.queue=new id,this.queue.AnimationState_this=this,null==t)throw tr.thrown(new $n("data cannot be null."));this.data=t}),id=((e["spine.AnimationState"]=sd).__name__="spine.AnimationState",sd.prototype={updateMixingFrom:function(t,e){var n,s,i=t.mixingFrom;return null==i||(n=this.updateMixingFrom(i,e),i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,(s=this.queue).objects.push(2),s.objects.push(i),s.AnimationState_this.animationsChanged=!0),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1))},apply:function(t){if(null==t)throw tr.thrown(new $n("skeleton cannot be null."));if(this.animationsChanged){this.animationsChanged=!1;(T=this.propertyIds).splice(0,T.length);for(var e=this.tracks.length,R=this.tracks,n=0;n<e;){var s=D=R[n];if(null==D);else{for(;null!=s.mixingFrom;)s=s.mixingFrom;for(;;){if(null==s.mixingTo||3!=s.mixBlend){var i=s.mixingTo,a=s.animation.timelines,r=s.animation.timelines.length;if(r<(b=(T=s.timelineMode).length))T.splice(r,r-b);else if(b<r)for(;b<r;)T.push(0),++b;var l=T,o=s.timelineHoldMix,o=(o.splice(0,o.length),s.timelineHoldMix),V=o.length,Q=(r<V?o.splice(r,r-V):V<r&&(o[r-1]=null),o),O=this.propertyIds;if(null!=i&&i.holdPrevious)for(var h=0;h<r;)l[h]=Od.addAll(O,a[h].getPropertyIds())?3:2,++h;else for(;;){for(var u=0,_=0;_<r;){var L=(z=a[_]).getPropertyIds();if(Od.addAll(O,L))if(null==i||z instanceof Sa||z instanceof Ia||z instanceof Ba||!i.animation.hasTimeline(L))l[_]=1;else{for(var c=i.mixingTo;null!=c;){if(!c.animation.hasTimeline(L)){if(0<c.mixDuration){l[_]=4,Q[_]=c,u=2;break}break}c=c.mixingTo}if(2==u){u=0,++_;continue}if(1<=u)break;l[_]=3}else l[_]=0;++_}if(0==u)break}}if(null==(s=s.mixingTo))break}}++n}}for(var U=this.events,N=!1,R=this.tracks,n=0,e=this.tracks.length;n<e;){if(null==(D=R[n])||0<D.delay);else{var d,N=!0,p=0==n?1:D.mixBlend,f=D.alpha,G=(null!=D.mixingFrom?f*=this.applyMixingFrom(D,t,p):D.trackTime>=D.trackEnd&&null==D.next&&(f=0),D.animationLast),g=d=D.loop?0==(d=D.animationEnd-D.animationStart)?D.animationStart:D.trackTime%d+D.animationStart:Math.min(D.trackTime+D.animationStart,D.animationEnd),X=U,m=(D.reverse&&(g=D.animation.duration-g,X=null),D.animation.timelines.length),a=D.animation.timelines;if(0==n&&1==f||3==p)for(var A=0;A<m;){var x,Y=a[A];Y instanceof Sa?(x=t.slots[(z=Y).slotIndex]).bone.active&&(g<z.frames[0]?0!=p&&1!=p||this.setAttachment(t,x,x.data.attachmentName,!0):this.setAttachment(t,x,z.attachmentNames[aa.search(z.frames,g)],!0),x.attachmentState<=this.unkeyedState)&&(x.attachmentState=this.unkeyedState+1):Y.apply(t,G,g,X,f,p,0),++A}else{var l=D.timelineMode,W=D.timelinesRotation.length!=m<<1;if(W){var b,y=m<<1;if(y<(b=(T=D.timelinesRotation).length))T.splice(y,y-b);else if(b<y)for(;b<y;)T.push(0),++b}for(var j=D.timelinesRotation,w=0;w<m;){var v,C,M=a[w],H=0==l[w]?p:0;M instanceof _a?this.applyRotateTimeline(M,t,g,f,H,j,w<<1,W):M instanceof Sa?(C=t.slots[(v=M).slotIndex]).bone.active&&(g<v.frames[0]?0!=p&&1!=p||this.setAttachment(t,C,C.data.attachmentName,!0):this.setAttachment(t,C,v.attachmentNames[aa.search(v.frames,g)],!0),C.attachmentState<=this.unkeyedState)&&(C.attachmentState=this.unkeyedState+1):M.apply(t,G,g,X,f,H,0),++w}}for(var Z=D.animationStart,S=D.animationEnd,k=S-Z,q=D.trackLast%k,K=this.events,h=0,J=this.events.length;h<J;){var $=K[h];if($.time<q)break;$.time>S?++h:((I=this.queue).objects.push(5),I.objects.push(D),I.objects.push($),++h)}for((D.loop?0==k||q>D.trackTime%k:S<=d&&D.animationLast<S)&&((k=this.queue).objects.push(4),k.objects.push(D));h<J;){var tt,et=K[h];et.time<Z?++h:((tt=this.queue).objects.push(5),tt.objects.push(D),tt.objects.push(et),++h)}U.splice(0,U.length),D.nextAnimationLast=d,D.nextTrackLast=D.trackTime}++n}for(var B,I,nt=this.unkeyedState+1,st=t.slots,n=0,e=t.slots.length;n<e;)(D=st[n]).attachmentState==nt&&(B=null==(B=D.data.attachmentName)?null:t.getAttachment(D.data.index,B),D.attachment!=B)&&(B instanceof Ad&&D.attachment instanceof Ad&&(M=D.attachment,(null!=(z=B).deformAttachment?z.deformAttachment:z)==(null!=M.deformAttachment?M.deformAttachment:M))||(T=D.deform).splice(0,T.length),D.attachment=B,D.attachmentTime=D.bone.skeleton.time),++n;if(this.unkeyedState+=2,!(I=this.queue).drainDisabled){I.drainDisabled=!0;for(var T,it=I.AnimationState_this.listeners,n=0;n<I.objects.length;){var F=I.objects[n],D=I.objects[n+1],E=it.array.length,P=it.begin();do{if(0==F){null!=D.listener&&D.listener.start(D);for(A=0;A<E;)P[A].start(D),++A;break}if(1==F){null!=D.listener&&D.listener.interrupt(D);for(w=0;w<E;)P[w].interrupt(D),++w;break}if(2==F){null!=D.listener&&D.listener.end(D);for(var at=0;at<E;)P[at].end(D),++at;null!=D.listener&&D.listener.dispose(D);for(var rt=0;rt<E;)P[rt].dispose(D),++rt;I.AnimationState_this.trackEntryPool.free(D);break}if(3==F){null!=D.listener&&D.listener.dispose(D);for(var lt=0;lt<E;)P[lt].dispose(D),++lt;I.AnimationState_this.trackEntryPool.free(D);break}if(4==F){null!=D.listener&&D.listener.complete(D);for(var ot=0;ot<E;)P[ot].complete(D),++ot;break}if(5==F){for(var z=I.objects[2+n++],ht=(null!=D.listener&&D.listener.event(D,z),0);ht<E;)P[ht].event(D,z),++ht;break}}while(0);it.end(),n+=2}(T=I.objects).splice(0,T.length),I.drainDisabled=!1}return N},applyMixingFrom:function(t,e,n){var s,i=t.mixingFrom,a=(null!=i.mixingFrom&&this.applyMixingFrom(i,e,n),0),r=(0==t.mixDuration?(a=1)==n&&(n=0):(1<(a=t.mixTime/t.mixDuration)&&(a=1),1!=n&&(n=i.mixBlend)),a<i.attachmentThreshold),l=a<i.drawOrderThreshold,o=i.animation.timelines.length,h=i.animation.timelines,u=i.alpha*t.interruptAlpha,_=u*(1-a),c=i.animationLast,d=s=i.loop?0==(D=i.animationEnd-i.animationStart)?i.animationStart:i.trackTime%D+i.animationStart:Math.min(i.trackTime+i.animationStart,i.animationEnd),p=null;if(i.reverse?d=i.animation.duration-d:a<i.eventThreshold&&(p=this.events),3==n)for(var f=0;f<o;)h[f].apply(e,c,d,p,_,n,1),++f;else{var g=i.timelineMode,m=i.timelineHoldMix,A=i.timelinesRotation.length!=o<<1;if(A){var x,b=o<<1,y=(x=i.timelinesRotation).length;if(b<y)x.splice(b,b-y);else if(y<b)for(;y<b;)x.push(0),++y}for(var R=i.timelinesRotation,f=i.totalAlpha=0;f<o;){for(var w,v,C=h[f],M=1,S=0,k=0,B=!1;;){var I=g[f];if(0==I){if(!l&&C instanceof Ia){B=!0;break}S=n,k=_;break}if(1==I){S=0,k=_;break}if(2==I){S=n,k=u;break}if(3==I){S=0,k=u;break}S=0,I=m[f],k=u*Math.max(0,1-I.mixTime/I.mixDuration);break}B?++f:(i.totalAlpha+=k,C instanceof _a?this.applyRotateTimeline(C,e,d,k,S,R,f<<1,A):C instanceof Sa?(v=e.slots[(w=C).slotIndex]).bone.active&&(d<w.frames[0]?0!=S&&1!=S||this.setAttachment(e,v,v.data.attachmentName,r):this.setAttachment(e,v,w.attachmentNames[aa.search(w.frames,d)],r),v.attachmentState<=this.unkeyedState)&&(v.attachmentState=this.unkeyedState+1):C.apply(e,c,d,p,k,S,M=l&&C instanceof Ia&&0==S?0:M),++f)}}if(0<t.mixDuration){for(var T=i.animationStart,F=i.animationEnd,D=F-T,E=i.trackLast%D,p=this.events,f=0,P=this.events.length;f<P;){if((C=p[f]).time<E)break;C.time>F?++f:((z=this.queue).objects.push(5),z.objects.push(i),z.objects.push(C),++f)}var z;for((i.loop?0==D||E>i.trackTime%D:F<=s&&i.animationLast<F)&&((z=this.queue).objects.push(4),z.objects.push(i));f<P;)(C=p[f]).time<T?++f:((z=this.queue).objects.push(5),z.objects.push(i),z.objects.push(C),++f)}return(x=this.events).splice(0,x.length),i.nextAnimationLast=s,i.nextTrackLast=i.trackTime,a},setAttachment:function(t,e,n,s){t=null==n?null:t.getAttachment(e.data.index,n);e.attachment!=t&&(t instanceof Ad&&e.attachment instanceof Ad&&(n=e.attachment,(null!=t.deformAttachment?t.deformAttachment:t)==(null!=n.deformAttachment?n.deformAttachment:n))||(n=e.deform).splice(0,n.length),e.attachment=t,e.attachmentTime=e.bone.skeleton.time),s&&(e.attachmentState=this.unkeyedState+2)},applyRotateTimeline:function(t,e,n,s,i,a,r,l){if(l&&(a[r]=0),1==s)t.apply(e,0,n,null,1,i,0);else{e=e.bones[t.boneIndex];if(e.active){var o=0,h=0;if(n<t.frames[0]){if(0==i)return void(e.rotation=e.data.rotation);if(1!=i)return;o=e.rotation,h=e.data.rotation}else o=(0==i?e.data:e).rotation,h=e.data.rotation+t.getCurveValue(n);var u,i=0,t=h-o;0==(t-=360*(16384-(16384.499999999996-t/360|0)))?i=a[r]:(h=n=0,h=l?(n=0,t):(n=a[r],a[r+1]),l=0<=n,(0<h?1:h<0?-1:0)!=((u=0<t)?1:t<0?-1:0)&&Math.abs(h)<=90&&(180<Math.abs(n)&&(n+=360*(0<n?1:n<0?-1:0)),l=u),i=t+n-n%360,l!=u&&(i+=360*(0<n?1:n<0?-1:0)),a[r]=i),a[r+1]=t,e.rotation=o+i*s}}},__class__:sd},(e["spine.support.utils.Poolable"]=Ra).__name__="spine.support.utils.Poolable",Ra.__isInterface__=!0,Ra.prototype={__class__:Ra},(e["spine.TrackEntry"]=Va).__name__="spine.TrackEntry",Va.__interfaces__=[Ra],Va.prototype={reset:function(){this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null;var t=this.timelineMode;t.splice(0,t.length),(t=this.timelineHoldMix).splice(0,t.length),(t=this.timelinesRotation).splice(0,t.length)},__class__:Va},function(){this.drainDisabled=!1,this.objects=[]}),ad=((e["spine.EventQueue"]=id).__name__="spine.EventQueue",id.prototype={__class__:id},(e["spine.support.utils.Pool"]=Qa).__name__="spine.support.utils.Pool",Qa.prototype={free:function(t){if(null==t)throw tr.thrown(new $n("object cannot be null."));this.freeObjects.length<this.max&&(this.freeObjects.push(t),this.peak=Math.max(this.peak,this.freeObjects.length)),this.reset(t)},reset:function(t){er.__implements(t,Ra)&&er.__cast(t,Ra).reset()},freeAll:function(t){if(null==t)throw tr.thrown(new $n("objects cannot be null."));for(var e=this.freeObjects,n=this.max,s=0;s<t.length;){var i=t[s];null==i?++s:(e.length<n&&e.push(i),this.reset(i),++s)}this.peak=Math.max(this.peak,e.length)},newObject:function(){return null},obtain:function(){return 0==this.freeObjects.length?this.newObject():this.freeObjects.pop()},__class__:Qa},function(t,e){Qa.call(this,t,e)}),rd=((e["spine._AnimationState.TrackEntryPool"]=ad).__name__="spine._AnimationState.TrackEntryPool",ad.__super__=Qa,ad.prototype=t(Qa.prototype,{newObject:function(){return new Va},__class__:ad}),function(t){if(this.defaultMix=0,this.tempAnimationStateDataKey=new ld,this.animationToMixTime=new fl,null==t)throw tr.thrown(new $n("skeletonData cannot be null."));this.skeletonData=t}),ld=((e["spine.AnimationStateData"]=rd).__name__="spine.AnimationStateData",rd.prototype={__class__:rd},function(){this.a2=null}),od=((e["spine.AnimationStateDataKey"]=ld).__name__="spine.AnimationStateDataKey",ld.prototype={getHashCode:function(){return 31*(31+this.a1.hashCode)+this.a2.hashCode},equals:function(t){if(this!=t){if(null==t)return!1;if(null==this.a1){if(null!=t.a1)return!1}else if(this.a1!=t.a1)return!1;if(null==this.a2){if(null!=t.a2)return!1}else if(this.a2!=t.a2)return!1}return!0},__class__:ld},(e["spine.Updatable"]=Oa).__name__="spine.Updatable",Oa.__isInterface__=!0,Oa.prototype={__class__:Oa},(e["spine.Bone"]=La).__name__="spine.Bone",La.__interfaces__=[Oa],La.prototype={update:function(){this.updateWorldTransformWithData(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},updateWorldTransformWithData:function(t,e,n,s,i,a,r){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=s,this.ascaleY=i,this.ashearX=a,this.ashearY=r;var l,o,h,u=this.parent;if(null==u)f=n+90+r,o=(l=this.skeleton).scaleX,h=l.scaleY,this.a=Math.cos((n+a)*Ai.degRad)*s*o,this.b=Math.cos(f*Ai.degRad)*i*o,this.c=Math.sin((n+a)*Ai.degRad)*s*h,this.d=Math.sin(f*Ai.degRad)*i*h,this.worldX=t*o+l.x,this.worldY=e*h+l.y;else{var _=u.a,c=u.b,d=u.c,p=u.d;this.worldX=_*t+c*e+u.worldX,this.worldY=d*t+p*e+u.worldY;do{var f,g=this.data.transformMode;if(0==g)return f=n+90+r,m=Math.cos((n+a)*Ai.degRad)*s,x=Math.cos(f*Ai.degRad)*i,A=Math.sin((n+a)*Ai.degRad)*s,b=Math.sin(f*Ai.degRad)*i,this.a=_*m+c*A,this.b=_*x+c*b,this.c=d*m+p*A,void(this.d=d*x+p*b);if(1==g){var m=n+90+r;this.a=Math.cos((n+a)*Ai.degRad)*s,this.b=Math.cos(m*Ai.degRad)*i,this.c=Math.sin((n+a)*Ai.degRad)*s,this.d=Math.sin(m*Ai.degRad)*i;break}if(2==g){var A=_*_+d*d,x=0,b=n+a-(x=1e-4<A?(A=Math.abs(_*p-c*d)/A,_/=this.skeleton.scaleX,c=(d/=this.skeleton.scaleY)*A,p=_*A,Math.atan2(d,_)*Ai.radDeg):(d=_=0,90-Math.atan2(p,c)*Ai.radDeg)),y=n+r-x+90,w=Math.cos(b*Ai.degRad)*s,v=Math.cos(y*Ai.degRad)*i,C=Math.sin(b*Ai.degRad)*s,y=Math.sin(y*Ai.degRad)*i;this.a=_*w-c*C,this.b=_*v-c*y,this.c=d*w+p*C,this.d=d*v+p*y;break}if(3==g){var w=Math.cos(n*Ai.degRad),C=Math.sin(n*Ai.degRad),v=(_*w+c*C)/this.skeleton.scaleX,y=(d*w+p*C)/this.skeleton.scaleY,M=Math.sqrt(v*v+y*y),S=(v*=M=1e-5<M?1/M:M,y*=M,M=Math.sqrt(v*v+y*y),3==this.data.transformMode&&_*p-c*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(M=-M),1.57079635+Math.atan2(y,v)),k=Math.cos(S)*M,S=Math.sin(S)*M,M=Math.cos(a*Ai.degRad)*s,B=Math.cos((90+r)*Ai.degRad)*i,I=Math.sin(a*Ai.degRad)*s,T=Math.sin((90+r)*Ai.degRad)*i;this.a=v*M+k*I,this.b=v*B+k*T,this.c=y*M+S*I,this.d=y*B+S*T;break}if(4==g){var k=Math.cos(n*Ai.degRad),M=Math.sin(n*Ai.degRad),I=(_*k+c*M)/this.skeleton.scaleX,B=(d*k+p*M)/this.skeleton.scaleY,S=Math.sqrt(I*I+B*B),T=(I*=S=1e-5<S?1/S:S,B*=S,S=Math.sqrt(I*I+B*B),3==this.data.transformMode&&_*p-c*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S),1.57079635+Math.atan2(B,I)),g=Math.cos(T)*S,F=Math.sin(T)*S,D=Math.cos(a*Ai.degRad)*s,E=Math.cos((90+r)*Ai.degRad)*i,P=Math.sin(a*Ai.degRad)*s,z=Math.sin((90+r)*Ai.degRad)*i;this.a=I*D+g*P,this.b=I*E+g*z,this.c=B*D+F*P,this.d=B*E+F*z;break}}while(0);this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},__class__:La},(e["spine.BoneData"]=Ua).__name__="spine.BoneData",Ua.prototype={__class__:Ua},(e["spine.ConstraintData"]=Na).__name__="spine.ConstraintData",Na.prototype={__class__:Na},(e["spine.Event"]=Ga).__name__="spine.Event",Ga.prototype={__class__:Ga},(e["spine.EventData"]=Xa).__name__="spine.EventData",Xa.prototype={__class__:Xa},(e["spine.IkConstraint"]=Ya).__name__="spine.IkConstraint",Ya.__interfaces__=[Oa],Ya.applyOne=function(t,e,n,s,i,a,r){if(null==t)throw tr.thrown(new $n("bone cannot be null."));var l=t.parent,o=l.a,h=l.b,u=l.c,_=l.d,c=-t.ashearX-t.arotation,d=0,p=0;do{var f,g,m=t.data.transformMode;if(1==m){d=e-t.worldX,p=n-t.worldY;break}}while(p=2==m?(b=Math.abs(o*_-h*u)/(o*o+u*u),m=o/t.skeleton.scaleX,h=-(f=u/t.skeleton.scaleY)*b*t.skeleton.scaleX,_=m*b*t.skeleton.scaleY,c+=Math.atan2(f,m)*Ai.radDeg,d=((f=e-l.worldX)*_-(m=n-l.worldY)*h)/(g=o*_-h*u)-t.ax,(m*o-f*u)/g-t.ay):(d=((m=e-l.worldX)*_-(f=n-l.worldY)*h)/(g=o*_-h*u)-t.ax,(f*o-m*u)/g-t.ay),0);c+=Math.atan2(p,d)*Ai.radDeg,t.ascaleX<0&&(c+=180),180<c?c-=360:c<-180&&(c+=360);var A,x,b,y=t.ascaleX,w=t.ascaleY;(s||i)&&(3!=(A=t.data.transformMode)&&4!=A||(d=e-t.worldX,p=n-t.worldY),A=t.data.length*y,x=Math.sqrt(d*d+p*p),s&&x<A||i&&A<x&&1e-4<A)&&(y*=b=(x/A-1)*r+1,a)&&(w*=b),t.updateWorldTransformWithData(t.ax,t.ay,t.arotation+c*r,y,w,t.ashearX,t.ashearY)},Ya.apply=function(t,e,n,s,i,R,V,a,r){if(null==t)throw tr.thrown(new $n("parent cannot be null."));if(null==e)throw tr.thrown(new $n("child cannot be null."));var Q=t.ax,O=t.ay,l=t.ascaleX,o=t.ascaleY,L=l,U=o,h=e.ascaleX,N=0,G=0,u=0,u=l<0?(l=-l,N=180,-1):(N=0,1),G=(o<0&&(o=-o,u=-u),h<0?(h=-h,180):0),_=e.ax,c=0,d=0,p=0,f=t.a,g=t.b,m=t.c,A=t.d,X=Math.abs(l-o)<=1e-4,p=!X||R?(c=0,d=f*_+t.worldX,m*_+t.worldY):(d=f*_+g*(c=e.ay)+t.worldX,m*_+A*c+t.worldY),x=t.parent,b=(f=x.a,g=x.b,m=x.c,1/(f*(A=x.d)-g*m)),d=((M=d-x.worldX)*A-(S=p-x.worldY)*g)*b-Q,p=(S*f-M*m)*b-O,y=Math.sqrt(d*d+p*p),w=e.data.length*h,v=0,C=0;if(y<1e-4)Ya.applyOne(t,n,s,!1,R,!1,r),e.updateWorldTransformWithData(_,c,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);else{var M,S,k=((M=n-x.worldX)*A-(S=s-x.worldY)*g)*b-Q,B=(S*f-M*m)*b-O,I=k*k+B*B;0!=a&&(a*=l*(h+1)*.5,0<(p=(d=Math.sqrt(I))-y-w*l+a))&&(I=(k-=(n=(p-a*(1-(n=Math.min(1,p/(2*a))-1)*n))/d)*k)*k+(B-=n*B)*B);do{if(X){var T=(I-y*y-(w*=l)*w)/(2*y*w);T<-1?(T=-1,C=3.1415927*i):1<T?(T=1,C=0,R&&(L*=f=(Math.sqrt(I)/(y+w)-1)*r+1,V)&&(U*=f)):C=Math.acos(T)*i,f=y+w*T,g=w*Math.sin(C),v=Math.atan2(B*f-k*g,k*f+B*g)}else{var T=(f=l*w)*f,F=(g=o*w)*g,Y=Math.atan2(B,k),D=-2*F*y,E=F-T;if(0<=(A=D*D-4*E*(m=F*y*y+T*I-T*F))){var P=Math.sqrt(A),D=(P=.5*-(D+(P=D<0?-P:P)))/E,E=m/P,P=Math.abs(D)<Math.abs(E)?D:E;if(P*P<=I){S=Math.sqrt(I-P*P)*i,v=Y-Math.atan2(S,P),C=Math.atan2(S/o,(P-y)/l);break}}var D=3.1415927,E=y-f,P=E*E,W=0,j=0,z=y+f,H=z*z,Z=0;-1<=(m=-f*y/(T-F))&&m<=1&&(m=Math.acos(m),(A=(M=f*Math.cos(m)+y)*M+(S=g*Math.sin(m))*S)<P&&(D=m,P=A,E=M,W=S),H<A)&&(j=m,H=A,z=M,Z=S),C=I<=.5*(P+H)?(v=Y-Math.atan2(W*i,E),D*i):(v=Y-Math.atan2(Z*i,z),j*i)}}while(0);s=Math.atan2(c,_)*u,x=t.arotation;180<(v=(v-s)*Ai.radDeg+N-x)?v-=360:v<-180&&(v+=360),t.updateWorldTransformWithData(Q,O,x+v*r,L,U,0,0),x=e.arotation,180<(C=((C+s)*Ai.radDeg-e.ashearX)*u+G-x)?C-=360:C<-180&&(C+=360),e.updateWorldTransformWithData(_,c,x+C*r,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},Ya.prototype={update:function(){if(0!=this.mix){var t=this.target,e=this.bones;do{var n=this.bones.length;if(1==n){Ya.applyOne(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break}if(2==n){Ya.apply(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}while(0)}},__class__:Ya},(e["spine.IkConstraintData"]=Wa).__name__="spine.IkConstraintData",Wa.__super__=Na,Wa.prototype=t(Na.prototype,{__class__:Wa}),(e["spine.PathConstraint"]=ja).__name__="spine.PathConstraint",ja.__interfaces__=[Oa],ja.prototype={update:function(){var R=this.target.attachment;if(R instanceof wd){var V=this.mixRotate,Q=this.mixX,O=this.mixY;if(0!=V||0!=Q||0!=O){var L=this.data,U=0==L.rotateMode,N=2==L.rotateMode,G=this.bones.length,t=U?G:G+1,X=this.bones;if(t<(w=(y=this.spaces).length))y.splice(t,t-w);else if(w<t)for(;w<t;)y.push(0),++w;var Y,W=y;if(N){if(G<(w=(y=this.lengths).length))y.splice(G,G-w);else if(w<G)for(;w<G;)y.push(0),++w;Y=y}else Y=null;var j=this.spacing;do{var H=L.spacingMode;if(2==H){if(N)for(var e=0,n=t-1;e<n;){var Z=(s=X[e]).data.length;Z<ja.epsilon?Y[e]=0:(M=Z*s.a,Rt=Z*s.c,Y[e]=Math.sqrt(M*M+Rt*Rt)),++e}Vd.fill(W,1,t,j);break}if(3==H){for(var q=0,K=0,J=t-1;K<J;){var $=(D=X[K]).data.length;$<ja.epsilon?(N&&(Y[K]=0),W[++K]=j):(_=$*D.a,c=$*D.c,hi=Math.sqrt(_*_+c*c),N&&(Y[K]=hi),q+=W[++K]=hi)}if(0<q)for(var q=t/q*j,tt=1;tt<t;)W[tt]*=q,++tt;break}for(var et=0==L.spacingMode,nt=0,st=t-1;nt<st;){var it=(Jt=X[nt]).data.length;it<ja.epsilon?(N&&(Y[nt]=0),W[++nt]=j):(ft=it*Jt.a,gt=it*Jt.c,_i=Math.sqrt(ft*ft+gt*gt),N&&(Y[nt]=_i),W[++nt]=(et?it+j:j)*_i/it)}}while(0);var s=R,i=this.target,at=this.position,rt=this.spaces,lt=3*t+2;if(lt<(w=(y=this.positions).length))y.splice(lt,lt-w);else if(w<lt)for(;w<lt;)y.push(0),++w;var a=y,r=null,ot=s.closed,l=s.worldVerticesLength,ht=l/6|0,ut=-1;if(s.constantSpeed){if(ot){if((l+=2)<(w=(y=this.world).length))y.splice(l,l-w);else if(w<l)for(;w<l;)y.push(0),++w;r=y;o=(_t=2*((_t=l-4)>>1),i.deform),h=s.vertices;if(null==(v=s.bones)){0<o.length&&(h=o);for(M=(C=i.bone).worldX,Rt=C.worldY,Vt=C.a,S=C.b,Qt=C.c,Ot=C.d,k=2,m=0;m<_t;){B=h[k],I=h[k+1];r[m]=B*Vt+I*S+M,r[m+1]=B*Qt+I*Ot+Rt,k+=2,m+=2}}else{for(k=0,Ut=0,e=0;e<2;)k+=(n=v[k])+1,Ut+=n,e+=2;Nt=i.bone.skeleton.getBones();if(0==o.length)for(m=0,S=3*Ut;m<_t;){T=0,F=0,n=v[k++];for(n+=k;k<n;){D=Nt[v[k]],B=h[S],I=h[S+1],E=h[S+2];T+=(B*D.a+I*D.b+D.worldX)*E,F+=(B*D.c+I*D.d+D.worldY)*E,++k,S+=3}r[m]=T,r[m+1]=F,m+=2}else for(m=0,S=3*Ut,Zt=Ut<<1;m<_t;){T=0,F=0,n=v[k++];for(n+=k;k<n;){D=Nt[v[k]],B=h[S]+o[Zt],I=h[S+1]+o[Zt+1],E=h[S+2];T+=(B*D.a+I*D.b+D.worldX)*E,F+=(B*D.c+I*D.d+D.worldY)*E,++k,S+=3,Zt+=2}r[m]=T,r[m+1]=F,m+=2}}var _t=2,R=l-4,o=(_t=2+R,i.deform),h=s.vertices;if(null==(v=s.bones)){0<o.length&&(h=o);for(M=(C=i.bone).worldX,Rt=C.worldY,Vt=C.a,S=C.b,Qt=C.c,Ot=C.d,k=0,m=R;m<_t;){B=h[k],I=h[k+1];r[m]=B*Vt+I*S+M,r[m+1]=B*Qt+I*Ot+Rt,k+=2,m+=2}}else{k=0,Nt=(0,i.bone.skeleton.getBones());if(0==o.length)for(m=R,S=0;m<_t;){T=0,F=0,n=v[k++];for(n+=k;k<n;){D=Nt[v[k]],B=h[S],I=h[S+1],E=h[S+2];T+=(B*D.a+I*D.b+D.worldX)*E,F+=(B*D.c+I*D.d+D.worldY)*E,++k,S+=3}r[m]=T,r[m+1]=F,m+=2}else for(m=R,S=0,Zt=0;m<_t;){T=0,F=0,n=v[k++];for(n+=k;k<n;){D=Nt[v[k]],B=h[S]+o[Zt],I=h[S+1]+o[Zt+1],E=h[S+2];T+=(B*D.a+I*D.b+D.worldX)*E,F+=(B*D.c+I*D.d+D.worldY)*E,++k,S+=3,Zt+=2}r[m]=T,r[m+1]=F,m+=2}}r[l-2]=r[0],r[l-1]=r[1]}else{if(--ht,(l-=4)<(w=(y=this.world).length))y.splice(l,l-w);else if(w<l)for(;w<l;)y.push(0),++w;r=y;o=(_t=2*((_t=l)>>1),i.deform),h=s.vertices;if(null==(v=s.bones)){0<o.length&&(h=o);for(M=(C=i.bone).worldX,Rt=C.worldY,Vt=C.a,S=C.b,Qt=C.c,Ot=C.d,k=2,m=0;m<_t;){B=h[k],I=h[k+1];r[m]=B*Vt+I*S+M,r[m+1]=B*Qt+I*Ot+Rt,k+=2,m+=2}}else{for(k=0,Ut=0,e=0;e<2;)k+=(n=v[k])+1,Ut+=n,e+=2;Nt=i.bone.skeleton.getBones();if(0==o.length)for(m=0,S=3*Ut;m<_t;){T=0,F=0,n=v[k++];for(n+=k;k<n;){s=Nt[v[k]],B=h[S],I=h[S+1],E=h[S+2];T+=(B*s.a+I*s.b+s.worldX)*E,F+=(B*s.c+I*s.d+s.worldY)*E,++k,S+=3}r[m]=T,r[m+1]=F,m+=2}else for(m=0,S=3*Ut,Zt=Ut<<1;m<_t;){T=0,F=0,n=v[k++];for(n+=k;k<n;){s=Nt[v[k]],B=h[S]+o[Zt],I=h[S+1]+o[Zt+1],E=h[S+2];T+=(B*s.a+I*s.b+s.worldX)*E,F+=(B*s.c+I*s.d+s.worldY)*E,++k,S+=3,Zt+=2}r[m]=T,r[m+1]=F,m+=2}}}if(ht<(w=(y=this.curves).length))y.splice(ht,ht-w);else if(w<ht)for(;w<ht;)y.push(0),++w;for(var ct=y,u=0,_=r[0],c=r[1],d=0,p=0,dt=0,pt=0,ft=0,gt=0,mt=0,At=0,xt=0,bt=0,yt=0,wt=0,f=0,g=0,e=0,m=2;e<ht;)d=r[m],p=r[m+1],dt=r[m+2],pt=r[m+3],yt=2*(mt=.1875*(_-2*d+dt))+(xt=.09375*(3*(d-dt)-_+(ft=r[m+4]))),wt=2*(At=.1875*(c-2*p+pt))+(bt=.09375*(3*(p-pt)-c+(gt=r[m+5]))),f=.75*(d-_)+mt+.16666667*xt,g=.75*(p-c)+At+.16666667*bt,u+=Math.sqrt(f*f+g*g),f+=yt,g+=wt,yt+=xt,wt+=bt,u+=Math.sqrt(f*f+g*g),f+=yt,g+=wt,u+=Math.sqrt(f*f+g*g),f+=yt+xt,g+=wt+bt,u+=Math.sqrt(f*f+g*g),ct[e]=u,_=ft,c=gt,++e,m+=6;1==this.data.positionMode&&(at*=u);Dt=0;do{var vt=this.data.spacingMode;if(2==vt){Dt=u;break}if(3==vt){Dt=u/t;break}}while(Dt=1,0);for(var Ct=this.segments,Mt=0,e=0,A=0,x=0,St=0;e<t;){var kt,b=at+=Pt=rt[e]*Dt;if(ot)(b%=u)<0&&(b+=u),x=0;else{if(b<0){Oe=r[0],Le=r[1],P=Math.atan2(r[3]-Le,r[2]-Oe);a[A]=Oe+b*Math.cos(P),a[A+1]=Le+b*Math.sin(P),a[A+2]=P,++e,A+=3;continue}if(u<b){Qe=b-u,ni=r[(K=l-4)+2],si=r[K+3],Ue=Math.atan2(si-r[K+1],ni-r[K]);a[A]=ni+Qe*Math.cos(Ue),a[A+1]=si+Qe*Math.sin(Ue),a[A+2]=Ue,++e,A+=3;continue}}for(;;){if(!((hi=ct[x])<b)){0==x?b/=hi:b=(b-(zt=ct[x-1]))/(hi-zt);break}++x}if(x!=ut){var Bt=6*(ut=x);for(_=r[Bt],c=r[Bt+1],d=r[Bt+2],p=r[Bt+3],dt=r[Bt+4],pt=r[Bt+5],yt=2*(mt=.03*(_-2*d+dt))+(xt=.006*(3*(d-dt)-_+(ft=r[Bt+6]))),wt=2*(At=.03*(c-2*p+pt))+(bt=.006*(3*(p-pt)-c+(gt=r[Bt+7]))),f=.3*(d-_)+mt+.16666667*xt,g=.3*(p-c)+At+.16666667*bt,Mt=Math.sqrt(f*f+g*g),Ct[0]=Mt,Bt=1;Bt<8;)f+=yt,g+=wt,yt+=xt,wt+=bt,Mt+=Math.sqrt(f*f+g*g),Ct[Bt]=Mt,++Bt;f+=yt,g+=wt,Mt+=Math.sqrt(f*f+g*g),Ct[8]=Mt,f+=yt+xt,g+=wt+bt,Mt+=Math.sqrt(f*f+g*g),Ct[9]=Mt,St=0}for(b*=Mt;;){if(!((_i=Ct[St])<b)){0==St?b/=_i:b=St+(b-(kt=Ct[St-1]))/(_i-kt);break}++St}var It=.1*b,Tt=U||0<e&&Pt<ja.epsilon;It<ja.epsilon||isNaN(It)?(a[A]=_,a[A+1]=c,a[A+2]=Math.atan2(p-c,d-_)):(M=_*(Zs=(Hs=(js=1-It)*js)*js)+d*(Js=js*(Ks=3*(qs=js*It)))+dt*($s=Ks*It)+ft*(Ws=(Ys=It*It)*It),Rt=c*Zs+p*Js+pt*$s+gt*Ws,a[A]=M,a[A+1]=Rt,Tt&&(a[A+2]=It<.001?Math.atan2(p-c,d-_):Math.atan2(Rt-(c*Hs+p*qs*2+pt*Ys),M-(_*Hs+d*qs*2+dt*Ys)))),++e,A+=3}}else{var y,w,Ft=s.lengths,u=Ft[ht-=ot?1:2],Dt=(1==this.data.positionMode&&(at*=u),0);do{var Et=this.data.spacingMode;if(2==Et){Dt=u;break}if(3==Et){Dt=u/t;break}}while(Dt=1,0);if(8<(w=(y=this.world).length))y.splice(8,8-w);else if(w<8)for(;w<8;)y.push(0),++w;for(var r=y,e=0,A=0,x=0;e<t;){var Pt,zt,b=at+=Pt=rt[e]*Dt;if(ot)(b%=u)<0&&(b+=u),x=0;else{if(b<0){if(-2!=ut){var v,ut=-2,o=i.deform,h=s.vertices;if(null==(v=s.bones)){0<o.length&&(h=o);for(var C,M=(C=i.bone).worldX,Rt=C.worldY,Vt=C.a,S=C.b,Qt=C.c,Ot=C.d,k=2,m=0;m<4;){var B=h[k],I=h[k+1];r[m]=B*Vt+I*S+M,r[m+1]=B*Qt+I*Ot+Rt,k+=2,m+=2}}else{for(var Lt=0,Ut=0,K=0;K<2;)Lt+=(n=v[Lt])+1,Ut+=n,K+=2;var Nt=i.bone.skeleton.getBones();if(0==o.length)for(var Gt=0,Xt=3*Ut;Gt<4;){var T=0,F=0,J=v[Lt++];for(J+=Lt;Lt<J;){var D=Nt[v[Lt]],Yt=h[Xt],Wt=h[Xt+1],E=h[Xt+2];T+=(Yt*D.a+Wt*D.b+D.worldX)*E,F+=(Yt*D.c+Wt*D.d+D.worldY)*E,++Lt,Xt+=3}r[Gt]=T,r[Gt+1]=F,Gt+=2}else for(var jt=0,Ht=3*Ut,Zt=Ut<<1;jt<4;){var qt=0,Kt=0,st=v[Lt++];for(st+=Lt;Lt<st;){var Jt=Nt[v[Lt]],$t=h[Ht]+o[Zt],te=h[Ht+1]+o[Zt+1],ee=h[Ht+2];qt+=($t*Jt.a+te*Jt.b+Jt.worldX)*ee,Kt+=($t*Jt.c+te*Jt.d+Jt.worldY)*ee,++Lt,Ht+=3,Zt+=2}r[jt]=qt,r[jt+1]=Kt,jt+=2}}}var _=r[0],c=r[1],P=Math.atan2(r[3]-c,r[2]-_);a[A]=_+b*Math.cos(P),a[A+1]=c+b*Math.sin(P),a[A+2]=P,++e,A+=3;continue}if(u<b){if(-3!=ut){ut=-3;var ne=l-6,se=i.deform,ie=s.vertices,ae=s.bones;if(null==ae){0<se.length&&(ie=se);for(var re=i.bone,ft=re.worldX,gt=re.worldY,le=re.a,oe=re.b,he=re.c,ue=re.d,_e=ne,ce=0;ce<4;){var de=ie[_e],pe=ie[_e+1];r[ce]=de*le+pe*oe+ft,r[ce+1]=de*he+pe*ue+gt,_e+=2,ce+=2}}else{for(var fe=0,ge=0,tt=0;tt<ne;){var me=ae[fe];fe+=me+1,ge+=me,tt+=2}var Ae=i.bone.skeleton.getBones();if(0==se.length)for(var xe=0,be=3*ge;xe<4;){var ye=0,we=0,ve=ae[fe++];for(ve+=fe;fe<ve;){var Ce=Ae[ae[fe]],Me=ie[be],Se=ie[be+1],ke=ie[be+2];ye+=(Me*Ce.a+Se*Ce.b+Ce.worldX)*ke,we+=(Me*Ce.c+Se*Ce.d+Ce.worldY)*ke,++fe,be+=3}r[xe]=ye,r[xe+1]=we,xe+=2}else for(var Be=0,Ie=3*ge,Te=ge<<1;Be<4;){var Fe=0,De=0,Ee=ae[fe++];for(Ee+=fe;fe<Ee;){var Pe=Ae[ae[fe]],ze=ie[Ie]+se[Te],Re=ie[Ie+1]+se[Te+1],Ve=ie[Ie+2];Fe+=(ze*Pe.a+Re*Pe.b+Pe.worldX)*Ve,De+=(ze*Pe.c+Re*Pe.d+Pe.worldY)*Ve,++fe,Ie+=3,Te+=2}r[Be]=Fe,r[Be+1]=De,Be+=2}}}var Qe=b-u,Oe=r[2],Le=r[3],Ue=Math.atan2(Le-r[1],Oe-r[0]);a[A]=Oe+Qe*Math.cos(Ue),a[A+1]=Le+Qe*Math.sin(Ue),a[A+2]=Ue,++e,A+=3;continue}}for(;;){if(!((hi=Ft[x])<b)){0==x?b/=hi:b=(b-(zt=Ft[x-1]))/(hi-zt);break}++x}if(x!=ut)if(ut=x,ot&&x==ht){var Ne=l-4,Ge=i.deform,Xe=s.vertices,Ye=s.bones;if(null==Ye){0<Ge.length&&(Xe=Ge);for(var re=i.bone,We=re.worldX,je=re.worldY,He=re.a,Ze=re.b,qe=re.c,Ke=re.d,Je=Ne,$e=0;$e<4;){var tn=Xe[Je],en=Xe[Je+1];r[$e]=tn*He+en*Ze+We,r[$e+1]=tn*qe+en*Ke+je,Je+=2,$e+=2}}else{for(var nn=0,sn=0,nt=0;nt<Ne;){var an=Ye[nn];nn+=an+1,sn+=an,nt+=2}var rn=i.bone.skeleton.getBones();if(0==Ge.length)for(var ln=0,on=3*sn;ln<4;){var hn=0,un=0,_n=Ye[nn++];for(_n+=nn;nn<_n;){var cn=rn[Ye[nn]],dn=Xe[on],pn=Xe[on+1],fn=Xe[on+2];hn+=(dn*cn.a+pn*cn.b+cn.worldX)*fn,un+=(dn*cn.c+pn*cn.d+cn.worldY)*fn,++nn,on+=3}r[ln]=hn,r[ln+1]=un,ln+=2}else for(var gn=0,mn=3*sn,An=sn<<1;gn<4;){var xn=0,bn=0,yn=Ye[nn++];for(yn+=nn;nn<yn;){var wn=rn[Ye[nn]],vn=Xe[mn]+Ge[An],Cn=Xe[mn+1]+Ge[An+1],Mn=Xe[mn+2];xn+=(vn*wn.a+Cn*wn.b+wn.worldX)*Mn,bn+=(vn*wn.c+Cn*wn.d+wn.worldY)*Mn,++nn,mn+=3,An+=2}r[gn]=xn,r[gn+1]=bn,gn+=2}}var Sn=i.deform,kn=s.vertices,Bn=s.bones;if(null==Bn){0<Sn.length&&(kn=Sn);for(var In=i.bone,Tn=In.worldX,Fn=In.worldY,Dn=In.a,En=In.b,Pn=In.c,zn=In.d,Rn=0,Vn=4;Vn<8;){var Qn=kn[Rn],On=kn[Rn+1];r[Vn]=Qn*Dn+On*En+Tn,r[Vn+1]=Qn*Pn+On*zn+Fn,Rn+=2,Vn+=2}}else{var Ln=0,Un=(0,i.bone.skeleton.getBones());if(0==Sn.length)for(var Nn=4,Gn=0;Nn<8;){var Xn=0,Yn=0,Wn=Bn[Ln++];for(Wn+=Ln;Ln<Wn;){var jn=Un[Bn[Ln]],Hn=kn[Gn],Zn=kn[Gn+1],qn=kn[Gn+2];Xn+=(Hn*jn.a+Zn*jn.b+jn.worldX)*qn,Yn+=(Hn*jn.c+Zn*jn.d+jn.worldY)*qn,++Ln,Gn+=3}r[Nn]=Xn,r[Nn+1]=Yn,Nn+=2}else for(var Kn=4,Jn=0,$n=0;Kn<8;){var ts=0,es=0,ns=Bn[Ln++];for(ns+=Ln;Ln<ns;){var ss=Un[Bn[Ln]],is=kn[Jn]+Sn[$n],as=kn[Jn+1]+Sn[$n+1],rs=kn[Jn+2];ts+=(is*ss.a+as*ss.b+ss.worldX)*rs,es+=(is*ss.c+as*ss.d+ss.worldY)*rs,++Ln,Jn+=3,$n+=2}r[Kn]=ts,r[Kn+1]=es,Kn+=2}}}else{var ls=6*x+2,os=i.deform,hs=s.vertices,us=s.bones;if(null==us){0<os.length&&(hs=os);for(var In=i.bone,_s=In.worldX,cs=In.worldY,ds=In.a,ps=In.b,fs=In.c,gs=In.d,ms=ls,As=0;As<8;){var xs=hs[ms],bs=hs[ms+1];r[As]=xs*ds+bs*ps+_s,r[As+1]=xs*fs+bs*gs+cs,ms+=2,As+=2}}else{for(var ys=0,ws=0,vs=0;vs<ls;){var Cs=us[ys];ys+=Cs+1,ws+=Cs,vs+=2}var Ms=i.bone.skeleton.getBones();if(0==os.length)for(var Ss=0,ks=3*ws;Ss<8;){var Bs=0,Is=0,Ts=us[ys++];for(Ts+=ys;ys<Ts;){var Fs=Ms[us[ys]],Ds=hs[ks],Es=hs[ks+1],Ps=hs[ks+2];Bs+=(Ds*Fs.a+Es*Fs.b+Fs.worldX)*Ps,Is+=(Ds*Fs.c+Es*Fs.d+Fs.worldY)*Ps,++ys,ks+=3}r[Ss]=Bs,r[Ss+1]=Is,Ss+=2}else for(var zs=0,Rs=3*ws,Vs=ws<<1;zs<8;){var Qs=0,Os=0,Ls=us[ys++];for(Ls+=ys;ys<Ls;){var Us=Ms[us[ys]],Ns=hs[Rs]+os[Vs],Gs=hs[Rs+1]+os[Vs+1],Xs=hs[Rs+2];Qs+=(Ns*Us.a+Gs*Us.b+Us.worldX)*Xs,Os+=(Ns*Us.c+Gs*Us.d+Us.worldY)*Xs,++ys,Rs+=3,Vs+=2}r[zs]=Qs,r[zs+1]=Os,zs+=2}}}var Ys,Ws,js,Hs,Zs,qs,Ks,Js,$s,ti,ei,ni=r[0],si=r[1],d=r[2],p=r[3],dt=r[4],pt=r[5],Tt=U||0<e&&Pt<ja.epsilon;b<ja.epsilon||isNaN(b)?(a[A]=ni,a[A+1]=si,a[A+2]=Math.atan2(p-si,d-ni)):(Ws=(Ys=b*b)*b,ti=ni*(Zs=(Hs=(js=1-b)*js)*js)+d*(Js=js*(Ks=3*(qs=js*b)))+dt*($s=Ks*b)+r[6]*Ws,ei=si*Zs+p*Js+pt*$s+r[7]*Ws,a[A]=ti,a[A+1]=ei,Tt&&(a[A+2]=b<.001?Math.atan2(p-si,d-ni):Math.atan2(ei-(si*Hs+p*qs*2+pt*Ys),ti-(ni*Hs+d*qs*2+dt*Ys)))),++e,A+=3}}for(var ii,ai=(ii=a)[0],ri=ii[1],li=L.offsetRotation,oi=!1,e=(0==li?oi=1==L.rotateMode:(oi=!1,li*=0<(b=this.target.bone).a*b.d-b.b*b.c?Ai.degRad:-Ai.degRad),0),b=3;e<G;){(s=X[e]).worldX+=(ai-s.worldX)*Q,s.worldY+=(ri-s.worldY)*O;var hi,ui,_i,ci,di,pi,fi,gi,z=(M=ii[b])-ai,mi=(Rt=ii[b+1])-ri,z=(N&&(hi=Y[e],ja.epsilon<=hi)&&(ui=(Math.sqrt(z*z+mi*mi)/hi-1)*V+1,s.a*=ui,s.c*=ui),ai=M,ri=Rt,0<V&&(Vt=s.a,S=s.b,Qt=s.c,Ot=s.d,ci=ui=P=0,P=U?ii[b-1]:W[e+1]<ja.epsilon?ii[b+2]:Math.atan2(mi,z),P-=Math.atan2(Qt,Vt),oi?(ui=Math.cos(P),ci=Math.sin(P),ai=M+((_i=s.data.length)*(ui*Vt-ci*Qt)-z)*V,ri=Rt+(_i*(ci*Vt+ui*Qt)-mi)*V):P+=li,3.1415927<P?P-=6.2831854:P<-3.1415927&&(P+=6.2831854),P*=V,ui=Math.cos(P),ci=Math.sin(P),s.a=ui*Vt-ci*Qt,s.b=ui*S-ci*Ot,s.c=ci*Vt+ui*Qt,s.d=ci*S+ui*Ot),s.parent);null==z?(s.ax=s.worldX-s.skeleton.x,s.ay=s.worldY-s.skeleton.y,le=s.a,Xt=s.b,he=s.c,ue=s.d,s.arotation=Math.atan2(he,le)*Ai.radDeg,s.ascaleX=Math.sqrt(le*le+he*he),s.ascaleY=Math.sqrt(Xt*Xt+ue*ue),s.ashearX=0,s.ashearY=Math.atan2(le*Xt+he*ue,le*ue-Xt*he)*Ai.radDeg):(mi=z.a,ci=z.b,fi=z.c,di=z.d,gi=s.worldX-z.worldX,z=s.worldY-z.worldY,s.ax=gi*di*(pi=1/(mi*di-ci*fi))-z*ci*pi,s.ay=z*mi*pi-gi*fi*pi,di=(z=pi*di)*s.a-(gi=pi*ci)*s.c,z=z*s.b-gi*s.d,pi=(gi=pi*mi)*s.c-(mi=pi*fi)*s.a,fi=gi*s.d-mi*s.b,s.ashearX=0,s.ascaleX=Math.sqrt(di*di+pi*pi),1e-4<s.ascaleX?(s.ascaleY=(gi=di*fi-z*pi)/s.ascaleX,s.ashearY=Math.atan2(di*z+pi*fi,gi)*Ai.radDeg,s.arotation=Math.atan2(pi,di)*Ai.radDeg):(s.ascaleX=0,s.ascaleY=Math.sqrt(z*z+fi*fi),s.ashearY=0,s.arotation=90-Math.atan2(fi,z)*Ai.radDeg)),++e,b+=3}}}},__class__:ja},(e["spine.PathConstraintData"]=Ha).__name__="spine.PathConstraintData",Ha.__super__=Na,Ha.prototype=t(Na.prototype,{__class__:Ha}),function(t){if(this.y=0,this.x=0,this.scaleY=1,this.scaleX=1,this.time=0,this.cache=[],null==t)throw tr.thrown(new $n("data cannot be null."));this.data=t,this.bones=[];for(var e=this.bones,n=0,s=t.bones;n<s.length;){var i=s[n],a=(++n,null);null==i.parent?a=new La(i,this,null):(P=e[i.parent.index],a=new La(i,this,P),P.children.push(a)),this.bones.push(a)}this.slots=[],this.drawOrder=[];for(n=0,s=t.slots;n<s.length;){var R=s[n],r=(++n,new dd(R,e[R.boneData.index]));this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=[];for(n=0,s=t.ikConstraints;n<s.length;)this.ikConstraints.push(new Ya(s[n++],this));this.transformConstraints=[];for(n=0,s=t.transformConstraints;n<s.length;)this.transformConstraints.push(new fd(s[n++],this));this.pathConstraints=[];for(n=0,s=t.pathConstraints;n<s.length;)this.pathConstraints.push(new ja(s[n++],this));this.color=new kd(1,1,1,1);for(var t=this.cache,V=(t.splice(0,t.length),this.bones.length),e=this.bones,l=0;l<V;)(P=e[l]).sorted=P.data.skinRequired,P.active=!P.sorted,++l;if(null!=this.skin)for(var Q=this.skin.bones,l=0,O=this.skin.bones.length;l<O;){for(a=e[Q[l].index];a.sorted=!1,a.active=!0,null!=(a=a.parent););++l}for(var L=this.ikConstraints.length,U=this.transformConstraints.length,N=this.pathConstraints.length,G=this.ikConstraints,X=this.transformConstraints,Y=this.pathConstraints,W=L+U+N;;){for(var o=0,l=0;l<W;){for(var j=0;j<L;){if((P=G[j]).data.order==l){if(P.active=P.target.active&&(!P.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(P.data)),P.active){var h=P.target,h=(h.sorted||(null==(z=h.parent)||z.sorted||(null!=(ge=z.parent)&&this.sortBone(ge),z.sorted=!0,this.cache.push(z)),h.sorted=!0,this.cache.push(h)),P.bones),u=0<h.length?h[0]:null;if(u.sorted||(null==(p=u.parent)||p.sorted||(null!=(f=p.parent)&&this.sortBone(f),p.sorted=!0,this.cache.push(p)),u.sorted=!0,this.cache.push(u)),1==h.length){this.cache.push(P);for(var H=u.children,Z=0,O=H.length;Z<O;){var _=H[Z];if(_.active){if(_.sorted)for(var q=_.children,c=0,K=q.length;c<K;){var d=q[c];d.active?(d.sorted&&this.sortReset(d.children),d.sorted=!1,++c):++c}_.sorted=!1}++Z}}else{for(var p,f=0==h.length?null:h[h.length-1],J=(f.sorted||(null==(p=f.parent)||p.sorted||(null!=(h=p.parent)&&this.sortBone(h),p.sorted=!0,this.cache.push(p)),f.sorted=!0,this.cache.push(f)),this.cache.push(P),u.children),$=0,tt=J.length;$<tt;){var et=J[$];if(et.active){if(et.sorted)for(var nt=et.children,st=0,it=nt.length;st<it;){var at=nt[st];at.active?(at.sorted&&this.sortReset(at.children),at.sorted=!1,++st):++st}et.sorted=!1}++$}f.sorted=!0}}o=2;break}++j}if(2==o)o=0;else{if(1<=o)break;for(var rt=0;rt<U;){var g=X[rt];if(g.data.order==l){if(g.active=g.target.active&&(!g.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(g.data)),g.active){(a=g.target).sorted||(null==(m=a.parent)||m.sorted||(null!=(lt=m.parent)&&this.sortBone(lt),m.sorted=!0,this.cache.push(m)),a.sorted=!0,this.cache.push(a));var m,lt,ot=g.bones,ht=g.bones.length;if(g.data.local)for(var ut=0;ut<ht;){var A,x,b=ot[ut],_t=b.parent;_t.sorted||(null==(x=_t.parent)||x.sorted||(null!=(A=x.parent)&&this.sortBone(A),x.sorted=!0,this.cache.push(x)),_t.sorted=!0,this.cache.push(_t)),b.sorted||(null==(A=b.parent)||A.sorted||(null!=(x=A.parent)&&this.sortBone(x),A.sorted=!0,this.cache.push(A)),b.sorted=!0,this.cache.push(b)),++ut}else for(var ct=0;ct<ht;){var y,dt,pt=ot[ct];pt.sorted||(null==(y=pt.parent)||y.sorted||(null!=(dt=y.parent)&&this.sortBone(dt),y.sorted=!0,this.cache.push(y)),pt.sorted=!0,this.cache.push(pt)),++ct}this.cache.push(g);for(var ft=0;ft<ht;){for(var gt=ot[ft].children,mt=0,At=gt.length;mt<At;){var xt=gt[mt];if(xt.active){if(xt.sorted)for(var bt=xt.children,yt=0,wt=bt.length;yt<wt;){var vt=bt[yt];vt.active?(vt.sorted&&this.sortReset(vt.children),vt.sorted=!1,++yt):++yt}xt.sorted=!1}++mt}++ft}for(var Ct=0;Ct<ht;)ot[Ct].sorted=!0,++Ct}o=2;break}++rt}if(2==o)o=0;else{if(1<=o)break;for(var Mt=0;Mt<N;){var w=Y[Mt];if(w.data.order==l){if(w.active=w.target.bone.active&&(!w.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(w.data)),w.active){var St=(r=w.target).data.index,v=r.bone;if(null!=this.skin)for(var kt=this.skin,Bt=Rd.orderedItems(kt.attachments),It=0,Tt=Rd.get_size(kt.attachments);It<Tt;){var C=Bt[It];if(C.slotIndex==St){C=C.attachment;if(C instanceof wd){var Ft,Dt=C.bones;if(null==Dt)v.sorted||(null==(C=v.parent)||C.sorted||(null!=(Ft=C.parent)&&this.sortBone(Ft),C.sorted=!0,this.cache.push(C)),v.sorted=!0,this.cache.push(v));else for(var Et=this.bones,M=0,Pt=Dt.length;M<Pt;){var zt=Dt[M++];for(zt+=M;M<zt;){var S,Rt,Vt=Et[Dt[M++]];Vt.sorted||(null==(S=Vt.parent)||S.sorted||(null!=(Rt=S.parent)&&this.sortBone(Rt),S.sorted=!0,this.cache.push(S)),Vt.sorted=!0,this.cache.push(Vt))}}}}++It}if(null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin)for(var kt=this.data.defaultSkin,Qt=Rd.orderedItems(kt.attachments),Ot=0,Lt=Rd.get_size(kt.attachments);Ot<Lt;){var k=Qt[Ot];if(k.slotIndex==St){k=k.attachment;if(k instanceof wd){var Ut,Nt=k.bones;if(null==Nt)v.sorted||(null==(k=v.parent)||k.sorted||(null!=(Ut=k.parent)&&this.sortBone(Ut),k.sorted=!0,this.cache.push(k)),v.sorted=!0,this.cache.push(v));else for(var Gt=this.bones,B=0,Xt=Nt.length;B<Xt;){var Yt=Nt[B++];for(Yt+=B;B<Yt;){var I,Wt,jt=Gt[Nt[B++]];jt.sorted||(null==(I=jt.parent)||I.sorted||(null!=(Wt=I.parent)&&this.sortBone(Wt),I.sorted=!0,this.cache.push(I)),jt.sorted=!0,this.cache.push(jt))}}}}++Ot}var T=r.attachment;if(T instanceof wd&&T instanceof wd){var Ht,Zt=T.bones;if(null==Zt)v.sorted||(null==(T=v.parent)||T.sorted||(null!=(Ht=T.parent)&&this.sortBone(Ht),T.sorted=!0,this.cache.push(T)),v.sorted=!0,this.cache.push(v));else for(var qt=this.bones,F=0,Kt=Zt.length;F<Kt;){var Jt=Zt[F++];for(Jt+=F;F<Jt;){var D,$t,te=qt[Zt[F++]];te.sorted||(null==(D=te.parent)||D.sorted||(null!=($t=D.parent)&&this.sortBone($t),D.sorted=!0,this.cache.push(D)),te.sorted=!0,this.cache.push(te))}}}for(var ee=w.bones,ne=w.bones.length,se=0;se<ne;){var E,ie,ae=ee[se];ae.sorted||(null==(E=ae.parent)||E.sorted||(null!=(ie=E.parent)&&this.sortBone(ie),E.sorted=!0,this.cache.push(E)),ae.sorted=!0,this.cache.push(ae)),++se}this.cache.push(w);for(var re=0;re<ne;){for(var le=ee[re].children,oe=0,he=le.length;oe<he;){var ue=le[oe];if(ue.active){if(ue.sorted)for(var _e=ue.children,ce=0,de=_e.length;ce<de;){var pe=_e[ce];pe.active?(pe.sorted&&this.sortReset(pe.children),pe.sorted=!1,++ce):++ce}ue.sorted=!1}++oe}++re}for(var fe=0;fe<ne;)ee[fe].sorted=!0,++fe}o=2;break}++Mt}if(2==o)o=0;else if(1<=o)break}}++l}if(0==o)break}for(var P,z,ge,l=0;l<V;)(P=e[l]).sorted||(null==(z=P.parent)||z.sorted||(null!=(ge=z.parent)&&this.sortBone(ge),z.sorted=!0,this.cache.push(z)),P.sorted=!0,this.cache.push(P)),++l}),hd=((e["spine.Skeleton"]=od).__name__="spine.Skeleton",od.prototype={sortBone:function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this.cache.push(t))},sortReset:function(t){for(var e=0,n=t.length;e<n;){var s=t[e];s.active?(s.sorted&&this.sortReset(s.children),s.sorted=!1,++e):++e}},getBones:function(){return this.bones},findBone:function(t){if(null==t)throw tr.thrown(new $n("boneName cannot be null."));for(var e=this.bones,n=0,s=this.bones.length;n<s;){var i=e[n];if(i.data.name==t)return i;++n}return null},findSlot:function(t){if(null==t)throw tr.thrown(new $n("slotName cannot be null."));for(var e=this.slots,n=0,s=this.slots.length;n<s;){var i=e[n];if(i.data.name==t)return i;++n}return null},getAttachment:function(t,e){if(null==e)throw tr.thrown(new $n("attachmentName cannot be null."));if(null!=this.skin){var n=(u=this.skin).lookup;if(t<0)throw tr.thrown(new $n("slotIndex must be >= 0."));if(null==e)throw tr.thrown(new $n("name cannot be null."));n.slotIndex=t;var s=0;if(0==(n.name=e).length)_=0;else{for(var i=0,a=e.length;i<a;)s=(s<<5)-s+Jn.cca(e,i++);_=s}n.hashCode=_+37*t|0;var r=u.lookup,l=null;if(null!=(c=u.attachments.h[r.hashCode]))for(i=0,a=c.length;i<a;){var o=c[i++];if(null!=(d=r)&&o.slotIndex==(p=d).slotIndex&&o.name==p.name){l=o;break}}var h=null!=(o=l)?o.attachment:null;if(null!=h)return h}if(null==this.data.defaultSkin)return null;var u,n=(u=this.data.defaultSkin).lookup;if(t<0)throw tr.thrown(new $n("slotIndex must be >= 0."));if(null==e)throw tr.thrown(new $n("name cannot be null."));n.slotIndex=t;var _,s=0;if(0==(n.name=e).length)_=0;else{for(i=0,a=e.length;i<a;)s=(s<<5)-s+Jn.cca(e,i++);_=s}n.hashCode=_+37*t|0;var c,r=u.lookup,l=null;if(null!=(c=u.attachments.h[r.hashCode]))for(i=0,a=c.length;i<a;){var d,p,o=c[i++];if(null!=(d=r)&&o.slotIndex==(p=d).slotIndex&&o.name==p.name){l=o;break}}return null!=(o=l)?o.attachment:null},__class__:od},(e["spine.SkeletonData"]=Za).__name__="spine.SkeletonData",Za.prototype={findBone:function(t){if(null==t)throw tr.thrown(new $n("boneName cannot be null."));for(var e=this.bones,n=0,s=this.bones.length;n<s;){var i=e[n];if(i.name==t)return i;++n}return null},findSlot:function(t){if(null==t)throw tr.thrown(new $n("slotName cannot be null."));for(var e=this.slots,n=0,s=this.slots.length;n<s;){var i=e[n];if(i.name==t)return i;++n}return null},findSkin:function(t){if(null==t)throw tr.thrown(new $n("skinName cannot be null."));for(var e=0,n=this.skins;e<n.length;){var s=n[e];if(++e,s.name==t)return s}return null},findEvent:function(t){if(null==t)throw tr.thrown(new $n("eventDataName cannot be null."));for(var e=0,n=this.events;e<n.length;){var s=n[e];if(++e,s.name==t)return s}return null},findAnimation:function(t){if(null==t)throw tr.thrown(new $n("animationName cannot be null."));for(var e=this.animations,n=0,s=this.animations.length;n<s;){var i=e[n];if(i.name==t)return i;++n}return null},getIkConstraints:function(){return this.ikConstraints},findIkConstraint:function(t){if(null==t)throw tr.thrown(new $n("constraintName cannot be null."));for(var e=this.ikConstraints,n=0,s=this.ikConstraints.length;n<s;){var i=e[n];if(i.name==t)return i;++n}return null},getTransformConstraints:function(){return this.transformConstraints},findTransformConstraint:function(t){if(null==t)throw tr.thrown(new $n("constraintName cannot be null."));for(var e=this.transformConstraints,n=0,s=this.transformConstraints.length;n<s;){var i=e[n];if(i.name==t)return i;++n}return null},findPathConstraint:function(t){if(null==t)throw tr.thrown(new $n("constraintName cannot be null."));for(var e=this.pathConstraints,n=0,s=this.pathConstraints.length;n<s;){var i=e[n];if(i.name==t)return i;++n}return null},__class__:Za},(e["spine.SkeletonLoader"]=qa).__name__="spine.SkeletonLoader",qa.prototype={__class__:qa},function(t){qa.call(this,t)}),ud=((e["spine.SkeletonJson"]=hd).__name__="spine.SkeletonJson",hd.__super__=qa,hd.prototype=t(qa.prototype,{readSkeletonData:function(t){if(null==t)throw tr.thrown(new $n("root cannot be null."));for(var e=this.scale,n=new Za,s=t.get("skeleton"),i=(null!=s&&(n.hash=s.getString("hash",null),n.version=s.getString("spine",null),n.x=s.getFloat("x",0),n.y=s.getFloat("y",0),n.width=s.getFloat("width",0),n.height=s.getFloat("height",0),n.fps=s.getFloat("fps",30),n.imagesPath=s.getString("images",null),n.audioPath=s.getString("audio",null)),t.getChild("bones"));null!=i;){var a=null,R=i.getString("parent",null);if(null!=R&&null==(a=n.findBone(R)))throw tr.thrown(new Ld("Parent bone not found: "+R));switch((h=new Ua(n.bones.length,i.getString("name"),a)).length=i.getFloat("length",0)*e,h.x=i.getFloat("x",0)*e,h.y=i.getFloat("y",0)*e,h.rotation=i.getFloat("rotation",0),h.scaleX=i.getFloat("scaleX",1),h.scaleY=i.getFloat("scaleY",1),h.shearX=i.getFloat("shearX",0),h.shearY=i.getFloat("shearY",0),i.getString("transform","normal")){case"noRotationOrReflection":D=2;break;case"noScale":D=3;break;case"noScaleOrReflection":D=4;break;case"normal":D=0;break;case"onlyTranslation":D=1;break;default:D=0}h.transformMode=D,h.skinRequired=i.getBoolean("skin",!1),null!=(o=i.getString("color",null))&&kd.valueOfIntoColor(o,h.color),n.bones.push(h),i=i.get_next()}for(var r=t.getChild("slots");null!=r;){var V=r.getString("name"),l=r.getString("bone"),Q=n.findBone(l);if(null==Q)throw tr.thrown(new Ld("Slot bone not found: "+l));var o,h=new pd(n.slots.length,V,Q),l=(null!=(o=r.getString("color",null))&&kd.valueOfIntoColor(o,h.color),r.getString("dark",null));switch(null!=l&&(h.darkColor=kd.valueOf(l)),h.attachmentName=r.getString("attachment",null),r.getString("blend","normal")){case"additive":D=1;break;case"multiply":D=2;break;case"normal":D=0;break;case"screen":D=3;break;default:D=0}h.blendMode=D,n.slots.push(h),r=r.get_next()}for(var u=t.getChild("ik");null!=u;){(h=new Wa(u.getString("name"))).order=u.getInt("order",0),h.skinRequired=u.getBoolean("skin",!1);for(var _=u.getChild("bones");null!=_;){if(null==(g=n.findBone(_.asString())))throw tr.thrown(new Ld("IK bone not found: "+Ja.string(_)));h.bones.push(g),_=_.get_next()}var c=u.getString("target");if(h.target=n.findBone(c),null==h.target)throw tr.thrown(new Ld("IK target bone not found: "+c));h.mix=u.getFloat("mix",1),h.softness=u.getFloat("softness",0)*e,h.bendDirection=u.getBoolean("bendPositive",!0)?1:-1,h.compress=u.getBoolean("compress",!1),h.stretch=u.getBoolean("stretch",!1),h.uniform=u.getBoolean("uniform",!1),n.ikConstraints.push(h),u=u.get_next()}for(u=t.getChild("transform");null!=u;){for(_=((h=new gd(u.getString("name"))).order=u.getInt("order",0),h.skinRequired=u.getBoolean("skin",!1),u.getChild("bones"));null!=_;){if(null==(g=n.findBone(_.asString())))throw tr.thrown(new Ld("Transform constraint bone not found: "+Ja.string(_)));h.bones.push(g),_=_.get_next()}c=u.getString("target");if(h.target=n.findBone(c),null==h.target)throw tr.thrown(new Ld("Transform constraint target bone not found: "+c));h.local=u.getBoolean("local",!1),h.relative=u.getBoolean("relative",!1),h.offsetRotation=u.getFloat("rotation",0),h.offsetX=u.getFloat("x",0)*e,h.offsetY=u.getFloat("y",0)*e,h.offsetScaleX=u.getFloat("scaleX",0),h.offsetScaleY=u.getFloat("scaleY",0),h.offsetShearY=u.getFloat("shearY",0),h.mixRotate=u.getFloat("mixRotate",1),h.mixX=u.getFloat("mixX",1),h.mixY=u.getFloat("mixY",h.mixX),h.mixScaleX=u.getFloat("mixScaleX",1),h.mixScaleY=u.getFloat("mixScaleY",h.mixScaleX),h.mixShearY=u.getFloat("mixShearY",1),n.transformConstraints.push(h),u=u.get_next()}for(u=t.getChild("path");null!=u;){for(_=((h=new Ha(u.getString("name"))).order=u.getInt("order",0),h.skinRequired=u.getBoolean("skin",!1),u.getChild("bones"));null!=_;){if(null==(g=n.findBone(_.asString())))throw tr.thrown(new Ld("Path bone not found: "+Ja.string(_)));h.bones.push(g),_=_.get_next()}var d,p,c=u.getString("target");if(h.target=n.findSlot(c),null==h.target)throw tr.thrown(new Ld("Path target slot not found: "+c));switch(u.getString("positionMode","percent")){case"fixed":D=0;break;case"percent":D=1;break;default:D=0}switch(h.positionMode=D,u.getString("spacingMode","length")){case"fixed":d=1;break;case"length":d=0;break;case"percent":d=2;break;case"proportional":d=3;break;default:d=0}switch(h.spacingMode=d,u.getString("rotateMode","tangent")){case"chain":p=1;break;case"chainScale":p=2;break;default:p=0}h.rotateMode=p,h.offsetRotation=u.getFloat("rotation",0),h.position=u.getFloat("position",0),0==h.positionMode&&(h.position*=e),h.spacing=u.getFloat("spacing",0),0!=h.spacingMode&&1!=h.spacingMode||(h.spacing*=e),h.mixRotate=u.getFloat("mixRotate",1),h.mixX=u.getFloat("mixX",1),h.mixY=u.getFloat("mixY",1),n.pathConstraints.push(h),u=u.get_next()}for(var f=t.getChild("skins");null!=f;){for(var g,m=new _d(f.getString("name")),_=f.getChild("bones");null!=_;){if(null==(g=n.findBone(_.asString())))throw tr.thrown(new Ld("Skin bone not found: "+Ja.string(_)));m.bones.push(g),_=_.get_next()}for(var A=f.getChild("ik");null!=A;){var O=n.findIkConstraint(A.asString());if(null==O)throw tr.thrown(new Ld("Skin IK constraint not found: "+Ja.string(A)));m.constraints.push(O),A=A.get_next()}for(var x=f.getChild("transform");null!=x;){var L=n.findTransformConstraint(x.asString());if(null==L)throw tr.thrown(new Ld("Skin transform constraint not found: "+Ja.string(x)));m.constraints.push(L),x=x.get_next()}for(var b=f.getChild("path");null!=b;){var U=n.findPathConstraint(b.asString());if(null==U)throw tr.thrown(new Ld("Skin path constraint not found: "+Ja.string(b)));m.constraints.push(U),b=b.get_next()}for(var y=f.getChild("attachments");null!=y;){var N=n.findSlot(y.get_name());if(null==N)throw tr.thrown(new Ld("Slot not found: "+y.get_name()));for(var w=y.get_child();null!=w;){try{var v=this.readAttachment(w,m,N.index,w.get_name(),n);if(null!=v){var G=N.index,C=w.get_name();if(null==v)throw tr.thrown(new $n("attachment cannot be null."));var X=new cd(G,C,v);if(!Rd.add(m.attachments,X)){var M=m.attachments.h[X.hashCode],S=null;if(null!=M)for(var k=0,B=M.length;k<B;){var Y=M[k++];if(D=null!=(F=X)&&(T=F,Y.slotIndex==T.slotIndex)&&Y.name==T.name){S=Y;break}}S.attachment=v}}}catch($){var W=tr.caught($).unwrap();throw tr.thrown(new Ld("Error reading attachment: "+w.get_name()+", skin: "+Ja.string(m),W))}w=w.get_next()}y=y.get_next()}n.skins.push(m),"default"==m.name&&(n.defaultSkin=m),f=f.get_next()}for(var j=this.linkedMeshes,H=0,Z=this.linkedMeshes.length;H<Z;){if(null==(m=null==(S=j[H]).skin?n.defaultSkin:n.findSkin(S.skin)))throw tr.thrown(new Ld("Skin not found: "+S.skin));var G=S.slotIndex,C=S.parent,I=m.lookup;if(G<0)throw tr.thrown(new $n("slotIndex must be >= 0."));if(null==C)throw tr.thrown(new $n("name cannot be null."));I.slotIndex=G;var q,K=0;if(0==(I.name=C).length)q=0;else{for(k=0,B=C.length;k<B;)K=(K<<5)-K+Jn.cca(C,k++);q=K}I.hashCode=q+37*G|0;var J=m.lookup,T=null;if(null!=(M=m.attachments.h[J.hashCode]))for(var $=0,W=M.length;$<W;){var F,D,_=M[$++];if(D=null!=(F=J)&&_.slotIndex==F.slotIndex&&_.name==F.name){T=_;break}}if(null==(a=null!=(A=T)?A.attachment:null))throw tr.thrown(new Ld("Parent mesh not found: "+S.parent));S.mesh.deformAttachment=S.inheritDeform?a:S.mesh;var I=S.mesh,E=a;null!=(I.parentMesh=E)&&(I.bones=E.bones,I.vertices=E.vertices,I.regionUVs=E.regionUVs,I.triangles=E.triangles,I.hullLength=E.hullLength,I.worldVerticesLength=E.worldVerticesLength,I.edges=E.edges,I.width=E.width,I.height=E.height),S.mesh.updateUVs(),++H}for(var s=this.linkedMeshes,P=(s.splice(0,s.length),t.getChild("events"));null!=P;)(h=new Xa(P.get_name())).intValue=P.getInt("int",0),h.floatValue=P.getFloat("float",0),h.stringValue=P.getString("string",""),h.audioPath=P.getString("audio",null),null!=h.audioPath&&(h.volume=P.getFloat("volume",1),h.balance=P.getFloat("balance",0)),n.events.push(h),P=P.get_next();for(var z=t.getChild("animations");null!=z;){try{this.readAnimation(z,z.get_name(),n)}catch(k){B=tr.caught(k).unwrap();throw tr.thrown(new Ld("Error reading animation: "+z.get_name(),B))}z=z.get_next()}return n},readAttachment:function(t,e,n,s,i){var a,r=this.scale;switch(s=t.getString("name",s),t.getString("type","region")){case"boundingbox":a=1;break;case"clipping":a=6;break;case"linkedmesh":a=3;break;case"mesh":a=2;break;case"path":a=4;break;case"point":a=5;break;default:a=0}if(0==a){var l=t.getString("path",s),o=this.attachmentLoader.newRegionAttachment(e,s,l);if(null==o)return null;o.path=l,o.x=t.getFloat("x",0)*r,o.y=t.getFloat("y",0)*r,o.scaleX=t.getFloat("scaleX",1),o.scaleY=t.getFloat("scaleY",1),o.rotation=t.getFloat("rotation",0),o.width=t.getFloat("width")*r,o.height=t.getFloat("height")*r;var l=t.getString("color",null),l=(null!=l&&kd.valueOfIntoColor(l,o.color),o.width),h=o.height,u=l/2,_=h/2,c=-u,d=-_,l=(o.region instanceof Fd&&(c+=(p=o.region).offsetX/p.originalWidth*l,d+=p.offsetY/p.originalHeight*h,90==p.degrees?(u-=(p.originalWidth-p.offsetX-p.packedHeight)/p.originalWidth*l,_-=(p.originalHeight-p.offsetY-p.packedWidth)/p.originalHeight*h):(u-=(p.originalWidth-p.offsetX-p.packedWidth)/p.originalWidth*l,_-=(p.originalHeight-p.offsetY-p.packedHeight)/p.originalHeight*h)),o.scaleX),p=o.scaleY,h=(c*=l,d*=p,u*=l,_*=p,o.rotation),l=Math.cos(Ai.degRad*h),p=Math.sin(Ai.degRad*h),h=o.x,f=o.y,g=c*l+h,c=c*p,m=d*l+f,d=d*p,h=u*l+h,u=u*p,l=_*l+f,f=_*p,_=o.offset;return _[0]=g-d,_[1]=m+c,_[2]=g-f,_[3]=l+c,_[4]=h-f,_[5]=l+u,_[6]=h-d,_[7]=m+u,o}if(1==a){p=this.attachmentLoader.newBoundingBoxAttachment(e,s);if(null==p)return null;this.readVertices(t,p,t.getInt("vertexCount")<<1);g=t.getString("color",null);return null!=g&&kd.valueOfIntoColor(g,p.color),p}if(2==a){c=t.getString("path",s),f=this.attachmentLoader.newMeshAttachment(e,s,c);if(null==f)return null;f.path=c;l=t.getString("color",null),h=(null!=l&&kd.valueOfIntoColor(l,f.color),f.width=t.getFloat("width",0)*r,f.height=t.getFloat("height",0)*r,t.getString("parent",null));return null!=h?this.linkedMeshes.push(new ud(f,t.getString("skin",null),n,h,t.getBoolean("deform",!0))):(d=t.require("uvs").asFloatArray(),this.readVertices(t,f,d.length),f.triangles=t.require("triangles").asShortArray(),f.regionUVs=d,f.updateUVs(),t.has("hull")&&(f.hullLength=t.require("hull").asInt()<<1),t.has("edges")&&(f.edges=t.require("edges").asShortArray())),f}if(3==a){_=t.getString("path",s),m=this.attachmentLoader.newMeshAttachment(e,s,_);if(null==m)return null;m.path=_;u=t.getString("color",null),o=(null!=u&&kd.valueOfIntoColor(u,m.color),m.width=t.getFloat("width",0)*r,m.height=t.getFloat("height",0)*r,t.getString("parent",null));return null!=o?this.linkedMeshes.push(new ud(m,t.getString("skin",null),n,o,t.getBoolean("deform",!0))):(g=t.require("uvs").asFloatArray(),this.readVertices(t,m,g.length),m.triangles=t.require("triangles").asShortArray(),m.regionUVs=g,m.updateUVs(),t.has("hull")&&(m.hullLength=t.require("hull").asInt()<<1),t.has("edges")&&(m.edges=t.require("edges").asShortArray())),m}if(4==a){p=this.attachmentLoader.newPathAttachment(e,s);if(null==p)return null;p.closed=t.getBoolean("closed",!1),p.constantSpeed=t.getBoolean("constantSpeed",!0);var c=t.getInt("vertexCount"),l=(this.readVertices(t,p,c<<1),c/3),A=0|(l=null==l?0:l),x=[];if(0<l){var b=x.length;if(A<b)x.splice(A,A-b);else if(b<A)for(;b<A;)x.push(0),++b}for(var y=0,w=t.require("lengths").get_child();null!=w;)x[y++]=w.asFloat()*r,w=w.get_next();p.lengths=x;h=t.getString("color",null);return null!=h&&kd.valueOfIntoColor(h,p.color),p}if(5==a){d=this.attachmentLoader.newPointAttachment(e,s);if(null==d)return null;d.x=t.getFloat("x",0)*r,d.y=t.getFloat("y",0)*r,d.rotation=t.getFloat("rotation",0);f=t.getString("color",null);return null!=f&&kd.valueOfIntoColor(f,d.color),d}if(6!=a)return null;_=this.attachmentLoader.newClippingAttachment(e,s);if(null==_)return null;u=t.getString("end",null);if(null!=u){n=i.findSlot(u);if(null==n)throw tr.thrown(new Ld("Clipping end slot not found: "+u));_.endSlot=n}this.readVertices(t,_,t.getInt("vertexCount")<<1);o=t.getString("color",null);return null!=o&&kd.valueOfIntoColor(o,_.color),_},readVertices:function(t,e,n){e.worldVerticesLength=n;var s=t.require("vertices").asFloatArray();if(n==s.length){if(1!=this.scale)for(var i=0,a=s.length;i<a;)s[i]*=this.scale,++i;e.vertices=s}else{for(var r=[],l=[],i=0,a=s.length;i<a;)for(var o=0|s[i++],h=(l.push(o),i+(o<<2));i<h;)l.push(0|s[i]),r.push(s[i+1]*this.scale),r.push(s[i+2]*this.scale),r.push(s[i+3]),i+=4;e.bones=l,e.vertices=r}},readAnimation:function(R,V,t){for(var Q=this.scale,e=[],n=R.getChild("slots");null!=n;){if(null==(Xn=t.findSlot(n.get_name())))throw tr.thrown(new Ld("Slot not found: "+n.get_name()));for(var s=n.get_child();null!=s;){if(null==(D=s.get_child()));else{var i=s.get_size();if("attachment"==(I=s.get_name())){for(var a=new Sa(i,Xn.index),r=0;null!=D;){var l=D.getFloat("time",0),O=D.getString("name");a.frames[r]=l,a.attachmentNames[r]=O,D=D.get_next(),++r}e.push(a)}else if("rgba"==I){for(var o=new ya(i,i<<2,Xn.index),L=D.getFloat("time",0),U=D.getString("color"),N=Ja.parseInt("0x"+U.substring(0,2))/255,G=Ja.parseInt("0x"+U.substring(2,4))/255,X=Ja.parseInt("0x"+U.substring(4,6))/255,Y=Ja.parseInt("0x"+U.substring(6,8))/255,h=0,u=0;;){var W=h;if(W*=5,o.frames[W]=L,o.frames[1+W]=N,o.frames[2+W]=G,o.frames[3+W]=X,o.frames[4+W]=Y,null==(E=D.get_next())){o.shrink(u);break}var _=E.getFloat("time",0),U=E.getString("color"),W=Ja.parseInt("0x"+U.substring(0,2))/255,j=Ja.parseInt("0x"+U.substring(2,4))/255,H=Ja.parseInt("0x"+U.substring(4,6))/255,Z=Ja.parseInt("0x"+U.substring(6,8))/255;null!=(P=D.get("curve"))&&((z=P).isString()?"stepped"==P.asString()&&o.setStepped(h):(yn=(z=P.getAtIndex(0)).asFloat(),wn=(z=z.get_next()).asFloat(),vn=(z=z.get_next()).asFloat(),z=z.get_next(),o.setBezier(u,h,0,L,N,yn,wn,vn,z.asFloat(),_,W),++u),(T=P).isString()?"stepped"==P.asString()&&o.setStepped(h):(Le=(T=P.getAtIndex(4)).asFloat(),Ue=(T=T.get_next()).asFloat(),Ne=(T=T.get_next()).asFloat(),T=T.get_next(),o.setBezier(u,h,1,L,G,Le,Ue,Ne,T.asFloat(),_,j),++u),(F=P).isString()?"stepped"==P.asString()&&o.setStepped(h):(Ge=(F=P.getAtIndex(8)).asFloat(),Xe=(F=F.get_next()).asFloat(),Ye=(F=F.get_next()).asFloat(),F=F.get_next(),o.setBezier(u,h,2,L,X,Ge,Xe,Ye,F.asFloat(),_,H),++u),(S=P).isString()?"stepped"==P.asString()&&o.setStepped(h):(ve=(S=P.getAtIndex(12)).asFloat(),Ce=(S=S.get_next()).asFloat(),Me=(S=S.get_next()).asFloat(),S=S.get_next(),o.setBezier(u,h,3,L,Y,ve,Ce,Me,S.asFloat(),_,Z),++u)),L=_,N=W,G=j,X=H,Y=Z,D=E,++h}e.push(o)}else if("rgb"==I){for(var q=new wa(i,3*i,Xn.index),K=D.getFloat("time",0),J=D.getString("color"),$=Ja.parseInt("0x"+J.substring(0,2))/255,tt=Ja.parseInt("0x"+J.substring(2,4))/255,et=Ja.parseInt("0x"+J.substring(4,6))/255,nt=0,st=0;;){var it=nt,it=(it<<=2,q.frames[it]=K,q.frames[1+it]=$,q.frames[2+it]=tt,q.frames[3+it]=et,D.get_next());if(null==it){q.shrink(st);break}var c,at,rt,lt,ot=it.getFloat("time",0),J=it.getString("color"),ht=Ja.parseInt("0x"+J.substring(0,2))/255,ut=Ja.parseInt("0x"+J.substring(2,4))/255,_t=Ja.parseInt("0x"+J.substring(4,6))/255;null!=(k=D.get("curve"))&&((B=k).isString()?"stepped"==k.asString()&&q.setStepped(nt):(Se=(B=k.getAtIndex(0)).asFloat(),ke=(B=B.get_next()).asFloat(),Be=(B=B.get_next()).asFloat(),B=B.get_next(),q.setBezier(st,nt,0,K,$,Se,ke,Be,B.asFloat(),ot,ht),++st),(c=k).isString()?"stepped"==k.asString()&&q.setStepped(nt):(Ie=(c=k.getAtIndex(4)).asFloat(),Te=(c=c.get_next()).asFloat(),Fe=(c=c.get_next()).asFloat(),c=c.get_next(),q.setBezier(st,nt,1,K,tt,Ie,Te,Fe,c.asFloat(),ot,ut),++st),(c=k).isString()?"stepped"==k.asString()&&q.setStepped(nt):(at=(c=k.getAtIndex(8)).asFloat(),rt=(c=c.get_next()).asFloat(),lt=(c=c.get_next()).asFloat(),c=c.get_next(),q.setBezier(st,nt,2,K,et,at,rt,lt,c.asFloat(),ot,_t),++st)),K=ot,$=ht,tt=ut,et=_t,D=it,++nt}e.push(q)}else if("alpha"==I)e.push(this.readTimeline(D,new va(i,i,Xn.index),0,1));else if("rgba2"==I){for(var d=new Ca(i,7*i,Xn.index),ct=D.getFloat("time",0),p=D.getString("light"),dt=Ja.parseInt("0x"+p.substring(0,2))/255,pt=Ja.parseInt("0x"+p.substring(2,4))/255,ft=Ja.parseInt("0x"+p.substring(4,6))/255,gt=Ja.parseInt("0x"+p.substring(6,8))/255,mt=(p=D.getString("dark"),Ja.parseInt("0x"+p.substring(0,2))/255),At=Ja.parseInt("0x"+p.substring(2,4))/255,xt=Ja.parseInt("0x"+p.substring(4,6))/255,f=0,g=0;;){var m=f,m=(m<<=3,d.frames[m]=ct,d.frames[1+m]=dt,d.frames[2+m]=pt,d.frames[3+m]=ft,d.frames[4+m]=gt,d.frames[5+m]=mt,d.frames[6+m]=At,d.frames[7+m]=xt,D.get_next());if(null==m){d.shrink(g);break}var bt,yt,wt,vt,Ct,Mt,St,kt,Bt,A,It,Tt,Ft=m.getFloat("time",0),p=m.getString("light"),Dt=Ja.parseInt("0x"+p.substring(0,2))/255,Et=Ja.parseInt("0x"+p.substring(2,4))/255,Pt=Ja.parseInt("0x"+p.substring(4,6))/255,zt=Ja.parseInt("0x"+p.substring(6,8))/255,Rt=(p=m.getString("dark"),Ja.parseInt("0x"+p.substring(0,2))/255),Vt=Ja.parseInt("0x"+p.substring(2,4))/255,Qt=Ja.parseInt("0x"+p.substring(4,6))/255,x=D.get("curve");null!=x&&((A=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(bt=(A=x.getAtIndex(0)).asFloat(),yt=(A=A.get_next()).asFloat(),wt=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,f,0,ct,dt,bt,yt,wt,A.asFloat(),Ft,Dt),++g),(bt=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(yt=(bt=x.getAtIndex(4)).asFloat(),wt=(bt=bt.get_next()).asFloat(),A=(bt=bt.get_next()).asFloat(),bt=bt.get_next(),d.setBezier(g,f,1,ct,pt,yt,wt,A,bt.asFloat(),Ft,Et),++g),(A=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(vt=(A=x.getAtIndex(8)).asFloat(),Ct=(A=A.get_next()).asFloat(),Mt=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,f,2,ct,ft,vt,Ct,Mt,A.asFloat(),Ft,Pt),++g),(vt=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(Ct=(vt=x.getAtIndex(12)).asFloat(),Mt=(vt=vt.get_next()).asFloat(),A=(vt=vt.get_next()).asFloat(),vt=vt.get_next(),d.setBezier(g,f,3,ct,gt,Ct,Mt,A,vt.asFloat(),Ft,zt),++g),(A=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(St=(A=x.getAtIndex(16)).asFloat(),kt=(A=A.get_next()).asFloat(),Bt=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,f,4,ct,mt,St,kt,Bt,A.asFloat(),Ft,Rt),++g),(St=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(kt=(St=x.getAtIndex(20)).asFloat(),Bt=(St=St.get_next()).asFloat(),A=(St=St.get_next()).asFloat(),St=St.get_next(),d.setBezier(g,f,5,ct,At,kt,Bt,A,St.asFloat(),Ft,Vt),++g),(A=x).isString()?"stepped"==x.asString()&&d.setStepped(f):(x=(A=x.getAtIndex(24)).asFloat(),It=(A=A.get_next()).asFloat(),Tt=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,f,6,ct,xt,x,It,Tt,A.asFloat(),Ft,Qt),++g)),ct=Ft,dt=Dt,pt=Et,ft=Pt,gt=zt,mt=Rt,At=Vt,xt=Qt,D=m,++f}e.push(d)}else{if("rgb2"!=I)throw tr.thrown(new Sd("Invalid timeline type for a slot: "+I+" ("+n.get_name()+")"));for(var b=new Ma(i,6*i,Xn.index),Ot=D.getFloat("time",0),y=D.getString("light"),Lt=Ja.parseInt("0x"+y.substring(0,2))/255,Ut=Ja.parseInt("0x"+y.substring(2,4))/255,Nt=Ja.parseInt("0x"+y.substring(4,6))/255,Gt=(y=D.getString("dark"),Ja.parseInt("0x"+y.substring(0,2))/255),Xt=Ja.parseInt("0x"+y.substring(2,4))/255,Yt=Ja.parseInt("0x"+y.substring(4,6))/255,w=0,v=0;;){var Wt=w,Wt=(Wt*=7,b.frames[Wt]=Ot,b.frames[1+Wt]=Lt,b.frames[2+Wt]=Ut,b.frames[3+Wt]=Nt,b.frames[4+Wt]=Gt,b.frames[5+Wt]=Xt,b.frames[6+Wt]=Yt,D.get_next());if(null==Wt){b.shrink(v);break}var jt,Ht,Zt,qt,Kt,Jt,$t,te,ee,C,ne=Wt.getFloat("time",0),y=Wt.getString("light"),se=Ja.parseInt("0x"+y.substring(0,2))/255,ie=Ja.parseInt("0x"+y.substring(2,4))/255,ae=Ja.parseInt("0x"+y.substring(4,6))/255,re=(y=Wt.getString("dark"),Ja.parseInt("0x"+y.substring(0,2))/255),le=Ja.parseInt("0x"+y.substring(2,4))/255,oe=Ja.parseInt("0x"+y.substring(4,6))/255,M=D.get("curve");null!=M&&((C=M).isString()?"stepped"==M.asString()&&b.setStepped(w):(jt=(C=M.getAtIndex(0)).asFloat(),Ht=(C=C.get_next()).asFloat(),Zt=(C=C.get_next()).asFloat(),C=C.get_next(),b.setBezier(v,w,0,Ot,Lt,jt,Ht,Zt,C.asFloat(),ne,se),++v),(jt=M).isString()?"stepped"==M.asString()&&b.setStepped(w):(Ht=(jt=M.getAtIndex(4)).asFloat(),Zt=(jt=jt.get_next()).asFloat(),C=(jt=jt.get_next()).asFloat(),jt=jt.get_next(),b.setBezier(v,w,1,Ot,Ut,Ht,Zt,C,jt.asFloat(),ne,ie),++v),(C=M).isString()?"stepped"==M.asString()&&b.setStepped(w):(qt=(C=M.getAtIndex(8)).asFloat(),Kt=(C=C.get_next()).asFloat(),Jt=(C=C.get_next()).asFloat(),C=C.get_next(),b.setBezier(v,w,2,Ot,Nt,qt,Kt,Jt,C.asFloat(),ne,ae),++v),(qt=M).isString()?"stepped"==M.asString()&&b.setStepped(w):(Kt=(qt=M.getAtIndex(12)).asFloat(),Jt=(qt=qt.get_next()).asFloat(),C=(qt=qt.get_next()).asFloat(),qt=qt.get_next(),b.setBezier(v,w,3,Ot,Gt,Kt,Jt,C,qt.asFloat(),ne,re),++v),(C=M).isString()?"stepped"==M.asString()&&b.setStepped(w):($t=(C=M.getAtIndex(16)).asFloat(),te=(C=C.get_next()).asFloat(),ee=(C=C.get_next()).asFloat(),C=C.get_next(),b.setBezier(v,w,4,Ot,Xt,$t,te,ee,C.asFloat(),ne,le),++v),($t=M).isString()?"stepped"==M.asString()&&b.setStepped(w):(te=($t=M.getAtIndex(20)).asFloat(),ee=($t=$t.get_next()).asFloat(),C=($t=$t.get_next()).asFloat(),$t=$t.get_next(),b.setBezier(v,w,5,Ot,Yt,te,ee,C,$t.asFloat(),ne,oe),++v)),Ot=ne,Lt=se,Ut=ie,Nt=ae,Gt=re,Xt=le,Yt=oe,D=Wt,++w}e.push(b)}}s=s.get_next()}n=n.get_next()}for(var he=R.getChild("bones");null!=he;){var ue=t.findBone(he.get_name());if(null==ue)throw tr.thrown(new Ld("Bone not found: "+he.get_name()));for(s=he.get_child();null!=s;){if(null==(D=s.get_child()));else{i=s.get_size();if("rotate"==(I=s.get_name()))e.push(this.readTimeline(D,new _a(i,i,ue.index),0,1));else if("translate"==I)e.push(this.readTimeline2(D,new ca(i,i<<1,ue.index),"x","y",0,Q));else if("translatex"==I)e.push(this.readTimeline(D,new da(i,i,ue.index),0,Q));else if("translatey"==I)e.push(this.readTimeline(D,new pa(i,i,ue.index),0,Q));else if("scale"==I)e.push(this.readTimeline2(D,new fa(i,i<<1,ue.index),"x","y",1,1));else if("scalex"==I)e.push(this.readTimeline(D,new ga(i,i,ue.index),1,1));else if("scaley"==I)e.push(this.readTimeline(D,new ma(i,i,ue.index),1,1));else if("shear"==I)e.push(this.readTimeline2(D,new Aa(i,i<<1,ue.index),"x","y",0,1));else if("shearx"==I)e.push(this.readTimeline(D,new xa(i,i,ue.index),0,1));else{if("sheary"!=I)throw tr.thrown(new Sd("Invalid timeline type for a bone: "+I+" ("+he.get_name()+")"));e.push(this.readTimeline(D,new ba(i,i,ue.index),0,1))}}s=s.get_next()}he=he.get_next()}for(s=R.getChild("ik");null!=s;){if(null==(D=s.get_child()));else{for(var _e=t.findIkConstraint(s.get_name()),a=new Ta(s.get_size(),s.get_size()<<1,t.getIkConstraints().indexOf(_e)),l=D.getFloat("time",0),ce=D.getFloat("mix",1),de=D.getFloat("softness",0)*Q,r=0,u=0;;){var h=r,pe=D.getBoolean("bendPositive",!0)?1:-1,fe=D.getBoolean("compress",!1),ge=D.getBoolean("stretch",!1);if(h*=6,a.frames[h]=l,a.frames[h+1]=ce,a.frames[h+2]=de,a.frames[h+3]=pe,a.frames[h+4]=fe?1:0,a.frames[h+5]=ge?1:0,null==(E=D.get_next())){a.shrink(u);break}_=E.getFloat("time",0),pe=E.getFloat("mix",1),fe=E.getFloat("softness",0)*Q;null!=(P=D.get("curve"))&&((z=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(yn=(z=P.getAtIndex(0)).asFloat(),wn=(z=z.get_next()).asFloat(),vn=(z=z.get_next()).asFloat(),z=z.get_next(),a.setBezier(u,r,0,l,ce,yn,wn,vn,z.asFloat(),_,pe),++u),(T=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Le=(T=P.getAtIndex(4)).asFloat(),Ue=(T=T.get_next()).asFloat()*Q,Ne=(T=T.get_next()).asFloat(),T=T.get_next(),a.setBezier(u,r,1,l,de,Le,Ue,Ne,T.asFloat()*Q,_,fe),++u)),l=_,ce=pe,de=fe,D=E,++r}e.push(a)}s=s.get_next()}for(s=R.getChild("transform");null!=s;){if(null==(D=s.get_child()));else{for(var _e=t.findTransformConstraint(s.get_name()),a=new Fa(s.get_size(),6*s.get_size(),t.getTransformConstraints().indexOf(_e)),l=D.getFloat("time",0),me=D.getFloat("mixRotate",1),Ae=D.getFloat("mixX",1),xe=D.getFloat("mixY",Ae),be=D.getFloat("mixScaleX",1),ye=D.getFloat("mixScaleY",be),we=D.getFloat("mixShearY",1),r=0,u=0;;){h=r;if(h*=7,a.frames[h]=l,a.frames[h+1]=me,a.frames[h+2]=Ae,a.frames[h+3]=xe,a.frames[h+4]=be,a.frames[h+5]=ye,a.frames[h+6]=we,null==(E=D.get_next())){a.shrink(u);break}var S,ve,Ce,Me,k,Se,ke,Be,B,Ie,Te,Fe,_=E.getFloat("time",0),De=E.getFloat("mixRotate",1),Ee=E.getFloat("mixX",1),Pe=E.getFloat("mixY",Ee),ze=E.getFloat("mixScaleX",1),Re=E.getFloat("mixScaleY",ze),Ve=E.getFloat("mixShearY",1);null!=(P=D.get("curve"))&&((z=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(yn=(z=P.getAtIndex(0)).asFloat(),wn=(z=z.get_next()).asFloat(),vn=(z=z.get_next()).asFloat(),z=z.get_next(),a.setBezier(u,r,0,l,me,yn,wn,vn,z.asFloat(),_,De),++u),(T=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Le=(T=P.getAtIndex(4)).asFloat(),Ue=(T=T.get_next()).asFloat(),Ne=(T=T.get_next()).asFloat(),T=T.get_next(),a.setBezier(u,r,1,l,Ae,Le,Ue,Ne,T.asFloat(),_,Ee),++u),(F=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Ge=(F=P.getAtIndex(8)).asFloat(),Xe=(F=F.get_next()).asFloat(),Ye=(F=F.get_next()).asFloat(),F=F.get_next(),a.setBezier(u,r,2,l,xe,Ge,Xe,Ye,F.asFloat(),_,Pe),++u),(S=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(ve=(S=P.getAtIndex(12)).asFloat(),Ce=(S=S.get_next()).asFloat(),Me=(S=S.get_next()).asFloat(),S=S.get_next(),a.setBezier(u,r,3,l,be,ve,Ce,Me,S.asFloat(),_,ze),++u),(k=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Se=(k=P.getAtIndex(16)).asFloat(),ke=(k=k.get_next()).asFloat(),Be=(k=k.get_next()).asFloat(),k=k.get_next(),a.setBezier(u,r,4,l,ye,Se,ke,Be,k.asFloat(),_,Re),++u),(B=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Ie=(B=P.getAtIndex(20)).asFloat(),Te=(B=B.get_next()).asFloat(),Fe=(B=B.get_next()).asFloat(),B=B.get_next(),a.setBezier(u,r,5,l,we,Ie,Te,Fe,B.asFloat(),_,Ve),++u)),l=_,me=De,Ae=Ee,xe=Pe,ye=Re,be=be=ze,D=E,++r}e.push(a)}s=s.get_next()}for(var Qe=R.getChild("path");null!=Qe;){if(null==(_e=t.findPathConstraint(Qe.get_name())))throw tr.thrown(new Ld("Path constraint not found: "+Qe.get_name()));for(var Oe=t.pathConstraints.indexOf(_e),s=Qe.get_child();null!=s;){if(null==(D=s.get_child()));else{var I,i=s.get_size();if("position"==(I=s.get_name()))e.push(this.readTimeline(D,new Da(i,i,Oe),0,0==_e.positionMode?Q:1));else if("spacing"==I)e.push(this.readTimeline(D,new Ea(i,i,Oe),0,0==_e.spacingMode||1==_e.spacingMode?Q:1));else if("mix"==I){for(a=new Pa(i,3*i,Oe),l=D.getFloat("time",0),me=D.getFloat("mixRotate",1),Ae=D.getFloat("mixX",1),xe=D.getFloat("mixY",Ae),r=0,u=0;;){h=r;if(h<<=2,a.frames[h]=l,a.frames[h+1]=me,a.frames[h+2]=Ae,a.frames[h+3]=xe,null==(E=D.get_next())){a.shrink(u);break}var T,Le,Ue,Ne,F,Ge,Xe,Ye,_=E.getFloat("time",0),De=E.getFloat("mixRotate",1),Ee=E.getFloat("mixX",1),Pe=E.getFloat("mixY",Ee);null!=(P=D.get("curve"))&&((z=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(yn=(z=P.getAtIndex(0)).asFloat(),wn=(z=z.get_next()).asFloat(),vn=(z=z.get_next()).asFloat(),z=z.get_next(),a.setBezier(u,r,0,l,me,yn,wn,vn,z.asFloat(),_,De),++u),(T=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Le=(T=P.getAtIndex(4)).asFloat(),Ue=(T=T.get_next()).asFloat(),Ne=(T=T.get_next()).asFloat(),T=T.get_next(),a.setBezier(u,r,1,l,Ae,Le,Ue,Ne,T.asFloat(),_,Ee),++u),(F=P).isString()?"stepped"==P.asString()&&a.setStepped(r):(Ge=(F=P.getAtIndex(8)).asFloat(),Xe=(F=F.get_next()).asFloat(),Ye=(F=F.get_next()).asFloat(),F=F.get_next(),a.setBezier(u,r,2,l,xe,Ge,Xe,Ye,F.asFloat(),_,Pe),++u)),l=_,me=De,Ae=Ee,xe=Pe,D=E,++r}e.push(a)}}s=s.get_next()}Qe=Qe.get_next()}for(var We=R.getChild("deform");null!=We;){var je=t.findSkin(We.get_name());if(null==je)throw tr.thrown(new Ld("Skin not found: "+We.get_name()));for(n=We.get_child();null!=n;){if(null==(Xn=t.findSlot(n.get_name())))throw tr.thrown(new Ld("Slot not found: "+n.get_name()));for(var D,s=n.get_child();null!=s;){if(null==(D=s.get_child()));else{var He=Xn.index,Ze=s.get_name(),qe=je.lookup;if(He<0)throw tr.thrown(new $n("slotIndex must be >= 0."));if(null==Ze)throw tr.thrown(new $n("name cannot be null."));qe.slotIndex=He;var Ke,Je=0;if(0==(qe.name=Ze).length)Ke=0;else{for(var $e=0,tn=Ze.length;$e<tn;)Je=(Je<<5)-Je+Jn.cca(Ze,$e++);Ke=Je}qe.hashCode=Ke+37*He|0;var en=je.lookup,nn=je.attachments.h[en.hashCode],sn=null;if(null!=nn)for(var an=0,rn=nn.length;an<rn;){var ln=nn[an++];if(null!=en&&ln.slotIndex==en.slotIndex&&ln.name==en.name){sn=ln;break}}qe=null!=sn?sn.attachment:null;if(null==qe)throw tr.thrown(new Ld("Deform attachment not found: "+s.get_name()));for(var on=null!=qe.bones,hn=qe.vertices,un=on?(hn.length/3|0)<<1:hn.length,a=new ka(s.get_size(),s.get_size(),Xn.index,qe),l=D.getFloat("time",0),r=0,u=0;;){var E,_n=null,cn=D.get("vertices");if(null==cn)if(on){var dn=0|(Ln=null==(Ln=un)?0:Ln),pn=[];if(0<Ln)if(dn<(Un=pn.length))pn.splice(dn,dn-Un);else if(Un<dn)for(;Un<dn;)pn.push(0),++Un;_n=pn}else _n=hn;else{var fn=0|(Nn=null==(Nn=un)?0:Nn),gn=[];if(0<Nn)if(fn<(Gn=gn.length))gn.splice(fn,fn-Gn);else if(Gn<fn)for(;Gn<fn;)gn.push(0),++Gn;var _n=gn,mn=D.getInt("offset",0);if(zd.copy(cn.asFloatArray(),0,gn,mn,cn.get_size()),1!=Q)for(var An=mn,xn=mn+cn.get_size();An<xn;)gn[An]*=Q,++An;if(!on)for(var bn=0;bn<un;)gn[bn]+=hn[bn],++bn}if(a.frames[r]=l,a.vertices[r]=_n,null==(E=D.get_next())){a.shrink(u);break}var P,_=E.getFloat("time",0);if(null!=(P=D.get("curve"))){var z=P;if(P.isString())"stepped"==P.asString()&&a.setStepped(r);else{for(var yn=(z=P.getAtIndex(0)).asFloat(),wn=(z=z.get_next()).asFloat(),vn=(z=z.get_next()).asFloat(),mn=(z=z.get_next()).asFloat(),Cn=a.curves,Mn=a.frames.length+18*u,cn=(Cn[r]=2+Mn,.03*(l-2*yn+vn)),_n=.03*mn-.06*wn,Sn=.006*(3*(yn-vn)-l+_),kn=.018*(wn-mn+.33333333),Bn=2*cn+Sn,In=2*_n+kn,Tn=.3*(yn-l)+cn+.16666667*Sn,Fn=.3*wn+_n+.16666667*kn,Dn=l+Tn,En=Fn,Pn=Mn+18;Mn<Pn;)Cn[Mn]=Dn,Cn[Mn+1]=En,Tn+=Bn,Fn+=In,Bn+=Sn,In+=kn,Dn+=Tn,En+=Fn,Mn+=2;++u}}l=_,D=E,++r}e.push(a)}s=s.get_next()}n=n.get_next()}We=We.get_next()}var zn=R.get("drawOrder");if(null!=zn){for(var a=new Ia(zn.get_size()),Rn=t.slots.length,r=0,Vn=zn.get_child();null!=Vn;){var Qn=null,On=Vn.get("offsets");if(null!=On){var Ln,Un,dn=0|(Ln=null==(Ln=Rn)?0:Ln),pn=[];if(0!=Ln)if(dn<(Un=pn.length))pn.splice(dn,dn-Un);else if(Un<dn)for(;Un<dn;)pn.push(0),++Un;for(Qn=pn,An=Rn-1;0<=An;)pn[An]=-1,--An;var Nn,Gn,fn=0|(Nn=null==(Nn=Rn-On.get_size())?0:Nn),gn=[];if(0!=Nn)if(fn<(Gn=gn.length))gn.splice(fn,fn-Gn);else if(Gn<fn)for(;Gn<fn;)gn.push(0),++Gn;for(var Xn,Yn=0,Wn=0,jn=On.get_child();null!=jn;){if(null==(Xn=t.findSlot(jn.getString("slot"))))throw tr.thrown(new Ld("Slot not found: "+jn.getString("slot")));for(;Yn!=Xn.index;)gn[Wn++]=Yn++;pn[Yn+++jn.getInt("offset")]=Yn-1,jn=jn.get_next()}for(;Yn<Rn;)gn[Wn++]=Yn++;for(bn=Rn-1;0<=bn;)-1==pn[bn]&&(pn[bn]=gn[--Wn]),--bn}l=Vn.getFloat("time",0);a.frames[r]=l,a.drawOrders[r]=Qn,Vn=Vn.get_next(),++r}e.push(a)}zn=R.get("events");if(null!=zn){for(var a=new Ba(zn.get_size()),r=0,Hn=zn.get_child();null!=Hn;){var Zn=t.findEvent(Hn.getString("name"));if(null==Zn)throw tr.thrown(new Ld("Event not found: "+Hn.getString("name")));var qn=new Ga(Hn.getFloat("time",0),Zn);qn.intValue=Hn.getInt("int",Zn.intValue),qn.floatValue=Hn.getFloat("float",Zn.floatValue),qn.stringValue=Hn.getString("string",Zn.stringValue),null!=qn.data.audioPath&&(qn.volume=Hn.getFloat("volume",Zn.volume),qn.balance=Hn.getFloat("balance",Zn.balance)),a.frames[r]=qn.time,a.events[r]=qn,Hn=Hn.get_next(),++r}e.push(a)}for(var Kn=0,An=0,xn=e.length;An<xn;)Kn=Math.max(Kn,e[An].getDuration()),++An;t.animations.push(new ia(V,e,Kn))},readTimeline:function(t,e,n,s){for(var i=t.getFloat("time",0),a=t.getFloat("value",n)*s,r=0,l=0;;){e.setFrame(r,i,a);var o=t.get_next();if(null==o)return e.shrink(l),e;var h,u,_,c=o.getFloat("time",0),d=o.getFloat("value",n)*s,p=t.get("curve");null!=p&&((h=p).isString()?"stepped"==p.asString()&&e.setStepped(r):(p=(h=p.getAtIndex(0)).asFloat(),u=(h=h.get_next()).asFloat()*s,_=(h=h.get_next()).asFloat(),h=h.get_next(),e.setBezier(l,r,0,i,a,p,u,_,h.asFloat()*s,c,d),++l)),i=c,a=d,t=o,++r}},readTimeline2:function(t,e,n,s,i,a){for(var r=t.getFloat("time",0),l=t.getFloat(n,i)*a,o=t.getFloat(s,i)*a,h=0,u=0;;){var _=h,_=(_*=3,e.frames[_]=r,e.frames[1+_]=l,e.frames[2+_]=o,t.get_next());if(null==_)return e.shrink(u),e;var c,d,p,f,g=_.getFloat("time",0),m=_.getFloat(n,i)*a,A=_.getFloat(s,i)*a,x=t.get("curve");null!=x&&((f=x).isString()?"stepped"==x.asString()&&e.setStepped(h):(c=(f=x.getAtIndex(0)).asFloat(),d=(f=f.get_next()).asFloat()*a,p=(f=f.get_next()).asFloat(),f=f.get_next(),e.setBezier(u,h,0,r,l,c,d,p,f.asFloat()*a,g,m),++u),(c=x).isString()?"stepped"==x.asString()&&e.setStepped(h):(d=(c=x.getAtIndex(4)).asFloat(),p=(c=c.get_next()).asFloat()*a,f=(c=c.get_next()).asFloat(),c=c.get_next(),e.setBezier(u,h,1,r,o,d,p,f,c.asFloat()*a,g,A),++u)),r=g,l=m,o=A,t=_,++h}},__class__:hd}),function(t,e,n,s,i){this.inheritDeform=!1,this.slotIndex=0,this.skin=null,this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=s,this.inheritDeform=i}),_d=((e["spine.LinkedMesh"]=ud).__name__="spine.LinkedMesh",ud.prototype={__class__:ud},function(t){if(this.lookup=new cd(0,"",null),this.constraints=[],this.bones=[],this.attachments=new fl,null==t)throw tr.thrown(new $n("name cannot be null."));this.name=t,Rd.orderedItems(this.attachments)}),cd=((e["spine.Skin"]=_d).__name__="spine.Skin",_d.prototype={toString:function(){return this.name},__class__:_d},function(t,e,n){if(this.hashCode=0,t<(this.slotIndex=0))throw tr.thrown(new $n("slotIndex must be >= 0."));if(null==e)throw tr.thrown(new $n("name cannot be null."));this.slotIndex=t;var s,i=0;if(0==(this.name=e).length)s=0;else{for(var a=0,r=e.length;a<r;)i=(i<<5)-i+Jn.cca(e,a++);s=i}this.hashCode=s+37*t|0,this.attachment=n}),dd=((e["spine.SkinEntry"]=cd).__name__="spine.SkinEntry",cd.prototype={__class__:cd},function(t,e){if(this.attachmentState=0,this.deform=[],this.attachmentTime=0,this.color=new kd,null==t)throw tr.thrown(new $n("data cannot be null."));if(null==e)throw tr.thrown(new $n("bone cannot be null."));this.data=t,this.bone=e,this.darkColor=null==t.darkColor?null:new kd;var n,s,i,a,e=this.color,t=this.data.color;e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a,null!=this.darkColor&&(e=this.darkColor,t=this.data.darkColor,e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a),null==this.data.attachmentName?this.attachment!=(n=null)&&(n instanceof Ad&&this.attachment instanceof Ad&&(i=this.attachment,(null!=(s=n).deformAttachment?s.deformAttachment:s)==(null!=i.deformAttachment?i.deformAttachment:i))||(a=this.deform).splice(0,a.length),this.attachment=n,this.attachmentTime=this.bone.skeleton.time):(this.attachment=null,n=this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName),this.attachment!=n&&(n instanceof Ad&&this.attachment instanceof Ad&&(i=this.attachment,(null!=(s=n).deformAttachment?s.deformAttachment:s)==(null!=i.deformAttachment?i.deformAttachment:i))||(a=this.deform).splice(0,a.length),this.attachment=n,this.attachmentTime=this.bone.skeleton.time))}),pd=((e["spine.Slot"]=dd).__name__="spine.Slot",dd.prototype={__class__:dd},function(t,e,n){if(this.color=new kd(1,1,1,1),t<(this.index=0))throw tr.thrown(new $n("index must be >= 0."));if(null==e)throw tr.thrown(new $n("name cannot be null."));if(null==n)throw tr.thrown(new $n("boneData cannot be null."));this.index=t,this.name=e,this.boneData=n}),fd=((e["spine.SlotData"]=pd).__name__="spine.SlotData",pd.prototype={__class__:pd},function(t,e){if(this.temp=new Pd,this.active=!1,this.mixShearY=0,this.mixScaleY=0,this.mixScaleX=0,this.mixY=0,this.mixX=0,this.mixRotate=0,null==t)throw tr.thrown(new $n("data cannot be null."));if(null==e)throw tr.thrown(new $n("skeleton cannot be null."));this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=[];for(var n=0,s=t.bones;n<s.length;)this.bones.push(e.findBone(s[n++].name));this.target=e.findBone(t.target.name)}),gd=((e["spine.TransformConstraint"]=fd).__name__="spine.TransformConstraint",fd.__interfaces__=[Oa],fd.prototype={update:function(){if(0!=this.mixRotate||0!=this.mixX||0!=this.mixY||0!=this.mixScaleX||0!=this.mixScaleX||0!=this.mixShearY)if(this.data.local)if(this.data.relative)for(var t=this.mixRotate,e=this.mixX,R=this.mixY,n=this.mixScaleX,s=this.mixScaleY,i=this.mixShearY,a=this.target,V=this.bones,r=0,Q=this.bones.length;r<Q;)(c=V[r]).updateWorldTransformWithData(c.ax+(a.ax+this.data.offsetX)*e,c.ay+(a.ay+this.data.offsetY)*R,c.arotation+(a.arotation+this.data.offsetRotation)*t,c.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*n+1),c.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*s+1),c.ashearX,c.ashearY+(a.ashearY+this.data.offsetShearY)*i),++r;else for(t=this.mixRotate,e=this.mixX,R=this.mixY,n=this.mixScaleX,s=this.mixScaleY,i=this.mixShearY,a=this.target,V=this.bones,r=0,Q=this.bones.length;r<Q;){var O=(c=V[r]).arotation,l=(0!=t&&(p=a.arotation-O+this.data.offsetRotation,O+=(p-=360*(16384-(16384.499999999996-p/360|0)))*t),c.ax),o=c.ay,L=(l+=(a.ax-l+this.data.offsetX)*e,o+=(a.ay-o+this.data.offsetY)*R,c.ascaleX),U=c.ascaleY,N=(0!=n&&0!=L&&(L=(L+(a.ascaleX-L+this.data.offsetScaleX)*n)/L),0!=s&&0!=U&&(U=(U+(a.ascaleY-U+this.data.offsetScaleY)*s)/U),c.ashearY);0!=i&&(w=a.ashearY-N+this.data.offsetShearY,N+=(w-=360*(16384-(16384.499999999996-w/360|0)))*i),c.updateWorldTransformWithData(l,o,O,L,U,c.ashearX,N),++r}else if(this.data.relative)for(var t=this.mixRotate,e=this.mixX,R=this.mixY,n=this.mixScaleX,s=this.mixScaleY,i=this.mixShearY,G=0!=e||0!=R,h=(a=this.target).a,u=a.b,_=a.c,X=0<h*(d=a.d)-u*_?Ai.degRad:-Ai.degRad,Y=this.data.offsetRotation*X,W=this.data.offsetShearY*X,V=this.bones,r=0,Q=this.bones.length;r<Q;){var c=V[r];if(0!=t&&(j=c.a,H=c.b,Z=c.c,q=c.d,3.1415927<(p=Math.atan2(_,h)+Y)?p-=6.2831854:p<-3.1415927&&(p+=6.2831854),p*=t,f=Math.cos(p),g=Math.sin(p),c.a=f*j-g*Z,c.b=f*H-g*q,c.c=g*j+f*Z,c.d=g*H+f*q),G){if((m=this.temp).x=this.data.offsetX,m.y=this.data.offsetY,null==m)throw tr.thrown(new $n("local cannot be null."));l=m.x,o=m.y;m.x=l*a.a+o*a.b+a.worldX,m.y=l*a.c+o*a.d+a.worldY,c.worldX+=m.x*e,c.worldY+=m.y*R}0!=n&&(A=(Math.sqrt(h*h+_*_)-1+this.data.offsetScaleX)*n+1,c.a*=A,c.c*=A),0!=s&&(x=(Math.sqrt(u*u+d*d)-1+this.data.offsetScaleY)*s+1,c.b*=x,c.d*=x),0<i&&(3.1415927<(w=Math.atan2(d,u)-Math.atan2(_,h))?w-=6.2831854:w<-3.1415927&&(w+=6.2831854),b=c.b,y=c.d,w=Math.atan2(y,b)+(w-1.57079635+W)*i,J=Math.sqrt(b*b+y*y),c.b=Math.cos(w)*J,c.d=Math.sin(w)*J),null==(v=c.parent)?(c.ax=c.worldX-c.skeleton.x,c.ay=c.worldY-c.skeleton.y,C=c.a,M=c.b,S=c.c,k=c.d,c.arotation=Math.atan2(S,C)*Ai.radDeg,c.ascaleX=Math.sqrt(C*C+S*S),c.ascaleY=Math.sqrt(M*M+k*k),c.ashearX=0,c.ashearY=Math.atan2(C*M+S*k,C*k-M*S)*Ai.radDeg):(B=v.a,I=v.b,T=v.c,F=1/(B*($=v.d)-I*T),tt=c.worldX-v.worldX,et=c.worldY-v.worldY,c.ax=tt*$*F-et*I*F,c.ay=et*B*F-tt*T*F,D=(nt=F*$)*c.a-(it=F*I)*c.c,E=nt*c.b-it*c.d,P=(st=F*B)*c.c-(at=F*T)*c.a,z=st*c.d-at*c.b,c.ashearX=0,c.ascaleX=Math.sqrt(D*D+P*P),1e-4<c.ascaleX?(c.ascaleY=(rt=D*z-E*P)/c.ascaleX,c.ashearY=Math.atan2(D*E+P*z,rt)*Ai.radDeg,c.arotation=Math.atan2(P,D)*Ai.radDeg):(c.ascaleX=0,c.ascaleY=Math.sqrt(E*E+z*z),c.ashearY=0,c.arotation=90-Math.atan2(z,E)*Ai.radDeg)),++r}else for(var d,t=this.mixRotate,e=this.mixX,R=this.mixY,n=this.mixScaleX,s=this.mixScaleY,i=this.mixShearY,G=0!=e||0!=R,h=(a=this.target).a,u=a.b,_=a.c,X=0<h*(d=a.d)-u*_?Ai.degRad:-Ai.degRad,Y=this.data.offsetRotation*X,W=this.data.offsetShearY*X,V=this.bones,r=0,Q=this.bones.length;r<Q;){var j,H,Z,q,p,f,g,m,A,x,b,y,K,w,J,v,C,M,S,k,B,I,T,$,F,tt,et,nt,st,it,at,D,E,P,z,rt,c=V[r];if(0!=t&&(j=c.a,H=c.b,Z=c.c,q=c.d,3.1415927<(p=Math.atan2(_,h)-Math.atan2(Z,j)+Y)?p-=6.2831854:p<-3.1415927&&(p+=6.2831854),p*=t,f=Math.cos(p),g=Math.sin(p),c.a=f*j-g*Z,c.b=f*H-g*q,c.c=g*j+f*Z,c.d=g*H+f*q),G){if((m=this.temp).x=this.data.offsetX,m.y=this.data.offsetY,null==m)throw tr.thrown(new $n("local cannot be null."));l=m.x,o=m.y;m.x=l*a.a+o*a.b+a.worldX,m.y=l*a.c+o*a.d+a.worldY,c.worldX+=(m.x-c.worldX)*e,c.worldY+=(m.y-c.worldY)*R}0!=n&&(0!=(A=Math.sqrt(c.a*c.a+c.c*c.c))&&(A=(A+(Math.sqrt(h*h+_*_)-A+this.data.offsetScaleX)*n)/A),c.a*=A,c.c*=A),0!=s&&(0!=(x=Math.sqrt(c.b*c.b+c.d*c.d))&&(x=(x+(Math.sqrt(u*u+d*d)-x+this.data.offsetScaleY)*s)/x),c.b*=x,c.d*=x),0<i&&(b=c.b,y=c.d,K=Math.atan2(y,b),3.1415927<(w=Math.atan2(d,u)-Math.atan2(_,h)-(K-Math.atan2(c.c,c.a)))?w-=6.2831854:w<-3.1415927&&(w+=6.2831854),w=K+(w+W)*i,J=Math.sqrt(b*b+y*y),c.b=Math.cos(w)*J,c.d=Math.sin(w)*J),null==(v=c.parent)?(c.ax=c.worldX-c.skeleton.x,c.ay=c.worldY-c.skeleton.y,C=c.a,M=c.b,S=c.c,k=c.d,c.arotation=Math.atan2(S,C)*Ai.radDeg,c.ascaleX=Math.sqrt(C*C+S*S),c.ascaleY=Math.sqrt(M*M+k*k),c.ashearX=0,c.ashearY=Math.atan2(C*M+S*k,C*k-M*S)*Ai.radDeg):(B=v.a,I=v.b,T=v.c,F=1/(B*($=v.d)-I*T),tt=c.worldX-v.worldX,et=c.worldY-v.worldY,c.ax=tt*$*F-et*I*F,c.ay=et*B*F-tt*T*F,D=(nt=F*$)*c.a-(it=F*I)*c.c,E=nt*c.b-it*c.d,P=(st=F*B)*c.c-(at=F*T)*c.a,z=st*c.d-at*c.b,c.ashearX=0,c.ascaleX=Math.sqrt(D*D+P*P),1e-4<c.ascaleX?(c.ascaleY=(rt=D*z-E*P)/c.ascaleX,c.ashearY=Math.atan2(D*E+P*z,rt)*Ai.radDeg,c.arotation=Math.atan2(P,D)*Ai.radDeg):(c.ascaleX=0,c.ascaleY=Math.sqrt(E*E+z*z),c.ashearY=0,c.arotation=90-Math.atan2(z,E)*Ai.radDeg)),++r}},__class__:fd},function(t){this.local=!1,this.relative=!1,this.offsetShearY=0,this.offsetScaleY=0,this.offsetScaleX=0,this.offsetY=0,this.offsetX=0,this.offsetRotation=0,this.mixShearY=0,this.mixScaleY=0,this.mixScaleX=0,this.mixY=0,this.mixX=0,this.mixRotate=0,this.bones=[],Na.call(this,t)}),md=((e["spine.TransformConstraintData"]=gd).__name__="spine.TransformConstraintData",gd.__super__=Na,gd.prototype=t(Na.prototype,{__class__:gd}),(e["spine.attachments.AttachmentLoader"]=Ka).__name__="spine.attachments.AttachmentLoader",Ka.__isInterface__=!0,Ka.prototype={__class__:Ka},function(t){if(null==t)throw tr.thrown(new $n("atlas cannot be null."));this.atlas=t}),Ad=((e["spine.attachments.AtlasAttachmentLoader"]=md).__name__="spine.attachments.AtlasAttachmentLoader",md.__interfaces__=[Ka],md.prototype={newRegionAttachment:function(t,e,n){var s=this.atlas.findRegion(n);if(null==s)throw tr.thrown(new Sd("Region not found in atlas: "+n+" (region attachment: "+e+")"));n=new Cd(e);if(null==s)throw tr.thrown(new $n("region cannot be null."));n.region=s;e=n.uvs;return s instanceof Fd&&90==s.degrees?(e[4]=s.u,e[5]=s.v2,e[6]=s.u,e[7]=s.v,e[0]=s.u2,e[1]=s.v,e[2]=s.u2,e[3]=s.v2):(e[2]=s.u,e[3]=s.v2,e[4]=s.u,e[5]=s.v,e[6]=s.u2,e[7]=s.v,e[0]=s.u2,e[1]=s.v2),n},newMeshAttachment:function(t,e,n){var s=this.atlas.findRegion(n);if(null==s)throw tr.thrown(new Sd("Region not found in atlas: "+n+" (mesh attachment: "+e+")"));n=new yd(e);return n.setRegion(s),n},newBoundingBoxAttachment:function(t,e){return new xd(e)},newClippingAttachment:function(t,e){return new bd(e)},newPathAttachment:function(t,e){return new wd(e)},newPointAttachment:function(t,e){return new vd(e)},__class__:md},(e["spine.attachments.Attachment"]=sr).__name__="spine.attachments.Attachment",sr.prototype={toString:function(){return this.name},__class__:sr},function(t){this.deformAttachment=null,this.worldVerticesLength=0,this.id=Ad.nextID++,sr.call(this,t)}),xd=((e["spine.attachments.VertexAttachment"]=Ad).__name__="spine.attachments.VertexAttachment",Ad.__super__=sr,Ad.prototype=t(sr.prototype,{__class__:Ad}),function(t){this.color=new kd(.38,.94,0,1),Ad.call(this,t)}),bd=((e["spine.attachments.BoundingBoxAttachment"]=xd).__name__="spine.attachments.BoundingBoxAttachment",xd.__super__=Ad,xd.prototype=t(Ad.prototype,{__class__:xd}),function(t){this.color=new kd(.2275,.2275,.8078,1),Ad.call(this,t)}),yd=((e["spine.attachments.ClippingAttachment"]=bd).__name__="spine.attachments.ClippingAttachment",bd.__super__=Ad,bd.prototype=t(Ad.prototype,{__class__:bd}),function(t){this.height=0,this.width=0,this.hullLength=0,this.color=new kd(1,1,1,1),this.uvs=null,Ad.call(this,t)}),wd=((e["spine.attachments.MeshAttachment"]=yd).__name__="spine.attachments.MeshAttachment",yd.__super__=Ad,yd.prototype=t(Ad.prototype,{setRegion:function(t){if(null==t)throw tr.thrown(new $n("region cannot be null."));this.region=t},getRegion:function(){if(null==this.region)throw tr.thrown(new Md("Region has not been set: "+Ja.string(this)));return this.region},updateUVs:function(){var t=this.regionUVs;if(null==this.uvs||this.uvs.length!=t.length){var e=t.length,n=0|(e=null==e?0:e),s=[];if(0<e){var i=s.length;if(n<i)s.splice(n,n-i);else if(i<n)for(;i<n;)s.push(0),++i}this.uvs=s}var a=this.uvs,r=a.length,l=0,o=0,h=0,u=0;if(this.region instanceof Fd){var l=this.region.u,o=this.region.v,e=this.region,_=e.page.width,c=e.page.height,d=e.degrees;if(90==d){l-=(e.originalHeight-e.offsetY-e.packedWidth)/_,o-=(e.originalWidth-e.offsetX-e.packedHeight)/c;for(var h=e.originalHeight/_,u=e.originalWidth/c,p=0;p<r;)a[p]=l+t[p+1]*h,a[p+1]=o+(1-t[p])*u,p+=2;return}if(180==d){l-=(e.originalWidth-e.offsetX-e.packedWidth)/_,o-=e.offsetY/c,h=e.originalWidth/_,u=e.originalHeight/c;for(var f=0;f<r;)a[f]=l+(1-t[f])*h,a[f+1]=o+(1-t[f+1])*u,f+=2;return}if(270==d){l-=e.offsetY/_,o-=e.offsetX/c,h=e.originalHeight/_,u=e.originalWidth/c;for(var g=0;g<r;)a[g]=l+(1-t[g+1])*h,a[g+1]=o+t[g]*u,g+=2;return}l-=e.offsetX/_,o-=(e.originalHeight-e.offsetY-e.packedHeight)/c,h=e.originalWidth/_,u=e.originalHeight/c}else null==this.region?(l=o=0,h=u=1):(l=this.region.u,o=this.region.v,h=this.region.u2-l,u=this.region.v2-o);for(p=0;p<r;)a[p]=l+t[p]*h,a[p+1]=o+t[p+1]*u,p+=2},__class__:yd}),function(t){this.color=new kd(1,.5,0,1),this.constantSpeed=!1,this.closed=!1,Ad.call(this,t)}),vd=((e["spine.attachments.PathAttachment"]=wd).__name__="spine.attachments.PathAttachment",wd.__super__=Ad,wd.prototype=t(Ad.prototype,{__class__:wd}),function(t){this.color=new kd(.9451,.9451,0,1),this.rotation=0,this.y=0,this.x=0,sr.call(this,t)}),Cd=((e["spine.attachments.PointAttachment"]=vd).__name__="spine.attachments.PointAttachment",vd.__super__=sr,vd.prototype=t(sr.prototype,{__class__:vd}),function(t){this.color=new kd(1,1,1,1);var e=[],n=e.length;if(8<n)e.splice(8,8-n);else if(n<8)for(;n<8;)e.push(0),++n;if(this.offset=e,8<(n=(e=[]).length))e.splice(8,8-n);else if(n<8)for(;n<8;)e.push(0),++n;this.uvs=e,this.height=0,this.width=0,this.rotation=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,sr.call(this,t)}),Md=((e["spine.attachments.RegionAttachment"]=Cd).__name__="spine.attachments.RegionAttachment",Cd.__super__=sr,Cd.prototype=t(sr.prototype,{__class__:Cd}),function(t){za.call(this,t=null==t?"":t),this.name="IllegalStateException"}),Sd=((e["spine.support.error.IllegalStateException"]=Md).__name__="spine.support.error.IllegalStateException",Md.__super__=za,Md.prototype=t(za.prototype,{__class__:Md}),function(t){za.call(this,t=null==t?"":t),this.name="RuntimeException"}),kd=((e["spine.support.error.RuntimeException"]=Sd).__name__="spine.support.error.RuntimeException",Sd.__super__=za,Sd.prototype=t(za.prototype,{__class__:Sd}),function(t,e,n,s){null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),this.r=t=null==t?0:t,this.g=e,this.b=n,this.a=s}),Bd=((e["spine.support.graphics.Color"]=kd).__name__="spine.support.graphics.Color",kd.valueOf=function(t){return"#"==t.charAt(0)&&(t=t.substring(1)),"0x"==Jn.substr(t,0,2)&&(t=t.substring(2)),new kd(Ja.parseInt("0x"+t.substring(0,2))/255,Ja.parseInt("0x"+t.substring(2,4))/255,Ja.parseInt("0x"+t.substring(4,6))/255,(8!=t.length?255:Ja.parseInt("0x"+t.substring(6,8)))/255)},kd.valueOfIntoColor=function(t,e){"#"==t.charAt(0)&&(t=t.substring(1)),"0x"==Jn.substr(t,0,2)&&(t=t.substring(2));var n=Ja.parseInt("0x"+t.substring(0,2)),s=Ja.parseInt("0x"+t.substring(2,4)),i=Ja.parseInt("0x"+t.substring(4,6)),t=8!=t.length?255:Ja.parseInt("0x"+t.substring(6,8));return null==e?e=new kd(n/255,s/255,i/255,t/255):(e.r=n/255,e.g=s/255,e.b=i/255,e.a=t/255),e},kd.prototype={__class__:kd},function(t,e){this.regions=[],this.pages=[],null!=t&&this.load(null==t?"null":""+t,e)}),Id=((e["spine.support.graphics.TextureAtlas"]=Bd).__name__="spine.support.graphics.TextureAtlas",Bd.prototype={load:function(t,e){if(null==e)throw tr.thrown(new $n("textureLoader cannot be null."));this.textureLoader=e;for(var n=new Id(t),s=[null,null,null,null],i=null;;){var a=n.readLine();if(null==a)break;if(0==(a=n.trim(a)).length)i=null;else if(null==i){(i=new Td).name=a,i.uWrap=Dd.clampToEdge,i.vWrap=Dd.clampToEdge;for(var r=n.nextLineKey();null!=r;){switch(r){case"filter":n.readTuple(s),i.minFilter=s[0],i.magFilter=s[1];break;case"format":i.format=n.readValue();break;case"repeat":var l=n.readValue();"x"==l?i.uWrap=Dd.repeat:"y"==l?i.vWrap=Dd.repeat:"xy"==l&&(i.uWrap=i.vWrap=Dd.repeat);break;case"scale":n.readTuple(s),i.scale=parseFloat(s[0]);break;case"size":n.readTuple(s),i.width=Ja.parseInt(s[0]),i.height=Ja.parseInt(s[1]);break;default:n.readLine()}r=n.nextLineKey()}null==i.format&&(i.format="rgba8888"),e.loadPage(i,a),this.pages[this.pages.length]=i}else{for(var o=new Fd,h=(o.name=a,o.page=i,0),u=0,_=0,c=0,d=0,p=0,f=n.nextLineKey();null!=f;){switch(f){case"bounds":n.readTuple(s),h=Ja.parseInt(s[0]),u=Ja.parseInt(s[1]),_=Ja.parseInt(s[2]),c=Ja.parseInt(s[3]);break;case"index":o.index=Ja.parseInt(n.readValue());break;case"offset":n.readTuple(s),o.offsetX=Ja.parseInt(s[0]),o.offsetY=Ja.parseInt(s[1]);break;case"offsets":n.readTuple(s),o.offsetX=Ja.parseInt(s[0]),o.offsetY=Ja.parseInt(s[1]),d=Ja.parseInt(s[2]),p=Ja.parseInt(s[3]);break;case"orig":n.readTuple(s),d=Ja.parseInt(s[0]),p=Ja.parseInt(s[1]);break;case"pad":n.readTuple(s),o.pads=[Ja.parseInt(s[0]),Ja.parseInt(s[1]),Ja.parseInt(s[2]),Ja.parseInt(s[3])];break;case"rotate":var g=n.readValue();o.degrees="true"==g||"90"==g?90:0;break;case"size":n.readTuple(s),_=Ja.parseInt(s[0]),c=Ja.parseInt(s[1]);break;case"split":n.readTuple(s),o.splits=[Ja.parseInt(s[0]),Ja.parseInt(s[1]),Ja.parseInt(s[2]),Ja.parseInt(s[3])];break;case"xy":n.readTuple(s),h=Ja.parseInt(s[0]),u=Ja.parseInt(s[1]);break;default:n.readLine()}f=n.nextLineKey()}o.u=h/i.width,o.v=u/i.height,90==o.degrees?(o.u2=(h+c)/i.width,o.v2=(u+_)/i.height):(o.u2=(h+_)/i.width,o.v2=(u+c)/i.height),o.x=h,o.y=u,o.width=0|Math.abs(_),o.height=0|Math.abs(c),o.originalWidth=0!=d?d:o.width,o.originalHeight=0!=p?p:o.height,90==o.degrees?(o.packedWidth=o.height,o.packedHeight=o.width):(o.packedWidth=o.width,o.packedHeight=o.height),e.loadRegion(o),this.regions[this.regions.length]=o}}},findRegion:function(t){for(var e=0,n=this.regions.length;e<n;){if(this.regions[e].name==t)return this.regions[e];++e}return null},__class__:Bd},function(t){this.lines=ut.replace(ut.replace(ut.trim(t),"\r\n","\n"),"\r","\n").split("\n"),this.index=0}),Td=((e["spine.support.graphics.Reader"]=Id).__name__="spine.support.graphics.Reader",Id.prototype={trim:function(t){return ut.trim(t)},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},nextLineKey:function(){var t,e;return!(this.index>=this.lines.length)&&-1!=(e=(t=this.lines[this.index]).indexOf(":"))?ut.trim(t.substring(0,e)):null},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw tr.thrown(new za("Invalid line: "+t));return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw tr.thrown(new za("Invalid line: "+e));for(var s=0,i=n+1;s<3;){var a=e.indexOf(",",i);if(-1==a)break;t[s]=this.trim(Jn.substr(e,i,a-i)),i=a+1,++s}return t[s]=this.trim(e.substring(i)),s+1},__class__:Id},function(){this.scale=1,this.height=0,this.width=0}),Fd=((e["spine.support.graphics.AtlasPage"]=Td).__name__="spine.support.graphics.AtlasPage",Td.prototype={__class__:Td},(e["spine.support.graphics.TextureRegion"]=ir).__name__="spine.support.graphics.TextureRegion",ir.prototype={__class__:ir},function(){this.degrees=0,this.index=-1,this.originalHeight=0,this.originalWidth=0,this.offsetY=0,this.offsetX=0,this.packedHeight=0,this.packedWidth=0,this.height=0,this.width=0,this.y=0,this.x=0,ir.call(this)}),Dd=((e["spine.support.graphics.AtlasRegion"]=Fd).__name__="spine.support.graphics.AtlasRegion",Fd.__super__=ir,Fd.prototype=t(ir.prototype,{__class__:Fd}),function(t,e){this.ordinal=t,this.name=e}),Ed=((e["spine.support.graphics.TextureWrap"]=Dd).__name__="spine.support.graphics.TextureWrap",Dd.prototype={__class__:Dd},function(){}),Pd=((e["spine.support.math.MathUtils"]=Ed).__name__="spine.support.math.MathUtils",function(t,e){null==e&&(e=0),null==t&&(t=0),this.y=0,this.x=0,this.x=t,this.y=e}),zd=((e["spine.support.math.Vector2"]=Pd).__name__="spine.support.math.Vector2",Pd.prototype={__class__:Pd},(e["spine.support.utils._AnimationStateMap.Entry"]=ar).__name__="spine.support.utils._AnimationStateMap.Entry",ar.prototype={__class__:ar},{}),Rd=(zd.copy=function(t,e,n,s,i){for(var a,r=e,l=s,o=i+e;r<o;)a=t[r],n[l]=a,++r,++l},{}),Vd=(Rd.__properties__={get_size:"get_size"},Rd.add=function(t,e){var n=null,s=e.hashCode,i=t.h[s];if(null==i)t.h[s]=i=[];else for(var a=0,r=i.length;a<r;){var l=i[a++];if(null!=(u=e)&&l.slotIndex==(_=u).slotIndex&&l.name==_.name){n=l;break}}for(var o=0,h=!1,a=0,r=i;a<r.length;){var u,_,l=r[a];if(++a,null!=(u=e)&&l.slotIndex==(_=u).slotIndex&&l.name==_.name){i[o]=e,h=!0;break}++o}return h||i.push(e),null==n},Rd.orderedItems=function(t){for(var e=[],n=t.iterator();n.hasNext();)for(var s=n.next(),i=0,a=s.length;i<a;)e.push(s[i++]);return e},Rd.get_size=function(t){for(var e=0,n=t.iterator();n.hasNext();)for(var s=0,i=n.next().length;s<i;)++s,++e;return e},{}),Qd=(Vd.fill=function(t,e,n,s){for(var i=e;i<n;)t[i++]=s},function(t,e,n){this.data=t,this.index=e,this.keys=n}),Od=((e["spine.support.utils.JsonChild"]=Qd).__name__="spine.support.utils.JsonChild",Qd.__interfaces__=[dt],Qd.prototype={has:function(t){return null!=this.get(t)},require:function(t){return this.get(t)},get:function(t){return Object.prototype.hasOwnProperty.call(this.data[this.index],t)?new pt(Z.field(this.data[this.index],t)):null},getAtIndex:function(t){return this.data[this.index]instanceof Array?new Qd(this.data[this.index],t):null},getChild:function(t){t=Z.field(this.data[this.index],t);return null==t?null:new pt(t).get_child()},getString:function(t,e){return Object.prototype.hasOwnProperty.call(this.data[this.index],t)?Z.field(this.data[this.index],t):e},getFloat:function(t,e){return null==e&&(e=0),"number"==typeof t&&(0|t)===t?this.data[this.index]instanceof Array?this.data[this.index][t]:0:Object.prototype.hasOwnProperty.call(this.data[this.index],t)?Z.field(this.data[this.index],t):e},getInt:function(t,e){return null==e&&(e=0),Object.prototype.hasOwnProperty.call(this.data[this.index],t)?Z.field(this.data[this.index],t):e},getBoolean:function(t,e){return null==e&&(e=!1),Object.prototype.hasOwnProperty.call(this.data[this.index],t)?Z.field(this.data[this.index],t):e},asString:function(){return this.data[this.index]},asFloat:function(){return this.data[this.index]},asInt:function(){return this.data[this.index]},isString:function(){return"string"==typeof this.data[this.index]},get_next:function(){return this.index<this.data.length-1?new Qd(this.data,this.index+1,this.keys):null},get_name:function(){return null!=this.keys?this.keys[this.index]:null},get_size:function(){return this.data[this.index].length},get_child:function(){var t=this.data[this.index];if(null==t)return null;if(t instanceof Array)return new Qd(t,0);for(var e=[],n=[],s=0,i=Z.fields(t);s<i.length;){var a=i[s];++s,e.push(a),n.push(Z.field(t,a))}return 0==e.length?null:new Qd(n,0,e)},asFloatArray:function(){return this.data[this.index]},asShortArray:function(){return this.data[this.index]},__class__:Qd,__properties__:{get_child:"get_child",get_size:"get_size",get_name:"get_name",get_next:"get_next"}},{}),Ld=(Od.addAll=function(t,e){for(var n=!1,s=0,i=e.length;s<i;){var a=e[s++];-1==t.indexOf(a)&&(n=!0,t.push(a))}return n},function(t,e){null==t&&(t=""),null!=e&&(""!=t?t+=" "+Ja.string(e):t=""+Ja.string(e)),za.call(this,t),this.name="SerializationException"}),Ud=((e["spine.support.utils.SerializationException"]=Ld).__name__="spine.support.utils.SerializationException",Ld.__super__=za,Ld.prototype=t(za.prototype,{__class__:Ld}),function(){this.snapshots=[],this.snapshotIndex=-1,this.array=[]}),Ai=((e["spine.support.utils.SnapshotArray"]=Ud).__name__="spine.support.utils.SnapshotArray",Ud.prototype={begin:function(){this.snapshotIndex++;var t=this.snapshots[this.snapshotIndex];if(null==t)t=[].concat(this.array),this.snapshots[this.snapshotIndex]=t;else for(var e=this.array.length,n=t.length,s=(e<n?t.splice(e,e-n):n<e&&(t[e-1]=null),0),i=this.array.length;s<i;){var a=s++;t[a]=this.array[a]}return t},end:function(){for(var t=this.snapshots[this.snapshotIndex],e=(this.snapshotIndex--,t.length),n=t,s=0;s<e;)n[s++]=null},__class__:Ud},function(){}),Nd=((e["spine.utils.SpineUtils"]=Ai).__name__="spine.utils.SpineUtils",function(t,e){Qa.call(this,t,e)}),Gd=((e["spine.utils._Triangulator.PolygonPool"]=Nd).__name__="spine.utils._Triangulator.PolygonPool",Nd.__super__=Qa,Nd.prototype=t(Qa.prototype,{newObject:function(){return[]},__class__:Nd}),function(t,e){Qa.call(this,t,e)}),Xd=((e["spine.utils._Triangulator.IndicesPool"]=Gd).__name__="spine.utils._Triangulator.IndicesPool",Gd.__super__=Qa,Gd.prototype=t(Qa.prototype,{newObject:function(){return[]},__class__:Gd}),function(){}),Yd=((e["thx.Arrays"]=Xd).__name__="thx.Arrays",Xd.each=function(t,e){for(var n=0,s=t.length;n<s;)e(t[n++])},Xd.eachi=function(t,e){for(var n=0,s=t.length;n<s;){var i=n++;e(t[i],i)}},Xd.filterNull=function(t){for(var e=[],n=0,s=t;n<s.length;){var i=s[n++];null!=i&&e.push(i)}return e},Xd.find=function(t,e){for(var n=0,s=t;n<s.length;){var i=s[n++];if(e(i))return i}return null},Xd.reduce=function(t,e,n){for(var s=0,i=t;s<i.length;)n=e(n,i[s++]);return n},function(){}),Wd=((e["thx.Bools"]=Yd).__name__="thx.Bools",Yd.parse=function(t){var e=t.toLowerCase();if(null==e)return!1;switch(e){case"0":case"false":case"off":return!1;case"1":case"on":case"true":return!0;default:throw tr.thrown('unable to parse "'+e+'"')}},function(){}),jd=((e["thx.bigint.Decimals"]=Wd).__name__="thx.bigint.Decimals",(e["thx.Iterators"]=rr).__name__="thx.Iterators",rr.map=function(t,e){for(var n=[];t.hasNext();)n.push(e(t.next()));return n},function(){}),Hd=((e["thx.Maps"]=jd).__name__="thx.Maps",jd.tuples=function(e){return rr.map(e.keys(),function(t){return{_0:t,_1:e.get(t)}})},jd.mapValues=function(t,n,e){return jd.reduce(t,function(t,e){return t.set(e._0,n(e._1)),t},e)},jd.reduce=function(t,e,n){return Xd.reduce(jd.tuples(t),e,n)},jd.values=function(e){return rr.map(e.keys(),function(t){return e.get(t)})},jd.fromArray=function(t,s,i){return Xd.reduce(t,function(t,e){var n=s(e),e=i(e);return t.h[n]=e,t},new N)},{}),Zd=(Hd.invoke=function(t,e){Hd.depth<500?(Hd.depth++,t(e),Hd.depth--):Hd.defer(function(){t(e)})},Hd.defer=function(t){qu.delay(t,0)},(e["tink.core.LinkObject"]=lr).__name__="tink.core.LinkObject",lr.__isInterface__=!0,lr.prototype={__class__:lr},{}),qd=(Zd.noop=function(){},Zd.fromMany=function(n){return new qd(function(){if(null!=n)for(var t=0;t<n.length;){var e=n[t];++t,null!=e&&e.cancel()}else n=null})},function(t){this.f=t}),Kd=((e["tink.core.SimpleLink"]=qd).__name__="tink.core.SimpleLink",qd.__interfaces__=[lr],qd.prototype={cancel:function(){null!=this.f&&(this.f(),this.f=null)},__class__:qd},(e["tink.core._Callback.LinkPair"]=or).__name__="tink.core._Callback.LinkPair",or.__interfaces__=[lr],or.prototype={cancel:function(){var t;this.dissolved||(this.dissolved=!0,null!=(t=this.a)&&t.cancel(),null!=(t=this.b)&&t.cancel(),this.a=null,this.b=null)},__class__:or},(e["tink.core._Callback.ListCell"]=hr).__name__="tink.core._Callback.ListCell",hr.__interfaces__=[lr],hr.prototype={cancel:function(){var t;null!=this.list&&(t=this.list,this.cb=null,this.list=null,--t.used<=t.cells.length>>1)&&t.compact()},__class__:hr},(e["tink.core.Disposable"]=ur).__name__="tink.core.Disposable",ur.__isInterface__=!0,(e["tink.core.OwnedDisposable"]=_r).__name__="tink.core.OwnedDisposable",_r.__isInterface__=!0,_r.__interfaces__=[ur],(e["tink.core.SimpleDisposable"]=cr).__name__="tink.core.SimpleDisposable",cr.__interfaces__=[_r],cr.noop=function(){},cr.prototype={dispose:function(){var t=this.disposeHandlers;if(null!=t){this.disposeHandlers=null;for(var e=this.f,n=(this.f=cr.noop,e(),0);n<t.length;)t[n++]()}},__class__:cr},(e["tink.core.CallbackList"]=dr).__name__="tink.core.CallbackList",dr.__super__=cr,dr.prototype=t(cr.prototype,{destroy:function(){for(var t,e=0,n=this.cells;e<n.length;){var s=n[e];++e,s.cb=null,s.list=null}this.queue=null,this.cells=null,0<this.used&&(this.used=0,t=this.ondrain,Hd.depth<500?(Hd.depth++,t(),Hd.depth--):Hd.defer(t))},invoke:function(a){var t,e,r=this;if(Hd.depth<500){if(Hd.depth++,null!=r.disposeHandlers)if(r.busy)1!=r.destructive&&(e=a,(t=r).queue.push(function(){t.invoke(e)}));else{r.busy=!0,r.destructive&&r.dispose();for(var n=r.cells.length,s=0;s<n;){var i=r.cells[s++];null!=i.list&&i.cb(a)}r.busy=!1,null==r.disposeHandlers?r.destroy():(r.used<r.cells.length&&r.compact(),0<r.queue.length&&r.queue.shift()())}Hd.depth--}else Hd.defer(function(){if(null!=r.disposeHandlers)if(r.busy){var t,e;1!=r.destructive&&(e=a,(t=r).queue.push(function(){t.invoke(e)}))}else{r.busy=!0,r.destructive&&r.dispose();for(var n=r.cells.length,s=0;s<n;){var i=r.cells[s++];null!=i.list&&i.cb(a)}r.busy=!1,null==r.disposeHandlers?r.destroy():(r.used<r.cells.length&&r.compact(),0<r.queue.length&&r.queue.shift()())}})},compact:function(){if(!this.busy)if(0==this.used){this.resize(0);var t=this.ondrain;Hd.depth<500?(Hd.depth++,t(),Hd.depth--):Hd.defer(t)}else{for(var e=0,n=0,s=this.cells.length;n<s;){var i=n++,a=this.cells[i];if(null!=a.cb&&(e!=i&&(this.cells[e]=a),++e==this.used))break}this.resize(this.used)}},resize:function(t){this.cells.length=t},__class__:dr}),(e["tink.core._Future.FutureObject"]=pr).__name__="tink.core._Future.FutureObject",pr.prototype={getStatus:function(){return tp.NeverEver},handle:function(t){return null},eager:function(){},__class__:pr},(e["tink.core._Lazy.Computable"]=fr).__name__="tink.core._Lazy.Computable",fr.__isInterface__=!0,fr.prototype={__class__:fr},(e["tink.core._Lazy.LazyObject"]=gr).__name__="tink.core._Lazy.LazyObject",gr.__isInterface__=!0,gr.__interfaces__=[fr],gr.prototype={__class__:gr},function(t){this.value=t}),Jd=((e["tink.core._Lazy.LazyConst"]=Kd).__name__="tink.core._Lazy.LazyConst",Kd.__interfaces__=[gr],Kd.prototype={isComputed:function(){return!0},get:function(){return this.value},compute:function(){},underlying:function(){return null},__class__:Kd},function(t){pr.call(this),this.value=t}),$d=((e["tink.core._Future.SyncFuture"]=Jd).__name__="tink.core._Future.SyncFuture",Jd.__super__=pr,Jd.prototype=t(pr.prototype,{getStatus:function(){return tp.Ready(this.value)},handle:function(t){return Hd.invoke(t,sp.get(this.value)),null},eager:function(){this.value.isComputed()||sp.get(this.value)},__class__:Jd}),{}),tp=($d.never=function(){return $d.NEVER_INST},$d.noise=function(t){return 4==t.getStatus()._hx_index?$d.never():$d.map(t,function(t){return null})},$d.first=function(e,n){var t=e;switch(t.getStatus()._hx_index){case 3:return n.getStatus()._hx_index,t;case 4:return n;default:switch(n.getStatus()._hx_index){case 3:return n;case 4:return t;default:return new np(function(t){return new or(e.handle(t),n.handle(t))})}}},$d.map=function(t,n,e){var s=t.getStatus();switch(s._hx_index){case 3:var i=s.result,a=n;return new Jd(new ip(function(){return a(i.get())},i));case 4:return $d.never();default:return new np(function(e){return t.handle(function(t){e(n(t))})})}},$d.inParallel=function(t,e){return $d.many(t,e)},$d.many=function(t,e){return $d.processMany(t,e,ap.Success,function(t){return rp.orNull(t)})},$d.processMany=function(_,c,d,p){return 0==_.length?new Jd(new Kd(p(ap.Success([])))):new np(function(a){for(var r=[],t=[],e=0;e<_.length;)++e,t.push(null);for(var n,l=t,s=0,i=0,o=!1,h=(n=null==c?_.length:c<1?1:c>_.length?_.length:c,function(){var t;return s==l.length&&0==i&&(t=p(ap.Success(l)),o=!0,a(t),!0)}),u=function(){if(!o&&!h())for(;s<l.length;){var t=[(s+=1)-1],e=_[t[0]],t=[function(i){return function(t){switch((n=d(t))._hx_index){case 0:l[i[0]]=n.data,h();break;case 1:for(var e=n.failure,n=0;n<r.length;){var s=r[n];++n,null!=s&&s.cancel()}e=p(ap.Failure(e));o=!0,a(e)}}}(t)],n=e.getStatus();if(3==n._hx_index){n=sp.get(n.result);if(t[0](n),!o)continue}else i+=1,r.push(e.handle(function(e){return function(t){--i,e[0](t),o||u()}}(t)));break}},t=0,e=n;t<e;)++t,u();return Zd.fromMany(r)})},$d.irreversible=function(e){return new np(function(t){return e(t),null})},$d.or=function(t,e){return $d.first(t,e)},d["tink.core.FutureStatus"]={__ename__:!0,__constructs__:null,Suspended:{_hx_name:"Suspended",_hx_index:0,__enum__:"tink.core.FutureStatus",toString:l},Awaited:{_hx_name:"Awaited",_hx_index:1,__enum__:"tink.core.FutureStatus",toString:l},EagerlyAwaited:{_hx_name:"EagerlyAwaited",_hx_index:2,__enum__:"tink.core.FutureStatus",toString:l},Ready:((c=function(t){return{_hx_index:3,result:t,__enum__:"tink.core.FutureStatus",toString:l}})._hx_name="Ready",c.__params__=["result"],c),NeverEver:{_hx_name:"NeverEver",_hx_index:4,__enum__:"tink.core.FutureStatus",toString:l}}),ep=(tp.__constructs__=[tp.Suspended,tp.Awaited,tp.EagerlyAwaited,tp.Ready,tp.NeverEver],tp.__empty_constructs__=[tp.Suspended,tp.Awaited,tp.EagerlyAwaited,tp.NeverEver],function(){this.status=tp.Awaited,pr.call(this),this.list=new dr(!0)}),np=((e["tink.core.FutureTrigger"]=ep).__name__="tink.core.FutureTrigger",ep.__super__=pr,ep.prototype=t(pr.prototype,{getStatus:function(){return this.status},handle:function(t){var e=this.status;return 3==e._hx_index?(Hd.invoke(t,sp.get(e.result)),null):null==(e=this.list).disposeHandlers?null:(t=new hr(t,e),e.cells.push(t),0==e.used++&&(e=e.onfill,Hd.depth<500?(Hd.depth++,e(),Hd.depth--):Hd.defer(e)),t)},trigger:function(t){return 3!=this.status._hx_index&&(this.status=tp.Ready(new Kd(t)),this.list.invoke(t),!0)},__class__:ep}),function(t){this.status=tp.Suspended;var e=this;pr.call(this),this.wakeup=t,this.callbacks=new dr(!0),this.callbacks.ondrain=function(){var t;e.status==tp.Awaited&&(e.status=tp.Suspended,null!=(t=e.link)&&t.cancel(),e.link=null)},this.callbacks.onfill=function(){e.status==tp.Suspended&&(e.status=tp.Awaited,e.arm())}}),sp=((e["tink.core._Future.SuspendableFuture"]=np).__name__="tink.core._Future.SuspendableFuture",np.__super__=pr,np.prototype=t(pr.prototype,{getStatus:function(){return this.status},trigger:function(t){var e;3!=this.status._hx_index&&(this.status=tp.Ready(new Kd(t)),e=this.link,this.link=null,this.wakeup=null,this.callbacks.invoke(t),null!=e)&&e.cancel()},handle:function(t){var e=this.status;return 3==e._hx_index?(Hd.invoke(t,sp.get(e.result)),null):null==(e=this.callbacks).disposeHandlers?null:(t=new hr(t,e),e.cells.push(t),0==e.used++&&(e=e.onfill,Hd.depth<500?(Hd.depth++,e(),Hd.depth--):Hd.defer(e)),t)},arm:function(){var e=this;this.link=this.wakeup(function(t){e.trigger(t)})},eager:function(){switch(this.status._hx_index){case 0:this.status=tp.EagerlyAwaited,this.arm();break;case 1:this.status=tp.EagerlyAwaited}},__class__:np}),{}),ip=(sp.get=function(t){return t.compute(),t.get()},function(t,e){this.f=t,this.from=e}),ap=((e["tink.core._Lazy.LazyFunc"]=ip).__name__="tink.core._Lazy.LazyFunc",ip.__interfaces__=[gr],ip.prototype={underlying:function(){return this.from},isComputed:function(){return null==this.f},get:function(){return this.result},compute:function(){var t=this.f;if(null!=t){if((this.f=null)!=(s=this.from)){for(var e=s,n=(this.from=null,[]);null!=e&&!e.isComputed();)n.push(e),e=e.underlying();n.reverse();for(var s=0;s<n.length;)n[s++].compute()}this.result=t()}},__class__:ip},d["tink.core.Outcome"]={__ename__:!0,__constructs__:null,Success:((c=function(t){return{_hx_index:0,data:t,__enum__:"tink.core.Outcome",toString:l}})._hx_name="Success",c.__params__=["data"],c),Failure:((c=function(t){return{_hx_index:1,failure:t,__enum__:"tink.core.Outcome",toString:l}})._hx_name="Failure",c.__params__=["failure"],c)}),rp=(ap.__constructs__=[ap.Success,ap.Failure],ap.__empty_constructs__=[],function(){}),lp=((e["tink.core.OutcomeTools"]=rp).__name__="tink.core.OutcomeTools",rp.orNull=function(t){switch(t._hx_index){case 0:return t.data;case 1:return null}},{}),op=(lp.nextTime=function(t,e){return lp.pickNext(t,function(t){return null==e||e(t)?l_.Some(t):l_.None})},lp.pickNext=function(t,e){var n=new ep,t=t.listen(function(t){t=e(t);0===t._hx_index&&n.trigger(t.v)});return n.handle(null==t?Zd.noop:W(c=t,c.cancel)),n},lp.trigger=function(){return new op},(e["tink.core._Signal.SignalObject"]=mr).__name__="tink.core._Signal.SignalObject",mr.__isInterface__=!0,mr.__interfaces__=[ur],mr.prototype={__class__:mr},function(){this.handlers=new dr}),hp=((e["tink.core.SignalTrigger"]=op).__name__="tink.core.SignalTrigger",op.__interfaces__=[_r,mr],op.prototype={listen:function(t){var e=this.handlers;return null==e.disposeHandlers?null:(t=new hr(t,e),e.cells.push(t),0==e.used++&&(e=e.onfill,Hd.depth<500?(Hd.depth++,e(),Hd.depth--):Hd.defer(e)),t)},__class__:op},(e["tweenx909.advanced.CommandX"]=Ar).__name__="tweenx909.advanced.CommandX",Ar.prototype={__class__:Ar},function(){}),up=((e["tweenxcore.Easing"]=hp).__name__="tweenxcore.Easing",hp.linear=function(t){return t},hp.sineIn=function(t){return 0==t?0:1==t?1:1-Math.cos(1.5707963267948966*t)},hp.sineOut=function(t){return 0==t?0:1==t?1:Math.sin(1.5707963267948966*t)},hp.sineInOut=function(t){return 0==t?0:1==t?1:-.5*(Math.cos(3.141592653589793*t)-1)},hp.sineOutIn=function(t){return 0==t?0:1==t?1:t<.5?.5*Math.sin(2*t*1.5707963267948966):-.5*Math.cos(1.5707963267948966*(2*t-1))+1},hp.quadIn=function(t){return t*t},hp.quadOut=function(t){return-t*(t-2)},hp.quadInOut=function(t){return t<.5?2*t*t:--t*t*-2+1},hp.quadOutIn=function(t){return t<.5?-.5*(t*=2)*(t-2):.5*(t=2*t-1)*t+.5},hp.cubicIn=function(t){return t*t*t},hp.cubicOut=function(t){return--t*t*t+1},hp.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},hp.cubicOutIn=function(t){return.5*((t=2*t-1)*t*t+1)},hp.quartIn=function(t){return(t*=t)*t},hp.quartOut=function(t){return 1-(t=--t*t)*t},hp.quartInOut=function(t){return(t*=2)<1?.5*(t*=t)*t:-.5*((t=(t-=2)*t)*t-2)},hp.quartOutIn=function(t){return t<.5?(t=2*t-1,-.5*(t*=t)*t+.5):(t=2*t-1,.5*(t*=t)*t+.5)},hp.quintIn=function(t){return t*(t*=t)*t},hp.quintOut=function(t){return--t*(t*=t)*t+1},hp.quintInOut=function(t){return(t*=2)<1?.5*t*(t*=t)*t:.5*(t-=2)*(t*=t)*t+1},hp.quintOutIn=function(t){return.5*((t=2*t-1)*(t*=t)*t+1)},hp.expoIn=function(t){return 0==t?0:Math.exp(6.931471805599453*(t-1))},hp.expoOut=function(t){return 1==t?1:1-Math.exp(-6.931471805599453*t)},hp.expoInOut=function(t){return 0==t?0:1==t?1:(t*=2)<1?.5*Math.exp(6.931471805599453*(t-1)):.5*(2-Math.exp(-6.931471805599453*(t-1)))},hp.expoOutIn=function(t){return t<.5?.5*(1-Math.exp(-13.862943611198906*t)):.5==t?.5:.5*(Math.exp(13.862943611198906*(t-1))+1)},hp.circIn=function(t){return t<-1||1<t?0:1-Math.sqrt(1-t*t)},hp.circOut=function(t){return t<0||2<t?0:Math.sqrt(t*(2-t))},hp.circInOut=function(t){return t<-.5||1.5<t?.5:(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},hp.circOutIn=function(t){return t<0?0:1<t?1:t<.5?(t=2*t-1,.5*Math.sqrt(1-t*t)):(t=2*t-1,-.5*(Math.sqrt(1-t*t)-1-1))},hp.bounceIn=function(t){return(t=1-t)<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)},hp.bounceOut=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375},hp.bounceInOut=function(t){return t<.5?(t=1-2*t)<.36363636363636365?.5*(1-7.5625*t*t):t<.7272727272727273?.5*(1-(7.5625*(t-=.5454545454545454)*t+.75)):t<.9090909090909091?.5*(1-(7.5625*(t-=.8181818181818182)*t+.9375)):.5*(1-(7.5625*(t-=.9545454545454546)*t+.984375)):(t=2*t-1)<.36363636363636365?7.5625*t*t*.5+.5:t<.7272727272727273?.5*(7.5625*(t-=.5454545454545454)*t+.75)+.5:t<.9090909090909091?.5*(7.5625*(t-=.8181818181818182)*t+.9375)+.5:.5*(7.5625*(t-=.9545454545454546)*t+.984375)+.5},hp.bounceOutIn=function(t){return t<.5?(t*=2)<.36363636363636365?7.5625*t*t*.5:t<.7272727272727273?.5*(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?.5*(7.5625*(t-=.8181818181818182)*t+.9375):.5*(7.5625*(t-=.9545454545454546)*t+.984375):(t=1-(2*t-1))<.36363636363636365?.5-7.5625*t*t*.5+.5:t<.7272727272727273?.5-.5*(7.5625*(t-=.5454545454545454)*t+.75)+.5:t<.9090909090909091?.5-.5*(7.5625*(t-=.8181818181818182)*t+.9375)+.5:.5-.5*(7.5625*(t-=.9545454545454546)*t+.984375)+.5},hp.backIn=function(t){return 0==t?0:1==t?1:t*t*(2.70158*t-1.70158)},hp.backOut=function(t){return 0==t?0:1==t?1:--t*t*(2.70158*t+1.70158)+1},hp.backInOut=function(t){return 0==t?0:1==t?1:(t*=2)<1?t*t*(3.5949095*t-2.5949095)*.5:.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)},hp.backOutIn=function(t){return 0==t?0:1==t?1:t<.5?.5*((t=2*t-1)*t*(2.70158*t+1.70158)+1):.5*(t=2*t-1)*t*(2.70158*t-1.70158)+.5},hp.elasticIn=function(t){return 0==t?0:1==t?1:-(Math.exp(6.931471805599453*--t)*Math.sin(6.283185307179586*(.001*t-75e-6)/3e-4))},hp.elasticOut=function(t){return 0==t?0:1==t?1:Math.exp(-6.931471805599453*t)*Math.sin(6.283185307179586*(.001*t-75e-6)/3e-4)+1},hp.elasticInOut=function(t){return 0==t?0:1==t?1:(t*=2)<1?Math.exp(6.931471805599453*--t)*Math.sin(6.283185307179586*(.001*t-75e-6)/3e-4)*-.5:Math.exp(-6.931471805599453*--t)*Math.sin(6.283185307179586*(.001*t-75e-6)/3e-4)*.5+1},hp.elasticOutIn=function(t){return t<.5?0==(t*=2)?0:.5*Math.exp(-6.931471805599453*t)*Math.sin(6.283185307179586*(.001*t-75e-6)/3e-4)+.5:.5==t?.5:1==t?1:(t=2*t-1,.5-.5*Math.exp(6.931471805599453*--t)*Math.sin(6.283185307179586*(.001*t-75e-6)/3e-4))},hp.warpOut=function(t){return t<=0?0:1},hp.warpIn=function(t){return t<1?0:1},hp.warpInOut=function(t){return t<.5?0:1},hp.warpOutIn=function(t){return t<=0?0:t<1?.5:1},(e["tweenx909.rule.BoolRuleX"]=xr).__name__="tweenx909.rule.BoolRuleX",xr.calc=function(t,e,n,s,i){return 0<(t?1:0)*s+(e?1:0)*n},xr.defaultFrom=function(t,e,n){return t},(e["tweenx909.rule.ArrayRuleX"]=br).__name__="tweenx909.rule.ArrayRuleX",br.calc=function(t,e,n,s,i){for(var a=mp(t),r=[],l=mp(e);l.hasNext();){var o,h=l.next(),t=a.next();if("number"==typeof(e=h))o=t*s+e*n;else{for(var u=null,_=!1,c=mp(q.get_rules());c.hasNext();){var d=c.next();if(er.__instanceof(e,d.inputClass)){_=!0,u=d.calc(t,e,n,s,i);break}}if(!_)throw h=er.getClass(e),tr.thrown(i.error("The tween rule for "+h.__name__+" is not defined"));o=u}r.push(o)}return r},br.defaultFrom=function(t,e,n){var s=n;if(null!=t)for(var i=[],a=mp(e);a.hasNext();)a.next(),i.push(null);else if(wt.count(t)!=wt.count(e))throw tr.thrown(s.error("The array length must be same with start."));for(var r=[],l=mp(e),o=mp(t);o.hasNext();)r.push(br._defaultFrom(o.next(),l.next(),n));return r},br._defaultFrom=function(t,e,n){if("number"==typeof e)return t;for(var s=mp(q.get_rules());s.hasNext();){var i=s.next();if(er.__instanceof(e,i.inputClass))return i.defaultFrom(t,e,n)}var a=er.getClass(e);throw tr.thrown(n.error("The tween rule for "+a.__name__+" is not defined"))},(e["tweenxcore.structure.Timeline"]=yr).__name__="tweenxcore.structure.Timeline",(e["tweenx909.rule.TimelineRuleX"]=wr).__name__="tweenx909.rule.TimelineRuleX",wr.calc=function(t,e,n,s,i){return e.search(n).data},wr.defaultFrom=function(t,e,n){return null},(e["tweenxcore.color.IColor"]=vr).__name__="tweenxcore.color.IColor",vr.__isInterface__=!0,(e["tweenxcore.color.RgbColor"]=Cr).__name__="tweenxcore.color.RgbColor",Cr.__interfaces__=[vr],Cr.prototype={__class__:Cr},(e["tweenxcore.color.ITransparentColor"]=Mr).__name__="tweenxcore.color.ITransparentColor",Mr.__isInterface__=!0,Mr.__interfaces__=[vr],(e["tweenxcore.color.ArgbColor"]=Sr).__name__="tweenxcore.color.ArgbColor",Sr.__interfaces__=[Mr],Sr.__super__=Cr,Sr.prototype=t(Cr.prototype,{__class__:Sr}),(e["tweenx909.rule.ArgbRuleX"]=kr).__name__="tweenx909.rule.ArgbRuleX",kr.calc=function(t,e,n,s,i){var a=t.a*s+e.a*n,r=t.r*s+e.r*n,l=t.g*s+e.g*n,t=t.b*s+e.b*n;return(255*(a<=0?0:1<=a?1:a)|0)<<24|(255*(r<=0?0:1<=r?1:r)|0)<<16|(255*(l<=0?0:1<=l?1:l)|0)<<8|255*(t<=0?0:1<=t?1:t)|0},kr.defaultFrom=function(t,e,n){return new Sr((t>>>24&255)/255,(t>>16&255)/255,(t>>8&255)/255,(255&t)/255)},(e["tweenxcore.color.HsvColor"]=Br).__name__="tweenxcore.color.HsvColor",Br.__interfaces__=[vr],Br.hsvToRgbInt=function(t,e,n){t=6*(t-Math.floor(t));var s=Math.floor(t),i=(e<=0?e=0:1<=e&&(e=1),n<=0?n=0:1<=n&&(n=1),n*(1-e)),a=t-s,r=0,l=0,o=0;switch(s){case 0:l=(r=n)*(1-e*(1-a)),o=i;break;case 1:r=n*(1-e*a),l=n,o=i;break;case 2:r=i,o=(l=n)*(1-e*(1-a));break;case 3:r=i,l=n*(1-e*a),o=n;break;case 4:r=n*(1-e*(1-a)),l=i,o=n;break;case 5:l=i,o=(r=n)*(1-e*a)}return(255*r|0)<<16|(255*l|0)<<8|255*o|0},Br.fromRgb=function(t,e,n,s){null==s&&(s=0),(t=t<e?e<n?(4+(t-e)/(a=(i=n)-t))/6:(2+(n-t)/(a=(i=e)-(t<n?t:n)))/6:t<n?(4+(t-e)/(a=(i=n)-e))/6:(e-n)/(a=(i=t)-(e<n?e:n))/6)<0&&++t;var i,a,e=a/i;return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Br(t+s,e,i)},Br.prototype={__class__:Br},(e["tweenxcore.color.AhsvColor"]=Ir).__name__="tweenxcore.color.AhsvColor",Ir.__interfaces__=[Mr],Ir.__super__=Br,Ir.prototype=t(Br.prototype,{__class__:Ir}),(e["tweenx909.rule.AhsvRuleX"]=Tr).__name__="tweenx909.rule.AhsvRuleX",Tr.calc=function(t,e,n,s,i){var a=t.a*s+e.a*n;return(255*(a<=0?0:1<=a?1:a)|0)<<24|Br.hsvToRgbInt(t.h*s+e.h*n,t.s*s+e.s*n,t.v*s+e.v*n)},Tr.defaultFrom=function(t,e,n){var s=16777215&t,s=Br.fromRgb((s>>16&255)/255,(s>>8&255)/255,(255&s)/255,0);return new Ir((t>>>24&255)/255,s.h,s.s,s.v)},(e["tweenx909.rule.RgbRuleX"]=Fr).__name__="tweenx909.rule.RgbRuleX",Fr.calc=function(t,e,n,s,i){var a=t.r*s+e.r*n,r=t.g*s+e.g*n,t=t.b*s+e.b*n;return(255*(a<=0?0:1<=a?1:a)|0)<<16|(255*(r<=0?0:1<=r?1:r)|0)<<8|255*(t<=0?0:1<=t?1:t)|0},Fr.defaultFrom=function(t,e,n){return new Cr((t>>16&255)/255,(t>>8&255)/255,(255&t)/255)},(e["tweenx909.rule.HsvRuleX"]=Dr).__name__="tweenx909.rule.HsvRuleX",Dr.calc=function(t,e,n,s,i){return Br.hsvToRgbInt(t.h*s+e.h*n,t.s*s+e.s*n,t.v*s+e.v*n)},Dr.defaultFrom=function(t,e,n){return Br.fromRgb((t>>16&255)/255,(t>>8&255)/255,(255&t)/255,0)},(e["tweenx909.rule.QuakeX"]=Er).__name__="tweenx909.rule.QuakeX",Er.prototype={__class__:Er},(e["tweenx909.rule.QuakeRuleX"]=Pr).__name__="tweenx909.rule.QuakeRuleX",Pr.calc=function(t,e,n,s,i){var a=n<.5?t.ease(2*n):e.ease(2*s);return t.value*s+e.value*n+a*(2*Math.random()-1)*(t.scale*s+e.scale*n)},Pr.defaultFrom=function(t,e,n){return new Er(t,e.scale,e.ease)},d["tweenx909.advanced.UpdateModeX"]={__ename__:!0,__constructs__:null,MANUAL:{_hx_name:"MANUAL",_hx_index:0,__enum__:"tweenx909.advanced.UpdateModeX",toString:l},TIME:((c=function(t){return{_hx_index:1,frameRate:t,__enum__:"tweenx909.advanced.UpdateModeX",toString:l}})._hx_name="TIME",c.__params__=["frameRate"],c)}),q=(up.__constructs__=[up.MANUAL,up.TIME],up.__empty_constructs__=[up.MANUAL],function(t,e,n,s,i,a,r,l,o,h){if(this.timeScale=1,this._skip=null,this._currentTime=0,Ar.call(this,_p.TWEEN(this),h),this._type=t,(this._currentTime=0)==t._hx_index?(this._easeIsDefault=!1,this._ease=null==n?hp.linear:n):this._ease=(this._easeIsDefault=null==n)?q.defaultEase:n,this._time=(this._timeIsDefault=null==e)?q.defaultTime:e,this._delay=(this._delayIsDefault=null==s)?q.defaultDelay:s,this._interval=(this._intervalIsDefault=null==l)?q.defaultInterval:l,this._repeat=(this._repeatIsDefault=null==i)?q.defaultRepeat:i,this._yoyo=(this._yoyoIsDefault=null==a)?q.defaultYoyo:a,this._zigzag=(this._zigzagIsDefault=null==r)?q.defaultZigZag:r,this._autoPlay=(this._autoPlayIsDefault=null==o)?q.defaultAutoPlay:o,this._rest=0,this._eventListeners=[],this.id=q.idCounter++,q._addedTweens.push(this),!q.managerInited){q.managerInited=!0,q.stopUpdater();var u=q.updateMode;switch(u._hx_index){case 0:break;case 1:q.prevTime=(new Date).getTime();var _=Math.round(1e3/u.frameRate);null!=q._timer&&q._timer.stop(),q._timer=new qu(_),q._timer.run=q.mainLoop}}}),_p=((e["tweenx909.TweenX"]=q).__name__="tweenx909.TweenX",q.__properties__={get_rules:"get_rules"},q.prevTime=null,q.get_rules=function(){return q._rules},q.dumpDefaults=function(){return(new cp).dump()},q.setDefaults=function(t){t.apply()},q.mainLoop=function(){switch(q.updateMode._hx_index){case 0:throw tr.thrown("invalid auto update");case 1:q.manualUpdate(((new Date).getTime()-q.prevTime)/1e3),q.prevTime=(new Date).getTime()}},q.stopUpdater=function(){null!=q._timer&&(q._timer.stop(),q._timer=null)},q.manualUpdate=function(t){q.initTweens();for(var e=q._tweens.length,n=0;n<e;){var s=q._tweens[n++];s._update(t*s.timeScale*q.topLevelTimeScale),s.playing||(q._tweens.splice(--n,1),--e)}q._resetLog()},q.initTweens=function(){for(var t=0,e=q._addedTweens;t<e.length;)e[t++]._init();q._addedTweens.splice(0,q._addedTweens.length)},q.to=function(t,e,n,s,i,a,r,l,o,h,u){return null==e&&(e={}),q.isIterable(t)?new fp(gp.ARRAY(t,[{}],[e]),n,s,i,a,r,l,o,h,u):new fp(gp.FROM_TO(t,{},e),n,s,i,a,r,l,o,h,u)},q.tweenFunc1=function(t,e,n,s,i,a,r,l,o,h,u,_){return new q(gp.FUNC(t,[e],[n]),s,i,a,r,l,o,h,u,_)},q.serial=function(t,e,n){for(var s=new q(gp.GROUP(new dp(t,pp.SERIAL,e)),null,null,null,null,null,null,null,null,n),i=mp(t);i.hasNext();){var a=i.next();if(null!=a){a=a.command;if(0==a._hx_index){a=a.tween;if(a._inited)throw tr.thrown(a.error("Can't serialize initialized TweenCommandX"));a._autoPlay=!1,a._parent=s}}}return s},q._timer=null,q._resetLog=function(){q._initLog=[],q.dictionary=new r_},q.isIterable=function(t){return null!=t&&(t instanceof Array||!(!Object.prototype.hasOwnProperty.call(t,"iterator")||!Z.isFunction((e=t)instanceof Array?function(){return new A_(e)}:"function"==typeof e.iterator?W(e,e.iterator):e.iterator))&&null!=mp(t));var e},q.__super__=Ar,q.prototype=t(Ar.prototype,{get_currentTime:function(){var t=this.get_totalTime(),e=this.backward?t-this._currentTime:this._currentTime;return e=t<(e=e<0?0:e)?t:e},get_singleTime:function(){return this._time+this._interval},get_totalTime:function(){return this._delay+this.get_singleTime()*this._repeat-this._interval+this._rest},error:function(t){var e=this.definedPosInfos;return t+"(Tween_"+this.id+" was generated at "+e.className+"/"+e.methodName+"() ["+e.fileName+":"+e.lineNumber+"])"},play:function(){if(null!=this._parent)throw tr.thrown(this.error("Can't play serialized object directly"));if(!this.playing){this._inited||this._init(),this.playing=!0,q._tweens.push(this);var t=this._eventListeners[0];if(null!=t)for(var e=0;e<t.length;)t[e++](this);null!=this._onPlay&&this._onPlay(),this.update(1.4901161415892264e-8)}return this},_stop:function(){if(this.playing){this.playing=!1;var t=this._eventListeners[9];if(null!=t)for(var e=0;e<t.length;)t[e++](this);null!=this._onStop&&this._onStop()}},update:function(t){if(null!=this._parent)throw tr.thrown(this.error("Can't stop serialized object directly"));return this._update(t*this.timeScale*q.topLevelTimeScale),this},_invert:function(){this._currentTime=this._totalTime-this._currentTime,this._repeat%2==0&&(this._odd=!this._odd),this._inverted=!this._inverted;var t=this._delay;this._delay=this._rest,this._rest=t},_init:function(){if(!this._inited){this._inited=!0,q._groupDefaults&&(this._easeIsDefault&&(this._ease=q.defaultEase),this._timeIsDefault&&(this._time=q.defaultTime),this._delayIsDefault&&(this._delay=q.defaultDelay),this._intervalIsDefault&&(this._interval=q.defaultInterval),this._repeatIsDefault&&(this._repeat=q.defaultRepeat),this._yoyoIsDefault&&(this._yoyo=q.defaultYoyo),this._zigzagIsDefault&&(this._zigzag=q.defaultZigZag),this._autoPlayIsDefault)&&(this._autoPlay=q.defaultAutoPlay),0==this._repeat&&(this._repeat=2147483646),this._time<1.4901161415892264e-8&&(this._time=1.4901161415892264e-8),this._fastMode=!0;var t=this._type;switch(t._hx_index){case 0:this.initGroup(t.group);break;case 1:for(var e=t._from,n=t._to,s=0,i=mp(t.targets);i.hasNext();){var a=i.next(),r=n[s];this._initFromTo(a,e[s],r),0==s&&(this._toKeys=Z.fields(r)),++s}break;case 2:e=t._to;this._initFromTo(t.target,t._from,e),this._toKeys=Z.fields(e)}this._singleTime=this.get_singleTime(),this._totalTime=this.get_totalTime(),this._autoPlay&&this.play()}},_initFromTo:function(t,e,n){throw tr.thrown(this.error("must be standard tween."))},_update:function(t){if(this._inited||this._init(),0!=t){(t=this.backward?-t:t)<0&&(this._invert(),this.backward=!this.backward,t=-t);var e,n=this._currentTime,s=this.get_singleTime(),i=this._totalTime,a=this._time,r=this._delay,l=i-this._rest,o=n-r<1.4901161415892264e-8,h=!o&&l-n<1.4901161415892264e-8,u=n-r,_=Math.floor(u/s),c=u-_*s,d=a-c<1.4901161415892264e-8;if(c+=t,u+=t,(this._currentTime=n+=t)-r<1.4901161415892264e-8){if(null!=(e=this._eventListeners[1]))for(var p=0;p<e.length;)e[p++](this);null!=this._onDelay&&this._onDelay()}else{if(o){if(this._apply(0,0),null!=(e=this._eventListeners[2]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onHead&&this._onHead(),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);null!=this._onUpdate&&this._onUpdate()}if(l-n<1.4901161415892264e-8){if(!h){if(d){if(null!=(e=this._eventListeners[6]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onRepeat&&this._onRepeat(),this._apply(0,_),null!=(e=this._eventListeners[2]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onHead&&this._onHead(),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);null!=this._onUpdate&&this._onUpdate()}if(this._apply(this._time,this._repeat-1),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onUpdate&&this._onUpdate(),null!=(e=this._eventListeners[4]))for(p=0;p<e.length;)e[p++](this);null!=this._onFoot&&this._onFoot()}if(i-n<1.4901161415892264e-8){if(this._currentTime=this._totalTime,null!=(e=this._eventListeners[8]))for(p=0;p<e.length;)e[p++](this);null!=this._onFinish&&this._onFinish(),this._stop()}else{if(null!=(e=this._eventListeners[7]))for(p=0;p<e.length;)e[p++](this);null!=this._onRest&&this._onRest()}}else{if(a-c<1.4901161415892264e-8){if(!d&&0<=_){if(this._apply(this._time,_),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onUpdate&&this._onUpdate(),null!=(e=this._eventListeners[4]))for(p=0;p<e.length;)e[p++](this);null!=this._onFoot&&this._onFoot()}if(c<s){if(null!=(e=this._eventListeners[5]))for(p=0;p<e.length;)e[p++](this);return void(null!=this._onInterval&&this._onInterval())}if(0<=_){if(null!=(e=this._eventListeners[6]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onRepeat&&this._onRepeat(),this._apply(0,_),null!=(e=this._eventListeners[2]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onHead&&this._onHead(),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);null!=this._onUpdate&&this._onUpdate()}if(a-(c=u-(_=u/s|0)*s)<1.4901161415892264e-8){if(this._apply(this._time,_),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onUpdate&&this._onUpdate(),null!=(e=this._eventListeners[4]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onFoot&&this._onFoot(),null!=(e=this._eventListeners[5]))for(p=0;p<e.length;)e[p++](this);return void(null!=this._onInterval&&this._onInterval())}}else if(d){if(null!=(e=this._eventListeners[6]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onRepeat&&this._onRepeat(),this._apply(0,_),null!=(e=this._eventListeners[2]))for(p=0;p<e.length;)e[p++](this);if(null!=this._onHead&&this._onHead(),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);null!=this._onUpdate&&this._onUpdate()}if(this._apply(c,_),null!=(e=this._eventListeners[3]))for(p=0;p<e.length;)e[p++](this);null!=this._onUpdate&&this._onUpdate()}}}},_apply:function(t,e){var e=e%2==1,t=t/this._time,n=(this._odd&&(e=!e),this._inverted&&(t=1-t),e?(this._yoyo&&(t=1-t),t=this._ease(t),this._zigzag&&(t=1-t)):t=this._ease(t),t),s=this._type;switch(s._hx_index){case 0:var i=s.group,a=i.tweens,r=1.00000001*(this._time*n-i.current);if(r<0)for(var l=1-a.length,o=1;l<o;)a[-l++]._update(r);else for(l=0,o=a.length;l<o;)a[l++]._update(r);i.current=i.tweens[0].get_currentTime();break;case 1:for(var h=s._from,u=s._to,_=1-n,c=0,d=mp(s.targets);d.hasNext();)for(var p=d.next(),f=u[c++],g=h[c-1],l=0,o=this._toKeys;l<o.length;){var m=o[l],A=(++l,p),x=g,b=D=null==x?null:!!x.__properties__&&(F=x.__properties__["get_"+m])?x[F]():x[m],x=f;if("number"==typeof(k=T=null==x?null:!!x.__properties__&&(S=x.__properties__["get_"+m])?x[S]():x[m]))M=b*_+k*n;else{for(var y=0,w=q._rules.length,v=null,C=!1;y<w;)if(E=q._rules[y++],er.__instanceof(k,E.inputClass)){C=!0,v=E.calc(b,k,n,_,this);break}if(!C)throw P=er.getClass(k),tr.thrown(this.error("The tween rule for "+P.__name__+" is not defined"));M=v}!!A.__properties__&&(B=A.__properties__["set_"+m])?A[B](M):A[m]=M}break;case 2:d=s.target,g=s._from,f=s._to,_=1-n;if(this._fastMode)for(l=0,o=this._toKeys;l<o.length;){var m=o[l],M=(++l,(D=null==g?null:!!g.__properties__&&(F=g.__properties__["get_"+m])?g[F]():g[m])*_+(T=null==f?null:!!f.__properties__&&(S=f.__properties__["get_"+m])?f[S]():f[m])*n);!!d.__properties__&&(B=d.__properties__["set_"+m])?d[B](M):d[m]=M}else for(l=0,o=this._toKeys;l<o.length;){var S,k,B,m=o[l],b=(++l,D=null==g?null:!!g.__properties__&&(F=g.__properties__["get_"+m])?g[F]():g[m]);if("number"==typeof(k=T=null==f?null:!!f.__properties__&&(S=f.__properties__["get_"+m])?f[S]():f[m]))M=b*_+k*n;else{for(c=0,w=q._rules.length,v=null,C=!1;c<w;)if(E=q._rules[c++],er.__instanceof(k,E.inputClass)){C=!0,v=E.calc(b,k,n,_,this);break}if(!C)throw P=er.getClass(k),tr.thrown(this.error("The tween rule for "+P.__name__+" is not defined"));M=v}!!d.__properties__&&(B=d.__properties__["set_"+m])?d[B](M):d[m]=M}break;case 3:for(var i=s.func,g=s._from,_=1-n,I=[],l=0,o=(f=s._to).length;l<o;){var T,F,D=g[c=l++];if("number"==typeof(T=f[c]))F=D*_+T*n;else{for(var E,P,y=0,w=q._rules.length,v=null,C=!1;y<w;)if(E=q._rules[y++],er.__instanceof(T,E.inputClass)){C=!0,v=E.calc(D,T,n,_,this);break}if(!C)throw P=er.getClass(T),tr.thrown(this.error("The tween rule for "+P.__name__+" is not defined"));F=v}I[c]=F}i.apply(null,I);break;case 4:1==n&&s.func()}},onFinish:function(t){return this._onFinish=t,this},initGroup:function(t){var e=null,n=!1,s=(null!=t.defaults&&(e=q.dumpDefaults(),n=q._groupDefaults,q._groupDefaults=!0,q.setDefaults(t.defaults),q.defaultAutoPlay=!1),0),i=0,a=[];switch((_=t.type)._hx_index){case 0:for(var r=mp(t.source);r.hasNext();){var l=r.next();if(null!=l)switch((u=l.command)._hx_index){case 0:var o=u.tween,h=(a.push(o),o._autoPlay=!1,q._groupDefaults&&o._delayIsDefault&&(o._delay=q.defaultDelay),o._init(),o._delay+=s,o._totalTime+=s);null!=o._skip?s+=o._skip:s=h,i<h&&(i=h);break;case 1:s+=u.delay}}break;case 1:for(var u=_.lag,r=mp(t.source);r.hasNext();){l=r.next();if(null!=l)switch((_=l.command)._hx_index){case 0:o=_.tween,h=(a.push(o),o._init(),o._delay+=s,o._totalTime+=s);s+=null!=o._skip?o._skip:u,i<h&&(i=h);break;case 1:s+=_.delay}}}for(var _=0;_<a.length;){var r=a[_],c=(++_,i-r._totalTime);r._rest+=c,r._totalTime+=c}this._time=i,t.tweens=a,(t.source=null)!=t.defaults&&(q._groupDefaults=n,q.setDefaults(e))},__class__:q,__properties__:{get_totalTime:"get_totalTime",get_singleTime:"get_singleTime",get_currentTime:"get_currentTime"}}),d["tweenx909.advanced.CommandTypeX"]={__ename__:!0,__constructs__:null,TWEEN:((c=function(t){return{_hx_index:0,tween:t,__enum__:"tweenx909.advanced.CommandTypeX",toString:l}})._hx_name="TWEEN",c.__params__=["tween"],c),WAIT:((c=function(t){return{_hx_index:1,delay:t,__enum__:"tweenx909.advanced.CommandTypeX",toString:l}})._hx_name="WAIT",c.__params__=["delay"],c)}),cp=(_p.__constructs__=[_p.TWEEN,_p.WAIT],_p.__empty_constructs__=[],function(){this._autoPlay=!0,this._zigzag=!1,this._yoyo=!1,this._repeat=1,this._interval=0,this._delay=0,this._time=.3,this._ease=q.DEFAULT_EASE}),dp=((e["tweenx909.advanced.DefaultsX"]=cp).__name__="tweenx909.advanced.DefaultsX",cp.prototype={dump:function(){return this._time=q.defaultTime,this._ease=q.defaultEase,this._delay=q.defaultDelay,this._interval=q.defaultInterval,this._repeat=q.defaultRepeat,this._yoyo=q.defaultYoyo,this._zigzag=q.defaultZigZag,this._autoPlay=q.defaultAutoPlay,this},apply:function(){q.defaultTime=this._time,q.defaultEase=this._ease,q.defaultDelay=this._delay,q.defaultInterval=this._interval,q.defaultRepeat=this._repeat,q.defaultYoyo=this._yoyo,q.defaultZigZag=this._zigzag,q.defaultAutoPlay=this._autoPlay},clone:function(){var t=new cp;return t._time=this._time,t._ease=this._ease,t._delay=this._delay,t._interval=this._interval,t._repeat=this._repeat,t._yoyo=this._yoyo,t._zigzag=this._zigzag,t._autoPlay=this._autoPlay,t},__class__:cp},function(t,e,n){this.current=0,this.source=t,this.type=e,null!=n&&(this.defaults=n.clone())}),pp=((e["tweenx909.advanced.GroupX"]=dp).__name__="tweenx909.advanced.GroupX",dp.prototype={__class__:dp},d["tweenx909.advanced._GroupX.GroupTypeX"]={__ename__:!0,__constructs__:null,SERIAL:{_hx_name:"SERIAL",_hx_index:0,__enum__:"tweenx909.advanced._GroupX.GroupTypeX",toString:l},LAG:((c=function(t){return{_hx_index:1,lag:t,__enum__:"tweenx909.advanced._GroupX.GroupTypeX",toString:l}})._hx_name="LAG",c.__params__=["lag"],c)}),fp=(pp.__constructs__=[pp.SERIAL,pp.LAG],pp.__empty_constructs__=[pp.SERIAL],function(t,e,n,s,i,a,r,l,o,h){if(this._autoFrom=!0,1==t._hx_index)for(var u=t._from,_=t._to,c=u.pop(),d=_.pop(),p=mp(t.targets);p.hasNext();)p.next(),_.push(fp.clone(d)),u.push(fp.clone(c));q.call(this,t,e,n,s,i,a,r,l,o,h)}),gp=((e["tweenx909.advanced.StandardTweenX"]=fp).__name__="tweenx909.advanced.StandardTweenX",fp.clone=function(t){for(var e={},n=0,s=Z.fields(t);n<s.length;){var i=s[n];++n,Z.setProperty(e,i,Z.getProperty(t,i))}return e},fp.__super__=q,fp.prototype=t(q.prototype,{_initFromTo:function(t,e,n){null==this._autoFrom&&(this._autoFrom=q.defaultAutoFrom);for(var s=null,i=0,a=Z.fields(n);i<a.length;){var r=a[i];++i;"number"!=typeof(P=null==(I=n)?null:!!I.__properties__&&(D=I.__properties__["get_"+r])?I[D]():I[r])&&(this._fastMode=!1);var l,o="$$$$"==Jn.substr(r,0,4),h=o?Jn.substr(r,4,null):r;if(l=null==(F=n)?null:!!F.__properties__&&(y=F.__properties__["get_"+r])?F[y]():F[r],Object.prototype.hasOwnProperty.call(e,h)){var u=e;g=null==u?null:!!u.__properties__&&(g=u.__properties__["get_"+h])?u[g]():u[h]}else{if(this._autoFrom){if(null==s){s={};var u=q._initLog,_=t,c=null!=q.dictionary.h[_.__id__]?q.dictionary.h[_.__id__]:(q._objCounter=1+q._objCounter%33029,q.dictionary.set(_,q._objCounter),q._objCounter),d=u[c];if(null!=d)for(var p=0;p<d.length;){var f=d[p];++p,f.target==t&&(s=f.data)}}var g=Object.prototype.hasOwnProperty.call(s,h)?(c=null==(b=s)?null:!!b.__properties__&&(v=b.__properties__["get_"+h])?b[v]():b[h],this._defaultFrom(c,l)):(m=null==(w=t)?null:!!w.__properties__&&(M=w.__properties__["get_"+h])?w[M]():w[h],this._defaultFrom(m,l))}else{var m=t;A=null==m?null:!!m.__properties__&&(Q=m.__properties__["get_"+h])?m[Q]():m[h],g=this._defaultFrom(A,l)}var R,A=e,x=!!A.__properties__&&(R=A.__properties__["set_"+h]);x?A[R](g):A[h]=g}o&&(E=l+g,!!(x=n).__properties__&&(o=x.__properties__["set_"+h])?x[o](E):x[h]=E,Z.deleteField(n,r))}for(var s={},V=Z.fields(e),i=0;i<V.length;){var b,y,w,v,C,M,Q,h=V[i],S=(++i,Object.prototype.hasOwnProperty.call(n,h)||(I=n,z=E=null==(F=e)?null:!!F.__properties__&&(D=F.__properties__["get_"+h])?F[D]():F[h],!!I.__properties__&&(P=I.__properties__["set_"+h])?I[P](z):I[h]=z),this._repeat%2==0),k=this._time/this._time,O=(this._odd&&(S=!S),this._inverted&&(k=1-k),S?(this._yoyo&&(k=1-k),k=this._ease(k),this._zigzag&&(k=1-k)):k=this._ease(k),k),_=s,L=null==(b=e)?null:!!b.__properties__&&(y=b.__properties__["get_"+h])?b[y]():b[h],B=null==(w=n)?null:!!w.__properties__&&(v=w.__properties__["get_"+h])?w[v]():w[h],U=1-O;if("number"==typeof B)C=L*U+B*O;else{for(var N,G=0,X=q._rules.length,Y=null,W=!1;G<X;)if(N=q._rules[G++],er.__instanceof(B,N.inputClass)){W=!0,Y=N.calc(L,B,O,U,this);break}if(!W)throw S=er.getClass(B),tr.thrown(this.error("The tween rule for "+S.__name__+" is not defined"));C=Y}(Q=!!_.__properties__&&(M=_.__properties__["set_"+h]))?_[M](C):_[h]=C}var I=t,T=null!=q.dictionary.h[I.__id__]?q.dictionary.h[I.__id__]:(q._objCounter=1+q._objCounter%33029,q.dictionary.set(I,q._objCounter),q._objCounter);if(null==q._initLog[T])q._initLog[T]=[{target:t,data:s}];else{for(var j=!1,i=0,a=q._initLog[T];i<a.length;){f=a[i];if(++i,f.target==t){for(var p=0,H=Z.fields(s);p<H.length;){var F,D,E,P,h=H[p],I=(++p,f.data),z=E=null==(F=s)?null:!!F.__properties__&&(D=F.__properties__["get_"+h])?F[D]():F[h];!!I.__properties__&&(P=I.__properties__["set_"+h])?I[P](z):I[h]=z}j=!0;break}}j||q._initLog[T].push({target:t,data:s})}},_defaultFrom:function(t,e){if("number"==typeof e)return t;for(var n=0,s=q._rules;n<s.length;){var i=s[n];if(++n,er.__instanceof(e,i.inputClass))return i.defaultFrom(t,e,this)}var a=er.getClass(e);throw tr.thrown(this.error("The tween rule for "+a.__name__+" is not defined"))},play:function(){return q.prototype.play.call(this),this},update:function(t){return q.prototype.update.call(this,t),this},onFinish:function(t){return q.prototype.onFinish.call(this,t),this},__class__:fp}),d["tweenx909.advanced.TweenTypeX"]={__ename__:!0,__constructs__:null,GROUP:((c=function(t){return{_hx_index:0,group:t,__enum__:"tweenx909.advanced.TweenTypeX",toString:l}})._hx_name="GROUP",c.__params__=["group"],c),ARRAY:((c=function(t,e,n){return{_hx_index:1,targets:t,_from:e,_to:n,__enum__:"tweenx909.advanced.TweenTypeX",toString:l}})._hx_name="ARRAY",c.__params__=["targets","_from","_to"],c),FROM_TO:((c=function(t,e,n){return{_hx_index:2,target:t,_from:e,_to:n,__enum__:"tweenx909.advanced.TweenTypeX",toString:l}})._hx_name="FROM_TO",c.__params__=["target","_from","_to"],c),FUNC:((c=function(t,e,n){return{_hx_index:3,func:t,_from:e,_to:n,__enum__:"tweenx909.advanced.TweenTypeX",toString:l}})._hx_name="FUNC",c.__params__=["func","_from","_to"],c),CALL:((c=function(t){return{_hx_index:4,func:t,__enum__:"tweenx909.advanced.TweenTypeX",toString:l}})._hx_name="CALL",c.__params__=["func"],c)});gp.__constructs__=[gp.GROUP,gp.ARRAY,gp.FROM_TO,gp.FUNC,gp.CALL],gp.__empty_constructs__=[],(e["tweenxcore.FloatTools"]=zr).__name__="tweenxcore.FloatTools",zr.revert=function(t){return 1-t},zr.clamp=function(t,e,n){return null==n&&(n=1),t<=(e=null==e?0:e)?e:n<=t?n:t},zr.lerp=function(t,e,n){return e*(1-t)+n*t},zr.inverseLerp=function(t,e,n){return(t-e)/(n-e)},zr.repeat=function(t,e,n){t=(t-(e=null==e?0:e))/((n=null==n?1:n)-e);return t-Math.floor(t)},zr.shake=function(t,e,n){null==e&&(e=0);n=(n=null==n?Math.random:n)();return e+(-t*(1-n)+t*n)},zr.spread=function(t,e){return-e*(1-t)+e*t},zr.sinByRate=function(t){return Math.sin(2*t*Math.PI)},zr.cosByRate=function(t){return Math.cos(2*t*Math.PI)},zr.yoyo=function(t,e){return e(2*(t<.5?t:1-t))},zr.zigzag=function(t,e){return t<.5?e(2*t):1-e(2*(t-.5))},zr.mixEasing=function(t,e,n,s){return null==s&&(s=.5),e(t)*(1-s)+n(t)*s},zr.crossfadeEasing=function(t,e,n,s,i,a){null==a&&(a=1),null==i&&(i=0);s=s(t),i=i*(1-s)+a*s;return e(t)*(1-i)+n(t)*i},zr.connectEasing=function(t,e,n,s,i){var a;return null==i&&(i=.5),t<(s=null==s?.5:s)?0*(1-(a=e(t/s)))+i*a:i*(1-(a=n((t-s)/(1-s))))+a},zr.oneTwoEasing=function(t,e,n,s){return t<(s=null==s?.5:s)?e(t/s):n((t-s)/(1-s))},zr.binarySearch=function(t,e,n){var s,i=0,a=t.length;if(0==(n=null==n?0:n))do{}while(t[s=((a-i)/2|0)+i]<=e?i=s+1:a=s,i!=a);else do{}while(t[s=((a-i)/2|0)+i]<e?i=s+1:a=s,i!=a);return i},zr.polyline=function(t,e){var n;if(e.length<2)throw tr.thrown("points length must be more than 2");return n=t*(t=e.length-1),null==(t=t-1)&&(t=1),e[t=Math.floor(n<=0?0:t<=n?t:n)]*(1-(n=n-t))+e[t+1]*n},zr.bezier2=function(t,e,n,s){return(e*(1-t)+n*t)*(1-t)+(n*(1-t)+s*t)*t},zr.bezier3=function(t,e,n,s,i){var a=n*(1-t)+s*t;return((e*(1-t)+n*t)*(1-t)+a*t)*(1-t)+(a*(1-t)+(s*(1-t)+i*t)*t)*t},zr.bezier=function(t,e){var n;if(e.length<2)throw tr.thrown("points length must be more than 2");return 2==e.length?e[0]*(1-t)+e[1]*t:3==e.length?(n=e[1],(e[0]*(1-t)+n*t)*(1-t)+(n*(1-t)+e[2]*t)*t):zr._bezier(t,e)},zr._bezier=function(t,e){for(;;){var n;if(4==e.length)return s=e[1],n=e[2],((e[0]*(1-t)+s*t)*(1-t)+(s=s*(1-t)+n*t)*t)*(1-t)+(s*(1-t)+(n*(1-t)+e[3]*t)*t)*t;for(var s=t,i=[],a=0,r=e.length-1;a<r;){var l=a++;i.push(e[l]*(1-t)+e[1+l]*t)}t=s,e=i}},zr.uniformQuadraticBSpline=function(t,e){var n,s,i;if(e.length<2)throw tr.thrown("points length must be more than 2");return 2==e.length?e[0]*(1-t)+e[1]*t:(null==(s=(n=e.length-2)-1)&&(s=1),(s=(t=t*n)-(n=Math.floor(t<=0?0:s<=t?s:t)))*s*((t=e[n])/2-(i=e[n+1])+e[n+2]/2)+s*(-t+i)+t/2+i/2)},zr.frameToSecond=function(t,e){return t/e},zr.secondToFrame=function(t,e){return t*e},zr.degreeToRate=function(t){return t/360},zr.rateToDegree=function(t){return 360*t},zr.radianToRate=function(t){return t/(2*Math.PI)},zr.rateToRadian=function(t){return 2*t*Math.PI},zr.millisecondToBeat=function(t,e){return t*e/6e4},zr.beatToMillisecond=function(t,e){return 6e4*t/e};function mp(t){return t instanceof Array?new A_(t):t.iterator()}function W(t,e){var n;return null==e?null:(null==e.__id__&&(e.__id__=x.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:n=t.hx__closures__[e.__id__],null==n&&(n=e.bind(t),t.hx__closures__[e.__id__]=n),n)}(e["tweenxcore.structure.TimelineSearchResult"]=Rr).__name__="tweenxcore.structure.TimelineSearchResult",Rr.prototype={__class__:Rr},x.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(Jn.now=performance.now.bind(performance)),e.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t))}),Object.defineProperty(String.prototype,"__class__",{value:e.String=String,enumerable:!1,writable:!0}),String.__name__="String",(e.Array=Array).__name__="Array",(Date.prototype.__class__=e.Date=Date).__name__="Date";var Ap,xp={},bp={},yp=Number,wp=Boolean,vp={},Cp={};zs.content=[{name:"R_gameconfig_json",data:"ewogICAic3R5bGUiOiB7CiAgICAgICJ0ZXh0IjogewogICAgICAgICAicGF5b3V0IjogewogICAgICAgICAgICAiZm9udCI6ICJydWJpa19ibGFjayIsCiAgICAgICAgICAgICJzdHJpbmdzIjogWwogICAgICAgICAgICAgICAiZGlnaXRzIiwKICAgICAgICAgICAgICAgIngiCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgICJzaXplIjogNTQsCiAgICAgICAgICAgICJvZmZzZXQiOiB7CiAgICAgICAgICAgICAgICJ4IjogMC4wLAogICAgICAgICAgICAgICAieSI6IC0wLjAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImNvbG9yIjogIjB4RkYyMjIyMjIiCiAgICAgICAgIH0sCiAgICAgICAgICJwYXlvdXRNZWRpdW0iOiB7CiAgICAgICAgICAgICJmb250IjogInJ1YmlrX2JsYWNrIiwKICAgICAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAgICAgICJkaWdpdHMiLAogICAgICAgICAgICAgICAieCIKICAgICAgICAgICAgXSwKICAgICAgICAgICAgInNpemUiOiA0NCwKICAgICAgICAgICAgIm9mZnNldCI6IHsKICAgICAgICAgICAgICAgIngiOiAwLjAsCiAgICAgICAgICAgICAgICJ5IjogMC4wCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJjb2xvciI6ICIweEZGMjIyMjIyIiwKICAgICAgICAgICAgImxldHRlclNwYWNpbmciOiAwLjAKICAgICAgICAgfSwKICAgICAgICAgInBheW91dFNtYWxsIjogewogICAgICAgICAgICAiZm9udCI6ICJydWJpa19ibGFjayIsCiAgICAgICAgICAgICJzdHJpbmdzIjogWwogICAgICAgICAgICAgICAiZGlnaXRzIiwKICAgICAgICAgICAgICAgIngiCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgICJzaXplIjogNDQsCiAgICAgICAgICAgICJvZmZzZXQiOiB7CiAgICAgICAgICAgICAgICJ4IjogMC4wLAogICAgICAgICAgICAgICAieSI6IDAuMAogICAgICAgICAgICB9LAogICAgICAgICAgICAiY29sb3IiOiAiMHhGRjIyMjIyMiIsCiAgICAgICAgICAgICJsZXR0ZXJTcGFjaW5nIjogLTIuMAogICAgICAgICB9LAogICAgICAgICAic3BsYXNoSGVhZGVyIjogewogICAgICAgICAgICAiZm9udCI6ICJ0ZWtvX21lZGl1bSIsCiAgICAgICAgICAgICJzdHJpbmdzIjogWwogICAgICAgICAgICAgICAiYmV0X3VjIiwKICAgICAgICAgICAgICAgImNvbmZpZ3VyZV91YyIsCiAgICAgICAgICAgICAgICJ3aW5fdWMiCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgICJzaXplIjogOTAsCiAgICAgICAgICAgICJjb2xvciI6ICIweGZmYTVlNWZmIiwKICAgICAgICAgICAgInRleHR1cmVNYXJnaW5zIjogewogICAgICAgICAgICAgICAieCI6IDAsCiAgICAgICAgICAgICAgICJ5IjogNDAKICAgICAgICAgICAgfQogICAgICAgICB9LAogICAgICAgICAic3BsYXNoQm9keSI6IHsKICAgICAgICAgICAgImZvbnQiOiAidGVrb19tZWRpdW0iLAogICAgICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICAgICAgInNwbGFzaF9hYm91dF9jb25maWd1cmUiLAogICAgICAgICAgICAgICAic3BsYXNoX2Fib3V0X2JldCIsCiAgICAgICAgICAgICAgICJzcGxhc2hfYWJvdXRfd2luIgogICAgICAgICAgICBdLAogICAgICAgICAgICAic2l6ZSI6IDQ0LAogICAgICAgICAgICAiY29sb3IiOiAiMHhmZmE1ZTVmZiIsCiAgICAgICAgICAgICJzcGFjZVdpZHRoIjogOSwKICAgICAgICAgICAgImxpbmVTcGFjaW5nIjogNS4wLAogICAgICAgICAgICAidGV4dHVyZU1hcmdpbnMiOiB7CiAgICAgICAgICAgICAgICJ4IjogMCwKICAgICAgICAgICAgICAgInkiOiA0MAogICAgICAgICAgICB9CiAgICAgICAgIH0sCiAgICAgICAgICJjbGlja1RvQ29udGludWUiOiB7CiAgICAgICAgICAgICJmb250IjogInRla29fbWVkaXVtIiwKICAgICAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAgICAgICJjbGlja190b19jb250aW51ZV91YyIKICAgICAgICAgICAgXSwKICAgICAgICAgICAgInNpemUiOiA1MCwKICAgICAgICAgICAgImNvbG9yIjogIjB4ZmZhNWU1ZmYiLAogICAgICAgICAgICAibGV0dGVyU3BhY2luZyI6IDAuMAogICAgICAgICB9CiAgICAgIH0sCiAgICAgICJpbWFnZXMiOiB7fSwKICAgICAgImFuaW1hdGlvbnMiOiB7CiAgICAgICAgICJ3aW4iOiB7CiAgICAgICAgICAgICJzY2FsZSI6IDEuMAogICAgICAgICB9CiAgICAgIH0sCiAgICAgICJncmFkaWVudHMiOiB7CiAgICAgICAgICJiYWNrZ3JvdW5kIjogewogICAgICAgICAgICAiaWQiOiAiZ3JleSIsCiAgICAgICAgICAgICJyZXNvbHV0aW9uIjogNTEyLAogICAgICAgICAgICAicm90YXRpb24iOiA0NS4wCiAgICAgICAgIH0sCiAgICAgICAgICJjYXJkIjogewogICAgICAgICAgICAiaWQiOiAieWVsbG93X29yYW5nZSIsCiAgICAgICAgICAgICJyZXNvbHV0aW9uIjogMTAyNCwKICAgICAgICAgICAgInJvdGF0aW9uIjogOTAuMAogICAgICAgICB9CiAgICAgIH0KICAgfSwKICAgImdhbWUiOiB7fSwKICAgInNwbGFzaCI6IHsKICAgICAgImxvZ29Qb3MiOiB7CiAgICAgICAgICJ4IjogMC4wLAogICAgICAgICAieSI6IDEuMCwKICAgICAgICAgInoiOiAwLjAKICAgICAgfSwKICAgICAgImhlYWRlck1heFdpZHRoIjogNDAwLAogICAgICAiYm9keU1heFdpZHRoIjogMzg2LAogICAgICAiYm9keU1heEhlaWdodCI6IDE3NSwKICAgICAgInhTcGFjaW5nIjogMS4yLAogICAgICAic3BsYXNoZXMiOiBbCiAgICAgICAgIHsKICAgICAgICAgICAgImhlYWRlciI6ICJjb25maWd1cmVfdWMiLAogICAgICAgICAgICAiaGVhZGVyUG9zIjogewogICAgICAgICAgICAgICAieCI6IDAuMCwKICAgICAgICAgICAgICAgInkiOiAtMC4yMSwKICAgICAgICAgICAgICAgInoiOiAwCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJib2R5IjogInNwbGFzaF9hYm91dF9jb25maWd1cmUiLAogICAgICAgICAgICAiYm9keVBvcyI6IHsKICAgICAgICAgICAgICAgIngiOiAwLjAsCiAgICAgICAgICAgICAgICJ5IjogLTAuNDQsCiAgICAgICAgICAgICAgICJ6IjogMAogICAgICAgICAgICB9LAogICAgICAgICAgICAiYmFja2dyb3VuZCI6ICJhIiwKICAgICAgICAgICAgImJhY2tncm91bmRQb3MiOiB7CiAgICAgICAgICAgICAgICJ4IjogMC4wLAogICAgICAgICAgICAgICAieSI6IC0wLjEsCiAgICAgICAgICAgICAgICJ6IjogLTAuMDIKICAgICAgICAgICAgfQogICAgICAgICB9LAogICAgICAgICB7CiAgICAgICAgICAgICJoZWFkZXIiOiAiYmV0X3VjIiwKICAgICAgICAgICAgImhlYWRlclBvcyI6IHsKICAgICAgICAgICAgICAgIngiOiAwLjAsCiAgICAgICAgICAgICAgICJ5IjogLTAuMjEsCiAgICAgICAgICAgICAgICJ6IjogMAogICAgICAgICAgICB9LAogICAgICAgICAgICAiYm9keSI6ICJzcGxhc2hfYWJvdXRfYmV0IiwKICAgICAgICAgICAgImJvZHlQb3MiOiB7CiAgICAgICAgICAgICAgICJ4IjogMC4wLAogICAgICAgICAgICAgICAieSI6IC0wLjQ0LAogICAgICAgICAgICAgICAieiI6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImJhY2tncm91bmQiOiAiYiIsCiAgICAgICAgICAgICJiYWNrZ3JvdW5kUG9zIjogewogICAgICAgICAgICAgICAieCI6IDAuMCwKICAgICAgICAgICAgICAgInkiOiAtMC4xLAogICAgICAgICAgICAgICAieiI6IC0wLjAyCiAgICAgICAgICAgIH0KICAgICAgICAgfSwKICAgICAgICAgewogICAgICAgICAgICAiaGVhZGVyIjogIndpbl91YyIsCiAgICAgICAgICAgICJoZWFkZXJQb3MiOiB7CiAgICAgICAgICAgICAgICJ4IjogMC4wLAogICAgICAgICAgICAgICAieSI6IC0wLjIxLAogICAgICAgICAgICAgICAieiI6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImJvZHkiOiAic3BsYXNoX2Fib3V0X3dpbiIsCiAgICAgICAgICAgICJib2R5UG9zIjogewogICAgICAgICAgICAgICAieCI6IDAuMCwKICAgICAgICAgICAgICAgInkiOiAtMC40NCwKICAgICAgICAgICAgICAgInoiOiAwCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJiYWNrZ3JvdW5kIjogImMiLAogICAgICAgICAgICAiYmFja2dyb3VuZFBvcyI6IHsKICAgICAgICAgICAgICAgIngiOiAwLjAsCiAgICAgICAgICAgICAgICJ5IjogLTAuMSwKICAgICAgICAgICAgICAgInoiOiAtMC4wMgogICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgXSwKICAgICAgInRvcEhlYWRlciI6IHsKICAgICAgICAgInRleHQiOiAiZmVhdHVyZXNfdWMiLAogICAgICAgICAicG9zIjogewogICAgICAgICAgICAieCI6IDAsCiAgICAgICAgICAgICJ5IjogMC43LAogICAgICAgICAgICAieiI6IDAKICAgICAgICAgfQogICAgICB9LAogICAgICAiY2xpY2tUb0NvbnRpbnVlIjogewogICAgICAgICAidGV4dCI6ICJjbGlja190b19jb250aW51ZV91YyIsCiAgICAgICAgICJwb3MiOiB7CiAgICAgICAgICAgICJ4IjogMCwKICAgICAgICAgICAgInkiOiAtMC44LAogICAgICAgICAgICAieiI6IDAKICAgICAgICAgfQogICAgICB9CiAgIH0sCiAgICJwcmVsb2FkZXIiOiB7CiAgICAgICJwcm9ncmVzcyI6IHsKICAgICAgICAgIm9mZnNldCI6IHsKICAgICAgICAgICAgIngiOiAyLAogICAgICAgICAgICAieSI6IDI0NQogICAgICAgICB9LAogICAgICAgICAiaGVpZ2h0IjogNTAsCiAgICAgICAgICJ3aWR0aCI6IDcyMCwKICAgICAgICAgImNvbG9yIjogIjB4RkZGRkZGRkYiLAogICAgICAgICAiYmFja2dyb3VuZENvbG9yIjogIjB4RkYwMDAwMDAiCiAgICAgIH0KICAgfQp9"},{name:"R_preloader_logo_png",data:"iVBORw0KGgoAAAANSUhEUgAABGUAAALuCAYAAAAHTat/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAHAHSURBVHhe7d0HmCxbWTZs5yfnLDlJzkGQJCKIKElBskQRFUQFFNMH+sGHASMokhQkI4IgoiCIgIhkJEnOHEAyEiUz//NOrYE5c2b2no61uvu+r+s9a1Wd2TPdVdXVVW+t8F0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsHxbrQSAjbG9vX3KFOdPnDdxrsTZEmdOnCFxmsSpW5QvJ76a+FziU4lPJE5IvH9ra+vjKWGt5fNy8hQXTFwkcb7EdyfOlKjPSJV1Pfn1xJcSX0zUZ+Vjif9OfCBxQj4r30gJAOwjKQPA2srN5MlSXCZxlcTlWv3iiUrI/H+JWdXN51sTb0j8Z+KVufl8R0pYWfncVALmuolrJOqzc9lEJTKnVQmbdyXenKjPyisTr8tn5SspAWCjScoAsDZaEuaqiesnrpO4euL0iWWqljQvSrwg8XytaVgF+excKcWtEzdLXLLWLVglZF6V+NfE8/I5qWQNAGwcSRlGlYvAN6W4wLDUnf/KReIPtPpM8j5/MsXDh6Uu3SHv9bmtvjKyXb83RV3Qr7I/zbZ/UKszhRwHp0pxg8QtEjdOnD3Ri28lXp54VuLp2dfVnWNu8t7/PUW1AOpRdVm5QqvPTd5zJdmq1UV1M+vZexLfl22wPSz2p23LuyR+NjH2cVRdAp9RkW326p01ayTb+u9T/OCwtJK+ljhf9k21ehpFtuE/p6hEe49+I9vm0a2+MNkG50zRS2vMm+Y9/0erL1Te97+lmPv3yRx8JtugunXCTCRlGFVOsu9PcaFhqTtvzIm2nhzOLO+zLnofNyx16WZ5r//Q6isj2/VeKR46LK2sF2bbV0KBCWX/V1Lubol6un/WWte5f8u+ri4hc5NtUK0LrjgsdecDeb8XbvW5yXu+c4rHD0td+8W8/79o9a5kG9bn5ZcT90zUWEq9qaRbfWc+PtuwxqZZadneNSbP/ySW3Wpv3irJ+NpWX7psxz9Kcd9hqTsPz7b5hVZfmGyDagX6wmFpdPfKe/7zVl+ovO8vpOjx8/OCbIMfbXWY2jz60wOMZS4tmUZ21VxsSJAfUbbVKRN3SNSNwesSd0+sQkKG+blTK3v2mUR3iaN8bk6V+I1U35u4X6LHhEypcZ9+P/HBvN6/SVxtZ+3qqgc8q56QKTW+0Jiqu1uvLtXKRavxnXqxlAcC+fxXi/pePz91HQIzk5QBVlK+pCuRce1haaXVTdElhiqHyf4+TaJaRr078aTE2DcHHF/NWDVXOQZqANpV6ALy6K2trZqFqBvZdvWE/S2JSnb0mozZrwYXvm3iVXn9L0vcKLGKSex1+K4q39fKsdQA0b1aVlLm8q3swVxakx9Bz9dINcA/zExSBlhV9SV9jqG68iQYDpEbsJMlqovSOxPVVa3XMag4qZpKfN7umOj92qXG3uhmDLF8fk6XeFSq/5K46M7K1fT9iRr77D/zfm60s2Z1rEtSZtQWS1vDmFw19lCPzp3jchnJzp6SMpfJez5Fqy/SMgYen5akDHMhKQOsqppZZ12setP8hcjFXu3j1yf+KlFTWMMqdF3629w8fqTVR5XPUHV1qOb1P5dYl26S9XS+54HzTyT7oLZ7JZTWwSXyfs7Y6mPZ2NYy2fY1u+Clh6UuVELmMkN1oZbVCmlSn8y5vtckIStGUgZYVetykVvGbhLelVx4ni3xhFRfkujpqSAjyjFxzRQXG5a69qetHFW21y1T1BgcPT9l3gR1E93TjHCzqPuGqw7V0fSclFn0Z61auvU269wyZkTqNSnzmlbCzCRlgFW1Ls3ByxVyA1XTOm+8bIcfT1HjXlSLCAMgr7YvtXJeVqGVzIu3trbe2OqjyeeoBvF9euJ0OysY0zp9V5WxkzKbPNhvT4P87lrGuDK9JpZ1XWJuJGWAlZMbjppGvQb8XBeVkFnG06ZuZZ/WQL6PTvXZiXPtrGTVfb2VM8uxceoUtxmWujZqK5lspxqDqT5Hv5OQ1OzDuiVlxm7Z+YbEV4ZqdxadPLhcK3uy0BmYcj6rcXp6vSaQlGFuJGWAVbROXZd2jf30cTS56KouKa9O/OzOCjipakHV+4xB70g8b6guXyVkUjwx4XPUlx9o5boYe7DfGki7xhrr0aLHV+mxO++ip8XuaQyd/SRlmBtJGViO7VYyH+v25LFs5GC/uZH80RTVL7vHJ4D0YxW6Lj00N4yjnOvzOapWMX+d+MmdFXQh+6VadZ5vWFob58n7Om+rj+UVrezNBbNtqlXfovT4PXmmvOfvafVF6HU67I/1MqA760FSBlhF6/bksWzcYL+5kPv5FP+U6L0FBNP5XCtnkuPk3Cl+ZFjq1qcS1UplLH+QWIXE1aZZxwcIZezvq17HlanWagtJIuQ8WONDLTL5MYtFdr82yC8bQVIGlkPf/jnJhck5UqzjbCIXz3vbiORE3udW4ndTrWlt6yKW9TSvViO3T/R+nDxia2vry62+VPks/UyKXx2W6Mw6PkAoYydlep6BaVEtO6prVK/3bYvswtRrS5nXtRLmQlIGWDXrepFbibu1H1emEjIpHpH4Pzsr4Pju3MpefTVRx/TS5fN09RR/MSzRoXUc/6yMmpTZ2tr67xQnDEvdWdQYKD3OvLRrkUmZXseU6XVcI1aUpAwshzFl5mddL3LLWidl9iRk7r6zgnX3zVZOLcfMlVP0fDNSnpybxI+3+tJk25wlxdMSp9xZQVeyf86ZYh1bdZar5v2NfQ/R67gyi9rnPY+7tpCkTI6xmpnywsNSdwzyy1xJygCrZl376Jd1H+y3uitJyGyOL7RyFr23kqmE+0OH6tLV5+mCQ5UOrfN31RkSYyecek3KLGoMlB5nXtp1ge3t7bO1+jxV16Ueu65+ZGtr62OtDnMhKQPLYUyZOciX/hlTLHr6xTGt7WC/2XcPSnGPYQmOL8fMKVLcbljq1r/k4vwtrb402Ta3TNH7ttl065yUKWN/X726lb2p8eEWkUjoOSlTFnFt1ut4Mr0ee6wwSRlglVwzsc4Dw54rF3Pnb/W1kfdUrWPuPyzBkd04UQN79+xPW7k0+TydKcXDhiU6tq7jn+0aOynzhsQog2sfR02JXVOhz00+8zUD3dmHpW4tYgamXmde0nWJuZOUgeUwpsx8rPuTx7JWXZhyMXmDFAYi3Uxfa+W0ep/i+b8SLxyqS/U7iXMNVXrUEmc9jwEyD6OOgba1tfX1FL3eHM97cNpVOJau1Mp56rWljEF+mTtJGWCVrPuTx7I2g/3mxuSiKWogUtNeb6b/beXEcuzUU+FqKdOzh+bGcKkJ92yXGvTYuEz9u1Zi3c97V8jxeJpWH0uv48rMO5nQ+2DnZRHdl3qdeUlLGeZOUgaWw5gyM8rFXzUJvsqwtNbWYlyZ7K/TpXhWomaIgUndNtHzrEI129JThupSPThx8qFKxzahVWeN+TT2GG+9ju2xiS1lLtmu0+Yiv6vuUS8+LHXlg1tbW59sdZgbSRlgVVSyYm5f+B27Si5G1uEJa3VZWvfm+yxO77MuPSwX5l9t9aXIeaFu9HtvPcRgE5IyZeyWna9sZW/mPRZK74P8lkoWz7NFzwUSpx2qXXlNK2GuJGVgOYwpM7tNucg9faLXwe2OJDePP5niLsMSG2yq7ks5fuopc8+t4mpw0UcP1aV6QCvpWI7f6tKzNt1Qj2PUMdC2trY+muIDw1JX5jZdeHtI02s3nv3m2XLKIL9sFEkZYFV8fys3wcoO9psLyHq69fBhiQ1XA3FOo/dWMk/MzeCnWn0p8rmqc8L1hiU6V/uq565389RD8qnH1jJnzmf2PK0+q4slVqWV8DyTMgb5ZaNIysByGFNmBu1J0SYlZVbyKWv2Ux3nf5U4884KNt3ELQTbZ/0Ow1KXvpV4yFBdqvu0kv5tSqvOcrF8Zs/W6mPptQvTvFrLrFI34HkmZQzyy0aRlAFWQU21WN16NsWqDvZbXZZqCmyY1g8n5vWEeRGet7W19c5WX4rc9J4zxc2HJVbAJiVlytgPEXod7Hde3W9WYealXZfP+Wpe95Y9tpR5b87/n2l1mCtJGVgOY8rMZpNayZTL5cKmxwHuDpXXW1MY/9GwBDs+38pJ3KmVvRqjlcwdE5vSHWal5TxYg51eY1jaGGMnZd6QqHGeejOvljKrMMjvrjMkLjJUZ9ZjS5nXthLmTlIGWAU/0MpNURf21TpolfxuYuxm7PSluvocWW5oz5TiZsNSl16/tbX14lZfJoNmr44rJzapVWcZe7DfGruqxy4l80oqrNoshjN3Ycp3QV1L1IOe3ui6xMJIysByGFNmSvlyrm23aS1lysp0Yco+qouwuw1LMLXbJGrmml4tvZVM+2xdZlhiBWxa16XSw3fVK1rZk5lbyuTzXwm+Cw9LK2Me48r0es4zyC8LIykD9K4ubM4xVDfKKo0r88cJ3yfsN2m3zeqm06uPJJ4+VJfq1q1kNWziA4RzbG9vj5046HFcmfNku8w66H0lJ1btu3UeSZmLt7In9X2mpQwL4yIalsOYMtPbtK5Lu1YiKZOLzhrY94eGJTiRz7XyuHIc1bSv1xqWuvTnW1tbX2v1Zeq5Oxd75BiuVp2b2FKmjD2uzLrOwLRqXZfKPLpez2uQ5Hl6d74DjvydBpOSlAF6t4lPHsv35CJ/FVoIPbCVMIuaBrvXbp5fTNRU70uVz/9FU/R4c8LBqlXDpo6rNepDhNwsfzTFB4alrmxiUubcOXfVjHGzmNcgyfNkkF8WSlIGlsOYMtPb1JYyZeynj8eUC68fTXH1YQmmk+OorkV6nnXp8bnp+59WX6YfaSWrYVMfIJRRB/ttehxXZtak6irNvLTXrF2YekxG67rEQknKAN3KzdqFUlxgWNpIvXdh+j+thIPUrChHUYnX+qz3qGaQeuhQXbrrt3KV1PZ6T+KFiWcn/inxmsRnEutukx8gXCnf1zVr4Jh67MK0iS1lyhVaObEcR6dNccFhqSuSMiyUpAwshzFlptPzGBPL0G1SJhdO1UJm3cZPqMFcn5G4f6JmAqqbrOofvxt1k3zXxJ8lXpeYaMrnDfSlVh7PnVvZo2dvbW29t9WXJp+vVZt1rgZaram7z5HtdbHEDRI3T9w0cbVEdeu5SKJmaXtu4huJdbOp48mU0yUuO1RH86pW9mTqabFzDjhPilXtDjfLuDI1yG9v96f1Xf+GoQqLISkD9Ow6rRzL2DcOPXdfulcrV91/J343ccXcOJ4vcevE7yaennhZ4o174kWJxyXunah9c+7EzydcrE0pNx51M3eLYalLS58Gu6mBj88+VLtW3bpun8/D1RNPSBzaIib/732JxyZuksVqAfk7ic/W/1t1OY5r9qHzDUuj+GorxzT299UbE/87VLtx4Rwbp2r1Sa1qK5kyS/elHrsuvTPnrS+0OiyEpAwshzFlpjP2k8e3tHIsZ88FXQ322ZX2BK/nG+mjeH/ipxIXysXW/RNv2lk7gfybTyQembhyFmsGqn/f+R9Moo6jMwzV7rwm+/Y/Wn3ZrtLKnlULokrGPHVYPLr8m48mfivVSmb8SeKoXd16NXbXpUouf36ojmbswX7rIUq1YOzJyRKXGKoTG7vl0Swu3hLu05h2ey2SQX5ZOEkZoEv5Qv/uFGOPwN9DH+Ieb85+OnGKobpy6ubvQYlL5yK+BnCdy81gfs+LE9Wy6ycSJ+ys5CutPJY7trJHf9rKMfT+lPxjiR/KMf+uYXE6+fefTdw31Ups1tgzq2rsrmYfStQ+GVMPg/32OK7MtEmGVW4pU/eX0w5S3GNLmd6SfawhSRlYDmPKTK6HQRNrnISx9XCh+23bw1gX1cJkFdWNy7VzE/jbiaMkDCaW3/v3KWpq3EftrNhsx+xSkWOpurBcb1jqzgcTzxyqo5h6LIol+Zkc67WN5iK/q1ol1hhiv5dYxbGaxm7VWdNBf3KojubSM7SOmJcex5Wp74NprOrMS7umHey3x+mwX99KWBhJGaBXYw/yW4m0HpIyvQ32W61BqsvBqqlWT9+Xm7+F79P8jS8m7pHqrRL6oR/u9oler0P+PPtwzDGluuu2uMfLs21qVqW5qu2duF+qP5743M7KFbC9vX2uFGN3uajumB8dqqOprjpjt+xci5YyOaZqJqseW4xMYuJxZfK+Z+nutSjfTNR4RbBQkjKwHMaUmVwPffTn9iR4Bj1MNbrXT7ZylVQiprpaLLV5f/7e36Wolk7v21nBfjVbT49qbI7HDNXR9Jz4nHgMmUm0hE8l5T+8s6J/PcySVeeYTw3VUY062G+OnY+n6O18O01ypQb6PvVQXVnTtPS5UGLagZEX5e05ro46kyBMTVIG6M729vaZUkzb9HVe3p8v4npau5BuLhM4TWLsbbEj+6XGkVm1AX7fnrhR25dLl79bf7+mD9/EPumHthLKsXSNFDX1aY8ek/022qCp7fxXn/teLXy2sWz/t6aoY+Q9Oyv61sNU2NVSZuwxZUoPLTt768JUg95Oer+1yuPJ7Lps3vekDyR7bB20ymNdsUIkZYAe1cV4NWMd0+7Ttk+0cky9DPZb43+cdaiuhJqu98dyg3foNL3LkL9fYz1cPzHWTD5jqWbfh7lTK3tTXZYeNlRHc45W9mopn6d8bqqlzHUTvSdmehj/rL6veviu6iEp01sXpkqwnn+oHtm049D0pGbVm7TFX4/jyfQw4QMbQFIG6FEPF7n15LF4+vgdNdbDKvnp3Nh1cUOX1/G5RE0BvPG2t7erefpth6XuPDP7qQZNHdPpW9mrs7Ry4Vpi5ocT1Z20O61V09gDstaA2rV9ekjKXDDbpMbYGVOPg/1OOk7Kqg/yu2vSFj89tpQxyC9LISkD9KiX5uBl7BktSi8zMN20laugpruumZDoTyX3zjxUu/OQVo6p122z67KtXIqWJLtJ4os7K/pS48mMfS1dXW1rYPqxB/rdNeq4MlGDsv7vUO3GpF0116GlTJn0XNFbS5lqOfmmoQqLJSkDdGV7e7sGtxv7oq6c0MoeLnQvle1STYFHk79fT+7ONyx1rwa8/JWhyog+28r97tzK3tSsQj3MuNa7H2vl0mS/1Dg21eWtkg896WGQ390B6Xt4gFBGbdmZY6VupHsbw+vISZl2DfQ9w9LKmzQp01tLmbfkePpyq8NCScoAvalWIT2Mvr+blOnhQrfO1WOPK1NdCFbFA3IhNeo4MhysdW24wbDUnT9tJcd2w+zHC7T60uQzXS3f/nBY6kYPXW0/1MoeutoW48qc1CQtQCqBM/aYevNy6VYeV84p50yxtK6RR/TaVsLCScoAvenhyWPZnY61ptjswdith36wlb2rMWQePVTp0O0TPU3xvqsGSn32UB1db10v9qv997tDdenun3j5UB1XbiJPm6KHQdh3kjJbW1s121kPT/Wvmm0z6aw789bbuDI1xfVR9TiuyrQumWPhqOd7g/yy0SRlgN70MJ7Mx3OBW4Mn7tRbObbRnj7moqqe2vWwX47iwdl31Xyd8R20H3qddemhOW6+1epj6z0pU26f88KNWn1p2me7jqEexpepc/Iph+qodlvKlB6+r6q1wyRJiEXoraXMBfJ5OWoL4HVKytTn46JD9bgmHXdnGQzyy9JIygDdaE9UrjUsjWq361LpZfDEMQf7rfFkapaR3tUNyZOGKh040Y1zPt9XStHjrCI1dfrjhmoX6vX0rlpCPDH7dOljX2xtbVWrpt8YlkbVS6J6t1VnMdhv5Bip74L3DktdqPutoyYdemwxMoujJpkmnaFq0b6eePNQhcWTlAF6csVED9PB7k3K9DIV6/lyA3TuVl+2a7Syd3+Zi/GvtTr96bWVTB03Pc3s08uArcdztsQLcl767mFxebK/ntuqY+phPJmy9/tqb31MPcwY2FtrmYu08nh6S07M6qjjyhy1Rc2yvCnnmd0W07BwkjJAT3p58ri3Ofje+tjGutDtYeDG46lZWXpq7cAeuXE/RYoaT6Y3lcT7i6Hah5ZY7KXb5PHUjdRLs39XZWa2ucj7rVadVx+WRrc7+1LppaWMwX5P6rgtZXJcVQu0dUvKHLXlT29Jmd5m8GLNScrA4a6YL8i5yO9ys3g0vTx5/PZFbm6QvpKilyfXYzUJ/95W9qymM35/q9OH+uzsumHiHEO1K0/PcbO3+0cv9t5o965uul6Vr7orD4sboc6JPbTq/ET7jtrVy0OEun4ae7yd3gb7PUr3pZrV7DRDdW0ct6VMjpVKRvWWlDHIL0slKQN0oX0p9zCeTNl/Q9RLF6alP33Mfjl1ilXo4/6MVtKJfTeLd25lbx7Syt68s5Wr4ryJl+V8cZdhce31MkvgB1q56yOtHFsNanuFoTqaGg/kS0O1C0dJOow9QPIiHCUZVS3tjjoQ8rIY5JelkpQBelGDwfXyJH1/i4teLnRrqtFln7drv/Q4hfF+z2klnckxW2OP3HhY6sq/bW1t9Xrh/dZWrpKaIvpx2d9PSvTQimSReulquz8p01Orr7EH+62Zul47LHXhKEmZHmcgmtXpcz44f6sfZukDhh9HjSXzX0MVlkNSBuhFL12Xyv5ZG3ppEl4zIC37ou2yrezZu3IBvv/mhH7cLtHbU9DyJ63s0So/pb1D4rW5ERu7pcRC5H1Vq85ekjLvbuWuXsaUKQb7PbHz5tg5XasfZpldeJY5uPnxrlsu1MpevDHXFDX7EiyNpAzQi16ag384X8ZfaPVdH2tlD5bdhWkVnty9uJX0Y2+3gTu2sifVPeh5Q7VL9YT/W0N1Je2OM3P3YXGtXCZx1qE6uv3d3Hpp1Vl6GOy3t3Fljpd0WVZSphIObxiqS3G8wYt7ayljkF+WTlIG6EUvLWXe1cq9enr6uOwL3VWYCeLfW0k/dp4y5qa8Bnns4eZsvz/b2trqNumR1/bZFDUmxiqr8agemWPg6Ylq5bcuenmAUE6UlMlxU90uPjUsje7iHez33pIyx5sWe1ljytQ4ecscTHzVWsoY5Jelk5QBRpcLt/pCPl6f42V5eyv3OqGVPVj2DW5vT7AO4qlWv+7Uyp7UTevjh2rXXtDKVXerxH/mPH+VYXHlXaeVPThoQOheBqave4xRE7JbW1ufSPGeYakLhyZl8vmo7bWs79s6RpbZ5VdSBo5DUgboQS/980vPF7nlCrl4W+b4HBduZa8+l+jpopsmx+nJUtT4Ir15VG7WvtzqPXtuK9dB3Yy+PMfEfRM1Jssq66WlzEdzHNf5b7+eujD1kIjrqbXMsVrC1IOpZU0jXsdIT0mZC7ayB/Xd8LahCssjKQP0oKdBfg9KyvQy0G+pi7YrDdXFys1TDUrYy9gJh3lzbky2W51+1M3iDyVqquSefC3x8KHavZcnekoIz6rOXX+U+IecW86ys2bF5HVXS4aavrcHB31XlWV2SzmeHrouvqKVPThWS5hltkqtcfL2zzK5SBfMZ+cUrX4iWV+zO/b0PfGGXFPUzF2wVJIyQA+67aNf8gX9mRSfH5a6sKynj73cfBzLO1pJXypRdueh2pUn5/Pc08Ddh8rrrDFvnjYsrZWbJl6Xm7HLD4srpadWnQd1tS09dbftYQamV7eyB8caU2aZrVKrpcz7hupSVOLlsC5K507U/++F7tCMQlIGGFUuzM+Zombq6EHNGHPYBW1PUy4v60K3LpZ6d9DAzIzv9ImbD9VuVKLooUN1ZazC2DfTqFYBr8j5/5bD4sro+gFC09N31bmzj8dO7teA2XtngxvT+bM9DuuitMyWMh9PfDixzBYhh3XdukAreyEpwygkZYCx9fTk8V3H6ArT04XuspqEV8Ksd8tsgs3RnT1xmqHajX/N5/u/Wn0ltNf70mFp7VT3yJqZ6X7D4kroqavtYQnpnrovlbEH+63EQ00x34MaZ+uw8VOW2VKmxiOq7bLMVlWHTffdW4vc17cSlkpSBhhbT08ej9UVpqcL3YvlRmYZYzLUjXXv6mkfHMWftnLVrOrrPooa9Pd3cj57bKJuWLuV13euFMcbsHSZDvu+6ukBQulhXJlXtrIHh7WIWeYMRNVSpizzWDksKdPLzJulWlTpEs0oJGWAsfU+yO+unvrp143MVYfqQp2tlT1bp4FQWZy3JFZ1iul/TKz7bCB3TTxze3v7tMNil3pq1VkzxBz2oOCjia8O1S70kJTpaQamw1rELDMpszuu1jKTMoclo3pqKfOfW1tb32x1WCpJGWA0uQA/U4qeBns81hOS3rrJLCMpc+ZW9uwTrYRj+bNcbK/kLF3tdf/WsLTWfjzxjx0nZnrralsDQZ9EO156atl5lQ5aQfXUUuYkSZlsn1OlWNYYbnV8fHKoLvU4OaylzHla2QPjyTAaSRlgTNdM9NRk/VgtZXrrp7+MwX7P2MpefSk3ID09EaZP1VT/yUN1Zf19oqcby0W5XqLXxExPSZljfVeVnrownSEx6mD++Z6oJEQvg8If1GKkxpmpFrDL8Mlsj90Bfpd5nFw4n+uD7ju7ainTSlg6SRlgTD11XaqnR8e6aNvEfvo1g07PPttKOJaH5ybkK62+klrrh/skDmwdsWZ2EzOHzVKzdHkt1WpwVVp1lp662xZdmL7joG5Khw3+uwi7rWTKMq9r6vN8UALmvK3sgUF+GY2kDDCmngb5PSE3Pv/b6ieR//epFIf+/xGcMzcKi76QqybVPftiK+EwNfbGo4bqass56NUp/nJYWnuVmHlqznG9tKSs76qerplXqaVMMdjvdxyUlFnmYLc15tCuZR8nB42nUwNo9+ALiV5aU7GBJGWAUeRi+9QperhQ23W8i9zS24XuoseVqWbnPasbbjiWJ28NXRfWxa8nemsFsSi3SPQy89S1WtmL47WU6a27rZYy33H2XP/UdPB7XaCVy7D3fFgD5e92ZVqGEyVlsh2+O0UvLeJem++KTWiJSKckZYCxXD3RTfP0eHsrj2XTLnS7nqI2vt5KOMxZW7kWctPw+RQ1U1F1Z9oEv5Qbt59t9TFdp5W9ON4T/d4Sd5fPfjxNq4/lvxK9tK7c38p1mS1ldmdeqvNJJWSWeazsbylzzlb2wHgyjEpSBhhLb08ej9JSZhMH++3Zl1oJh7l5bgZHHWR03nIj9aIUfzgsbYSHZR9WEn8U+ds16PD3Dktd+FCOgeMlF3r7rjp54kpDdRzZZjXV8WuGpdHtbxkzSlKmWWYL4P1JmZ5mXpKUYVSSMsBYehrktxwlKdPb08fvzQ1D761ZYEx1nXPfobpW7p/4t6G69qpF5d/mXHeWYXHpKvndU6vOo4x78ZHEMrulHIUuTN8xZkuZvWPKlPe1chn2J2Wq+1IvDPLLqCRlgKXLxXU9NavpsHvytlYeS29PH6tf+qWHKnCIO+ac09MMHzNr3Q5uk+jtnLQo1bLgEUN16Xp7gFDdcI6pHR81XkhPDPb7HfuTMMtMyny8lbve38pl2D/IcS8tZWomx/cMVRiHpAwwhmrG3NN0y5/MRez+Jr0H+VAre7LJXZjO1Eo4lmrlcO+huj5yzvpEipskPrezYv3ddnt7uwb/XbaeZgksb23l8fT2fbXogemPopeWMt+eGjrHdH2P7R/4d5H2J+uWOePQefJ+97Y6O0crx1aD/G7KOF10SlIGGMO1W9mLt7TyeD7cyp70cKE7lq1WwvHcPTcDY3V/WZjcSNS56+aJr+2sWH9/lv24tFnh8reqVec1hqVuHPX7qrekzEWzPc/e6qPI5+VTKXqY9vjbSZlYdiu+/UmZ97ZyGeq+c+94Oudu5diMJ8PoJGWAMfSWlDluc/CmLmZ6e5rS07Tiy3bGVsLxVMu8nx+q6yU3mi9JcetEDWS67uoG9n5DdSmuklhmK4bjqe+fo7aUqXFleqO1zGBvUmZvfdG+kvPFZ1p917K77exNyoyapNtDUobRScoAS7W9vV2tG3prDn6kpEwuZr6aYv8geWO7bLbpom4aeu8W0VMXOPp3r3xWxp6WdyFybvqHFHdObEJipvbj/tlrFqW3WQI/mH39hVY/nmXOqnNUPXS37WFcmb2JmGW2FjlJa992PB2l+/a87B3k+FytHJtBfhmdpAywbDUwbS9PR3YdZZDfXW9vZS8WOdVo7zd4a9cdZY3UhX5vx0+NX3DXobp+cnP1lBR3TKx7V6ZTJ35zqC5cb4P8vrmVR9Hbd1XRUmZwuu3t7d2HCstMyhzWeuoos0/Oy96kTA+zL306585lzkAFB5KUAZatt1Yy5ah99MskP7ssi3r6+PlW9uoUubA9c6vTl08nXjBUu3LfHDOVyFxLubn4mxS3Svzvzor1ddfsx4WOxZHfX9fIvX1fTfL9c9RuTsvUQ1KmWsZ+caiOavf4XeaYMofNyPXuVi7D3pmmenhA99pWwqgkZYBl6+3J4wdyIzNJ8qGHQQL3W9SF7lGbyY+pl+bPnNRft7InNSVrTSW9tnI+e06KH03UNK/rqmZwuedQXZhq1XnWodqNIydachxUl5TeuqCeY3t7+yKtPopsl2rB95phaVS7LWSWmZQ5oZX7LbNV1U5LmRwHlZDpIUFuPBm6ICkDLFtvSZlJW74ss5nvUS1qsN9VmGp371M3+lFjt1RyoKZt7s2v5YZgrWfuyo3ny1LUeCgf3Fmxnn46+3Hv9Lrz1tt3VZn0+2qZLSCOqgZPHlsPXZh2Hyicp5XLcNiMXMt82LT7nX22Vo5NUoYuSMoAS5ML6HpKvcyZBo5iHS5yL5xtu4i+2avwpH1ZA34ymVNtbW19PeUTh8WuXD5xw6G6vrL9a6ysqyd6uAFdhDrn3XioLkRvswTW5+kdQ/XIJv35ZehhxsBXtHJMuy1klvkd1kNLmd33a+Yl2ENSBlim3i5yy6RJmXrS1ON4DYvowvTJVvbsYq2kT49tZW9+o5VrrXVhuW6ix+TYPNy2lYvQ2/fVu7I/Jx3EuceHCD3MwFSJyppefEzn2h7Gt1rmYLeHtZSpmbq+MlQX7tTtIVIPSZlP5DN1WKIKlkpSBlimHpuDTzQYYr7A60KuxwvdRTx97LHryX6XaCUdyuelntS/fFjqyrVzY3DNVl9r2QdfSdR02fdOVGuLdXKj7MeajWmu8jtr3JNljvVxFDVA7aR67G575ZaMGE0+DzUQ+djjw9XxVV2YTraztBwHTpOe7VHj7Cy7C1PNhjc2g/zSDUkZYJl6e/L4jcQk02Hv6nGw30UkZVahpcwVWklf9t4o9zjgb/n1Vm6E3Hj9WYrrJQ6bFncV1bTC1xmqc7XqswTu6vG7qsabutxQHdUrWzmWcyaW2Z37szkHHKtL8jTXQtOqhFQPY8roukQ3JGXgcNVMuJ4qzCM+ldho29vb9USot1YN0zQHL5vST38Vbt4ulGPrLK1OP/YmZf420eNMXjfNsVMz7GyMnO/+I8WVEy/eWbEert/KeVqHrralx1adpYepscdOytQAv8tsjVXXoseyzKRMJaMkZWAPSRk43NtyAXvheUR+132HX7nRenzyOFHXpT16vNA9a24w5z2+yscT0yStlqlm0elh4EgOkXPgl1I8bVjqSh07G9VapmR/VLfEGyT+IDH2uBrzsIgEyjrMvFT7+ospPjwsdaWHc/bYA2AvOynzvlYeZpqk37Sq+1IP081LytANSRlgWXp88jhNH/3SY5PwMtepRnNBXzdshw0M2JMeE36cWK8D/t5ue3t742bwymf7m4ka7PgnEp/fWbm6rph9eIpWn1l+V7Xq7G0A8Upsvn+oTsxgvwerhzJjtuA7Y+KiQ3Upjnf8LHMGpmopM/aYMh/NOXCdunKy4iRlYDnqieym6/HJ47olZRZxoTvtjcAy1ewydCY3t9/uwpSL31enmPbztkh1M//LQ3XzZL88O0V1JVnmU/J5O1XiMkN1Lnr8rqqWu99q9Un1ONjvpXJ+qPGARpPtWYPb1nlpTMscbPx4LWXek1hWy9hqITR2SxmD/NIVSRlg4XLxdaYUPQzst99U3ZdyMfc/KXocBHcRTcLrQq13V8sxduZWpx/7Z8XpdcDfn87x08P0rKPI+aySzFdPPHVnxWqa59hA69Sqs/T4EKFmHJpry84pjd2F6bKtXIb3tvJAOQ9MO/HBNHpIyryuldAFSRlYjnXotz+LayWWOe3jUfxv4pgXKcfR42C/c23G3/TaKmivml71RkOVjj058dWh2pV6Yv8LQ3Uz5YbsS4nbp1qthqoFwaq5eCvnYV1mXtplsN/DjT3Yb7XyWpajPGBZVou5HsaUeX0roQuSMsAy9PjkcZbm4KXHC92aanTeU0T32PT9IDU2Bh3L561moavuMj2659jdKXqQffSQFLdKVNJ6lVyolTNpLe4uPyx1ZZab5V7P4T0M9lvdlzbhodnXEx8cqsc07eQHk6prlbHHlDHIL12RlIHl2PQxZdZletG9NmKw31iVsSZuogtTdw56CtzrgL/VfeluQ3WzbW1t/X2Kmya+vLNiNZy7lbOqVjI9XhvPch6uccHqprw3ow/2m2P90ylWoTXorE7Ie63uScezzHG/xmw9/eFsj4+1OnRBUgZYqNwo1xORHpop7zfrxUevTx/neqGbC5cTUnx2WOpaJQCq+wX9qM/+fi9KfGCoduc+OV+dstU3Wj73L05xh8QsrQmX6ZytnFWPXZc+nf3x0VafWLsZP94gr2M4fz5vNdPV2MbuwrQMR23Z++ZWrrvXtBK6ISkDy7HJY8pUkqDHG51T5YLwB6eN/PuzDb+mO4toEr4qfa/vkX1jprOO5QaxbvJ7HfC3psa+3VAl++pZKf7fsNS9Gkx+Hq7Typ58dP/3z6SR3/G54Vd1p4epsSVlmnzmP5RiFR7CzErXJbrj4pVR5WKhmtXOpS/4ArwxX1BXavWZ5H3eOcXjh6Uu3Szv9R9afa7y3u+f4kHDEktQN71nzv78wrA4u+zDP0zxq8NS926c9/68Vl972TdvSHHFYak7F86+OEmrmLzmGuSx1vf4YKhmH7lsXveoifRso1vnNTy9LY4mr6O6GLw80cPN87F8NtvrLK0+lbzX06aomfW0llqe381+q2uE0WS/1xhCbxqW1ta9sp3/vNWPKdvjpSl6nBZ+nm6Y7fH8VocuaCkDy7HJCdB1/3LvTZ3X591a5rWtXAW/1UrGd+DNbS6G62nsC4al7tTUyj82VEd1u9wc3aPVR5N9VTMx3TOxCa09a1pwCZnl6mGw3xrcdm4PMTp1lJmXdq3KOHKz0FKG7kjKAAuTm4qaqvgawxJLNO/Bfl/RylVw9Rx3t2h1xlUtDw7T64C/5ddbObaH5FiuRMGotra26gbmn4elteYBwvJdNcf4qA+tWuKxZmFaZ5OMKbTu48p8IPv8k60O3ZCUgeXY1DFlrpzY+GlmRzDXp4+5gPlIiupquCr+KBf6x0oIML5/THxiqHbnGjl+erhBr8Grn5XXUt29xva4Vq6za7WS5akZ8y4xVEe1zuPKVNJpkqTMMmdgGsMqtfxlg0jKAIvU41TYm2AR4z9UP/NVceHEA4dqf3KTPa9BSVfW1tbW11I8aVjqUi+tZWqq5+d0cMz8a2JtHy5k+1arzmsOSyzZvFt2TmOdkzI1HXadb4+qui+t84NEXZfokqQMLMemjinT4/Sim+C8uck4b6vPS92UrZJfzjb44VbvRl5TjXlzp2Fp7Z2ilYfpuQvTDbOvrtDqY6uBnKvFTLWcGUVu6mpGlg8PS136SiunVYkBrevG0cMg0q9KrGsiYpLxZOqz/vkUHxyW1tKqzCbJhpGUARYiNxCViNJSZjzzHkDxhYma2WlV1PfbU3IcdjG7W91QJ56Qak0xXBe9m+B0rTxQLv7fnqJm9ulRnb9+bah24XqJp+cYGnMg2k+3skdfbOW0PEAYz+iD/eZcVLNuvWNYWjtHmg57n3WejUpLGbokKQPLsYljylwmcbahygiu2sq5yEVrjf+xahcz50j8c25kqxxN/v4FUvx7YreFzOdaSd9jldw6+666wvWiZoV6Rl7TWC1mjplkG9lnWjktg/yO5wojHtN7rWsXpve2chLrOq7Me3ItM+u5AhZCUgZYFIMmjmsRTx//qZWr5JKJF+Wi/1zD4nLl794yxRsSe/fHprSUOYq/TfQ6HW2NM/IrQ7UblZh5fo6rpY4xk7936hRdtDo7xKdaObG8t7oW9n01nkrI9NBVcF1nYJqo+1KzrkmZ17USuiMpw9jqi7gu9C6WuFKiLoyum/jxRN3M3CVxj8S9E7+deFDioYlHJR6feGbiOYl/S9RTjjcm6qnACYnqA//lRA82cUyZ67SScdRUo/M+x/99K1fN5RKvzPa4/LC4ePlb50g8OdVnJM66s/I7Zu1qsSoqqXFMW1tbtS0qMdOru2Y/fner9+IHEy/P6/qeYXEp6m8eb4ygMf13K6dRrTr3f0ZZrrm27JzSK1q5bqZpKVOD/a4jXZfo1qYOPsqGycVrTctcF5T1dLH65NeAftUUe3ddlbVc6+v/nyXx8dwwPDLlzPL3K7nUczP9m+W9/kOrz0Xe84dSnG9YYiSXzn6tcTvmJvu1fl+1PllFlaStlg+PynZZSJfCbJ9KRPxcosaOOexGb277JX+vWuHUQLA9OtJ5Je/h6il67jrwu3kf92/1pcg2qQTozYalQ1Uz/DvmtT1vWFycvJ7aj9VKp1e/ne1QD20mlvd2zxR/MSwxkidl/406AHqOg3qIUWPLnHFnxXqoceBOm2371WHxaLIt6nusWjBWC7l18kPZFi9udeiKpAwsQb7gquvEpRNnSFRT3dMkjpUoOnMr9yaKDlo3L3NNyuT91jgM7xuWGNFdsl9rcNm5yb59QIr/OyytrP9I3DvbZm5PzbJd6rN5+8T9Ehetdcdwvvztj7T6TPJ3Vz4pU/I+qrn8ZYel7lSry/PnvSythVO2x1GSMqWSiw9L/GZe3//urJmzvJabpPjHYalblZyqlmkTy/v7mxS3HZYYyTuz/0ZP9udYeEGKGwxLa6Gmw75gq08k26JmKaoW7OuizpVnyfYwphtdkpRhLnLy/uUUX09UZr2mpqwn0l9q6+oE+LVEXTDWuq85Kc5HtvtuK59K8FSipxI+9ZSnnnJUAqieclRUvZI4+9fVv62ff3D2ydz6U+d11ROvuSYDmMojsl/rKfDcZN9WV8N3Jlb9+6Mu0J6bqCfk/5rt9M1aOalsj0pA3jnx04mjtgw7U/7eXMaVyd9fl6TMfVL86bDUpfvmvfxJqy9ctsdRkzK7Kgl+n7zG6s47N3kd1fWvugf33r3nannvr2n1ieQ9VoL0PMMSI6nz8VmzDysBOpocCw9MUV3l18VLsk1r5raJZVvUEAH13bYuukj8wWEkZZiLnLyn6QqwN1FTyZv6Mq6ylmt9/f9K3tS6ekJZiZ5aVzczuwmg+rlqlln13XWVFKrYWZeTsEE1lyyHQ40/UFHJn91EUSWADksK7W09dNxxKDiy1+X4n3tf/ezfmklonaY7/2iiuoC8JFFPB9+d7faNlCeR9143bzUWVk2he8NEJUQm+i7N757bd29eT89JmVvkrT6r1Y8p7+PsKT6cqHNBj2rMkgvn/dR30MJle0yalNlVCZQH5nVWOZO8hjqH15hItW96VtcfZ8x7nrglU95jtWqbZspg5u8G2YcvbPVR5Hioc/rCuwMu0V9lm/5sq08k26K6+v7xsLQWnpJtcYdWh+5IyjAXOXlPk5RZlmfnRHzzVp9J3mZl2c+d2JsoqqTQTqIof6cSQcwg27j6de9P1FTyZrebV607Vjev3Z/bv65+bn+LonUf7LyO07pZqSTl3GQf9T5G0qwqIfPxRM3osntuq2PpvIk6rmbx2eyPGrNqLrIvek7KTNR9Lu+lBvy99bDUpZ/J+3lMqy9UtsW0SZldr038ZeIZec0TtUzN364p5H8r8fOJk9W6zlUS9eKtPpG812oJUC0CGN/9sh9/r9VHkeOhzs2fTqzL/dGvZptOlVjJtviRFM8fltbCL2dbPKTVoTuSMsxFTt6bkpQ5yngaJ0rUJE7SeidR/69+pn62kju1bm83r9119XMHtijKe6plZpD9WTcch7Xe2W3ls79FT92c7yaFjjce0N51Y7lGjpVXtfpcZLvVtqlWDWfbWcEkPpT9cYFWn1n2xTolZWoshxrToVfVba8Gaa7BMxcq22LWpMyu+p55WeJFiRpD6W2J/857+PZ3dv5WJadrFsSatr0G863vy/qMr4qn5v3UeE4Ty3t/bIq7DkuM7DnZjzXz5qhyTNRn5FLD0sq7ebbps1t9ItkO9QByllnNenOdbItq5QtdkpRhLnLylpQZx/5uXjfJe60bh7nI+62kwnZ+Z/0dZpBtuZuoOaj1zm4CqBI/tW43UVStenaTQocljw5qUbTXvbL//rzV5ybv5/dT/MawxATelv1RU/DORfbDOiVlKjlQY6NMNTDlktwy7+mZrb4w2RbzSsocpL4rapaZOq/X+aTGi6lz0qq6Z/bJI1p9ItnO1XXpeANzsxwfy36sRMCockysU6LuCtmmb271iWVbfDJF790Xj6IS6WfOttCanW5JyjAXOXFLyvThSnmvb2z1meX9viXF7g3kziDNib0teiYZD2i39VD9v/q5A1sU5fXPtavNJsp+29t658vZpjV17lzlb9Sgtu9NrPLN3Bhelf1xjVafWfZDz0mZu+a9TtTNLe+nBtmswTZ79dq8p2pRslDZDotMyqyby2Wf1HfVRLKNa1bEGk+Kflwg+/JDrT6KHBc/k6K6/q2D02d7Tt2qOtuipo++7rC00ub6MAQWQVKGuciJW1KmD3NLyuS91tORTyTGOE8cr5vX/nW7P3dQoqjWHZgoyraqf8MMcpwc1nqn1u0fD2g3UbTbUmjvuvq5w8YIqnX1u9bBC3PczW3K1Wz/npMyNe34n7X6keT9VNeu9yd6Hu/p+nlf1R1oYbIdJGWOprpi1VhPE8s2rvGLahwj+nGr7M+/a/VR5Lioqflriv5V95Fsy6POCHigbIuHprjXsLTSnphtsU4zSbGGJGWYi5y4JWX6MM+kTN0Q1I3BujusRU+tO2g8oCr3JoV2kz21rn5ub/Lo2y2Ksl9qHTPIMbl3kOZK1FQiaHfdNN28dpNCB61blGfmWLhlq88s22StkjIl7+mfU/zosNSlf8n7qkEwFybbQFLmaB6TfVEtGyaWbfywFL8wLNGJP8z+/PVWH0WOi0oIV/e++t5YZS/NtqwZ1KaWbVHduKo716r7pWyL+rxDtyRlmIucuCVl+jDPpEyN2F9TIjI/h3Xz2u3Stb9Fz951dYFVN+AsQY7/Y7Xe2U0KVTJnNym0t0XPQcmj3UTRC7If5zYWT17nOiZlKmlVUzH37Hvz3mr69IXINpCUOZqbZj/8U6tPJNu4vitrenv68W/Zn6N3l8mxUQOOz61F40gem215t1afSrZDddV89bC00r4/2+LlrQ5dkpRhLnLilpTpwzyTMq9JcdVhiQ48Ofv2jq0+V9nXv5mikgj7k0LVKqhaBO1dd6IWRXlNC5+JhsNl39X5qGbOOSwpVEmkveuW6T45Pqr5+0Tynuo11+xeNTVzr56e93abVp+7bANJmeOrsbLOk/0wcTfUbN+a+rimvO+5m9wmqu+XGpD1m8PiOHJ89H6tdxT/J9uxBuSfWrZDPYyolsOr/DmpY+lM2RZTj60DyyApw1zkxC0p04e5JGXyPusmrprvnnxnBT14Z/btJVt9rmY8ruuC56BuXnvHA9q/bn83r1pXCaGKWneSFkV577WOGWVfH9R6Z2/Xr0rc7O3mVS2FKkmyd93ebl7HalH0gOy3qQbtzevsvaVeJSMvkff3nmFxvvL+JWWO71HZ/vdo9Ylk+94kxT8OS3RmqoGb5ynHR3VPfP6wtLLmMj5PtsWqz1D2X9kOl2916JakDHORk7akTB/mlZSpZrvVfJd+1GfsrNm/c09OZH/XDXUNrlplz06UqEkc2HqnrdtNFO2uq5/fmzzaTQrtTR7trMs2rt/LjHJcnSrbsrbtxPJvL57ifolKIu1NFFWyZ/+6sZLHj877u3urz1Xev6TM8V0t279adE4s2/cPUvzasERn7pb9Ouo4Ju078dOJVW4hcuVsx5m7PGdbPDPFTwxLK+mvsx1+utWhW5IyzEVO2pIyfZhXUuZBKe4/LNGRH8n+/ZdWn6sVOLaXrZI4lfypJFAlbyoZtnddzebw9JSMLMduXcsc1Hpn77rd1ju76yqZU0md3XX187vrdrt+1br9LYpOlthVyb3vyXEw92mV854kZY5tpqnJs31fmeLqwxKdWViycxI5Rt6a4tLD0ko6Y7ZjPYiYyRpcG9wz2+ERrQ7dkpRhLnLSlpTpw7ySMi9JMdOo/SzE/bJ/f6/V5yr7vG44qyvGd++s4HimGsT2MNn+b0pR41wc2HonUa139iaFvpGoLob7k0e7rYdO0qIor7d+FzPIfqon55Ww2U3UfCbbtfbXXOXvSMoc2x2y3Z/S6hPJtq0EXSVZK+lGf96QfXvlVh9NjpO/SjHTQLkj+ni24blafSbZDtVKplrLrKprZFu8qtWhW5IyzEVO2pIyfZg5KZP3WE+O6yaubjjoy3Oyf3+81ecu+77GZ/BE6Wjukn3xhFafWbZ9dR+rAXsX7bBuXhUHrav6s2Y9rzC5HBPVLetYrXdqXdVr3d4uXQetq99T6w4bD2iVfCBxsRyTlZicWLbrD6X412GJDtV+rYFZK6k8mhwn1eXlMcPSynl5tt/3t/pMsh2qK+k7h6WVU8dStRiq7z3omqQMc5GTtqRMH+aRlKkv8pcNS3TmY9m/5271ucu+r5vA1yVME3t8t8i+eFarzyzbfllJmWlMnYDK+6qWV69I1MC4J2m9kzjWeEB7E0X1c3sTRbWu/t9X89pccM8o+6mSM3sHad5N3tS6w7p57XbpqnW7iaK96w5LFM3q57LP/7LVJ5b3qqtm/0afwjjHSXVdqi5Mq+gJ2X53afWZZDtU68A659a5YdW8Ptvhe1sduiYpw1zkpC0p04d5JGV+PcWDhyU6dMHs4xNafe6y/ysp9+8J3w/HdoPshxe2+syy3XtOyszUJz/v7TkpbjosLcxh3bx2E0AHdfOqdbuJon/Je/xgShYsx8OxWu9U1Lr9s3nVv6mETs329pvZV1O1kin5+9VKplrL0K9fzj5+SKuPIsdJJSNqsN9Va0lWfivb73dafWbZFjWg9lWHpZXyV9kOP9vq0DUX3cxFTtiSMn2YR1LmeSluOCzRoblMc3ksOQYencKFzLFdI/thbv3Us817TsrMNH5O3luNjVJjpPTsqXmPt2/1ucl7v2+KSj5US6C9SaHdad8PWreTKMrrqaQRc5Z9UuOVVMudg1r0HK+b195EUf3/veuYn6fl+L9dq48mx0pNi13TY6+a22b7/W2rzyzboWbDuuuwtFLunu1Q1zPQPUkZ5iInbEmZPsyUlMn7q5lF6slQXZDSpz/MPq7WTAuT46BuNN6SOO/OCg5y2eyHuTVtzzZf56RM3bRW6665DDy5INXy4uJ5n7Uf5ibvvaakveKwNJVpunnVz52km1dbd2CLorzvWscMsq93EzX7u3lVwmc3AVTl3m5e9fP719XPHS9RtO7el2PyIq0+muzTVe3qdtVsv+qKPBfZDvdK8dBhaaV8X7bDa1sduiYpw1zkhC0p04dZkzL1BPE/hyU69dLs44XPjJVj4YdTvCDhe+JgF8h++FCrzyzbe22TMiXvr7pELjSZOAePyPu8Z6vPRd73rEmZZdo/7Xslak7UeidR/383UbS7bn+iaDcBdFDy6AvZxtUFiRnkuDqo9c7uut2k0N4WPQcliirxU+uOlygay3fnWPlkq48i27layVRrmVVz1my7mp1vLrIdVnFw7DpX1SC/dT6C7rnYZi5ywpaU6cOsSZlVfRqySepJ95mznxd+Y5Pj4U9T3GdYYp+zZB/UDetcZFv3nJT5P3mvv9/qU8n7qxk83pHo+bqjWphcKO/1E8Pi7PK+Vykpsyw16POvZTv/ybA4uWzXatV540Qlfioq8VPx+fzeShQxJ9nWx2q9U+t2W+/sJoVqav8q9647qOvXQYmivW6cfVndqUeT916vu1oP1/gyq+LT2W5nb/W5yHY4R4q5nReX5LXZDt/X6tA9SRnmIidsSZk+zJqUeUaKWw5LdOxy2c/VvWihcjzUhfPLEi5s9sn2n+v3Z7Z1z0mZB+bt1rlvJnmPL03xA8NSt3437/X+rT6zvGdJmZP6SOIS2c7V0mYq2a5XSXFYt4RKWFeCppKmO4maVu6tV2uf3fpuWQnvqn/7/+U1GtdnibJf97beqeRC7ZdR5TVVN9WaiWlVvCrb7RqtPjfZDh9N0XMX1P0ele1wj1aH7knKMBc5WUvK9GHWpMzHU9QUtj2qC/h3D9WFq7FU6slQr+6W/VwD7y1cjokLpqibn563x7LV0/h6yjs32c6bkJS5U4qpptZeorqRP3/eb92gzyzvWVLmpG6T7fv0Vp9KtuuyWnVW14fdxM1uwmZvImc3an1FHTe1/Oq8x7m1pGM8OdaqRdYlEpUwqu5cx+r6Vev2tyg6eWKZnpRjr861c5Xt8C8pqlvzqviZbIfHtDp0T1KGucjJWlKmD1MnZfLeLpni7cNSl56V93aLVl+obIvepwV/dLbF3Vt94bI9agybGl+mWs7wXd/1kWz/87X6XGQb95yUeUDe7wNbfWp5j9Vt4b8Tc01oLcCv5v3+cavPJO9ZUubE/inbdubp0bNdn5niJ4alLlVLoHe1+sJkO1S3mrclquvd8cYD2ruukke76yqZtLvuRINJ5z1UgokZZB/VvVad8/Z289rtvlVlJW/2d/Pa7dK1+3N71+0mher/7V9Xx8Nckuj75X3UOfFXhqWV8L3ZDq9vdeiepAxzkZO1pEwfZknK/EyKvxyWurSQC42DZFv8WIp/GJa69MZsiyu1+lJkm9R0mEtpnbMC3pHtf6lWn4ts356TMn+Q9/sbrT6TvM9HpOi9SXklji6c9zxz15W8X0mZ7/hM4vLZrtV9aWrZpnXtWq06e229V4mNM+R9LmVA42yP6sp6mWFpIb49SHOikjeVsKnETb3Pg9ZVcmc32VOfoednW9T5jQXLsVBjLZ0823vug9vmd986xcMSu4minu8h63itQX7rOISVICnDXORkLSnTh1mSMk9MccdhqUu3zHurp6MLl21Rg5K+c1jqUk3fe6Zsj6UOaJntUsf+UhJjnXtNtv3VWn0usm17Tso8NO93LgM+531+b4q5TdW6QHNp+p73KynzHbfONq1xy2aSbdp7q87X533Wcb4U2R69txr6v9ke/6/VR5PtdM4Ulaz4Wl6PwaBnlO1Z3bKqpc5BAzdP082r1tXvOGjdpBYyrg4skqQMc5GTs6RMH2ZJyvR8U1gulfdWs7csXLvYqCbfdaHRq+/P9nh5qy9Ntk2N41DjOWyyF2XbX7/V56Lzz9/ckjIl73UVEhWVlL103nfNFDS1FXmvyzC36cazTX8uxaOGpS49Pu/1p1p94bI9HpRiboNTL8Bzsz1u0uqjyXb6qxR3G5Z2HNbNq1r3HLSuWv7UA5G93bz2dv06qEXRV/Leax0zyL6ra7HDZvM6qJvXu7PdR525CyYlKcNc5IQpKdOHqZIyeV/nT3HCsNSluqip5uB1QbQU2SaLbhI+q1/J9qgpq5cq26W+N6oLytLGtOnQ32fbz/XJdLbrJiVlfiFFNYPv3a3yvv+u1aeS9yop813f9YrEdbMtZ+4OVrJNn5TiDsNSl+Y2JtFRZHvUtqht0qtPZnuMPoFAttNPpxhr4NejdPOq5M9uoqjWPSXbbVmTGwAjk5RhLvJlJynTh2mTMj+Z4inDUpfGGEOl9ybhT8s2uV2rL1W2TX131E31XJ58r6C5PwnPNu05KTPXqUXzXs+SosZtqabsPXtt3vdM08HnvW56UqaO62tkO9YYMHORbfrBFBcYlrp0w7zf57f6wmV7rEKXwItkm7yv1UeR7VTTWtf01qviitlmb2r1ucl2uGaKGkNwN1FUZT34OihRVOv2tij6dvIor63WAXMiKcNc5CQvKdOHaZMyj0zRc8uHJ+Z93bnVlyLbpPrA/9aw1KX3ZZtcpNVHsQLbaFH+PNt+rl24si17TsosIgn15BS3H5a6dv289xe1+sTyPjc5KfPJxLWz/eY2Ple2Z31G6rPSs5pS/cOtvnDZJtVdo26se3bbbJO/bfVRZDvVzESfTlTXl1Vw+myzSojMVbbD1VO8clia2WHdvGrd3m5eO7N5tXW73bx21+22Hqp1+1sU/U+2Qa2HtVcnKIAfaGWvqivRsvU80G/5nlxcjTr7SC6WfjtFtZZZyiwjHen9BmgV/HUre/drrWQydWNWLUbmfR79/lb26rN5z0tLyJT8vbrR7bn7cblqK0eT7VTjQ716WOrex/J6556Qaep6al4PUivBVdchlSytlkiVgL5OosZcu1miWvPeJfFLiZpOux5q/n7iIYmazbEmmHh24p8TL0lUi69qHVSJ12pNOUprYBiDpAxsuHZjP9fpfRdgjCbHPc/usWumrhXzkAvHGl/mpol6YrYp6ikes6kL8PcO1a7dIOfIpc2ksybqXPAjOTf857A4V9duZa/e3Mpl6/0hQrXO6MGrWtm7hY0l05J4vbc227WIcwh0SVIGuFai966MY7SUeVei5255ZfSnjyUXefWUqy66V6m//iw2raXM3Md+yTFTny2tZdbPRxM/kP27qBYJvbfqHOsc2PtDhCttD7Majm1e3XYW7T2tXJSxkoeTqJZCbxuqsP4kZYDenzx+Lhf4S2+a3Z4mfWhY6tboLWV2ZXvVk9pKzFRz5HW3aS1lFjUg7xMSq9D17Za5obxoq3O4SkhcM+eC/xoW56u16rzksNStMR4glHe0slc1nfFlh+qoKlk40zT3S7LopMxCPqNzVhM8LG3GTRibpAxgPJnD9X6h201SplQiK1EDMlc/8BpQcV0ZU2YOcqx8JEW1supdXSvdd6hyiOckKiHzgWFxIXr/ripjfV/pbnsEOT6ra13v3+tl0VNhr0JLGV2X2CiSMrDBtodZG3qfGWTMJzq9X+ierccn+LnwfVqKeir6rJ0V68eYMvOzKl2Y7pLP2rlbne+omVJ+M3GzfO4X/bnofZDfMtb31SokGrrobhuvaGXPFj19+JgPu46q92neYa4kZWCz1XgyPfTzPhYtZY7tKq3sSm7QavaIW6T6Y4lFX2Au26YlZU7VykX4p8THhmrXahvMdRr0NVDnx2vlc/7gxDLG3+q9q+1Hsh3+p9WXqs63KXofbP1qrRzbKiRlFt19qVri9D7V9OtbCRtBUgY22yo8eRxz8NhVSMr0cqF7oNws/GOKmirzVxOfqXVrYNOSMqdp5dzl+KiWFqsyDtHdt7e3awrYSfR+4zONryYelLhS9t9rd9YsWLb7GVP03qpz7NYHvbfsvHRrnTu23mdg+mQ+VzWl/MLk99dYXj0PzF9j+q3C9RfMjaQMbLbenzyWMbsvrcJFQVfjyhwkF4BfTfxxqhdJPDCxyuPNfCIxytPwNVZdmHqf6aycKfFzQ/XIfjBxm8RzE5WAWmW1j56ZuEw+z7+dWGbC6ZqJkw3Vbo2dlOn9+6r2Xw/Ty9d26vkcXjM/LkPPg/2+viWOYGNIysCG2t7erub4XbeyiI/mi3m0G/j87VVoEt7LVKPHle352cQDUr1Q4pcSix7McF7qZrq62dwycf4xj8l1lO1ZM3f9x7DUvXvn83bklkN5b5WQfHriJlk8X+LuiRclVumGo5IxNZDv1fI+bpl4787a5fIA4fgM9nsEOX7reO65tcyyPl89D/ZrPBk2jqQMbK4adG9RU93OSw+D0fV+oVs3iFcYqqshF8U1S9PDUr1E4vqJJyequXJPatrUlyV+IXG+vN6bJp6Z+Fr9zw1zylYu0mNb2btzJWqGsYnl2PlE4tGJOuZr0OCfSvx9otfZvKqb3iMTl81r/vHEUroqHcLMS8e3Ci07exns95Wt7NGykjI9XF8dxsxLbJytVsJMtre3ex4A8X25mKxxLWaW93n1FD23Lnlq3usnW/2Y8l4un+K6w1K33pL3U0+VR5PtdKMUFxuWuvX8bKdqbbCysp1Pl6K29Y8nfjRxtsSy1c1xHW/V1eQfs00/XiuXIe//rinOMCx151PZFk9p9YXI+z9tip8Zlrr3oWyPuc0slvdeSa9rJH4oUefkunFd5ODKx1LjxfxL4umJv8/7/FKtHFu2UbUwGmubHNVfZnt9udWXLtvou1Pcbljq1meyjZ7U6qPJtrp4ihsOS915UbbRwhMm2QY1PtZUCeYl+Ntsg1UYAB7mRlIGgK7kYrFacV45cZ1EjSVRidDzJuatuiG9JlFdZ/498apcCH4jJYwmx3+1YKxZ1aqrR5U1wG0lhhfRTbG6UVW3m/oM/Guibgh7a7UGAGtNUgaA7rWnwJdN1M3pRRPnT9QYHWdPnDVRrUz2d8ersWBqTKBPJT6cOCFRgyhWM/835+bzAymhey1RU0/369ivAbNrXKY6/s+ZqFZlu5+BUyT2qm54NZNLJSDrc/ChRB331bLubYn6HHTRGgYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1sNWK2EtbG9v/38pzpk4R+KstW6Pzyc+lvj41tbWN3fWAAAAc5Vr8tOkOF+irservuvric8kPprr8c/urIENJynDSssJ/5Iprpe4ZuIKiYsnTpk4lvoyeFfijYlXJl6YL4VaBgAAJpDr8VOn+IHEdRJXSVwmcd7E8VRy5q2J1yb+PfHiXJN/ISVsFEkZVk5O/BdIcdfEbRKVlJmHdySemPjrfBl8fGcNGyvHWCX4nj0sTezXcww9vdXZEDlm7pHi14alI6uLz59u9ZnlNTwpxfcPS0f2oLyGv251Vkz2+b1T3GtYOrL6nntQq9Op7NvfSlHXOpN4T+Im2b9fHRbnK6/pt1P81LB0ZM4xayrHQ7VOv36ijombJE6fmFUdu/+ceELiOTl2vlUrAehETv6XTzwt8fXEonw18chEJX7YUNn/D62DYUovar+GDZL9/rhh90+kzjdnb79iJvk95058o37phB7ZfgUrKPvvAcNunMhD2j+nY7Wfht01sb9qv2Lu8runeU2TJg3pXPbpyRN3SbyzdvACvTvxU4mTtz8Na6synNC1nIzPkXhsqm9IVOuYRZ6cq+vT3RPvyN/87cQpdtayMbLP6xi4/bA0lR/M77hQq7M5qqn2pOpYu91QndlPJk42VCcyzesG+nW3fAfdrdVhrnJs/UiKtyQel6ghAxbpoolqZfX6/N1r7ayBNSUpQ9dyEr5FircnqgnvMo/XGpDsgYlX5zXUlwKb48cSs7ReqOP0LkOVTZBzRO3zaZMb8zpWpv09l2slsD4elvPSVVsdZpbj6QyJSpA8P3GJnZXLU99TL83f/53ENA8foHuSMnSpTrqJh6b6d4mz7awcx5USr8lr+cFhkQ1w51bO4s45ZpxfN0e1jDrtUJ3YlXOsXL7Vp5J/X4MqXnZYmtiZ8++PMhgjsDpq0NVn5LM9l+6RbLYcRzV+4+sSk44nNE+VjLlf4h/zek63swbWiJsGupOTbd3cPCvRSz/ksySen9d102GRdZV9fO4UNxyWZlI36dcdqmyAWbsAzZoIvFMrp3XpVgLr44KJv8n3mpYFTC3Hz9VSvCKx6K5KR1XXaC/K6zrTsAjrQVKGruQkW2MsVEKmupD05FSJGmR40plNWC11czyvC1hdmDbHtK1Udt0+55apxq9q58xZx6Uxrgysp5oZ53eGKkwm3y+VkHlBoh5O9qRe17Pa9x+sBUkZelMD+tYgYj2qFjzPzJeAmZnW1zwTKT+RY8WTnM0wa1LjnIlpW2jVNKSzdlEwrgysr1/Pd9HNWx2OJMdMjaf43ESv1zHXSzxsqMLqk5ShG/kCqO5KdxiWuvXdiafmtWoOvGayT6+ZYp6D11USr2YLY/3No6XJtF2YZu26VHRfgvW1lXh8vuOWPTgrKyrHSk12Ua3WxxzT8Sh+Nq+1Zh6ElScpQxdyUq3m/38wLHWvpuW7z1BljSxiALsxB8VjCXLuqgRtDYI4q5vkd03U4iU/f44UNxqWZnLp/K66cQPW0xkT1d3j9MMiHNPvJ1alBeXDc1yfq9VhZUnKMLp2M/DoRI3bMqv3J/448eOJSyXqJqcy/XXTdLPEQxIfSczqgXnd52t1Vlz2ZY3kf+thaa6unt+tFcJ6qybeNdPJrKYZG6aeEE41Fs0+dcNWg4IC66u+ix7brrngQDk+aryWXxyWZvLNRE2ffe/EtRP1HVNj05wn8X2Jn0v8Y+LriVmcOVHX/QDMIl8At0nM6u2JmyWOm2jMz5w8cdfERxOzeEL7lay47Ms7Dbt0If6o/RnWUPbvzYfdPBf/2X7tkeTn3zD8s7m4cfu1rJDstwcMu28i9XCCztV+GnbX3P1K+xMTy7+d5jX1MpMmR5D99R/DbpvatxKPSRwp0Z+fu0Dice3fTav+7VXbr4SVpKUMo8pJtI7B3x6WpvbniStubW09O/GtYdXh8jPfSPx1qtU086U7K6dzg7z+ytCz+hbZzegOOU5O3uqsn1lnXtrryjlWLt/qx5Sfu0KKKw5Lc1EtC4H19+CcP67b6vBtOS5+NEV10Z/WxxPXzzX23RIfHFYdW37uhERdg9Vg1P+7s3Jy1frrFkMVVpOkDGOrp7OzdO/4zZzM75X4als+svybT6Wo8RhetrPi6F6eqAGJL5Tf8dmdNaysXIR8T4rrDEsLUX2d5zHuB32a93TSR00QzmOA373mmVwC+lUPCf4m333nHRbh22YZL/HDie/PdfGLh8XJ5N/9Q4qbJr62s+JovpB4VOIK+fe/sbMGVpSkDGP72VZO46E5CT+41aeSf19Z+VsmPraz4nBfStS4N1fKv6kvnackJk4E0aWa9WbRfeznOdU2fZl3MuP2uVk65jgx7f/ffliaG9Niw+aoafj/LueSGssK6nvlIil+eFia2BcTN8p18XuGxenk31dC577D0jG9LfELifPl39wj8eadtbDCJGUYTb4AahDeHxmWJvamxK8N1dnkZP6JFDUQ2UHqxP9LifPk5+6eeOPOWtZCjsE6B06aMKnj5ZVD9chqZp2aTp01kn1ayZGLD0tzUzMqHW98lxsm6qZqni7ZPg/AZrh64qFDFXYGjp/2AdV9c338X60+q79I/MdQPZEaEPjpievmb10m8fDE53f+D6wBF2CMqW48pp055J45Gc86YvtedaJ/1VDdOfH/XeJ6icvm7zzMiX9t/VDiAkP1yOrYeNJQPbJFtGxgfJWQmfYcdizVeutY7tjKeTpt4sJDFdgQ99je3taSk1IzlE7jdYm/HKqzy/X2dopfHZZ2VLeoGnvygvl/t0n8285aWDOSMozp+q2c1AtzUq5xXeamfQk8IPHARI0Vc6vES9p61tc0A/z+TeIZiUmTgoscTJhxLGoclhvnRqlazJxE1tcU/9XvfhGMKwOb5xE5r1yp1dlA7ftm2mPgQfO+Vs7vq4ekNXNlDd574SzX3/ho/T9YV5IyjOnarZzUI1s5VznhvyDxgMR/t1WssVyE1MxZNdr/JE5IvDzHSA0S/cKdNUd3ufzNq7Q662GWQcqPpVrfVFPyg9w2caqhOnfzHrQY6N9pEs/M99NZh0U20DUS03Rdqmuifxqq85XrrF9LPCvxjbYK1pqkDKNoX/4XHJYmUt2InjdUYSZ1c3vqoXpkT80Fwu4ToWoxMymtZdbLIluWHNal4Hhdm2axqCQTsBw1KcE0quviU3JtdrJhkQ1z5VZO6mm5JvpWqwMzkJRhLJdq5aRenC8Asx4xD3dt5SSe1sry7MSXh+qR/WQueidNBNGvRbYsuWKOlSu2+o4sV9LkqsPSQui+BKvt4YmaCGEaP5qobtxsnku0clKTthgGDiEpw1jO38pJvbqVMLXc3NbN56Q3t2/b2tr69sVu6jUF5D8MS0c2TZcpOtSSaxcdlo7sc608qv2tYiZtJfPZVh7VpfK+Tt7qwOqpBwU1Dsf/7CxN7n45ByxqzCr6daFWTqJaDbsmhzmRlGEs52rlpN7eyiPLBcabEu9fcJgqe7VM043oKa3ca2/LmaMy08V6uGRi0qb+f9jKo7p9zi07szulrL816axLv9/KozplYtJEE9CRra2t96aoc8U03Uq2Ek/M+cZ5YLOcs5WT+FCOtS+0+pHkuLplYv/18yLiXu1PAnAsOWE+IDGNiZvu59/8z/BPF+r97c/RueyrUyQ+trPXju5biYu0X/FtWXeqxGfqBybwzcSk03DTmezDSphM6vyJNw/VI9uZpjTlDYfFI3tJ4qJDdSJacq2Q7K9pvksf0v45Hav9NOyuiXy7+1HVh1VTqfPU6dqv+rasm+Y1uUHuXPbRNNfJE8+Cmn9z5+GfLtz92p+ElaGlDGM5bSsn9elWwrRunJj0qdCr29PHE8m6Gt/omcPSkdV5905DlRU26XgyNQDnhxOP3Vk6ut0uS5MeM49OfCAx6dTtV2glsNr+X+K5Q3Vil0v85VBlA0wzwPO0XeSWobqXw0qRlGEs047w3+so719rJf2bpuvSU1t5kGlmYbrL9vb2VquzmiZNyrx7a5i5q7rBTTJY+Y1zrFws5U6LmSP6eGJ3KtGTJBOPwwxMsAby+a/rperG9L6dFZOrgem1ctkM01yTT5rwX6ZvthJWhqQMY5moH+oe0yZzFk1WfgXkArPGMrrhsHRk9eX+jKF6oH9L/PdQPbLqCnWdocqKmnSmonfVf3Kj9KkUNXPXUdWYMk9PTDJr12Pzd3YTxe9s5VFJysCayHmgWjP8ROJ/d1ZM7o/yvXntVmd9TfNgcWe8s05Ne48Bo5GUYSzVlH8aZ2tlb3puxsl33D4x6YVETcP+sVY/ifY00oC/GyQ3KTXWwqSzVexNjkzahelEU2MfRx2Pe7sdvLuVR3XxvL8a8BdYA/mOqlkD7z4sTWwnKZxzwrmHRdbUNA8Wz9rKHrkmZ+VIyjCWT7RyUudtZW+MdbMapum6dJSEyzRJmZqF4Aytzmqp1iSTfn/uTY68KFHjvSzC83IT9sFWL5O2lKmbsJpZClgTOSc8KcVfDEsTqxamz8j3Vc8tI5hNdXmd1Plb2SPX5KwcSRnGckIrJ9Vr0/ppvtBYolxQXi3FpOOAHGkg31zwvjbFpC0SqrXFbYYqK2bS46jsdF8qrXXVXw9Lc/eoVu6a9Lgsl2olsD5+JfGKoTqxayX+ZKiyhj7UykmcL9dVZ2r13kz74BdGIynDWL59gzKhq7eyN4t66s38TNNd6Lm5gf5cqx/PVAP+tpLVMk1yeP857/GJeQ9cXuehfx6q3zbNuda4MrBm8l1W44bcKnFod9zj+MXETYYqa2bSFpW7rtHKntT36rQPfmE0kjKMIhcHH0nxyWFpItfd3t4+Tav3ZNovNJagHTO3G5Ym8s3823sfJfKz0zwxulb+7SVandUx6SC/n8w570R93LNcTyZfMCzNzV/m954o0ZPlj6b4/LB0ZJdvJbBaaoa3Q+V8UIPSVwvNaWfOuWgrWS817tA0btDKo1rGrJPvz3E+yQyH0AVTsjKa3Iw+J8VNh6WJ3DYn3L9t9ePK37lxipMPS8f0/Yn7DtWJnafd/NChHAM1wO+Th6XuPDjHzm+2Oisgx1ON2XKBYelIXpZ9/AOt/m35PbdI8XfD0szqKfj583dO0mw7f+d1Kb53WDqSmr774q1Ox7JvH5Di/w5LR/bQ7N/7tDqdyr59SIpK+E/iAdm3D2z1Q+V31/7/02Fp4e6d1/RnrU6HcjzUwPXvH5YmUkm+C2b/fmNYPLb8nfrevNKwdFwPTkwzvtnT83p0DQc4qpycfzExjVe2XzFX+b0PHn79xKYZs4Elyj564bCruvSRRK9TvbNP9tUZd/baZA6cbSnrT5n4+M5PzO6p7deeRP7fk4cfObJvJCaZgpuRZD89YGePTaZu9ulc7adhd02kknRHkp/9m+GfLNy92p+kY9lP7x5218Ru237F3OR3njzxuZ3fPrlfar8GVoruS4zpnxLHbGp7iKvnpPsTrT5PN2vlpPaP4UBHcqzUE6DrDUtdOk/iR4cqK2Ca8VYO7N64NYzx8MRhaWaPbuVBJh1XppKEBvuF9Xa3xFuGKnzXP7RyUg/Kdda8k/jXTZxxqE7s+a2ElSIpw2hyQ1JNJadt9fKwfAmco9Vnlt91wxTTju1x3Nl5GNWdEr2f6wz4uzou18pJHCspcmArmgm9LefTl7b6QaYZ7HfScXOA8R35QVfOGV9KUQ+4Pruzgk33tFZOqsYZ+r2hOjc1U9g03pTjeprvOxidpAxj+6tWTqpaFzxze3v7tMPi9PI7Tp9i2v7O70n8+1ClN9m3NW7WKiQ8fiyv9eytTt+maSlzaBfHXEC+I8V/DEtTe2QrD2MGJuAkcv6pc1N9R07Tapk1kmOhxh57w7A0sZrwYC7XWvk9NUPYjwxLE3tcK2HlSMowtppGeNoBcq+deEFO4OccFieXf1tJnWckLrazYnIPzxeZi5l+VRPYCw/Vrp0yMc3sUCzfZVp5VN9MVPL2WP66ldOop93H6wI1zbhXkjKweiaewCPXMNVtZd4tHVhN0w7+XMfdY3JNPenA1CeSf3/NFNN+H34x8YShCqtHUoZR5WKgpq37w2FpKjVj0ptyIr9jYqLjOT9fI8C/PDHteB6fSjxmqNKpVeoWdNdW0rdJu/Wc0M5zx/L0xKTTVu96an7/Mf9t/v8XUtQsGZMwLTZsjprBa95T9LN6qgvTtN1/aiyyGpz6uYmJpk7Pz9fAvjUj2IsS1Xp9Gn+R7zpd8VhZkjL04BGJ9w7VqVRLmXpS/Nac1O+buHTiwKdFWX/2xK0Sz85iNdW84s7/mM7/yxdAZebpUPZxDRJXUw6viivmNV+51elQ9s9ZU5x7WDqyAwf53SvnkWrtMm1//ke18ngmvdC+YN7vtBfHwArJOaha9P1k4gM7K9hIOQ5qauvfGJamdqPE2/P98YzETyTOMqw+saz//xKXTdTfq+/JaqUz7YDBn0n80VCF1SQpw+jyJVAzkPx8YtZuQJdM1En5rYnP50T/5sRLWrwqUU+KP5mop9I/npjl+H9j4njjODCumqZx5jGHlsyAv32bZvDb4yZlmmkG/H11zp+vb/XjmTQpU4ltMzDBhsi5pG5sb5n4ys4KNlKOg79PUbOjzuLkiTqWaiKMz+T6+0OJV7br8Yqa9atacP5X4vcT35OYxf9pxy+srIn7nsKi5CRdLWbuMSx1rboiXD1fAJWYoVM5nl6R4hrD0pF9MPH4oTqzmtHr+4bqkX06cd4cW8fr7sIIckzdPcWkydhfyP58eKsfU37/m1NMMrvTT+V3H+l4ze+u2Sz+eFg6siP/fsaR/fqAFNX1ZBIPzX6trgJ0LPv2ISkmHaPjAdm3D2z1qeTv/lSKWca52u/eeU3TTqbACHIM1GQab0qswgQE1e3uhjnGjO8IMA/5Ejh14rWJ3tWNGR3LPrrksKsm9tvtV8wsv+sWw6+c2K3br6Az2Td/MeyiiVy//fPjys/ea/gnR/LpxGnaPz2u/OxNdv7VZP6k/XM6lX30gGFXTaRu9ulc7adhd01k0gTdgfJ7Hjn8urm4V/u1rJDstx9OfGNnD/brhMTUk31AT3RfohtbW1vVZLa6FfXcp/nP8jqPOoYD46knfdOorm3z8rxENc+dlC5M/Zp05qUyycxHT04ctZXUE3Iu+nKrH4VpsWH9zasFfCVSXj1U2UT5fnlhinsOS136XOLH8jo/PizCapOUoSs5uda4Lz+c+NDOir5UMkaT785tb29XX+Y7DUsTeWOOv3e0+szaDXMNKD2pG+Q9nLfV6cukSZk6Bk4YqseXY6a6r1V//uOpZtqPHqpH9v7E14fqkUnKwAbKuajG+rtV4hM7K9hIOQ7qe6YG4u2ta1AlZH4kr88wAqwNSRm6k5Pse1JcM1HjK/Sgvox+L/HzeW36rPavpjg/11CdyLSz3xzLNC1valrJaZJKLFBrIn2OYenI3jXFOeMoA/6+OL/3qAMI78jPV0KmEjOTuEDe95lbHejf3K5Rcs6oh2M1YH7NzMSGynHwBynulqhEXQ/q4e318rq05GKtSMrQpZxsP5ziWomn7KwYz2cTt87ruV9CQmY1TNN1qfbtPLsu7aoB6KaZEeCncjNsIPa+TNN1qRLMk3px4njJk2lnfpsokdNM876BNZDrnpekmHWKZFZcjoMa+Pl6ibo2H1Mdj1fJ6znqrIOwMiRl6FZOul9M3CHVelIzRp/R6npy2byGvxsW6d329na1ZLjJsDSRmlp40lYEx5XfWa0TjtIdZb+LJSopST+mSU5M3B0ux8y3UjxuWDpQPSV8zlCd2CTj2+wyLTZsthrw+xlDlU2V76aXp6jZAas157IfUlZ3pV9MXD+v46M7a2DNSMrQvZyA/zbFJRLVheiLtW7BXpX44fzdmyc+MqxiRVQS75RDdSJ1jC3K37RyUtMOVsxiTDO+yjSD65aahvqwLgOPyXlp0rFhdk3zerSUgQ2W803dgP904m07K9hYORY+m6iuTNdI/NvOysWqcdkemrh4/u5fJOqhBawlSRlWQk7En0vcL9ULJX4z8b5aP0c181ONKXKd/J1rJP51Zy2rZpqZi+pLfhFdl3bVhcs0gyXeant7+/StzvjqCeGkpmmZUue7Gsuhur7t943EY4bqVKZJyly+lUD/FtLtNeekmknwFolpZhRkzeR4qNbF1021xn98auKoswYeVV3j3z9xofyd+yQMOM3aM2YBK6mNt3G1xM0S1c/1SomadWcS1V3lpYm6+fnnnPSreSQrKsdEJZmnuYH8evb9W1t9IfLavifFGYelibw7r+1Lrc6Isg+rpcykrbDelv031eCI+Xs1sPC5h6Vv+2p+39tbfWL5nadOcclh6ci+kr85t1nJmK/s0xrUfNKBzT+ZfaoVaOeyb2sWvkkHF/9Y9u3HWn3u8poukOKsw9KRfSSv6ZOtzhrKcXGmFDdN3DDxg4nzJCZRSZ0aJ6YeiD438ZocM8ZxZKNIyrAW8oVwmhQ19sHFE3XRcLZEtTI4baKeLle3p08l6mLlvYm35IRfywAAwBzkmrySMvUg48KJerhwlsQZEjW7ZD1oqmvyStR9MFED4r811+TTdssFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAa3/Vd/z9qMGzBIIAmzQAAAABJRU5ErkJggg"}],Zu.add(tc.updateCursor,-1),er.__toStr={}.toString,_t.Element=0,_t.PCData=1,_t.CData=2,_t.Comment=3,_t.DocType=4,_t.ProcessingInstruction=5,_t.Document=6,T.BASE_NAME="gasm.core.components.AppModelComponent",Kr.BASE_NAME="gasm.core.components.SpriteModelComponent",Jr.BASE_NAME="gasm.core.components.SpriteModelComponent",$r.BASE_NAME="gasm.core.components.ThreeDModelComponent",U.DISPATCHING_SENTINEL=new L(null,null),j.BASE_NAME="gasm.heaps.components.Heaps3DComponent",$.BASE_NAME="gasm.heaps.components.HeapsCameraFitComponent",nt.BASE_NAME="gasm.heaps.components.Heaps3DComponent",at.sceneCounter=0,_l.BASE_NAME=at.BASE_NAME="gasm.heaps.components.HeapsSceneBase",cl.BASE_NAME="gasm.heaps.components.HeapsSceneBase",pl.BASE_NAME="gasm.heaps.components.HeapsSpriteComponent",rt.BASE_NAME="gasm.heaps.components.actor.render.PostProcessingChainComponent",gl._passes=new fl,gl._chains=new fl,gl._noiseTextures=new fl,gl._id=0,gl.BASE_NAME="gasm.heaps.components.actor.render.PostProcessingComponent",Ml.SRC="HXSLGGdhc20uaGVhcHMuc2hhZGVycy5BbHBoYQMBCnBpeGVsQ29sb3IFDAQAAAIFYWxwaGEDAgABBwAAAAAAAAAAAAAAAAAA8D8DCGZyYWdtZW50DgYAAAEBAwAABQEGgQIBBQwCAgMFDAA",n.SRC="HXSLF2gzZC5zaGFkZXIuU2NyZWVuU2hhZGVyBwEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACghfX2luaXRfXw4GAAALBnZlcnRleA4GAAACAgoAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAALAAAFAQYEAgYFDAkDKg4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAA",Sl.SRC="HXSLKmdhc20uaGVhcHMuc2hhZGVycy5Qb3N0TXVsdGlwbHlBbHBoYVNjcmVlbgkBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoCAAALCF9faW5pdF9fDgYAAAwGdmVydGV4DgYAAA0IZnJhZ21lbnQOBgAAAwILAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADAAABQEGBAIGBQwJAyoOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABDQAABQMIDgVjb2xvcgUMBAAACQMhDgICCgoCAwUKBQwABoIKAg4FDJIABQsJAxgOAwEDAAAAAAAA8D8DCQMIDgIKAg4FDAwAAwEDmpmZmZmZAUADAwkDEg4BCgIOBQwMAAMDAwULBgQCBwUMAg4FDAUMAA",kl.SRC="HXSLK2dhc20uaGVhcHMuc2hhZGVycy5Qb3N0UHJvY2Vzc2luZ1NoYWRlckJhc2UPAQVpbnB1dA0BAgIIcG9zaXRpb24FCgEBAAMCdXYFCgEBAAEAAAQFZmxpcFkDAgAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAICnBpeGVsQ29sb3IFDAQAAAkMY2FsY3VsYXRlZFVWBQoEAAAKCGNvbG9yTWFwCgIAAAsJY29sb3JNYXAyCgIAAAwJbm9ybWFsTWFwCgIAAA0IZGVwdGhNYXAKAgAADghub2lzZU1hcAoCAAAPCnJlc29sdXRpb24FCgIAABAEdGltZQMCAAARCF9faW5pdF9fDgYAABIGdmVydGV4DgYAABMIZnJhZ21lbnQOBgAAAwIRAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAAEgAABQEGBAIGBQwJAyoOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABEwAABQEGBAIHBQwJAyEOAgIKCgIDBQoFDAUMAA",Pl.tmpPoint=new El,Bt.EARCUT=null,Ot.defaultUseScreenResolution=!1,Xt.SRC="HXSLG2gyZC5maWx0ZXIuX01hc2suTWFza1NoYWRlcg0BBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoCAAALBG1hc2sKAgAADAhtYXNrTWF0QQULAgAADQhtYXNrTWF0QgULAgAADgtzbW9vdGhBbHBoYQICAAEAAAAAAA8IX19pbml0X18OBgAAEAZ2ZXJ0ZXgOBgAAEQhmcmFnbWVudA4GAAADAg8AAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAAQAAAFAQYEAgYFDAkDKg4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAERAAAFBQgSBWNvbG9yBQwEAAAJAyEOAgIKCgIDBQoFDAAIEwJ1dgULBAAACQMpDgICAwUKAQMAAAAAAADwPwMFCwAIFAFrBQwEAAAJAyEOAgILCgkDKA4CCQMdDgICEwULAgwFCwMJAx0OAgITBQsCDQULAwUKBQwACBUFYWxwaGEDBAAACwIOAgoCFAUMDAADCQMmDgEGBwoCFAUMDAADAQMAAAAAAAAAAAMCAwMABgQCBwUMBgECEgUMAhUDBQwFDAA",io.GUID=0,ao.SOFTWARE_DRIVER=!1,ao.ANTIALIASING=0,ao.CURRENT=null,ro.tmp=new ro,le.UID=0,le.CACHE=new N,m.ALLOW_WEBGL2=!0,m.MAX_PRECISION="highp",m.BLACK=new R(0,0,0,0),m.outOfMemoryCheck=!1,m.TFILTERS=[[[9728,9728],[9729,9729]],[[9728,9984],[9729,9985]],[[9728,9986],[9729,9987]]],m.TWRAP=[33071,10497],m.FACES=[0,1028,1029,1032],m.BLEND=[1,0,770,768,772,774,771,769,773,775,32769,32771,32770,32772,776],m.COMPARE=[519,512,514,517,516,518,513,515],m.STENCIL_OP=[7680,0,7681,7682,34055,7683,34056,5386],m.OP=[32774,32778,32779,32775,32776],m.CUBE_FACES=[34069,34070,34071,34072,34073,34074],m.CBUFFERS=function(){for(var t=[],e=0;e<32;){for(var n=e++,s=[],i=0;i<n;)s.push(36064+i++);t.push(s)}return t}(),fo.ALL_FLAGS=so.__empty_constructs__.slice(),So.defaultKillAlphaThreshold=.5,So.loadingTextureColor=-65281,Io.current=new Io("Default"),A.UID=0,A.PREVENT_AUTO_DISPOSE=2147483647,A.nativeFormat=v.RGBA,A.noiseTextureKeys=new fl,Eo.__meta__={obj:{ignore:["shader"]}},we.SRC="HXSLHWgzZC5wYXNzLl9Cb3JkZXIuQm9yZGVyU2hhZGVyCQEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgVjb2xvcgUMAgAACwhfX2luaXRfXw4GAAAMBnZlcnRleA4GAAANCGZyYWdtZW50DgYAAAMCCwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAAwAAAUBBgQCBgUMCQMqDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAQ0AAAUBBgQCCAUMAgoFDAUMAA",Ce.SRC="HXSLHmgzZC5wYXNzLl9Db3B5LkFycmF5Q29weVNoYWRlcgoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQsCAAALBWxheWVyAQIAAAwIX19pbml0X18OBgAADQZ2ZXJ0ZXgOBgAADghmcmFnbWVudA4GAAADAgwAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAANAAAFAQYEAgYFDAkDKg4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAEOAAAFAQYEAggFDAkDIQ4CAgoLCQMpDgICCQUKCQMmDgECCwEDBQsFDAUMAA",Me.SRC="HXSLGWgzZC5wYXNzLl9Db3B5LkNvcHlTaGFkZXIJAQVpbnB1dA0BAgIIcG9zaXRpb24FCgEBAAMCdXYFCgEBAAEAAAQFZmxpcFkDAgAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAICnBpeGVsQ29sb3IFDAQAAAkMY2FsY3VsYXRlZFVWBQoEAAAKB3RleHR1cmUKAgAACwhfX2luaXRfXw4GAAAMBnZlcnRleA4GAAANCGZyYWdtZW50DgYAAAMCCwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAAwAAAUBBgQCBgUMCQMqDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAQ0AAAUBBgQCCAUMCQMhDgICCgoCCQUKBQwFDAA",Se.SRC="HXSLIWgzZC5wYXNzLl9DdWJlQ29weS5DdWJlQ29weVNoYWRlcgoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQwCAAALA21hdAYCAAAMCF9faW5pdF9fDgYAAA0GdmVydGV4DgYAAA4IZnJhZ21lbnQOBgAAAwIMAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADQAABQEGBAIGBQwJAyoOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABDgAABQIIDwJ1dgUKBAAABgMGAQIJBQoBAwAAAAAAAABAAwUKAQMAAAAAAADwPwMFCgAGBAIIBQwJAyEOAgIKDAkDHw4BBgEJAykOAgIPBQoBAwAAAAAAAPA/AwULAgsGBQsFCwUMBQwA",Fe.SRC="HXSLIWgzZC5wYXNzLl9IYXJkd2FyZVBpY2suRml4ZWRDb2xvcgUBB2NvbG9ySUQFDAIAAAIIdmlld3BvcnQFDAIAAAMGb3V0cHV0DQECBAhwb3NpdGlvbgUMBAMABQdjb2xvcklEBQwEAwAEAAAGBnZlcnRleA4GAAAHCGZyYWdtZW50DgYAAAIABgAABQEGBAIEBQwGAQQGAAIEBQwGAQkDKg4DCgICBQwRAAUKAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwUMCgIEBQwMAAMFDAUMBQwJAyoOAwoCAgUMOQAFCgEDAAAAAAAA8D8DAQMAAAAAAADwPwMFDAUMBQwAAQcAAAUBBgQCBQUMAgEFDAUMAA",zo.__meta__={obj:{ignore:["shader"]}},Ro.STRICT=!0,Ze.TMP_MAT=new ro,Zo.SRC="HXSLF2gzZC5zaGFkZXIuQW1iaWVudExpZ2h0CgEGZ2xvYmFsDQECAgxhbWJpZW50TGlnaHQFCwABAAMQcGVyUGl4ZWxMaWdodGluZwIAAQEAAAAAAAAAAAQKcGl4ZWxDb2xvcgUMBAAABQ9saWdodFBpeGVsQ29sb3IFCwQAAAYKbGlnaHRDb2xvcgULBAAABwhhZGRpdGl2ZQICAAEAAAAAAAgIX19pbml0X18OBgAACRBfX2luaXRfX2ZyYWdtZW50DgYAAAoJY2FsY0xpZ2h0DgYAAAsGdmVydGV4DgYAAAwIZnJhZ21lbnQOBgAABQIIAAAFAQYEAgYFCwsCBwICAgULCQMpDgEBAwAAAAAAAAAAAwULBQsFCwACCQAABQEGBAIFBQsLAgcCAgIFCwkDKQ4BAQMAAAAAAAAAAAMFCwULBQsAAwoBDQpsaWdodENvbG9yBQsEAAAFCwUBDQsCBwICDQULBAYAAgIFCwYBCQMWDgIEBgMBAwAAAAAAAPA/AwICBQsFCwULAQMAAAAAAAAAAAMFCwINBQsFCwULBQsFCwAAAAsAAAUBCwcCAgMCAgaBCgIEBQySAAULCQIKDgECBgULBQsFCwAAAAEMAAAFAQsCAwIGgQoCBAUMkgAFCwkCCg4BAgUFCwULBQsAAAA",qo.SRC="HXSLEWgzZC5zaGFkZXIuQmFzZTJkGwEFaW5wdXQNAQMCCHBvc2l0aW9uBQoBAQADAnV2BQoBAQAEBWNvbG9yBQwBAQABAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgEdGltZQMAAAAJBnpWYWx1ZQMCAAAKB3RleHR1cmUKAgAACw5zcHJpdGVQb3NpdGlvbgUMBAAADBBhYnNvbHV0ZVBvc2l0aW9uBQwEAAANCnBpeGVsQ29sb3IFDAQAAA4MdGV4dHVyZUNvbG9yBQwEAAAPDGNhbGN1bGF0ZWRVVgUKAwAAEAppc1JlbGF0aXZlAgIAAQAAAAAAEQVjb2xvcgUMAgAAEg9hYnNvbHV0ZU1hdHJpeEEFCwIAABMPYWJzb2x1dGVNYXRyaXhCBQsCAAAUDWZpbHRlck1hdHJpeEEFCwIAABUNZmlsdGVyTWF0cml4QgULAgAAFghoYXNVVlBvcwICAAEAAAAAABcFdXZQb3MFDAIAABgJa2lsbEFscGhhAgIAAQAAAAAAGQpwaXhlbEFsaWduAgIAAQAAAAAAGhBoYWxmUGl4ZWxJbnZlcnNlBQoCAAAbCXZpZXdwb3J0QQULAgAAHAl2aWV3cG9ydEIFCwIAAB0Ob3V0cHV0UG9zaXRpb24FDAQAAB4IX19pbml0X18OBgAAHwZ2ZXJ0ZXgOBgAAIAhmcmFnbWVudA4GAAADAh4AAAUGBgQCCwUMCQMqDgMCAgUKAgkDAQMAAAAAAADwPwMFDAUMCwIQAgUDBgQKAgwFDAAAAwkDHQ4CCQMpDgIKAgsFDBEABQoBAwAAAAAAAPA/AwULAhIFCwMDBgQKAgwFDAQAAwkDHQ4CCQMpDgIKAgsFDBEABQoBAwAAAAAAAPA/AwULAhMFCwMDBgQKAgwFDDkABQoKAgsFDDkABQoFCgAGBAIMBQwCCwUMBQwABgQCDwUKCwIWAgYABgECAwUKCgIXBQw5AAUKBQoKAhcFDBEABQoFCgIDBQoFCgUKBgQCDQUMCwIQAgYBAhEFDAIEBQwFDAIEBQwFDAUMBgQCDgUMCQMhDgICCgoCDwUKBQwFDAaBAg0FDAIOBQwFDAAAHwAABQUIIQN0bXAFCwQAAAkDKQ4CCgIMBQwRAAUKAQMAAAAAAADwPwMFCwAGBAIhBQsJAykOAwkDHQ4CAiEFCwIUBQsDCQMdDgICIQULAhUFCwMBAwAAAAAAAPA/AwULBQsGBAIdBQwJAyoOAwkDHQ4CAiEFCwIbBQsDCQMdDgICIQULAhwFCwMKAgwFDDkABQoFDAUMCwIZAgaDCgIdBQwRAAUKAhoFCgUKAAAGBAIGBQwCHQUMBQwAASAAAAUCCwYOAhgCBgkKAg0FDAwAAwED/Knx0k1iUD8DAgIMAAAABgQCBwUMAg0FDAUMAA",Ko.SRC="HXSLE2gzZC5zaGFkZXIuQmFzZU1lc2gXAQZjYW1lcmENAQoCBHZpZXcHAAEAAwRwcm9qBwABAAQIcG9zaXRpb24FCwABAAUIcHJvakZsaXADAAEABghwcm9qRGlhZwULAAEABwh2aWV3UHJvagcAAQAID2ludmVyc2VWaWV3UHJvagcAAQAJBXpOZWFyAwABAAoEekZhcgMAAQALA2RpcgULAwEAAAAADAZnbG9iYWwNAgQNBHRpbWUDAAwADglwaXhlbFNpemUFCgAMAA8JbW9kZWxWaWV3BwAMAQMQEG1vZGVsVmlld0ludmVyc2UHAAwBAwAAABEFaW5wdXQNAwISCHBvc2l0aW9uBQsBEQATBm5vcm1hbAULAREAAQAAFAZvdXRwdXQNBAUVCHBvc2l0aW9uBQwEFAAWBWNvbG9yBQwEFAAXBWRlcHRoAwQUABgGbm9ybWFsBQsEFAAZCXdvcmxkRGlzdAMEFAAEAAAaEHJlbGF0aXZlUG9zaXRpb24FCwQAABsTdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAHBhwaXhlbFRyYW5zZm9ybWVkUG9zaXRpb24FCwQAAB0RdHJhbnNmb3JtZWROb3JtYWwFCwQAAB4RcHJvamVjdGVkUG9zaXRpb24FDAQAAB8KcGl4ZWxDb2xvcgUMBAAAIAVkZXB0aAMEAAAhCHNjcmVlblVWBQoEAAAiCXNwZWNQb3dlcgMEAAAjCXNwZWNDb2xvcgULBAAAJAl3b3JsZERpc3QDBAAAJQVjb2xvcgUMAgAAJg1zcGVjdWxhclBvd2VyAwIAAQcAAAAAAAAAAAAAAAAAAFlAJw5zcGVjdWxhckFtb3VudAMCAAEHAAAAAAAAAAAAAAAAAAAkQCgNc3BlY3VsYXJDb2xvcgULAgAAKQhfX2luaXRfXw4GAAAqEF9faW5pdF9fZnJhZ21lbnQOBgAAKwZ2ZXJ0ZXgOBgAALAhmcmFnbWVudA4GAAAEAikAAAULBgQCGgULAhIFCwULBgQCGwULBgECGgULCQM0DgECDwcIBQsFCwYEAh4FDAYBCQMqDgICGwULAQMAAAAAAADwPwMFDAIHBwUMBQwGBAIdBQsJAx8OAQQGAQITBQsJAzIOAQIPBwYFCwULBQsFCwYEAgsFCwkDHw4BBAYDAgQFCwIbBQsFCwULBQsFCwYEAh8FDAIlBQwFDAYEAiIDAiYDAwYEAiMFCwYBAigFCwInAwULBQsGBAIhBQoJAzoOAQYCCgIeBQwRAAUKCgIeBQwMAAMFCgUKBQoGBAIgAwYCCgIeBQwIAAMKAh4FDAwAAwMDBgQCJAMGAgkDGw4BBgMCGwULAgQFCwULAwIKAwMDAAIqAAAFBQYEAh0FCwkDHw4BAh0FCwULBQsGBAIhBQoJAzoOAQYCCgIeBQwRAAUKCgIeBQwMAAMFCgUKBQoGBAIgAwYCCgIeBQwIAAMKAh4FDAwAAwMDBgQCIgMCJgMDBgQCIwULBgECKAULAicDBQsFCwAAKwAABQIGBAIVBQwGAQIeBQwJAyoOBAEDAAAAAAAA8D8DAgUDAQMAAAAAAADwPwMBAwAAAAAAAPA/AwUMBQwFDAYEAhwFCwIbBQsFCwABLAAABQQGBAIWBQwCHwUMBQwGBAIXAwIgAwMGBAIYBQsCHQULBQsGBAIZAwIkAwMA",Jo.SRC="HXSLD2gzZC5zaGFkZXIuQmx1choBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoVY2FtZXJhSW52ZXJzZVZpZXdQcm9qBwIAAAsHdGV4dHVyZQoCAAAMDGRlcHRoVGV4dHVyZQoCAAANB1F1YWxpdHkBAgABAAAAAAAOB2lzRGVwdGgCAgABAAAAAAAPBnZhbHVlcw8DDQIAABAHb2Zmc2V0cw8DDQIAABEFcGl4ZWwFCgIAABINaGFzRml4ZWRDb2xvcgICAAEAAAAAABMQc21vb3RoRml4ZWRDb2xvcgICAAEAAAAAABQKZml4ZWRDb2xvcgUMAgAAFRBpc0RlcHRoRGVwZW5kYW50AgIAAQAAAAAAFgloYXNOb3JtYWwCAgABAAAAAAAXDW5vcm1hbFRleHR1cmUKAgAAGAZpc0N1YmUCAgABAAAAAAAZC2N1YmVUZXh0dXJlDAIAABoHY3ViZURpcgYCAAAbCF9faW5pdF9fDgYAABwGdmVydGV4DgYAAB0IZnJhZ21lbnQOBgAAHgtnZXRQb3NpdGlvbg4GAAAEAhsAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAAcAAAFAQYEAgYFDAkDKg4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAEdAAAFAgsCFQIFBggfBHBjdXIFCwQAAAkCHg4BAgMFCgULAAggBGNjdXIFDAQAAAkDIQ4CAgsKAgMFCgUMAAghBWNvbG9yBQwEAAAJAyoOBAEDAAAAAAAAAAADAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwEDAAAAAAAAAAADBQwACCIEbmN1cgULBAAACQM5DgEJAyEOAgIXCgIDBQoFDAULABUGdW5yb2xsAA4jAWkBBAAABhUGAAcDAg0BAQECAQAAAAEBAg0BDwEAAAUICCQCdXYFCgQAAAYAAgMFCgYBAhEFChECEA8DDQsGCQIjAQECAAAAAAECBwMCIwEBAiMBAQMFCgUKAAglAWMFDAQAAAkDIQ4CAgsKAiQFCgUMAAgmAXAFCwQAAAkCHg4BAiQFCgULAAgnAWQDBAAACQMdDgIEBgMCJgULAh8FCwULBQsGAwImBQsCHwULBQsDAAgoAW4FCwQAAAkDOQ4BCQMhDgICFwoCJAUKBQwFCwAGBAIlBQwJAxgOAwIgBQwCJQUMCQMdDgICIgULAigFCwMFDAUMBgQCJQUMCQMYDgMCJQUMAiAFDAkDFQ4CBAYBCQMWDgIEBgMCJwMBA/yp8dJNYlA/AwMDAQMAAAAAAAAAAAMDAQMAAAAAAGr4QAMDAwEDAAAAAAAA8D8DAwUMBQwGgAIhBQwGAQIlBQwRAg8PAw0LBgkCIwEBAgAAAAABAgcDAiMBAQIjAQEDBQwFDAAAAAYEAggFDAIhBQwFDAALAg4CBQMIKQN2YWwDBAAAAQMAAAAAAAAAAAMAFQZ1bnJvbGwADioBaQEEAAAGFQYABwMCDQEBAQIBAAAAAQECDQEPAQAABQELAhgCBoACKQMGAQkDNw4BCQMhDgICGQwGAQkDKQ4CBgMGAQQGAAIDBQoGAQYBAhEFChECEA8DDQsGCQIqAQECAAAAAAECBwMCKgEBAioBAQMFCgkDJg4BAioBAwUKBQoFCgEDAAAAAAAAAEADBQoBAwAAAAAAAPA/AwUKAQMAAAAAAADwPwMFCwIaBgULBQwDEQIPDwMNCwYJAioBAQIAAAAAAQIHAwIqAQECKgEBAwMDBoACKQMGAQkDNw4BCQMhDgICCwoGAAIDBQoGAQYBAhEFChECEA8DDQsGCQIqAQECAAAAAAECBwMCKgEBAioBAQMFCgkDJg4BAioBAwUKBQoFDAMRAg8PAw0LBgkCKgEBAgAAAAABAgcDAioBAQIqAQEDAwMAAAAABgQCCAUMCQM2DgEJAxUOAgIpAwEDyxpQyv//7z8DAwUMBQwABQMIKwVjb2xvcgUMBAAACQMqDgQBAwAAAAAAAAAAAwEDAAAAAAAAAAADAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwUMABUGdW5yb2xsAA4sAWkBBAAABhUGAAcDAg0BAQECAQAAAAEBAg0BDwEAAAUBCwIYAgaAAisFDAYBCQMhDgICGQwGAQkDKQ4CBgMGAQQGAAIDBQoGAQYBAhEFChECEA8DDQsGCQIsAQECAAAAAAECBwMCLAEBAiwBAQMFCgkDJg4BAiwBAwUKBQoFCgEDAAAAAAAAAEADBQoBAwAAAAAAAPA/AwUKAQMAAAAAAADwPwMFCwIaBgULBQwRAg8PAw0LBgkCLAEBAgAAAAABAgcDAiwBAQIsAQEDBQwFDAaAAisFDAYBCQMhDgICCwoGAAIDBQoGAQYBAhEFChECEA8DDQsGCQIsAQECAAAAAAECBwMCLAEBAiwBAQMFCgkDJg4BAiwBAwUKBQoFDBECDw8DDQsGCQIsAQECAAAAAAECBwMCLAEBAiwBAQMFDAUMAAAAAAYEAggFDAIrBQwFDAAAAAsCEgIFAgsCEwIGgQoCCAUMDAADCgIUBQwMAAMDBgQKAggFDAwAAwYBCgIUBQwMAAMJAyYOAQYHCgIIBQwMAAMBAwAAAAAAAAAAAwIDAwMABgQKAggFDJIABQsGAQoCFAUMkgAFCwoCCAUMDAADBQsFCwAAAAADHgEtAnV2BQoEAAAFCwUECC4FZGVwdGgDBAAACQM3DgEJAyEOAgIMCgItBQoFDAMACC8EdGVtcAUMBAAABgEJAyoOAwkDOw4BAi0FCgUKAi4DAQMAAAAAAADwPwMFDAIKBwUMAAgwCG9yaWdpbldTBQsEAAAGAgoCLwUMkgAFCwoCLwUMDAADBQsADQIwBQsAAA",tn.SRC="HXSLE2gzZC5zaGFkZXIuQ29sb3JBZGQDAQpwaXhlbENvbG9yBQwEAAACBWNvbG9yBQsCAAADCGZyYWdtZW50DgYAAAEBAwAABQEGgAoCAQUMkgAFCwICBQsFCwA",en.SRC="HXSLE2gzZC5zaGFkZXIuQ29sb3JLZXkDAQhjb2xvcktleQUMAgAAAgx0ZXh0dXJlQ29sb3IFDAQAAAMIZnJhZ21lbnQOBgAAAQEDAAAFAggEBWNkaWZmBQwEAAAGAwICBQwCAQUMBQwACwYJCQMdDgICBAUMAgQFDAMBA/Fo44i1+OQ+AwIMAAAAAA",nn.SRC="HXSLFmgzZC5zaGFkZXIuQ29sb3JNYXRyaXgDAQpwaXhlbENvbG9yBQwEAAACBm1hdHJpeAcCAAADCGZyYWdtZW50DgYAAAEBAwAABQEGBAIBBQwJAyoOAgoEBgEJAyoOAgoCAQUMkgAFCwEDAAAAAAAA8D8DBQwCAgcFDAUMkgAFCwoEBgECAQUMAgIHBQwFDAwAAwUMBQwA",th.SRC="HXSLFGgzZC5zaGFkZXIuRGlyU2hhZG93EAEGZW5hYmxlAgIAAQAAAAAAAgdVU0VfRVNNAgIAAQAAAAAAAwtzaGFkb3dQb3dlcgMCAAAEB1VTRV9QQ0YCAgABAAAAAAAFC1BDRl9TQU1QTEVTAQIAAQAAAAAABghwY2ZTY2FsZQMCAAAHCXNoYWRvd1JlcwUKAgAACAlzaGFkb3dNYXARAQIAAAkKc2hhZG93UHJvaggCAAAKCnNoYWRvd0JpYXMDAgAACxN0cmFuc2Zvcm1lZFBvc2l0aW9uBQsEAAAMBnNoYWRvdwMEAAANCWRpclNoYWRvdwMEAAAOC3BvaXNzb25EaXNrDwUMBQIAAA8EcmFuZA4GAAAQCGZyYWdtZW50DgYAAAIDDwERAXYDBAAAAwUCCBICZHADBAAACQMdDgIJAyoOAQIRAwUMCQMqDgQBA18pyxDH+ilAAwED9P3UeOmOU0ADAQOiRbbz/ZRGQAMBA1CNl24Sq1dAAwUMAwANCQMTDgEGAQkDAg4BAhIDAwEDUPwYc9Fd5UADAwMAAAEQAAAFAgsCAQIFAQsCBAIFCwYEAgwDAQMAAAAAAADwPwMDCBMJdGV4ZWxTaXplBQoEAAAGAgEDAAAAAAAA8D8DAgcFCgUKAAgUCXNoYWRvd1BvcwULBAAABgECCwULAgkIBQsACBUIc2hhZG93VXYFCgQAAAkDOg4BCgIUBQsRAAUKBQoACBYEek1heAMEAAAJAzUOAQoCFAULCAADAwAIFwNyb3QDBAAABgEGAQkCDw4BBgAGAAoCCwULAAADCgILBQsEAAMDCgILBQsIAAMDAwEDH4XrUbgeCUADAwEDAAAAAAAAAEADAwAIGARjb3NSAwQAAAkDAw4BAhcDAwAIGQRzaW5SAwQAAAkDAg4BAhcDAwAIGg5zYW1wbGVTdHJlbmd0aAMEAAAGAgEDAAAAAAAA8D8DCQMmDgECBQEDAwAIGwhvZmZTY2FsZQUKBAAABgECEwUKAgYDBQoADhwBaQEEAAAGFQECAAAAAAECBQEPAQAABQQIHQZvZmZzZXQFCgQAAAYBChECDg8FDAUCHAEFDBEABQoCGwUKBQoABgQCHQUKCQMoDgIGAwYBAhgDCgIdBQoAAAMDBgECGQMKAh0FCgQAAwMDBgAGAQIYAwoCHQUKBAADAwYBAhkDCgIdBQoAAAMDAwUKBQoIHgVkZXB0aAMEAAAJA0AOAwIIEQEGAAIVBQoCHQUKBQoBAwAAAAAAAAAAAwMABoMCDAMLBAYHBgMCFgMCCgMDAh4DAgICGgMBAwAAAAAAAAAAAwMDAAAACwICAgUFCB8Jc2hhZG93UG9zBQsEAAAGAQILBQsCCQgFCwAIIAVkZXB0aAMEAAAJAz8OAgIIEQEJAzoOAQoCHwULEQAFCgUKAwAIIQR6TWF4AwQAAAkDNQ4BCgIfBQsIAAMDAAgiBWRlbHRhAwQAAAYDCQMVDgIEBgACIAMCCgMDAwIhAwMCIQMDAAYEAgwDCQM1DgEJAwkOAQYBAgMDAiIDAwMDAwAFBAgjCXNoYWRvd1BvcwULBAAABgECCwULAgkIBQsACCQIc2hhZG93VXYFCgQAAAkDOg4BCgIjBQsRAAUKBQoACCUFZGVwdGgDBAAACQM/DgICCBEBCgIkBQoRAAUKAwAGBAIMAwsGBwYDCQM1DgEKAiMFCwgAAwMCCgMDAiUDAgEDAAAAAAAAAAADAQMAAAAAAADwPwMDAwAAAAAAAAYEAg0DAgwDAwA",sn.SRC="HXSLFWgzZC5zaGFkZXIuR2VuVGV4dHVyZQoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoEbW9kZQECAAEAAAAAAAsFY29sb3IFDAIAAAwIX19pbml0X18OBgAADQZ2ZXJ0ZXgOBgAADghmcmFnbWVudA4GAAADAgwAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAANAAAFAQYEAgYFDAkDKg4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAEOAAAFARMEAgoBAQEBAQIAAAAAAQUBBgQCCAUMCwYHCQMbDgEKAgYFDBEABQoDAQMAAAAAAADwPwMCCQMqDgEBAwAAAAAAAAAAAwUMAgsFDAUMBQwAAAAA",eh.SRC="HXSLFWgzZC5zaGFkZXIuTGluZVNoYWRlcgwBBmNhbWVyYQ0BAwIEdmlldwcAAQADBHByb2oHAAEABAh2aWV3UHJvagcAAQAAAAAFBmdsb2JhbA0CAgYJcGl4ZWxTaXplBQoABQAHCW1vZGVsVmlldwcABQEDAAAACAVpbnB1dA0DAwkIcG9zaXRpb24FCwEIAAoGbm9ybWFsBQsBCAALAnV2BQoBCAABAAAMBm91dHB1dA0EAQ0IcG9zaXRpb24FDAQMAAQAAA4RdHJhbnNmb3JtZWROb3JtYWwFCwQAAA8TdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAEBFwcm9qZWN0ZWRQb3NpdGlvbgUMBAAAEQtsZW5ndGhTY2FsZQMCAAASBXdpZHRoAwIAABMEcGRpcgUMBAAAFAhfX2luaXRfXw4GAAAVBnZlcnRleA4GAAACAhQAAAUBBQUIFgNkaXIFCwQAAAYBAgoFCwkDMg4BAgcHBgULAAYEAhMFDAYBCQMqDgIGAQIWBQsJAzIOAQICBwYFCwEDAAAAAAAA8D8DBQwCAwcFDAUMBoEKAhMFDBEABQoGAgEDAAAAAAAA8D8DCQMNDgEGAAYBCgITBQwAAAMKAhMFDAAAAwMGAQoCEwUMBAADCgITBQwEAAMDAwMDBQoGgAIPBQsGAQYBAhYFCwoCCwUKAAADBQsCEQMFCwULBgQCDgULCQMfDgECFgULBQsFCwAAABUAAAUBBoAKAhAFDBEABQoGAQYBBgEGAQQGAQoCEwUMBQAFCgkDKA4CAQMAAAAAAADwPwMBAwAAAAAAAPC/AwUKBQoFCgQGAwoCCwUKBAADAQMAAAAAAADgPwMDAwUKCgIQBQwIAAMFCgIGBQoFCgISAwUKBQoA",nh.SRC="HXSLF2gzZC5zaGFkZXIuTWluTWF4U2hhZGVyCwEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgR0ZXhBCgIAAAsEdGV4QgoCAAAMBWlzTWF4AgIAAQAAAAAADQhfX2luaXRfXw4GAAAOBnZlcnRleA4GAAAPCGZyYWdtZW50DgYAAAMCDQAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAA4AAAUBBgQCBgUMCQMqDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAQ8AAAUDCBABYQUMBAAACQMhDgICCgoCCQUKBQwACBEBYgUMBAAACQMhDgICCwoCCQUKBQwABgQCCAUMCwIMAgkDFg4CAhAFDAIRBQwFDAkDFQ4CAhAFDAIRBQwFDAUMBQwA",an.SRC="HXSLG2gzZC5zaGFkZXIuQ3ViZU1pbk1heFNoYWRlcgwBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoEdGV4QQwCAAALBHRleEIMAgAADAVpc01heAICAAEAAAAAAA0DbWF0BgIAAA4IX19pbml0X18OBgAADwZ2ZXJ0ZXgOBgAAEAhmcmFnbWVudA4GAAADAg4AAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAAPAAAFAQYEAgYFDAkDKg4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAEQAAAFBQgRAnV2BQoEAAAGAwYBAgkFCgEDAAAAAAAAAEADBQoBAwAAAAAAAPA/AwUKAAgSA2RpcgULBAAABgEJAykOAgIRBQoBAwAAAAAAAPA/AwULAg0GBQsACBMBYQUMBAAACQMhDgICCgwCEgULBQwACBQBYgUMBAAACQMhDgICCwwCEgULBQwABgQCCAUMCwIMAgkDFg4CAhMFDAIUBQwFDAkDFQ4CAhMFDAIUBQwFDAUMBQwA",sh.SRC="HXSLFGgzZC5zaGFkZXIuTm9ybWFsTWFwCgEGY2FtZXJhDQECAghwb3NpdGlvbgULAAEAAwNkaXIFCwMBAAAAAAQGZ2xvYmFsDQIBBQltb2RlbFZpZXcHAAQBAwAAAAYFaW5wdXQNAwIHBm5vcm1hbAULAQYACAd0YW5nZW50BQsBBgABAAAJB3RleHR1cmUKAgAACgxjYWxjdWxhdGVkVVYFCgQAAAsTdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAADBF0cmFuc2Zvcm1lZE5vcm1hbAULBAAADRJ0cmFuc2Zvcm1lZFRhbmdlbnQFDAMAAA4OX19pbml0X192ZXJ0ZXgOBgAADwhmcmFnbWVudA4GAAACAg4AAAUBBgQCDQUMCQMqDgIGAQIIBQsJAzIOAQIFBwYFCwsGBwkDHQ4CAggFCwIIBQsDAQMAAAAAAADgPwMCAQMAAAAAAADwPwMBAwAAAAAAAPC/AwMFDAUMAAEPAAAFBQgQAW4FCwQAAAIMBQsACBECbmYFCwQAAAkDOQ4BCQMhDgICCQoCCgUKBQwFCwAIEgR0YW5YBQsEAAAJAx8OAQoCDQUMkgAFCwULAAgTBHRhblkFCwQAAAYBCQMeDgICEAULAhIFCwULBwMKAg0FDAwAAwMFCwAGBAIMBQsJAx8OAQQGAAYABgEKAhEFCwAAAwISBQsFCwYBCgIRBQsEAAMCEwULBQsFCwYBCgIRBQsIAAMCEAULBQsFCwULBQsFCwA",ih.SRC="HXSLFGgzZC5zaGFkZXIuT3V0bGluZTJEDQEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgd0ZXh0dXJlCgIAAAsEc2l6ZQUKAgAADAdzYW1wbGVzAQIAAQAAAAAADQVjb2xvcgUMAgAADg1tdWx0aXBseUFscGhhAQIAAQAAAAAADwhfX2luaXRfXw4GAAAQBnZlcnRleA4GAAARCGZyYWdtZW50DgYAAAMCDwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAABAAAAUBBgQCBgUMCQMqDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAREAAAUMCBIIb3duQ29sb3IFDAQAAAkDIQ4CAgoKAgMFCgUMAAgTCG1heEFscGhhAwQAAAEDAAAAAAAAAAADAAgUCGN1ckNvbG9yBQwEAAAAAAgVCWRpc3BsYWNlZAUKBAAAAAAIFgVhbmdsZQMEAAABAwAAAAAAAAAAAwAIFwhkb3VibGVQaQMEAAABAxgtRFT7IRlAAwAIGARzdGVwAwQAAAYCAhcDCQMmDgECDAEDAwAVBnVucm9sbAAOGQFpAQQAAAYVAQIAAAAAAQIMAQ8BAAAFBQaAAhYDAhgDAwYECgIVBQoAAAMGAAoCAwUKAAADBgEKAgsFCgAAAwkDAw4BAhYDAwMDAwYECgIVBQoEAAMGAAoCAwUKBAADBgEKAgsFCgQAAwkDAg4BAhYDAwMDAwYEAhQFDAkDIQ4CAgoKAhUFCgUMBQwGBAITAwkDFg4CAhMDCgIUBQwMAAMDAwAAAAgaC3Jlc3VsdEFscGhhAwQAAAkDFg4CAhMDCgISBQwMAAMDAAgbC3Jlc3VsdENvbG9yBQsEAAAGAAoCEgUMkgAFCwYBCgINBQySAAULBAYDAQMAAAAAAADwPwMKAhIFDAwAAwMDBQsFCwAIHANvdXQFCwQAAAYBAhsFCwkDFg4CCQMmDgECDgEDAhoDAwULAAYEAgcFDAkDKg4CAhwFCwYBAhoDCQMYDgMKAg0FDAwAAwEDAAAAAAAA8D8DCgISBQwMAAMDAwUMBQwA",ah.SRC="HXSLEWgzZC5zaGFkZXIuU2hhZG93BgEGc2hhZG93DQEFAgNtYXARAQABAAMEcHJvaggAAQAEBWNvbG9yBQsAAQAFBXBvd2VyAwABAAYEYmlhcwMAAQAAAAAHCnBpeGVsQ29sb3IFDAQAAAgTdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAACRhwaXhlbFRyYW5zZm9ybWVkUG9zaXRpb24FCwQAAAoJc2hhZG93UG9zBQsEAAEBCwhmcmFnbWVudA4GAAABAQsAAAUGCAwJc2hhZG93UG9zBQsEAAAGAQIJBQsCAwgFCwAIDQVkZXB0aAMEAAAJAz8OAgICEQEJAzoOAQoCDAULEQAFCgUKAwAIDgR6TWF4AwQAAAkDNQ4BCgIMBQsIAAMDAAgPBWRlbHRhAwQAAAYDCQMVDgIEBgACDQMCBgMDAwIOAwMCDgMDAAgQBXNoYWRlAwQAAAkDNQ4BCQMJDgEGAQIFAwIPAwMDAwAGgQoCBwUMkgAFCwYABgEEBgMBAwAAAAAAAPA/AwIQAwMDCgIEBQuSAAULBQsCEAMFCwULAA",rh.SRC="HXSLHmgzZC5zaGFkZXIuU2lnbmVkRGlzdGFuY2VGaWVsZA8BBWlucHV0DQEDAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEABAVjb2xvcgUMAQEAAQAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAIBHRpbWUDAAAACQ5zcHJpdGVQb3NpdGlvbgUMBAAAChBhYnNvbHV0ZVBvc2l0aW9uBQwEAAALCnBpeGVsQ29sb3IFDAQAAAwMdGV4dHVyZUNvbG9yBQwEAAANDGNhbGN1bGF0ZWRVVgUKAwAADg5vdXRwdXRQb3NpdGlvbgUMBAAADwdjaGFubmVsAQIAAQAAAAAAEA1hdXRvU21vb3RoaW5nAgIAAQAAAAAAEQthbHBoYUN1dG9mZgMCAAASCXNtb290aGluZwMCAAATBm1lZGlhbg4GAAAUCGZyYWdtZW50DgYAAAIDEwMVAXIDBAAAFgFnAwQAABcBYgMEAAADBQENCQMWDgIJAxUOAgIVAwIWAwMJAxUOAgkDFg4CAhUDAhYDAwIXAwMDAAABFAAABQUIGA10ZXh0dXJlU2FtcGxlBQwEAAACDAUMAAgZCGRpc3RhbmNlAwQAAAAABgQCGQMLBgUCDwEBAgAAAAABAgoCGAUMAAADCwYFAg8BAQIBAAAAAQIKAhgFDAQAAwsGBQIPAQECAgAAAAECCgIYBQwIAAMLBgUCDwEBAgMAAAABAgoCGAUMDAADCQITDgMKAhgFDAAAAwoCGAUMBAADCgIYBQwIAAMDAwMDAwMIGglzbW9vdGhWYWwDBAAACwIQAgkDDw4BBgEJAz4OAQIZAwMBAwAAAAAAAOA/AwMDAhIDAwAGBAIMBQwJAyoOBAEDAAAAAAAA8D8DAQMAAAAAAADwPwMBAwAAAAAAAPA/AwkDGg4DBgMCEQMCGgMDBgACEQMCGgMDAhkDAwUMBQwA",rn.SRC="HXSLE2gzZC5zaGFkZXIuU2tpbkJhc2UGARByZWxhdGl2ZVBvc2l0aW9uBQsEAAACE3RyYW5zZm9ybWVkUG9zaXRpb24FCwQAAAMRdHJhbnNmb3JtZWROb3JtYWwFCwQAAAQITWF4Qm9uZXMBAgABAAAAAAAFEWZvdXJCb25lc0J5VmVydGV4AgIAAQAAAAAABg1ib25lc01hdHJpeGVzDwgEAgABCAA",lh.SRC="HXSLD2gzZC5zaGFkZXIuU2tpbgkBEHJlbGF0aXZlUG9zaXRpb24FCwQAAAITdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAAxF0cmFuc2Zvcm1lZE5vcm1hbAULBAAABAhNYXhCb25lcwECAAEAAAAAAAURZm91ckJvbmVzQnlWZXJ0ZXgCAgABAAAAAAAGDWJvbmVzTWF0cml4ZXMPCAQCAAEIBwVpbnB1dA0BBAgIcG9zaXRpb24FCwEHAAkGbm9ybWFsBQsBBwAKB3dlaWdodHMFCwEHAAsHaW5kZXhlcwkEAAAAAQcAAQAADBJ0cmFuc2Zvcm1lZFRhbmdlbnQFDAQAAA0GdmVydGV4DgYAAAEADQAABQQGBAICBQsGAAYABgEEBgECAQULEQIGDwgECQMlDgEKAgsJBAAAAAAAAwEIBQsFCwoCCgULAAADBQsGAQQGAQIBBQsRAgYPCAQJAyUOAQoCCwkEAAAABAADAQgFCwULCgIKBQsEAAMFCwULBgEEBgECAQULEQIGDwgECQMlDgEKAgsJBAAAAAgAAwEIBQsFCwoCCgULCAADBQsFCwULBgQCAwULBgAGAAYBBAYBAgkFCwkDMg4BEQIGDwgECQMlDgEKAgsJBAAAAAAAAwEIBgULBQsKAgoFCwAAAwULBgEEBgECCQULCQMyDgERAgYPCAQJAyUOAQoCCwkEAAAABAADAQgGBQsFCwoCCgULBAADBQsFCwYBBAYBAgkFCwkDMg4BEQIGDwgECQMlDgEKAgsJBAAAAAgAAwEIBgULBQsKAgoFCwgAAwULBQsFCwsCBQIFAwgOAnc0AwQAAAYDAQMAAAAAAADwPwMEBgAGAAoCCgULAAADCgIKBQsEAAMDCgIKBQsIAAMDAwMABoACAgULBgEEBgECAQULEQIGDwgECQMlDgEKAgsJBAAAAAwAAwEIBQsFCwIOAwULBQsGgAIDBQsGAQQGAQIJBQsJAzIOARECBg8IBAkDJQ4BCgILCQQAAAAIAAMBCAYFCwULAg4DBQsFCwAAAAYEAgMFCwkDHw4BAgMFCwULBQsA",oh.SRC="HXSLFmgzZC5zaGFkZXIuU2tpblRhbmdlbnQJARByZWxhdGl2ZVBvc2l0aW9uBQsEAAACE3RyYW5zZm9ybWVkUG9zaXRpb24FCwQAAAMRdHJhbnNmb3JtZWROb3JtYWwFCwQAAAQITWF4Qm9uZXMBAgABAAAAAAAFEWZvdXJCb25lc0J5VmVydGV4AgIAAQAAAAAABg1ib25lc01hdHJpeGVzDwgEAgABCAcFaW5wdXQNAQUICHBvc2l0aW9uBQsBBwAJBm5vcm1hbAULAQcACgd0YW5nZW50BQsBBwALB3dlaWdodHMFCwEHAAwHaW5kZXhlcwkEAAAAAQcAAQAADRJ0cmFuc2Zvcm1lZFRhbmdlbnQFDAQAAA4GdmVydGV4DgYAAAEADgAABQYGBAICBQsGAAYABgEEBgECAQULEQIGDwgECQMlDgEKAgwJBAAAAAAAAwEIBQsFCwoCCwULAAADBQsGAQQGAQIBBQsRAgYPCAQJAyUOAQoCDAkEAAAABAADAQgFCwULCgILBQsEAAMFCwULBgEEBgECAQULEQIGDwgECQMlDgEKAgwJBAAAAAgAAwEIBQsFCwoCCwULCAADBQsFCwULBgQCAwULBgAGAAYBBAYBAgkFCwkDMg4BEQIGDwgECQMlDgEKAgwJBAAAAAAAAwEIBgULBQsKAgsFCwAAAwULBgEEBgECCQULCQMyDgERAgYPCAQJAyUOAQoCDAkEAAAABAADAQgGBQsFCwoCCwULBAADBQsFCwYBBAYBAgkFCwkDMg4BEQIGDwgECQMlDgEKAgwJBAAAAAgAAwEIBgULBQsKAgsFCwgAAwULBQsFCwYECgINBQySAAULBgAGAAYBBAYBCgIKBQuSAAULCQMyDgERAgYPCAQJAyUOAQoCDAkEAAAAAAADAQgGBQsFCwoCCwULAAADBQsGAQQGAQoCCgULkgAFCwkDMg4BEQIGDwgECQMlDgEKAgwJBAAAAAQAAwEIBgULBQsKAgsFCwQAAwULBQsGAQQGAQoCCgULkgAFCwkDMg4BEQIGDwgECQMlDgEKAgwJBAAAAAgAAwEIBgULBQsKAgsFCwgAAwULBQsFCwsCBQIFBAgPAnc0AwQAAAYDAQMAAAAAAADwPwMEBgAGAAoCCwULAAADCgILBQsEAAMDCgILBQsIAAMDAwMABoACAgULBgEEBgECAQULEQIGDwgECQMlDgEKAgwJBAAAAAwAAwEIBQsFCwIPAwULBQsGgAIDBQsGAQQGAQIJBQsJAzIOARECBg8IBAkDJQ4BCgIMCQQAAAAIAAMBCAYFCwULAg8DBQsFCwaACgINBQySAAULBgEEBgEKAgoFC5IABQsJAzIOARECBg8IBAkDJQ4BCgIMCQQAAAAMAAMBCAYFCwULAg8DBQsFCwAAAAYEAgMFCwkDHw4BAgMFCwULBQsGBAoCDQUMkgAFCwkDHw4BCgINBQySAAULBQsFCwA",hh.SRC="HXSLGmgzZC5zaGFkZXIuU3BlY3VsYXJUZXh0dXJlBAEHdGV4dHVyZQoCAAACDGNhbGN1bGF0ZWRVVgUKBAAAAwlzcGVjQ29sb3IFCwQAAAQIZnJhZ21lbnQOBgAAAQEEAAAFAQaBAgMFCwoJAyEOAgIBCgICBQoFDJIABQsFCwA",uh.SRC="HXSLEmgzZC5zaGFkZXIuVGV4dHVyZQsBBWlucHV0DQEBAgJ1dgUKAQEAAQAAAwhhZGRpdGl2ZQICAAEAAAAAAAQJa2lsbEFscGhhAgIAAQAAAAAABQ1zcGVjdWxhckFscGhhAgIAAQAAAAAABhJraWxsQWxwaGFUaHJlc2hvbGQDAgABBwAAAAAAAAAAAAAAAAAA8D8HB3RleHR1cmUKAgAACAxjYWxjdWxhdGVkVVYFCgQAAAkKcGl4ZWxDb2xvcgUMBAAACglzcGVjQ29sb3IFCwQAAAsGdmVydGV4DgYAAAwIZnJhZ21lbnQOBgAAAgALAAAFAQYEAggFCgICBQoFCgABDAAABQQIDQFjBQwEAAAJAyEOAgIHCgIIBQoFDAALBg4CBAIGCQYDCgINBQwMAAMCBgMDAQMAAAAAAAAAAAMCAgwAAAALAgMCBoACCQUMAg0FDAUMBoECCQUMAg0FDAUMAAsCBQIGgQIKBQsKAg0FDP4ABQsFCwAAAA",ln.SRC="HXSLEmgzZC5zaGFkZXIuVVZEZWx0YQQBB3V2RGVsdGEFCgIAAAIHdXZTY2FsZQUKAgAAAwxjYWxjdWxhdGVkVVYFCgQAAAQGdmVydGV4DgYAAAEABAAABQEGBAIDBQoGAAYBAgMFCgICBQoFCgIBBQoFCgUKAA",on.SRC="HXSLFmgzZC5zaGFkZXIuVmVydGV4Q29sb3IEAQVpbnB1dA0BAQIFY29sb3IFCwEBAAEAAAMKcGl4ZWxDb2xvcgUMBAAABAhhZGRpdGl2ZQICAAEAAAAAAAUIZnJhZ21lbnQOBgAAAQEFAAAFAQsCBAIGgAoCAwUMkgAFCwICBQsFCwaBCgIDBQySAAULAgIFCwULAAA",_h.SRC="HXSLG2gzZC5zaGFkZXIuVmVydGV4Q29sb3JBbHBoYQQBBWlucHV0DQEBAgVjb2xvcgUMAQEAAQAAAwpwaXhlbENvbG9yBQwEAAAECGFkZGl0aXZlAgIAAQAAAAAABQhmcmFnbWVudA4GAAABAQUAAAUBCwIEAgaAAgMFDAICBQwFDAaBAgMFDAICBQwFDAAA",hn.SRC="HXSLFmgzZC5zaGFkZXIuVm9sdW1lRGVjYWwYAQZjYW1lcmENAQoCBHZpZXcHAAEAAwRwcm9qBwABAAQIcG9zaXRpb24FCwABAAUIcHJvakZsaXADAAEABghwcm9qRGlhZwULAAEABwh2aWV3UHJvagcAAQAID2ludmVyc2VWaWV3UHJvagcAAQAJBXpOZWFyAwABAAoEekZhcgMAAQALA2RpcgULAwEAAAAADAZnbG9iYWwNAgQNBHRpbWUDAAwADglwaXhlbFNpemUFCgAMAA8JbW9kZWxWaWV3BwAMAQMQEG1vZGVsVmlld0ludmVyc2UHAAwBAwAAABEFaW5wdXQNAwISCHBvc2l0aW9uBQsBEQATBm5vcm1hbAULAREAAQAAFAZvdXRwdXQNBAUVCHBvc2l0aW9uBQwEFAAWBWNvbG9yBQwEFAAXBWRlcHRoAwQUABgGbm9ybWFsBQsEFAAZCXdvcmxkRGlzdAMEFAAEAAAaEHJlbGF0aXZlUG9zaXRpb24FCwQAABsTdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAHBhwaXhlbFRyYW5zZm9ybWVkUG9zaXRpb24FCwQAAB0RdHJhbnNmb3JtZWROb3JtYWwFCwQAAB4RcHJvamVjdGVkUG9zaXRpb24FDAQAAB8KcGl4ZWxDb2xvcgUMBAAAIAVkZXB0aAMEAAAhCHNjcmVlblVWBQoEAAAiCXNwZWNQb3dlcgMEAAAjCXNwZWNDb2xvcgULBAAAJAl3b3JsZERpc3QDBAAAJQhkZXB0aE1hcBEBAAAAJgVzY2FsZQUKAgAAJwZub3JtYWwFCwIAACgHdGFuZ2VudAULAgAAKQppc0NlbnRlcmVkAgIAAQAAAAAAKgxjYWxjdWxhdGVkVVYFCgQAACsSdHJhbnNmb3JtZWRUYW5nZW50BQwEAAAsDl9faW5pdF9fdmVydGV4DgYAAC0IZnJhZ21lbnQOBgAAAgIsAAAFAgYEAh0FCwkDHw4BBAYBAicFCwkDMg4BAg8HBgULBQsFCwULBgQCKwUMCQMqDgIJAx8OAQQGAQIoBQsJAzIOAQIPBwYFCwULBQsBAwAAAAAAAPA/AwUMBQwAAS0AAAUJCC4GbWF0cml4BwQAAAYBAggHAhAHBwAILwlzY3JlZW5Qb3MFCgQAAAYCCgIeBQwRAAUKCgIeBQwMAAMFCgAIMANydXYFDAQAAAkDKg4DAi8FCgkDPw4CAiURAQkDOg4BAi8FCgUKAwEDAAAAAAAA8D8DBQwACDEEd3BvcwUMBAAABgECMAUMAi4HBQwACDIEcHBvcwUMBAAABgECMAUMAggHBQwABgQCHAULBgIKAjIFDJIABQsKAjIFDAwAAwULBQsGBAIqBQoGAQImBQoEBgIKAjEFDBEABQoKAjEFDAwAAwUKBQoFCgUKCwIpAgaAAioFCgEDAAAAAAAA4D8DBQoAAAsGCQkDFQ4CCQMVDgIKAioFCgAAAwoCKgUKBAADAwkDFQ4CBgMBAwAAAAAAAPA/AwoCKgUKAAADAwYDAQMAAAAAAADwPwMKAioFCgQAAwMDAwEDAAAAAAAAAAADAgwAAAAA",wn.__meta__={statics:{splash:{keep:null},misc:{keep:null}}},wn.splash_info=yn,wn.misc_info=bn,kn.__meta__={statics:{win_under_bet:{keep:null},win_over_medium:{keep:null},win_over_low:{keep:null},win_over_high:{keep:null},level0:{keep:null},bounce:{keep:null},betlevel:{keep:null},bet:{keep:null}}},In.images=Mn,In.spines=Bn,In.sounds=kn,In.fonts=new N,In.bitmapFonts=new N,In.atlases=wn,In.gradients=Cn,In.models=Sn,In.configs=vn,Tn.REFERENCE_SIZE=512,mh.BASE_NAME="hacksaw.core.components.model.CasinoModel",Ln.BASE_NAME=On.BASE_NAME=Vn.BASE_NAME=Rn.BASE_NAME=En.BASE_NAME="gasm.heaps.components.Heaps3DComponent",Nn.__meta__={fields:{progress:{keep:null}}},Gn.__meta__={fields:{logoPos:{keep:null},headerMaxWidth:{keep:null},bodyMaxWidth:{keep:null},bodyMaxHeight:{keep:null},xSpacing:{keep:null},splashes:{keep:null},topHeader:{keep:null},clickToContinue:{keep:null}}},bh.__meta__={statics:{rubik_black:{keep:null},teko_medium:{keep:null}}},bh.rubik_black="rubik_black",bh.teko_medium="teko_medium",es.SRC="HXSLJGhhY2tzYXcuY29yZS5maWx0ZXJzLmgyZC5Db2xvckZpbHRlcgoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoCAAALBWNvbG9yBQwCAAAMCF9faW5pdF9fDgYAAA0GdmVydGV4DgYAAA4IZnJhZ21lbnQOBgAAAwIMAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADQAABQEGBAIGBQwJAyoOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABDgAABQIIDwVhbHBoYQMEAAAKCQMhDgICCgoCAwUKBQwMAAMABgQCCAUMBgECCwUMAg8DBQwFDAA",Ph.SRC="HXSLJmhhY2tzYXcuY29yZS5maWx0ZXJzLmgyZC5UZXh0dXJlU2hhZGVyCAEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgd0ZXh0dXJlCgIAAAsIX19pbml0X18OBgAADAZ2ZXJ0ZXgOBgAAAgILAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADAAABQEGBAIGBQwJAyoOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAA",is.SRC="HXSLKWhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5CaXRtYXBNYXNrU2hhZGVyDQEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgd0ZXh0dXJlCgIAAAsEbWFzawoCAAAMCG1hc2tNYXRBBQsCAAANCG1hc2tNYXRCBQsCAAAOBm1hc2tVVgUKAwAADwhfX2luaXRfXw4GAAAQBnZlcnRleA4GAAARCGZyYWdtZW50DgYAAAMCDwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAABAAAAUDBgQCBgUMCQMqDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwIEgJ1dgULBAAACQMpDgICAwUKAQMAAAAAAADwPwMFCwAGBAIOBQoJAygOAgkDHQ4CAhIFCwIMBQsDCQMdDgICEgULAg0FCwMFCgUKAAERAAAFAwgTBWNvbG9yBQwEAAAJAyEOAgIKCgIDBQoFDAAIFAFrBQwEAAAJAyEOAgILCgIOBQoFDAAGBAIHBQwGAQITBQwJAyoOBAEDAAAAAAAA8D8DAQMAAAAAAADwPwMBAwAAAAAAAPA/AwoCFAUMDAADBQwFDAUMAA",Lh.SRC="HXSLL2hhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5NdWx0aVRpbGVUZXh0dXJlU2hhZGVyHwEFaW5wdXQNAQECAnV2BQoBAQABAAADCGFkZGl0aXZlAgIAAQAAAAAABAlraWxsQWxwaGECAgABAAAAAAAFDXNwZWN1bGFyQWxwaGECAgABAAAAAAAGEmtpbGxBbHBoYVRocmVzaG9sZAMCAAEHAAAAAAAAAAAAAAAAAADwPwcHdGV4dHVyZQoCAAAIDGNhbGN1bGF0ZWRVVgUKBAAACQpwaXhlbENvbG9yBQwEAAAKCXNwZWNDb2xvcgULBAAACwdOYlRpbGVzAQIAAQAAAAAADAp1dlBvc2l0aW9uDwUKCwIAAA0HdXZTY2FsZQ8FCgsCAAAOCHV2TWFyZ2luDwUKCwIAAA8IdXZPZmZzZXQPBQoLAgAAEAh1dlJlcGVhdA8FCgsCAAARDnV2UmVwZWF0RW5hYmxlDwELAgAAEgh0ZXh0dXJlMgoCAAATCnV2Um90YXRpb24DAgAAFA11dlJvdGF0aW9uRml0AwIAABUKb3JpZ2luYWxVVgUKBAAAFgZ0aWxlVVYFDAQAABcHdGlsZVVWMgUMBAAAGAl0aWxlVVZNaW4FDAQAABkJdGlsZVVWTWF4BQwEAAAaCnRpbGVVVjJNaW4FDAQAABsKdGlsZVVWMk1heAUMBAAAHA9jYWxjdWxhdGVUaWxlVVYOBgAAHQhyb3RhdGVVVg4GAAAeBnZlcnRleA4GAAAfD3RpbGVUZXh0dXJlUmVhZA4GAAAgCGZyYWdtZW50DgYAAAUDHAIhAWkBBAAAIgdpbnB1dFVWBQoEAAAFDAUGCCMCdXYFCgQAAAIiBQoABoECIwUKBgIRAg0PBQoLAiEBBQoEBgMBAwAAAAAAAPA/AxECDg8FCgsCIQEFCgUKBQoFCgUKBoMCIwUKEQIPDwUKCwIhAQUKBQoIJAZtYXNrVVYFCgQAAAYCAiMFChECDQ8FCgsCIQEFCgUKAAaAAiMFChECDA8FCgsCIQEFCgUKDQkDKg4ECgIjBQoAAAMKAiMFCgQAAwoCJAUKAAADCgIkBQoEAAMFDAAAAx0DJQJ1dgUKBAAAJgVhbmdsZQMEAAAnCHByZXNlcnZlAwQAAAUKBQUIKAFwBQoEAAAGAwYBAQMAAAAAAAAAQAMCJQUKBQoBAwAAAAAAAPA/AwUKAAgpAXgSBAAACQMxDgIJAygOAgkDAw4BAiYDAwcDCQMCDgECJgMDAwUKCQMoDgIJAwIOAQImAwMJAwMOAQImAwMFChIABoECKAUKAikSBQoGgQIoBQoGAwEDAAAAAAAA8D8DBgEGAQkDDw4BCQMCDgEGAQImAwEDAAAAAAAAAEADAwMDAQMAAAAAAADgPwMDAicDAwMFCg0GAAYBAQMAAAAAAADgPwMCKAUKBQoBAwAAAAAAAOA/AwUKAAAAHgAABQcLBgUCEwMBAwAAAAAAAAAAAwIFAQYEAggFCgICBQoFCgAFAQYEAggFCgkCHQ4DAgIFCgITAwIUAwUKBQoAAAYEAhUFCgIIBQoFCgYEAhYFDAkCHA4CAQIAAAAAAQIVBQoFDAUMBgQCCAUKCgIWBQwRAAUKBQoGBAIYBQwJAhwOAgECAAAAAAEJAygOAQEDAAAAAAAAAAADBQoFDAUMBgQCGQUMCQIcDgIBAgAAAAABCQMoDgEBAwAAAAAAAPA/AwUKBQwFDAsGBQILAQECAgAAAAECBQMGBAIXBQwJAhwOAgECAQAAAAECFQUKBQwFDAYEAhoFDAkCHA4CAQIBAAAAAQkDKA4BAQMAAAAAAAAAAAMFCgUMBQwGBAIbBQwJAhwOAgECAQAAAAEJAygOAQEDAAAAAAAA8D8DBQoFDAUMAAAAAAMfAyoHdGV4dHVyZQoEAAArAnV2BQoEAAAsDHRpbGVEb21haW5VVgUKBAAABQwFBggtDHRleHR1cmVDb2xvcgUMBAAACQMhDgICKgoCKwUKBQwACC4EbWFzawMEAAABAwAAAAAAAAAAAwAGgAIuAwkDDw4BCQMRDgEKAiwFCgAAAwMDAwaAAi4DCQMPDgEJAxEOAQoCLAUKBAADAwMDBoECLQUMBgMBAwAAAAAAAPA/AwkDFw4DAi4DAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwMDBQwNAi0FDAAAASAAAAUFCC8KcmVwZWF0ZWRVVgUMBAAACQMYDgMCGAUMAhkFDAoJAxMOAQYBAhUFChECEA8FCgsBAgAAAAABBQoFCgUKEwEFDAUMAAgwBnJlYWxVVgUMBAAABgAGAQIWBQwJAyYOAQQGAwECAQAAAAERAhEPAQsBAgAAAAABAQEBAwUMBgEJAyYOARECEQ8BCwECAAAAAAEBAwIvBQwFDAUMAAgxBWNvbG9yBQwEAAAJAh8OAwIHCgoCMAUMEQAFCgoCMAUMOQAFCgUMAAsGBQILAQECAgAAAAECBQQIMgtyZXBlYXRlZFVWMgUMBAAACQMYDgMCGgUMAhsFDAoJAxMOAQYBAhUFChECEA8FCgsBAgEAAAABBQoFCgUKEwEFDAUMAAgzB3JlYWxVVjIFDAQAAAYABgECFwUMCQMmDgEEBgMBAgEAAAABEQIRDwELAQIBAAAAAQEBAQMFDAYBCQMmDgERAhEPAQsBAgEAAAABAQMCMgUMBQwFDAAINAZjb2xvcjIFDAQAAAkCHw4DAhIKCgIzBQwRAAUKCgIzBQw5AAUKBQwABgQCMQUMBgAEBgEEBgMBAwAAAAAAAPA/AwoCNAUMDAADAwMCMQUMBQwFDAYBCgI0BQwMAAMCNAUMBQwFDAUMAAAABoECCQUMAjEFDAUMAA",as.SRC="HXSLKWhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5QcmVtdWx0aXBseUFscGhhAwEGb3V0cHV0DQEBAgVjb2xvcgUMBAEABAAAAwpwaXhlbENvbG9yBQwEAAAECGZyYWdtZW50DgYAAAEBBAAABQELBgcKAgMFDAwAAwEDAAAAAAAAAAADAgUCBoEKAgIFDJIABQsKAgMFDAwAAwULBgQKAgIFDAwAAwoCAwUMDAADAwAFAQYEAgIFDAkDKg4EAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwEDAAAAAAAAAAADAQMAAAAAAAAAAAMFDAUMAAAA",rs.SRC="HXSLLGhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5WZXJ0ZXhDb2xvckRhcmtUaW50AwEFaW5wdXQNAQICBWNvbG9yBQwBAQADBmNvbG9yMgUMAQEAAQAABApwaXhlbENvbG9yBQwEAAAFCGZyYWdtZW50DgYAAAEBBQAABQMIBghjb2xvclBNQQULBAAABgAGAQQGAwYABgEEBgMKAgQFDAwAAwEDAAAAAAAA8D8DAwMKAgMFDAwAAwMBAwAAAAAAAPA/AwMKAgQFDJIABQsFCwULCgIDBQySAAULBQsGAQoCBAUMkgAFCwoCAgUMkgAFCwULBQsABgQKAgQFDJIABQsCBgULBQsGgQoCBAUMDAADCgICBQwMAAMDAA",qh.clipper=new _s,qh.triangulator=new Zh,ms._renderCallbackPersistent=!1,hu.scene=null,_u._delays=new fl,_u._intervals=new fl,_u._delayId=-1,_u._intervalId=-1,fu.__meta__={fields:{payout:{keep:null},payoutMedium:{keep:null},payoutSmall:{keep:null},splashHeader:{keep:null},splashBody:{keep:null},clickToContinue:{keep:null}}},gu.BASE_NAME="hacksaw.games.plinko.components.actor.BallTriangle",xu.BASE_NAME="gasm.heaps.components.Heaps3DComponent",yu.BASE_NAME="gasm.heaps.components.Heaps3DComponent",ks.tick=.015625,Ds.pending=[],Ds.threadCount=0,Yu._mul=null!=Math.imul?Math.imul:function(t,e){return t*(65535&e)+(t*(e>>>16)<<16|0)|0},Ku.DEFAULT_RESOLVER=new Rs,Ku.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Ku.CODES=null,t_.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t_.BYTES=Rt.ofString(t_.CHARS),g_.helper=new DataView(new ArrayBuffer(8)),w_.escapes=((Ap=new N).h.lt="<",Ap.h.gt=">",Ap.h.amp="&",Ap.h.quot='"',Ap.h.apos="'",Ap),Zs.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],Zs.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Zs.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],Zs.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Zs.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z_.__meta__={obj:{IgnoreCover:Zs.FIXED_HUFFMAN=null}},Q_.ASCII=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",Q_.LATIN1="¡¢£¤¥¦§¨©ª«¬-®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿœæŒÆ€",Q_.DEFAULT_CHARS=Q_.ASCII+Q_.LATIN1,Q_.complementChars=function(){for(var t=new fl,e=0,n="ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻。，".length;e<n;)t.h[Jn.cca("ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻。，",e++)]=!0;return t}(),N_.initDone=!1,N_.keyPressed=[],N_.ALLOW_KEY_REPEAT=!1,K_.wantedFPS=60,K_.maxDeltaTime=.5,K_.smoothFactor=.95,K_.lastTimeStamp=Jn.now()/1e3,K_.elapsedTime=0,K_.frameCount=0,K_.dt=1/K_.wantedFPS,K_.currentDT=1/K_.wantedFPS,J_.inst=null,tc.setCursor=tc.setNativeCursor,tc.loopInit=!1,tc.fpsLimit=-1,fi.QTMP=new lo,Ti.BLEND=y.__empty_constructs__.slice(),Fi.TMP_BYTES=null,uc.invalidChars=new ct("[^A-Za-z0-9_]","g"),_c.PREFETCH_CACHE=null,Vi.LIVE_UPDATE=!1,mc.workerLimit=4,mc.transcoderPath="vendor/basis_transcoder.js",mc.wasmPath="vendor/basis_transcoder.wasm",mc._workerNextTaskID=1,mc._workerConfig={format:0,astcSupported:!1,etc1Supported:!1,etc2Supported:!1,dxtSupported:!1,pvrtcSupported:!1},mc._workerPool=[],Ac.func="function () {\n\n        var config;\n        var transcoderPending;\n        var _BasisFile;\n\n        onmessage = function ( e ) {\n\n            var message = e.data;\n\n            switch ( message.type ) {\n\n                case 'init':\n                    config = message.config;\n                    init( message.transcoderBinary );\n                    break;\n\n                case 'transcode':\n                    transcoderPending.then( () => {\n\n                        try {\n\n                            var { width, height, hasAlpha, mipmaps, format } = transcode( message.buffer );\n\n                            var buffers = [];\n\n                            for ( var i = 0; i < mipmaps.length; ++ i ) {\n\n                                buffers.push( mipmaps[ i ].data.buffer );\n\n                            }\n                            self.postMessage( { type: 'transcode', id: message.id, width, height, hasAlpha, mipmaps, format }, buffers );\n\n                        } catch ( error ) {\n\n                            console.error( error );\n\n                            self.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n                        }\n\n                    } );\n                    break;\n\n            }\n\n        };\n\n        function init( wasmBinary ) {\n\n            var BasisModule;\n            transcoderPending = new Promise( ( resolve ) => {\n\n                BasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n                BASIS( BasisModule );\n\n            } ).then( () => {\n\n                var { BasisFile, initializeBasis } = BasisModule;\n\n                _BasisFile = BasisFile;\n\n                initializeBasis();\n\n            } );\n\n        }\n\n        function transcode( buffer ) {\n\n            var basisFile = new _BasisFile( new Uint8Array( buffer ) );\n\n            var width = basisFile.getImageWidth( 0, 0 );\n            var height = basisFile.getImageHeight( 0, 0 );\n            var levels = basisFile.getNumLevels( 0 );\n            var hasAlpha = basisFile.getHasAlpha();\n\n            function cleanup() {\n\n                basisFile.close();\n                basisFile.delete();\n\n            }\n\n            if ( ! hasAlpha ) {\n\n                switch ( config.format ) {\n\n                    case 9: // Hardcoded: BASIS_FORMAT.cTFPVRTC1_4_RGBA\n                        config.format = 8; // BASIS_FORMAT.cTFPVRTC1_4_RGB;\n                        break;\n                    default:\n                        break;\n\n                }\n\n            }\n\n            if ( ! width || ! height || ! levels ) {\n\n                cleanup();\n                throw new Error( 'BasisTextureLoader:  Invalid .basis file' );\n\n            }\n\n            if ( ! basisFile.startTranscoding() ) {\n\n                cleanup();\n                throw new Error( 'BasisTextureLoader: .startTranscoding failed' );\n\n            }\n\n            var mipmaps = [];\n\n            for ( var mip = 0; mip < levels; mip ++ ) {\n\n                var mipWidth = basisFile.getImageWidth( 0, mip );\n                var mipHeight = basisFile.getImageHeight( 0, mip );\n                var dst = new Uint8Array( basisFile.getImageTranscodedSizeInBytes( 0, mip, config.format ) );\n\n                var status = basisFile.transcodeImage(\n                    dst,\n                    0,\n                    mip,\n                    config.format,\n                    0,\n                    hasAlpha\n                );\n\n                if ( ! status ) {\n\n                    cleanup();\n                    throw new Error( 'BasisTextureLoader: .transcodeImage failed.' );\n\n                }\n\n                mipmaps.push( { data: dst, width: mipWidth, height: mipHeight } );\n\n            }\n\n            cleanup();\n\n            return { width, height, hasAlpha, mipmaps, format: config.format };\n\n        }\n\n    }",vc.DEFAULT_FILTER=wo.Linear,vc.MIPMAP_MAX_SIZE=0,vc.ENABLE_AUTO_WATCH=!0,vc.BLACK_1x1=Y_.alloc(1,1,v.RGBA),kc.inst=null,lt.UID=0,lt.SWIZ=Rc.__empty_constructs__.slice(),lt.MAX_CHANNELS_BITS=3,Gi.SRC="HXSLEGh4c2wuQmF0Y2hTaGFkZXIDAQ9CYXRjaF9IYXNPZmZzZXQCAgABAAAAAAACC0JhdGNoX0NvdW50AQIAAQAAAAEAAwxCYXRjaF9CdWZmZXIQBQwCAgAAAA",Gc.KWD_LIST=["input","output","discard","sample","dvec2","dvec3","dvec4","hvec2","hvec3","hvec4","fvec2","fvec3","fvec4","int","float","bool","long","short","double","half","fixed","unsigned","superp","lowp","mediump","highp","precision","invariant","discard","struct","asm","union","template","this","packed","goto","sizeof","namespace","noline","volatile","external","flat","input","output","out","attribute","const","uniform","varying","inout","void"],Gc.KWDS=function(){for(var t=new N,e=0,n=Gc.KWD_LIST;e<n.length;)t.h[n[e++]]=!0;return t}(),Gc.GLOBALS=function(){for(var t=[],e=0,n=D.__empty_constructs__.slice();e<n.length;){var s=n[e];++e;var i=(i=""+Ja.string(s)).charAt(0).toLowerCase()+Jn.substr(i,1,null);t[s._hx_index]=i}t[D.ToInt._hx_index]="int",t[D.ToFloat._hx_index]="float",t[D.ToBool._hx_index]="bool",t[D.LReflect._hx_index]="reflect",t[D.Mat3x4._hx_index]="_mat3x4",t[D.VertexID._hx_index]="gl_VertexID",t[D.InstanceID._hx_index]="gl_InstanceID",t[D.IVec2._hx_index]="ivec2",t[D.IVec3._hx_index]="ivec3",t[D.IVec4._hx_index]="ivec4",t[D.BVec2._hx_index]="bvec2",t[D.BVec3._hx_index]="bvec3",t[D.BVec4._hx_index]="bvec4",t[D.FragCoord._hx_index]="gl_FragCoord",t[D.FrontFacing._hx_index]="gl_FrontFacing";for(e=0;e<t.length;)Gc.KWDS.h[t[e++]]=!0;return t}(),Gc.MAT34="struct _mat3x4 { vec4 a; vec4 b; vec4 c; };",qi.UID=0,Wc.SWIZ=["x","y","z","w"],Kc.UID=0,Ki.TVECS=new fl,Ki.BOPS=((Ap=C.__empty_constructs__.slice()).splice(C.OpAssignOp(null)._hx_index,0,null),Ap),Ki.UNOPS=s.__empty_constructs__.slice(),Ki.TGLOBALS=D.__empty_constructs__.slice(),Ki.TSWIZ=new fl,Ki.REGS=[Rc.X,Rc.Y,Rc.Z,Rc.W],Ki.VKINDS=Q.__empty_constructs__.slice(),Ki.PRECS=G_.__empty_constructs__.slice(),Ki.FKIND=zc.__empty_constructs__.slice(),Ki.SIGN=9139229,Jc.MAX_LIST_SIZE=0,Jc.ALLOW_DUPLICATES=!0,Ji.UID=0,$c.UNROLL_LOOPS=!1,Ba.propertyIds=["12"],Ia.propertyIds=["13"],sd.emptyAnimation=new ia("<empty>",[],0),ja.epsilon=1e-5,md.__meta__={obj:{SuppressWarnings:["javadoc"]}},Ad.nextID=0,kd.CLEAR=new kd(0,0,0,0),Dd.clampToEdge=new Dd(1,"clampToEdge"),Dd.repeat=new Dd(2,"repeat"),Ed.degRad=Math.PI/180,Ed.radDeg=180/Math.PI,Ai.radiansToDegrees=57.29577866666166,Ai.radDeg=Ai.radiansToDegrees,Ai.degreesToRadians=.01745329277777778,Ai.degRad=Ai.degreesToRadians,Wd.divisionExtraScale=4,Hd.depth=0,$d.NOISE=new Jd(new Kd(null)),$d.NEVER_INST=new pr,hp.PI=3.141592653589793,hp.PI_H=1.5707963267948966,hp.LN_2=.6931471805599453,hp.LN_2_10=6.931471805599453,hp.overshoot=1.70158,hp.amplitude=1,hp.period=3e-4,xr.inputClass=wp,br.inputClass=Array,wr.inputClass=yr,kr.inputClass=Sr,Tr.inputClass=Ir,Fr.inputClass=Cr,Dr.inputClass=Br,Pr.inputClass=Er,q._tweens=[],q._addedTweens=[],q.managerInited=!1,q.DEFAULT_EASE=hp.linear,q.defaultEase=q.DEFAULT_EASE,q.defaultTime=.3,q.defaultDelay=0,q.defaultInterval=0,q.defaultRepeat=1,q.defaultYoyo=!1,q.defaultZigZag=!1,q.defaultAutoPlay=!0,q.defaultAutoFrom=!0,q._rules=[xr,br,wr,kr,Tr,Fr,Dr,Pr],q.topLevelTimeScale=1,q._groupDefaults=!1,q.updateMode=up.TIME(60),q._initLog=[],q.dictionary=new r_,q._objCounter=0,q.idCounter=0,vs.main(),Ds.run()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);