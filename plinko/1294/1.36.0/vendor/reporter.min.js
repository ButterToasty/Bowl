//! TrackJS JavaScript error monitoring agent.
//! COPYRIGHT (c) 2023 ALL RIGHTS RESERVED
//! See License at https://trackjs.com/terms/
var O=function(v,C,F){var E=function(o,i){this.config=o,this.onError=i,o.enabled&&this.watch()};E.prototype={watch:function(){s.forEach(["EventTarget","Node","XMLHttpRequest"],function(o){s.has(v,o+".prototype.addEventListener")&&s.hasOwn(v[o].prototype,"addEventListener")&&this.wrapEventTarget(v[o].prototype)},this),this.wrapTimer("setTimeout"),this.wrapTimer("setInterval")},wrap:function(o){function i(){try{return o.apply(this,arguments)}catch(_){throw t.onError("catch",_,{bindTime:r,bindStack:n}),s.wrapError(_)}}var t=this;try{if(!s.isFunction(o)||s.hasOwn(o,"__trackjs__"))return o;if(s.hasOwn(o,"__trackjs_state__"))return o.__trackjs_state__}catch(_){return o}var r,n;if(t.config.bindStack)try{throw Error()}catch(_){n=_.stack,r=s.isoNow()}for(var p in o)s.hasOwn(o,p)&&(i[p]=o[p]);return i.prototype=o.prototype,i.__trackjs__=!0,o.__trackjs_state__=i},wrapEventTarget:function(o){var i=this;s.has(o,"addEventListener.call")&&s.has(o,"removeEventListener.call")&&(s.patch(o,"addEventListener",function(t){return function(r,n,p,_){try{s.has(n,"handleEvent")&&(n.handleEvent=i.wrap(n.handleEvent))}catch(u){}return t.call(this,r,i.wrap(n),p,_)}}),s.patch(o,"removeEventListener",function(t){return function(r,n,p,_){try{n=n&&(n.__trackjs_state__||n)}catch(u){}return t.call(this,r,n,p,_)}}))},wrapTimer:function(o){var i=this;s.patch(v,o,function(t){return function(r,n){var p=Array.prototype.slice.call(arguments),_=p[0];return s.isFunction(_)&&(p[0]=i.wrap(_)),s.has(t,"apply")?t.apply(this,p):t(p[0],p[1])}})}};var L=function(o){this.initCurrent(o)||console.warn("[TrackJS] invalid config")};L.prototype={current:{},initOnly:{application:!0,cookie:!0,enabled:!0,token:!0,callback:{enabled:!0},console:{enabled:!0},navigation:{enabled:!0},network:{enabled:!0,fetch:!0},visitor:{enabled:!0},window:{enabled:!0,promise:!0}},defaults:{application:"",cookie:!1,dedupe:!0,dependencies:!0,enabled:!0,forwardingDomain:"",errorURL:"https://capture.trackjs.com/capture",errorNoSSLURL:"http://capture.trackjs.com/capture",faultURL:"https://usage.trackjs.com/fault.gif",usageURL:"https://usage.trackjs.com/usage.gif",onError:function(){return!0},serialize:function(o){function i(n){var p="<"+n.tagName.toLowerCase();n=n.attributes||[];for(var _=0;_<n.length;_++)p+=" "+n[_].name+'="'+n[_].value+'"';return p+">"}if(o==="")return"Empty String";if(o===F)return"undefined";if(s.isString(o)||s.isNumber(o)||s.isBoolean(o)||s.isFunction(o))return""+o;if(s.isElement(o))return i(o);if(typeof o==="symbol")return Symbol.prototype.toString.call(o);var t;try{t=JSON.stringify(o,function(n,p){return p===F?"undefined":s.isNumber(p)&&isNaN(p)?"NaN":s.isError(p)?{name:p.name,message:p.message,stack:p.stack}:s.isElement(p)?i(p):p})}catch(n){t="";for(var r in o)if(o.hasOwnProperty(r))try{t+=',"'+r+'":"'+o[r]+'"'}catch(p){}t=t?"{"+t.replace(",","")+"}":"Unserializable Object"}return t.replace(/"undefined"/g,"undefined").replace(/"NaN"/g,"NaN")},sessionId:"",token:"",userId:"",version:"",callback:{enabled:!0,bindStack:!1},console:{enabled:!0,display:!0,error:!0,warn:!1,watch:["log","debug","info","warn","error"]},navigation:{enabled:!0},network:{enabled:!0,error:!0,fetch:!0},visitor:{enabled:!0},window:{enabled:!0,promise:!0}},initCurrent:function(o){if(this.removeEmpty(o),this.validate(o,this.defaults,"[TrackJS] config",{}))return this.current=s.defaultsDeep({},o,this.defaults),!0;return this.current=s.defaultsDeep({},this.defaults),!1},setCurrent:function(o){return this.validate(o,this.defaults,"[TrackJS] config",this.initOnly)?(this.current=s.defaultsDeep({},o,this.current),!0):!1},removeEmpty:function(o){for(var i in o)o.hasOwnProperty(i)&&o[i]===F&&delete o[i]},validate:function(o,i,t,r){var n=!0;t=t||"",r=r||{};for(var p in o)if(o.hasOwnProperty(p))if(i.hasOwnProperty(p)){var _=typeof i[p];_!==typeof o[p]?(console.warn(t+"."+p+": property must be type "+_+"."),n=!1):Object.prototype.toString.call(o[p])!=="[object Array]"||this.validateArray(o[p],i[p],t+"."+p)?Object.prototype.toString.call(o[p])==="[object Object]"?n=this.validate(o[p],i[p],t+"."+p,r[p]):r.hasOwnProperty(p)&&(console.warn(t+"."+p+": property cannot be set after load."),n=!1):n=!1}else console.warn(t+"."+p+": property not supported."),n=!1;return n},validateArray:function(o,i,t){var r=!0;t=t||"";for(var n=0;n<o.length;n++)s.contains(i,o[n])||(console.warn(t+"["+n+"]: invalid value: "+o[n]+"."),r=!1);return r}};var Z=function(o,i,t,r,n,p,_){this.util=o,this.log=i,this.onError=t,this.onFault=r,this.serialize=n,_.enabled&&(p.console=this.wrapConsoleObject(p.console,_))};Z.prototype={wrapConsoleObject:function(o,i){o=o||{};var t=o.log||function(){},r=this,n;for(n=0;n<i.watch.length;n++)(function(p){var _=o[p]||t;o[p]=function(){try{var u=Array.prototype.slice.call(arguments);if(r.log.add("c",{timestamp:r.util.isoNow(),severity:p,message:r.serialize(u.length===1?u[0]:u)}),i[p])if(s.isError(u[0])&&u.length===1)r.onError("console",u[0]);else try{throw Error(r.serialize(u.length===1?u[0]:u))}catch(j){r.onError("console",j)}i.display&&(r.util.hasFunction(_,"apply")?_.apply(o,u):_(u[0]))}catch(j){r.onFault(j)}}})(i.watch[n]);return o},report:function(){return this.log.all("c")}};var z=function(o,i,t,r,n){this.config=o,this.util=i,this.log=t,this.window=r,this.document=n,this.correlationId=this.token=null,this.initialize()};z.prototype={initialize:function(){this.token=this.getCustomerToken(),this.correlationId=this.getCorrelationId()},getCustomerToken:function(){if(this.config.current.token)return this.config.current.token;var o=this.document.getElementsByTagName("script");return o[o.length-1].getAttribute("data-token")},getCorrelationId:function(){var o;if(!this.config.current.cookie)return this.util.uuid();try{o=this.document.cookie.replace(/(?:(?:^|.*;\s*)TrackJS\s*\=\s*([^;]*).*$)|^.*$/,"$1"),o||(o=this.util.uuid(),this.document.cookie="TrackJS="+o+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/")}catch(i){o=this.util.uuid()}return o},report:function(){return{application:this.config.current.application,correlationId:this.correlationId,sessionId:this.config.current.sessionId,token:this.token,userId:this.config.current.userId,version:this.config.current.version}}};var G=function(o){this.config=o,this.loadedOn=(new Date()).getTime(),this.originalUrl=s.getLocation(),this.referrer=s.isBrowser?C.referrer:""};G.prototype={discoverDependencies:function(){var o={TrackJS:"3.10.4"};v.jQuery&&v.jQuery.fn&&v.jQuery.fn.jquery&&(o.jQuery=v.jQuery.fn.jquery),v.jQuery&&v.jQuery.ui&&v.jQuery.ui.version&&(o.jQueryUI=v.jQuery.ui.version),v.angular&&v.angular.version&&v.angular.version.full&&(o.angular=v.angular.version.full);for(var i in v)if(i!=="_trackJs"&&i!=="_trackJS"&&i!=="_trackjs"&&i!=="webkitStorageInfo"&&i!=="webkitIndexedDB"&&i!=="top"&&i!=="parent"&&i!=="frameElement")try{if(v[i]){var t=v[i].version||v[i].Version||v[i].VERSION;typeof t==="string"&&(o[i]=t)}}catch(r){}return o.TrackJS&&o.trackJs&&delete o.trackJs,o},report:function(){return{age:(new Date()).getTime()-this.loadedOn,dependencies:this.config.current.dependencies?this.discoverDependencies():{trackJs:"3.10.4"},originalUrl:this.originalUrl,referrer:this.referrer,userAgent:v.navigator.userAgent,viewportHeight:s.isBrowser?v.document.documentElement.clientHeight:0,viewportWidth:s.isBrowser?v.document.documentElement.clientWidth:0}}};var H=function(o){this.util=o,this.appender=[],this.maxLength=30};H.prototype={all:function(o){var i=[],t,r;for(r=0;r<this.appender.length;r++)(t=this.appender[r])&&t.category===o&&i.push(t.value);return i},clear:function(){this.appender.length=0},truncate:function(){this.appender.length>this.maxLength&&(this.appender=this.appender.slice(Math.max(this.appender.length-this.maxLength,0)))},add:function(o,i){var t=this.util.uuid();return this.appender.push({key:t,category:o,value:i}),this.truncate(),t},get:function(o,i){var t,r;for(r=0;r<this.appender.length;r++)if(t=this.appender[r],t.category===o&&t.key===i)return t.value;return!1}};var Y=function(o){var i={};return{addMetadata:function(t,r){i[t]=r},removeMetadata:function(t){delete i[t]},report:function(){var t=[],r;for(r in i)i.hasOwnProperty(r)&&t.push({key:r,value:o(i[r])});return t},store:i}},Q=function(o,i){this.log=o,this.options=i,i.enabled&&this.watch()};Q.prototype={isCompatible:function(o){return o=o||v,!s.has(o,"chrome.app.runtime")&&s.has(o,"addEventListener")&&s.has(o,"history.pushState")},record:function(o,i,t){this.log.add("h",{type:o,from:s.truncate(i,250),to:s.truncate(t,250),on:s.isoNow()})},report:function(){return this.log.all("h")},watch:function(){if(this.isCompatible()){var o=this,i=s.getLocationURL().relative;v.addEventListener("popstate",function(){var t=s.getLocationURL().relative;o.record("popState",i,t),i=t},!0),s.forEach(["pushState","replaceState"],function(t){s.patch(history,t,function(r){return function(){i=s.getLocationURL().relative;var n=r.apply(this,arguments),p=s.getLocationURL().relative;return o.record(t,i,p),i=p,n}})})}}};var R=function(o,i,t,r,n,p){this.util=o,this.log=i,this.onError=t,this.onFault=r,this.window=n,this.options=p,p.enabled&&this.initialize(n)};R.prototype={initialize:function(o){o.XMLHttpRequest&&this.util.hasFunction(o.XMLHttpRequest.prototype.open,"apply")&&this.watchNetworkObject(o.XMLHttpRequest),o.XDomainRequest&&this.util.hasFunction(o.XDomainRequest.prototype.open,"apply")&&this.watchNetworkObject(o.XDomainRequest),this.options.fetch&&s.isWrappableFunction(o.fetch)&&this.watchFetch()},escapeUrl:function(o){return(""+o).replace(/ /gi,"%20").replace(/\t/gi,"%09")},watchFetch:function(){var o=this,i=this.log,t=this.options,r=this.onError;s.patch(v,"fetch",function(n){return function(p,_){if(_&&_.__trackjs__)return n.apply(v,arguments);var u;try{throw Error()}catch(I){u=I.stack}var N=p instanceof Request?p.url:p,j=p instanceof Request?p.method:(_||{}).method||"GET",N=o.escapeUrl(N),y=n.apply(v,arguments);return y.__trackjs_state__=i.add("n",{type:"fetch",startedOn:s.isoNow(),method:j,url:s.truncate(N,2000)}),y.then(function(I){var w=i.get("n",y.__trackjs_state__);if(w){s.defaults(w,{completedOn:s.isoNow(),statusCode:I.status,statusText:I.statusText});var X=I.headers.get("trackjs-correlation-id");X&&(w.requestCorrelationId=X),t.error&&400<=I.status&&(w=Error(w.statusCode+" : "+w.method+" "+w.url),w.stack=u,r("ajax",w))}return I}).catch(function(I){I=I||{};var w=i.get("n",y.__trackjs_state__);throw w&&(s.defaults(w,{completedOn:s.isoNow(),statusCode:0,statusText:I.toString()}),t.error&&(r("ajax",{name:I.name,message:(I.message||"Failed")+": "+w.method+" "+w.url,stack:I.stack||u}),I.__trackjs_state__=!0)),I})}})},watchNetworkObject:function(o){var i=this,t=o.prototype.open,r=o.prototype.send;return o.prototype.open=function(n,p){var _=(p||"").toString();return 0>_.indexOf("localhost:0")&&(_=i.escapeUrl(_),this._trackJs={method:n,url:_}),t.apply(this,arguments)},o.prototype.send=function(){if(!this._trackJs)try{return r.apply(this,arguments)}catch(n){i.onError("ajax",n);return}try{this._trackJs.logId=i.log.add("n",{type:"xhr",startedOn:i.util.isoNow(),method:this._trackJs.method,url:s.truncate(this._trackJs.url,2000)}),i.listenForNetworkComplete(this)}catch(n){i.onFault(n)}return r.apply(this,arguments)},o},listenForNetworkComplete:function(o){var i=this;i.window.ProgressEvent&&o.addEventListener&&o.addEventListener("readystatechange",function(){o.readyState===4&&i.finalizeNetworkEvent(o)},!0),o.addEventListener?o.addEventListener("load",function(){i.finalizeNetworkEvent(o),i.checkNetworkFault(o)},!0):setTimeout(function(){try{var t=o.onload;o.onload=function(){i.finalizeNetworkEvent(o),i.checkNetworkFault(o),typeof t==="function"&&i.util.hasFunction(t,"apply")&&t.apply(o,arguments)};var r=o.onerror;o.onerror=function(){i.finalizeNetworkEvent(o),i.checkNetworkFault(o),typeof oldOnError==="function"&&r.apply(o,arguments)}}catch(n){i.onFault(n)}},0)},finalizeNetworkEvent:function(o){if(o._trackJs){var i=this.log.get("n",o._trackJs.logId);i&&(i.completedOn=this.util.isoNow(),o.getAllResponseHeaders&&o.getResponseHeader&&0<=(o.getAllResponseHeaders()||"").toLowerCase().indexOf("trackjs-correlation-id")&&(i.requestCorrelationId=o.getResponseHeader("trackjs-correlation-id")),i.statusCode=o.status==1223?204:o.status,i.statusText=o.status==1223?"No Content":o.statusText)}},checkNetworkFault:function(o){if(this.options.error&&400<=o.status&&o.status!=1223){var i=o._trackJs||{};this.onError("ajax",o.status+" : "+i.method+" "+i.url)}},report:function(){return this.log.all("n")}};var $=function(o,i){this.util=o,this.config=i,this.disabled=!1,this.throttleStats={attemptCount:0,throttledCount:0,lastAttempt:(new Date()).getTime()},v.JSON&&v.JSON.stringify||(this.disabled=!0)};$.prototype={errorEndpoint:function(o){var i=this.config.current,t=i.errorURL;return s.isBrowser&&!s.testCrossdomainXhr()&&v.location.protocol.indexOf("https")===-1?t=i.errorNoSSLURL:i.forwardingDomain&&(t="https://"+i.forwardingDomain+"/capture"),t+"?token="+o+"&v=3.10.4"},usageEndpoint:function(o){var i=this.config.current,t=i.usageURL;return i.forwardingDomain&&(t="https://"+i.forwardingDomain+"/usage.gif"),this.appendObjectAsQuery(o,t)},trackerFaultEndpoint:function(o){var i=(this.config||{}).current||L.prototype.defaults,t=i.faultURL;return i.forwardingDomain&&(t="https://"+i.forwardingDomain+"/fault.gif"),this.appendObjectAsQuery(o,t)},appendObjectAsQuery:function(o,i){i+="?";for(var t in o)o.hasOwnProperty(t)&&(i+=encodeURIComponent(t)+"="+encodeURIComponent(o[t])+"&");return i},getCORSRequest:function(o,i){var t;return this.util.testCrossdomainXhr()?(t=new v.XMLHttpRequest,t.open(o,i),t.setRequestHeader("Content-Type","text/plain")):typeof v.XDomainRequest!=="undefined"?(t=new v.XDomainRequest,t.open(o,i)):t=null,t},sendTrackerFault:function(o){this.throttle(o)||(s.isBrowser?C.createElement("img").src=this.trackerFaultEndpoint(o):fetch(this.trackerFaultEndpoint(o),{mode:"no-cors",__trackjs__:!0}))},sendUsage:function(o){s.isBrowser?C.createElement("img").src=this.usageEndpoint(o):fetch(this.usageEndpoint(o),{mode:"no-cors",__trackjs__:!0})},sendError:function(o,i){var t=this;if(!this.disabled&&!this.throttle(o))try{if(s.isBrowser){var r=this.getCORSRequest("POST",this.errorEndpoint(i));r.onreadystatechange=function(){r.readyState!==4||s.contains([200,202],r.status)||(t.disabled=!0)},r._trackJs=F,r.send(v.JSON.stringify(o))}else if(s.isWorker){var n={method:"POST",mode:"cors",body:v.JSON.stringify(o),__trackjs__:1};fetch(this.errorEndpoint(i),n).then(function(p){p.ok||(t.disabled=!0)}).catch(function(p){t.disabled=!0})}}catch(p){throw this.disabled=!0,p}},throttle:function(o){var i=(new Date()).getTime();if(this.throttleStats.attemptCount++,this.throttleStats.lastAttempt+1000>=i){if(this.throttleStats.lastAttempt=i,10<this.throttleStats.attemptCount)return this.throttleStats.throttledCount++,!0}else o.throttled=this.throttleStats.throttledCount,this.throttleStats.attemptCount=0,this.throttleStats.lastAttempt=i,this.throttleStats.throttledCount=0;return!1}};var s=function(){function o(t,r,n,p){return n=n||!1,p=p||0,s.forEach(r,function(_){s.forEach(s.keys(_),function(u){_[u]===null||_[u]===F?t[u]=_[u]:n&&10>p&&i(_[u])==="[object Object]"?(t[u]=t[u]||{},o(t[u],[_[u]],n,p+1)):t.hasOwnProperty(u)||(t[u]=_[u])})}),t}function i(t){return Object.prototype.toString.call(t)}return{isBrowser:typeof v!=="undefined"&&typeof v.document!=="undefined",isWorker:typeof self==="object"&&self.constructor&&0<=(self.constructor.name||"").indexOf("WorkerGlobalScope"),isNode:typeof process!=="undefined"&&process.versions!=null&&process.versions.node!=null,addEventListenerSafe:function(t,r,n,p){t.addEventListener?t.addEventListener(r,n,p):t.attachEvent&&t.attachEvent("on"+r,n)},afterDocumentLoad:function(t){if(s.isWorker)s.defer(t);else{var r=!1;C.readyState==="complete"?s.defer(t):(s.addEventListenerSafe(C,"readystatechange",function(){C.readyState!=="complete"||r||(s.defer(t),r=!0)}),setTimeout(function(){r||(s.defer(t),r=!0)},1e4))}},bind:function(t,r){return function(){return t.apply(r,Array.prototype.slice.call(arguments))}},contains:function(t,r){return 0<=t.indexOf(r)},defaults:function(t){return o(t,Array.prototype.slice.call(arguments,1),!1)},defaultsDeep:function(t){return o(t,Array.prototype.slice.call(arguments,1),!0)},defer:function(t,r){setTimeout(function(){t.apply(r)})},forEach:function(t,r,n){if(s.isArray(t)){if(t.forEach)return t.forEach(r,n);for(var p=0;p<t.length;)r.call(n,t[p],p,t),p++}},getLocation:function(){return v.location.toString().replace(/ /g,"%20")},getLocationURL:function(){return s.parseURL(s.getLocation())},has:function(t,r){try{for(var n=r.split("."),p=t,_=0;_<n.length;_++)if(p[n[_]])p=p[n[_]];else return!1;return!0}catch(u){return!1}},hasFunction:function(t,r){try{return!!t[r]}catch(n){return!1}},hasOwn:function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},isArray:function(t){return i(t)==="[object Array]"},isBoolean:function(t){return typeof t==="boolean"||s.isObject(t)&&i(t)==="[object Boolean]"},isBrowserIE:function(t){t=t||v.navigator.userAgent;var r=t.match(/Trident\/([\d.]+)/);return r&&r[1]==="7.0"?11:(t=t.match(/MSIE ([\d.]+)/))?parseInt(t[1],10):!1},isBrowserSupported:function(){var t=this.isBrowserIE();return!t||8<=t},isError:function(t){if(!s.isObject(t))return!1;var r=i(t);return r==="[object Error]"||r==="[object DOMException]"||s.isString(t.name)&&s.isString(t.message)},isElement:function(t){return s.isObject(t)&&t.nodeType===1},isFunction:function(t){return!(!t||typeof t!=="function")},isNumber:function(t){return typeof t==="number"||s.isObject(t)&&i(t)==="[object Number]"},isObject:function(t){return!(!t||typeof t!=="object")},isString:function(t){return typeof t==="string"||!s.isArray(t)&&s.isObject(t)&&i(t)==="[object String]"},isWrappableFunction:function(t){return this.isFunction(t)&&this.hasFunction(t,"apply")},isoNow:function(){var t=new Date;return t.toISOString?t.toISOString():t.getUTCFullYear()+"-"+this.pad(t.getUTCMonth()+1)+"-"+this.pad(t.getUTCDate())+"T"+this.pad(t.getUTCHours())+":"+this.pad(t.getUTCMinutes())+":"+this.pad(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"},keys:function(t){if(!s.isObject(t))return[];var r=[],n;for(n in t)t.hasOwnProperty(n)&&r.push(n);return r},noop:function(){},pad:function(t){return t=String(t),t.length===1&&(t="0"+t),t},parseURL:function(t){var r=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!r)return{};return r={protocol:r[2],host:r[4],path:r[5],query:r[6],hash:r[8]},r.origin=(r.protocol||"")+"://"+(r.host||""),r.relative=(r.path||"")+(r.query||"")+(r.hash||""),r.href=t,r},patch:function(t,r,n){t[r]=n(t[r]||s.noop)},testCrossdomainXhr:function(){return s.isBrowser&&"withCredentials"in new XMLHttpRequest},truncate:function(t,r){if(t=""+t,t.length<=r)return t;var n=t.length-r;return t.substr(0,r)+"...{"+n+"}"},tryGet:function(t,r){try{return t[r]}catch(n){}},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=16*Math.random()|0;return(t=="x"?r:r&3|8).toString(16)})},wrapError:function(t){var r=t||Object.prototype.toString.call(t);if(r&&r.innerError)return t;var n=Error("TrackJS Caught: "+(r.message||r));return n.description="TrackJS Caught: "+r.description,n.file=r.file,n.line=r.line||r.lineNumber,n.column=r.column||r.columnNumber,n.stack=r.stack,n.innerError=t,n}}}(),T=function(o,i,t,r,n,p){this.util=o,this.log=i,this.onError=t,this.onFault=r,this.options=p,this.document=n,o.isBrowser&&p.enabled&&this.initialize(n)};T.prototype={initialize:function(o){var i=this.util.bind(this.onDocumentClicked,this),t=this.util.bind(this.onInputChanged,this);o.addEventListener?(o.addEventListener("click",i,!0),o.addEventListener("blur",t,!0)):o.attachEvent&&(o.attachEvent("onclick",i),o.attachEvent("onfocusout",t))},onDocumentClicked:function(o){try{var i=this.getElementFromEvent(o);i&&i.tagName&&(this.isDescribedElement(i,"a")||this.isDescribedElement(i,"button")||this.isDescribedElement(i,"input",["button","submit"])?this.writeVisitorEvent(i,"click"):this.isDescribedElement(i,"input",["checkbox","radio"])&&this.writeVisitorEvent(i,"input",i.value,i.checked))}catch(t){this.onFault(t)}},onInputChanged:function(o){try{var i=this.getElementFromEvent(o);if(i&&i.tagName)if(this.isDescribedElement(i,"textarea"))this.writeVisitorEvent(i,"input",i.value);else if(this.isDescribedElement(i,"select")&&i.options&&i.options.length)this.onSelectInputChanged(i);else this.isDescribedElement(i,"input")&&!this.isDescribedElement(i,"input",["button","submit","hidden","checkbox","radio"])&&this.writeVisitorEvent(i,"input",i.value)}catch(t){this.onFault(t)}},onSelectInputChanged:function(o){if(o.multiple)for(var i=0;i<o.options.length;i++)o.options[i].selected&&this.writeVisitorEvent(o,"input",o.options[i].value);else 0<=o.selectedIndex&&o.options[o.selectedIndex]&&this.writeVisitorEvent(o,"input",o.options[o.selectedIndex].value)},writeVisitorEvent:function(o,i,t,r){this.getElementType(o)==="password"&&(t=F);var n=this.getElementAttributes(o);o.innerText&&(n.__trackjs_element_text=this.util.truncate(o.innerText,500)),this.log.add("v",{timestamp:this.util.isoNow(),action:i,element:{tag:o.tagName.toLowerCase(),attributes:n,value:this.getMetaValue(t,r)}})},getElementFromEvent:function(o){return o.target||C.elementFromPoint(o.clientX,o.clientY)},isDescribedElement:function(o,i,t){if(o.tagName.toLowerCase()!==i.toLowerCase())return!1;if(!t)return!0;o=this.getElementType(o);for(i=0;i<t.length;i++)if(t[i]===o)return!0;return!1},getElementType:function(o){return(o.getAttribute("type")||"").toLowerCase()},getElementAttributes:function(o){for(var i={},t=Math.min(o.attributes.length,10),r=0;r<t;r++){var n=o.attributes[r];s.contains(["data-value","value"],n.name.toLowerCase())||(i[n.name]=s.truncate(n.value,100))}return i},getMetaValue:function(o,i){return o===F?F:{length:o.length,pattern:this.matchInputPattern(o),checked:i}},matchInputPattern:function(o){return o===""?"empty":/^[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(o)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(o)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(o)?"date":/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(o)?"usphone":/^\s*$/.test(o)?"whitespace":/^\d*$/.test(o)?"numeric":/^[a-zA-Z]*$/.test(o)?"alpha":/^[a-zA-Z0-9]*$/.test(o)?"alphanumeric":"characters"},report:function(){return this.log.all("v")}};var U=function(o,i,t,r,n){this.onError=o,this.onFault=i,this.serialize=t,n.enabled&&this.watchWindowErrors(r),n.promise&&this.watchPromiseErrors(r)};U.prototype={watchPromiseErrors:function(o){var i=this;o.addEventListener?o.addEventListener("unhandledrejection",function(t){try{t=t||{};var r=t.detail?s.tryGet(t.detail,"reason"):s.tryGet(t,"reason");if(r!==F&&r!==null&&!r.__trackjs_state__){if(!s.isError(r))try{throw Error(i.serialize(r))}catch(n){r=n}i.onError("promise",r)}}catch(n){i.onFault(n)}}):s.patch(o,"onunhandledrejection",function(t){return function(r){i.onError("promise",r),t.apply(this,arguments)}})},watchWindowErrors:function(o){var i=this;s.patch(o,"onerror",function(t){return function(r,n,p,_,u){try{if(s.isError(u)){i.onError("window",u),t.apply(this,arguments);return}u=u||{};var j={message:u.message||i.serialize(r),name:u.name||"Error",line:u.line||parseInt(p,10)||null,column:u.column||parseInt(_,10)||null,stack:u.stack||null};Object.prototype.toString.call(r)!=="[object Event]"||n?j.file=u.file||i.serialize(n):j.file=(r.target||{}).src,i.onError("window",j)}catch(N){i.onFault(N)}t.apply(this,arguments)}})}};var V=function(){this.hasInstalled=!1,this.hasEnabled=!0,this.window=v,this.document=C,this.util=s,this.install=s.bind(this.install,this),this.onError=s.bind(this.onError,this),this.onFault=s.bind(this.onFault,this),this.serialize=s.bind(this.serialize,this),this.log=new H(s),this.metadata=new Y(this.serialize);var o=v&&(v._trackJs||v._trackJS||v._trackjs);o&&this.install(o)};return V.prototype={install:function(o){try{if(s.isNode)return this.warn("monitoring disabled in node"),!1;if(!s.has(o,"token"))return this.warn("missing token"),!1;if(this.hasInstalled)return this.warn("already installed"),!1;if(this.config=new L(o),this.transmitter=new $(this.util,this.config),this.environment=new G(this.config),this.customer=new z(this.config,this.util,this.log,this.window,this.document),!this.config.current.enabled)return this.hasEnabled=!1;if(this.windowConsoleWatcher=new Z(this.util,this.log,this.onError,this.onFault,this.serialize,this.window,this.config.current.console),!this.util.isBrowserSupported())return!1;this.callbackWatcher=new E(this.config.current.callback,this.onError,this.onFault),this.visitorWatcher=new T(this.util,this.log,this.onError,this.onFault,this.document,this.config.current.visitor),this.navigationWatcher=new Q(this.log,this.config.current.navigation),this.networkWatcher=new R(this.util,this.log,this.onError,this.onFault,this.window,this.config.current.network),this.windowWatcher=new U(this.onError,this.onFault,this.serialize,this.window,this.config.current.window);var i=this;return s.afterDocumentLoad(function(){i.transmitter.sendUsage({token:i.customer.token,correlationId:i.customer.correlationId,application:i.config.current.application,x:i.util.uuid()})}),this.hasInstalled=!0}catch(t){return this.onFault(t),!1}},pub:function(){var o=this,i={addMetadata:this.metadata.addMetadata,attempt:function(t,r){try{var n=Array.prototype.slice.call(arguments,2);return t.apply(r||this,n)}catch(p){throw o.onError("catch",p),s.wrapError(p)}},configure:function(t){return!o.hasInstalled&&o.hasEnabled?(o.warn("agent must be installed"),!1):o.config.setCurrent(t)},hash:"ee2d3930f78cfd8bb97c23558688dedfac2d12ce",isInstalled:function(){return o.hasInstalled},install:this.install,removeMetadata:this.metadata.removeMetadata,track:function(t){if(!o.hasInstalled&&o.hasEnabled)o.warn("agent must be installed");else{var r=s.isError(t)?t.message:o.serialize(t);if(t=t||{},!t.stack)try{throw Error(r)}catch(n){t=n}o.onError("direct",t)}},version:"3.10.4",watch:function(t,r){return function(){try{var n=Array.prototype.slice.call(arguments,0);return t.apply(r||this,n)}catch(p){throw o.onError("catch",p),s.wrapError(p)}}},watchAll:function(t){var r=Array.prototype.slice.call(arguments,1),n;for(n in t)typeof t[n]!=="function"||s.contains(r,n)||(t[n]=this.watch(t[n],t));return t}};return new Z(s,o.log,o.onError,o.onFault,o.serialize,i,L.prototype.defaults.console),i},onError:function(){var o,i=!1;return function(t,r,n){if(this.hasInstalled&&this.hasEnabled&&s.isBrowserSupported())try{if(n=n||{bindStack:null,bindTime:null,force:!1},r&&s.isError(r)||(r={name:"Error",message:this.serialize(r,n.force)}),r.message.indexOf("TrackJS Caught")===-1)if(i&&r.message.indexOf("Script error")!==-1)i=!1;else{var p=s.defaultsDeep({},{agentPlatform:s.isBrowser?"browser":"worker",bindStack:n.bindStack,bindTime:n.bindTime,column:r.column||r.columnNumber,console:this.windowConsoleWatcher.report(),customer:this.customer.report(),entry:t,environment:this.environment.report(),file:r.file||r.fileName,line:r.line||r.lineNumber,message:r.message,metadata:this.metadata.report(),nav:this.navigationWatcher.report(),network:this.networkWatcher.report(),url:(v.location||"").toString(),stack:r.stack,timestamp:this.util.isoNow(),visitor:this.visitorWatcher.report(),version:"3.10.4"});if(!n.force)try{if(!this.config.current.onError(p,r))return}catch(j){p.console.push({timestamp:this.util.isoNow(),severity:"error",message:j.message});var _=this;setTimeout(function(){_.onError("catch",j,{force:!0})},0)}if(this.config.current.dedupe){var u=(p.message+p.stack).substr(0,1e4);if(u===o)return;o=u}(function(){function j(){var y=0;return s.forEach(p.console,function(I){y+=(I.message||"").length}),80000<=y}for(var N=0;j()&&N<p.console.length;)p.console[N].message=s.truncate(p.console[N].message,1000),N++})(),this.log.clear(),setTimeout(function(){i=!1}),i=!0,this.transmitter.sendError(p,this.customer.token)}}catch(j){this.onFault(j)}}}(),onFault:function(o){var i=this.transmitter||new $;o=o||{},o={token:(this.customer||{}).token,file:o.file||o.fileName,msg:o.message||"unknown",stack:(o.stack||"unknown").substr(0,1000),url:this.window.location,v:"3.10.4",h:"ee2d3930f78cfd8bb97c23558688dedfac2d12ce",x:this.util.uuid()},i.sendTrackerFault(o)},serialize:function(o,i){if(this.hasInstalled&&this.config.current.serialize&&!i)try{return this.config.current.serialize(o)}catch(t){this.onError("catch",t,{force:!0})}return L.prototype.defaults.serialize(o)},warn:function(o){s.has(v,"console.warn")&&v.console.warn("TrackJS: "+o)}},new V().pub()}(typeof self==="undefined"?void 0:self,typeof document==="undefined"?void 0:document);var W;(function(F){F["INIT_DATA"]="initData";F["LOG_ERROR_EXTERNALLY"]="logErrorExternally"})(W||(W={}));class x{casinoChannel;trackingActive=!1;constructor(){this.casinoChannel=window.hacksawCasino.PubSub.getChannel("casino"),this.start(),this.setupErrorHandlers()}async start(){this.casinoChannel.subscribe(W.INIT_DATA,(v)=>{const F=new RegExp("_ci$|_test$").test(v.partner);if(this.trackingActive=v.deployEnv!=="{local}"&&!F,this.trackingActive)O.install({token:"e1e103d743194be28fb1aa6ffee15a5d",application:this.createSlugFromName(String(v.gameName)),userId:v.playerId,sessionId:v.sessionUuid,version:v.gameVersion,console:{error:!1,warn:!1},callback:{enabled:!1},network:{error:!1},window:{enabled:!1,promise:!1}}),O.addMetadata("gameVersion",v.gameVersion)})}setupErrorHandlers(){this.casinoChannel.subscribe(W.LOG_ERROR_EXTERNALLY,(v)=>{if(this.trackingActive&&v.errorWarning===""){const C=["gameName","gameId","packageName","replayUrl","channel","partner","currency","branding","elapsed","freeRoundMode","featureBuy","autoplayMode","env","activePromotion","turbospin","superTurbospin","orientation","errorSource","errorStack"];for(let[F,E]of Object.entries(v)){if(!C.includes(F)||E==="")continue;O.addMetadata(F,String(E))}O.track(String(v.errorMessage))}})}createSlugFromName(v){return v.replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").toLowerCase()}}new x;
